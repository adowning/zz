! function(t) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = t();
    else if ("function" == typeof define && define.amd) define([], t);
    else {
        var e;
        e = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, e.PIXI = t()
    }
}(function() {
    var t;
    return function() {
        function t(e, r, n) {
            function i(s, a) {
                if (!r[s]) {
                    if (!e[s]) {
                        var u = "function" == typeof require && require;
                        if (!a && u) return u(s, !0);
                        if (o) return o(s, !0);
                        var h = new Error("Cannot find module '" + s + "'");
                        throw h.code = "MODULE_NOT_FOUND", h
                    }
                    var l = r[s] = {
                        exports: {}
                    };
                    e[s][0].call(l.exports, function(t) {
                        return i(e[s][1][t] || t)
                    }, l, l.exports, t, e, r, n)
                }
                return r[s].exports
            }
            for (var o = "function" == typeof require && require, s = 0; s < n.length; s++) i(n[s]);
            return i
        }
        return t
    }()({
        1: [function(t, e, r) {
            "use strict";
            "use restrict";

            function n(t) {
                var e = 32;
                return t &= -t, t && e--, 65535 & t && (e -= 16), 16711935 & t && (e -= 8), 252645135 & t && (e -= 4), 858993459 & t && (e -= 2), 1431655765 & t && (e -= 1), e
            }
            r.INT_BITS = 32, r.INT_MAX = 2147483647, r.INT_MIN = -1 << 31, r.sign = function(t) {
                return (t > 0) - (t < 0)
            }, r.abs = function(t) {
                var e = t >> 31;
                return (t ^ e) - e
            }, r.min = function(t, e) {
                return e ^ (t ^ e) & -(t < e)
            }, r.max = function(t, e) {
                return t ^ (t ^ e) & -(t < e)
            }, r.isPow2 = function(t) {
                return !(t & t - 1 || !t)
            }, r.log2 = function(t) {
                var e, r;
                return e = (t > 65535) << 4, t >>>= e, r = (t > 255) << 3, t >>>= r, e |= r, r = (t > 15) << 2, t >>>= r, e |= r, r = (t > 3) << 1, t >>>= r, (e |= r) | t >> 1
            }, r.log10 = function(t) {
                return t >= 1e9 ? 9 : t >= 1e8 ? 8 : t >= 1e7 ? 7 : t >= 1e6 ? 6 : t >= 1e5 ? 5 : t >= 1e4 ? 4 : t >= 1e3 ? 3 : t >= 100 ? 2 : t >= 10 ? 1 : 0
            }, r.popCount = function(t) {
                return t -= t >>> 1 & 1431655765, 16843009 * ((t = (858993459 & t) + (t >>> 2 & 858993459)) + (t >>> 4) & 252645135) >>> 24
            }, r.countTrailingZeros = n, r.nextPow2 = function(t) {
                return t += 0 === t, --t, t |= t >>> 1, t |= t >>> 2, t |= t >>> 4, t |= t >>> 8, 1 + (t |= t >>> 16)
            }, r.prevPow2 = function(t) {
                return t |= t >>> 1, t |= t >>> 2, t |= t >>> 4, t |= t >>> 8, (t |= t >>> 16) - (t >>> 1)
            }, r.parity = function(t) {
                return t ^= t >>> 16, t ^= t >>> 8, t ^= t >>> 4, 27030 >>> (t &= 15) & 1
            };
            var i = new Array(256);
            ! function(t) {
                for (var e = 0; e < 256; ++e) {
                    var r = e,
                        n = e,
                        i = 7;
                    for (r >>>= 1; r; r >>>= 1) n <<= 1, n |= 1 & r, --i;
                    t[e] = n << i & 255
                }
            }(i), r.reverse = function(t) {
                return i[255 & t] << 24 | i[t >>> 8 & 255] << 16 | i[t >>> 16 & 255] << 8 | i[t >>> 24 & 255]
            }, r.interleave2 = function(t, e) {
                return t &= 65535, t = 16711935 & (t | t << 8), t = 252645135 & (t | t << 4), t = 858993459 & (t | t << 2), t = 1431655765 & (t | t << 1), e &= 65535, e = 16711935 & (e | e << 8), e = 252645135 & (e | e << 4), e = 858993459 & (e | e << 2), e = 1431655765 & (e | e << 1), t | e << 1
            }, r.deinterleave2 = function(t, e) {
                return t = t >>> e & 1431655765, t = 858993459 & (t | t >>> 1), t = 252645135 & (t | t >>> 2), t = 16711935 & (t | t >>> 4), (t = 65535 & (t | t >>> 16)) << 16 >> 16
            }, r.interleave3 = function(t, e, r) {
                return t &= 1023, t = 4278190335 & (t | t << 16), t = 251719695 & (t | t << 8), t = 3272356035 & (t | t << 4), t = 1227133513 & (t | t << 2), e &= 1023, e = 4278190335 & (e | e << 16), e = 251719695 & (e | e << 8), e = 3272356035 & (e | e << 4), e = 1227133513 & (e | e << 2), t |= e << 1, r &= 1023, r = 4278190335 & (r | r << 16), r = 251719695 & (r | r << 8), r = 3272356035 & (r | r << 4), r = 1227133513 & (r | r << 2), t | r << 2
            }, r.deinterleave3 = function(t, e) {
                return t = t >>> e & 1227133513, t = 3272356035 & (t | t >>> 2), t = 251719695 & (t | t >>> 4), t = 4278190335 & (t | t >>> 8), (t = 1023 & (t | t >>> 16)) << 22 >> 22
            }, r.nextCombination = function(t) {
                var e = t | t - 1;
                return e + 1 | (~e & -~e) - 1 >>> n(t) + 1
            }
        }, {}],
        2: [function(t, e, r) {
            "use strict";

            function n(t, e, r) {
                r = r || 2;
                var n = e && e.length,
                    o = n ? e[0] * r : t.length,
                    a = i(t, 0, o, r, !0),
                    u = [];
                if (!a) return u;
                var h, l, d, f, p, v, g;
                if (n && (a = c(t, e, a, r)), t.length > 80 * r) {
                    h = d = t[0], l = f = t[1];
                    for (var y = r; y < o; y += r) p = t[y], v = t[y + 1], p < h && (h = p), v < l && (l = v), p > d && (d = p), v > f && (f = v);
                    g = Math.max(d - h, f - l), g = 0 !== g ? 1 / g : 0
                }
                return s(a, u, r, h, l, g), u
            }

            function i(t, e, r, n, i) {
                var o, s;
                if (i === A(t, e, r, n) > 0)
                    for (o = e; o < r; o += n) s = P(o, t[o], t[o + 1], s);
                else
                    for (o = r - n; o >= e; o -= n) s = P(o, t[o], t[o + 1], s);
                return s && T(s, s.next) && (C(s), s = s.next), s
            }

            function o(t, e) {
                if (!t) return t;
                e || (e = t);
                var r, n = t;
                do {
                    if (r = !1, n.steiner || !T(n, n.next) && 0 !== x(n.prev, n, n.next)) n = n.next;
                    else {
                        if (C(n), (n = e = n.prev) === n.next) break;
                        r = !0
                    }
                } while (r || n !== e);
                return e
            }

            function s(t, e, r, n, i, c, d) {
                if (t) {
                    !d && c && v(t, n, i, c);
                    for (var f, p, g = t; t.prev !== t.next;)
                        if (f = t.prev, p = t.next, c ? u(t, n, i, c) : a(t)) e.push(f.i / r), e.push(t.i / r), e.push(p.i / r), C(t), t = p.next, g = p.next;
                        else if ((t = p) === g) {
                        d ? 1 === d ? (t = h(t, e, r), s(t, e, r, n, i, c, 2)) : 2 === d && l(t, e, r, n, i, c) : s(o(t), e, r, n, i, c, 1);
                        break
                    }
                }
            }

            function a(t) {
                var e = t.prev,
                    r = t,
                    n = t.next;
                if (x(e, r, n) >= 0) return !1;
                for (var i = t.next.next; i !== t.prev;) {
                    if (_(e.x, e.y, r.x, r.y, n.x, n.y, i.x, i.y) && x(i.prev, i, i.next) >= 0) return !1;
                    i = i.next
                }
                return !0
            }

            function u(t, e, r, n) {
                var i = t.prev,
                    o = t,
                    s = t.next;
                if (x(i, o, s) >= 0) return !1;
                for (var a = i.x < o.x ? i.x < s.x ? i.x : s.x : o.x < s.x ? o.x : s.x, u = i.y < o.y ? i.y < s.y ? i.y : s.y : o.y < s.y ? o.y : s.y, h = i.x > o.x ? i.x > s.x ? i.x : s.x : o.x > s.x ? o.x : s.x, l = i.y > o.y ? i.y > s.y ? i.y : s.y : o.y > s.y ? o.y : s.y, c = y(a, u, e, r, n), d = y(h, l, e, r, n), f = t.prevZ, p = t.nextZ; f && f.z >= c && p && p.z <= d;) {
                    if (f !== t.prev && f !== t.next && _(i.x, i.y, o.x, o.y, s.x, s.y, f.x, f.y) && x(f.prev, f, f.next) >= 0) return !1;
                    if (f = f.prevZ, p !== t.prev && p !== t.next && _(i.x, i.y, o.x, o.y, s.x, s.y, p.x, p.y) && x(p.prev, p, p.next) >= 0) return !1;
                    p = p.nextZ
                }
                for (; f && f.z >= c;) {
                    if (f !== t.prev && f !== t.next && _(i.x, i.y, o.x, o.y, s.x, s.y, f.x, f.y) && x(f.prev, f, f.next) >= 0) return !1;
                    f = f.prevZ
                }
                for (; p && p.z <= d;) {
                    if (p !== t.prev && p !== t.next && _(i.x, i.y, o.x, o.y, s.x, s.y, p.x, p.y) && x(p.prev, p, p.next) >= 0) return !1;
                    p = p.nextZ
                }
                return !0
            }

            function h(t, e, r) {
                var n = t;
                do {
                    var i = n.prev,
                        o = n.next.next;
                    !T(i, o) && w(i, n, n.next, o) && S(i, o) && S(o, i) && (e.push(i.i / r), e.push(n.i / r), e.push(o.i / r), C(n), C(n.next), n = t = o), n = n.next
                } while (n !== t);
                return n
            }

            function l(t, e, r, n, i, a) {
                var u = t;
                do {
                    for (var h = u.next.next; h !== u.prev;) {
                        if (u.i !== h.i && b(u, h)) {
                            var l = M(u, h);
                            return u = o(u, u.next), l = o(l, l.next), s(u, e, r, n, i, a), void s(l, e, r, n, i, a)
                        }
                        h = h.next
                    }
                    u = u.next
                } while (u !== t)
            }

            function c(t, e, r, n) {
                var s, a, u, h, l, c = [];
                for (s = 0, a = e.length; s < a; s++) u = e[s] * n, h = s < a - 1 ? e[s + 1] * n : t.length, l = i(t, u, h, n, !1), l === l.next && (l.steiner = !0), c.push(m(l));
                for (c.sort(d), s = 0; s < c.length; s++) f(c[s], r), r = o(r, r.next);
                return r
            }

            function d(t, e) {
                return t.x - e.x
            }

            function f(t, e) {
                if (e = p(t, e)) {
                    var r = M(e, t);
                    o(r, r.next)
                }
            }

            function p(t, e) {
                var r, n = e,
                    i = t.x,
                    o = t.y,
                    s = -1 / 0;
                do {
                    if (o <= n.y && o >= n.next.y && n.next.y !== n.y) {
                        var a = n.x + (o - n.y) * (n.next.x - n.x) / (n.next.y - n.y);
                        if (a <= i && a > s) {
                            if (s = a, a === i) {
                                if (o === n.y) return n;
                                if (o === n.next.y) return n.next
                            }
                            r = n.x < n.next.x ? n : n.next
                        }
                    }
                    n = n.next
                } while (n !== e);
                if (!r) return null;
                if (i === s) return r.prev;
                var u, h = r,
                    l = r.x,
                    c = r.y,
                    d = 1 / 0;
                for (n = r.next; n !== h;) i >= n.x && n.x >= l && i !== n.x && _(o < c ? i : s, o, l, c, o < c ? s : i, o, n.x, n.y) && ((u = Math.abs(o - n.y) / (i - n.x)) < d || u === d && n.x > r.x) && S(n, t) && (r = n, d = u), n = n.next;
                return r
            }

            function v(t, e, r, n) {
                var i = t;
                do {
                    null === i.z && (i.z = y(i.x, i.y, e, r, n)), i.prevZ = i.prev, i.nextZ = i.next, i = i.next
                } while (i !== t);
                i.prevZ.nextZ = null, i.prevZ = null, g(i)
            }

            function g(t) {
                var e, r, n, i, o, s, a, u, h = 1;
                do {
                    for (r = t, t = null, o = null, s = 0; r;) {
                        for (s++, n = r, a = 0, e = 0; e < h && (a++, n = n.nextZ); e++);
                        for (u = h; a > 0 || u > 0 && n;) 0 !== a && (0 === u || !n || r.z <= n.z) ? (i = r, r = r.nextZ, a--) : (i = n, n = n.nextZ, u--), o ? o.nextZ = i : t = i, i.prevZ = o, o = i;
                        r = n
                    }
                    o.nextZ = null, h *= 2
                } while (s > 1);
                return t
            }

            function y(t, e, r, n, i) {
                return t = 32767 * (t - r) * i, e = 32767 * (e - n) * i, t = 16711935 & (t | t << 8), t = 252645135 & (t | t << 4), t = 858993459 & (t | t << 2), t = 1431655765 & (t | t << 1), e = 16711935 & (e | e << 8), e = 252645135 & (e | e << 4), e = 858993459 & (e | e << 2), e = 1431655765 & (e | e << 1), t | e << 1
            }

            function m(t) {
                var e = t,
                    r = t;
                do {
                    e.x < r.x && (r = e), e = e.next
                } while (e !== t);
                return r
            }

            function _(t, e, r, n, i, o, s, a) {
                return (i - s) * (e - a) - (t - s) * (o - a) >= 0 && (t - s) * (n - a) - (r - s) * (e - a) >= 0 && (r - s) * (o - a) - (i - s) * (n - a) >= 0
            }

            function b(t, e) {
                return t.next.i !== e.i && t.prev.i !== e.i && !E(t, e) && S(t, e) && S(e, t) && O(t, e)
            }

            function x(t, e, r) {
                return (e.y - t.y) * (r.x - e.x) - (e.x - t.x) * (r.y - e.y)
            }

            function T(t, e) {
                return t.x === e.x && t.y === e.y
            }

            function w(t, e, r, n) {
                return !!(T(t, e) && T(r, n) || T(t, n) && T(r, e)) || x(t, e, r) > 0 != x(t, e, n) > 0 && x(r, n, t) > 0 != x(r, n, e) > 0
            }

            function E(t, e) {
                var r = t;
                do {
                    if (r.i !== t.i && r.next.i !== t.i && r.i !== e.i && r.next.i !== e.i && w(r, r.next, t, e)) return !0;
                    r = r.next
                } while (r !== t);
                return !1
            }

            function S(t, e) {
                return x(t.prev, t, t.next) < 0 ? x(t, e, t.next) >= 0 && x(t, t.prev, e) >= 0 : x(t, e, t.prev) < 0 || x(t, t.next, e) < 0
            }

            function O(t, e) {
                var r = t,
                    n = !1,
                    i = (t.x + e.x) / 2,
                    o = (t.y + e.y) / 2;
                do {
                    r.y > o != r.next.y > o && r.next.y !== r.y && i < (r.next.x - r.x) * (o - r.y) / (r.next.y - r.y) + r.x && (n = !n), r = r.next
                } while (r !== t);
                return n
            }

            function M(t, e) {
                var r = new R(t.i, t.x, t.y),
                    n = new R(e.i, e.x, e.y),
                    i = t.next,
                    o = e.prev;
                return t.next = e, e.prev = t, r.next = i, i.prev = r, n.next = r, r.prev = n, o.next = n, n.prev = o, n
            }

            function P(t, e, r, n) {
                var i = new R(t, e, r);
                return n ? (i.next = n.next, i.prev = n, n.next.prev = i, n.next = i) : (i.prev = i, i.next = i), i
            }

            function C(t) {
                t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), t.nextZ && (t.nextZ.prevZ = t.prevZ)
            }

            function R(t, e, r) {
                this.i = t, this.x = e, this.y = r, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1
            }

            function A(t, e, r, n) {
                for (var i = 0, o = e, s = r - n; o < r; o += n) i += (t[s] - t[o]) * (t[o + 1] + t[s + 1]), s = o;
                return i
            }
            e.exports = n, e.exports.default = n, n.deviation = function(t, e, r, n) {
                var i = e && e.length,
                    o = i ? e[0] * r : t.length,
                    s = Math.abs(A(t, 0, o, r));
                if (i)
                    for (var a = 0, u = e.length; a < u; a++) {
                        var h = e[a] * r,
                            l = a < u - 1 ? e[a + 1] * r : t.length;
                        s -= Math.abs(A(t, h, l, r))
                    }
                var c = 0;
                for (a = 0; a < n.length; a += 3) {
                    var d = n[a] * r,
                        f = n[a + 1] * r,
                        p = n[a + 2] * r;
                    c += Math.abs((t[d] - t[p]) * (t[f + 1] - t[d + 1]) - (t[d] - t[f]) * (t[p + 1] - t[d + 1]))
                }
                return 0 === s && 0 === c ? 0 : Math.abs((c - s) / s)
            }, n.flatten = function(t) {
                for (var e = t[0][0].length, r = {
                        vertices: [],
                        holes: [],
                        dimensions: e
                    }, n = 0, i = 0; i < t.length; i++) {
                    for (var o = 0; o < t[i].length; o++)
                        for (var s = 0; s < e; s++) r.vertices.push(t[i][o][s]);
                    i > 0 && (n += t[i - 1].length, r.holes.push(n))
                }
                return r
            }
        }, {}],
        3: [function(t, e, r) {
            "use strict";

            function n() {}

            function i(t, e, r) {
                this.fn = t, this.context = e, this.once = r || !1
            }

            function o() {
                this._events = new n, this._eventsCount = 0
            }
            var s = Object.prototype.hasOwnProperty,
                a = "~";
            Object.create && (n.prototype = Object.create(null), (new n).__proto__ || (a = !1)), o.prototype.eventNames = function() {
                var t, e, r = [];
                if (0 === this._eventsCount) return r;
                for (e in t = this._events) s.call(t, e) && r.push(a ? e.slice(1) : e);
                return Object.getOwnPropertySymbols ? r.concat(Object.getOwnPropertySymbols(t)) : r
            }, o.prototype.listeners = function(t, e) {
                var r = a ? a + t : t,
                    n = this._events[r];
                if (e) return !!n;
                if (!n) return [];
                if (n.fn) return [n.fn];
                for (var i = 0, o = n.length, s = new Array(o); i < o; i++) s[i] = n[i].fn;
                return s
            }, o.prototype.emit = function(t, e, r, n, i, o) {
                var s = a ? a + t : t;
                if (!this._events[s]) return !1;
                var u, h, l = this._events[s],
                    c = arguments.length;
                if (l.fn) {
                    switch (l.once && this.removeListener(t, l.fn, void 0, !0), c) {
                        case 1:
                            return l.fn.call(l.context), !0;
                        case 2:
                            return l.fn.call(l.context, e), !0;
                        case 3:
                            return l.fn.call(l.context, e, r), !0;
                        case 4:
                            return l.fn.call(l.context, e, r, n), !0;
                        case 5:
                            return l.fn.call(l.context, e, r, n, i), !0;
                        case 6:
                            return l.fn.call(l.context, e, r, n, i, o), !0
                    }
                    for (h = 1, u = new Array(c - 1); h < c; h++) u[h - 1] = arguments[h];
                    l.fn.apply(l.context, u)
                } else {
                    var d, f = l.length;
                    for (h = 0; h < f; h++) switch (l[h].once && this.removeListener(t, l[h].fn, void 0, !0), c) {
                        case 1:
                            l[h].fn.call(l[h].context);
                            break;
                        case 2:
                            l[h].fn.call(l[h].context, e);
                            break;
                        case 3:
                            l[h].fn.call(l[h].context, e, r);
                            break;
                        case 4:
                            l[h].fn.call(l[h].context, e, r, n);
                            break;
                        default:
                            if (!u)
                                for (d = 1, u = new Array(c - 1); d < c; d++) u[d - 1] = arguments[d];
                            l[h].fn.apply(l[h].context, u)
                    }
                }
                return !0
            }, o.prototype.on = function(t, e, r) {
                var n = new i(e, r || this),
                    o = a ? a + t : t;
                return this._events[o] ? this._events[o].fn ? this._events[o] = [this._events[o], n] : this._events[o].push(n) : (this._events[o] = n, this._eventsCount++), this
            }, o.prototype.once = function(t, e, r) {
                var n = new i(e, r || this, !0),
                    o = a ? a + t : t;
                return this._events[o] ? this._events[o].fn ? this._events[o] = [this._events[o], n] : this._events[o].push(n) : (this._events[o] = n, this._eventsCount++), this
            }, o.prototype.removeListener = function(t, e, r, i) {
                var o = a ? a + t : t;
                if (!this._events[o]) return this;
                if (!e) return 0 == --this._eventsCount ? this._events = new n : delete this._events[o], this;
                var s = this._events[o];
                if (s.fn) s.fn !== e || i && !s.once || r && s.context !== r || (0 == --this._eventsCount ? this._events = new n : delete this._events[o]);
                else {
                    for (var u = 0, h = [], l = s.length; u < l; u++)(s[u].fn !== e || i && !s[u].once || r && s[u].context !== r) && h.push(s[u]);
                    h.length ? this._events[o] = 1 === h.length ? h[0] : h : 0 == --this._eventsCount ? this._events = new n : delete this._events[o]
                }
                return this
            }, o.prototype.removeAllListeners = function(t) {
                var e;
                return t ? (e = a ? a + t : t, this._events[e] && (0 == --this._eventsCount ? this._events = new n : delete this._events[e])) : (this._events = new n, this._eventsCount = 0), this
            }, o.prototype.off = o.prototype.removeListener, o.prototype.addListener = o.prototype.on, o.prototype.setMaxListeners = function() {
                return this
            }, o.prefixed = a, o.EventEmitter = o, void 0 !== e && (e.exports = o)
        }, {}],
        4: [function(e, r, n) {
            ! function(e) {
                var n = /iPhone/i,
                    i = /iPod/i,
                    o = /iPad/i,
                    s = /(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,
                    a = /Android/i,
                    u = /(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,
                    h = /(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,
                    l = /Windows Phone/i,
                    c = /(?=.*\bWindows\b)(?=.*\bARM\b)/i,
                    d = /BlackBerry/i,
                    f = /BB10/i,
                    p = /Opera Mini/i,
                    v = /(CriOS|Chrome)(?=.*\bMobile\b)/i,
                    g = /(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,
                    y = new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)", "i"),
                    m = function(t, e) {
                        return t.test(e)
                    },
                    _ = function(t) {
                        var e = t || navigator.userAgent,
                            r = e.split("[FBAN");
                        if (void 0 !== r[1] && (e = r[0]), r = e.split("Twitter"), void 0 !== r[1] && (e = r[0]), this.apple = {
                                phone: m(n, e),
                                ipod: m(i, e),
                                tablet: !m(n, e) && m(o, e),
                                device: m(n, e) || m(i, e) || m(o, e)
                            }, this.amazon = {
                                phone: m(u, e),
                                tablet: !m(u, e) && m(h, e),
                                device: m(u, e) || m(h, e)
                            }, this.android = {
                                phone: m(u, e) || m(s, e),
                                tablet: !m(u, e) && !m(s, e) && (m(h, e) || m(a, e)),
                                device: m(u, e) || m(h, e) || m(s, e) || m(a, e)
                            }, this.windows = {
                                phone: m(l, e),
                                tablet: m(c, e),
                                device: m(l, e) || m(c, e)
                            }, this.other = {
                                blackberry: m(d, e),
                                blackberry10: m(f, e),
                                opera: m(p, e),
                                firefox: m(g, e),
                                chrome: m(v, e),
                                device: m(d, e) || m(f, e) || m(p, e) || m(g, e) || m(v, e)
                            }, this.seven_inch = m(y, e), this.any = this.apple.device || this.android.device || this.windows.device || this.other.device || this.seven_inch, this.phone = this.apple.phone || this.android.phone || this.windows.phone, this.tablet = this.apple.tablet || this.android.tablet || this.windows.tablet, "undefined" == typeof window) return this
                    },
                    b = function() {
                        var t = new _;
                        return t.Class = _, t
                    };
                void 0 !== r && r.exports && "undefined" == typeof window ? r.exports = _ : void 0 !== r && r.exports && "undefined" != typeof window ? r.exports = b() : "function" == typeof t && t.amd ? t("isMobile", [], e.isMobile = b()) : e.isMobile = b()
            }(this)
        }, {}],
        5: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                return t._head ? (t._tail._next = e, e._prev = t._tail, t._tail = e) : (t._head = e, t._tail = e), e._owner = t, e
            }
            Object.defineProperty(r, "__esModule", {
                value: !0
            });
            var o = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                s = function() {
                    function t(e, r, i) {
                        void 0 === r && (r = !1), n(this, t), this._fn = e, this._once = r, this._thisArg = i, this._next = this._prev = this._owner = null
                    }
                    return o(t, [{
                        key: "detach",
                        value: function() {
                            return null !== this._owner && (this._owner.detach(this), !0)
                        }
                    }]), t
                }(),
                a = function() {
                    function t() {
                        n(this, t), this._head = this._tail = void 0
                    }
                    return o(t, [{
                        key: "handlers",
                        value: function() {
                            var t = !(arguments.length <= 0 || void 0 === arguments[0]) && arguments[0],
                                e = this._head;
                            if (t) return !!e;
                            for (var r = []; e;) r.push(e), e = e._next;
                            return r
                        }
                    }, {
                        key: "has",
                        value: function(t) {
                            if (!(t instanceof s)) throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");
                            return t._owner === this
                        }
                    }, {
                        key: "dispatch",
                        value: function() {
                            var t = this._head;
                            if (!t) return !1;
                            for (; t;) t._once && this.detach(t), t._fn.apply(t._thisArg, arguments), t = t._next;
                            return !0
                        }
                    }, {
                        key: "add",
                        value: function(t) {
                            var e = arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1];
                            if ("function" != typeof t) throw new Error("MiniSignal#add(): First arg must be a Function.");
                            return i(this, new s(t, !1, e))
                        }
                    }, {
                        key: "once",
                        value: function(t) {
                            var e = arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1];
                            if ("function" != typeof t) throw new Error("MiniSignal#once(): First arg must be a Function.");
                            return i(this, new s(t, !0, e))
                        }
                    }, {
                        key: "detach",
                        value: function(t) {
                            if (!(t instanceof s)) throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");
                            return t._owner !== this ? this : (t._prev && (t._prev._next = t._next), t._next && (t._next._prev = t._prev), t === this._head ? (this._head = t._next, null === t._next && (this._tail = null)) : t === this._tail && (this._tail = t._prev, this._tail._next = null), t._owner = null, this)
                        }
                    }, {
                        key: "detachAll",
                        value: function() {
                            var t = this._head;
                            if (!t) return this;
                            for (this._head = this._tail = null; t;) t._owner = null, t = t._next;
                            return this
                        }
                    }]), t
                }();
            a.MiniSignalBinding = s, r.default = a, e.exports = r.default
        }, {}],
        6: [function(t, e, r) {
            "use strict";

            function n(t) {
                if (null === t || void 0 === t) throw new TypeError("Object.assign cannot be called with null or undefined");
                return Object(t)
            }
            var i = Object.getOwnPropertySymbols,
                o = Object.prototype.hasOwnProperty,
                s = Object.prototype.propertyIsEnumerable;
            e.exports = function() {
                try {
                    if (!Object.assign) return !1;
                    var t = new String("abc");
                    if (t[5] = "de", "5" === Object.getOwnPropertyNames(t)[0]) return !1;
                    for (var e = {}, r = 0; r < 10; r++) e["_" + String.fromCharCode(r)] = r;
                    if ("0123456789" !== Object.getOwnPropertyNames(e).map(function(t) {
                            return e[t]
                        }).join("")) return !1;
                    var n = {};
                    return "abcdefghijklmnopqrst".split("").forEach(function(t) {
                        n[t] = t
                    }), "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, n)).join("")
                } catch (t) {
                    return !1
                }
            }() ? Object.assign : function(t, e) {
                for (var r, a, u = n(t), h = 1; h < arguments.length; h++) {
                    r = Object(arguments[h]);
                    for (var l in r) o.call(r, l) && (u[l] = r[l]);
                    if (i) {
                        a = i(r);
                        for (var c = 0; c < a.length; c++) s.call(r, a[c]) && (u[a[c]] = r[a[c]])
                    }
                }
                return u
            }
        }, {}],
        7: [function(t, e, r) {
            "use strict";
            e.exports = function(t, e) {
                e = e || {};
                for (var r = {
                        key: ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"],
                        q: {
                            name: "queryKey",
                            parser: /(?:^|&)([^&=]*)=?([^&]*)/g
                        },
                        parser: {
                            strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
                            loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
                        }
                    }, n = r.parser[e.strictMode ? "strict" : "loose"].exec(t), i = {}, o = 14; o--;) i[r.key[o]] = n[o] || "";
                return i[r.q.name] = {}, i[r.key[12]].replace(r.q.parser, function(t, e, n) {
                    e && (i[r.q.name][e] = n)
                }), i
            }
        }, {}],
        8: [function(t, e, r) {
            (function(t) {
                function e(t, e) {
                    for (var r = 0, n = t.length - 1; n >= 0; n--) {
                        var i = t[n];
                        "." === i ? t.splice(n, 1) : ".." === i ? (t.splice(n, 1), r++) : r && (t.splice(n, 1), r--)
                    }
                    if (e)
                        for (; r--; r) t.unshift("..");
                    return t
                }

                function n(t, e) {
                    if (t.filter) return t.filter(e);
                    for (var r = [], n = 0; n < t.length; n++) e(t[n], n, t) && r.push(t[n]);
                    return r
                }
                var i = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,
                    o = function(t) {
                        return i.exec(t).slice(1)
                    };
                r.resolve = function() {
                    for (var r = "", i = !1, o = arguments.length - 1; o >= -1 && !i; o--) {
                        var s = o >= 0 ? arguments[o] : t.cwd();
                        if ("string" != typeof s) throw new TypeError("Arguments to path.resolve must be strings");
                        s && (r = s + "/" + r, i = "/" === s.charAt(0))
                    }
                    return r = e(n(r.split("/"), function(t) {
                        return !!t
                    }), !i).join("/"), (i ? "/" : "") + r || "."
                }, r.normalize = function(t) {
                    var i = r.isAbsolute(t),
                        o = "/" === s(t, -1);
                    return t = e(n(t.split("/"), function(t) {
                        return !!t
                    }), !i).join("/"), t || i || (t = "."), t && o && (t += "/"), (i ? "/" : "") + t
                }, r.isAbsolute = function(t) {
                    return "/" === t.charAt(0)
                }, r.join = function() {
                    var t = Array.prototype.slice.call(arguments, 0);
                    return r.normalize(n(t, function(t, e) {
                        if ("string" != typeof t) throw new TypeError("Arguments to path.join must be strings");
                        return t
                    }).join("/"))
                }, r.relative = function(t, e) {
                    function n(t) {
                        for (var e = 0; e < t.length && "" === t[e]; e++);
                        for (var r = t.length - 1; r >= 0 && "" === t[r]; r--);
                        return e > r ? [] : t.slice(e, r - e + 1)
                    }
                    t = r.resolve(t).substr(1), e = r.resolve(e).substr(1);
                    for (var i = n(t.split("/")), o = n(e.split("/")), s = Math.min(i.length, o.length), a = s, u = 0; u < s; u++)
                        if (i[u] !== o[u]) {
                            a = u;
                            break
                        } for (var h = [], u = a; u < i.length; u++) h.push("..");
                    return h = h.concat(o.slice(a)), h.join("/")
                }, r.sep = "/", r.delimiter = ":", r.dirname = function(t) {
                    var e = o(t),
                        r = e[0],
                        n = e[1];
                    return r || n ? (n && (n = n.substr(0, n.length - 1)), r + n) : "."
                }, r.basename = function(t, e) {
                    var r = o(t)[2];
                    return e && r.substr(-1 * e.length) === e && (r = r.substr(0, r.length - e.length)), r
                }, r.extname = function(t) {
                    return o(t)[3]
                };
                var s = "b" === "ab".substr(-1) ? function(t, e, r) {
                    return t.substr(e, r)
                } : function(t, e, r) {
                    return e < 0 && (e = t.length + e), t.substr(e, r)
                }
            }).call(this, t("_process"))
        }, {
            _process: 26
        }],
        9: [function(t, e, r) {
            var n = new ArrayBuffer(0),
                i = function(t, e, r, i) {
                    this.gl = t, this.buffer = t.createBuffer(), this.type = e || t.ARRAY_BUFFER, this.drawType = i || t.STATIC_DRAW, this.data = n, r && this.upload(r), this._updateID = 0
                };
            i.prototype.upload = function(t, e, r) {
                r || this.bind();
                var n = this.gl;
                t = t || this.data, e = e || 0, this.data.byteLength >= t.byteLength ? n.bufferSubData(this.type, e, t) : n.bufferData(this.type, t, this.drawType), this.data = t
            }, i.prototype.bind = function() {
                this.gl.bindBuffer(this.type, this.buffer)
            }, i.createVertexBuffer = function(t, e, r) {
                return new i(t, t.ARRAY_BUFFER, e, r)
            }, i.createIndexBuffer = function(t, e, r) {
                return new i(t, t.ELEMENT_ARRAY_BUFFER, e, r)
            }, i.create = function(t, e, r, n) {
                return new i(t, e, r, n)
            }, i.prototype.destroy = function() {
                this.gl.deleteBuffer(this.buffer)
            }, e.exports = i
        }, {}],
        10: [function(t, e, r) {
            var n = t("./GLTexture"),
                i = function(t, e, r) {
                    this.gl = t, this.framebuffer = t.createFramebuffer(), this.stencil = null, this.texture = null, this.width = e || 100, this.height = r || 100
                };
            i.prototype.enableTexture = function(t) {
                var e = this.gl;
                this.texture = t || new n(e), this.texture.bind(), this.bind(), e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, this.texture.texture, 0)
            }, i.prototype.enableStencil = function() {
                if (!this.stencil) {
                    var t = this.gl;
                    this.stencil = t.createRenderbuffer(), t.bindRenderbuffer(t.RENDERBUFFER, this.stencil), t.framebufferRenderbuffer(t.FRAMEBUFFER, t.DEPTH_STENCIL_ATTACHMENT, t.RENDERBUFFER, this.stencil), t.renderbufferStorage(t.RENDERBUFFER, t.DEPTH_STENCIL, this.width, this.height)
                }
            }, i.prototype.clear = function(t, e, r, n) {
                this.bind();
                var i = this.gl;
                i.clearColor(t, e, r, n), i.clear(i.COLOR_BUFFER_BIT | i.DEPTH_BUFFER_BIT)
            }, i.prototype.bind = function() {
                var t = this.gl;
                t.bindFramebuffer(t.FRAMEBUFFER, this.framebuffer)
            }, i.prototype.unbind = function() {
                var t = this.gl;
                t.bindFramebuffer(t.FRAMEBUFFER, null)
            }, i.prototype.resize = function(t, e) {
                var r = this.gl;
                this.width = t, this.height = e, this.texture && this.texture.uploadData(null, t, e), this.stencil && (r.bindRenderbuffer(r.RENDERBUFFER, this.stencil), r.renderbufferStorage(r.RENDERBUFFER, r.DEPTH_STENCIL, t, e))
            }, i.prototype.destroy = function() {
                var t = this.gl;
                this.texture && this.texture.destroy(), t.deleteFramebuffer(this.framebuffer), this.gl = null, this.stencil = null, this.texture = null
            }, i.createRGBA = function(t, e, r, o) {
                var s = n.fromData(t, null, e, r);
                s.enableNearestScaling(), s.enableWrapClamp();
                var a = new i(t, e, r);
                return a.enableTexture(s), a.unbind(), a
            }, i.createFloat32 = function(t, e, r, o) {
                var s = new n.fromData(t, o, e, r);
                s.enableNearestScaling(), s.enableWrapClamp();
                var a = new i(t, e, r);
                return a.enableTexture(s), a.unbind(), a
            }, e.exports = i
        }, {
            "./GLTexture": 12
        }],
        11: [function(t, e, r) {
            var n = t("./shader/compileProgram"),
                i = t("./shader/extractAttributes"),
                o = t("./shader/extractUniforms"),
                s = t("./shader/setPrecision"),
                a = t("./shader/generateUniformAccessObject"),
                u = function(t, e, r, u, h) {
                    this.gl = t, u && (e = s(e, u), r = s(r, u)), this.program = n(t, e, r, h), this.attributes = i(t, this.program), this.uniformData = o(t, this.program), this.uniforms = a(t, this.uniformData)
                };
            u.prototype.bind = function() {
                return this.gl.useProgram(this.program), this
            }, u.prototype.destroy = function() {
                this.attributes = null, this.uniformData = null, this.uniforms = null, this.gl.deleteProgram(this.program)
            }, e.exports = u
        }, {
            "./shader/compileProgram": 17,
            "./shader/extractAttributes": 19,
            "./shader/extractUniforms": 20,
            "./shader/generateUniformAccessObject": 21,
            "./shader/setPrecision": 25
        }],
        12: [function(t, e, r) {
            var n = function(t, e, r, n, i) {
                this.gl = t, this.texture = t.createTexture(), this.mipmap = !1, this.premultiplyAlpha = !1, this.width = e || -1, this.height = r || -1, this.format = n || t.RGBA, this.type = i || t.UNSIGNED_BYTE
            };
            n.prototype.upload = function(t) {
                this.bind();
                var e = this.gl;
                e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha);
                var r = t.videoWidth || t.width,
                    n = t.videoHeight || t.height;
                n !== this.height || r !== this.width ? e.texImage2D(e.TEXTURE_2D, 0, this.format, this.format, this.type, t) : e.texSubImage2D(e.TEXTURE_2D, 0, 0, 0, this.format, this.type, t), this.width = r, this.height = n
            };
            var i = !1;
            n.prototype.uploadData = function(t, e, r) {
                this.bind();
                var n = this.gl;
                if (t instanceof Float32Array) {
                    if (!i) {
                        if (!n.getExtension("OES_texture_float")) throw new Error("floating point textures not available");
                        i = !0
                    }
                    this.type = n.FLOAT
                } else this.type = this.type || n.UNSIGNED_BYTE;
                n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha), e !== this.width || r !== this.height ? n.texImage2D(n.TEXTURE_2D, 0, this.format, e, r, 0, this.format, this.type, t || null) : n.texSubImage2D(n.TEXTURE_2D, 0, 0, 0, e, r, this.format, this.type, t || null), this.width = e, this.height = r
            }, n.prototype.bind = function(t) {
                var e = this.gl;
                void 0 !== t && e.activeTexture(e.TEXTURE0 + t), e.bindTexture(e.TEXTURE_2D, this.texture)
            }, n.prototype.unbind = function() {
                var t = this.gl;
                t.bindTexture(t.TEXTURE_2D, null)
            }, n.prototype.minFilter = function(t) {
                var e = this.gl;
                this.bind(), this.mipmap ? e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, t ? e.LINEAR_MIPMAP_LINEAR : e.NEAREST_MIPMAP_NEAREST) : e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, t ? e.LINEAR : e.NEAREST)
            }, n.prototype.magFilter = function(t) {
                var e = this.gl;
                this.bind(), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, t ? e.LINEAR : e.NEAREST)
            }, n.prototype.enableMipmap = function() {
                var t = this.gl;
                this.bind(), this.mipmap = !0, t.generateMipmap(t.TEXTURE_2D)
            }, n.prototype.enableLinearScaling = function() {
                this.minFilter(!0), this.magFilter(!0)
            }, n.prototype.enableNearestScaling = function() {
                this.minFilter(!1), this.magFilter(!1)
            }, n.prototype.enableWrapClamp = function() {
                var t = this.gl;
                this.bind(), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE)
            }, n.prototype.enableWrapRepeat = function() {
                var t = this.gl;
                this.bind(), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.REPEAT), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.REPEAT)
            }, n.prototype.enableWrapMirrorRepeat = function() {
                var t = this.gl;
                this.bind(), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.MIRRORED_REPEAT), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.MIRRORED_REPEAT)
            }, n.prototype.destroy = function() {
                this.gl.deleteTexture(this.texture)
            }, n.fromSource = function(t, e, r) {
                var i = new n(t);
                return i.premultiplyAlpha = r || !1, i.upload(e), i
            }, n.fromData = function(t, e, r, i) {
                var o = new n(t);
                return o.uploadData(e, r, i), o
            }, e.exports = n
        }, {}],
        13: [function(t, e, r) {
            function n(t, e) {
                if (this.nativeVaoExtension = null, n.FORCE_NATIVE || (this.nativeVaoExtension = t.getExtension("OES_vertex_array_object") || t.getExtension("MOZ_OES_vertex_array_object") || t.getExtension("WEBKIT_OES_vertex_array_object")), this.nativeState = e, this.nativeVaoExtension) {
                    this.nativeVao = this.nativeVaoExtension.createVertexArrayOES();
                    var r = t.getParameter(t.MAX_VERTEX_ATTRIBS);
                    this.nativeState = {
                        tempAttribState: new Array(r),
                        attribState: new Array(r)
                    }
                }
                this.gl = t, this.attributes = [], this.indexBuffer = null, this.dirty = !1
            }
            var i = t("./setVertexAttribArrays");
            n.prototype.constructor = n, e.exports = n, n.FORCE_NATIVE = !1, n.prototype.bind = function() {
                if (this.nativeVao) {
                    if (this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao), this.dirty) return this.dirty = !1, this.activate(), this;
                    this.indexBuffer && this.indexBuffer.bind()
                } else this.activate();
                return this
            }, n.prototype.unbind = function() {
                return this.nativeVao && this.nativeVaoExtension.bindVertexArrayOES(null), this
            }, n.prototype.activate = function() {
                for (var t = this.gl, e = null, r = 0; r < this.attributes.length; r++) {
                    var n = this.attributes[r];
                    e !== n.buffer && (n.buffer.bind(), e = n.buffer), t.vertexAttribPointer(n.attribute.location, n.attribute.size, n.type || t.FLOAT, n.normalized || !1, n.stride || 0, n.start || 0)
                }
                return i(t, this.attributes, this.nativeState), this.indexBuffer && this.indexBuffer.bind(), this
            }, n.prototype.addAttribute = function(t, e, r, n, i, o) {
                return this.attributes.push({
                    buffer: t,
                    attribute: e,
                    location: e.location,
                    type: r || this.gl.FLOAT,
                    normalized: n || !1,
                    stride: i || 0,
                    start: o || 0
                }), this.dirty = !0, this
            }, n.prototype.addIndex = function(t) {
                return this.indexBuffer = t, this.dirty = !0, this
            }, n.prototype.clear = function() {
                return this.nativeVao && this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao), this.attributes.length = 0, this.indexBuffer = null, this
            }, n.prototype.draw = function(t, e, r) {
                var n = this.gl;
                return this.indexBuffer ? n.drawElements(t, e || this.indexBuffer.data.length, n.UNSIGNED_SHORT, 2 * (r || 0)) : n.drawArrays(t, r, e || this.getSize()), this
            }, n.prototype.destroy = function() {
                this.gl = null, this.indexBuffer = null, this.attributes = null, this.nativeState = null, this.nativeVao && this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao), this.nativeVaoExtension = null, this.nativeVao = null
            }, n.prototype.getSize = function() {
                var t = this.attributes[0];
                return t.buffer.data.length / (t.stride / 4 || t.attribute.size)
            }
        }, {
            "./setVertexAttribArrays": 16
        }],
        14: [function(t, e, r) {
            var n = function(t, e) {
                var r = t.getContext("webgl", e) || t.getContext("experimental-webgl", e);
                if (!r) throw new Error("This browser does not support webGL. Try using the canvas renderer");
                return r
            };
            e.exports = n
        }, {}],
        15: [function(t, e, r) {
            var n = {
                createContext: t("./createContext"),
                setVertexAttribArrays: t("./setVertexAttribArrays"),
                GLBuffer: t("./GLBuffer"),
                GLFramebuffer: t("./GLFramebuffer"),
                GLShader: t("./GLShader"),
                GLTexture: t("./GLTexture"),
                VertexArrayObject: t("./VertexArrayObject"),
                shader: t("./shader")
            };
            void 0 !== e && e.exports && (e.exports = n), "undefined" != typeof window && (window.PIXI = window.PIXI || {}, window.PIXI.glCore = n)
        }, {
            "./GLBuffer": 9,
            "./GLFramebuffer": 10,
            "./GLShader": 11,
            "./GLTexture": 12,
            "./VertexArrayObject": 13,
            "./createContext": 14,
            "./setVertexAttribArrays": 16,
            "./shader": 22
        }],
        16: [function(t, e, r) {
            var n = function(t, e, r) {
                var n;
                if (r) {
                    var i = r.tempAttribState,
                        o = r.attribState;
                    for (n = 0; n < i.length; n++) i[n] = !1;
                    for (n = 0; n < e.length; n++) i[e[n].attribute.location] = !0;
                    for (n = 0; n < o.length; n++) o[n] !== i[n] && (o[n] = i[n], r.attribState[n] ? t.enableVertexAttribArray(n) : t.disableVertexAttribArray(n))
                } else
                    for (n = 0; n < e.length; n++) {
                        var s = e[n];
                        t.enableVertexAttribArray(s.attribute.location)
                    }
            };
            e.exports = n
        }, {}],
        17: [function(t, e, r) {
            var n = function(t, e, r, n) {
                    var o = i(t, t.VERTEX_SHADER, e),
                        s = i(t, t.FRAGMENT_SHADER, r),
                        a = t.createProgram();
                    if (t.attachShader(a, o), t.attachShader(a, s), n)
                        for (var u in n) t.bindAttribLocation(a, n[u], u);
                    return t.linkProgram(a), t.getProgramParameter(a, t.LINK_STATUS) || (console.error("Pixi.js Error: Could not initialize shader."), console.error("gl.VALIDATE_STATUS", t.getProgramParameter(a, t.VALIDATE_STATUS)), console.error("gl.getError()", t.getError()), "" !== t.getProgramInfoLog(a) && console.warn("Pixi.js Warning: gl.getProgramInfoLog()", t.getProgramInfoLog(a)), t.deleteProgram(a), a = null), t.deleteShader(o), t.deleteShader(s), a
                },
                i = function(t, e, r) {
                    var n = t.createShader(e);
                    return t.shaderSource(n, r), t.compileShader(n), t.getShaderParameter(n, t.COMPILE_STATUS) ? n : (console.log(t.getShaderInfoLog(n)), null)
                };
            e.exports = n
        }, {}],
        18: [function(t, e, r) {
            var n = function(t, e) {
                    switch (t) {
                        case "float":
                            return 0;
                        case "vec2":
                            return new Float32Array(2 * e);
                        case "vec3":
                            return new Float32Array(3 * e);
                        case "vec4":
                            return new Float32Array(4 * e);
                        case "int":
                        case "sampler2D":
                            return 0;
                        case "ivec2":
                            return new Int32Array(2 * e);
                        case "ivec3":
                            return new Int32Array(3 * e);
                        case "ivec4":
                            return new Int32Array(4 * e);
                        case "bool":
                            return !1;
                        case "bvec2":
                            return i(2 * e);
                        case "bvec3":
                            return i(3 * e);
                        case "bvec4":
                            return i(4 * e);
                        case "mat2":
                            return new Float32Array([1, 0, 0, 1]);
                        case "mat3":
                            return new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
                        case "mat4":
                            return new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])
                    }
                },
                i = function(t) {
                    for (var e = new Array(t), r = 0; r < e.length; r++) e[r] = !1;
                    return e
                };
            e.exports = n
        }, {}],
        19: [function(t, e, r) {
            var n = t("./mapType"),
                i = t("./mapSize"),
                o = function(t, e) {
                    for (var r = {}, o = t.getProgramParameter(e, t.ACTIVE_ATTRIBUTES), a = 0; a < o; a++) {
                        var u = t.getActiveAttrib(e, a),
                            h = n(t, u.type);
                        r[u.name] = {
                            type: h,
                            size: i(h),
                            location: t.getAttribLocation(e, u.name),
                            pointer: s
                        }
                    }
                    return r
                },
                s = function(t, e, r, n) {
                    gl.vertexAttribPointer(this.location, this.size, t || gl.FLOAT, e || !1, r || 0, n || 0)
                };
            e.exports = o
        }, {
            "./mapSize": 23,
            "./mapType": 24
        }],
        20: [function(t, e, r) {
            var n = t("./mapType"),
                i = t("./defaultValue"),
                o = function(t, e) {
                    for (var r = {}, o = t.getProgramParameter(e, t.ACTIVE_UNIFORMS), s = 0; s < o; s++) {
                        var a = t.getActiveUniform(e, s),
                            u = a.name.replace(/\[.*?\]/, ""),
                            h = n(t, a.type);
                        r[u] = {
                            type: h,
                            size: a.size,
                            location: t.getUniformLocation(e, u),
                            value: i(h, a.size)
                        }
                    }
                    return r
                };
            e.exports = o
        }, {
            "./defaultValue": 18,
            "./mapType": 24
        }],
        21: [function(t, e, r) {
            function n(t, e) {
                return function(r) {
                    this.data[t].value = r;
                    var n = this.data[t].location;
                    1 === e.size ? a[e.type](this.gl, n, r) : u[e.type](this.gl, n, r)
                }
            }

            function i(t, e) {
                for (var r = e, n = 0; n < t.length - 1; n++) {
                    var i = r[t[n]] || {
                        data: {}
                    };
                    r[t[n]] = i, r = i
                }
                return r
            }
            var o = function(t, e) {
                    var r = {
                        data: {}
                    };
                    r.gl = t;
                    for (var o = Object.keys(e), a = 0; a < o.length; a++) {
                        var u = o[a],
                            h = u.split("."),
                            l = h[h.length - 1],
                            c = i(h, r),
                            d = e[u];
                        c.data[l] = d, c.gl = t, Object.defineProperty(c, l, {
                            get: s(l),
                            set: n(l, d)
                        })
                    }
                    return r
                },
                s = function(t) {
                    return function() {
                        return this.data[t].value
                    }
                },
                a = {
                    float: function(t, e, r) {
                        t.uniform1f(e, r)
                    },
                    vec2: function(t, e, r) {
                        t.uniform2f(e, r[0], r[1])
                    },
                    vec3: function(t, e, r) {
                        t.uniform3f(e, r[0], r[1], r[2])
                    },
                    vec4: function(t, e, r) {
                        t.uniform4f(e, r[0], r[1], r[2], r[3])
                    },
                    int: function(t, e, r) {
                        t.uniform1i(e, r)
                    },
                    ivec2: function(t, e, r) {
                        t.uniform2i(e, r[0], r[1])
                    },
                    ivec3: function(t, e, r) {
                        t.uniform3i(e, r[0], r[1], r[2])
                    },
                    ivec4: function(t, e, r) {
                        t.uniform4i(e, r[0], r[1], r[2], r[3])
                    },
                    bool: function(t, e, r) {
                        t.uniform1i(e, r)
                    },
                    bvec2: function(t, e, r) {
                        t.uniform2i(e, r[0], r[1])
                    },
                    bvec3: function(t, e, r) {
                        t.uniform3i(e, r[0], r[1], r[2])
                    },
                    bvec4: function(t, e, r) {
                        t.uniform4i(e, r[0], r[1], r[2], r[3])
                    },
                    mat2: function(t, e, r) {
                        t.uniformMatrix2fv(e, !1, r)
                    },
                    mat3: function(t, e, r) {
                        t.uniformMatrix3fv(e, !1, r)
                    },
                    mat4: function(t, e, r) {
                        t.uniformMatrix4fv(e, !1, r)
                    },
                    sampler2D: function(t, e, r) {
                        t.uniform1i(e, r)
                    }
                },
                u = {
                    float: function(t, e, r) {
                        t.uniform1fv(e, r)
                    },
                    vec2: function(t, e, r) {
                        t.uniform2fv(e, r)
                    },
                    vec3: function(t, e, r) {
                        t.uniform3fv(e, r)
                    },
                    vec4: function(t, e, r) {
                        t.uniform4fv(e, r)
                    },
                    int: function(t, e, r) {
                        t.uniform1iv(e, r)
                    },
                    ivec2: function(t, e, r) {
                        t.uniform2iv(e, r)
                    },
                    ivec3: function(t, e, r) {
                        t.uniform3iv(e, r)
                    },
                    ivec4: function(t, e, r) {
                        t.uniform4iv(e, r)
                    },
                    bool: function(t, e, r) {
                        t.uniform1iv(e, r)
                    },
                    bvec2: function(t, e, r) {
                        t.uniform2iv(e, r)
                    },
                    bvec3: function(t, e, r) {
                        t.uniform3iv(e, r)
                    },
                    bvec4: function(t, e, r) {
                        t.uniform4iv(e, r)
                    },
                    sampler2D: function(t, e, r) {
                        t.uniform1iv(e, r)
                    }
                };
            e.exports = o
        }, {}],
        22: [function(t, e, r) {
            e.exports = {
                compileProgram: t("./compileProgram"),
                defaultValue: t("./defaultValue"),
                extractAttributes: t("./extractAttributes"),
                extractUniforms: t("./extractUniforms"),
                generateUniformAccessObject: t("./generateUniformAccessObject"),
                setPrecision: t("./setPrecision"),
                mapSize: t("./mapSize"),
                mapType: t("./mapType")
            }
        }, {
            "./compileProgram": 17,
            "./defaultValue": 18,
            "./extractAttributes": 19,
            "./extractUniforms": 20,
            "./generateUniformAccessObject": 21,
            "./mapSize": 23,
            "./mapType": 24,
            "./setPrecision": 25
        }],
        23: [function(t, e, r) {
            var n = function(t) {
                    return i[t]
                },
                i = {
                    float: 1,
                    vec2: 2,
                    vec3: 3,
                    vec4: 4,
                    int: 1,
                    ivec2: 2,
                    ivec3: 3,
                    ivec4: 4,
                    bool: 1,
                    bvec2: 2,
                    bvec3: 3,
                    bvec4: 4,
                    mat2: 4,
                    mat3: 9,
                    mat4: 16,
                    sampler2D: 1
                };
            e.exports = n
        }, {}],
        24: [function(t, e, r) {
            var n = function(t, e) {
                    if (!i) {
                        var r = Object.keys(o);
                        i = {};
                        for (var n = 0; n < r.length; ++n) {
                            var s = r[n];
                            i[t[s]] = o[s]
                        }
                    }
                    return i[e]
                },
                i = null,
                o = {
                    FLOAT: "float",
                    FLOAT_VEC2: "vec2",
                    FLOAT_VEC3: "vec3",
                    FLOAT_VEC4: "vec4",
                    INT: "int",
                    INT_VEC2: "ivec2",
                    INT_VEC3: "ivec3",
                    INT_VEC4: "ivec4",
                    BOOL: "bool",
                    BOOL_VEC2: "bvec2",
                    BOOL_VEC3: "bvec3",
                    BOOL_VEC4: "bvec4",
                    FLOAT_MAT2: "mat2",
                    FLOAT_MAT3: "mat3",
                    FLOAT_MAT4: "mat4",
                    SAMPLER_2D: "sampler2D"
                };
            e.exports = n
        }, {}],
        25: [function(t, e, r) {
            var n = function(t, e) {
                return "precision" !== t.substring(0, 9) ? "precision " + e + " float;\n" + t : t
            };
            e.exports = n
        }, {}],
        26: [function(t, e, r) {
            function n() {
                throw new Error("setTimeout has not been defined")
            }

            function i() {
                throw new Error("clearTimeout has not been defined")
            }

            function o(t) {
                if (c === setTimeout) return setTimeout(t, 0);
                if ((c === n || !c) && setTimeout) return c = setTimeout, setTimeout(t, 0);
                try {
                    return c(t, 0)
                } catch (e) {
                    try {
                        return c.call(null, t, 0)
                    } catch (e) {
                        return c.call(this, t, 0)
                    }
                }
            }

            function s(t) {
                if (d === clearTimeout) return clearTimeout(t);
                if ((d === i || !d) && clearTimeout) return d = clearTimeout, clearTimeout(t);
                try {
                    return d(t)
                } catch (e) {
                    try {
                        return d.call(null, t)
                    } catch (e) {
                        return d.call(this, t)
                    }
                }
            }

            function a() {
                g && p && (g = !1, p.length ? v = p.concat(v) : y = -1, v.length && u())
            }

            function u() {
                if (!g) {
                    var t = o(a);
                    g = !0;
                    for (var e = v.length; e;) {
                        for (p = v, v = []; ++y < e;) p && p[y].run();
                        y = -1, e = v.length
                    }
                    p = null, g = !1, s(t)
                }
            }

            function h(t, e) {
                this.fun = t, this.array = e
            }

            function l() {}
            var c, d, f = e.exports = {};
            ! function() {
                try {
                    c = "function" == typeof setTimeout ? setTimeout : n
                } catch (t) {
                    c = n
                }
                try {
                    d = "function" == typeof clearTimeout ? clearTimeout : i
                } catch (t) {
                    d = i
                }
            }();
            var p, v = [],
                g = !1,
                y = -1;
            f.nextTick = function(t) {
                var e = new Array(arguments.length - 1);
                if (arguments.length > 1)
                    for (var r = 1; r < arguments.length; r++) e[r - 1] = arguments[r];
                v.push(new h(t, e)), 1 !== v.length || g || o(u)
            }, h.prototype.run = function() {
                this.fun.apply(null, this.array)
            }, f.title = "browser", f.browser = !0, f.env = {}, f.argv = [], f.version = "", f.versions = {}, f.on = l, f.addListener = l, f.once = l, f.off = l, f.removeListener = l, f.removeAllListeners = l, f.emit = l, f.prependListener = l, f.prependOnceListener = l, f.listeners = function(t) {
                return []
            }, f.binding = function(t) {
                throw new Error("process.binding is not supported")
            }, f.cwd = function() {
                return "/"
            }, f.chdir = function(t) {
                throw new Error("process.chdir is not supported")
            }, f.umask = function() {
                return 0
            }
        }, {}],
        27: [function(e, r, n) {
            (function(e) {
                ! function(i) {
                    function o(t) {
                        throw new RangeError(L[t])
                    }

                    function s(t, e) {
                        for (var r = t.length, n = []; r--;) n[r] = e(t[r]);
                        return n
                    }

                    function a(t, e) {
                        var r = t.split("@"),
                            n = "";
                        return r.length > 1 && (n = r[0] + "@", t = r[1]), t = t.replace(D, "."), n + s(t.split("."), e).join(".")
                    }

                    function u(t) {
                        for (var e, r, n = [], i = 0, o = t.length; i < o;) e = t.charCodeAt(i++), e >= 55296 && e <= 56319 && i < o ? (r = t.charCodeAt(i++), 56320 == (64512 & r) ? n.push(((1023 & e) << 10) + (1023 & r) + 65536) : (n.push(e), i--)) : n.push(e);
                        return n
                    }

                    function h(t) {
                        return s(t, function(t) {
                            var e = "";
                            return t > 65535 && (t -= 65536, e += F(t >>> 10 & 1023 | 55296), t = 56320 | 1023 & t), e += F(t)
                        }).join("")
                    }

                    function l(t) {
                        return t - 48 < 10 ? t - 22 : t - 65 < 26 ? t - 65 : t - 97 < 26 ? t - 97 : w
                    }

                    function c(t, e) {
                        return t + 22 + 75 * (t < 26) - ((0 != e) << 5)
                    }

                    function d(t, e, r) {
                        var n = 0;
                        for (t = r ? B(t / M) : t >> 1, t += B(t / e); t > N * S >> 1; n += w) t = B(t / N);
                        return B(n + (N + 1) * t / (t + O))
                    }

                    function f(t) {
                        var e, r, n, i, s, a, u, c, f, p, v = [],
                            g = t.length,
                            y = 0,
                            m = C,
                            _ = P;
                        for (r = t.lastIndexOf(R), r < 0 && (r = 0), n = 0; n < r; ++n) t.charCodeAt(n) >= 128 && o("not-basic"), v.push(t.charCodeAt(n));
                        for (i = r > 0 ? r + 1 : 0; i < g;) {
                            for (s = y, a = 1, u = w; i >= g && o("invalid-input"), c = l(t.charCodeAt(i++)), (c >= w || c > B((T - y) / a)) && o("overflow"), y += c * a, f = u <= _ ? E : u >= _ + S ? S : u - _, !(c < f); u += w) p = w - f, a > B(T / p) && o("overflow"), a *= p;
                            e = v.length + 1, _ = d(y - s, e, 0 == s), B(y / e) > T - m && o("overflow"), m += B(y / e), y %= e, v.splice(y++, 0, m)
                        }
                        return h(v)
                    }

                    function p(t) {
                        var e, r, n, i, s, a, h, l, f, p, v, g, y, m, _, b = [];
                        for (t = u(t), g = t.length, e = C, r = 0, s = P, a = 0; a < g; ++a)(v = t[a]) < 128 && b.push(F(v));
                        for (n = i = b.length, i && b.push(R); n < g;) {
                            for (h = T, a = 0; a < g; ++a)(v = t[a]) >= e && v < h && (h = v);
                            for (y = n + 1, h - e > B((T - r) / y) && o("overflow"), r += (h - e) * y, e = h, a = 0; a < g; ++a)
                                if (v = t[a], v < e && ++r > T && o("overflow"), v == e) {
                                    for (l = r, f = w; p = f <= s ? E : f >= s + S ? S : f - s, !(l < p); f += w) _ = l - p, m = w - p, b.push(F(c(p + _ % m, 0))), l = B(_ / m);
                                    b.push(F(c(l, 0))), s = d(r, y, n == i), r = 0, ++n
                                }++ r, ++e
                        }
                        return b.join("")
                    }

                    function v(t) {
                        return a(t, function(t) {
                            return A.test(t) ? f(t.slice(4).toLowerCase()) : t
                        })
                    }

                    function g(t) {
                        return a(t, function(t) {
                            return I.test(t) ? "xn--" + p(t) : t
                        })
                    }
                    var y = "object" == typeof n && n && !n.nodeType && n,
                        m = "object" == typeof r && r && !r.nodeType && r,
                        _ = "object" == typeof e && e;
                    _.global !== _ && _.window !== _ && _.self !== _ || (i = _);
                    var b, x, T = 2147483647,
                        w = 36,
                        E = 1,
                        S = 26,
                        O = 38,
                        M = 700,
                        P = 72,
                        C = 128,
                        R = "-",
                        A = /^xn--/,
                        I = /[^\x20-\x7E]/,
                        D = /[\x2E\u3002\uFF0E\uFF61]/g,
                        L = {
                            overflow: "Overflow: input needs wider integers to process",
                            "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                            "invalid-input": "Invalid input"
                        },
                        N = w - E,
                        B = Math.floor,
                        F = String.fromCharCode;
                    if (b = {
                            version: "1.4.1",
                            ucs2: {
                                decode: u,
                                encode: h
                            },
                            decode: f,
                            encode: p,
                            toASCII: g,
                            toUnicode: v
                        }, "function" == typeof t && "object" == typeof t.amd && t.amd) t("punycode", function() {
                        return b
                    });
                    else if (y && m)
                        if (r.exports == y) m.exports = b;
                        else
                            for (x in b) b.hasOwnProperty(x) && (y[x] = b[x]);
                    else i.punycode = b
                }(this)
            }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {}],
        28: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                return Object.prototype.hasOwnProperty.call(t, e)
            }
            e.exports = function(t, e, r, o) {
                e = e || "&", r = r || "=";
                var s = {};
                if ("string" != typeof t || 0 === t.length) return s;
                var a = /\+/g;
                t = t.split(e);
                var u = 1e3;
                o && "number" == typeof o.maxKeys && (u = o.maxKeys);
                var h = t.length;
                u > 0 && h > u && (h = u);
                for (var l = 0; l < h; ++l) {
                    var c, d, f, p, v = t[l].replace(a, "%20"),
                        g = v.indexOf(r);
                    g >= 0 ? (c = v.substr(0, g), d = v.substr(g + 1)) : (c = v, d = ""), f = decodeURIComponent(c), p = decodeURIComponent(d), n(s, f) ? i(s[f]) ? s[f].push(p) : s[f] = [s[f], p] : s[f] = p
                }
                return s
            };
            var i = Array.isArray || function(t) {
                return "[object Array]" === Object.prototype.toString.call(t)
            }
        }, {}],
        29: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (t.map) return t.map(e);
                for (var r = [], n = 0; n < t.length; n++) r.push(e(t[n], n));
                return r
            }
            var i = function(t) {
                switch (typeof t) {
                    case "string":
                        return t;
                    case "boolean":
                        return t ? "true" : "false";
                    case "number":
                        return isFinite(t) ? t : "";
                    default:
                        return ""
                }
            };
            e.exports = function(t, e, r, a) {
                return e = e || "&", r = r || "=", null === t && (t = void 0), "object" == typeof t ? n(s(t), function(s) {
                    var a = encodeURIComponent(i(s)) + r;
                    return o(t[s]) ? n(t[s], function(t) {
                        return a + encodeURIComponent(i(t))
                    }).join(e) : a + encodeURIComponent(i(t[s]))
                }).join(e) : a ? encodeURIComponent(i(a)) + r + encodeURIComponent(i(t)) : ""
            };
            var o = Array.isArray || function(t) {
                    return "[object Array]" === Object.prototype.toString.call(t)
                },
                s = Object.keys || function(t) {
                    var e = [];
                    for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.push(r);
                    return e
                }
        }, {}],
        30: [function(t, e, r) {
            "use strict";
            r.decode = r.parse = t("./decode"), r.encode = r.stringify = t("./encode")
        }, {
            "./decode": 28,
            "./encode": 29
        }],
        31: [function(t, e, r) {
            "use strict";
            e.exports = function(t, e, r) {
                var n, i = t.length;
                if (!(e >= i || 0 === r)) {
                    r = e + r > i ? i - e : r;
                    var o = i - r;
                    for (n = e; n < o; ++n) t[n] = t[n + r];
                    t.length = o
                }
            }
        }, {}],
        32: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                    return typeof t
                } : function(t) {
                    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
                },
                s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("mini-signals"),
                u = n(a),
                h = t("parse-uri"),
                l = n(h),
                c = t("./async"),
                d = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(c),
                f = t("./Resource"),
                p = n(f),
                v = /(#[\w-]+)?$/,
                g = function() {
                    function t() {
                        var e = this,
                            r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
                            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 10;
                        i(this, t), this.baseUrl = r, this.progress = 0, this.loading = !1, this.defaultQueryString = "", this._beforeMiddleware = [], this._afterMiddleware = [], this._resourcesParsing = [], this._boundLoadResource = function(t, r) {
                            return e._loadResource(t, r)
                        }, this._queue = d.queue(this._boundLoadResource, n), this._queue.pause(), this.resources = {}, this.onProgress = new u.default, this.onError = new u.default, this.onLoad = new u.default, this.onStart = new u.default, this.onComplete = new u.default
                    }
                    return t.prototype.add = function(t, e, r, n) {
                        if (Array.isArray(t)) {
                            for (var i = 0; i < t.length; ++i) this.add(t[i]);
                            return this
                        }
                        if ("object" === (void 0 === t ? "undefined" : o(t)) && (n = e || t.callback || t.onComplete, r = t, e = t.url, t = t.name || t.key || t.url), "string" != typeof e && (n = r, r = e, e = t), "string" != typeof e) throw new Error("No url passed to add resource to loader.");
                        if ("function" == typeof r && (n = r, r = null), this.loading && (!r || !r.parentResource)) throw new Error("Cannot add resources while the loader is running.");
                        if (this.resources[t]) throw new Error('Resource named "' + t + '" already exists.');
                        if (e = this._prepareUrl(e), this.resources[t] = new p.default(t, e, r), "function" == typeof n && this.resources[t].onAfterMiddleware.once(n), this.loading) {
                            for (var s = r.parentResource, a = [], u = 0; u < s.children.length; ++u) s.children[u].isComplete || a.push(s.children[u]);
                            var h = s.progressChunk * (a.length + 1),
                                l = h / (a.length + 2);
                            s.children.push(this.resources[t]), s.progressChunk = l;
                            for (var c = 0; c < a.length; ++c) a[c].progressChunk = l;
                            this.resources[t].progressChunk = l
                        }
                        return this._queue.push(this.resources[t]), this
                    }, t.prototype.pre = function(t) {
                        return this._beforeMiddleware.push(t), this
                    }, t.prototype.use = function(t) {
                        return this._afterMiddleware.push(t), this
                    }, t.prototype.reset = function() {
                        this.progress = 0, this.loading = !1, this._queue.kill(), this._queue.pause();
                        for (var t in this.resources) {
                            var e = this.resources[t];
                            e._onLoadBinding && e._onLoadBinding.detach(), e.isLoading && e.abort()
                        }
                        return this.resources = {}, this
                    }, t.prototype.load = function(t) {
                        if ("function" == typeof t && this.onComplete.once(t), this.loading) return this;
                        if (this._queue.idle()) this._onStart(), this._onComplete();
                        else {
                            for (var e = this._queue._tasks.length, r = 100 / e, n = 0; n < this._queue._tasks.length; ++n) this._queue._tasks[n].data.progressChunk = r;
                            this._onStart(), this._queue.resume()
                        }
                        return this
                    }, t.prototype._prepareUrl = function(t) {
                        var e = (0, l.default)(t, {
                                strictMode: !0
                            }),
                            r = void 0;
                        if (r = e.protocol || !e.path || 0 === t.indexOf("//") ? t : this.baseUrl.length && this.baseUrl.lastIndexOf("/") !== this.baseUrl.length - 1 && "/" !== t.charAt(0) ? this.baseUrl + "/" + t : this.baseUrl + t, this.defaultQueryString) {
                            var n = v.exec(r)[0];
                            r = r.substr(0, r.length - n.length), -1 !== r.indexOf("?") ? r += "&" + this.defaultQueryString : r += "?" + this.defaultQueryString, r += n
                        }
                        return r
                    }, t.prototype._loadResource = function(t, e) {
                        var r = this;
                        t._dequeue = e, d.eachSeries(this._beforeMiddleware, function(e, n) {
                            e.call(r, t, function() {
                                n(t.isComplete ? {} : null)
                            })
                        }, function() {
                            t.isComplete ? r._onLoad(t) : (t._onLoadBinding = t.onComplete.once(r._onLoad, r), t.load())
                        }, !0)
                    }, t.prototype._onStart = function() {
                        this.progress = 0, this.loading = !0, this.onStart.dispatch(this)
                    }, t.prototype._onComplete = function() {
                        this.progress = 100, this.loading = !1, this.onComplete.dispatch(this, this.resources)
                    }, t.prototype._onLoad = function(t) {
                        var e = this;
                        t._onLoadBinding = null, this._resourcesParsing.push(t), t._dequeue(), d.eachSeries(this._afterMiddleware, function(r, n) {
                            r.call(e, t, n)
                        }, function() {
                            t.onAfterMiddleware.dispatch(t), e.progress += t.progressChunk, e.onProgress.dispatch(e, t), t.error ? e.onError.dispatch(t.error, e, t) : e.onLoad.dispatch(e, t), e._resourcesParsing.splice(e._resourcesParsing.indexOf(t), 1), e._queue.idle() && 0 === e._resourcesParsing.length && e._onComplete()
                        }, !0)
                    }, s(t, [{
                        key: "concurrency",
                        get: function() {
                            return this._queue.concurrency
                        },
                        set: function(t) {
                            this._queue.concurrency = t
                        }
                    }]), t
                }();
            r.default = g
        }, {
            "./Resource": 33,
            "./async": 34,
            "mini-signals": 5,
            "parse-uri": 7
        }],
        33: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o() {}

            function s(t, e, r) {
                e && 0 === e.indexOf(".") && (e = e.substring(1)), e && (t[e] = r)
            }

            function a(t) {
                return t.toString().replace("object ", "")
            }
            r.__esModule = !0;
            var u = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                h = t("parse-uri"),
                l = n(h),
                c = t("mini-signals"),
                d = n(c),
                f = !(!window.XDomainRequest || "withCredentials" in new XMLHttpRequest),
                p = null,
                v = function() {
                    function t(e, r, n) {
                        if (i(this, t), "string" != typeof e || "string" != typeof r) throw new Error("Both name and url are required for constructing a resource.");
                        n = n || {}, this._flags = 0, this._setFlag(t.STATUS_FLAGS.DATA_URL, 0 === r.indexOf("data:")), this.name = e, this.url = r, this.extension = this._getExtension(), this.data = null, this.crossOrigin = !0 === n.crossOrigin ? "anonymous" : n.crossOrigin, this.loadType = n.loadType || this._determineLoadType(), this.xhrType = n.xhrType, this.metadata = n.metadata || {}, this.error = null, this.xhr = null, this.children = [], this.type = t.TYPE.UNKNOWN, this.progressChunk = 0, this._dequeue = o, this._onLoadBinding = null, this._boundComplete = this.complete.bind(this), this._boundOnError = this._onError.bind(this), this._boundOnProgress = this._onProgress.bind(this), this._boundXhrOnError = this._xhrOnError.bind(this), this._boundXhrOnAbort = this._xhrOnAbort.bind(this), this._boundXhrOnLoad = this._xhrOnLoad.bind(this), this._boundXdrOnTimeout = this._xdrOnTimeout.bind(this), this.onStart = new d.default, this.onProgress = new d.default, this.onComplete = new d.default, this.onAfterMiddleware = new d.default
                    }
                    return t.setExtensionLoadType = function(e, r) {
                        s(t._loadTypeMap, e, r)
                    }, t.setExtensionXhrType = function(e, r) {
                        s(t._xhrTypeMap, e, r)
                    }, t.prototype.complete = function() {
                        if (this.data && this.data.removeEventListener && (this.data.removeEventListener("error", this._boundOnError, !1), this.data.removeEventListener("load", this._boundComplete, !1), this.data.removeEventListener("progress", this._boundOnProgress, !1), this.data.removeEventListener("canplaythrough", this._boundComplete, !1)), this.xhr && (this.xhr.removeEventListener ? (this.xhr.removeEventListener("error", this._boundXhrOnError, !1), this.xhr.removeEventListener("abort", this._boundXhrOnAbort, !1), this.xhr.removeEventListener("progress", this._boundOnProgress, !1), this.xhr.removeEventListener("load", this._boundXhrOnLoad, !1)) : (this.xhr.onerror = null, this.xhr.ontimeout = null, this.xhr.onprogress = null, this.xhr.onload = null)), this.isComplete) throw new Error("Complete called again for an already completed resource.");
                        this._setFlag(t.STATUS_FLAGS.COMPLETE, !0), this._setFlag(t.STATUS_FLAGS.LOADING, !1), this.onComplete.dispatch(this)
                    }, t.prototype.abort = function(e) {
                        if (!this.error) {
                            if (this.error = new Error(e), this.xhr) this.xhr.abort();
                            else if (this.xdr) this.xdr.abort();
                            else if (this.data)
                                if (this.data.src) this.data.src = t.EMPTY_GIF;
                                else
                                    for (; this.data.firstChild;) this.data.removeChild(this.data.firstChild);
                            this.complete()
                        }
                    }, t.prototype.load = function(e) {
                        var r = this;
                        if (!this.isLoading) {
                            if (this.isComplete) return void(e && setTimeout(function() {
                                return e(r)
                            }, 1));
                            switch (e && this.onComplete.once(e), this._setFlag(t.STATUS_FLAGS.LOADING, !0), this.onStart.dispatch(this), !1 !== this.crossOrigin && "string" == typeof this.crossOrigin || (this.crossOrigin = this._determineCrossOrigin(this.url)), this.loadType) {
                                case t.LOAD_TYPE.IMAGE:
                                    this.type = t.TYPE.IMAGE, this._loadElement("image");
                                    break;
                                case t.LOAD_TYPE.AUDIO:
                                    this.type = t.TYPE.AUDIO, this._loadSourceElement("audio");
                                    break;
                                case t.LOAD_TYPE.VIDEO:
                                    this.type = t.TYPE.VIDEO, this._loadSourceElement("video");
                                    break;
                                case t.LOAD_TYPE.XHR:
                                default:
                                    f && this.crossOrigin ? this._loadXdr() : this._loadXhr()
                            }
                        }
                    }, t.prototype._hasFlag = function(t) {
                        return !!(this._flags & t)
                    }, t.prototype._setFlag = function(t, e) {
                        this._flags = e ? this._flags | t : this._flags & ~t
                    }, t.prototype._loadElement = function(t) {
                        this.metadata.loadElement ? this.data = this.metadata.loadElement : "image" === t && void 0 !== window.Image ? this.data = new Image : this.data = document.createElement(t), this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), this.metadata.skipSource || (this.data.src = this.url), this.data.addEventListener("error", this._boundOnError, !1), this.data.addEventListener("load", this._boundComplete, !1), this.data.addEventListener("progress", this._boundOnProgress, !1)
                    }, t.prototype._loadSourceElement = function(t) {
                        if (this.metadata.loadElement ? this.data = this.metadata.loadElement : "audio" === t && void 0 !== window.Audio ? this.data = new Audio : this.data = document.createElement(t), null === this.data) return void this.abort("Unsupported element: " + t);
                        if (!this.metadata.skipSource)
                            if (navigator.isCocoonJS) this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;
                            else if (Array.isArray(this.url))
                            for (var e = this.metadata.mimeType, r = 0; r < this.url.length; ++r) this.data.appendChild(this._createSource(t, this.url[r], Array.isArray(e) ? e[r] : e));
                        else {
                            var n = this.metadata.mimeType;
                            this.data.appendChild(this._createSource(t, this.url, Array.isArray(n) ? n[0] : n))
                        }
                        this.data.addEventListener("error", this._boundOnError, !1), this.data.addEventListener("load", this._boundComplete, !1), this.data.addEventListener("progress", this._boundOnProgress, !1), this.data.addEventListener("canplaythrough", this._boundComplete, !1), this.data.load()
                    }, t.prototype._loadXhr = function() {
                        "string" != typeof this.xhrType && (this.xhrType = this._determineXhrType());
                        var e = this.xhr = new XMLHttpRequest;
                        e.open("GET", this.url, !0), this.xhrType === t.XHR_RESPONSE_TYPE.JSON || this.xhrType === t.XHR_RESPONSE_TYPE.DOCUMENT ? e.responseType = t.XHR_RESPONSE_TYPE.TEXT : e.responseType = this.xhrType, e.addEventListener("error", this._boundXhrOnError, !1), e.addEventListener("abort", this._boundXhrOnAbort, !1), e.addEventListener("progress", this._boundOnProgress, !1), e.addEventListener("load", this._boundXhrOnLoad, !1), e.send()
                    }, t.prototype._loadXdr = function() {
                        "string" != typeof this.xhrType && (this.xhrType = this._determineXhrType());
                        var t = this.xhr = new XDomainRequest;
                        t.timeout = 5e3, t.onerror = this._boundXhrOnError, t.ontimeout = this._boundXdrOnTimeout, t.onprogress = this._boundOnProgress, t.onload = this._boundXhrOnLoad, t.open("GET", this.url, !0), setTimeout(function() {
                            return t.send()
                        }, 1)
                    }, t.prototype._createSource = function(t, e, r) {
                        r || (r = t + "/" + this._getExtension(e));
                        var n = document.createElement("source");
                        return n.src = e, n.type = r, n
                    }, t.prototype._onError = function(t) {
                        this.abort("Failed to load element using: " + t.target.nodeName)
                    }, t.prototype._onProgress = function(t) {
                        t && t.lengthComputable && this.onProgress.dispatch(this, t.loaded / t.total)
                    }, t.prototype._xhrOnError = function() {
                        var t = this.xhr;
                        this.abort(a(t) + " Request failed. Status: " + t.status + ', text: "' + t.statusText + '"')
                    }, t.prototype._xhrOnAbort = function() {
                        this.abort(a(this.xhr) + " Request was aborted by the user.")
                    }, t.prototype._xdrOnTimeout = function() {
                        this.abort(a(this.xhr) + " Request timed out.")
                    }, t.prototype._xhrOnLoad = function() {
                        var e = this.xhr,
                            r = "",
                            n = void 0 === e.status ? 200 : e.status;
                        if ("" !== e.responseType && "text" !== e.responseType && void 0 !== e.responseType || (r = e.responseText), 0 === n && (r.length > 0 || e.responseType === t.XHR_RESPONSE_TYPE.BUFFER) ? n = 200 : 1223 === n && (n = 204), 2 != (n / 100 | 0)) return void this.abort("[" + e.status + "] " + e.statusText + ": " + e.responseURL);
                        if (this.xhrType === t.XHR_RESPONSE_TYPE.TEXT) this.data = r, this.type = t.TYPE.TEXT;
                        else if (this.xhrType === t.XHR_RESPONSE_TYPE.JSON) try {
                            this.data = JSON.parse(r), this.type = t.TYPE.JSON
                        } catch (t) {
                            return void this.abort("Error trying to parse loaded json: " + t)
                        } else if (this.xhrType === t.XHR_RESPONSE_TYPE.DOCUMENT) try {
                            if (window.DOMParser) {
                                var i = new DOMParser;
                                this.data = i.parseFromString(r, "text/xml")
                            } else {
                                var o = document.createElement("div");
                                o.innerHTML = r, this.data = o
                            }
                            this.type = t.TYPE.XML
                        } catch (t) {
                            return void this.abort("Error trying to parse loaded xml: " + t)
                        } else this.data = e.response || r;
                        this.complete()
                    }, t.prototype._determineCrossOrigin = function(t, e) {
                        if (0 === t.indexOf("data:")) return "";
                        e = e || window.location, p || (p = document.createElement("a")), p.href = t, t = (0, l.default)(p.href, {
                            strictMode: !0
                        });
                        var r = !t.port && "" === e.port || t.port === e.port,
                            n = t.protocol ? t.protocol + ":" : "";
                        return t.host === e.hostname && r && n === e.protocol ? "" : "anonymous"
                    }, t.prototype._determineXhrType = function() {
                        return t._xhrTypeMap[this.extension] || t.XHR_RESPONSE_TYPE.TEXT
                    }, t.prototype._determineLoadType = function() {
                        return t._loadTypeMap[this.extension] || t.LOAD_TYPE.XHR
                    }, t.prototype._getExtension = function() {
                        var t = this.url,
                            e = "";
                        if (this.isDataUrl) {
                            var r = t.indexOf("/");
                            e = t.substring(r + 1, t.indexOf(";", r))
                        } else {
                            var n = t.indexOf("?"),
                                i = t.indexOf("#"),
                                o = Math.min(n > -1 ? n : t.length, i > -1 ? i : t.length);
                            t = t.substring(0, o), e = t.substring(t.lastIndexOf(".") + 1)
                        }
                        return e.toLowerCase()
                    }, t.prototype._getMimeFromXhrType = function(e) {
                        switch (e) {
                            case t.XHR_RESPONSE_TYPE.BUFFER:
                                return "application/octet-binary";
                            case t.XHR_RESPONSE_TYPE.BLOB:
                                return "application/blob";
                            case t.XHR_RESPONSE_TYPE.DOCUMENT:
                                return "application/xml";
                            case t.XHR_RESPONSE_TYPE.JSON:
                                return "application/json";
                            case t.XHR_RESPONSE_TYPE.DEFAULT:
                            case t.XHR_RESPONSE_TYPE.TEXT:
                            default:
                                return "text/plain"
                        }
                    }, u(t, [{
                        key: "isDataUrl",
                        get: function() {
                            return this._hasFlag(t.STATUS_FLAGS.DATA_URL)
                        }
                    }, {
                        key: "isComplete",
                        get: function() {
                            return this._hasFlag(t.STATUS_FLAGS.COMPLETE)
                        }
                    }, {
                        key: "isLoading",
                        get: function() {
                            return this._hasFlag(t.STATUS_FLAGS.LOADING)
                        }
                    }]), t
                }();
            r.default = v, v.STATUS_FLAGS = {
                NONE: 0,
                DATA_URL: 1,
                COMPLETE: 2,
                LOADING: 4
            }, v.TYPE = {
                UNKNOWN: 0,
                JSON: 1,
                XML: 2,
                IMAGE: 3,
                AUDIO: 4,
                VIDEO: 5,
                TEXT: 6
            }, v.LOAD_TYPE = {
                XHR: 1,
                IMAGE: 2,
                AUDIO: 3,
                VIDEO: 4
            }, v.XHR_RESPONSE_TYPE = {
                DEFAULT: "text",
                BUFFER: "arraybuffer",
                BLOB: "blob",
                DOCUMENT: "document",
                JSON: "json",
                TEXT: "text"
            }, v._loadTypeMap = {
                gif: v.LOAD_TYPE.IMAGE,
                png: v.LOAD_TYPE.IMAGE,
                bmp: v.LOAD_TYPE.IMAGE,
                jpg: v.LOAD_TYPE.IMAGE,
                jpeg: v.LOAD_TYPE.IMAGE,
                tif: v.LOAD_TYPE.IMAGE,
                tiff: v.LOAD_TYPE.IMAGE,
                webp: v.LOAD_TYPE.IMAGE,
                tga: v.LOAD_TYPE.IMAGE,
                svg: v.LOAD_TYPE.IMAGE,
                "svg+xml": v.LOAD_TYPE.IMAGE,
                mp3: v.LOAD_TYPE.AUDIO,
                ogg: v.LOAD_TYPE.AUDIO,
                wav: v.LOAD_TYPE.AUDIO,
                mp4: v.LOAD_TYPE.VIDEO,
                webm: v.LOAD_TYPE.VIDEO
            }, v._xhrTypeMap = {
                xhtml: v.XHR_RESPONSE_TYPE.DOCUMENT,
                html: v.XHR_RESPONSE_TYPE.DOCUMENT,
                htm: v.XHR_RESPONSE_TYPE.DOCUMENT,
                xml: v.XHR_RESPONSE_TYPE.DOCUMENT,
                tmx: v.XHR_RESPONSE_TYPE.DOCUMENT,
                svg: v.XHR_RESPONSE_TYPE.DOCUMENT,
                tsx: v.XHR_RESPONSE_TYPE.DOCUMENT,
                gif: v.XHR_RESPONSE_TYPE.BLOB,
                png: v.XHR_RESPONSE_TYPE.BLOB,
                bmp: v.XHR_RESPONSE_TYPE.BLOB,
                jpg: v.XHR_RESPONSE_TYPE.BLOB,
                jpeg: v.XHR_RESPONSE_TYPE.BLOB,
                tif: v.XHR_RESPONSE_TYPE.BLOB,
                tiff: v.XHR_RESPONSE_TYPE.BLOB,
                webp: v.XHR_RESPONSE_TYPE.BLOB,
                tga: v.XHR_RESPONSE_TYPE.BLOB,
                json: v.XHR_RESPONSE_TYPE.JSON,
                text: v.XHR_RESPONSE_TYPE.TEXT,
                txt: v.XHR_RESPONSE_TYPE.TEXT,
                ttf: v.XHR_RESPONSE_TYPE.BUFFER,
                otf: v.XHR_RESPONSE_TYPE.BUFFER
            }, v.EMPTY_GIF = "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="
        }, {
            "mini-signals": 5,
            "parse-uri": 7
        }],
        34: [function(t, e, r) {
            "use strict";

            function n() {}

            function i(t, e, r, n) {
                var i = 0,
                    o = t.length;
                ! function s(a) {
                    if (a || i === o) return void(r && r(a));
                    n ? setTimeout(function() {
                        e(t[i++], s)
                    }, 1) : e(t[i++], s)
                }()
            }

            function o(t) {
                return function() {
                    if (null === t) throw new Error("Callback was already called.");
                    var e = t;
                    t = null, e.apply(this, arguments)
                }
            }

            function s(t, e) {
                function r(t, e, r) {
                    if (null != r && "function" != typeof r) throw new Error("task callback must be a function");
                    if (a.started = !0, null == t && a.idle()) return void setTimeout(function() {
                        return a.drain()
                    }, 1);
                    var i = {
                        data: t,
                        callback: "function" == typeof r ? r : n
                    };
                    e ? a._tasks.unshift(i) : a._tasks.push(i), setTimeout(function() {
                        return a.process()
                    }, 1)
                }

                function i(t) {
                    return function() {
                        s -= 1, t.callback.apply(t, arguments), null != arguments[0] && a.error(arguments[0], t.data), s <= a.concurrency - a.buffer && a.unsaturated(), a.idle() && a.drain(), a.process()
                    }
                }
                if (null == e) e = 1;
                else if (0 === e) throw new Error("Concurrency must not be zero");
                var s = 0,
                    a = {
                        _tasks: [],
                        concurrency: e,
                        saturated: n,
                        unsaturated: n,
                        buffer: e / 4,
                        empty: n,
                        drain: n,
                        error: n,
                        started: !1,
                        paused: !1,
                        push: function(t, e) {
                            r(t, !1, e)
                        },
                        kill: function() {
                            s = 0, a.drain = n, a.started = !1, a._tasks = []
                        },
                        unshift: function(t, e) {
                            r(t, !0, e)
                        },
                        process: function() {
                            for (; !a.paused && s < a.concurrency && a._tasks.length;) {
                                var e = a._tasks.shift();
                                0 === a._tasks.length && a.empty(), s += 1, s === a.concurrency && a.saturated(), t(e.data, o(i(e)))
                            }
                        },
                        length: function() {
                            return a._tasks.length
                        },
                        running: function() {
                            return s
                        },
                        idle: function() {
                            return a._tasks.length + s === 0
                        },
                        pause: function() {
                            !0 !== a.paused && (a.paused = !0)
                        },
                        resume: function() {
                            if (!1 !== a.paused) {
                                a.paused = !1;
                                for (var t = 1; t <= a.concurrency; t++) a.process()
                            }
                        }
                    };
                return a
            }
            r.__esModule = !0, r.eachSeries = i, r.queue = s
        }, {}],
        35: [function(t, e, r) {
            "use strict";

            function n(t) {
                for (var e = "", r = 0; r < t.length;) {
                    for (var n = [0, 0, 0], o = [0, 0, 0, 0], s = 0; s < n.length; ++s) r < t.length ? n[s] = 255 & t.charCodeAt(r++) : n[s] = 0;
                    switch (o[0] = n[0] >> 2, o[1] = (3 & n[0]) << 4 | n[1] >> 4, o[2] = (15 & n[1]) << 2 | n[2] >> 6, o[3] = 63 & n[2], r - (t.length - 1)) {
                        case 2:
                            o[3] = 64, o[2] = 64;
                            break;
                        case 1:
                            o[3] = 64
                    }
                    for (var a = 0; a < o.length; ++a) e += i.charAt(o[a])
                }
                return e
            }
            r.__esModule = !0, r.encodeBinary = n;
            var i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
        }, {}],
        36: [function(t, e, r) {
            "use strict";
            var n = t("./Loader").default,
                i = t("./Resource").default,
                o = t("./async"),
                s = t("./b64");
            n.Resource = i, n.async = o, n.base64 = s, e.exports = n, e.exports.default = n
        }, {
            "./Loader": 32,
            "./Resource": 33,
            "./async": 34,
            "./b64": 35
        }],
        37: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i() {
                return function(t, e) {
                    if (!t.data) return void e();
                    if (t.xhr && t.xhrType === a.default.XHR_RESPONSE_TYPE.BLOB)
                        if (window.Blob && "string" != typeof t.data) {
                            if (0 === t.data.type.indexOf("image")) {
                                var r = function() {
                                    var r = l.createObjectURL(t.data);
                                    return t.blob = t.data, t.data = new Image, t.data.src = r, t.type = a.default.TYPE.IMAGE, t.data.onload = function() {
                                        l.revokeObjectURL(r), t.data.onload = null, e()
                                    }, {
                                        v: void 0
                                    }
                                }();
                                if ("object" === (void 0 === r ? "undefined" : o(r))) return r.v
                            }
                        } else {
                            var n = t.xhr.getResponseHeader("content-type");
                            if (n && 0 === n.indexOf("image")) return t.data = new Image, t.data.src = "data:" + n + ";base64," + h.default.encodeBinary(t.xhr.responseText), t.type = a.default.TYPE.IMAGE, void(t.data.onload = function() {
                                t.data.onload = null, e()
                            })
                        } e()
                }
            }
            r.__esModule = !0;
            var o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            };
            r.blobMiddlewareFactory = i;
            var s = t("../../Resource"),
                a = n(s),
                u = t("../../b64"),
                h = n(u),
                l = window.URL || window.webkitURL
        }, {
            "../../Resource": 33,
            "../../b64": 35
        }],
        38: [function(t, e, r) {
            "use strict";

            function n() {
                this.protocol = null, this.slashes = null, this.auth = null, this.host = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.query = null, this.pathname = null, this.path = null, this.href = null
            }

            function i(t, e, r) {
                if (t && h.isObject(t) && t instanceof n) return t;
                var i = new n;
                return i.parse(t, e, r), i
            }

            function o(t) {
                return h.isString(t) && (t = i(t)), t instanceof n ? t.format() : n.prototype.format.call(t)
            }

            function s(t, e) {
                return i(t, !1, !0).resolve(e)
            }

            function a(t, e) {
                return t ? i(t, !1, !0).resolveObject(e) : e
            }
            var u = t("punycode"),
                h = t("./util");
            r.parse = i, r.resolve = s, r.resolveObject = a, r.format = o, r.Url = n;
            var l = /^([a-z0-9.+-]+:)/i,
                c = /:[0-9]*$/,
                d = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,
                f = ["<", ">", '"', "`", " ", "\r", "\n", "\t"],
                p = ["{", "}", "|", "\\", "^", "`"].concat(f),
                v = ["'"].concat(p),
                g = ["%", "/", "?", ";", "#"].concat(v),
                y = ["/", "?", "#"],
                m = /^[+a-z0-9A-Z_-]{0,63}$/,
                _ = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
                b = {
                    javascript: !0,
                    "javascript:": !0
                },
                x = {
                    javascript: !0,
                    "javascript:": !0
                },
                T = {
                    http: !0,
                    https: !0,
                    ftp: !0,
                    gopher: !0,
                    file: !0,
                    "http:": !0,
                    "https:": !0,
                    "ftp:": !0,
                    "gopher:": !0,
                    "file:": !0
                },
                w = t("querystring");
            n.prototype.parse = function(t, e, r) {
                if (!h.isString(t)) throw new TypeError("Parameter 'url' must be a string, not " + typeof t);
                var n = t.indexOf("?"),
                    i = -1 !== n && n < t.indexOf("#") ? "?" : "#",
                    o = t.split(i),
                    s = /\\/g;
                o[0] = o[0].replace(s, "/"), t = o.join(i);
                var a = t;
                if (a = a.trim(), !r && 1 === t.split("#").length) {
                    var c = d.exec(a);
                    if (c) return this.path = a, this.href = a, this.pathname = c[1], c[2] ? (this.search = c[2], this.query = e ? w.parse(this.search.substr(1)) : this.search.substr(1)) : e && (this.search = "", this.query = {}), this
                }
                var f = l.exec(a);
                if (f) {
                    f = f[0];
                    var p = f.toLowerCase();
                    this.protocol = p, a = a.substr(f.length)
                }
                if (r || f || a.match(/^\/\/[^@\/]+@[^@\/]+/)) {
                    var E = "//" === a.substr(0, 2);
                    !E || f && x[f] || (a = a.substr(2), this.slashes = !0)
                }
                if (!x[f] && (E || f && !T[f])) {
                    for (var S = -1, O = 0; O < y.length; O++) {
                        var M = a.indexOf(y[O]); - 1 !== M && (-1 === S || M < S) && (S = M)
                    }
                    var P, C;
                    C = -1 === S ? a.lastIndexOf("@") : a.lastIndexOf("@", S), -1 !== C && (P = a.slice(0, C), a = a.slice(C + 1), this.auth = decodeURIComponent(P)), S = -1;
                    for (var O = 0; O < g.length; O++) {
                        var M = a.indexOf(g[O]); - 1 !== M && (-1 === S || M < S) && (S = M)
                    } - 1 === S && (S = a.length), this.host = a.slice(0, S), a = a.slice(S), this.parseHost(), this.hostname = this.hostname || "";
                    var R = "[" === this.hostname[0] && "]" === this.hostname[this.hostname.length - 1];
                    if (!R)
                        for (var A = this.hostname.split(/\./), O = 0, I = A.length; O < I; O++) {
                            var D = A[O];
                            if (D && !D.match(m)) {
                                for (var L = "", N = 0, B = D.length; N < B; N++) D.charCodeAt(N) > 127 ? L += "x" : L += D[N];
                                if (!L.match(m)) {
                                    var F = A.slice(0, O),
                                        k = A.slice(O + 1),
                                        j = D.match(_);
                                    j && (F.push(j[1]), k.unshift(j[2])), k.length && (a = "/" + k.join(".") + a), this.hostname = F.join(".");
                                    break
                                }
                            }
                        }
                    this.hostname.length > 255 ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(), R || (this.hostname = u.toASCII(this.hostname));
                    var U = this.port ? ":" + this.port : "",
                        X = this.hostname || "";
                    this.host = X + U, this.href += this.host, R && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), "/" !== a[0] && (a = "/" + a))
                }
                if (!b[p])
                    for (var O = 0, I = v.length; O < I; O++) {
                        var G = v[O];
                        if (-1 !== a.indexOf(G)) {
                            var W = encodeURIComponent(G);
                            W === G && (W = escape(G)), a = a.split(G).join(W)
                        }
                    }
                var H = a.indexOf("#"); - 1 !== H && (this.hash = a.substr(H), a = a.slice(0, H));
                var V = a.indexOf("?");
                if (-1 !== V ? (this.search = a.substr(V), this.query = a.substr(V + 1), e && (this.query = w.parse(this.query)), a = a.slice(0, V)) : e && (this.search = "", this.query = {}), a && (this.pathname = a),
                    T[p] && this.hostname && !this.pathname && (this.pathname = "/"), this.pathname || this.search) {
                    var U = this.pathname || "",
                        Y = this.search || "";
                    this.path = U + Y
                }
                return this.href = this.format(), this
            }, n.prototype.format = function() {
                var t = this.auth || "";
                t && (t = encodeURIComponent(t), t = t.replace(/%3A/i, ":"), t += "@");
                var e = this.protocol || "",
                    r = this.pathname || "",
                    n = this.hash || "",
                    i = !1,
                    o = "";
                this.host ? i = t + this.host : this.hostname && (i = t + (-1 === this.hostname.indexOf(":") ? this.hostname : "[" + this.hostname + "]"), this.port && (i += ":" + this.port)), this.query && h.isObject(this.query) && Object.keys(this.query).length && (o = w.stringify(this.query));
                var s = this.search || o && "?" + o || "";
                return e && ":" !== e.substr(-1) && (e += ":"), this.slashes || (!e || T[e]) && !1 !== i ? (i = "//" + (i || ""), r && "/" !== r.charAt(0) && (r = "/" + r)) : i || (i = ""), n && "#" !== n.charAt(0) && (n = "#" + n), s && "?" !== s.charAt(0) && (s = "?" + s), r = r.replace(/[?#]/g, function(t) {
                    return encodeURIComponent(t)
                }), s = s.replace("#", "%23"), e + i + r + s + n
            }, n.prototype.resolve = function(t) {
                return this.resolveObject(i(t, !1, !0)).format()
            }, n.prototype.resolveObject = function(t) {
                if (h.isString(t)) {
                    var e = new n;
                    e.parse(t, !1, !0), t = e
                }
                for (var r = new n, i = Object.keys(this), o = 0; o < i.length; o++) {
                    var s = i[o];
                    r[s] = this[s]
                }
                if (r.hash = t.hash, "" === t.href) return r.href = r.format(), r;
                if (t.slashes && !t.protocol) {
                    for (var a = Object.keys(t), u = 0; u < a.length; u++) {
                        var l = a[u];
                        "protocol" !== l && (r[l] = t[l])
                    }
                    return T[r.protocol] && r.hostname && !r.pathname && (r.path = r.pathname = "/"), r.href = r.format(), r
                }
                if (t.protocol && t.protocol !== r.protocol) {
                    if (!T[t.protocol]) {
                        for (var c = Object.keys(t), d = 0; d < c.length; d++) {
                            var f = c[d];
                            r[f] = t[f]
                        }
                        return r.href = r.format(), r
                    }
                    if (r.protocol = t.protocol, t.host || x[t.protocol]) r.pathname = t.pathname;
                    else {
                        for (var p = (t.pathname || "").split("/"); p.length && !(t.host = p.shift()););
                        t.host || (t.host = ""), t.hostname || (t.hostname = ""), "" !== p[0] && p.unshift(""), p.length < 2 && p.unshift(""), r.pathname = p.join("/")
                    }
                    if (r.search = t.search, r.query = t.query, r.host = t.host || "", r.auth = t.auth, r.hostname = t.hostname || t.host, r.port = t.port, r.pathname || r.search) {
                        var v = r.pathname || "",
                            g = r.search || "";
                        r.path = v + g
                    }
                    return r.slashes = r.slashes || t.slashes, r.href = r.format(), r
                }
                var y = r.pathname && "/" === r.pathname.charAt(0),
                    m = t.host || t.pathname && "/" === t.pathname.charAt(0),
                    _ = m || y || r.host && t.pathname,
                    b = _,
                    w = r.pathname && r.pathname.split("/") || [],
                    p = t.pathname && t.pathname.split("/") || [],
                    E = r.protocol && !T[r.protocol];
                if (E && (r.hostname = "", r.port = null, r.host && ("" === w[0] ? w[0] = r.host : w.unshift(r.host)), r.host = "", t.protocol && (t.hostname = null, t.port = null, t.host && ("" === p[0] ? p[0] = t.host : p.unshift(t.host)), t.host = null), _ = _ && ("" === p[0] || "" === w[0])), m) r.host = t.host || "" === t.host ? t.host : r.host, r.hostname = t.hostname || "" === t.hostname ? t.hostname : r.hostname, r.search = t.search, r.query = t.query, w = p;
                else if (p.length) w || (w = []), w.pop(), w = w.concat(p), r.search = t.search, r.query = t.query;
                else if (!h.isNullOrUndefined(t.search)) {
                    if (E) {
                        r.hostname = r.host = w.shift();
                        var S = !!(r.host && r.host.indexOf("@") > 0) && r.host.split("@");
                        S && (r.auth = S.shift(), r.host = r.hostname = S.shift())
                    }
                    return r.search = t.search, r.query = t.query, h.isNull(r.pathname) && h.isNull(r.search) || (r.path = (r.pathname ? r.pathname : "") + (r.search ? r.search : "")), r.href = r.format(), r
                }
                if (!w.length) return r.pathname = null, r.search ? r.path = "/" + r.search : r.path = null, r.href = r.format(), r;
                for (var O = w.slice(-1)[0], M = (r.host || t.host || w.length > 1) && ("." === O || ".." === O) || "" === O, P = 0, C = w.length; C >= 0; C--) O = w[C], "." === O ? w.splice(C, 1) : ".." === O ? (w.splice(C, 1), P++) : P && (w.splice(C, 1), P--);
                if (!_ && !b)
                    for (; P--; P) w.unshift("..");
                !_ || "" === w[0] || w[0] && "/" === w[0].charAt(0) || w.unshift(""), M && "/" !== w.join("/").substr(-1) && w.push("");
                var R = "" === w[0] || w[0] && "/" === w[0].charAt(0);
                if (E) {
                    r.hostname = r.host = R ? "" : w.length ? w.shift() : "";
                    var S = !!(r.host && r.host.indexOf("@") > 0) && r.host.split("@");
                    S && (r.auth = S.shift(), r.host = r.hostname = S.shift())
                }
                return _ = _ || r.host && w.length, _ && !R && w.unshift(""), w.length ? r.pathname = w.join("/") : (r.pathname = null, r.path = null), h.isNull(r.pathname) && h.isNull(r.search) || (r.path = (r.pathname ? r.pathname : "") + (r.search ? r.search : "")), r.auth = t.auth || r.auth, r.slashes = r.slashes || t.slashes, r.href = r.format(), r
            }, n.prototype.parseHost = function() {
                var t = this.host,
                    e = c.exec(t);
                e && (e = e[0], ":" !== e && (this.port = e.substr(1)), t = t.substr(0, t.length - e.length)), t && (this.hostname = t)
            }
        }, {
            "./util": 39,
            punycode: 27,
            querystring: 30
        }],
        39: [function(t, e, r) {
            "use strict";
            e.exports = {
                isString: function(t) {
                    return "string" == typeof t
                },
                isObject: function(t) {
                    return "object" == typeof t && null !== t
                },
                isNull: function(t) {
                    return null === t
                },
                isNullOrUndefined: function(t) {
                    return null == t
                }
            }
        }, {}],
        40: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var o = t("../core"),
                s = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(o),
                a = t("ismobilejs"),
                u = n(a),
                h = t("./accessibleTarget"),
                l = n(h);
            s.utils.mixins.delayMixin(s.DisplayObject.prototype, l.default);
            var c = 100,
                d = 0,
                f = 0,
                p = 2,
                v = function() {
                    function t(e) {
                        i(this, t), !u.default.tablet && !u.default.phone || navigator.isCocoonJS || this.createTouchHook();
                        var r = document.createElement("div");
                        r.style.width = c + "px", r.style.height = c + "px", r.style.position = "absolute", r.style.top = d + "px", r.style.left = f + "px", r.style.zIndex = p, this.div = r, this.pool = [], this.renderId = 0, this.debug = !1, this.renderer = e, this.children = [], this._onKeyDown = this._onKeyDown.bind(this), this._onMouseMove = this._onMouseMove.bind(this), this.isActive = !1, this.isMobileAccessabillity = !1, window.addEventListener("keydown", this._onKeyDown, !1)
                    }
                    return t.prototype.createTouchHook = function() {
                        var t = this,
                            e = document.createElement("button");
                        e.style.width = "1px", e.style.height = "1px", e.style.position = "absolute", e.style.top = "-1000px", e.style.left = "-1000px", e.style.zIndex = 2, e.style.backgroundColor = "#FF0000", e.title = "HOOK DIV", e.addEventListener("focus", function() {
                            t.isMobileAccessabillity = !0, t.activate(), document.body.removeChild(e)
                        }), document.body.appendChild(e)
                    }, t.prototype.activate = function() {
                        this.isActive || (this.isActive = !0, window.document.addEventListener("mousemove", this._onMouseMove, !0), window.removeEventListener("keydown", this._onKeyDown, !1), this.renderer.on("postrender", this.update, this), this.renderer.view.parentNode && this.renderer.view.parentNode.appendChild(this.div))
                    }, t.prototype.deactivate = function() {
                        this.isActive && !this.isMobileAccessabillity && (this.isActive = !1, window.document.removeEventListener("mousemove", this._onMouseMove, !0), window.addEventListener("keydown", this._onKeyDown, !1), this.renderer.off("postrender", this.update), this.div.parentNode && this.div.parentNode.removeChild(this.div))
                    }, t.prototype.updateAccessibleObjects = function(t) {
                        if (t.visible) {
                            t.accessible && t.interactive && (t._accessibleActive || this.addChild(t), t.renderId = this.renderId);
                            for (var e = t.children, r = 0; r < e.length; r++) this.updateAccessibleObjects(e[r])
                        }
                    }, t.prototype.update = function() {
                        if (this.renderer.renderingToScreen) {
                            this.updateAccessibleObjects(this.renderer._lastObjectRendered);
                            var t = this.renderer.view.getBoundingClientRect(),
                                e = t.width / this.renderer.width,
                                r = t.height / this.renderer.height,
                                n = this.div;
                            n.style.left = t.left + "px", n.style.top = t.top + "px", n.style.width = this.renderer.width + "px", n.style.height = this.renderer.height + "px";
                            for (var i = 0; i < this.children.length; i++) {
                                var o = this.children[i];
                                if (o.renderId !== this.renderId) o._accessibleActive = !1, s.utils.removeItems(this.children, i, 1), this.div.removeChild(o._accessibleDiv), this.pool.push(o._accessibleDiv), o._accessibleDiv = null, i--, 0 === this.children.length && this.deactivate();
                                else {
                                    n = o._accessibleDiv;
                                    var a = o.hitArea,
                                        u = o.worldTransform;
                                    o.hitArea ? (n.style.left = (u.tx + a.x * u.a) * e + "px", n.style.top = (u.ty + a.y * u.d) * r + "px", n.style.width = a.width * u.a * e + "px", n.style.height = a.height * u.d * r + "px") : (a = o.getBounds(), this.capHitArea(a), n.style.left = a.x * e + "px", n.style.top = a.y * r + "px", n.style.width = a.width * e + "px", n.style.height = a.height * r + "px", n.title !== o.accessibleTitle && null !== o.accessibleTitle && (n.title = o.accessibleTitle), n.getAttribute("aria-label") !== o.accessibleHint && null !== o.accessibleHint && n.setAttribute("aria-label", o.accessibleHint))
                                }
                            }
                            this.renderId++
                        }
                    }, t.prototype.capHitArea = function(t) {
                        t.x < 0 && (t.width += t.x, t.x = 0), t.y < 0 && (t.height += t.y, t.y = 0), t.x + t.width > this.renderer.width && (t.width = this.renderer.width - t.x), t.y + t.height > this.renderer.height && (t.height = this.renderer.height - t.y)
                    }, t.prototype.addChild = function(t) {
                        var e = this.pool.pop();
                        e || (e = document.createElement("button"), e.style.width = c + "px", e.style.height = c + "px", e.style.backgroundColor = this.debug ? "rgba(255,0,0,0.5)" : "transparent", e.style.position = "absolute", e.style.zIndex = p, e.style.borderStyle = "none", navigator.userAgent.toLowerCase().indexOf("chrome") > -1 ? e.setAttribute("aria-live", "off") : e.setAttribute("aria-live", "polite"), navigator.userAgent.match(/rv:.*Gecko\//) ? e.setAttribute("aria-relevant", "additions") : e.setAttribute("aria-relevant", "text"), e.addEventListener("click", this._onClick.bind(this)), e.addEventListener("focus", this._onFocus.bind(this)), e.addEventListener("focusout", this._onFocusOut.bind(this))), t.accessibleTitle && null !== t.accessibleTitle ? e.title = t.accessibleTitle : t.accessibleHint && null !== t.accessibleHint || (e.title = "displayObject " + t.tabIndex), t.accessibleHint && null !== t.accessibleHint && e.setAttribute("aria-label", t.accessibleHint), t._accessibleActive = !0, t._accessibleDiv = e, e.displayObject = t, this.children.push(t), this.div.appendChild(t._accessibleDiv), t._accessibleDiv.tabIndex = t.tabIndex
                    }, t.prototype._onClick = function(t) {
                        var e = this.renderer.plugins.interaction;
                        e.dispatchEvent(t.target.displayObject, "click", e.eventData)
                    }, t.prototype._onFocus = function(t) {
                        t.target.getAttribute("aria-live", "off") || t.target.setAttribute("aria-live", "assertive");
                        var e = this.renderer.plugins.interaction;
                        e.dispatchEvent(t.target.displayObject, "mouseover", e.eventData)
                    }, t.prototype._onFocusOut = function(t) {
                        t.target.getAttribute("aria-live", "off") || t.target.setAttribute("aria-live", "polite");
                        var e = this.renderer.plugins.interaction;
                        e.dispatchEvent(t.target.displayObject, "mouseout", e.eventData)
                    }, t.prototype._onKeyDown = function(t) {
                        9 === t.keyCode && this.activate()
                    }, t.prototype._onMouseMove = function(t) {
                        0 === t.movementX && 0 === t.movementY || this.deactivate()
                    }, t.prototype.destroy = function() {
                        this.div = null;
                        for (var t = 0; t < this.children.length; t++) this.children[t].div = null;
                        window.document.removeEventListener("mousemove", this._onMouseMove, !0), window.removeEventListener("keydown", this._onKeyDown), this.pool = null, this.children = null, this.renderer = null
                    }, t
                }();
            r.default = v, s.WebGLRenderer.registerPlugin("accessibility", v), s.CanvasRenderer.registerPlugin("accessibility", v)
        }, {
            "../core": 65,
            "./accessibleTarget": 41,
            ismobilejs: 4
        }],
        41: [function(t, e, r) {
            "use strict";
            r.__esModule = !0, r.default = {
                accessible: !1,
                accessibleTitle: null,
                accessibleHint: null,
                tabIndex: 0,
                _accessibleActive: !1,
                _accessibleDiv: !1
            }
        }, {}],
        42: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            r.__esModule = !0;
            var i = t("./accessibleTarget");
            Object.defineProperty(r, "accessibleTarget", {
                enumerable: !0,
                get: function() {
                    return n(i).default
                }
            });
            var o = t("./AccessibilityManager");
            Object.defineProperty(r, "AccessibilityManager", {
                enumerable: !0,
                get: function() {
                    return n(o).default
                }
            })
        }, {
            "./AccessibilityManager": 40,
            "./accessibleTarget": 41
        }],
        43: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var o = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                s = t("./autoDetectRenderer"),
                a = t("./display/Container"),
                u = n(a),
                h = t("./ticker"),
                l = t("./settings"),
                c = n(l),
                d = t("./const"),
                f = function() {
                    function t(e, r, n, o, a) {
                        i(this, t), "number" == typeof e && (e = Object.assign({
                            width: e,
                            height: r || c.default.RENDER_OPTIONS.height,
                            forceCanvas: !!o,
                            sharedTicker: !!a
                        }, n)), this._options = e = Object.assign({
                            autoStart: !0,
                            sharedTicker: !1,
                            forceCanvas: !1,
                            sharedLoader: !1
                        }, e), this.renderer = (0, s.autoDetectRenderer)(e), this.stage = new u.default, this._ticker = null, this.ticker = e.sharedTicker ? h.shared : new h.Ticker, e.autoStart && this.start()
                    }
                    return t.prototype.render = function() {
                        this.renderer.render(this.stage)
                    }, t.prototype.stop = function() {
                        this._ticker.stop()
                    }, t.prototype.start = function() {
                        this._ticker.start()
                    }, t.prototype.destroy = function(t, e) {
                        if (this._ticker) {
                            var r = this._ticker;
                            this.ticker = null, r.destroy()
                        }
                        this.stage.destroy(e), this.stage = null, this.renderer.destroy(t), this.renderer = null, this._options = null
                    }, o(t, [{
                        key: "ticker",
                        set: function(t) {
                            this._ticker && this._ticker.remove(this.render, this), this._ticker = t, t && t.add(this.render, this, d.UPDATE_PRIORITY.LOW)
                        },
                        get: function() {
                            return this._ticker
                        }
                    }, {
                        key: "view",
                        get: function() {
                            return this.renderer.view
                        }
                    }, {
                        key: "screen",
                        get: function() {
                            return this.renderer.screen
                        }
                    }]), t
                }();
            r.default = f
        }, {
            "./autoDetectRenderer": 45,
            "./const": 46,
            "./display/Container": 48,
            "./settings": 101,
            "./ticker": 121
        }],
        44: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function s(t, e) {
                if (t instanceof Array) {
                    if ("precision" !== t[0].substring(0, 9)) {
                        var r = t.slice(0);
                        return r.unshift("precision " + e + " float;"), r
                    }
                } else if ("precision" !== t.trim().substring(0, 9)) return "precision " + e + " float;\n" + t;
                return t
            }
            r.__esModule = !0;
            var a = t("pixi-gl-core"),
                u = t("./settings"),
                h = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(u),
                l = function(t) {
                    function e(r, o, a, u, l) {
                        return n(this, e), i(this, t.call(this, r, s(o, l || h.default.PRECISION_VERTEX), s(a, l || h.default.PRECISION_FRAGMENT), void 0, u))
                    }
                    return o(e, t), e
                }(a.GLShader);
            r.default = l
        }, {
            "./settings": 101,
            "pixi-gl-core": 15
        }],
        45: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e, r, n) {
                var i = t && t.forceCanvas;
                return void 0 !== n && (i = n), !i && s.isWebGLSupported() ? new l.default(t, e, r) : new u.default(t, e, r)
            }
            r.__esModule = !0, r.autoDetectRenderer = i;
            var o = t("./utils"),
                s = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(o),
                a = t("./renderers/canvas/CanvasRenderer"),
                u = n(a),
                h = t("./renderers/webgl/WebGLRenderer"),
                l = n(h)
        }, {
            "./renderers/canvas/CanvasRenderer": 77,
            "./renderers/webgl/WebGLRenderer": 84,
            "./utils": 125
        }],
        46: [function(t, e, r) {
            "use strict";
            r.__esModule = !0, r.VERSION = "4.8.2", r.PI_2 = 2 * Math.PI, r.RAD_TO_DEG = 180 / Math.PI, r.DEG_TO_RAD = Math.PI / 180, r.RENDERER_TYPE = {
                UNKNOWN: 0,
                WEBGL: 1,
                CANVAS: 2
            }, r.BLEND_MODES = {
                NORMAL: 0,
                ADD: 1,
                MULTIPLY: 2,
                SCREEN: 3,
                OVERLAY: 4,
                DARKEN: 5,
                LIGHTEN: 6,
                COLOR_DODGE: 7,
                COLOR_BURN: 8,
                HARD_LIGHT: 9,
                SOFT_LIGHT: 10,
                DIFFERENCE: 11,
                EXCLUSION: 12,
                HUE: 13,
                SATURATION: 14,
                COLOR: 15,
                LUMINOSITY: 16,
                NORMAL_NPM: 17,
                ADD_NPM: 18,
                SCREEN_NPM: 19
            }, r.DRAW_MODES = {
                POINTS: 0,
                LINES: 1,
                LINE_LOOP: 2,
                LINE_STRIP: 3,
                TRIANGLES: 4,
                TRIANGLE_STRIP: 5,
                TRIANGLE_FAN: 6
            }, r.SCALE_MODES = {
                LINEAR: 0,
                NEAREST: 1
            }, r.WRAP_MODES = {
                CLAMP: 0,
                REPEAT: 1,
                MIRRORED_REPEAT: 2
            }, r.GC_MODES = {
                AUTO: 0,
                MANUAL: 1
            }, r.URL_FILE_EXTENSION = /\.(\w{3,4})(?:$|\?|#)/i, r.DATA_URI = /^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i, r.SVG_SIZE = /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i, r.SHAPES = {
                POLY: 0,
                RECT: 1,
                CIRC: 2,
                ELIP: 3,
                RREC: 4
            }, r.PRECISION = {
                LOW: "lowp",
                MEDIUM: "mediump",
                HIGH: "highp"
            }, r.TRANSFORM_MODE = {
                STATIC: 0,
                DYNAMIC: 1
            }, r.TEXT_GRADIENT = {
                LINEAR_VERTICAL: 0,
                LINEAR_HORIZONTAL: 1
            }, r.UPDATE_PRIORITY = {
                INTERACTION: 50,
                HIGH: 25,
                NORMAL: 0,
                LOW: -25,
                UTILITY: -50
            }
        }, {}],
        47: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("../math"),
                o = function() {
                    function t() {
                        n(this, t), this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0, this.rect = null
                    }
                    return t.prototype.isEmpty = function() {
                        return this.minX > this.maxX || this.minY > this.maxY
                    }, t.prototype.clear = function() {
                        this.updateID++, this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0
                    }, t.prototype.getRectangle = function(t) {
                        return this.minX > this.maxX || this.minY > this.maxY ? i.Rectangle.EMPTY : (t = t || new i.Rectangle(0, 0, 1, 1), t.x = this.minX, t.y = this.minY, t.width = this.maxX - this.minX, t.height = this.maxY - this.minY, t)
                    }, t.prototype.addPoint = function(t) {
                        this.minX = Math.min(this.minX, t.x), this.maxX = Math.max(this.maxX, t.x), this.minY = Math.min(this.minY, t.y), this.maxY = Math.max(this.maxY, t.y)
                    }, t.prototype.addQuad = function(t) {
                        var e = this.minX,
                            r = this.minY,
                            n = this.maxX,
                            i = this.maxY,
                            o = t[0],
                            s = t[1];
                        e = o < e ? o : e, r = s < r ? s : r, n = o > n ? o : n, i = s > i ? s : i, o = t[2], s = t[3], e = o < e ? o : e, r = s < r ? s : r, n = o > n ? o : n, i = s > i ? s : i, o = t[4], s = t[5], e = o < e ? o : e, r = s < r ? s : r, n = o > n ? o : n, i = s > i ? s : i, o = t[6], s = t[7], e = o < e ? o : e, r = s < r ? s : r, n = o > n ? o : n, i = s > i ? s : i, this.minX = e, this.minY = r, this.maxX = n, this.maxY = i
                    }, t.prototype.addFrame = function(t, e, r, n, i) {
                        var o = t.worldTransform,
                            s = o.a,
                            a = o.b,
                            u = o.c,
                            h = o.d,
                            l = o.tx,
                            c = o.ty,
                            d = this.minX,
                            f = this.minY,
                            p = this.maxX,
                            v = this.maxY,
                            g = s * e + u * r + l,
                            y = a * e + h * r + c;
                        d = g < d ? g : d, f = y < f ? y : f, p = g > p ? g : p, v = y > v ? y : v, g = s * n + u * r + l, y = a * n + h * r + c, d = g < d ? g : d, f = y < f ? y : f, p = g > p ? g : p, v = y > v ? y : v, g = s * e + u * i + l, y = a * e + h * i + c, d = g < d ? g : d, f = y < f ? y : f, p = g > p ? g : p, v = y > v ? y : v, g = s * n + u * i + l, y = a * n + h * i + c, d = g < d ? g : d, f = y < f ? y : f, p = g > p ? g : p, v = y > v ? y : v, this.minX = d, this.minY = f, this.maxX = p, this.maxY = v
                    }, t.prototype.addVertices = function(t, e, r, n) {
                        for (var i = t.worldTransform, o = i.a, s = i.b, a = i.c, u = i.d, h = i.tx, l = i.ty, c = this.minX, d = this.minY, f = this.maxX, p = this.maxY, v = r; v < n; v += 2) {
                            var g = e[v],
                                y = e[v + 1],
                                m = o * g + a * y + h,
                                _ = u * y + s * g + l;
                            c = m < c ? m : c, d = _ < d ? _ : d, f = m > f ? m : f, p = _ > p ? _ : p
                        }
                        this.minX = c, this.minY = d, this.maxX = f, this.maxY = p
                    }, t.prototype.addBounds = function(t) {
                        var e = this.minX,
                            r = this.minY,
                            n = this.maxX,
                            i = this.maxY;
                        this.minX = t.minX < e ? t.minX : e, this.minY = t.minY < r ? t.minY : r, this.maxX = t.maxX > n ? t.maxX : n, this.maxY = t.maxY > i ? t.maxY : i
                    }, t.prototype.addBoundsMask = function(t, e) {
                        var r = t.minX > e.minX ? t.minX : e.minX,
                            n = t.minY > e.minY ? t.minY : e.minY,
                            i = t.maxX < e.maxX ? t.maxX : e.maxX,
                            o = t.maxY < e.maxY ? t.maxY : e.maxY;
                        if (r <= i && n <= o) {
                            var s = this.minX,
                                a = this.minY,
                                u = this.maxX,
                                h = this.maxY;
                            this.minX = r < s ? r : s, this.minY = n < a ? n : a, this.maxX = i > u ? i : u, this.maxY = o > h ? o : h
                        }
                    }, t.prototype.addBoundsArea = function(t, e) {
                        var r = t.minX > e.x ? t.minX : e.x,
                            n = t.minY > e.y ? t.minY : e.y,
                            i = t.maxX < e.x + e.width ? t.maxX : e.x + e.width,
                            o = t.maxY < e.y + e.height ? t.maxY : e.y + e.height;
                        if (r <= i && n <= o) {
                            var s = this.minX,
                                a = this.minY,
                                u = this.maxX,
                                h = this.maxY;
                            this.minX = r < s ? r : s, this.minY = n < a ? n : a, this.maxX = i > u ? i : u, this.maxY = o > h ? o : h
                        }
                    }, t
                }();
            r.default = o
        }, {
            "../math": 70
        }],
        48: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("../utils"),
                u = t("./DisplayObject"),
                h = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(u),
                l = function(t) {
                    function e() {
                        n(this, e);
                        var r = i(this, t.call(this));
                        return r.children = [], r
                    }
                    return o(e, t), e.prototype.onChildrenChange = function() {}, e.prototype.addChild = function(t) {
                        var e = arguments.length;
                        if (e > 1)
                            for (var r = 0; r < e; r++) this.addChild(arguments[r]);
                        else t.parent && t.parent.removeChild(t), t.parent = this, t.transform._parentID = -1, this.children.push(t), this._boundsID++, this.onChildrenChange(this.children.length - 1), t.emit("added", this);
                        return t
                    }, e.prototype.addChildAt = function(t, e) {
                        if (e < 0 || e > this.children.length) throw new Error(t + "addChildAt: The index " + e + " supplied is out of bounds " + this.children.length);
                        return t.parent && t.parent.removeChild(t), t.parent = this, t.transform._parentID = -1, this.children.splice(e, 0, t), this._boundsID++, this.onChildrenChange(e), t.emit("added", this), t
                    }, e.prototype.swapChildren = function(t, e) {
                        if (t !== e) {
                            var r = this.getChildIndex(t),
                                n = this.getChildIndex(e);
                            this.children[r] = e, this.children[n] = t, this.onChildrenChange(r < n ? r : n)
                        }
                    }, e.prototype.getChildIndex = function(t) {
                        var e = this.children.indexOf(t);
                        if (-1 === e) throw new Error("The supplied DisplayObject must be a child of the caller");
                        return e
                    }, e.prototype.setChildIndex = function(t, e) {
                        if (e < 0 || e >= this.children.length) throw new Error("The index " + e + " supplied is out of bounds " + this.children.length);
                        var r = this.getChildIndex(t);
                        (0, a.removeItems)(this.children, r, 1), this.children.splice(e, 0, t), this.onChildrenChange(e)
                    }, e.prototype.getChildAt = function(t) {
                        if (t < 0 || t >= this.children.length) throw new Error("getChildAt: Index (" + t + ") does not exist.");
                        return this.children[t]
                    }, e.prototype.removeChild = function(t) {
                        var e = arguments.length;
                        if (e > 1)
                            for (var r = 0; r < e; r++) this.removeChild(arguments[r]);
                        else {
                            var n = this.children.indexOf(t);
                            if (-1 === n) return null;
                            t.parent = null, t.transform._parentID = -1, (0, a.removeItems)(this.children, n, 1), this._boundsID++, this.onChildrenChange(n), t.emit("removed", this)
                        }
                        return t
                    }, e.prototype.removeChildAt = function(t) {
                        var e = this.getChildAt(t);
                        return e.parent = null, e.transform._parentID = -1, (0, a.removeItems)(this.children, t, 1), this._boundsID++, this.onChildrenChange(t), e.emit("removed", this), e
                    }, e.prototype.removeChildren = function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                            e = arguments[1],
                            r = t,
                            n = "number" == typeof e ? e : this.children.length,
                            i = n - r,
                            o = void 0;
                        if (i > 0 && i <= n) {
                            o = this.children.splice(r, i);
                            for (var s = 0; s < o.length; ++s) o[s].parent = null, o[s].transform && (o[s].transform._parentID = -1);
                            this._boundsID++, this.onChildrenChange(t);
                            for (var a = 0; a < o.length; ++a) o[a].emit("removed", this);
                            return o
                        }
                        if (0 === i && 0 === this.children.length) return [];
                        throw new RangeError("removeChildren: numeric values are outside the acceptable range.")
                    }, e.prototype.updateTransform = function() {
                        this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha;
                        for (var t = 0, e = this.children.length; t < e; ++t) {
                            var r = this.children[t];
                            r.visible && r.updateTransform()
                        }
                    }, e.prototype.calculateBounds = function() {
                        this._bounds.clear(), this._calculateBounds();
                        for (var t = 0; t < this.children.length; t++) {
                            var e = this.children[t];
                            e.visible && e.renderable && (e.calculateBounds(), e._mask ? (e._mask.calculateBounds(), this._bounds.addBoundsMask(e._bounds, e._mask._bounds)) : e.filterArea ? this._bounds.addBoundsArea(e._bounds, e.filterArea) : this._bounds.addBounds(e._bounds))
                        }
                        this._lastBoundsID = this._boundsID
                    }, e.prototype._calculateBounds = function() {}, e.prototype.renderWebGL = function(t) {
                        if (this.visible && !(this.worldAlpha <= 0) && this.renderable)
                            if (this._mask || this._filters) this.renderAdvancedWebGL(t);
                            else {
                                this._renderWebGL(t);
                                for (var e = 0, r = this.children.length; e < r; ++e) this.children[e].renderWebGL(t)
                            }
                    }, e.prototype.renderAdvancedWebGL = function(t) {
                        t.flush();
                        var e = this._filters,
                            r = this._mask;
                        if (e) {
                            this._enabledFilters || (this._enabledFilters = []), this._enabledFilters.length = 0;
                            for (var n = 0; n < e.length; n++) e[n].enabled && this._enabledFilters.push(e[n]);
                            this._enabledFilters.length && t.filterManager.pushFilter(this, this._enabledFilters)
                        }
                        r && t.maskManager.pushMask(this, this._mask), this._renderWebGL(t);
                        for (var i = 0, o = this.children.length; i < o; i++) this.children[i].renderWebGL(t);
                        t.flush(), r && t.maskManager.popMask(this, this._mask), e && this._enabledFilters && this._enabledFilters.length && t.filterManager.popFilter()
                    }, e.prototype._renderWebGL = function(t) {}, e.prototype._renderCanvas = function(t) {}, e.prototype.renderCanvas = function(t) {
                        if (this.visible && !(this.worldAlpha <= 0) && this.renderable) {
                            this._mask && t.maskManager.pushMask(this._mask), this._renderCanvas(t);
                            for (var e = 0, r = this.children.length; e < r; ++e) this.children[e].renderCanvas(t);
                            this._mask && t.maskManager.popMask(t)
                        }
                    }, e.prototype.destroy = function(e) {
                        t.prototype.destroy.call(this);
                        var r = "boolean" == typeof e ? e : e && e.children,
                            n = this.removeChildren(0, this.children.length);
                        if (r)
                            for (var i = 0; i < n.length; ++i) n[i].destroy(e)
                    }, s(e, [{
                        key: "width",
                        get: function() {
                            return this.scale.x * this.getLocalBounds().width
                        },
                        set: function(t) {
                            var e = this.getLocalBounds().width;
                            this.scale.x = 0 !== e ? t / e : 1, this._width = t
                        }
                    }, {
                        key: "height",
                        get: function() {
                            return this.scale.y * this.getLocalBounds().height
                        },
                        set: function(t) {
                            var e = this.getLocalBounds().height;
                            this.scale.y = 0 !== e ? t / e : 1, this._height = t
                        }
                    }]), e
                }(h.default);
            r.default = l, l.prototype.containerUpdateTransform = l.prototype.updateTransform
        }, {
            "../utils": 125,
            "./DisplayObject": 49
        }],
        49: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                u = t("eventemitter3"),
                h = n(u),
                l = t("../const"),
                c = t("../settings"),
                d = n(c),
                f = t("./TransformStatic"),
                p = n(f),
                v = t("./Transform"),
                g = n(v),
                y = t("./Bounds"),
                m = n(y),
                _ = t("../math"),
                b = function(t) {
                    function e() {
                        i(this, e);
                        var r = o(this, t.call(this)),
                            n = d.default.TRANSFORM_MODE === l.TRANSFORM_MODE.STATIC ? p.default : g.default;
                        return r.tempDisplayObjectParent = null, r.transform = new n, r.alpha = 1, r.visible = !0, r.renderable = !0, r.parent = null, r.worldAlpha = 1, r.filterArea = null, r._filters = null, r._enabledFilters = null, r._bounds = new m.default, r._boundsID = 0, r._lastBoundsID = -1, r._boundsRect = null, r._localBoundsRect = null, r._mask = null, r._destroyed = !1, r
                    }
                    return s(e, t), e.prototype.updateTransform = function() {
                        this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha, this._bounds.updateID++
                    }, e.prototype._recursivePostUpdateTransform = function() {
                        this.parent ? (this.parent._recursivePostUpdateTransform(), this.transform.updateTransform(this.parent.transform)) : this.transform.updateTransform(this._tempDisplayObjectParent.transform)
                    }, e.prototype.getBounds = function(t, e) {
                        return t || (this.parent ? (this._recursivePostUpdateTransform(), this.updateTransform()) : (this.parent = this._tempDisplayObjectParent, this.updateTransform(), this.parent = null)), this._boundsID !== this._lastBoundsID && this.calculateBounds(), e || (this._boundsRect || (this._boundsRect = new _.Rectangle), e = this._boundsRect), this._bounds.getRectangle(e)
                    }, e.prototype.getLocalBounds = function(t) {
                        var e = this.transform,
                            r = this.parent;
                        this.parent = null, this.transform = this._tempDisplayObjectParent.transform, t || (this._localBoundsRect || (this._localBoundsRect = new _.Rectangle), t = this._localBoundsRect);
                        var n = this.getBounds(!1, t);
                        return this.parent = r, this.transform = e, n
                    }, e.prototype.toGlobal = function(t, e) {
                        return arguments.length > 2 && void 0 !== arguments[2] && arguments[2] || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.apply(t, e)
                    }, e.prototype.toLocal = function(t, e, r, n) {
                        return e && (t = e.toGlobal(t, r, n)), n || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.applyInverse(t, r)
                    }, e.prototype.renderWebGL = function(t) {}, e.prototype.renderCanvas = function(t) {}, e.prototype.setParent = function(t) {
                        if (!t || !t.addChild) throw new Error("setParent: Argument must be a Container");
                        return t.addChild(this), t
                    }, e.prototype.setTransform = function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                            e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1,
                            n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1,
                            i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0,
                            o = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0,
                            s = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : 0,
                            a = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : 0,
                            u = arguments.length > 8 && void 0 !== arguments[8] ? arguments[8] : 0;
                        return this.position.x = t, this.position.y = e, this.scale.x = r || 1, this.scale.y = n || 1, this.rotation = i, this.skew.x = o, this.skew.y = s, this.pivot.x = a, this.pivot.y = u, this
                    }, e.prototype.destroy = function() {
                        this.removeAllListeners(), this.parent && this.parent.removeChild(this), this.transform = null, this.parent = null, this._bounds = null, this._currentBounds = null, this._mask = null, this.filterArea = null, this.interactive = !1, this.interactiveChildren = !1, this._destroyed = !0
                    }, a(e, [{
                        key: "_tempDisplayObjectParent",
                        get: function() {
                            return null === this.tempDisplayObjectParent && (this.tempDisplayObjectParent = new e), this.tempDisplayObjectParent
                        }
                    }, {
                        key: "x",
                        get: function() {
                            return this.position.x
                        },
                        set: function(t) {
                            this.transform.position.x = t
                        }
                    }, {
                        key: "y",
                        get: function() {
                            return this.position.y
                        },
                        set: function(t) {
                            this.transform.position.y = t
                        }
                    }, {
                        key: "worldTransform",
                        get: function() {
                            return this.transform.worldTransform
                        }
                    }, {
                        key: "localTransform",
                        get: function() {
                            return this.transform.localTransform
                        }
                    }, {
                        key: "position",
                        get: function() {
                            return this.transform.position
                        },
                        set: function(t) {
                            this.transform.position.copy(t)
                        }
                    }, {
                        key: "scale",
                        get: function() {
                            return this.transform.scale
                        },
                        set: function(t) {
                            this.transform.scale.copy(t)
                        }
                    }, {
                        key: "pivot",
                        get: function() {
                            return this.transform.pivot
                        },
                        set: function(t) {
                            this.transform.pivot.copy(t)
                        }
                    }, {
                        key: "skew",
                        get: function() {
                            return this.transform.skew
                        },
                        set: function(t) {
                            this.transform.skew.copy(t)
                        }
                    }, {
                        key: "rotation",
                        get: function() {
                            return this.transform.rotation
                        },
                        set: function(t) {
                            this.transform.rotation = t
                        }
                    }, {
                        key: "worldVisible",
                        get: function() {
                            var t = this;
                            do {
                                if (!t.visible) return !1;
                                t = t.parent
                            } while (t);
                            return !0
                        }
                    }, {
                        key: "mask",
                        get: function() {
                            return this._mask
                        },
                        set: function(t) {
                            this._mask && (this._mask.renderable = !0, this._mask.isMask = !1), this._mask = t, this._mask && (this._mask.renderable = !1, this._mask.isMask = !0)
                        }
                    }, {
                        key: "filters",
                        get: function() {
                            return this._filters && this._filters.slice()
                        },
                        set: function(t) {
                            this._filters = t && t.slice()
                        }
                    }]), e
                }(h.default);
            r.default = b, b.prototype.displayObjectUpdateTransform = b.prototype.updateTransform
        }, {
            "../const": 46,
            "../math": 70,
            "../settings": 101,
            "./Bounds": 47,
            "./Transform": 50,
            "./TransformStatic": 52,
            eventemitter3: 3
        }],
        50: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("../math"),
                u = t("./TransformBase"),
                h = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(u),
                l = function(t) {
                    function e() {
                        n(this, e);
                        var r = i(this, t.call(this));
                        return r.position = new a.Point(0, 0), r.scale = new a.Point(1, 1), r.skew = new a.ObservablePoint(r.updateSkew, r, 0, 0), r.pivot = new a.Point(0, 0), r._rotation = 0, r._cx = 1, r._sx = 0, r._cy = 0, r._sy = 1, r
                    }
                    return o(e, t), e.prototype.updateSkew = function() {
                        this._cx = Math.cos(this._rotation + this.skew._y), this._sx = Math.sin(this._rotation + this.skew._y), this._cy = -Math.sin(this._rotation - this.skew._x), this._sy = Math.cos(this._rotation - this.skew._x)
                    }, e.prototype.updateLocalTransform = function() {
                        var t = this.localTransform;
                        t.a = this._cx * this.scale.x, t.b = this._sx * this.scale.x, t.c = this._cy * this.scale.y, t.d = this._sy * this.scale.y, t.tx = this.position.x - (this.pivot.x * t.a + this.pivot.y * t.c), t.ty = this.position.y - (this.pivot.x * t.b + this.pivot.y * t.d)
                    }, e.prototype.updateTransform = function(t) {
                        var e = this.localTransform;
                        e.a = this._cx * this.scale.x, e.b = this._sx * this.scale.x, e.c = this._cy * this.scale.y, e.d = this._sy * this.scale.y, e.tx = this.position.x - (this.pivot.x * e.a + this.pivot.y * e.c), e.ty = this.position.y - (this.pivot.x * e.b + this.pivot.y * e.d);
                        var r = t.worldTransform,
                            n = this.worldTransform;
                        n.a = e.a * r.a + e.b * r.c, n.b = e.a * r.b + e.b * r.d, n.c = e.c * r.a + e.d * r.c, n.d = e.c * r.b + e.d * r.d, n.tx = e.tx * r.a + e.ty * r.c + r.tx, n.ty = e.tx * r.b + e.ty * r.d + r.ty, this._worldID++
                    }, e.prototype.setFromMatrix = function(t) {
                        t.decompose(this)
                    }, s(e, [{
                        key: "rotation",
                        get: function() {
                            return this._rotation
                        },
                        set: function(t) {
                            this._rotation = t, this.updateSkew()
                        }
                    }]), e
                }(h.default);
            r.default = l
        }, {
            "../math": 70,
            "./TransformBase": 51
        }],
        51: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("../math"),
                o = function() {
                    function t() {
                        n(this, t), this.worldTransform = new i.Matrix, this.localTransform = new i.Matrix, this._worldID = 0, this._parentID = 0
                    }
                    return t.prototype.updateLocalTransform = function() {}, t.prototype.updateTransform = function(t) {
                        var e = t.worldTransform,
                            r = this.worldTransform,
                            n = this.localTransform;
                        r.a = n.a * e.a + n.b * e.c, r.b = n.a * e.b + n.b * e.d, r.c = n.c * e.a + n.d * e.c, r.d = n.c * e.b + n.d * e.d, r.tx = n.tx * e.a + n.ty * e.c + e.tx, r.ty = n.tx * e.b + n.ty * e.d + e.ty, this._worldID++
                    }, t
                }();
            r.default = o, o.prototype.updateWorldTransform = o.prototype.updateTransform, o.IDENTITY = new o
        }, {
            "../math": 70
        }],
        52: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("../math"),
                u = t("./TransformBase"),
                h = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(u),
                l = function(t) {
                    function e() {
                        n(this, e);
                        var r = i(this, t.call(this));
                        return r.position = new a.ObservablePoint(r.onChange, r, 0, 0), r.scale = new a.ObservablePoint(r.onChange, r, 1, 1), r.pivot = new a.ObservablePoint(r.onChange, r, 0, 0), r.skew = new a.ObservablePoint(r.updateSkew, r, 0, 0), r._rotation = 0, r._cx = 1, r._sx = 0, r._cy = 0, r._sy = 1, r._localID = 0, r._currentLocalID = 0, r
                    }
                    return o(e, t), e.prototype.onChange = function() {
                        this._localID++
                    }, e.prototype.updateSkew = function() {
                        this._cx = Math.cos(this._rotation + this.skew._y), this._sx = Math.sin(this._rotation + this.skew._y), this._cy = -Math.sin(this._rotation - this.skew._x), this._sy = Math.cos(this._rotation - this.skew._x), this._localID++
                    }, e.prototype.updateLocalTransform = function() {
                        var t = this.localTransform;
                        this._localID !== this._currentLocalID && (t.a = this._cx * this.scale._x, t.b = this._sx * this.scale._x, t.c = this._cy * this.scale._y, t.d = this._sy * this.scale._y, t.tx = this.position._x - (this.pivot._x * t.a + this.pivot._y * t.c), t.ty = this.position._y - (this.pivot._x * t.b + this.pivot._y * t.d), this._currentLocalID = this._localID, this._parentID = -1)
                    }, e.prototype.updateTransform = function(t) {
                        var e = this.localTransform;
                        if (this._localID !== this._currentLocalID && (e.a = this._cx * this.scale._x, e.b = this._sx * this.scale._x, e.c = this._cy * this.scale._y, e.d = this._sy * this.scale._y, e.tx = this.position._x - (this.pivot._x * e.a + this.pivot._y * e.c), e.ty = this.position._y - (this.pivot._x * e.b + this.pivot._y * e.d), this._currentLocalID = this._localID, this._parentID = -1), this._parentID !== t._worldID) {
                            var r = t.worldTransform,
                                n = this.worldTransform;
                            n.a = e.a * r.a + e.b * r.c, n.b = e.a * r.b + e.b * r.d, n.c = e.c * r.a + e.d * r.c, n.d = e.c * r.b + e.d * r.d, n.tx = e.tx * r.a + e.ty * r.c + r.tx, n.ty = e.tx * r.b + e.ty * r.d + r.ty, this._parentID = t._worldID, this._worldID++
                        }
                    }, e.prototype.setFromMatrix = function(t) {
                        t.decompose(this), this._localID++
                    }, s(e, [{
                        key: "rotation",
                        get: function() {
                            return this._rotation
                        },
                        set: function(t) {
                            this._rotation = t, this.updateSkew()
                        }
                    }]), e
                }(h.default);
            r.default = l
        }, {
            "../math": 70,
            "./TransformBase": 51
        }],
        53: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("../display/Container"),
                u = n(a),
                h = t("../textures/RenderTexture"),
                l = n(h),
                c = t("../textures/Texture"),
                d = n(c),
                f = t("./GraphicsData"),
                p = n(f),
                v = t("../sprites/Sprite"),
                g = n(v),
                y = t("../math"),
                m = t("../utils"),
                _ = t("../const"),
                b = t("../display/Bounds"),
                x = n(b),
                T = t("./utils/bezierCurveTo"),
                w = n(T),
                E = t("../renderers/canvas/CanvasRenderer"),
                S = n(E),
                O = void 0,
                M = new y.Matrix,
                P = new y.Point,
                C = new Float32Array(4),
                R = new Float32Array(4),
                A = function(t) {
                    function e() {
                        var r = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                        i(this, e);
                        var n = o(this, t.call(this));
                        return n.fillAlpha = 1, n.lineWidth = 0, n.nativeLines = r, n.lineColor = 0, n.lineAlignment = .5, n.graphicsData = [], n.tint = 16777215, n._prevTint = 16777215, n.blendMode = _.BLEND_MODES.NORMAL, n.currentPath = null, n._webGL = {}, n.isMask = !1, n.boundsPadding = 0, n._localBounds = new x.default, n.dirty = 0, n.fastRectDirty = -1, n.clearDirty = 0, n.boundsDirty = -1, n.cachedSpriteDirty = !1, n._spriteRect = null, n._fastRect = !1, n._prevRectTint = null, n._prevRectFillColor = null, n
                    }
                    return s(e, t), e.prototype.clone = function() {
                        var t = new e;
                        t.renderable = this.renderable, t.fillAlpha = this.fillAlpha, t.lineWidth = this.lineWidth, t.lineColor = this.lineColor, t.lineAlignment = this.lineAlignment, t.tint = this.tint, t.blendMode = this.blendMode, t.isMask = this.isMask, t.boundsPadding = this.boundsPadding, t.dirty = 0, t.cachedSpriteDirty = this.cachedSpriteDirty;
                        for (var r = 0; r < this.graphicsData.length; ++r) t.graphicsData.push(this.graphicsData[r].clone());
                        return t.currentPath = t.graphicsData[t.graphicsData.length - 1], t.updateLocalBounds(), t
                    }, e.prototype._quadraticCurveLength = function(t, e, r, n, i, o) {
                        var s = t - (2 * r + i),
                            a = e - (2 * n + o),
                            u = (r - 2) * t * 2,
                            h = (n - 2) * e * 2,
                            l = 4 * (s * s + a * a),
                            c = 4 * (s * u + a * h),
                            d = u * u + h * h,
                            f = 2 * Math.sqrt(l + c + d),
                            p = Math.sqrt(l),
                            v = 2 * l * p,
                            g = 2 * Math.sqrt(d),
                            y = c / p;
                        return (v * f + p * c * (f - g) + (4 * d * l - c * c) * Math.log((2 * p + y + f) / (y + g))) / (4 * v)
                    }, e.prototype._bezierCurveLength = function(t, e, r, n, i, o, s, a) {
                        for (var u = 0, h = 0, l = 0, c = 0, d = 0, f = 0, p = 0, v = 0, g = 0, y = 0, m = 0, _ = t, b = e, x = 1; x <= 10; ++x) h = x / 10, l = h * h, c = l * h, d = 1 - h, f = d * d, p = f * d, v = p * t + 3 * f * h * r + 3 * d * l * i + c * s, g = p * e + 3 * f * h * n + 3 * d * l * o + c * a, y = _ - v, m = b - g, _ = v, b = g, u += Math.sqrt(y * y + m * m);
                        return u
                    }, e.prototype._segmentsCount = function(t) {
                        var r = Math.ceil(t / e.CURVES.maxLength);
                        return r < e.CURVES.minSegments ? r = e.CURVES.minSegments : r > e.CURVES.maxSegments && (r = e.CURVES.maxSegments), r
                    }, e.prototype.lineStyle = function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                            e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1,
                            n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : .5;
                        if (this.lineWidth = t, this.lineColor = e, this.lineAlpha = r, this.lineAlignment = n, this.currentPath)
                            if (this.currentPath.shape.points.length) {
                                var i = new y.Polygon(this.currentPath.shape.points.slice(-2));
                                i.closed = !1, this.drawShape(i)
                            } else this.currentPath.lineWidth = this.lineWidth, this.currentPath.lineColor = this.lineColor, this.currentPath.lineAlpha = this.lineAlpha, this.currentPath.lineAlignment = this.lineAlignment;
                        return this
                    }, e.prototype.moveTo = function(t, e) {
                        var r = new y.Polygon([t, e]);
                        return r.closed = !1, this.drawShape(r), this
                    }, e.prototype.lineTo = function(t, e) {
                        var r = this.currentPath.shape.points,
                            n = r[r.length - 2],
                            i = r[r.length - 1];
                        return n === t && i === e || (r.push(t, e), this.dirty++), this
                    }, e.prototype.quadraticCurveTo = function(t, r, n, i) {
                        this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
                        var o = this.currentPath.shape.points,
                            s = 0,
                            a = 0;
                        0 === o.length && this.moveTo(0, 0);
                        for (var u = o[o.length - 2], h = o[o.length - 1], l = e.CURVES.adaptive ? this._segmentsCount(this._quadraticCurveLength(u, h, t, r, n, i)) : 20, c = 1; c <= l; ++c) {
                            var d = c / l;
                            s = u + (t - u) * d, a = h + (r - h) * d, o.push(s + (t + (n - t) * d - s) * d, a + (r + (i - r) * d - a) * d)
                        }
                        return this.dirty++, this
                    }, e.prototype.bezierCurveTo = function(t, r, n, i, o, s) {
                        this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
                        var a = this.currentPath.shape.points,
                            u = a[a.length - 2],
                            h = a[a.length - 1];
                        a.length -= 2;
                        var l = e.CURVES.adaptive ? this._segmentsCount(this._bezierCurveLength(u, h, t, r, n, i, o, s)) : 20;
                        return (0, w.default)(u, h, t, r, n, i, o, s, l, a), this.dirty++, this
                    }, e.prototype.arcTo = function(t, e, r, n, i) {
                        this.currentPath ? 0 === this.currentPath.shape.points.length && this.currentPath.shape.points.push(t, e) : this.moveTo(t, e);
                        var o = this.currentPath.shape.points,
                            s = o[o.length - 2],
                            a = o[o.length - 1],
                            u = a - e,
                            h = s - t,
                            l = n - e,
                            c = r - t,
                            d = Math.abs(u * c - h * l);
                        if (d < 1e-8 || 0 === i) o[o.length - 2] === t && o[o.length - 1] === e || o.push(t, e);
                        else {
                            var f = u * u + h * h,
                                p = l * l + c * c,
                                v = u * l + h * c,
                                g = i * Math.sqrt(f) / d,
                                y = i * Math.sqrt(p) / d,
                                m = g * v / f,
                                _ = y * v / p,
                                b = g * c + y * h,
                                x = g * l + y * u,
                                T = h * (y + m),
                                w = u * (y + m),
                                E = c * (g + _),
                                S = l * (g + _),
                                O = Math.atan2(w - x, T - b),
                                M = Math.atan2(S - x, E - b);
                            this.arc(b + t, x + e, i, O, M, h * l > c * u)
                        }
                        return this.dirty++, this
                    }, e.prototype.arc = function(t, r, n, i, o) {
                        var s = arguments.length > 5 && void 0 !== arguments[5] && arguments[5];
                        if (i === o) return this;
                        !s && o <= i ? o += _.PI_2 : s && i <= o && (i += _.PI_2);
                        var a = o - i,
                            u = e.CURVES.adaptive ? this._segmentsCount(Math.abs(a) * n) : 40 * Math.ceil(Math.abs(a) / _.PI_2);
                        if (0 === a) return this;
                        var h = t + Math.cos(i) * n,
                            l = r + Math.sin(i) * n,
                            c = this.currentPath ? this.currentPath.shape.points : null;
                        if (c) {
                            var d = Math.abs(c[c.length - 2] - h),
                                f = Math.abs(c[c.length - 1] - l);
                            d < .001 && f < .001 || c.push(h, l)
                        } else this.moveTo(h, l), c = this.currentPath.shape.points;
                        for (var p = a / (2 * u), v = 2 * p, g = Math.cos(p), y = Math.sin(p), m = u - 1, b = m % 1 / m, x = 0; x <= m; ++x) {
                            var T = x + b * x,
                                w = p + i + v * T,
                                E = Math.cos(w),
                                S = -Math.sin(w);
                            c.push((g * E + y * S) * n + t, (g * -S + y * E) * n + r)
                        }
                        return this.dirty++, this
                    }, e.prototype.beginFill = function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                            e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;
                        return this.filling = !0, this.fillColor = t, this.fillAlpha = e, this.currentPath && this.currentPath.shape.points.length <= 2 && (this.currentPath.fill = this.filling, this.currentPath.fillColor = this.fillColor, this.currentPath.fillAlpha = this.fillAlpha), this
                    }, e.prototype.endFill = function() {
                        return this.filling = !1, this.fillColor = null, this.fillAlpha = 1, this
                    }, e.prototype.drawRect = function(t, e, r, n) {
                        return this.drawShape(new y.Rectangle(t, e, r, n)), this
                    }, e.prototype.drawRoundedRect = function(t, e, r, n, i) {
                        return this.drawShape(new y.RoundedRectangle(t, e, r, n, i)), this
                    }, e.prototype.drawCircle = function(t, e, r) {
                        return this.drawShape(new y.Circle(t, e, r)), this
                    }, e.prototype.drawEllipse = function(t, e, r, n) {
                        return this.drawShape(new y.Ellipse(t, e, r, n)), this
                    }, e.prototype.drawPolygon = function(t) {
                        var e = t,
                            r = !0;
                        if (e instanceof y.Polygon && (r = e.closed, e = e.points), !Array.isArray(e)) {
                            e = new Array(arguments.length);
                            for (var n = 0; n < e.length; ++n) e[n] = arguments[n]
                        }
                        var i = new y.Polygon(e);
                        return i.closed = r, this.drawShape(i), this
                    }, e.prototype.drawStar = function(t, e, r, n, i) {
                        var o = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0;
                        i = i || n / 2;
                        for (var s = -1 * Math.PI / 2 + o, a = 2 * r, u = _.PI_2 / a, h = [], l = 0; l < a; l++) {
                            var c = l % 2 ? i : n,
                                d = l * u + s;
                            h.push(t + c * Math.cos(d), e + c * Math.sin(d))
                        }
                        return this.drawPolygon(h)
                    }, e.prototype.clear = function() {
                        return (this.lineWidth || this.filling || this.graphicsData.length > 0) && (this.lineWidth = 0, this.lineAlignment = .5, this.filling = !1, this.boundsDirty = -1, this.canvasTintDirty = -1, this.dirty++, this.clearDirty++, this.graphicsData.length = 0), this.currentPath = null, this._spriteRect = null, this
                    }, e.prototype.isFastRect = function() {
                        return 1 === this.graphicsData.length && this.graphicsData[0].shape.type === _.SHAPES.RECT && !this.graphicsData[0].lineWidth
                    }, e.prototype._renderWebGL = function(t) {
                        this.dirty !== this.fastRectDirty && (this.fastRectDirty = this.dirty, this._fastRect = this.isFastRect()), this._fastRect ? this._renderSpriteRect(t) : (t.setObjectRenderer(t.plugins.graphics), t.plugins.graphics.render(this))
                    }, e.prototype._renderSpriteRect = function(t) {
                        var e = this.graphicsData[0].shape;
                        this._spriteRect || (this._spriteRect = new g.default(new d.default(d.default.WHITE)));
                        var r = this._spriteRect,
                            n = this.graphicsData[0].fillColor;
                        if (16777215 === this.tint) r.tint = n;
                        else if (this.tint !== this._prevRectTint || n !== this._prevRectFillColor) {
                            var i = C,
                                o = R;
                            (0, m.hex2rgb)(n, i), (0, m.hex2rgb)(this.tint, o), i[0] *= o[0], i[1] *= o[1], i[2] *= o[2], r.tint = (0, m.rgb2hex)(i), this._prevRectTint = this.tint, this._prevRectFillColor = n
                        }
                        r.alpha = this.graphicsData[0].fillAlpha, r.worldAlpha = this.worldAlpha * r.alpha, r.blendMode = this.blendMode, r._texture._frame.width = e.width, r._texture._frame.height = e.height, r.transform.worldTransform = this.transform.worldTransform, r.anchor.set(-e.x / e.width, -e.y / e.height), r._onAnchorUpdate(), r._renderWebGL(t)
                    }, e.prototype._renderCanvas = function(t) {
                        !0 !== this.isMask && t.plugins.graphics.render(this)
                    }, e.prototype._calculateBounds = function() {
                        this.boundsDirty !== this.dirty && (this.boundsDirty = this.dirty, this.updateLocalBounds(), this.cachedSpriteDirty = !0);
                        var t = this._localBounds;
                        this._bounds.addFrame(this.transform, t.minX, t.minY, t.maxX, t.maxY)
                    }, e.prototype.containsPoint = function(t) {
                        this.worldTransform.applyInverse(t, P);
                        for (var e = this.graphicsData, r = 0; r < e.length; ++r) {
                            var n = e[r];
                            if (n.fill && n.shape && n.shape.contains(P.x, P.y)) {
                                if (n.holes)
                                    for (var i = 0; i < n.holes.length; i++) {
                                        var o = n.holes[i];
                                        if (o.contains(P.x, P.y)) return !1
                                    }
                                return !0
                            }
                        }
                        return !1
                    }, e.prototype.updateLocalBounds = function() {
                        var t = 1 / 0,
                            e = -1 / 0,
                            r = 1 / 0,
                            n = -1 / 0;
                        if (this.graphicsData.length)
                            for (var i = 0, o = 0, s = 0, a = 0, u = 0, h = 0; h < this.graphicsData.length; h++) {
                                var l = this.graphicsData[h],
                                    c = l.type,
                                    d = l.lineWidth;
                                if (i = l.shape, c === _.SHAPES.RECT || c === _.SHAPES.RREC) o = i.x - d / 2, s = i.y - d / 2, a = i.width + d, u = i.height + d, t = o < t ? o : t, e = o + a > e ? o + a : e, r = s < r ? s : r, n = s + u > n ? s + u : n;
                                else if (c === _.SHAPES.CIRC) o = i.x, s = i.y, a = i.radius + d / 2, u = i.radius + d / 2, t = o - a < t ? o - a : t, e = o + a > e ? o + a : e, r = s - u < r ? s - u : r, n = s + u > n ? s + u : n;
                                else if (c === _.SHAPES.ELIP) o = i.x, s = i.y, a = i.width + d / 2, u = i.height + d / 2, t = o - a < t ? o - a : t, e = o + a > e ? o + a : e, r = s - u < r ? s - u : r, n = s + u > n ? s + u : n;
                                else
                                    for (var f = i.points, p = 0, v = 0, g = 0, y = 0, m = 0, b = 0, x = 0, T = 0, w = 0; w + 2 < f.length; w += 2) o = f[w], s = f[w + 1], p = f[w + 2], v = f[w + 3], g = Math.abs(p - o), y = Math.abs(v - s), u = d, (a = Math.sqrt(g * g + y * y)) < 1e-9 || (m = (u / a * y + g) / 2, b = (u / a * g + y) / 2, x = (p + o) / 2, T = (v + s) / 2, t = x - m < t ? x - m : t, e = x + m > e ? x + m : e, r = T - b < r ? T - b : r, n = T + b > n ? T + b : n)
                            } else t = 0, e = 0, r = 0, n = 0;
                        var E = this.boundsPadding;
                        this._localBounds.minX = t - E, this._localBounds.maxX = e + E, this._localBounds.minY = r - E, this._localBounds.maxY = n + E
                    }, e.prototype.drawShape = function(t) {
                        this.currentPath && this.currentPath.shape.points.length <= 2 && this.graphicsData.pop(), this.currentPath = null;
                        var e = new p.default(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.filling, this.nativeLines, t, this.lineAlignment);
                        return this.graphicsData.push(e), e.type === _.SHAPES.POLY && (e.shape.closed = e.shape.closed, this.currentPath = e), this.dirty++, e
                    }, e.prototype.generateCanvasTexture = function(t) {
                        var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1,
                            r = this.getLocalBounds(),
                            n = l.default.create(r.width, r.height, t, e);
                        O || (O = new S.default), this.transform.updateLocalTransform(), this.transform.localTransform.copy(M), M.invert(), M.tx -= r.x, M.ty -= r.y, O.render(this, n, !0, M);
                        var i = d.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas, t, "graphics");
                        return i.baseTexture.resolution = e, i.baseTexture.update(), i
                    }, e.prototype.closePath = function() {
                        var t = this.currentPath;
                        return t && t.shape && t.shape.close(), this
                    }, e.prototype.addHole = function() {
                        var t = this.graphicsData.pop();
                        return this.currentPath = this.graphicsData[this.graphicsData.length - 1], this.currentPath.addHole(t.shape), this.currentPath = null, this
                    }, e.prototype.destroy = function(e) {
                        t.prototype.destroy.call(this, e);
                        for (var r = 0; r < this.graphicsData.length; ++r) this.graphicsData[r].destroy();
                        for (var n in this._webGL)
                            for (var i = 0; i < this._webGL[n].data.length; ++i) this._webGL[n].data[i].destroy();
                        this._spriteRect && this._spriteRect.destroy(), this.graphicsData = null, this.currentPath = null, this._webGL = null, this._localBounds = null
                    }, e
                }(u.default);
            r.default = A, A._SPRITE_TEXTURE = null, A.CURVES = {
                adaptive: !1,
                maxLength: 10,
                minSegments: 8,
                maxSegments: 2048
            }
        }, {
            "../const": 46,
            "../display/Bounds": 47,
            "../display/Container": 48,
            "../math": 70,
            "../renderers/canvas/CanvasRenderer": 77,
            "../sprites/Sprite": 102,
            "../textures/RenderTexture": 113,
            "../textures/Texture": 115,
            "../utils": 125,
            "./GraphicsData": 54,
            "./utils/bezierCurveTo": 56
        }],
        54: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                function t(e, r, i, o, s, a, u, h, l) {
                    n(this, t), this.lineWidth = e, this.lineAlignment = l, this.nativeLines = u, this.lineColor = r, this.lineAlpha = i, this._lineTint = r, this.fillColor = o, this.fillAlpha = s, this._fillTint = o, this.fill = a, this.holes = [], this.shape = h, this.type = h.type
                }
                return t.prototype.clone = function() {
                    return new t(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.fill, this.nativeLines, this.shape)
                }, t.prototype.addHole = function(t) {
                    this.holes.push(t)
                }, t.prototype.destroy = function() {
                    this.shape = null, this.holes = null
                }, t
            }();
            r.default = i
        }, {}],
        55: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("../../renderers/canvas/CanvasRenderer"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i),
                s = t("../../const"),
                a = function() {
                    function t(e) {
                        n(this, t), this.renderer = e
                    }
                    return t.prototype.render = function(t) {
                        var e = this.renderer,
                            r = e.context,
                            n = t.worldAlpha,
                            i = t.transform.worldTransform,
                            o = e.resolution;
                        r.setTransform(i.a * o, i.b * o, i.c * o, i.d * o, i.tx * o, i.ty * o), t.canvasTintDirty === t.dirty && t._prevTint === t.tint || this.updateGraphicsTint(t), e.setBlendMode(t.blendMode);
                        for (var a = 0; a < t.graphicsData.length; a++) {
                            var u = t.graphicsData[a],
                                h = u.shape,
                                l = u._fillTint,
                                c = u._lineTint;
                            if (r.lineWidth = u.lineWidth, u.type === s.SHAPES.POLY) {
                                r.beginPath(), this.renderPolygon(h.points, h.closed, r);
                                for (var d = 0; d < u.holes.length; d++) this.renderPolygon(u.holes[d].points, !0, r);
                                u.fill && (r.globalAlpha = u.fillAlpha * n, r.fillStyle = "#" + ("00000" + (0 | l).toString(16)).substr(-6), r.fill()), u.lineWidth && (r.globalAlpha = u.lineAlpha * n, r.strokeStyle = "#" + ("00000" + (0 | c).toString(16)).substr(-6), r.stroke())
                            } else if (u.type === s.SHAPES.RECT)(u.fillColor || 0 === u.fillColor) && (r.globalAlpha = u.fillAlpha * n, r.fillStyle = "#" + ("00000" + (0 | l).toString(16)).substr(-6), r.fillRect(h.x, h.y, h.width, h.height)), u.lineWidth && (r.globalAlpha = u.lineAlpha * n, r.strokeStyle = "#" + ("00000" + (0 | c).toString(16)).substr(-6), r.strokeRect(h.x, h.y, h.width, h.height));
                            else if (u.type === s.SHAPES.CIRC) r.beginPath(), r.arc(h.x, h.y, h.radius, 0, 2 * Math.PI), r.closePath(), u.fill && (r.globalAlpha = u.fillAlpha * n, r.fillStyle = "#" + ("00000" + (0 | l).toString(16)).substr(-6), r.fill()), u.lineWidth && (r.globalAlpha = u.lineAlpha * n, r.strokeStyle = "#" + ("00000" + (0 | c).toString(16)).substr(-6), r.stroke());
                            else if (u.type === s.SHAPES.ELIP) {
                                var f = 2 * h.width,
                                    p = 2 * h.height,
                                    v = h.x - f / 2,
                                    g = h.y - p / 2;
                                r.beginPath();
                                var y = f / 2 * .5522848,
                                    m = p / 2 * .5522848,
                                    _ = v + f,
                                    b = g + p,
                                    x = v + f / 2,
                                    T = g + p / 2;
                                r.moveTo(v, T), r.bezierCurveTo(v, T - m, x - y, g, x, g), r.bezierCurveTo(x + y, g, _, T - m, _, T), r.bezierCurveTo(_, T + m, x + y, b, x, b), r.bezierCurveTo(x - y, b, v, T + m, v, T), r.closePath(), u.fill && (r.globalAlpha = u.fillAlpha * n, r.fillStyle = "#" + ("00000" + (0 | l).toString(16)).substr(-6), r.fill()), u.lineWidth && (r.globalAlpha = u.lineAlpha * n, r.strokeStyle = "#" + ("00000" + (0 | c).toString(16)).substr(-6), r.stroke())
                            } else if (u.type === s.SHAPES.RREC) {
                                var w = h.x,
                                    E = h.y,
                                    S = h.width,
                                    O = h.height,
                                    M = h.radius,
                                    P = Math.min(S, O) / 2 | 0;
                                M = M > P ? P : M, r.beginPath(), r.moveTo(w, E + M), r.lineTo(w, E + O - M), r.quadraticCurveTo(w, E + O, w + M, E + O), r.lineTo(w + S - M, E + O), r.quadraticCurveTo(w + S, E + O, w + S, E + O - M), r.lineTo(w + S, E + M), r.quadraticCurveTo(w + S, E, w + S - M, E), r.lineTo(w + M, E), r.quadraticCurveTo(w, E, w, E + M), r.closePath(), (u.fillColor || 0 === u.fillColor) && (r.globalAlpha = u.fillAlpha * n, r.fillStyle = "#" + ("00000" + (0 | l).toString(16)).substr(-6), r.fill()), u.lineWidth && (r.globalAlpha = u.lineAlpha * n, r.strokeStyle = "#" + ("00000" + (0 | c).toString(16)).substr(-6), r.stroke())
                            }
                        }
                    }, t.prototype.updateGraphicsTint = function(t) {
                        t._prevTint = t.tint, t.canvasTintDirty = t.dirty;
                        for (var e = (t.tint >> 16 & 255) / 255, r = (t.tint >> 8 & 255) / 255, n = (255 & t.tint) / 255, i = 0; i < t.graphicsData.length; ++i) {
                            var o = t.graphicsData[i],
                                s = 0 | o.fillColor,
                                a = 0 | o.lineColor;
                            o._fillTint = ((s >> 16 & 255) / 255 * e * 255 << 16) + ((s >> 8 & 255) / 255 * r * 255 << 8) + (255 & s) / 255 * n * 255, o._lineTint = ((a >> 16 & 255) / 255 * e * 255 << 16) + ((a >> 8 & 255) / 255 * r * 255 << 8) + (255 & a) / 255 * n * 255
                        }
                    }, t.prototype.renderPolygon = function(t, e, r) {
                        r.moveTo(t[0], t[1]);
                        for (var n = 1; n < t.length / 2; ++n) r.lineTo(t[2 * n], t[2 * n + 1]);
                        e && r.closePath()
                    }, t.prototype.destroy = function() {
                        this.renderer = null
                    }, t
                }();
            r.default = a, o.default.registerPlugin("graphics", a)
        }, {
            "../../const": 46,
            "../../renderers/canvas/CanvasRenderer": 77
        }],
        56: [function(t, e, r) {
            "use strict";

            function n(t, e, r, n, i, o, s, a, u) {
                var h = arguments.length > 9 && void 0 !== arguments[9] ? arguments[9] : [],
                    l = 0,
                    c = 0,
                    d = 0,
                    f = 0,
                    p = 0;
                h.push(t, e);
                for (var v = 1, g = 0; v <= u; ++v) g = v / u, l = 1 - g, c = l * l, d = c * l, f = g * g, p = f * g, h.push(d * t + 3 * c * g * r + 3 * l * f * i + p * s, d * e + 3 * c * g * n + 3 * l * f * o + p * a);
                return h
            }
            r.__esModule = !0, r.default = n
        }, {}],
        57: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("../../utils"),
                u = t("../../const"),
                h = t("../../renderers/webgl/utils/ObjectRenderer"),
                l = n(h),
                c = t("../../renderers/webgl/WebGLRenderer"),
                d = n(c),
                f = t("./WebGLGraphicsData"),
                p = n(f),
                v = t("./shaders/PrimitiveShader"),
                g = n(v),
                y = t("./utils/buildPoly"),
                m = n(y),
                _ = t("./utils/buildRectangle"),
                b = n(_),
                x = t("./utils/buildRoundedRectangle"),
                T = n(x),
                w = t("./utils/buildCircle"),
                E = n(w),
                S = function(t) {
                    function e(r) {
                        i(this, e);
                        var n = o(this, t.call(this, r));
                        return n.graphicsDataPool = [], n.primitiveShader = null, n.gl = r.gl, n.CONTEXT_UID = 0, n
                    }
                    return s(e, t), e.prototype.onContextChange = function() {
                        this.gl = this.renderer.gl, this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.primitiveShader = new g.default(this.gl)
                    }, e.prototype.destroy = function() {
                        l.default.prototype.destroy.call(this);
                        for (var t = 0; t < this.graphicsDataPool.length; ++t) this.graphicsDataPool[t].destroy();
                        this.graphicsDataPool = null
                    }, e.prototype.render = function(t) {
                        var e = this.renderer,
                            r = e.gl,
                            n = void 0,
                            i = t._webGL[this.CONTEXT_UID];
                        i && t.dirty === i.dirty || (this.updateGraphics(t), i = t._webGL[this.CONTEXT_UID]);
                        var o = this.primitiveShader;
                        e.bindShader(o), e.state.setBlendMode(t.blendMode);
                        for (var s = 0, u = i.data.length; s < u; s++) {
                            n = i.data[s];
                            var h = n.shader;
                            e.bindShader(h), h.uniforms.translationMatrix = t.transform.worldTransform.toArray(!0), h.uniforms.tint = (0, a.hex2rgb)(t.tint), h.uniforms.alpha = t.worldAlpha, e.bindVao(n.vao), n.nativeLines ? r.drawArrays(r.LINES, 0, n.points.length / 6) : n.vao.draw(r.TRIANGLE_STRIP, n.indices.length)
                        }
                    }, e.prototype.updateGraphics = function(t) {
                        var e = this.renderer.gl,
                            r = t._webGL[this.CONTEXT_UID];
                        if (r || (r = t._webGL[this.CONTEXT_UID] = {
                                lastIndex: 0,
                                data: [],
                                gl: e,
                                clearDirty: -1,
                                dirty: -1
                            }), r.dirty = t.dirty, t.clearDirty !== r.clearDirty) {
                            r.clearDirty = t.clearDirty;
                            for (var n = 0; n < r.data.length; n++) this.graphicsDataPool.push(r.data[n]);
                            r.data.length = 0, r.lastIndex = 0
                        }
                        for (var i = void 0, o = void 0, s = r.lastIndex; s < t.graphicsData.length; s++) {
                            var a = t.graphicsData[s];
                            i = this.getWebGLData(r, 0), a.nativeLines && a.lineWidth && (o = this.getWebGLData(r, 0, !0), r.lastIndex++), a.type === u.SHAPES.POLY && (0, m.default)(a, i, o), a.type === u.SHAPES.RECT ? (0, b.default)(a, i, o) : a.type === u.SHAPES.CIRC || a.type === u.SHAPES.ELIP ? (0, E.default)(a, i, o) : a.type === u.SHAPES.RREC && (0, T.default)(a, i, o), r.lastIndex++
                        }
                        this.renderer.bindVao(null);
                        for (var h = 0; h < r.data.length; h++) i = r.data[h], i.dirty && i.upload()
                    }, e.prototype.getWebGLData = function(t, e, r) {
                        var n = t.data[t.data.length - 1];
                        return (!n || n.nativeLines !== r || n.points.length > 32e4) && (n = this.graphicsDataPool.pop() || new p.default(this.renderer.gl, this.primitiveShader, this.renderer.state.attribsState), n.nativeLines = r, n.reset(e), t.data.push(n)), n.dirty = !0, n
                    }, e
                }(l.default);
            r.default = S, d.default.registerPlugin("graphics", S)
        }, {
            "../../const": 46,
            "../../renderers/webgl/WebGLRenderer": 84,
            "../../renderers/webgl/utils/ObjectRenderer": 94,
            "../../utils": 125,
            "./WebGLGraphicsData": 58,
            "./shaders/PrimitiveShader": 59,
            "./utils/buildCircle": 60,
            "./utils/buildPoly": 62,
            "./utils/buildRectangle": 63,
            "./utils/buildRoundedRectangle": 64
        }],
        58: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("pixi-gl-core"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i),
                s = function() {
                    function t(e, r, i) {
                        n(this, t), this.gl = e, this.color = [0, 0, 0], this.points = [], this.indices = [], this.buffer = o.default.GLBuffer.createVertexBuffer(e), this.indexBuffer = o.default.GLBuffer.createIndexBuffer(e), this.dirty = !0, this.nativeLines = !1, this.glPoints = null, this.glIndices = null, this.shader = r, this.vao = new o.default.VertexArrayObject(e, i).addIndex(this.indexBuffer).addAttribute(this.buffer, r.attributes.aVertexPosition, e.FLOAT, !1, 24, 0).addAttribute(this.buffer, r.attributes.aColor, e.FLOAT, !1, 24, 8)
                    }
                    return t.prototype.reset = function() {
                        this.points.length = 0, this.indices.length = 0
                    }, t.prototype.upload = function() {
                        this.glPoints = new Float32Array(this.points), this.buffer.upload(this.glPoints), this.glIndices = new Uint16Array(this.indices), this.indexBuffer.upload(this.glIndices), this.dirty = !1
                    }, t.prototype.destroy = function() {
                        this.color = null, this.points = null, this.indices = null, this.vao.destroy(), this.buffer.destroy(), this.indexBuffer.destroy(), this.gl = null, this.buffer = null, this.indexBuffer = null, this.glPoints = null, this.glIndices = null
                    }, t
                }();
            r.default = s
        }, {
            "pixi-gl-core": 15
        }],
        59: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = t("../../../Shader"),
                a = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(s),
                u = function(t) {
                    function e(r) {
                        return n(this, e), i(this, t.call(this, r, ["attribute vec2 aVertexPosition;", "attribute vec4 aColor;", "uniform mat3 translationMatrix;", "uniform mat3 projectionMatrix;", "uniform float alpha;", "uniform vec3 tint;", "varying vec4 vColor;", "void main(void){", "   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);", "   vColor = aColor * vec4(tint * alpha, alpha);", "}"].join("\n"), ["varying vec4 vColor;", "void main(void){", "   gl_FragColor = vColor;", "}"].join("\n")))
                    }
                    return o(e, t), e
                }(a.default);
            r.default = u
        }, {
            "../../../Shader": 44
        }],
        60: [function(t, e, r) {
            "use strict";

            function n(t, e, r) {
                var n = t.shape,
                    i = n.x,
                    u = n.y,
                    h = void 0,
                    l = void 0;
                if (t.type === s.SHAPES.CIRC ? (h = n.radius, l = n.radius) : (h = n.width, l = n.height), 0 !== h && 0 !== l) {
                    var c = Math.floor(30 * Math.sqrt(n.radius)) || Math.floor(15 * Math.sqrt(n.width + n.height)),
                        d = 2 * Math.PI / c;
                    if (t.fill) {
                        var f = (0, a.hex2rgb)(t.fillColor),
                            p = t.fillAlpha,
                            v = f[0] * p,
                            g = f[1] * p,
                            y = f[2] * p,
                            m = e.points,
                            _ = e.indices,
                            b = m.length / 6;
                        _.push(b);
                        for (var x = 0; x < c + 1; x++) m.push(i, u, v, g, y, p), m.push(i + Math.sin(d * x) * h, u + Math.cos(d * x) * l, v, g, y, p), _.push(b++, b++);
                        _.push(b - 1)
                    }
                    if (t.lineWidth) {
                        var T = t.points;
                        t.points = [];
                        for (var w = 0; w < c; w++) t.points.push(i + Math.sin(d * -w) * h, u + Math.cos(d * -w) * l);
                        t.points.push(t.points[0], t.points[1]), (0, o.default)(t, e, r), t.points = T
                    }
                }
            }
            r.__esModule = !0, r.default = n;
            var i = t("./buildLine"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i),
                s = t("../../../const"),
                a = t("../../../utils")
        }, {
            "../../../const": 46,
            "../../../utils": 125,
            "./buildLine": 61
        }],
        61: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                var r = t.points;
                if (0 !== r.length) {
                    var n = new o.Point(r[0], r[1]),
                        i = new o.Point(r[r.length - 2], r[r.length - 1]);
                    if (n.x === i.x && n.y === i.y) {
                        r = r.slice(), r.pop(), r.pop(), i = new o.Point(r[r.length - 2], r[r.length - 1]);
                        var a = i.x + .5 * (n.x - i.x),
                            u = i.y + .5 * (n.y - i.y);
                        r.unshift(a, u), r.push(a, u)
                    }
                    var h = e.points,
                        l = e.indices,
                        c = r.length / 2,
                        d = r.length,
                        f = h.length / 6,
                        p = t.lineWidth / 2,
                        v = (0, s.hex2rgb)(t.lineColor),
                        g = t.lineAlpha,
                        y = v[0] * g,
                        m = v[1] * g,
                        _ = v[2] * g,
                        b = r[0],
                        x = r[1],
                        T = r[2],
                        w = r[3],
                        E = 0,
                        S = 0,
                        O = -(x - w),
                        M = b - T,
                        P = 0,
                        C = 0,
                        R = 0,
                        A = 0,
                        I = Math.sqrt(O * O + M * M);
                    O /= I, M /= I, O *= p, M *= p;
                    var D = t.lineAlignment,
                        L = 2 * (1 - D),
                        N = 2 * D;
                    h.push(b - O * L, x - M * L, y, m, _, g), h.push(b + O * N, x + M * N, y, m, _, g);
                    for (var B = 1; B < c - 1; ++B) {
                        b = r[2 * (B - 1)], x = r[2 * (B - 1) + 1], T = r[2 * B], w = r[2 * B + 1], E = r[2 * (B + 1)], S = r[2 * (B + 1) + 1], O = -(x - w), M = b - T, I = Math.sqrt(O * O + M * M), O /= I, M /= I, O *= p, M *= p, P = -(w - S), C = T - E, I = Math.sqrt(P * P + C * C), P /= I, C /= I, P *= p, C *= p;
                        var F = -M + x - (-M + w),
                            k = -O + T - (-O + b),
                            j = (-O + b) * (-M + w) - (-O + T) * (-M + x),
                            U = -C + S - (-C + w),
                            X = -P + T - (-P + E),
                            G = (-P + E) * (-C + w) - (-P + T) * (-C + S),
                            W = F * X - U * k;
                        if (Math.abs(W) < .1) W += 10.1, h.push(T - O * L, w - M * L, y, m, _, g), h.push(T + O * N, w + M * N, y, m, _, g);
                        else {
                            var H = (k * G - X * j) / W,
                                V = (U * j - F * G) / W;
                            (H - T) * (H - T) + (V - w) * (V - w) > 196 * p * p ? (R = O - P, A = M - C, I = Math.sqrt(R * R + A * A), R /= I, A /= I, R *= p, A *= p, h.push(T - R * L, w - A * L), h.push(y, m, _, g), h.push(T + R * N, w + A * N), h.push(y, m, _, g), h.push(T - R * N * L, w - A * L), h.push(y, m, _, g), d++) : (h.push(T + (H - T) * L, w + (V - w) * L), h.push(y, m, _, g), h.push(T - (H - T) * N, w - (V - w) * N), h.push(y, m, _, g))
                        }
                    }
                    b = r[2 * (c - 2)], x = r[2 * (c - 2) + 1], T = r[2 * (c - 1)], w = r[2 * (c - 1) + 1], O = -(x - w), M = b - T, I = Math.sqrt(O * O + M * M), O /= I, M /= I, O *= p, M *= p, h.push(T - O * L, w - M * L), h.push(y, m, _, g), h.push(T + O * N, w + M * N), h.push(y, m, _, g), l.push(f);
                    for (var Y = 0; Y < d; ++Y) l.push(f++);
                    l.push(f - 1)
                }
            }

            function i(t, e) {
                var r = 0,
                    n = t.points;
                if (0 !== n.length) {
                    var i = e.points,
                        o = n.length / 2,
                        a = (0, s.hex2rgb)(t.lineColor),
                        u = t.lineAlpha,
                        h = a[0] * u,
                        l = a[1] * u,
                        c = a[2] * u;
                    for (r = 1; r < o; r++) {
                        var d = n[2 * (r - 1)],
                            f = n[2 * (r - 1) + 1],
                            p = n[2 * r],
                            v = n[2 * r + 1];
                        i.push(d, f), i.push(h, l, c, u), i.push(p, v), i.push(h, l, c, u)
                    }
                }
            }
            r.__esModule = !0, r.default = function(t, e, r) {
                t.nativeLines ? i(t, r) : n(t, e)
            };
            var o = t("../../../math"),
                s = t("../../../utils")
        }, {
            "../../../math": 70,
            "../../../utils": 125
        }],
        62: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e, r) {
                t.points = t.shape.points.slice();
                var n = t.points;
                if (t.fill && n.length >= 6) {
                    for (var i = [], o = t.holes, u = 0; u < o.length; u++) {
                        var l = o[u];
                        i.push(n.length / 2), n = n.concat(l.points)
                    }
                    var c = e.points,
                        d = e.indices,
                        f = n.length / 2,
                        p = (0,
                            a.hex2rgb)(t.fillColor),
                        v = t.fillAlpha,
                        g = p[0] * v,
                        y = p[1] * v,
                        m = p[2] * v,
                        _ = (0, h.default)(n, i, 2);
                    if (!_) return;
                    for (var b = c.length / 6, x = 0; x < _.length; x += 3) d.push(_[x] + b), d.push(_[x] + b), d.push(_[x + 1] + b), d.push(_[x + 2] + b), d.push(_[x + 2] + b);
                    for (var T = 0; T < f; T++) c.push(n[2 * T], n[2 * T + 1], g, y, m, v)
                }
                t.lineWidth > 0 && (0, s.default)(t, e, r)
            }
            r.__esModule = !0, r.default = i;
            var o = t("./buildLine"),
                s = n(o),
                a = t("../../../utils"),
                u = t("earcut"),
                h = n(u)
        }, {
            "../../../utils": 125,
            "./buildLine": 61,
            earcut: 2
        }],
        63: [function(t, e, r) {
            "use strict";

            function n(t, e, r) {
                var n = t.shape,
                    i = n.x,
                    a = n.y,
                    u = n.width,
                    h = n.height;
                if (t.fill) {
                    var l = (0, s.hex2rgb)(t.fillColor),
                        c = t.fillAlpha,
                        d = l[0] * c,
                        f = l[1] * c,
                        p = l[2] * c,
                        v = e.points,
                        g = e.indices,
                        y = v.length / 6;
                    v.push(i, a), v.push(d, f, p, c), v.push(i + u, a), v.push(d, f, p, c), v.push(i, a + h), v.push(d, f, p, c), v.push(i + u, a + h), v.push(d, f, p, c), g.push(y, y, y + 1, y + 2, y + 3, y + 3)
                }
                if (t.lineWidth) {
                    var m = t.points;
                    t.points = [i, a, i + u, a, i + u, a + h, i, a + h, i, a], (0, o.default)(t, e, r), t.points = m
                }
            }
            r.__esModule = !0, r.default = n;
            var i = t("./buildLine"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i),
                s = t("../../../utils")
        }, {
            "../../../utils": 125,
            "./buildLine": 61
        }],
        64: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e, r) {
                var n = t.shape,
                    i = n.x,
                    o = n.y,
                    a = n.width,
                    h = n.height,
                    d = n.radius,
                    f = [];
                if (f.push(i, o + d), s(i, o + h - d, i, o + h, i + d, o + h, f), s(i + a - d, o + h, i + a, o + h, i + a, o + h - d, f), s(i + a, o + d, i + a, o, i + a - d, o, f), s(i + d, o, i, o, i, o + d + 1e-10, f), t.fill) {
                    for (var p = (0, c.hex2rgb)(t.fillColor), v = t.fillAlpha, g = p[0] * v, y = p[1] * v, m = p[2] * v, _ = e.points, b = e.indices, x = _.length / 6, T = (0, u.default)(f, null, 2), w = 0, E = T.length; w < E; w += 3) b.push(T[w] + x), b.push(T[w] + x), b.push(T[w + 1] + x), b.push(T[w + 2] + x), b.push(T[w + 2] + x);
                    for (var S = 0, O = f.length; S < O; S++) _.push(f[S], f[++S], g, y, m, v)
                }
                if (t.lineWidth) {
                    var M = t.points;
                    t.points = f, (0, l.default)(t, e, r), t.points = M
                }
            }

            function o(t, e, r) {
                return t + (e - t) * r
            }

            function s(t, e, r, n, i, s) {
                for (var a = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : [], u = a, h = 0, l = 0, c = 0, d = 0, f = 0, p = 0, v = 0, g = 0; v <= 20; ++v) g = v / 20, h = o(t, r, g), l = o(e, n, g), c = o(r, i, g), d = o(n, s, g), f = o(h, c, g), p = o(l, d, g), u.push(f, p);
                return u
            }
            r.__esModule = !0, r.default = i;
            var a = t("earcut"),
                u = n(a),
                h = t("./buildLine"),
                l = n(h),
                c = t("../../../utils")
        }, {
            "../../../utils": 125,
            "./buildLine": 61,
            earcut: 2
        }],
        65: [function(t, e, r) {
            "use strict";

            function n(t) {
                if (t && t.__esModule) return t;
                var e = {};
                if (null != t)
                    for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                return e.default = t, e
            }

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            r.__esModule = !0, r.autoDetectRenderer = r.Application = r.Filter = r.SpriteMaskFilter = r.Quad = r.RenderTarget = r.ObjectRenderer = r.WebGLManager = r.Shader = r.CanvasRenderTarget = r.TextureUvs = r.VideoBaseTexture = r.BaseRenderTexture = r.RenderTexture = r.BaseTexture = r.TextureMatrix = r.Texture = r.Spritesheet = r.CanvasGraphicsRenderer = r.GraphicsRenderer = r.GraphicsData = r.Graphics = r.TextMetrics = r.TextStyle = r.Text = r.SpriteRenderer = r.CanvasTinter = r.CanvasSpriteRenderer = r.Sprite = r.TransformBase = r.TransformStatic = r.Transform = r.Container = r.DisplayObject = r.Bounds = r.glCore = r.WebGLRenderer = r.CanvasRenderer = r.ticker = r.utils = r.settings = void 0;
            var o = t("./const");
            Object.keys(o).forEach(function(t) {
                "default" !== t && "__esModule" !== t && Object.defineProperty(r, t, {
                    enumerable: !0,
                    get: function() {
                        return o[t]
                    }
                })
            });
            var s = t("./math");
            Object.keys(s).forEach(function(t) {
                "default" !== t && "__esModule" !== t && Object.defineProperty(r, t, {
                    enumerable: !0,
                    get: function() {
                        return s[t]
                    }
                })
            });
            var a = t("pixi-gl-core");
            Object.defineProperty(r, "glCore", {
                enumerable: !0,
                get: function() {
                    return i(a).default
                }
            });
            var u = t("./display/Bounds");
            Object.defineProperty(r, "Bounds", {
                enumerable: !0,
                get: function() {
                    return i(u).default
                }
            });
            var h = t("./display/DisplayObject");
            Object.defineProperty(r, "DisplayObject", {
                enumerable: !0,
                get: function() {
                    return i(h).default
                }
            });
            var l = t("./display/Container");
            Object.defineProperty(r, "Container", {
                enumerable: !0,
                get: function() {
                    return i(l).default
                }
            });
            var c = t("./display/Transform");
            Object.defineProperty(r, "Transform", {
                enumerable: !0,
                get: function() {
                    return i(c).default
                }
            });
            var d = t("./display/TransformStatic");
            Object.defineProperty(r, "TransformStatic", {
                enumerable: !0,
                get: function() {
                    return i(d).default
                }
            });
            var f = t("./display/TransformBase");
            Object.defineProperty(r, "TransformBase", {
                enumerable: !0,
                get: function() {
                    return i(f).default
                }
            });
            var p = t("./sprites/Sprite");
            Object.defineProperty(r, "Sprite", {
                enumerable: !0,
                get: function() {
                    return i(p).default
                }
            });
            var v = t("./sprites/canvas/CanvasSpriteRenderer");
            Object.defineProperty(r, "CanvasSpriteRenderer", {
                enumerable: !0,
                get: function() {
                    return i(v).default
                }
            });
            var g = t("./sprites/canvas/CanvasTinter");
            Object.defineProperty(r, "CanvasTinter", {
                enumerable: !0,
                get: function() {
                    return i(g).default
                }
            });
            var y = t("./sprites/webgl/SpriteRenderer");
            Object.defineProperty(r, "SpriteRenderer", {
                enumerable: !0,
                get: function() {
                    return i(y).default
                }
            });
            var m = t("./text/Text");
            Object.defineProperty(r, "Text", {
                enumerable: !0,
                get: function() {
                    return i(m).default
                }
            });
            var _ = t("./text/TextStyle");
            Object.defineProperty(r, "TextStyle", {
                enumerable: !0,
                get: function() {
                    return i(_).default
                }
            });
            var b = t("./text/TextMetrics");
            Object.defineProperty(r, "TextMetrics", {
                enumerable: !0,
                get: function() {
                    return i(b).default
                }
            });
            var x = t("./graphics/Graphics");
            Object.defineProperty(r, "Graphics", {
                enumerable: !0,
                get: function() {
                    return i(x).default
                }
            });
            var T = t("./graphics/GraphicsData");
            Object.defineProperty(r, "GraphicsData", {
                enumerable: !0,
                get: function() {
                    return i(T).default
                }
            });
            var w = t("./graphics/webgl/GraphicsRenderer");
            Object.defineProperty(r, "GraphicsRenderer", {
                enumerable: !0,
                get: function() {
                    return i(w).default
                }
            });
            var E = t("./graphics/canvas/CanvasGraphicsRenderer");
            Object.defineProperty(r, "CanvasGraphicsRenderer", {
                enumerable: !0,
                get: function() {
                    return i(E).default
                }
            });
            var S = t("./textures/Spritesheet");
            Object.defineProperty(r, "Spritesheet", {
                enumerable: !0,
                get: function() {
                    return i(S).default
                }
            });
            var O = t("./textures/Texture");
            Object.defineProperty(r, "Texture", {
                enumerable: !0,
                get: function() {
                    return i(O).default
                }
            });
            var M = t("./textures/TextureMatrix");
            Object.defineProperty(r, "TextureMatrix", {
                enumerable: !0,
                get: function() {
                    return i(M).default
                }
            });
            var P = t("./textures/BaseTexture");
            Object.defineProperty(r, "BaseTexture", {
                enumerable: !0,
                get: function() {
                    return i(P).default
                }
            });
            var C = t("./textures/RenderTexture");
            Object.defineProperty(r, "RenderTexture", {
                enumerable: !0,
                get: function() {
                    return i(C).default
                }
            });
            var R = t("./textures/BaseRenderTexture");
            Object.defineProperty(r, "BaseRenderTexture", {
                enumerable: !0,
                get: function() {
                    return i(R).default
                }
            });
            var A = t("./textures/VideoBaseTexture");
            Object.defineProperty(r, "VideoBaseTexture", {
                enumerable: !0,
                get: function() {
                    return i(A).default
                }
            });
            var I = t("./textures/TextureUvs");
            Object.defineProperty(r, "TextureUvs", {
                enumerable: !0,
                get: function() {
                    return i(I).default
                }
            });
            var D = t("./renderers/canvas/utils/CanvasRenderTarget");
            Object.defineProperty(r, "CanvasRenderTarget", {
                enumerable: !0,
                get: function() {
                    return i(D).default
                }
            });
            var L = t("./Shader");
            Object.defineProperty(r, "Shader", {
                enumerable: !0,
                get: function() {
                    return i(L).default
                }
            });
            var N = t("./renderers/webgl/managers/WebGLManager");
            Object.defineProperty(r, "WebGLManager", {
                enumerable: !0,
                get: function() {
                    return i(N).default
                }
            });
            var B = t("./renderers/webgl/utils/ObjectRenderer");
            Object.defineProperty(r, "ObjectRenderer", {
                enumerable: !0,
                get: function() {
                    return i(B).default
                }
            });
            var F = t("./renderers/webgl/utils/RenderTarget");
            Object.defineProperty(r, "RenderTarget", {
                enumerable: !0,
                get: function() {
                    return i(F).default
                }
            });
            var k = t("./renderers/webgl/utils/Quad");
            Object.defineProperty(r, "Quad", {
                enumerable: !0,
                get: function() {
                    return i(k).default
                }
            });
            var j = t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");
            Object.defineProperty(r, "SpriteMaskFilter", {
                enumerable: !0,
                get: function() {
                    return i(j).default
                }
            });
            var U = t("./renderers/webgl/filters/Filter");
            Object.defineProperty(r, "Filter", {
                enumerable: !0,
                get: function() {
                    return i(U).default
                }
            });
            var X = t("./Application");
            Object.defineProperty(r, "Application", {
                enumerable: !0,
                get: function() {
                    return i(X).default
                }
            });
            var G = t("./autoDetectRenderer");
            Object.defineProperty(r, "autoDetectRenderer", {
                enumerable: !0,
                get: function() {
                    return G.autoDetectRenderer
                }
            });
            var W = t("./utils"),
                H = n(W),
                V = t("./ticker"),
                Y = n(V),
                z = t("./settings"),
                q = i(z),
                K = t("./renderers/canvas/CanvasRenderer"),
                Z = i(K),
                J = t("./renderers/webgl/WebGLRenderer"),
                Q = i(J);
            r.settings = q.default, r.utils = H, r.ticker = Y, r.CanvasRenderer = Z.default, r.WebGLRenderer = Q.default
        }, {
            "./Application": 43,
            "./Shader": 44,
            "./autoDetectRenderer": 45,
            "./const": 46,
            "./display/Bounds": 47,
            "./display/Container": 48,
            "./display/DisplayObject": 49,
            "./display/Transform": 50,
            "./display/TransformBase": 51,
            "./display/TransformStatic": 52,
            "./graphics/Graphics": 53,
            "./graphics/GraphicsData": 54,
            "./graphics/canvas/CanvasGraphicsRenderer": 55,
            "./graphics/webgl/GraphicsRenderer": 57,
            "./math": 70,
            "./renderers/canvas/CanvasRenderer": 77,
            "./renderers/canvas/utils/CanvasRenderTarget": 79,
            "./renderers/webgl/WebGLRenderer": 84,
            "./renderers/webgl/filters/Filter": 86,
            "./renderers/webgl/filters/spriteMask/SpriteMaskFilter": 89,
            "./renderers/webgl/managers/WebGLManager": 93,
            "./renderers/webgl/utils/ObjectRenderer": 94,
            "./renderers/webgl/utils/Quad": 95,
            "./renderers/webgl/utils/RenderTarget": 96,
            "./settings": 101,
            "./sprites/Sprite": 102,
            "./sprites/canvas/CanvasSpriteRenderer": 103,
            "./sprites/canvas/CanvasTinter": 104,
            "./sprites/webgl/SpriteRenderer": 106,
            "./text/Text": 108,
            "./text/TextMetrics": 109,
            "./text/TextStyle": 110,
            "./textures/BaseRenderTexture": 111,
            "./textures/BaseTexture": 112,
            "./textures/RenderTexture": 113,
            "./textures/Spritesheet": 114,
            "./textures/Texture": 115,
            "./textures/TextureMatrix": 116,
            "./textures/TextureUvs": 117,
            "./textures/VideoBaseTexture": 118,
            "./ticker": 121,
            "./utils": 125,
            "pixi-gl-core": 15
        }],
        66: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t < 0 ? -1 : t > 0 ? 1 : 0
            }
            r.__esModule = !0;
            var i = t("./Matrix"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i),
                s = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1],
                a = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1],
                u = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1],
                h = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1],
                l = [],
                c = [];
            ! function() {
                for (var t = 0; t < 16; t++) {
                    var e = [];
                    c.push(e);
                    for (var r = 0; r < 16; r++)
                        for (var i = n(s[t] * s[r] + u[t] * a[r]), d = n(a[t] * s[r] + h[t] * a[r]), f = n(s[t] * u[r] + u[t] * h[r]), p = n(a[t] * u[r] + h[t] * h[r]), v = 0; v < 16; v++)
                            if (s[v] === i && a[v] === d && u[v] === f && h[v] === p) {
                                e.push(v);
                                break
                            }
                }
                for (var g = 0; g < 16; g++) {
                    var y = new o.default;
                    y.set(s[g], a[g], u[g], h[g], 0, 0), l.push(y)
                }
            }();
            var d = {
                E: 0,
                SE: 1,
                S: 2,
                SW: 3,
                W: 4,
                NW: 5,
                N: 6,
                NE: 7,
                MIRROR_VERTICAL: 8,
                MIRROR_HORIZONTAL: 12,
                uX: function(t) {
                    return s[t]
                },
                uY: function(t) {
                    return a[t]
                },
                vX: function(t) {
                    return u[t]
                },
                vY: function(t) {
                    return h[t]
                },
                inv: function(t) {
                    return 8 & t ? 15 & t : 7 & -t
                },
                add: function(t, e) {
                    return c[t][e]
                },
                sub: function(t, e) {
                    return c[t][d.inv(e)]
                },
                rotate180: function(t) {
                    return 4 ^ t
                },
                isVertical: function(t) {
                    return 2 == (3 & t)
                },
                byDirection: function(t, e) {
                    return 2 * Math.abs(t) <= Math.abs(e) ? e >= 0 ? d.S : d.N : 2 * Math.abs(e) <= Math.abs(t) ? t > 0 ? d.E : d.W : e > 0 ? t > 0 ? d.SE : d.SW : t > 0 ? d.NE : d.NW
                },
                matrixAppendRotationInv: function(t, e) {
                    var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
                        n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0,
                        i = l[d.inv(e)];
                    i.tx = r, i.ty = n, t.append(i)
                }
            };
            r.default = d
        }, {
            "./Matrix": 67
        }],
        67: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                o = t("./Point"),
                s = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(o),
                a = t("../const"),
                u = function() {
                    function t() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
                            r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
                            o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1,
                            s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0,
                            a = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0;
                        n(this, t), this.a = e, this.b = r, this.c = i, this.d = o, this.tx = s, this.ty = a, this.array = null
                    }
                    return t.prototype.fromArray = function(t) {
                        this.a = t[0], this.b = t[1], this.c = t[3], this.d = t[4], this.tx = t[2], this.ty = t[5]
                    }, t.prototype.set = function(t, e, r, n, i, o) {
                        return this.a = t, this.b = e, this.c = r, this.d = n, this.tx = i, this.ty = o, this
                    }, t.prototype.toArray = function(t, e) {
                        this.array || (this.array = new Float32Array(9));
                        var r = e || this.array;
                        return t ? (r[0] = this.a, r[1] = this.b, r[2] = 0, r[3] = this.c, r[4] = this.d, r[5] = 0, r[6] = this.tx, r[7] = this.ty, r[8] = 1) : (r[0] = this.a, r[1] = this.c, r[2] = this.tx, r[3] = this.b, r[4] = this.d, r[5] = this.ty, r[6] = 0, r[7] = 0, r[8] = 1), r
                    }, t.prototype.apply = function(t, e) {
                        e = e || new s.default;
                        var r = t.x,
                            n = t.y;
                        return e.x = this.a * r + this.c * n + this.tx, e.y = this.b * r + this.d * n + this.ty, e
                    }, t.prototype.applyInverse = function(t, e) {
                        e = e || new s.default;
                        var r = 1 / (this.a * this.d + this.c * -this.b),
                            n = t.x,
                            i = t.y;
                        return e.x = this.d * r * n + -this.c * r * i + (this.ty * this.c - this.tx * this.d) * r, e.y = this.a * r * i + -this.b * r * n + (-this.ty * this.a + this.tx * this.b) * r, e
                    }, t.prototype.translate = function(t, e) {
                        return this.tx += t, this.ty += e, this
                    }, t.prototype.scale = function(t, e) {
                        return this.a *= t, this.d *= e, this.c *= t, this.b *= e, this.tx *= t, this.ty *= e, this
                    }, t.prototype.rotate = function(t) {
                        var e = Math.cos(t),
                            r = Math.sin(t),
                            n = this.a,
                            i = this.c,
                            o = this.tx;
                        return this.a = n * e - this.b * r, this.b = n * r + this.b * e, this.c = i * e - this.d * r, this.d = i * r + this.d * e, this.tx = o * e - this.ty * r, this.ty = o * r + this.ty * e, this
                    }, t.prototype.append = function(t) {
                        var e = this.a,
                            r = this.b,
                            n = this.c,
                            i = this.d;
                        return this.a = t.a * e + t.b * n, this.b = t.a * r + t.b * i, this.c = t.c * e + t.d * n, this.d = t.c * r + t.d * i, this.tx = t.tx * e + t.ty * n + this.tx, this.ty = t.tx * r + t.ty * i + this.ty, this
                    }, t.prototype.setTransform = function(t, e, r, n, i, o, s, a, u) {
                        return this.a = Math.cos(s + u) * i, this.b = Math.sin(s + u) * i, this.c = -Math.sin(s - a) * o, this.d = Math.cos(s - a) * o, this.tx = t - (r * this.a + n * this.c), this.ty = e - (r * this.b + n * this.d), this
                    }, t.prototype.prepend = function(t) {
                        var e = this.tx;
                        if (1 !== t.a || 0 !== t.b || 0 !== t.c || 1 !== t.d) {
                            var r = this.a,
                                n = this.c;
                            this.a = r * t.a + this.b * t.c, this.b = r * t.b + this.b * t.d, this.c = n * t.a + this.d * t.c, this.d = n * t.b + this.d * t.d
                        }
                        return this.tx = e * t.a + this.ty * t.c + t.tx, this.ty = e * t.b + this.ty * t.d + t.ty, this
                    }, t.prototype.decompose = function(t) {
                        var e = this.a,
                            r = this.b,
                            n = this.c,
                            i = this.d,
                            o = -Math.atan2(-n, i),
                            s = Math.atan2(r, e),
                            u = Math.abs(o + s);
                        return u < 1e-5 || Math.abs(a.PI_2 - u) < 1e-5 ? (t.rotation = s, e < 0 && i >= 0 && (t.rotation += t.rotation <= 0 ? Math.PI : -Math.PI), t.skew.x = t.skew.y = 0) : (t.rotation = 0, t.skew.x = o, t.skew.y = s), t.scale.x = Math.sqrt(e * e + r * r), t.scale.y = Math.sqrt(n * n + i * i), t.position.x = this.tx, t.position.y = this.ty, t
                    }, t.prototype.invert = function() {
                        var t = this.a,
                            e = this.b,
                            r = this.c,
                            n = this.d,
                            i = this.tx,
                            o = t * n - e * r;
                        return this.a = n / o, this.b = -e / o, this.c = -r / o, this.d = t / o, this.tx = (r * this.ty - n * i) / o, this.ty = -(t * this.ty - e * i) / o, this
                    }, t.prototype.identity = function() {
                        return this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0, this
                    }, t.prototype.clone = function() {
                        var e = new t;
                        return e.a = this.a, e.b = this.b, e.c = this.c, e.d = this.d, e.tx = this.tx, e.ty = this.ty, e
                    }, t.prototype.copy = function(t) {
                        return t.a = this.a, t.b = this.b, t.c = this.c, t.d = this.d, t.tx = this.tx, t.ty = this.ty, t
                    }, i(t, null, [{
                        key: "IDENTITY",
                        get: function() {
                            return new t
                        }
                    }, {
                        key: "TEMP_MATRIX",
                        get: function() {
                            return new t
                        }
                    }]), t
                }();
            r.default = u
        }, {
            "../const": 46,
            "./Point": 69
        }],
        68: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                o = function() {
                    function t(e, r) {
                        var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
                            o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;
                        n(this, t), this._x = i, this._y = o, this.cb = e, this.scope = r
                    }
                    return t.prototype.clone = function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null,
                            r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
                        return new t(e || this.cb, r || this.scope, this._x, this._y)
                    }, t.prototype.set = function(t, e) {
                        var r = t || 0,
                            n = e || (0 !== e ? r : 0);
                        this._x === r && this._y === n || (this._x = r, this._y = n, this.cb.call(this.scope))
                    }, t.prototype.copy = function(t) {
                        this._x === t.x && this._y === t.y || (this._x = t.x, this._y = t.y, this.cb.call(this.scope))
                    }, t.prototype.equals = function(t) {
                        return t.x === this._x && t.y === this._y
                    }, i(t, [{
                        key: "x",
                        get: function() {
                            return this._x
                        },
                        set: function(t) {
                            this._x !== t && (this._x = t, this.cb.call(this.scope))
                        }
                    }, {
                        key: "y",
                        get: function() {
                            return this._y
                        },
                        set: function(t) {
                            this._y !== t && (this._y = t, this.cb.call(this.scope))
                        }
                    }]), t
                }();
            r.default = o
        }, {}],
        69: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                function t() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                        r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                    n(this, t), this.x = e, this.y = r
                }
                return t.prototype.clone = function() {
                    return new t(this.x, this.y)
                }, t.prototype.copy = function(t) {
                    this.set(t.x, t.y)
                }, t.prototype.equals = function(t) {
                    return t.x === this.x && t.y === this.y
                }, t.prototype.set = function(t, e) {
                    this.x = t || 0, this.y = e || (0 !== e ? this.x : 0)
                }, t
            }();
            r.default = i
        }, {}],
        70: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            r.__esModule = !0;
            var i = t("./Point");
            Object.defineProperty(r, "Point", {
                enumerable: !0,
                get: function() {
                    return n(i).default
                }
            });
            var o = t("./ObservablePoint");
            Object.defineProperty(r, "ObservablePoint", {
                enumerable: !0,
                get: function() {
                    return n(o).default
                }
            });
            var s = t("./Matrix");
            Object.defineProperty(r, "Matrix", {
                enumerable: !0,
                get: function() {
                    return n(s).default
                }
            });
            var a = t("./GroupD8");
            Object.defineProperty(r, "GroupD8", {
                enumerable: !0,
                get: function() {
                    return n(a).default
                }
            });
            var u = t("./shapes/Circle");
            Object.defineProperty(r, "Circle", {
                enumerable: !0,
                get: function() {
                    return n(u).default
                }
            });
            var h = t("./shapes/Ellipse");
            Object.defineProperty(r, "Ellipse", {
                enumerable: !0,
                get: function() {
                    return n(h).default
                }
            });
            var l = t("./shapes/Polygon");
            Object.defineProperty(r, "Polygon", {
                enumerable: !0,
                get: function() {
                    return n(l).default
                }
            });
            var c = t("./shapes/Rectangle");
            Object.defineProperty(r, "Rectangle", {
                enumerable: !0,
                get: function() {
                    return n(c).default
                }
            });
            var d = t("./shapes/RoundedRectangle");
            Object.defineProperty(r, "RoundedRectangle", {
                enumerable: !0,
                get: function() {
                    return n(d).default
                }
            })
        }, {
            "./GroupD8": 66,
            "./Matrix": 67,
            "./ObservablePoint": 68,
            "./Point": 69,
            "./shapes/Circle": 71,
            "./shapes/Ellipse": 72,
            "./shapes/Polygon": 73,
            "./shapes/Rectangle": 74,
            "./shapes/RoundedRectangle": 75
        }],
        71: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("./Rectangle"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i),
                s = t("../../const"),
                a = function() {
                    function t() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                            r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
                        n(this, t), this.x = e, this.y = r, this.radius = i, this.type = s.SHAPES.CIRC
                    }
                    return t.prototype.clone = function() {
                        return new t(this.x, this.y, this.radius)
                    }, t.prototype.contains = function(t, e) {
                        if (this.radius <= 0) return !1;
                        var r = this.radius * this.radius,
                            n = this.x - t,
                            i = this.y - e;
                        return n *= n, i *= i, n + i <= r
                    }, t.prototype.getBounds = function() {
                        return new o.default(this.x - this.radius, this.y - this.radius, 2 * this.radius, 2 * this.radius)
                    }, t
                }();
            r.default = a
        }, {
            "../../const": 46,
            "./Rectangle": 74
        }],
        72: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("./Rectangle"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i),
                s = t("../../const"),
                a = function() {
                    function t() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                            r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
                            o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;
                        n(this, t), this.x = e, this.y = r, this.width = i, this.height = o, this.type = s.SHAPES.ELIP
                    }
                    return t.prototype.clone = function() {
                        return new t(this.x, this.y, this.width, this.height)
                    }, t.prototype.contains = function(t, e) {
                        if (this.width <= 0 || this.height <= 0) return !1;
                        var r = (t - this.x) / this.width,
                            n = (e - this.y) / this.height;
                        return r *= r, n *= n, r + n <= 1
                    }, t.prototype.getBounds = function() {
                        return new o.default(this.x - this.width, this.y - this.height, this.width, this.height)
                    }, t
                }();
            r.default = a
        }, {
            "../../const": 46,
            "./Rectangle": 74
        }],
        73: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("../Point"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i),
                s = t("../../const"),
                a = function() {
                    function t() {
                        for (var e = arguments.length, r = Array(e), i = 0; i < e; i++) r[i] = arguments[i];
                        if (n(this, t), Array.isArray(r[0]) && (r = r[0]), r[0] instanceof o.default) {
                            for (var a = [], u = 0, h = r.length; u < h; u++) a.push(r[u].x, r[u].y);
                            r = a
                        }
                        this.closed = !0, this.points = r, this.type = s.SHAPES.POLY
                    }
                    return t.prototype.clone = function() {
                        return new t(this.points.slice())
                    }, t.prototype.close = function() {
                        var t = this.points;
                        t[0] === t[t.length - 2] && t[1] === t[t.length - 1] || t.push(t[0], t[1])
                    }, t.prototype.contains = function(t, e) {
                        for (var r = !1, n = this.points.length / 2, i = 0, o = n - 1; i < n; o = i++) {
                            var s = this.points[2 * i],
                                a = this.points[2 * i + 1],
                                u = this.points[2 * o],
                                h = this.points[2 * o + 1];
                            a > e != h > e && t < (e - a) / (h - a) * (u - s) + s && (r = !r)
                        }
                        return r
                    }, t
                }();
            r.default = a
        }, {
            "../../const": 46,
            "../Point": 69
        }],
        74: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                o = t("../../const"),
                s = function() {
                    function t() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                            r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
                            s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;
                        n(this, t), this.x = Number(e), this.y = Number(r), this.width = Number(i), this.height = Number(s), this.type = o.SHAPES.RECT
                    }
                    return t.prototype.clone = function() {
                        return new t(this.x, this.y, this.width, this.height)
                    }, t.prototype.copy = function(t) {
                        return this.x = t.x, this.y = t.y, this.width = t.width, this.height = t.height, this
                    }, t.prototype.contains = function(t, e) {
                        return !(this.width <= 0 || this.height <= 0) && t >= this.x && t < this.x + this.width && e >= this.y && e < this.y + this.height
                    }, t.prototype.pad = function(t, e) {
                        t = t || 0, e = e || (0 !== e ? t : 0), this.x -= t, this.y -= e, this.width += 2 * t, this.height += 2 * e
                    }, t.prototype.fit = function(t) {
                        this.x < t.x && (this.width += this.x, this.width < 0 && (this.width = 0), this.x = t.x), this.y < t.y && (this.height += this.y, this.height < 0 && (this.height = 0), this.y = t.y), this.x + this.width > t.x + t.width && (this.width = t.width - this.x, this.width < 0 && (this.width = 0)), this.y + this.height > t.y + t.height && (this.height = t.height - this.y, this.height < 0 && (this.height = 0))
                    }, t.prototype.enlarge = function(t) {
                        var e = Math.min(this.x, t.x),
                            r = Math.max(this.x + this.width, t.x + t.width),
                            n = Math.min(this.y, t.y),
                            i = Math.max(this.y + this.height, t.y + t.height);
                        this.x = e, this.width = r - e, this.y = n, this.height = i - n
                    }, i(t, [{
                        key: "left",
                        get: function() {
                            return this.x
                        }
                    }, {
                        key: "right",
                        get: function() {
                            return this.x + this.width
                        }
                    }, {
                        key: "top",
                        get: function() {
                            return this.y
                        }
                    }, {
                        key: "bottom",
                        get: function() {
                            return this.y + this.height
                        }
                    }], [{
                        key: "EMPTY",
                        get: function() {
                            return new t(0, 0, 0, 0)
                        }
                    }]), t
                }();
            r.default = s
        }, {
            "../../const": 46
        }],
        75: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("../../const"),
                o = function() {
                    function t() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                            r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
                            s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0,
                            a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 20;
                        n(this, t), this.x = e, this.y = r, this.width = o, this.height = s, this.radius = a, this.type = i.SHAPES.RREC
                    }
                    return t.prototype.clone = function() {
                        return new t(this.x, this.y, this.width, this.height, this.radius)
                    }, t.prototype.contains = function(t, e) {
                        if (this.width <= 0 || this.height <= 0) return !1;
                        if (t >= this.x && t <= this.x + this.width && e >= this.y && e <= this.y + this.height) {
                            if (e >= this.y + this.radius && e <= this.y + this.height - this.radius || t >= this.x + this.radius && t <= this.x + this.width - this.radius) return !0;
                            var r = t - (this.x + this.radius),
                                n = e - (this.y + this.radius),
                                i = this.radius * this.radius;
                            if (r * r + n * n <= i) return !0;
                            if ((r = t - (this.x + this.width - this.radius)) * r + n * n <= i) return !0;
                            if (n = e - (this.y + this.height - this.radius), r * r + n * n <= i) return !0;
                            if ((r = t - (this.x + this.radius)) * r + n * n <= i) return !0
                        }
                        return !1
                    }, t
                }();
            r.default = o
        }, {
            "../../const": 46
        }],
        76: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                u = t("../utils"),
                h = t("../math"),
                l = t("../const"),
                c = t("../settings"),
                d = n(c),
                f = t("../display/Container"),
                p = n(f),
                v = t("../textures/RenderTexture"),
                g = n(v),
                y = t("eventemitter3"),
                m = n(y),
                _ = new h.Matrix,
                b = function(t) {
                    function e(r, n, s, a) {
                        i(this, e);
                        var c = o(this, t.call(this));
                        return (0, u.sayHello)(r), "number" == typeof n && (n = Object.assign({
                            width: n,
                            height: s || d.default.RENDER_OPTIONS.height
                        }, a)), n = Object.assign({}, d.default.RENDER_OPTIONS, n), c.options = n, c.type = l.RENDERER_TYPE.UNKNOWN, c.screen = new h.Rectangle(0, 0, n.width, n.height), c.view = n.view || document.createElement("canvas"), c.resolution = n.resolution || d.default.RESOLUTION, c.transparent = n.transparent, c.autoResize = n.autoResize || !1, c.blendModes = null, c.preserveDrawingBuffer = n.preserveDrawingBuffer, c.clearBeforeRender = n.clearBeforeRender, c.roundPixels = n.roundPixels, c._backgroundColor = 0, c._backgroundColorRgba = [0, 0, 0, 0], c._backgroundColorString = "#000000", c.backgroundColor = n.backgroundColor || c._backgroundColor, c._tempDisplayObjectParent = new p.default, c._lastObjectRendered = c._tempDisplayObjectParent, c
                    }
                    return s(e, t), e.prototype.resize = function(t, e) {
                        this.screen.width = t, this.screen.height = e, this.view.width = t * this.resolution, this.view.height = e * this.resolution, this.autoResize && (this.view.style.width = t + "px", this.view.style.height = e + "px")
                    }, e.prototype.generateTexture = function(t, e, r, n) {
                        n = n || t.getLocalBounds();
                        var i = g.default.create(0 | n.width, 0 | n.height, e, r);
                        return _.tx = -n.x, _.ty = -n.y, this.render(t, i, !1, _, !!t.parent), i
                    }, e.prototype.destroy = function(t) {
                        t && this.view.parentNode && this.view.parentNode.removeChild(this.view), this.type = l.RENDERER_TYPE.UNKNOWN, this.view = null, this.screen = null, this.resolution = 0, this.transparent = !1, this.autoResize = !1, this.blendModes = null, this.options = null, this.preserveDrawingBuffer = !1, this.clearBeforeRender = !1, this.roundPixels = !1, this._backgroundColor = 0, this._backgroundColorRgba = null, this._backgroundColorString = null, this._tempDisplayObjectParent = null, this._lastObjectRendered = null
                    }, a(e, [{
                        key: "width",
                        get: function() {
                            return this.view.width
                        }
                    }, {
                        key: "height",
                        get: function() {
                            return this.view.height
                        }
                    }, {
                        key: "backgroundColor",
                        get: function() {
                            return this._backgroundColor
                        },
                        set: function(t) {
                            this._backgroundColor = t, this._backgroundColorString = (0, u.hex2string)(t), (0, u.hex2rgb)(t, this._backgroundColorRgba)
                        }
                    }]), e
                }(m.default);
            r.default = b
        }, {
            "../const": 46,
            "../display/Container": 48,
            "../math": 70,
            "../settings": 101,
            "../textures/RenderTexture": 113,
            "../utils": 125,
            eventemitter3: 3
        }],
        77: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("../SystemRenderer"),
                u = n(a),
                h = t("./utils/CanvasMaskManager"),
                l = n(h),
                c = t("./utils/CanvasRenderTarget"),
                d = n(c),
                f = t("./utils/mapCanvasBlendModesToPixi"),
                p = n(f),
                v = t("../../utils"),
                g = t("../../const"),
                y = t("../../settings"),
                m = n(y),
                _ = function(t) {
                    function e(r, n, s) {
                        i(this, e);
                        var a = o(this, t.call(this, "Canvas", r, n, s));
                        return a.type = g.RENDERER_TYPE.CANVAS, a.rootContext = a.view.getContext("2d", {
                            alpha: a.transparent
                        }), a.context = a.rootContext, a.refresh = !0, a.maskManager = new l.default(a), a.smoothProperty = "imageSmoothingEnabled", a.rootContext.imageSmoothingEnabled || (a.rootContext.webkitImageSmoothingEnabled ? a.smoothProperty = "webkitImageSmoothingEnabled" : a.rootContext.mozImageSmoothingEnabled ? a.smoothProperty = "mozImageSmoothingEnabled" : a.rootContext.oImageSmoothingEnabled ? a.smoothProperty = "oImageSmoothingEnabled" : a.rootContext.msImageSmoothingEnabled && (a.smoothProperty = "msImageSmoothingEnabled")), a.initPlugins(), a.blendModes = (0, p.default)(), a._activeBlendMode = null, a.renderingToScreen = !1, a.resize(a.options.width, a.options.height), a
                    }
                    return s(e, t), e.prototype.render = function(t, e, r, n, i) {
                        if (this.view) {
                            this.renderingToScreen = !e, this.emit("prerender");
                            var o = this.resolution;
                            e ? (e = e.baseTexture || e, e._canvasRenderTarget || (e._canvasRenderTarget = new d.default(e.width, e.height, e.resolution), e.source = e._canvasRenderTarget.canvas, e.valid = !0), this.context = e._canvasRenderTarget.context, this.resolution = e._canvasRenderTarget.resolution) : this.context = this.rootContext;
                            var s = this.context;
                            if (e || (this._lastObjectRendered = t), !i) {
                                var a = t.parent,
                                    u = this._tempDisplayObjectParent.transform.worldTransform;
                                n ? (n.copy(u), this._tempDisplayObjectParent.transform._worldID = -1) : u.identity(), t.parent = this._tempDisplayObjectParent, t.updateTransform(), t.parent = a
                            }
                            s.save(), s.setTransform(1, 0, 0, 1, 0, 0), s.globalAlpha = 1, this._activeBlendMode = g.BLEND_MODES.NORMAL, s.globalCompositeOperation = this.blendModes[g.BLEND_MODES.NORMAL], navigator.isCocoonJS && this.view.screencanvas && (s.fillStyle = "black", s.clear()), (void 0 !== r ? r : this.clearBeforeRender) && this.renderingToScreen && (this.transparent ? s.clearRect(0, 0, this.width, this.height) : (s.fillStyle = this._backgroundColorString, s.fillRect(0, 0, this.width, this.height)));
                            var h = this.context;
                            this.context = s, t.renderCanvas(this), this.context = h, s.restore(), this.resolution = o, this.emit("postrender")
                        }
                    }, e.prototype.clear = function(t) {
                        var e = this.context;
                        t = t || this._backgroundColorString, !this.transparent && t ? (e.fillStyle = t, e.fillRect(0, 0, this.width, this.height)) : e.clearRect(0, 0, this.width, this.height)
                    }, e.prototype.setBlendMode = function(t) {
                        this._activeBlendMode !== t && (this._activeBlendMode = t, this.context.globalCompositeOperation = this.blendModes[t])
                    }, e.prototype.destroy = function(e) {
                        this.destroyPlugins(), t.prototype.destroy.call(this, e), this.context = null, this.refresh = !0, this.maskManager.destroy(), this.maskManager = null, this.smoothProperty = null
                    }, e.prototype.resize = function(e, r) {
                        t.prototype.resize.call(this, e, r), this.smoothProperty && (this.rootContext[this.smoothProperty] = m.default.SCALE_MODE === g.SCALE_MODES.LINEAR)
                    }, e.prototype.invalidateBlendMode = function() {
                        this._activeBlendMode = this.blendModes.indexOf(this.context.globalCompositeOperation)
                    }, e
                }(u.default);
            r.default = _, v.pluginTarget.mixin(_)
        }, {
            "../../const": 46,
            "../../settings": 101,
            "../../utils": 125,
            "../SystemRenderer": 76,
            "./utils/CanvasMaskManager": 78,
            "./utils/CanvasRenderTarget": 79,
            "./utils/mapCanvasBlendModesToPixi": 81
        }],
        78: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("../../../const"),
                o = function() {
                    function t(e) {
                        n(this, t), this.renderer = e
                    }
                    return t.prototype.pushMask = function(t) {
                        var e = this.renderer;
                        e.context.save();
                        var r = t.alpha,
                            n = t.transform.worldTransform,
                            i = e.resolution;
                        e.context.setTransform(n.a * i, n.b * i, n.c * i, n.d * i, n.tx * i, n.ty * i), t._texture || (this.renderGraphicsShape(t), e.context.clip()), t.worldAlpha = r
                    }, t.prototype.renderGraphicsShape = function(t) {
                        var e = this.renderer.context,
                            r = t.graphicsData.length;
                        if (0 !== r) {
                            e.beginPath();
                            for (var n = 0; n < r; n++) {
                                var o = t.graphicsData[n],
                                    s = o.shape;
                                if (o.type === i.SHAPES.POLY) {
                                    var a = s.points;
                                    e.moveTo(a[0], a[1]);
                                    for (var u = 1; u < a.length / 2; u++) e.lineTo(a[2 * u], a[2 * u + 1]);
                                    a[0] === a[a.length - 2] && a[1] === a[a.length - 1] && e.closePath()
                                } else if (o.type === i.SHAPES.RECT) e.rect(s.x, s.y, s.width, s.height), e.closePath();
                                else if (o.type === i.SHAPES.CIRC) e.arc(s.x, s.y, s.radius, 0, 2 * Math.PI), e.closePath();
                                else if (o.type === i.SHAPES.ELIP) {
                                    var h = 2 * s.width,
                                        l = 2 * s.height,
                                        c = s.x - h / 2,
                                        d = s.y - l / 2,
                                        f = h / 2 * .5522848,
                                        p = l / 2 * .5522848,
                                        v = c + h,
                                        g = d + l,
                                        y = c + h / 2,
                                        m = d + l / 2;
                                    e.moveTo(c, m), e.bezierCurveTo(c, m - p, y - f, d, y, d), e.bezierCurveTo(y + f, d, v, m - p, v, m), e.bezierCurveTo(v, m + p, y + f, g, y, g), e.bezierCurveTo(y - f, g, c, m + p, c, m), e.closePath()
                                } else if (o.type === i.SHAPES.RREC) {
                                    var _ = s.x,
                                        b = s.y,
                                        x = s.width,
                                        T = s.height,
                                        w = s.radius,
                                        E = Math.min(x, T) / 2 | 0;
                                    w = w > E ? E : w, e.moveTo(_, b + w), e.lineTo(_, b + T - w), e.quadraticCurveTo(_, b + T, _ + w, b + T), e.lineTo(_ + x - w, b + T), e.quadraticCurveTo(_ + x, b + T, _ + x, b + T - w), e.lineTo(_ + x, b + w), e.quadraticCurveTo(_ + x, b, _ + x - w, b), e.lineTo(_ + w, b), e.quadraticCurveTo(_, b, _, b + w), e.closePath()
                                }
                            }
                        }
                    }, t.prototype.popMask = function(t) {
                        t.context.restore(), t.invalidateBlendMode()
                    }, t.prototype.destroy = function() {}, t
                }();
            r.default = o
        }, {
            "../../../const": 46
        }],
        79: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                o = t("../../../settings"),
                s = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(o),
                a = function() {
                    function t(e, r, i) {
                        n(this, t), this.canvas = document.createElement("canvas"), this.context = this.canvas.getContext("2d"), this.resolution = i || s.default.RESOLUTION, this.resize(e, r)
                    }
                    return t.prototype.clear = function() {
                        this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)
                    }, t.prototype.resize = function(t, e) {
                        this.canvas.width = t * this.resolution, this.canvas.height = e * this.resolution
                    }, t.prototype.destroy = function() {
                        this.context = null, this.canvas = null
                    }, i(t, [{
                        key: "width",
                        get: function() {
                            return this.canvas.width
                        },
                        set: function(t) {
                            this.canvas.width = t
                        }
                    }, {
                        key: "height",
                        get: function() {
                            return this.canvas.height
                        },
                        set: function(t) {
                            this.canvas.height = t
                        }
                    }]), t
                }();
            r.default = a
        }, {
            "../../../settings": 101
        }],
        80: [function(t, e, r) {
            "use strict";

            function n(t) {
                var e = document.createElement("canvas");
                e.width = 6, e.height = 1;
                var r = e.getContext("2d");
                return r.fillStyle = t, r.fillRect(0, 0, 6, 1), e
            }

            function i() {
                if ("undefined" == typeof document) return !1;
                var t = n("#ff00ff"),
                    e = n("#ffff00"),
                    r = document.createElement("canvas");
                r.width = 6, r.height = 1;
                var i = r.getContext("2d");
                i.globalCompositeOperation = "multiply", i.drawImage(t, 0, 0), i.drawImage(e, 2, 0);
                var o = i.getImageData(2, 0, 1, 1);
                if (!o) return !1;
                var s = o.data;
                return 255 === s[0] && 0 === s[1] && 0 === s[2]
            }
            r.__esModule = !0, r.default = i
        }, {}],
        81: [function(t, e, r) {
            "use strict";

            function n() {
                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                return (0, s.default)() ? (t[i.BLEND_MODES.NORMAL] = "source-over", t[i.BLEND_MODES.ADD] = "lighter", t[i.BLEND_MODES.MULTIPLY] = "multiply", t[i.BLEND_MODES.SCREEN] = "screen", t[i.BLEND_MODES.OVERLAY] = "overlay", t[i.BLEND_MODES.DARKEN] = "darken", t[i.BLEND_MODES.LIGHTEN] = "lighten", t[i.BLEND_MODES.COLOR_DODGE] = "color-dodge", t[i.BLEND_MODES.COLOR_BURN] = "color-burn", t[i.BLEND_MODES.HARD_LIGHT] = "hard-light", t[i.BLEND_MODES.SOFT_LIGHT] = "soft-light", t[i.BLEND_MODES.DIFFERENCE] = "difference", t[i.BLEND_MODES.EXCLUSION] = "exclusion", t[i.BLEND_MODES.HUE] = "hue", t[i.BLEND_MODES.SATURATION] = "saturate", t[i.BLEND_MODES.COLOR] = "color", t[i.BLEND_MODES.LUMINOSITY] = "luminosity") : (t[i.BLEND_MODES.NORMAL] = "source-over", t[i.BLEND_MODES.ADD] = "lighter", t[i.BLEND_MODES.MULTIPLY] = "source-over", t[i.BLEND_MODES.SCREEN] = "source-over", t[i.BLEND_MODES.OVERLAY] = "source-over", t[i.BLEND_MODES.DARKEN] = "source-over", t[i.BLEND_MODES.LIGHTEN] = "source-over", t[i.BLEND_MODES.COLOR_DODGE] = "source-over", t[i.BLEND_MODES.COLOR_BURN] = "source-over", t[i.BLEND_MODES.HARD_LIGHT] = "source-over", t[i.BLEND_MODES.SOFT_LIGHT] = "source-over", t[i.BLEND_MODES.DIFFERENCE] = "source-over", t[i.BLEND_MODES.EXCLUSION] = "source-over", t[i.BLEND_MODES.HUE] = "source-over", t[i.BLEND_MODES.SATURATION] = "source-over", t[i.BLEND_MODES.COLOR] = "source-over", t[i.BLEND_MODES.LUMINOSITY] = "source-over"), t[i.BLEND_MODES.NORMAL_NPM] = t[i.BLEND_MODES.NORMAL], t[i.BLEND_MODES.ADD_NPM] = t[i.BLEND_MODES.ADD], t[i.BLEND_MODES.SCREEN_NPM] = t[i.BLEND_MODES.SCREEN], t
            }
            r.__esModule = !0, r.default = n;
            var i = t("../../../const"),
                o = t("./canUseNewCanvasBlendModes"),
                s = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(o)
        }, {
            "../../../const": 46,
            "./canUseNewCanvasBlendModes": 80
        }],
        82: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("../../const"),
                o = t("../../settings"),
                s = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(o),
                a = function() {
                    function t(e) {
                        n(this, t), this.renderer = e, this.count = 0, this.checkCount = 0, this.maxIdle = s.default.GC_MAX_IDLE, this.checkCountMax = s.default.GC_MAX_CHECK_COUNT, this.mode = s.default.GC_MODE
                    }
                    return t.prototype.update = function() {
                        this.count++, this.mode !== i.GC_MODES.MANUAL && ++this.checkCount > this.checkCountMax && (this.checkCount = 0, this.run())
                    }, t.prototype.run = function() {
                        for (var t = this.renderer.textureManager, e = t._managedTextures, r = !1, n = 0; n < e.length; n++) {
                            var i = e[n];
                            !i._glRenderTargets && this.count - i.touched > this.maxIdle && (t.destroyTexture(i, !0), e[n] = null, r = !0)
                        }
                        if (r) {
                            for (var o = 0, s = 0; s < e.length; s++) null !== e[s] && (e[o++] = e[s]);
                            e.length = o
                        }
                    }, t.prototype.unload = function(t) {
                        var e = this.renderer.textureManager;
                        t._texture && t._texture._glRenderTargets && e.destroyTexture(t._texture, !0);
                        for (var r = t.children.length - 1; r >= 0; r--) this.unload(t.children[r])
                    }, t
                }();
            r.default = a
        }, {
            "../../const": 46,
            "../../settings": 101
        }],
        83: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("pixi-gl-core"),
                o = t("../../const"),
                s = t("./utils/RenderTarget"),
                a = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(s),
                u = t("../../utils"),
                h = function() {
                    function t(e) {
                        n(this, t), this.renderer = e, this.gl = e.gl, this._managedTextures = []
                    }
                    return t.prototype.bindTexture = function() {}, t.prototype.getTexture = function() {}, t.prototype.updateTexture = function(t, e) {
                        var r = this.gl,
                            n = !!t._glRenderTargets;
                        if (!t.hasLoaded) return null;
                        var s = this.renderer.boundTextures;
                        if (void 0 === e) {
                            e = 0;
                            for (var u = 0; u < s.length; ++u)
                                if (s[u] === t) {
                                    e = u;
                                    break
                                }
                        }
                        s[e] = t, r.activeTexture(r.TEXTURE0 + e);
                        var h = t._glTextures[this.renderer.CONTEXT_UID];
                        if (h) n ? t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width, t.height) : h.upload(t.source);
                        else {
                            if (n) {
                                var l = new a.default(this.gl, t.width, t.height, t.scaleMode, t.resolution);
                                l.resize(t.width, t.height), t._glRenderTargets[this.renderer.CONTEXT_UID] = l, h = l.texture
                            } else h = new i.GLTexture(this.gl, null, null, null, null), h.bind(e), h.premultiplyAlpha = !0, h.upload(t.source);
                            t._glTextures[this.renderer.CONTEXT_UID] = h, t.on("update", this.updateTexture, this), t.on("dispose", this.destroyTexture, this), this._managedTextures.push(t), t.isPowerOfTwo ? (t.mipmap && h.enableMipmap(), t.wrapMode === o.WRAP_MODES.CLAMP ? h.enableWrapClamp() : t.wrapMode === o.WRAP_MODES.REPEAT ? h.enableWrapRepeat() : h.enableWrapMirrorRepeat()) : h.enableWrapClamp(), t.scaleMode === o.SCALE_MODES.NEAREST ? h.enableNearestScaling() : h.enableLinearScaling()
                        }
                        return h
                    }, t.prototype.destroyTexture = function(t, e) {
                        if (t = t.baseTexture || t, t.hasLoaded) {
                            var r = this.renderer.CONTEXT_UID,
                                n = t._glTextures,
                                i = t._glRenderTargets;
                            if (n[r] && (this.renderer.unbindTexture(t), n[r].destroy(), t.off("update", this.updateTexture, this), t.off("dispose", this.destroyTexture, this), delete n[r], !e)) {
                                var o = this._managedTextures.indexOf(t); - 1 !== o && (0, u.removeItems)(this._managedTextures, o, 1)
                            }
                            i && i[r] && (i[r].destroy(), delete i[r])
                        }
                    }, t.prototype.removeAll = function() {
                        for (var t = 0; t < this._managedTextures.length; ++t) {
                            var e = this._managedTextures[t];
                            e._glTextures[this.renderer.CONTEXT_UID] && delete e._glTextures[this.renderer.CONTEXT_UID]
                        }
                    }, t.prototype.destroy = function() {
                        for (var t = 0; t < this._managedTextures.length; ++t) {
                            var e = this._managedTextures[t];
                            this.destroyTexture(e, !0), e.off("update", this.updateTexture, this), e.off("dispose", this.destroyTexture, this)
                        }
                        this._managedTextures = null
                    }, t
                }();
            r.default = h
        }, {
            "../../const": 46,
            "../../utils": 125,
            "./utils/RenderTarget": 96,
            "pixi-gl-core": 15
        }],
        84: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("../SystemRenderer"),
                u = n(a),
                h = t("./managers/MaskManager"),
                l = n(h),
                c = t("./managers/StencilManager"),
                d = n(c),
                f = t("./managers/FilterManager"),
                p = n(f),
                v = t("./utils/RenderTarget"),
                g = n(v),
                y = t("./utils/ObjectRenderer"),
                m = n(y),
                _ = t("./TextureManager"),
                b = n(_),
                x = t("../../textures/BaseTexture"),
                T = n(x),
                w = t("./TextureGarbageCollector"),
                E = n(w),
                S = t("./WebGLState"),
                O = n(S),
                M = t("./utils/mapWebGLDrawModesToPixi"),
                P = n(M),
                C = t("./utils/validateContext"),
                R = n(C),
                A = t("../../utils"),
                I = t("pixi-gl-core"),
                D = n(I),
                L = t("../../const"),
                N = 0,
                B = function(t) {
                    function e(r, n, s) {
                        i(this, e);
                        var a = o(this, t.call(this, "WebGL", r, n, s));
                        return a.legacy = a.options.legacy, a.legacy && (D.default.VertexArrayObject.FORCE_NATIVE = !0), a.type = L.RENDERER_TYPE.WEBGL, a.handleContextLost = a.handleContextLost.bind(a), a.handleContextRestored = a.handleContextRestored.bind(a), a.view.addEventListener("webglcontextlost", a.handleContextLost, !1), a.view.addEventListener("webglcontextrestored", a.handleContextRestored, !1), a._contextOptions = {
                            alpha: a.transparent,
                            antialias: a.options.antialias,
                            premultipliedAlpha: a.transparent && "notMultiplied" !== a.transparent,
                            stencil: !0,
                            preserveDrawingBuffer: a.options.preserveDrawingBuffer,
                            powerPreference: a.options.powerPreference
                        }, a._backgroundColorRgba[3] = a.transparent ? 0 : 1, a.maskManager = new l.default(a), a.stencilManager = new d.default(a), a.emptyRenderer = new m.default(a), a.currentRenderer = a.emptyRenderer, a.textureManager = null, a.filterManager = null, a.initPlugins(), a.options.context && (0, R.default)(a.options.context), a.gl = a.options.context || D.default.createContext(a.view, a._contextOptions), a.CONTEXT_UID = N++, a.state = new O.default(a.gl), a.renderingToScreen = !0, a.boundTextures = null, a._activeShader = null, a._activeVao = null, a._activeRenderTarget = null, a._initContext(), a.drawModes = (0, P.default)(a.gl), a._nextTextureLocation = 0, a.setBlendMode(0), a
                    }
                    return s(e, t), e.prototype._initContext = function() {
                        var t = this.gl;
                        t.isContextLost() && t.getExtension("WEBGL_lose_context") && t.getExtension("WEBGL_lose_context").restoreContext();
                        var e = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);
                        this._activeShader = null, this._activeVao = null, this.boundTextures = new Array(e), this.emptyTextures = new Array(e), this.textureManager = new b.default(this), this.filterManager = new p.default(this), this.textureGC = new E.default(this), this.state.resetToDefault(), this.rootRenderTarget = new g.default(t, this.width, this.height, null, this.resolution, !0), this.rootRenderTarget.clearColor = this._backgroundColorRgba, this.bindRenderTarget(this.rootRenderTarget);
                        var r = new D.default.GLTexture.fromData(t, null, 1, 1),
                            n = {
                                _glTextures: {}
                            };
                        n._glTextures[this.CONTEXT_UID] = {};
                        for (var i = 0; i < e; i++) {
                            var o = new T.default;
                            o._glTextures[this.CONTEXT_UID] = r, this.boundTextures[i] = n, this.emptyTextures[i] = o, this.bindTexture(null, i)
                        }
                        this.emit("context", t), this.resize(this.screen.width, this.screen.height)
                    }, e.prototype.render = function(t, e, r, n, i) {
                        if (this.renderingToScreen = !e, this.emit("prerender"), this.gl && !this.gl.isContextLost()) {
                            if (this._nextTextureLocation = 0, e || (this._lastObjectRendered = t), !i) {
                                var o = t.parent;
                                t.parent = this._tempDisplayObjectParent, t.updateTransform(), t.parent = o
                            }
                            this.bindRenderTexture(e, n), this.currentRenderer.start(), (void 0 !== r ? r : this.clearBeforeRender) && this._activeRenderTarget.clear(), t.renderWebGL(this), this.currentRenderer.flush(), this.textureGC.update(), this.emit("postrender")
                        }
                    }, e.prototype.setObjectRenderer = function(t) {
                        this.currentRenderer !== t && (this.currentRenderer.stop(), this.currentRenderer = t, this.currentRenderer.start())
                    }, e.prototype.flush = function() {
                        this.setObjectRenderer(this.emptyRenderer)
                    }, e.prototype.resize = function(t, e) {
                        u.default.prototype.resize.call(this, t, e), this.rootRenderTarget.resize(t, e), this._activeRenderTarget === this.rootRenderTarget && (this.rootRenderTarget.activate(), this._activeShader && (this._activeShader.uniforms.projectionMatrix = this.rootRenderTarget.projectionMatrix.toArray(!0)))
                    }, e.prototype.setBlendMode = function(t) {
                        this.state.setBlendMode(t)
                    }, e.prototype.clear = function(t) {
                        this._activeRenderTarget.clear(t)
                    }, e.prototype.setTransform = function(t) {
                        this._activeRenderTarget.transform = t
                    }, e.prototype.clearRenderTexture = function(t, e) {
                        var r = t.baseTexture,
                            n = r._glRenderTargets[this.CONTEXT_UID];
                        return n && n.clear(e), this
                    }, e.prototype.bindRenderTexture = function(t, e) {
                        var r = void 0;
                        if (t) {
                            var n = t.baseTexture;
                            n._glRenderTargets[this.CONTEXT_UID] || this.textureManager.updateTexture(n, 0), this.unbindTexture(n), r = n._glRenderTargets[this.CONTEXT_UID], r.setFrame(t.frame)
                        } else r = this.rootRenderTarget;
                        return r.transform = e, this.bindRenderTarget(r), this
                    }, e.prototype.bindRenderTarget = function(t) {
                        return t !== this._activeRenderTarget && (this._activeRenderTarget = t, t.activate(), this._activeShader && (this._activeShader.uniforms.projectionMatrix = t.projectionMatrix.toArray(!0)), this.stencilManager.setMaskStack(t.stencilMaskStack)), this
                    }, e.prototype.bindShader = function(t, e) {
                        return this._activeShader !== t && (this._activeShader = t, t.bind(), !1 !== e && (t.uniforms.projectionMatrix = this._activeRenderTarget.projectionMatrix.toArray(!0))), this
                    }, e.prototype.bindTexture = function(t, e, r) {
                        if (t = t || this.emptyTextures[e], t = t.baseTexture || t, t.touched = this.textureGC.count, r) e = e || 0;
                        else {
                            for (var n = 0; n < this.boundTextures.length; n++)
                                if (this.boundTextures[n] === t) return n;
                            void 0 === e && (this._nextTextureLocation++, this._nextTextureLocation %= this.boundTextures.length, e = this.boundTextures.length - this._nextTextureLocation - 1)
                        }
                        var i = this.gl,
                            o = t._glTextures[this.CONTEXT_UID];
                        return o ? (this.boundTextures[e] = t, i.activeTexture(i.TEXTURE0 + e), i.bindTexture(i.TEXTURE_2D, o.texture)) : this.textureManager.updateTexture(t, e), e
                    }, e.prototype.unbindTexture = function(t) {
                        var e = this.gl;
                        t = t.baseTexture || t;
                        for (var r = 0; r < this.boundTextures.length; r++) this.boundTextures[r] === t && (this.boundTextures[r] = this.emptyTextures[r], e.activeTexture(e.TEXTURE0 + r), e.bindTexture(e.TEXTURE_2D, this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));
                        return this
                    }, e.prototype.createVao = function() {
                        return new D.default.VertexArrayObject(this.gl, this.state.attribState)
                    }, e.prototype.bindVao = function(t) {
                        return this._activeVao === t ? this : (t ? t.bind() : this._activeVao && this._activeVao.unbind(), this._activeVao = t, this)
                    }, e.prototype.reset = function() {
                        this.setObjectRenderer(this.emptyRenderer), this.bindVao(null), this._activeShader = null, this._activeRenderTarget = this.rootRenderTarget;
                        for (var t = 0; t < this.boundTextures.length; t++) this.boundTextures[t] = this.emptyTextures[t];
                        return this.rootRenderTarget.activate(), this.state.resetToDefault(), this
                    }, e.prototype.handleContextLost = function(t) {
                        t.preventDefault()
                    }, e.prototype.handleContextRestored = function() {
                        this.textureManager.removeAll(), this.filterManager.destroy(!0), this._initContext()
                    }, e.prototype.destroy = function(e) {
                        this.destroyPlugins(), this.view.removeEventListener("webglcontextlost", this.handleContextLost), this.view.removeEventListener("webglcontextrestored", this.handleContextRestored), this.textureManager.destroy(), t.prototype.destroy.call(this, e), this.uid = 0, this.maskManager.destroy(), this.stencilManager.destroy(), this.filterManager.destroy(), this.maskManager = null, this.filterManager = null, this.textureManager = null, this.currentRenderer = null, this.handleContextLost = null, this.handleContextRestored = null, this._contextOptions = null, this.gl.useProgram(null), this.gl.getExtension("WEBGL_lose_context") && this.gl.getExtension("WEBGL_lose_context").loseContext(), this.gl = null
                    }, e
                }(u.default);
            r.default = B, A.pluginTarget.mixin(B)
        }, {
            "../../const": 46,
            "../../textures/BaseTexture": 112,
            "../../utils": 125,
            "../SystemRenderer": 76,
            "./TextureGarbageCollector": 82,
            "./TextureManager": 83,
            "./WebGLState": 85,
            "./managers/FilterManager": 90,
            "./managers/MaskManager": 91,
            "./managers/StencilManager": 92,
            "./utils/ObjectRenderer": 94,
            "./utils/RenderTarget": 96,
            "./utils/mapWebGLDrawModesToPixi": 99,
            "./utils/validateContext": 100,
            "pixi-gl-core": 15
        }],
        85: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("./utils/mapWebGLBlendModesToPixi"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i),
                s = function() {
                    function t(e) {
                        n(this, t), this.activeState = new Uint8Array(16), this.defaultState = new Uint8Array(16), this.defaultState[0] = 1, this.stackIndex = 0, this.stack = [], this.gl = e, this.maxAttribs = e.getParameter(e.MAX_VERTEX_ATTRIBS), this.attribState = {
                            tempAttribState: new Array(this.maxAttribs),
                            attribState: new Array(this.maxAttribs)
                        }, this.blendModes = (0, o.default)(e), this.nativeVaoExtension = e.getExtension("OES_vertex_array_object") || e.getExtension("MOZ_OES_vertex_array_object") || e.getExtension("WEBKIT_OES_vertex_array_object")
                    }
                    return t.prototype.push = function() {
                        var t = this.stack[this.stackIndex];
                        t || (t = this.stack[this.stackIndex] = new Uint8Array(16)), ++this.stackIndex;
                        for (var e = 0; e < this.activeState.length; e++) t[e] = this.activeState[e]
                    }, t.prototype.pop = function() {
                        var t = this.stack[--this.stackIndex];
                        this.setState(t)
                    }, t.prototype.setState = function(t) {
                        this.setBlend(t[0]), this.setDepthTest(t[1]), this.setFrontFace(t[2]), this.setCullFace(t[3]), this.setBlendMode(t[4])
                    }, t.prototype.setBlend = function(t) {
                        t = t ? 1 : 0, this.activeState[0] !== t && (this.activeState[0] = t, this.gl[t ? "enable" : "disable"](this.gl.BLEND))
                    }, t.prototype.setBlendMode = function(t) {
                        if (t !== this.activeState[4]) {
                            this.activeState[4] = t;
                            var e = this.blendModes[t];
                            2 === e.length ? this.gl.blendFunc(e[0], e[1]) : this.gl.blendFuncSeparate(e[0], e[1], e[2], e[3])
                        }
                    }, t.prototype.setDepthTest = function(t) {
                        t = t ? 1 : 0, this.activeState[1] !== t && (this.activeState[1] = t, this.gl[t ? "enable" : "disable"](this.gl.DEPTH_TEST))
                    }, t.prototype.setCullFace = function(t) {
                        t = t ? 1 : 0, this.activeState[3] !== t && (this.activeState[3] = t, this.gl[t ? "enable" : "disable"](this.gl.CULL_FACE))
                    }, t.prototype.setFrontFace = function(t) {
                        t = t ? 1 : 0, this.activeState[2] !== t && (this.activeState[2] = t, this.gl.frontFace(this.gl[t ? "CW" : "CCW"]))
                    }, t.prototype.resetAttributes = function() {
                        for (var t = 0; t < this.attribState.tempAttribState.length; t++) this.attribState.tempAttribState[t] = 0;
                        for (var e = 0; e < this.attribState.attribState.length; e++) this.attribState.attribState[e] = 0;
                        for (var r = 1; r < this.maxAttribs; r++) this.gl.disableVertexAttribArray(r)
                    }, t.prototype.resetToDefault = function() {
                        this.nativeVaoExtension && this.nativeVaoExtension.bindVertexArrayOES(null), this.resetAttributes();
                        for (var t = 0; t < this.activeState.length; ++t) this.activeState[t] = 32;
                        this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1), this.setState(this.defaultState)
                    }, t
                }();
            r.default = s
        }, {
            "./utils/mapWebGLBlendModesToPixi": 98
        }],
        86: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var o = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                s = t("./extractUniformsFromSrc"),
                a = n(s),
                u = t("../../../utils"),
                h = t("../../../const"),
                l = t("../../../settings"),
                c = n(l),
                d = {},
                f = function() {
                    function t(e, r, n) {
                        i(this, t), this.vertexSrc = e || t.defaultVertexSrc, this.fragmentSrc = r || t.defaultFragmentSrc, this._blendMode = h.BLEND_MODES.NORMAL, this.uniformData = n || (0, a.default)(this.vertexSrc, this.fragmentSrc, "projectionMatrix|uSampler"), this.uniforms = {};
                        for (var o in this.uniformData) this.uniforms[o] = this.uniformData[o].value, this.uniformData[o].type && (this.uniformData[o].type = this.uniformData[o].type.toLowerCase());
                        this.glShaders = {}, d[this.vertexSrc + this.fragmentSrc] || (d[this.vertexSrc + this.fragmentSrc] = (0, u.uid)()), this.glShaderKey = d[this.vertexSrc + this.fragmentSrc], this.padding = 4, this.resolution = c.default.FILTER_RESOLUTION, this.enabled = !0, this.autoFit = !0
                    }
                    return t.prototype.apply = function(t, e, r, n, i) {
                        t.applyFilter(this, e, r, n)
                    }, o(t, [{
                        key: "blendMode",
                        get: function() {
                            return this._blendMode
                        },
                        set: function(t) {
                            this._blendMode = t
                        }
                    }], [{
                        key: "defaultVertexSrc",
                        get: function() {
                            return ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "uniform mat3 projectionMatrix;", "uniform mat3 filterMatrix;", "varying vec2 vTextureCoord;", "varying vec2 vFilterCoord;", "void main(void){", "   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);", "   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;", "   vTextureCoord = aTextureCoord ;", "}"].join("\n")
                        }
                    }, {
                        key: "defaultFragmentSrc",
                        get: function() {
                            return ["varying vec2 vTextureCoord;", "varying vec2 vFilterCoord;", "uniform sampler2D uSampler;", "uniform sampler2D filterSampler;", "void main(void){", "   vec4 masky = texture2D(filterSampler, vFilterCoord);", "   vec4 sample = texture2D(uSampler, vTextureCoord);", "   vec4 color;", "   if(mod(vFilterCoord.x, 1.0) > 0.5)", "   {", "     color = vec4(1.0, 0.0, 0.0, 1.0);", "   }", "   else", "   {", "     color = vec4(0.0, 1.0, 0.0, 1.0);", "   }", "   gl_FragColor = mix(sample, masky, 0.5);", "   gl_FragColor *= sample.a;", "}"].join("\n")
                        }
                    }]), t
                }();
            r.default = f
        }, {
            "../../../const": 46,
            "../../../settings": 101,
            "../../../utils": 125,
            "./extractUniformsFromSrc": 87
        }],
        87: [function(t, e, r) {
            "use strict";

            function n(t, e, r) {
                var n = i(t),
                    o = i(e);
                return Object.assign(n, o)
            }

            function i(t) {
                for (var e = new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"), r = {}, n = void 0, i = t.replace(/\s+/g, " ").split(/\s*;\s*/), o = 0; o < i.length; o++) {
                    var s = i[o].trim();
                    if (s.indexOf("uniform") > -1) {
                        var u = s.split(" "),
                            h = u[1],
                            l = u[2],
                            c = 1;
                        l.indexOf("[") > -1 && (n = l.split(/\[|]/), l = n[0], c *= Number(n[1])), l.match(e) || (r[l] = {
                            value: a(h, c),
                            name: l,
                            type: h
                        })
                    }
                }
                return r
            }
            r.__esModule = !0, r.default = n;
            var o = t("pixi-gl-core"),
                s = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(o),
                a = s.default.shader.defaultValue
        }, {
            "pixi-gl-core": 15
        }],
        88: [function(t, e, r) {
            "use strict";

            function n(t, e, r) {
                var n = t.identity();
                return n.translate(e.x / r.width, e.y / r.height), n.scale(r.width, r.height), n
            }

            function i(t, e, r) {
                var n = t.identity();
                n.translate(e.x / r.width, e.y / r.height);
                var i = r.width / e.width,
                    o = r.height / e.height;
                return n.scale(i, o), n
            }

            function o(t, e, r, n) {
                var i = n._texture.orig,
                    o = t.set(r.width, 0, 0, r.height, e.x, e.y),
                    a = n.worldTransform.copy(s.Matrix.TEMP_MATRIX);
                return a.invert(), o.prepend(a), o.scale(1 / i.width, 1 / i.height), o.translate(n.anchor.x, n.anchor.y), o
            }
            r.__esModule = !0, r.calculateScreenSpaceMatrix = n, r.calculateNormalizedScreenSpaceMatrix = i, r.calculateSpriteMatrix = o;
            var s = t("../../../math")
        }, {
            "../../../math": 70
        }],
        89: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("../Filter"),
                u = n(a),
                h = t("../../../../math"),
                l = (t("path"), t("../../../../textures/TextureMatrix")),
                c = n(l),
                d = function(t) {
                    function e(r) {
                        i(this, e);
                        var n = new h.Matrix,
                            s = o(this, t.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n", "varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));
                        return r.renderable = !1, s.maskSprite = r, s.maskMatrix = n, s
                    }
                    return s(e, t), e.prototype.apply = function(t, e, r) {
                        var n = this.maskSprite,
                            i = this.maskSprite.texture;
                        i.valid && (i.transform || (i.transform = new c.default(i, 0)), i.transform.update(), this.uniforms.mask = i, this.uniforms.otherMatrix = t.calculateSpriteMatrix(this.maskMatrix, n).prepend(i.transform.mapCoord), this.uniforms.alpha = n.worldAlpha, this.uniforms.maskClamp = i.transform.uClampFrame, t.applyFilter(this, e, r))
                    }, e
                }(u.default);
            r.default = d
        }, {
            "../../../../math": 70,
            "../../../../textures/TextureMatrix": 116,
            "../Filter": 86,
            path: 8
        }],
        90: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function s(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var a = t("./WebGLManager"),
                u = n(a),
                h = t("../utils/RenderTarget"),
                l = n(h),
                c = t("../utils/Quad"),
                d = n(c),
                f = t("../../../math"),
                p = t("../../../Shader"),
                v = n(p),
                g = t("../filters/filterTransforms"),
                y = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(g),
                m = t("bit-twiddle"),
                _ = n(m),
                b = function() {
                    function t() {
                        s(this, t), this.renderTarget = null, this.target = null, this.resolution = 1, this.sourceFrame = new f.Rectangle, this.destinationFrame = new f.Rectangle, this.filters = []
                    }
                    return t.prototype.clear = function() {
                        this.filters = null, this.target = null, this.renderTarget = null
                    }, t
                }(),
                x = function(t) {
                    function e(r) {
                        s(this, e);
                        var n = i(this, t.call(this, r));
                        return n.gl = n.renderer.gl, n.quad = new d.default(n.gl, r.state.attribState), n.shaderCache = {}, n.pool = {}, n.filterData = null, n.managedFilters = [], n.renderer.on("prerender", n.onPrerender, n), n._screenWidth = r.view.width, n._screenHeight = r.view.height, n
                    }
                    return o(e, t), e.prototype.pushFilter = function(t, e) {
                        var r = this.renderer,
                            n = this.filterData;
                        if (!n) {
                            n = this.renderer._activeRenderTarget.filterStack;
                            var i = new b;
                            i.sourceFrame = i.destinationFrame = this.renderer._activeRenderTarget.size, i.renderTarget = r._activeRenderTarget, this.renderer._activeRenderTarget.filterData = n = {
                                index: 0,
                                stack: [i]
                            }, this.filterData = n
                        }
                        var o = n.stack[++n.index],
                            s = n.stack[0].destinationFrame;
                        o || (o = n.stack[n.index] = new b);
                        var a = t.filterArea && 0 === t.filterArea.x && 0 === t.filterArea.y && t.filterArea.width === r.screen.width && t.filterArea.height === r.screen.height,
                            u = e[0].resolution,
                            h = 0 | e[0].padding,
                            l = a ? r.screen : t.filterArea || t.getBounds(!0),
                            c = o.sourceFrame,
                            d = o.destinationFrame;
                        c.x = (l.x * u | 0) / u, c.y = (l.y * u | 0) / u, c.width = (l.width * u | 0) / u, c.height = (l.height * u | 0) / u, a || (n.stack[0].renderTarget.transform || e[0].autoFit && c.fit(s), c.pad(h)), d.width = c.width, d.height = c.height;
                        var f = this.getPotRenderTarget(r.gl, c.width, c.height, u);
                        o.target = t, o.filters = e, o.resolution = u, o.renderTarget = f, f.setFrame(d, c), r.bindRenderTarget(f), f.clear()
                    }, e.prototype.popFilter = function() {
                        var t = this.filterData,
                            e = t.stack[t.index - 1],
                            r = t.stack[t.index];
                        this.quad.map(r.renderTarget.size, r.sourceFrame).upload();
                        var n = r.filters;
                        if (1 === n.length) n[0].apply(this, r.renderTarget, e.renderTarget, !1, r), this.freePotRenderTarget(r.renderTarget);
                        else {
                            var i = r.renderTarget,
                                o = this.getPotRenderTarget(this.renderer.gl, r.sourceFrame.width, r.sourceFrame.height, r.resolution);
                            o.setFrame(r.destinationFrame, r.sourceFrame), o.clear();
                            var s = 0;
                            for (s = 0; s < n.length - 1; ++s) {
                                n[s].apply(this, i, o, !0, r);
                                var a = i;
                                i = o, o = a
                            }
                            n[s].apply(this, i, e.renderTarget, !1, r), this.freePotRenderTarget(i), this.freePotRenderTarget(o)
                        }
                        r.clear(), 0 == --t.index && (this.filterData = null)
                    }, e.prototype.applyFilter = function(t, e, r, n) {
                        var i = this.renderer,
                            o = i.gl,
                            s = t.glShaders[i.CONTEXT_UID];
                        s || (t.glShaderKey ? (s = this.shaderCache[t.glShaderKey]) || (s = new v.default(this.gl, t.vertexSrc, t.fragmentSrc), t.glShaders[i.CONTEXT_UID] = this.shaderCache[t.glShaderKey] = s, this.managedFilters.push(t)) : (s = t.glShaders[i.CONTEXT_UID] = new v.default(this.gl, t.vertexSrc, t.fragmentSrc), this.managedFilters.push(t)), i.bindVao(null), this.quad.initVao(s)), i.bindVao(this.quad.vao), i.bindRenderTarget(r), n && (o.disable(o.SCISSOR_TEST), i.clear(), o.enable(o.SCISSOR_TEST)), r === i.maskManager.scissorRenderTarget && i.maskManager.pushScissorMask(null, i.maskManager.scissorData), i.bindShader(s);
                        var a = this.renderer.emptyTextures[0];
                        this.renderer.boundTextures[0] = a, this.syncUniforms(s, t), i.state.setBlendMode(t.blendMode), o.activeTexture(o.TEXTURE0), o.bindTexture(o.TEXTURE_2D, e.texture.texture), this.quad.vao.draw(this.renderer.gl.TRIANGLES, 6, 0), o.bindTexture(o.TEXTURE_2D, a._glTextures[this.renderer.CONTEXT_UID].texture)
                    }, e.prototype.syncUniforms = function(t, e) {
                        var r = e.uniformData,
                            n = e.uniforms,
                            i = 1,
                            o = void 0;
                        if (t.uniforms.filterArea) {
                            o = this.filterData.stack[this.filterData.index];
                            var s = t.uniforms.filterArea;
                            s[0] = o.renderTarget.size.width, s[1] = o.renderTarget.size.height, s[2] = o.sourceFrame.x, s[3] = o.sourceFrame.y, t.uniforms.filterArea = s
                        }
                        if (t.uniforms.filterClamp) {
                            o = o || this.filterData.stack[this.filterData.index];
                            var a = t.uniforms.filterClamp;
                            a[0] = 0, a[1] = 0, a[2] = (o.sourceFrame.width - 1) / o.renderTarget.size.width, a[3] = (o.sourceFrame.height - 1) / o.renderTarget.size.height, t.uniforms.filterClamp = a
                        }
                        for (var u in r) {
                            var h = r[u].type;
                            if ("sampler2d" === h && 0 !== n[u]) {
                                if (n[u].baseTexture) t.uniforms[u] = this.renderer.bindTexture(n[u].baseTexture, i);
                                else {
                                    t.uniforms[u] = i;
                                    var l = this.renderer.gl;
                                    this.renderer.boundTextures[i] = this.renderer.emptyTextures[i], l.activeTexture(l.TEXTURE0 + i), n[u].texture.bind()
                                }
                                i++
                            } else if ("mat3" === h) void 0 !== n[u].a ? t.uniforms[u] = n[u].toArray(!0) : t.uniforms[u] = n[u];
                            else if ("vec2" === h)
                                if (void 0 !== n[u].x) {
                                    var c = t.uniforms[u] || new Float32Array(2);
                                    c[0] = n[u].x, c[1] = n[u].y, t.uniforms[u] = c
                                } else t.uniforms[u] = n[u];
                            else "float" === h ? t.uniforms.data[u].value !== r[u] && (t.uniforms[u] = n[u]) : t.uniforms[u] = n[u]
                        }
                    }, e.prototype.getRenderTarget = function(t, e) {
                        var r = this.filterData.stack[this.filterData.index],
                            n = this.getPotRenderTarget(this.renderer.gl, r.sourceFrame.width, r.sourceFrame.height, e || r.resolution);
                        return n.setFrame(r.destinationFrame, r.sourceFrame), n
                    }, e.prototype.returnRenderTarget = function(t) {
                        this.freePotRenderTarget(t)
                    }, e.prototype.calculateScreenSpaceMatrix = function(t) {
                        var e = this.filterData.stack[this.filterData.index];
                        return y.calculateScreenSpaceMatrix(t, e.sourceFrame, e.renderTarget.size)
                    }, e.prototype.calculateNormalizedScreenSpaceMatrix = function(t) {
                        var e = this.filterData.stack[this.filterData.index];
                        return y.calculateNormalizedScreenSpaceMatrix(t, e.sourceFrame, e.renderTarget.size, e.destinationFrame)
                    }, e.prototype.calculateSpriteMatrix = function(t, e) {
                        var r = this.filterData.stack[this.filterData.index];
                        return y.calculateSpriteMatrix(t, r.sourceFrame, r.renderTarget.size, e)
                    }, e.prototype.destroy = function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            e = this.renderer,
                            r = this.managedFilters;
                        e.off("prerender", this.onPrerender, this);
                        for (var n = 0; n < r.length; n++) t || r[n].glShaders[e.CONTEXT_UID].destroy(), delete r[n].glShaders[e.CONTEXT_UID];
                        this.shaderCache = {}, t ? this.pool = {} : this.emptyPool()
                    }, e.prototype.getPotRenderTarget = function(t, e, r, n) {
                        var i = "screen";
                        e *= n, r *= n, e === this._screenWidth && r === this._screenHeight || (e = _.default.nextPow2(e), r = _.default.nextPow2(r), i = (65535 & e) << 16 | 65535 & r), this.pool[i] || (this.pool[i] = []);
                        var o = this.pool[i].pop();
                        if (!o) {
                            var s = this.renderer.boundTextures[0];
                            t.activeTexture(t.TEXTURE0), o = new l.default(t, e, r, null, 1), t.bindTexture(t.TEXTURE_2D, s._glTextures[this.renderer.CONTEXT_UID].texture)
                        }
                        return o.resolution = n, o.defaultFrame.width = o.size.width = e / n, o.defaultFrame.height = o.size.height = r / n, o.filterPoolKey = i, o
                    }, e.prototype.emptyPool = function() {
                        for (var t in this.pool) {
                            var e = this.pool[t];
                            if (e)
                                for (var r = 0; r < e.length; r++) e[r].destroy(!0)
                        }
                        this.pool = {}
                    }, e.prototype.freePotRenderTarget = function(t) {
                        this.pool[t.filterPoolKey].push(t)
                    }, e.prototype.onPrerender = function() {
                        if (this._screenWidth !== this.renderer.view.width || this._screenHeight !== this.renderer.view.height) {
                            this._screenWidth = this.renderer.view.width, this._screenHeight = this.renderer.view.height;
                            var t = this.pool.screen;
                            if (t)
                                for (var e = 0; e < t.length; e++) t[e].destroy(!0);
                            this.pool.screen = []
                        }
                    }, e
                }(u.default);
            r.default = x
        }, {
            "../../../Shader": 44,
            "../../../math": 70,
            "../filters/filterTransforms": 88,
            "../utils/Quad": 95,
            "../utils/RenderTarget": 96,
            "./WebGLManager": 93,
            "bit-twiddle": 1
        }],
        91: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("./WebGLManager"),
                u = n(a),
                h = t("../filters/spriteMask/SpriteMaskFilter"),
                l = n(h),
                c = function(t) {
                    function e(r) {
                        i(this, e);
                        var n = o(this, t.call(this, r));
                        return n.scissor = !1, n.scissorData = null, n.scissorRenderTarget = null, n.enableScissor = !0, n.alphaMaskPool = [], n.alphaMaskIndex = 0, n
                    }
                    return s(e, t), e.prototype.pushMask = function(t, e) {
                        if (e.texture) this.pushSpriteMask(t, e);
                        else if (this.enableScissor && !this.scissor && this.renderer._activeRenderTarget.root && !this.renderer.stencilManager.stencilMaskStack.length && e.isFastRect()) {
                            var r = e.worldTransform,
                                n = Math.atan2(r.b, r.a);
                            n = Math.round(n * (180 / Math.PI)), n % 90 ? this.pushStencilMask(e) : this.pushScissorMask(t, e)
                        } else this.pushStencilMask(e)
                    }, e.prototype.popMask = function(t, e) {
                        e.texture ? this.popSpriteMask(t, e) : this.enableScissor && !this.renderer.stencilManager.stencilMaskStack.length ? this.popScissorMask(t, e) : this.popStencilMask(t, e)
                    }, e.prototype.pushSpriteMask = function(t, e) {
                        var r = this.alphaMaskPool[this.alphaMaskIndex];
                        r || (r = this.alphaMaskPool[this.alphaMaskIndex] = [new l.default(e)]), r[0].resolution = this.renderer.resolution, r[0].maskSprite = e, t.filterArea = e.getBounds(!0), this.renderer.filterManager.pushFilter(t, r), this.alphaMaskIndex++
                    }, e.prototype.popSpriteMask = function() {
                        this.renderer.filterManager.popFilter(), this.alphaMaskIndex--
                    }, e.prototype.pushStencilMask = function(t) {
                        this.renderer.currentRenderer.stop(), this.renderer.stencilManager.pushStencil(t)
                    }, e.prototype.popStencilMask = function() {
                        this.renderer.currentRenderer.stop(), this.renderer.stencilManager.popStencil()
                    }, e.prototype.pushScissorMask = function(t, e) {
                        e.renderable = !0;
                        var r = this.renderer._activeRenderTarget,
                            n = e.getBounds();
                        n.fit(r.size), e.renderable = !1, this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);
                        var i = this.renderer.resolution;
                        this.renderer.gl.scissor(n.x * i, (r.root ? r.size.height - n.y - n.height : n.y) * i, n.width * i, n.height * i), this.scissorRenderTarget = r, this.scissorData = e, this.scissor = !0
                    }, e.prototype.popScissorMask = function() {
                        this.scissorRenderTarget = null, this.scissorData = null, this.scissor = !1;
                        var t = this.renderer.gl;
                        t.disable(t.SCISSOR_TEST)
                    }, e
                }(u.default);
            r.default = c
        }, {
            "../filters/spriteMask/SpriteMaskFilter": 89,
            "./WebGLManager": 93
        }],
        92: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = t("./WebGLManager"),
                a = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(s),
                u = function(t) {
                    function e(r) {
                        n(this, e);
                        var o = i(this, t.call(this, r));
                        return o.stencilMaskStack = null, o
                    }
                    return o(e, t), e.prototype.setMaskStack = function(t) {
                        this.stencilMaskStack = t;
                        var e = this.renderer.gl;
                        0 === t.length ? e.disable(e.STENCIL_TEST) : e.enable(e.STENCIL_TEST)
                    }, e.prototype.pushStencil = function(t) {
                        this.renderer.setObjectRenderer(this.renderer.plugins.graphics), this.renderer._activeRenderTarget.attachStencilBuffer();
                        var e = this.renderer.gl,
                            r = this.stencilMaskStack.length;
                        0 === r && e.enable(e.STENCIL_TEST), this.stencilMaskStack.push(t), e.colorMask(!1, !1, !1, !1), e.stencilFunc(e.EQUAL, r, this._getBitwiseMask()), e.stencilOp(e.KEEP, e.KEEP, e.INCR), this.renderer.plugins.graphics.render(t), this._useCurrent()
                    }, e.prototype.popStencil = function() {
                        this.renderer.setObjectRenderer(this.renderer.plugins.graphics);
                        var t = this.renderer.gl,
                            e = this.stencilMaskStack.pop();
                        0 === this.stencilMaskStack.length ? (t.disable(t.STENCIL_TEST), t.clear(t.STENCIL_BUFFER_BIT), t.clearStencil(0)) : (t.colorMask(!1, !1, !1, !1), t.stencilOp(t.KEEP, t.KEEP, t.DECR), this.renderer.plugins.graphics.render(e), this._useCurrent())
                    }, e.prototype._useCurrent = function() {
                        var t = this.renderer.gl;
                        t.colorMask(!0, !0, !0, !0), t.stencilFunc(t.EQUAL, this.stencilMaskStack.length, this._getBitwiseMask()), t.stencilOp(t.KEEP, t.KEEP, t.KEEP)
                    }, e.prototype._getBitwiseMask = function() {
                        return (1 << this.stencilMaskStack.length) - 1
                    }, e.prototype.destroy = function() {
                        a.default.prototype.destroy.call(this), this.stencilMaskStack.stencilStack = null
                    }, e
                }(a.default);
            r.default = u
        }, {
            "./WebGLManager": 93
        }],
        93: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                function t(e) {
                    n(this, t), this.renderer = e, this.renderer.on("context", this.onContextChange, this)
                }
                return t.prototype.onContextChange = function() {}, t.prototype.destroy = function() {
                    this.renderer.off("context", this.onContextChange, this), this.renderer = null
                }, t
            }();
            r.default = i
        }, {}],
        94: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = t("../managers/WebGLManager"),
                a = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(s),
                u = function(t) {
                    function e() {
                        return n(this, e), i(this, t.apply(this, arguments))
                    }
                    return o(e, t), e.prototype.start = function() {}, e.prototype.stop = function() {
                        this.flush()
                    }, e.prototype.flush = function() {}, e.prototype.render = function(t) {}, e
                }(a.default);
            r.default = u
        }, {
            "../managers/WebGLManager": 93
        }],
        95: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var o = t("pixi-gl-core"),
                s = n(o),
                a = t("../../../utils/createIndicesForQuads"),
                u = n(a),
                h = function() {
                    function t(e, r) {
                        i(this, t), this.gl = e, this.vertices = new Float32Array([-1, -1, 1, -1, 1, 1, -1, 1]), this.uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]), this.interleaved = new Float32Array(16);
                        for (var n = 0; n < 4; n++) this.interleaved[4 * n] = this.vertices[2 * n], this.interleaved[4 * n + 1] = this.vertices[2 * n + 1], this.interleaved[4 * n + 2] = this.uvs[2 * n], this.interleaved[4 * n + 3] = this.uvs[2 * n + 1];
                        this.indices = (0, u.default)(1), this.vertexBuffer = s.default.GLBuffer.createVertexBuffer(e, this.interleaved, e.STATIC_DRAW), this.indexBuffer = s.default.GLBuffer.createIndexBuffer(e, this.indices, e.STATIC_DRAW), this.vao = new s.default.VertexArrayObject(e, r)
                    }
                    return t.prototype.initVao = function(t) {
                        this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer, t.attributes.aVertexPosition, this.gl.FLOAT, !1, 16, 0).addAttribute(this.vertexBuffer, t.attributes.aTextureCoord, this.gl.FLOAT, !1, 16, 8)
                    }, t.prototype.map = function(t, e) {
                        var r = 0,
                            n = 0;
                        return this.uvs[0] = r, this.uvs[1] = n, this.uvs[2] = r + e.width / t.width, this.uvs[3] = n, this.uvs[4] = r + e.width / t.width, this.uvs[5] = n + e.height / t.height, this.uvs[6] = r, this.uvs[7] = n + e.height / t.height, r = e.x, n = e.y, this.vertices[0] = r, this.vertices[1] = n, this.vertices[2] = r + e.width, this.vertices[3] = n, this.vertices[4] = r + e.width, this.vertices[5] = n + e.height, this.vertices[6] = r, this.vertices[7] = n + e.height, this
                    }, t.prototype.upload = function() {
                        for (var t = 0; t < 4; t++) this.interleaved[4 * t] = this.vertices[2 * t], this.interleaved[4 * t + 1] = this.vertices[2 * t + 1], this.interleaved[4 * t + 2] = this.uvs[2 * t], this.interleaved[4 * t + 3] = this.uvs[2 * t + 1];
                        return this.vertexBuffer.upload(this.interleaved), this
                    }, t.prototype.destroy = function() {
                        var t = this.gl;
                        t.deleteBuffer(this.vertexBuffer), t.deleteBuffer(this.indexBuffer)
                    }, t
                }();
            r.default = h
        }, {
            "../../../utils/createIndicesForQuads": 123,
            "pixi-gl-core": 15
        }],
        96: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("../../../math"),
                o = t("../../../const"),
                s = t("../../../settings"),
                a = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(s),
                u = t("pixi-gl-core"),
                h = function() {
                    function t(e, r, s, h, l, c) {
                        n(this, t), this.gl = e, this.frameBuffer = null, this.texture = null, this.clearColor = [0, 0, 0, 0], this.size = new i.Rectangle(0, 0, 1, 1), this.resolution = l || a.default.RESOLUTION, this.projectionMatrix = new i.Matrix, this.transform = null, this.frame = null, this.defaultFrame = new i.Rectangle, this.destinationFrame = null, this.sourceFrame = null, this.stencilBuffer = null, this.stencilMaskStack = [], this.filterData = null, this.filterPoolKey = "", this.scaleMode = void 0 !== h ? h : a.default.SCALE_MODE, this.root = c, this.root ? (this.frameBuffer = new u.GLFramebuffer(e, 100, 100), this.frameBuffer.framebuffer = null) : (this.frameBuffer = u.GLFramebuffer.createRGBA(e, 100, 100), this.scaleMode === o.SCALE_MODES.NEAREST ? this.frameBuffer.texture.enableNearestScaling() : this.frameBuffer.texture.enableLinearScaling(), this.texture = this.frameBuffer.texture), this.setFrame(), this.resize(r, s)
                    }
                    return t.prototype.clear = function(t) {
                        var e = t || this.clearColor;
                        this.frameBuffer.clear(e[0], e[1], e[2], e[3])
                    }, t.prototype.attachStencilBuffer = function() {
                        this.root || this.frameBuffer.enableStencil()
                    }, t.prototype.setFrame = function(t, e) {
                        this.destinationFrame = t || this.destinationFrame || this.defaultFrame, this.sourceFrame = e || this.sourceFrame || this.destinationFrame
                    }, t.prototype.activate = function() {
                        var t = this.gl;
                        this.frameBuffer.bind(), this.calculateProjection(this.destinationFrame, this.sourceFrame), this.transform && this.projectionMatrix.append(this.transform), this.destinationFrame !== this.sourceFrame ? (t.enable(t.SCISSOR_TEST), t.scissor(0 | this.destinationFrame.x, 0 | this.destinationFrame.y, this.destinationFrame.width * this.resolution | 0, this.destinationFrame.height * this.resolution | 0)) : t.disable(t.SCISSOR_TEST), t.viewport(0 | this.destinationFrame.x, 0 | this.destinationFrame.y, this.destinationFrame.width * this.resolution | 0, this.destinationFrame.height * this.resolution | 0)
                    }, t.prototype.calculateProjection = function(t, e) {
                        var r = this.projectionMatrix;
                        e = e || t, r.identity(), this.root ? (r.a = 1 / t.width * 2, r.d = -1 / t.height * 2, r.tx = -1 - e.x * r.a, r.ty = 1 - e.y * r.d) : (r.a = 1 / t.width * 2, r.d = 1 / t.height * 2, r.tx = -1 - e.x * r.a, r.ty = -1 - e.y * r.d)
                    }, t.prototype.resize = function(t, e) {
                        if (t |= 0, e |= 0, this.size.width !== t || this.size.height !== e) {
                            this.size.width = t, this.size.height = e, this.defaultFrame.width = t, this.defaultFrame.height = e, this.frameBuffer.resize(t * this.resolution, e * this.resolution);
                            var r = this.frame || this.size;
                            this.calculateProjection(r)
                        }
                    }, t.prototype.destroy = function() {
                        this.frameBuffer.destroy(), this.frameBuffer = null, this.texture = null
                    }, t
                }();
            r.default = h
        }, {
            "../../../const": 46,
            "../../../math": 70,
            "../../../settings": 101,
            "pixi-gl-core": 15
        }],
        97: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                var r = !e;
                if (r) {
                    var n = document.createElement("canvas");
                    n.width = 1, n.height = 1, e = s.default.createContext(n)
                }
                for (var o = e.createShader(e.FRAGMENT_SHADER);;) {
                    var u = a.replace(/%forloop%/gi, i(t));
                    if (e.shaderSource(o, u), e.compileShader(o), e.getShaderParameter(o, e.COMPILE_STATUS)) break;
                    t = t / 2 | 0
                }
                return r && e.getExtension("WEBGL_lose_context") && e.getExtension("WEBGL_lose_context").loseContext(), t
            }

            function i(t) {
                for (var e = "", r = 0; r < t; ++r) r > 0 && (e += "\nelse "), r < t - 1 && (e += "if(test == " + r + ".0){}");
                return e
            }
            r.__esModule = !0, r.default = n;
            var o = t("pixi-gl-core"),
                s = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(o),
                a = ["precision mediump float;", "void main(void){", "float test = 0.1;", "%forloop%", "gl_FragColor = vec4(0.0);", "}"].join("\n")
        }, {
            "pixi-gl-core": 15
        }],
        98: [function(t, e, r) {
            "use strict";

            function n(t) {
                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [];
                return e[i.BLEND_MODES.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.ADD] = [t.ONE, t.DST_ALPHA], e[i.BLEND_MODES.MULTIPLY] = [t.DST_COLOR, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.SCREEN] = [t.ONE, t.ONE_MINUS_SRC_COLOR], e[i.BLEND_MODES.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.NORMAL_NPM] = [t.SRC_ALPHA, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA], e[i.BLEND_MODES.ADD_NPM] = [t.SRC_ALPHA, t.DST_ALPHA, t.ONE, t.DST_ALPHA], e[i.BLEND_MODES.SCREEN_NPM] = [t.SRC_ALPHA, t.ONE_MINUS_SRC_COLOR, t.ONE, t.ONE_MINUS_SRC_COLOR], e
            }
            r.__esModule = !0, r.default = n;
            var i = t("../../../const")
        }, {
            "../../../const": 46
        }],
        99: [function(t, e, r) {
            "use strict";

            function n(t) {
                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                return e[i.DRAW_MODES.POINTS] = t.POINTS, e[i.DRAW_MODES.LINES] = t.LINES, e[i.DRAW_MODES.LINE_LOOP] = t.LINE_LOOP, e[i.DRAW_MODES.LINE_STRIP] = t.LINE_STRIP, e[i.DRAW_MODES.TRIANGLES] = t.TRIANGLES, e[i.DRAW_MODES.TRIANGLE_STRIP] = t.TRIANGLE_STRIP, e[i.DRAW_MODES.TRIANGLE_FAN] = t.TRIANGLE_FAN, e
            }
            r.__esModule = !0, r.default = n;
            var i = t("../../../const")
        }, {
            "../../../const": 46
        }],
        100: [function(t, e, r) {
            "use strict";

            function n(t) {
                t.getContextAttributes().stencil || console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")
            }
            r.__esModule = !0, r.default = n
        }, {}],
        101: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            r.__esModule = !0;
            var i = t("./utils/maxRecommendedTextures"),
                o = n(i),
                s = t("./utils/canUploadSameBuffer"),
                a = n(s);
            r.default = {
                TARGET_FPMS: .06,
                MIPMAP_TEXTURES: !0,
                RESOLUTION: 1,
                FILTER_RESOLUTION: 1,
                SPRITE_MAX_TEXTURES: (0, o.default)(32),
                SPRITE_BATCH_SIZE: 4096,
                RETINA_PREFIX: /@([0-9\.]+)x/,
                RENDER_OPTIONS: {
                    view: null,
                    antialias: !1,
                    forceFXAA: !1,
                    autoResize: !1,
                    transparent: !1,
                    backgroundColor: 0,
                    clearBeforeRender: !0,
                    preserveDrawingBuffer: !1,
                    roundPixels: !1,
                    width: 800,
                    height: 600,
                    legacy: !1
                },
                TRANSFORM_MODE: 0,
                GC_MODE: 0,
                GC_MAX_IDLE: 3600,
                GC_MAX_CHECK_COUNT: 600,
                WRAP_MODE: 0,
                SCALE_MODE: 0,
                PRECISION_VERTEX: "highp",
                PRECISION_FRAGMENT: "mediump",
                CAN_UPLOAD_SAME_BUFFER: (0, a.default)(),
                MESH_CANVAS_PADDING: 0
            }
        }, {
            "./utils/canUploadSameBuffer": 122,
            "./utils/maxRecommendedTextures": 127
        }],
        102: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                u = t("../math"),
                h = t("../utils"),
                l = t("../const"),
                c = t("../textures/Texture"),
                d = n(c),
                f = t("../display/Container"),
                p = n(f),
                v = new u.Point,
                g = function(t) {
                    function e(r) {
                        i(this, e);
                        var n = o(this, t.call(this));
                        return n._anchor = new u.ObservablePoint(n._onAnchorUpdate, n, r ? r.defaultAnchor.x : 0, r ? r.defaultAnchor.y : 0), n._texture = null, n._width = 0, n._height = 0, n._tint = null, n._tintRGB = null, n.tint = 16777215, n.blendMode = l.BLEND_MODES.NORMAL, n.shader = null, n.cachedTint = 16777215, n.texture = r || d.default.EMPTY, n.vertexData = new Float32Array(8), n.vertexTrimmedData = null, n._transformID = -1, n._textureID = -1, n._transformTrimmedID = -1, n._textureTrimmedID = -1, n.pluginName = "sprite", n
                    }
                    return s(e, t), e.prototype._onTextureUpdate = function() {
                        this._textureID = -1, this._textureTrimmedID = -1, this.cachedTint = 16777215, this._width && (this.scale.x = (0, h.sign)(this.scale.x) * this._width / this._texture.orig.width), this._height && (this.scale.y = (0, h.sign)(this.scale.y) * this._height / this._texture.orig.height)
                    }, e.prototype._onAnchorUpdate = function() {
                        this._transformID = -1, this._transformTrimmedID = -1
                    }, e.prototype.calculateVertices = function() {
                        if (this._transformID !== this.transform._worldID || this._textureID !== this._texture._updateID) {
                            this._transformID = this.transform._worldID, this._textureID = this._texture._updateID;
                            var t = this._texture,
                                e = this.transform.worldTransform,
                                r = e.a,
                                n = e.b,
                                i = e.c,
                                o = e.d,
                                s = e.tx,
                                a = e.ty,
                                u = this.vertexData,
                                h = t.trim,
                                l = t.orig,
                                c = this._anchor,
                                d = 0,
                                f = 0,
                                p = 0,
                                v = 0;
                            h ? (f = h.x - c._x * l.width, d = f + h.width, v = h.y - c._y * l.height, p = v + h.height) : (f = -c._x * l.width, d = f + l.width, v = -c._y * l.height, p = v + l.height), u[0] = r * f + i * v + s, u[1] = o * v + n * f + a, u[2] = r * d + i * v + s, u[3] = o * v + n * d + a, u[4] = r * d + i * p + s, u[5] = o * p + n * d + a, u[6] = r * f + i * p + s, u[7] = o * p + n * f + a
                        }
                    }, e.prototype.calculateTrimmedVertices = function() {
                        if (this.vertexTrimmedData) {
                            if (this._transformTrimmedID === this.transform._worldID && this._textureTrimmedID === this._texture._updateID) return
                        } else this.vertexTrimmedData = new Float32Array(8);
                        this._transformTrimmedID = this.transform._worldID, this._textureTrimmedID = this._texture._updateID;
                        var t = this._texture,
                            e = this.vertexTrimmedData,
                            r = t.orig,
                            n = this._anchor,
                            i = this.transform.worldTransform,
                            o = i.a,
                            s = i.b,
                            a = i.c,
                            u = i.d,
                            h = i.tx,
                            l = i.ty,
                            c = -n._x * r.width,
                            d = c + r.width,
                            f = -n._y * r.height,
                            p = f + r.height;
                        e[0] = o * c + a * f + h, e[1] = u * f + s * c + l, e[2] = o * d + a * f + h, e[3] = u * f + s * d + l, e[4] = o * d + a * p + h, e[5] = u * p + s * d + l, e[6] = o * c + a * p + h, e[7] = u * p + s * c + l
                    }, e.prototype._renderWebGL = function(t) {
                        this.calculateVertices(), t.setObjectRenderer(t.plugins[this.pluginName]), t.plugins[this.pluginName].render(this)
                    }, e.prototype._renderCanvas = function(t) {
                        t.plugins[this.pluginName].render(this)
                    }, e.prototype._calculateBounds = function() {
                        var t = this._texture.trim,
                            e = this._texture.orig;
                        !t || t.width === e.width && t.height === e.height ? (this.calculateVertices(), this._bounds.addQuad(this.vertexData)) : (this.calculateTrimmedVertices(), this._bounds.addQuad(this.vertexTrimmedData))
                    }, e.prototype.getLocalBounds = function(e) {
                        return 0 === this.children.length ? (this._bounds.minX = this._texture.orig.width * -this._anchor._x, this._bounds.minY = this._texture.orig.height * -this._anchor._y, this._bounds.maxX = this._texture.orig.width * (1 - this._anchor._x), this._bounds.maxY = this._texture.orig.height * (1 - this._anchor._y), e || (this._localBoundsRect || (this._localBoundsRect = new u.Rectangle), e = this._localBoundsRect), this._bounds.getRectangle(e)) : t.prototype.getLocalBounds.call(this, e)
                    }, e.prototype.containsPoint = function(t) {
                        this.worldTransform.applyInverse(t, v);
                        var e = this._texture.orig.width,
                            r = this._texture.orig.height,
                            n = -e * this.anchor.x,
                            i = 0;
                        return v.x >= n && v.x < n + e && (i = -r * this.anchor.y, v.y >= i && v.y < i + r)
                    }, e.prototype.destroy = function(e) {
                        if (t.prototype.destroy.call(this, e), this._texture.off("update", this._onTextureUpdate, this), this._anchor = null, "boolean" == typeof e ? e : e && e.texture) {
                            var r = "boolean" == typeof e ? e : e && e.baseTexture;
                            this._texture.destroy(!!r)
                        }
                        this._texture = null, this.shader = null
                    }, e.from = function(t) {
                        return new e(d.default.from(t))
                    }, e.fromFrame = function(t) {
                        var r = h.TextureCache[t];
                        if (!r) throw new Error('The frameId "' + t + '" does not exist in the texture cache');
                        return new e(r)
                    }, e.fromImage = function(t, r, n) {
                        return new e(d.default.fromImage(t, r, n))
                    }, a(e, [{
                        key: "width",
                        get: function() {
                            return Math.abs(this.scale.x) * this._texture.orig.width
                        },
                        set: function(t) {
                            var e = (0, h.sign)(this.scale.x) || 1;
                            this.scale.x = e * t / this._texture.orig.width, this._width = t
                        }
                    }, {
                        key: "height",
                        get: function() {
                            return Math.abs(this.scale.y) * this._texture.orig.height
                        },
                        set: function(t) {
                            var e = (0, h.sign)(this.scale.y) || 1;
                            this.scale.y = e * t / this._texture.orig.height, this._height = t
                        }
                    }, {
                        key: "anchor",
                        get: function() {
                            return this._anchor
                        },
                        set: function(t) {
                            this._anchor.copy(t)
                        }
                    }, {
                        key: "tint",
                        get: function() {
                            return this._tint
                        },
                        set: function(t) {
                            this._tint = t, this._tintRGB = (t >> 16) + (65280 & t) + ((255 & t) << 16)
                        }
                    }, {
                        key: "texture",
                        get: function() {
                            return this._texture
                        },
                        set: function(t) {
                            this._texture !== t && (this._texture = t || d.default.EMPTY, this.cachedTint = 16777215, this._textureID = -1, this._textureTrimmedID = -1, t && (t.baseTexture.hasLoaded ? this._onTextureUpdate() : t.once("update", this._onTextureUpdate, this)))
                        }
                    }]), e
                }(p.default);
            r.default = g
        }, {
            "../const": 46,
            "../display/Container": 48,
            "../math": 70,
            "../textures/Texture": 115,
            "../utils": 125
        }],
        103: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var o = t("../../renderers/canvas/CanvasRenderer"),
                s = n(o),
                a = t("../../const"),
                u = t("../../math"),
                h = t("./CanvasTinter"),
                l = n(h),
                c = new u.Matrix,
                d = function() {
                    function t(e) {
                        i(this, t), this.renderer = e
                    }
                    return t.prototype.render = function(t) {
                        var e = t._texture,
                            r = this.renderer,
                            n = e._frame.width,
                            i = e._frame.height,
                            o = t.transform.worldTransform,
                            s = 0,
                            h = 0;
                        if (!(e.orig.width <= 0 || e.orig.height <= 0) && e.baseTexture.source && (r.setBlendMode(t.blendMode), e.valid)) {
                            r.context.globalAlpha = t.worldAlpha;
                            var d = e.baseTexture.scaleMode === a.SCALE_MODES.LINEAR;
                            r.smoothProperty && r.context[r.smoothProperty] !== d && (r.context[r.smoothProperty] = d), e.trim ? (s = e.trim.width / 2 + e.trim.x - t.anchor.x * e.orig.width, h = e.trim.height / 2 + e.trim.y - t.anchor.y * e.orig.height) : (s = (.5 - t.anchor.x) * e.orig.width, h = (.5 - t.anchor.y) * e.orig.height), e.rotate && (o.copy(c), o = c, u.GroupD8.matrixAppendRotationInv(o, e.rotate, s, h), s = 0, h = 0), s -= n / 2, h -= i / 2, r.roundPixels ? (r.context.setTransform(o.a, o.b, o.c, o.d, o.tx * r.resolution | 0, o.ty * r.resolution | 0), s |= 0, h |= 0) : r.context.setTransform(o.a, o.b, o.c, o.d, o.tx * r.resolution, o.ty * r.resolution);
                            var f = e.baseTexture.resolution;
                            16777215 !== t.tint ? (t.cachedTint === t.tint && t.tintedTexture.tintId === t._texture._updateID || (t.cachedTint = t.tint, t.tintedTexture = l.default.getTintedTexture(t, t.tint)), r.context.drawImage(t.tintedTexture, 0, 0, n * f, i * f, s * r.resolution, h * r.resolution, n * r.resolution, i * r.resolution)) : r.context.drawImage(e.baseTexture.source, e._frame.x * f, e._frame.y * f, n * f, i * f, s * r.resolution, h * r.resolution, n * r.resolution, i * r.resolution)
                        }
                    }, t.prototype.destroy = function() {
                        this.renderer = null
                    }, t
                }();
            r.default = d, s.default.registerPlugin("sprite", d)
        }, {
            "../../const": 46,
            "../../math": 70,
            "../../renderers/canvas/CanvasRenderer": 77,
            "./CanvasTinter": 104
        }],
        104: [function(t, e, r) {
            "use strict";
            r.__esModule = !0;
            var n = t("../../utils"),
                i = t("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i),
                s = {
                    getTintedTexture: function(t, e) {
                        var r = t._texture;
                        e = s.roundColor(e);
                        var n = "#" + ("00000" + (0 | e).toString(16)).substr(-6);
                        r.tintCache = r.tintCache || {};
                        var i = r.tintCache[n],
                            o = void 0;
                        if (i) {
                            if (i.tintId === r._updateID) return r.tintCache[n];
                            o = r.tintCache[n]
                        } else o = s.canvas || document.createElement("canvas");
                        if (s.tintMethod(r, e, o), o.tintId = r._updateID, s.convertTintToImage) {
                            var a = new Image;
                            a.src = o.toDataURL(), r.tintCache[n] = a
                        } else r.tintCache[n] = o, s.canvas = null;
                        return o
                    },
                    tintWithMultiply: function(t, e, r) {
                        var n = r.getContext("2d"),
                            i = t._frame.clone(),
                            o = t.baseTexture.resolution;
                        i.x *= o, i.y *= o, i.width *= o, i.height *= o, r.width = Math.ceil(i.width), r.height = Math.ceil(i.height), n.save(), n.fillStyle = "#" + ("00000" + (0 | e).toString(16)).substr(-6), n.fillRect(0, 0, i.width, i.height), n.globalCompositeOperation = "multiply", n.drawImage(t.baseTexture.source, i.x, i.y, i.width, i.height, 0, 0, i.width, i.height), n.globalCompositeOperation = "destination-atop", n.drawImage(t.baseTexture.source, i.x, i.y, i.width, i.height, 0, 0, i.width, i.height), n.restore()
                    },
                    tintWithOverlay: function(t, e, r) {
                        var n = r.getContext("2d"),
                            i = t._frame.clone(),
                            o = t.baseTexture.resolution;
                        i.x *= o, i.y *= o, i.width *= o, i.height *= o, r.width = Math.ceil(i.width), r.height = Math.ceil(i.height), n.save(), n.globalCompositeOperation = "copy", n.fillStyle = "#" + ("00000" + (0 | e).toString(16)).substr(-6), n.fillRect(0, 0, i.width, i.height), n.globalCompositeOperation = "destination-atop", n.drawImage(t.baseTexture.source, i.x, i.y, i.width, i.height, 0, 0, i.width, i.height), n.restore()
                    },
                    tintWithPerPixel: function(t, e, r) {
                        var i = r.getContext("2d"),
                            o = t._frame.clone(),
                            s = t.baseTexture.resolution;
                        o.x *= s, o.y *= s, o.width *= s, o.height *= s, r.width = Math.ceil(o.width), r.height = Math.ceil(o.height), i.save(), i.globalCompositeOperation = "copy", i.drawImage(t.baseTexture.source, o.x, o.y, o.width, o.height, 0, 0, o.width, o.height), i.restore();
                        for (var a = (0, n.hex2rgb)(e), u = a[0], h = a[1], l = a[2], c = i.getImageData(0, 0, o.width, o.height), d = c.data, f = 0; f < d.length; f += 4) d[f + 0] *= u, d[f + 1] *= h, d[f + 2] *= l;
                        i.putImageData(c, 0, 0)
                    },
                    roundColor: function(t) {
                        var e = s.cacheStepsPerColorChannel,
                            r = (0, n.hex2rgb)(t);
                        return r[0] = Math.min(255, r[0] / e * e), r[1] = Math.min(255, r[1] / e * e), r[2] = Math.min(255, r[2] / e * e), (0, n.rgb2hex)(r)
                    },
                    cacheStepsPerColorChannel: 8,
                    convertTintToImage: !1,
                    canUseMultiply: (0, o.default)(),
                    tintMethod: 0
                };
            s.tintMethod = s.canUseMultiply ? s.tintWithMultiply : s.tintWithPerPixel, r.default = s
        }, {
            "../../renderers/canvas/utils/canUseNewCanvasBlendModes": 80,
            "../../utils": 125
        }],
        105: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                function t(e) {
                    n(this, t), this.vertices = new ArrayBuffer(e), this.float32View = new Float32Array(this.vertices), this.uint32View = new Uint32Array(this.vertices)
                }
                return t.prototype.destroy = function() {
                    this.vertices = null, this.positions = null, this.uvs = null, this.colors = null
                }, t
            }();
            r.default = i
        }, {}],
        106: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("../../renderers/webgl/utils/ObjectRenderer"),
                u = n(a),
                h = t("../../renderers/webgl/WebGLRenderer"),
                l = n(h),
                c = t("../../utils/createIndicesForQuads"),
                d = n(c),
                f = t("./generateMultiTextureShader"),
                p = n(f),
                v = t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),
                g = n(v),
                y = t("./BatchBuffer"),
                m = n(y),
                _ = t("../../settings"),
                b = n(_),
                x = t("../../utils"),
                T = t("pixi-gl-core"),
                w = n(T),
                E = t("bit-twiddle"),
                S = n(E),
                O = 0,
                M = 0,
                P = function(t) {
                    function e(r) {
                        i(this, e);
                        var n = o(this, t.call(this, r));
                        n.vertSize = 5, n.vertByteSize = 4 * n.vertSize, n.size = b.default.SPRITE_BATCH_SIZE, n.buffers = [];
                        for (var s = 1; s <= S.default.nextPow2(n.size); s *= 2) n.buffers.push(new m.default(4 * s * n.vertByteSize));
                        n.indices = (0, d.default)(n.size), n.shader = null, n.currentIndex = 0, n.groups = [];
                        for (var a = 0; a < n.size; a++) n.groups[a] = {
                            textures: [],
                            textureCount: 0,
                            ids: [],
                            size: 0,
                            start: 0,
                            blend: 0
                        };
                        return n.sprites = [], n.vertexBuffers = [], n.vaos = [], n.vaoMax = 2, n.vertexCount = 0, n.renderer.on("prerender", n.onPrerender, n), n
                    }
                    return s(e, t), e.prototype.onContextChange = function() {
                        var t = this.renderer.gl;
                        this.renderer.legacy ? this.MAX_TEXTURES = 1 : (this.MAX_TEXTURES = Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS), b.default.SPRITE_MAX_TEXTURES), this.MAX_TEXTURES = (0, g.default)(this.MAX_TEXTURES, t)), this.shader = (0, p.default)(t, this.MAX_TEXTURES), this.indexBuffer = w.default.GLBuffer.createIndexBuffer(t, this.indices, t.STATIC_DRAW), this.renderer.bindVao(null);
                        for (var e = this.shader.attributes, r = 0; r < this.vaoMax; r++) {
                            var n = this.vertexBuffers[r] = w.default.GLBuffer.createVertexBuffer(t, null, t.STREAM_DRAW),
                                i = this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n, e.aVertexPosition, t.FLOAT, !1, this.vertByteSize, 0).addAttribute(n, e.aTextureCoord, t.UNSIGNED_SHORT, !0, this.vertByteSize, 8).addAttribute(n, e.aColor, t.UNSIGNED_BYTE, !0, this.vertByteSize, 12);
                            e.aTextureId && i.addAttribute(n, e.aTextureId, t.FLOAT, !1, this.vertByteSize, 16), this.vaos[r] = i
                        }
                        this.vao = this.vaos[0], this.currentBlendMode = 99999, this.boundTextures = new Array(this.MAX_TEXTURES)
                    }, e.prototype.onPrerender = function() {
                        this.vertexCount = 0
                    }, e.prototype.render = function(t) {
                        this.currentIndex >= this.size && this.flush(), t._texture._uvs && (this.sprites[this.currentIndex++] = t)
                    }, e.prototype.flush = function() {
                        if (0 !== this.currentIndex) {
                            var t = this.renderer.gl,
                                e = this.MAX_TEXTURES,
                                r = S.default.nextPow2(this.currentIndex),
                                n = S.default.log2(r),
                                i = this.buffers[n],
                                o = this.sprites,
                                s = this.groups,
                                a = i.float32View,
                                u = i.uint32View,
                                h = this.boundTextures,
                                l = this.renderer.boundTextures,
                                c = this.renderer.textureGC.count,
                                d = 0,
                                f = void 0,
                                p = void 0,
                                v = 1,
                                g = 0,
                                y = s[0],
                                m = void 0,
                                _ = void 0,
                                T = x.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha ? 1 : 0][o[0].blendMode];
                            y.textureCount = 0, y.start = 0, y.blend = T, O++;
                            var E = void 0;
                            for (E = 0; E < e; ++E) {
                                var P = l[E];
                                P._enabled !== O ? (h[E] = P, P._virtalBoundId = E, P._enabled = O) : h[E] = this.renderer.emptyTextures[E]
                            }
                            for (O++,
                                E = 0; E < this.currentIndex; ++E) {
                                var C = o[E];
                                o[E] = null, f = C._texture.baseTexture;
                                var R = x.premultiplyBlendMode[Number(f.premultipliedAlpha)][C.blendMode];
                                if (T !== R && (T = R, p = null, g = e, O++), p !== f && (p = f, f._enabled !== O)) {
                                    if (g === e && (O++, y.size = E - y.start, g = 0, y = s[v++], y.blend = T, y.textureCount = 0, y.start = E), f.touched = c, -1 === f._virtalBoundId)
                                        for (var A = 0; A < e; ++A) {
                                            var I = (A + M) % e,
                                                D = h[I];
                                            if (D._enabled !== O) {
                                                M++, D._virtalBoundId = -1, f._virtalBoundId = I, h[I] = f;
                                                break
                                            }
                                        }
                                    f._enabled = O, y.textureCount++, y.ids[g] = f._virtalBoundId, y.textures[g++] = f
                                }
                                if (m = C.vertexData, _ = C._texture._uvs.uvsUint32, this.renderer.roundPixels) {
                                    var L = this.renderer.resolution;
                                    a[d] = (m[0] * L | 0) / L, a[d + 1] = (m[1] * L | 0) / L, a[d + 5] = (m[2] * L | 0) / L, a[d + 6] = (m[3] * L | 0) / L, a[d + 10] = (m[4] * L | 0) / L, a[d + 11] = (m[5] * L | 0) / L, a[d + 15] = (m[6] * L | 0) / L, a[d + 16] = (m[7] * L | 0) / L
                                } else a[d] = m[0], a[d + 1] = m[1], a[d + 5] = m[2], a[d + 6] = m[3], a[d + 10] = m[4], a[d + 11] = m[5], a[d + 15] = m[6], a[d + 16] = m[7];
                                u[d + 2] = _[0], u[d + 7] = _[1], u[d + 12] = _[2], u[d + 17] = _[3];
                                var N = Math.min(C.worldAlpha, 1),
                                    B = N < 1 && f.premultipliedAlpha ? (0, x.premultiplyTint)(C._tintRGB, N) : C._tintRGB + (255 * N << 24);
                                u[d + 3] = u[d + 8] = u[d + 13] = u[d + 18] = B, a[d + 4] = a[d + 9] = a[d + 14] = a[d + 19] = f._virtalBoundId, d += 20
                            }
                            if (y.size = E - y.start, b.default.CAN_UPLOAD_SAME_BUFFER) this.vertexBuffers[this.vertexCount].upload(i.vertices, 0, !0);
                            else {
                                if (this.vaoMax <= this.vertexCount) {
                                    this.vaoMax++;
                                    var F = this.shader.attributes,
                                        k = this.vertexBuffers[this.vertexCount] = w.default.GLBuffer.createVertexBuffer(t, null, t.STREAM_DRAW),
                                        j = this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(k, F.aVertexPosition, t.FLOAT, !1, this.vertByteSize, 0).addAttribute(k, F.aTextureCoord, t.UNSIGNED_SHORT, !0, this.vertByteSize, 8).addAttribute(k, F.aColor, t.UNSIGNED_BYTE, !0, this.vertByteSize, 12);
                                    F.aTextureId && j.addAttribute(k, F.aTextureId, t.FLOAT, !1, this.vertByteSize, 16), this.vaos[this.vertexCount] = j
                                }
                                this.renderer.bindVao(this.vaos[this.vertexCount]), this.vertexBuffers[this.vertexCount].upload(i.vertices, 0, !1), this.vertexCount++
                            }
                            for (E = 0; E < e; ++E) l[E]._virtalBoundId = -1;
                            for (E = 0; E < v; ++E) {
                                for (var U = s[E], X = U.textureCount, G = 0; G < X; G++) p = U.textures[G], l[U.ids[G]] !== p && this.renderer.bindTexture(p, U.ids[G], !0), p._virtalBoundId = -1;
                                this.renderer.state.setBlendMode(U.blend), t.drawElements(t.TRIANGLES, 6 * U.size, t.UNSIGNED_SHORT, 6 * U.start * 2)
                            }
                            this.currentIndex = 0
                        }
                    }, e.prototype.start = function() {
                        this.renderer.bindShader(this.shader), b.default.CAN_UPLOAD_SAME_BUFFER && (this.renderer.bindVao(this.vaos[this.vertexCount]), this.vertexBuffers[this.vertexCount].bind())
                    }, e.prototype.stop = function() {
                        this.flush()
                    }, e.prototype.destroy = function() {
                        for (var e = 0; e < this.vaoMax; e++) this.vertexBuffers[e] && this.vertexBuffers[e].destroy(), this.vaos[e] && this.vaos[e].destroy();
                        this.indexBuffer && this.indexBuffer.destroy(), this.renderer.off("prerender", this.onPrerender, this), t.prototype.destroy.call(this), this.shader && (this.shader.destroy(), this.shader = null), this.vertexBuffers = null, this.vaos = null, this.indexBuffer = null, this.indices = null, this.sprites = null;
                        for (var r = 0; r < this.buffers.length; ++r) this.buffers[r].destroy()
                    }, e
                }(u.default);
            r.default = P, l.default.registerPlugin("sprite", P)
        }, {
            "../../renderers/webgl/WebGLRenderer": 84,
            "../../renderers/webgl/utils/ObjectRenderer": 94,
            "../../renderers/webgl/utils/checkMaxIfStatmentsInShader": 97,
            "../../settings": 101,
            "../../utils": 125,
            "../../utils/createIndicesForQuads": 123,
            "./BatchBuffer": 105,
            "./generateMultiTextureShader": 107,
            "bit-twiddle": 1,
            "pixi-gl-core": 15
        }],
        107: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                var r = a;
                r = r.replace(/%count%/gi, e), r = r.replace(/%forloop%/gi, i(e));
                for (var n = new s.default(t, "precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n", r), o = [], u = 0; u < e; u++) o[u] = u;
                return n.bind(), n.uniforms.uSamplers = o, n
            }

            function i(t) {
                var e = "";
                e += "\n", e += "\n";
                for (var r = 0; r < t; r++) r > 0 && (e += "\nelse "), r < t - 1 && (e += "if(textureId == " + r + ".0)"), e += "\n{", e += "\n\tcolor = texture2D(uSamplers[" + r + "], vTextureCoord);", e += "\n}";
                return e += "\n", e += "\n"
            }
            r.__esModule = !0, r.default = n;
            var o = t("../../Shader"),
                s = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(o),
                a = (t("path"), ["varying vec2 vTextureCoord;", "varying vec4 vColor;", "varying float vTextureId;", "uniform sampler2D uSamplers[%count%];", "void main(void){", "vec4 color;", "float textureId = floor(vTextureId+0.5);", "%forloop%", "gl_FragColor = color * vColor;", "}"].join("\n"))
        }, {
            "../../Shader": 44,
            path: 8
        }],
        108: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                u = t("../sprites/Sprite"),
                h = n(u),
                l = t("../textures/Texture"),
                c = n(l),
                d = t("../math"),
                f = t("../utils"),
                p = t("../const"),
                v = t("../settings"),
                g = n(v),
                y = t("./TextStyle"),
                m = n(y),
                _ = t("./TextMetrics"),
                b = n(_),
                x = t("../utils/trimCanvas"),
                T = n(x),
                w = {
                    texture: !0,
                    children: !1,
                    baseTexture: !0
                },
                E = function(t) {
                    function e(r, n, s) {
                        i(this, e), s = s || document.createElement("canvas"), s.width = 3, s.height = 3;
                        var a = c.default.fromCanvas(s, g.default.SCALE_MODE, "text");
                        a.orig = new d.Rectangle, a.trim = new d.Rectangle;
                        var u = o(this, t.call(this, a));
                        return c.default.addToCache(u._texture, u._texture.baseTexture.textureCacheIds[0]), u.canvas = s, u.context = u.canvas.getContext("2d"), u.resolution = g.default.RESOLUTION, u._text = null, u._style = null, u._styleListener = null, u._font = "", u.text = r, u.style = n, u.localStyleID = -1, u
                    }
                    return s(e, t), e.prototype.updateText = function(t) {
                        var e = this._style;
                        if (this.localStyleID !== e.styleID && (this.dirty = !0, this.localStyleID = e.styleID), this.dirty || !t) {
                            this._font = this._style.toFontString();
                            var r = this.context,
                                n = b.default.measureText(this._text, this._style, this._style.wordWrap, this.canvas),
                                i = n.width,
                                o = n.height,
                                s = n.lines,
                                a = n.lineHeight,
                                u = n.lineWidths,
                                h = n.maxLineWidth,
                                l = n.fontProperties;
                            this.canvas.width = Math.ceil((Math.max(1, i) + 2 * e.padding) * this.resolution), this.canvas.height = Math.ceil((Math.max(1, o) + 2 * e.padding) * this.resolution), r.scale(this.resolution, this.resolution), r.clearRect(0, 0, this.canvas.width, this.canvas.height), r.font = this._font, r.strokeStyle = e.stroke, r.lineWidth = e.strokeThickness, r.textBaseline = e.textBaseline, r.lineJoin = e.lineJoin, r.miterLimit = e.miterLimit;
                            var c = void 0,
                                d = void 0;
                            if (e.dropShadow) {
                                r.fillStyle = e.dropShadowColor, r.globalAlpha = e.dropShadowAlpha, r.shadowBlur = e.dropShadowBlur, e.dropShadowBlur > 0 && (r.shadowColor = e.dropShadowColor);
                                for (var f = Math.cos(e.dropShadowAngle) * e.dropShadowDistance, p = Math.sin(e.dropShadowAngle) * e.dropShadowDistance, v = 0; v < s.length; v++) c = e.strokeThickness / 2, d = e.strokeThickness / 2 + v * a + l.ascent, "right" === e.align ? c += h - u[v] : "center" === e.align && (c += (h - u[v]) / 2), e.fill && (this.drawLetterSpacing(s[v], c + f + e.padding, d + p + e.padding), e.stroke && e.strokeThickness && (r.strokeStyle = e.dropShadowColor, this.drawLetterSpacing(s[v], c + f + e.padding, d + p + e.padding, !0), r.strokeStyle = e.stroke))
                            }
                            r.shadowBlur = 0, r.globalAlpha = 1, r.fillStyle = this._generateFillStyle(e, s);
                            for (var g = 0; g < s.length; g++) c = e.strokeThickness / 2, d = e.strokeThickness / 2 + g * a + l.ascent, "right" === e.align ? c += h - u[g] : "center" === e.align && (c += (h - u[g]) / 2), e.stroke && e.strokeThickness && this.drawLetterSpacing(s[g], c + e.padding, d + e.padding, !0), e.fill && this.drawLetterSpacing(s[g], c + e.padding, d + e.padding);
                            this.updateTexture()
                        }
                    }, e.prototype.drawLetterSpacing = function(t, e, r) {
                        var n = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
                            i = this._style,
                            o = i.letterSpacing;
                        if (0 === o) return void(n ? this.context.strokeText(t, e, r) : this.context.fillText(t, e, r));
                        for (var s = String.prototype.split.call(t, ""), a = e, u = 0, h = ""; u < t.length;) h = s[u++], n ? this.context.strokeText(h, a, r) : this.context.fillText(h, a, r), a += this.context.measureText(h).width + o
                    }, e.prototype.updateTexture = function() {
                        var t = this.canvas;
                        if (this._style.trim) {
                            var e = (0, T.default)(t);
                            e.data && (t.width = e.width, t.height = e.height, this.context.putImageData(e.data, 0, 0))
                        }
                        var r = this._texture,
                            n = this._style,
                            i = n.trim ? 0 : n.padding,
                            o = r.baseTexture;
                        o.hasLoaded = !0, o.resolution = this.resolution, o.realWidth = t.width, o.realHeight = t.height, o.width = t.width / this.resolution, o.height = t.height / this.resolution, r.trim.width = r._frame.width = t.width / this.resolution, r.trim.height = r._frame.height = t.height / this.resolution, r.trim.x = -i, r.trim.y = -i, r.orig.width = r._frame.width - 2 * i, r.orig.height = r._frame.height - 2 * i, this._onTextureUpdate(), o.emit("update", o), this.dirty = !1
                    }, e.prototype.renderWebGL = function(e) {
                        this.resolution !== e.resolution && (this.resolution = e.resolution, this.dirty = !0), this.updateText(!0), t.prototype.renderWebGL.call(this, e)
                    }, e.prototype._renderCanvas = function(e) {
                        this.resolution !== e.resolution && (this.resolution = e.resolution, this.dirty = !0), this.updateText(!0), t.prototype._renderCanvas.call(this, e)
                    }, e.prototype.getLocalBounds = function(e) {
                        return this.updateText(!0), t.prototype.getLocalBounds.call(this, e)
                    }, e.prototype._calculateBounds = function() {
                        this.updateText(!0), this.calculateVertices(), this._bounds.addQuad(this.vertexData)
                    }, e.prototype._onStyleChange = function() {
                        this.dirty = !0
                    }, e.prototype._generateFillStyle = function(t, e) {
                        if (!Array.isArray(t.fill)) return t.fill;
                        if (navigator.isCocoonJS) return t.fill[0];
                        var r = void 0,
                            n = void 0,
                            i = void 0,
                            o = void 0,
                            s = this.canvas.width / this.resolution,
                            a = this.canvas.height / this.resolution,
                            u = t.fill.slice(),
                            h = t.fillGradientStops.slice();
                        if (!h.length)
                            for (var l = u.length + 1, c = 1; c < l; ++c) h.push(c / l);
                        if (u.unshift(t.fill[0]), h.unshift(0), u.push(t.fill[t.fill.length - 1]), h.push(1), t.fillGradientType === p.TEXT_GRADIENT.LINEAR_VERTICAL) {
                            r = this.context.createLinearGradient(s / 2, 0, s / 2, a), n = (u.length + 1) * e.length, i = 0;
                            for (var d = 0; d < e.length; d++) {
                                i += 1;
                                for (var f = 0; f < u.length; f++) o = "number" == typeof h[f] ? h[f] / e.length + d / e.length : i / n, r.addColorStop(o, u[f]), i++
                            }
                        } else {
                            r = this.context.createLinearGradient(0, a / 2, s, a / 2), n = u.length + 1, i = 1;
                            for (var v = 0; v < u.length; v++) o = "number" == typeof h[v] ? h[v] : i / n, r.addColorStop(o, u[v]), i++
                        }
                        return r
                    }, e.prototype.destroy = function(e) {
                        "boolean" == typeof e && (e = {
                            children: e
                        }), e = Object.assign({}, w, e), t.prototype.destroy.call(this, e), this.context = null, this.canvas = null, this._style = null
                    }, a(e, [{
                        key: "width",
                        get: function() {
                            return this.updateText(!0), Math.abs(this.scale.x) * this._texture.orig.width
                        },
                        set: function(t) {
                            this.updateText(!0);
                            var e = (0, f.sign)(this.scale.x) || 1;
                            this.scale.x = e * t / this._texture.orig.width, this._width = t
                        }
                    }, {
                        key: "height",
                        get: function() {
                            return this.updateText(!0), Math.abs(this.scale.y) * this._texture.orig.height
                        },
                        set: function(t) {
                            this.updateText(!0);
                            var e = (0, f.sign)(this.scale.y) || 1;
                            this.scale.y = e * t / this._texture.orig.height, this._height = t
                        }
                    }, {
                        key: "style",
                        get: function() {
                            return this._style
                        },
                        set: function(t) {
                            t = t || {}, t instanceof m.default ? this._style = t : this._style = new m.default(t), this.localStyleID = -1, this.dirty = !0
                        }
                    }, {
                        key: "text",
                        get: function() {
                            return this._text
                        },
                        set: function(t) {
                            t = String("" === t || null === t || void 0 === t ? " " : t), this._text !== t && (this._text = t, this.dirty = !0)
                        }
                    }]), e
                }(h.default);
            r.default = E
        }, {
            "../const": 46,
            "../math": 70,
            "../settings": 101,
            "../sprites/Sprite": 102,
            "../textures/Texture": 115,
            "../utils": 125,
            "../utils/trimCanvas": 130,
            "./TextMetrics": 109,
            "./TextStyle": 110
        }],
        109: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                function t(e, r, i, o, s, a, u, h, l) {
                    n(this, t), this.text = e, this.style = r, this.width = i, this.height = o, this.lines = s, this.lineWidths = a, this.lineHeight = u, this.maxLineWidth = h, this.fontProperties = l
                }
                return t.measureText = function(e, r, n) {
                    var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : t._canvas;
                    n = void 0 === n || null === n ? r.wordWrap : n;
                    var o = r.toFontString(),
                        s = t.measureFont(o),
                        a = i.getContext("2d");
                    a.font = o;
                    for (var u = n ? t.wordWrap(e, r, i) : e, h = u.split(/(?:\r\n|\r|\n)/), l = new Array(h.length), c = 0, d = 0; d < h.length; d++) {
                        var f = a.measureText(h[d]).width + (h[d].length - 1) * r.letterSpacing;
                        l[d] = f, c = Math.max(c, f)
                    }
                    var p = c + r.strokeThickness;
                    r.dropShadow && (p += r.dropShadowDistance);
                    var v = r.lineHeight || s.fontSize + r.strokeThickness,
                        g = Math.max(v, s.fontSize + r.strokeThickness) + (h.length - 1) * (v + r.leading);
                    return r.dropShadow && (g += r.dropShadowDistance), new t(e, r, p, g, h, l, v + r.leading, c, s)
                }, t.wordWrap = function(e, r) {
                    for (var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : t._canvas, i = n.getContext("2d"), o = 0, s = "", a = "", u = {}, h = r.letterSpacing, l = r.whiteSpace, c = t.collapseSpaces(l), d = t.collapseNewlines(l), f = !c, p = r.wordWrapWidth + h, v = t.tokenize(e), g = 0; g < v.length; g++) {
                        var y = v[g];
                        if (t.isNewline(y)) {
                            if (!d) {
                                a += t.addLine(s), f = !c, s = "", o = 0;
                                continue
                            }
                            y = " "
                        }
                        if (c) {
                            var m = t.isBreakingSpace(y),
                                _ = t.isBreakingSpace(s[s.length - 1]);
                            if (m && _) continue
                        }
                        var b = t.getFromCache(y, h, u, i);
                        if (b > p)
                            if ("" !== s && (a += t.addLine(s), s = "", o = 0), t.canBreakWords(y, r.breakWords))
                                for (var x = y.split(""), T = 0; T < x.length; T++) {
                                    for (var w = x[T], E = 1; x[T + E];) {
                                        var S = x[T + E],
                                            O = w[w.length - 1];
                                        if (t.canBreakChars(O, S, y, T, r.breakWords)) break;
                                        w += S, E++
                                    }
                                    T += w.length - 1;
                                    var M = t.getFromCache(w, h, u, i);
                                    M + o > p && (a += t.addLine(s), f = !1, s = "", o = 0), s += w, o += M
                                } else {
                                    s.length > 0 && (a += t.addLine(s), s = "", o = 0);
                                    var P = g === v.length - 1;
                                    a += t.addLine(y, !P), f = !1, s = "", o = 0
                                } else b + o > p && (f = !1, a += t.addLine(s), s = "", o = 0), (s.length > 0 || !t.isBreakingSpace(y) || f) && (s += y, o += b)
                    }
                    return a += t.addLine(s, !1)
                }, t.addLine = function(e) {
                    var r = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
                    return e = t.trimRight(e), e = r ? e + "\n" : e
                }, t.getFromCache = function(t, e, r, n) {
                    var i = r[t];
                    if (void 0 === i) {
                        var o = t.length * e;
                        i = n.measureText(t).width + o, r[t] = i
                    }
                    return i
                }, t.collapseSpaces = function(t) {
                    return "normal" === t || "pre-line" === t
                }, t.collapseNewlines = function(t) {
                    return "normal" === t
                }, t.trimRight = function(e) {
                    if ("string" != typeof e) return "";
                    for (var r = e.length - 1; r >= 0; r--) {
                        var n = e[r];
                        if (!t.isBreakingSpace(n)) break;
                        e = e.slice(0, -1)
                    }
                    return e
                }, t.isNewline = function(e) {
                    return "string" == typeof e && t._newlines.indexOf(e.charCodeAt(0)) >= 0
                }, t.isBreakingSpace = function(e) {
                    return "string" == typeof e && t._breakingSpaces.indexOf(e.charCodeAt(0)) >= 0
                }, t.tokenize = function(e) {
                    var r = [],
                        n = "";
                    if ("string" != typeof e) return r;
                    for (var i = 0; i < e.length; i++) {
                        var o = e[i];
                        t.isBreakingSpace(o) || t.isNewline(o) ? ("" !== n && (r.push(n), n = ""), r.push(o)) : n += o
                    }
                    return "" !== n && r.push(n), r
                }, t.canBreakWords = function(t, e) {
                    return e
                }, t.canBreakChars = function(t, e, r, n, i) {
                    return !0
                }, t.measureFont = function(e) {
                    if (t._fonts[e]) return t._fonts[e];
                    var r = {},
                        n = t._canvas,
                        i = t._context;
                    i.font = e;
                    var o = t.METRICS_STRING + t.BASELINE_SYMBOL,
                        s = Math.ceil(i.measureText(o).width),
                        a = Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),
                        u = 2 * a;
                    a = a * t.BASELINE_MULTIPLIER | 0, n.width = s, n.height = u, i.fillStyle = "#f00", i.fillRect(0, 0, s, u), i.font = e, i.textBaseline = "alphabetic", i.fillStyle = "#000", i.fillText(o, 0, a);
                    var h = i.getImageData(0, 0, s, u).data,
                        l = h.length,
                        c = 4 * s,
                        d = 0,
                        f = 0,
                        p = !1;
                    for (d = 0; d < a; ++d) {
                        for (var v = 0; v < c; v += 4)
                            if (255 !== h[f + v]) {
                                p = !0;
                                break
                            } if (p) break;
                        f += c
                    }
                    for (r.ascent = a - d, f = l - c, p = !1, d = u; d > a; --d) {
                        for (var g = 0; g < c; g += 4)
                            if (255 !== h[f + g]) {
                                p = !0;
                                break
                            } if (p) break;
                        f -= c
                    }
                    return r.descent = d - a, r.fontSize = r.ascent + r.descent, t._fonts[e] = r, r
                }, t.clearMetrics = function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";
                    e ? delete t._fonts[e] : t._fonts = {}
                }, t
            }();
            r.default = i;
            var o = document.createElement("canvas");
            o.width = o.height = 10, i._canvas = o, i._context = o.getContext("2d"), i._fonts = {}, i.METRICS_STRING = "|q", i.BASELINE_SYMBOL = "M", i.BASELINE_MULTIPLIER = 1.4, i._newlines = [10, 13], i._breakingSpaces = [9, 32, 8192, 8193, 8194, 8195, 8196, 8197, 8198, 8200, 8201, 8202, 8287, 12288]
        }, {}],
        110: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t) {
                return "number" == typeof t ? (0, l.hex2string)(t) : ("string" == typeof t && 0 === t.indexOf("0x") && (t = t.replace("0x", "#")), t)
            }

            function o(t) {
                if (Array.isArray(t)) {
                    for (var e = 0; e < t.length; ++e) t[e] = i(t[e]);
                    return t
                }
                return i(t)
            }

            function s(t, e) {
                if (!Array.isArray(t) || !Array.isArray(e)) return !1;
                if (t.length !== e.length) return !1;
                for (var r = 0; r < t.length; ++r)
                    if (t[r] !== e[r]) return !1;
                return !0
            }

            function a(t, e, r) {
                for (var n in r) Array.isArray(e[n]) ? t[n] = e[n].slice() : t[n] = e[n]
            }
            r.__esModule = !0;
            var u = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                h = t("../const"),
                l = t("../utils"),
                c = {
                    align: "left",
                    breakWords: !1,
                    dropShadow: !1,
                    dropShadowAlpha: 1,
                    dropShadowAngle: Math.PI / 6,
                    dropShadowBlur: 0,
                    dropShadowColor: "black",
                    dropShadowDistance: 5,
                    fill: "black",
                    fillGradientType: h.TEXT_GRADIENT.LINEAR_VERTICAL,
                    fillGradientStops: [],
                    fontFamily: "Arial",
                    fontSize: 26,
                    fontStyle: "normal",
                    fontVariant: "normal",
                    fontWeight: "normal",
                    letterSpacing: 0,
                    lineHeight: 0,
                    lineJoin: "miter",
                    miterLimit: 10,
                    padding: 0,
                    stroke: "black",
                    strokeThickness: 0,
                    textBaseline: "alphabetic",
                    trim: !1,
                    whiteSpace: "pre",
                    wordWrap: !1,
                    wordWrapWidth: 100,
                    leading: 0
                },
                d = ["serif", "sans-serif", "monospace", "cursive", "fantasy", "system-ui"],
                f = function() {
                    function t(e) {
                        n(this, t), this.styleID = 0, this.reset(), a(this, e, e)
                    }
                    return t.prototype.clone = function() {
                        var e = {};
                        return a(e, this, c), new t(e)
                    }, t.prototype.reset = function() {
                        a(this, c, c)
                    }, t.prototype.toFontString = function() {
                        var t = "number" == typeof this.fontSize ? this.fontSize + "px" : this.fontSize,
                            e = this.fontFamily;
                        Array.isArray(this.fontFamily) || (e = this.fontFamily.split(","));
                        for (var r = e.length - 1; r >= 0; r--) {
                            var n = e[r].trim();
                            !/([\"\'])[^\'\"]+\1/.test(n) && d.indexOf(n) < 0 && (n = '"' + n + '"'), e[r] = n
                        }
                        return this.fontStyle + " " + this.fontVariant + " " + this.fontWeight + " " + t + " " + e.join(",")
                    }, u(t, [{
                        key: "align",
                        get: function() {
                            return this._align
                        },
                        set: function(t) {
                            this._align !== t && (this._align = t, this.styleID++)
                        }
                    }, {
                        key: "breakWords",
                        get: function() {
                            return this._breakWords
                        },
                        set: function(t) {
                            this._breakWords !== t && (this._breakWords = t, this.styleID++)
                        }
                    }, {
                        key: "dropShadow",
                        get: function() {
                            return this._dropShadow
                        },
                        set: function(t) {
                            this._dropShadow !== t && (this._dropShadow = t, this.styleID++)
                        }
                    }, {
                        key: "dropShadowAlpha",
                        get: function() {
                            return this._dropShadowAlpha
                        },
                        set: function(t) {
                            this._dropShadowAlpha !== t && (this._dropShadowAlpha = t, this.styleID++)
                        }
                    }, {
                        key: "dropShadowAngle",
                        get: function() {
                            return this._dropShadowAngle
                        },
                        set: function(t) {
                            this._dropShadowAngle !== t && (this._dropShadowAngle = t, this.styleID++)
                        }
                    }, {
                        key: "dropShadowBlur",
                        get: function() {
                            return this._dropShadowBlur
                        },
                        set: function(t) {
                            this._dropShadowBlur !== t && (this._dropShadowBlur = t, this.styleID++)
                        }
                    }, {
                        key: "dropShadowColor",
                        get: function() {
                            return this._dropShadowColor
                        },
                        set: function(t) {
                            var e = o(t);
                            this._dropShadowColor !== e && (this._dropShadowColor = e, this.styleID++)
                        }
                    }, {
                        key: "dropShadowDistance",
                        get: function() {
                            return this._dropShadowDistance
                        },
                        set: function(t) {
                            this._dropShadowDistance !== t && (this._dropShadowDistance = t, this.styleID++)
                        }
                    }, {
                        key: "fill",
                        get: function() {
                            return this._fill
                        },
                        set: function(t) {
                            var e = o(t);
                            this._fill !== e && (this._fill = e, this.styleID++)
                        }
                    }, {
                        key: "fillGradientType",
                        get: function() {
                            return this._fillGradientType
                        },
                        set: function(t) {
                            this._fillGradientType !== t && (this._fillGradientType = t, this.styleID++)
                        }
                    }, {
                        key: "fillGradientStops",
                        get: function() {
                            return this._fillGradientStops
                        },
                        set: function(t) {
                            s(this._fillGradientStops, t) || (this._fillGradientStops = t, this.styleID++)
                        }
                    }, {
                        key: "fontFamily",
                        get: function() {
                            return this._fontFamily
                        },
                        set: function(t) {
                            this.fontFamily !== t && (this._fontFamily = t, this.styleID++)
                        }
                    }, {
                        key: "fontSize",
                        get: function() {
                            return this._fontSize
                        },
                        set: function(t) {
                            this._fontSize !== t && (this._fontSize = t, this.styleID++)
                        }
                    }, {
                        key: "fontStyle",
                        get: function() {
                            return this._fontStyle
                        },
                        set: function(t) {
                            this._fontStyle !== t && (this._fontStyle = t, this.styleID++)
                        }
                    }, {
                        key: "fontVariant",
                        get: function() {
                            return this._fontVariant
                        },
                        set: function(t) {
                            this._fontVariant !== t && (this._fontVariant = t, this.styleID++)
                        }
                    }, {
                        key: "fontWeight",
                        get: function() {
                            return this._fontWeight
                        },
                        set: function(t) {
                            this._fontWeight !== t && (this._fontWeight = t, this.styleID++)
                        }
                    }, {
                        key: "letterSpacing",
                        get: function() {
                            return this._letterSpacing
                        },
                        set: function(t) {
                            this._letterSpacing !== t && (this._letterSpacing = t, this.styleID++)
                        }
                    }, {
                        key: "lineHeight",
                        get: function() {
                            return this._lineHeight
                        },
                        set: function(t) {
                            this._lineHeight !== t && (this._lineHeight = t, this.styleID++)
                        }
                    }, {
                        key: "leading",
                        get: function() {
                            return this._leading
                        },
                        set: function(t) {
                            this._leading !== t && (this._leading = t, this.styleID++)
                        }
                    }, {
                        key: "lineJoin",
                        get: function() {
                            return this._lineJoin
                        },
                        set: function(t) {
                            this._lineJoin !== t && (this._lineJoin = t, this.styleID++)
                        }
                    }, {
                        key: "miterLimit",
                        get: function() {
                            return this._miterLimit
                        },
                        set: function(t) {
                            this._miterLimit !== t && (this._miterLimit = t, this.styleID++)
                        }
                    }, {
                        key: "padding",
                        get: function() {
                            return this._padding
                        },
                        set: function(t) {
                            this._padding !== t && (this._padding = t, this.styleID++)
                        }
                    }, {
                        key: "stroke",
                        get: function() {
                            return this._stroke
                        },
                        set: function(t) {
                            var e = o(t);
                            this._stroke !== e && (this._stroke = e, this.styleID++)
                        }
                    }, {
                        key: "strokeThickness",
                        get: function() {
                            return this._strokeThickness
                        },
                        set: function(t) {
                            this._strokeThickness !== t && (this._strokeThickness = t, this.styleID++)
                        }
                    }, {
                        key: "textBaseline",
                        get: function() {
                            return this._textBaseline
                        },
                        set: function(t) {
                            this._textBaseline !== t && (this._textBaseline = t, this.styleID++)
                        }
                    }, {
                        key: "trim",
                        get: function() {
                            return this._trim
                        },
                        set: function(t) {
                            this._trim !== t && (this._trim = t, this.styleID++)
                        }
                    }, {
                        key: "whiteSpace",
                        get: function() {
                            return this._whiteSpace
                        },
                        set: function(t) {
                            this._whiteSpace !== t && (this._whiteSpace = t, this.styleID++)
                        }
                    }, {
                        key: "wordWrap",
                        get: function() {
                            return this._wordWrap
                        },
                        set: function(t) {
                            this._wordWrap !== t && (this._wordWrap = t, this.styleID++)
                        }
                    }, {
                        key: "wordWrapWidth",
                        get: function() {
                            return this._wordWrapWidth
                        },
                        set: function(t) {
                            this._wordWrapWidth !== t && (this._wordWrapWidth = t, this.styleID++)
                        }
                    }]), t
                }();
            r.default = f
        }, {
            "../const": 46,
            "../utils": 125
        }],
        111: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("./BaseTexture"),
                u = n(a),
                h = t("../settings"),
                l = n(h),
                c = function(t) {
                    function e() {
                        var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 100,
                            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 100,
                            s = arguments[2],
                            a = arguments[3];
                        i(this, e);
                        var u = o(this, t.call(this, null, s));
                        return u.resolution = a || l.default.RESOLUTION, u.width = Math.ceil(r), u.height = Math.ceil(n), u.realWidth = u.width * u.resolution, u.realHeight = u.height * u.resolution, u.scaleMode = void 0 !== s ? s : l.default.SCALE_MODE, u.hasLoaded = !0, u._glRenderTargets = {}, u._canvasRenderTarget = null, u.valid = !1, u
                    }
                    return s(e, t), e.prototype.resize = function(t, e) {
                        t = Math.ceil(t), e = Math.ceil(e), t === this.width && e === this.height || (this.valid = t > 0 && e > 0, this.width = t, this.height = e, this.realWidth = this.width * this.resolution, this.realHeight = this.height * this.resolution, this.valid && this.emit("update", this))
                    }, e.prototype.destroy = function() {
                        t.prototype.destroy.call(this, !0), this.renderer = null
                    }, e
                }(u.default);
            r.default = c
        }, {
            "../settings": 101,
            "./BaseTexture": 112
        }],
        112: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("../utils"),
                u = t("../settings"),
                h = n(u),
                l = t("eventemitter3"),
                c = n(l),
                d = t("../utils/determineCrossOrigin"),
                f = n(d),
                p = t("bit-twiddle"),
                v = n(p),
                g = function(t) {
                    function e(r, n, s) {
                        i(this, e);
                        var u = o(this, t.call(this));
                        return u.uid = (0, a.uid)(), u.touched = 0, u.resolution = s || h.default.RESOLUTION, u.width = 100, u.height = 100, u.realWidth = 100, u.realHeight = 100, u.scaleMode = void 0 !== n ? n : h.default.SCALE_MODE, u.hasLoaded = !1, u.isLoading = !1, u.source = null, u.origSource = null, u.imageType = null, u.sourceScale = 1, u.premultipliedAlpha = !0, u.imageUrl = null, u.isPowerOfTwo = !1, u.mipmap = h.default.MIPMAP_TEXTURES, u.wrapMode = h.default.WRAP_MODE, u._glTextures = {}, u._enabled = 0, u._virtalBoundId = -1, u._destroyed = !1, u.textureCacheIds = [], r && u.loadSource(r), u
                    }
                    return s(e, t), e.prototype.update = function() {
                        "svg" !== this.imageType && (this.realWidth = this.source.naturalWidth || this.source.videoWidth || this.source.width, this.realHeight = this.source.naturalHeight || this.source.videoHeight || this.source.height, this._updateDimensions()), this.emit("update", this)
                    }, e.prototype._updateDimensions = function() {
                        this.width = this.realWidth / this.resolution, this.height = this.realHeight / this.resolution, this.isPowerOfTwo = v.default.isPow2(this.realWidth) && v.default.isPow2(this.realHeight)
                    }, e.prototype.loadSource = function(t) {
                        var e = this.isLoading;
                        this.hasLoaded = !1, this.isLoading = !1, e && this.source && (this.source.onload = null, this.source.onerror = null);
                        var r = !this.source;
                        if (this.source = t, (t.src && t.complete || t.getContext) && t.width && t.height) this._updateImageType(), "svg" === this.imageType ? this._loadSvgSource() : this._sourceLoaded(), r && this.emit("loaded", this);
                        else if (!t.getContext) {
                            this.isLoading = !0;
                            var n = this;
                            if (t.onload = function() {
                                    if (n._updateImageType(), t.onload = null, t.onerror = null, n.isLoading) {
                                        if (n.isLoading = !1, n._sourceLoaded(), "svg" === n.imageType) return void n._loadSvgSource();
                                        n.emit("loaded", n)
                                    }
                                }, t.onerror = function() {
                                    t.onload = null, t.onerror = null, n.isLoading && (n.isLoading = !1, n.emit("error", n))
                                }, t.complete && t.src) {
                                if (t.onload = null, t.onerror = null, "svg" === n.imageType) return void n._loadSvgSource();
                                this.isLoading = !1, t.width && t.height ? (this._sourceLoaded(), e && this.emit("loaded", this)) : e && this.emit("error", this)
                            }
                        }
                    }, e.prototype._updateImageType = function() {
                        if (this.imageUrl) {
                            var t = (0, a.decomposeDataUri)(this.imageUrl),
                                e = void 0;
                            if (t && "image" === t.mediaType) {
                                var r = t.subType.split("+")[0];
                                if (!(e = (0, a.getUrlFileExtension)("." + r))) throw new Error("Invalid image type in data URI.")
                            } else(e = (0, a.getUrlFileExtension)(this.imageUrl)) || (e = "png");
                            this.imageType = e
                        }
                    }, e.prototype._loadSvgSource = function() {
                        if ("svg" === this.imageType) {
                            var t = (0, a.decomposeDataUri)(this.imageUrl);
                            t ? this._loadSvgSourceUsingDataUri(t) : this._loadSvgSourceUsingXhr()
                        }
                    }, e.prototype._loadSvgSourceUsingDataUri = function(t) {
                        var e = void 0;
                        if ("base64" === t.encoding) {
                            if (!atob) throw new Error("Your browser doesn't support base64 conversions.");
                            e = atob(t.data)
                        } else e = t.data;
                        this._loadSvgSourceUsingString(e)
                    }, e.prototype._loadSvgSourceUsingXhr = function() {
                        var t = this,
                            e = new XMLHttpRequest;
                        e.onload = function() {
                            if (e.readyState !== e.DONE || 200 !== e.status) throw new Error("Failed to load SVG using XHR.");
                            t._loadSvgSourceUsingString(e.response)
                        }, e.onerror = function() {
                            return t.emit("error", t)
                        }, e.open("GET", this.imageUrl, !0), e.send()
                    }, e.prototype._loadSvgSourceUsingString = function(t) {
                        var r = (0, a.getSvgSize)(t),
                            n = r.width,
                            i = r.height;
                        if (!n || !i) throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");
                        this.realWidth = Math.round(n * this.sourceScale), this.realHeight = Math.round(i * this.sourceScale), this._updateDimensions();
                        var o = document.createElement("canvas");
                        o.width = this.realWidth, o.height = this.realHeight, o._pixiId = "canvas_" + (0, a.uid)(), o.getContext("2d").drawImage(this.source, 0, 0, n, i, 0, 0, this.realWidth, this.realHeight), this.origSource = this.source, this.source = o, e.addToCache(this, o._pixiId), this.isLoading = !1, this._sourceLoaded(), this.emit("loaded", this)
                    }, e.prototype._sourceLoaded = function() {
                        this.hasLoaded = !0, this.update()
                    }, e.prototype.destroy = function() {
                        this.imageUrl && (delete a.TextureCache[this.imageUrl], this.imageUrl = null, navigator.isCocoonJS || (this.source.src = "")), this.source = null, this.dispose(), e.removeFromCache(this), this.textureCacheIds = null, this._destroyed = !0
                    }, e.prototype.dispose = function() {
                        this.emit("dispose", this)
                    }, e.prototype.updateSourceImage = function(t) {
                        this.source.src = t, this.loadSource(this.source)
                    }, e.fromImage = function(t, r, n, i) {
                        var o = a.BaseTextureCache[t];
                        if (!o) {
                            var s = new Image;
                            void 0 === r && 0 !== t.indexOf("data:") ? s.crossOrigin = (0, f.default)(t) : r && (s.crossOrigin = "string" == typeof r ? r : "anonymous"), o = new e(s, n), o.imageUrl = t, i && (o.sourceScale = i), o.resolution = (0, a.getResolutionOfUrl)(t), s.src = t, e.addToCache(o, t)
                        }
                        return o
                    }, e.fromCanvas = function(t, r) {
                        var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "canvas";
                        t._pixiId || (t._pixiId = n + "_" + (0, a.uid)());
                        var i = a.BaseTextureCache[t._pixiId];
                        return i || (i = new e(t, r), e.addToCache(i, t._pixiId)), i
                    }, e.from = function(t, r, n) {
                        if ("string" == typeof t) return e.fromImage(t, void 0, r, n);
                        if (t instanceof HTMLImageElement) {
                            var i = t.src,
                                o = a.BaseTextureCache[i];
                            return o || (o = new e(t, r), o.imageUrl = i, n && (o.sourceScale = n), o.resolution = (0, a.getResolutionOfUrl)(i), e.addToCache(o, i)), o
                        }
                        return t instanceof HTMLCanvasElement ? e.fromCanvas(t, r) : t
                    }, e.addToCache = function(t, e) {
                        e && (-1 === t.textureCacheIds.indexOf(e) && t.textureCacheIds.push(e), a.BaseTextureCache[e] = t)
                    }, e.removeFromCache = function(t) {
                        if ("string" == typeof t) {
                            var e = a.BaseTextureCache[t];
                            if (e) {
                                var r = e.textureCacheIds.indexOf(t);
                                return r > -1 && e.textureCacheIds.splice(r, 1), delete a.BaseTextureCache[t], e
                            }
                        } else if (t && t.textureCacheIds) {
                            for (var n = 0; n < t.textureCacheIds.length; ++n) delete a.BaseTextureCache[t.textureCacheIds[n]];
                            return t.textureCacheIds.length = 0, t
                        }
                        return null
                    }, e
                }(c.default);
            r.default = g
        }, {
            "../settings": 101,
            "../utils": 125,
            "../utils/determineCrossOrigin": 124,
            "bit-twiddle": 1,
            eventemitter3: 3
        }],
        113: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("./BaseRenderTexture"),
                u = n(a),
                h = t("./Texture"),
                l = n(h),
                c = function(t) {
                    function e(r, n) {
                        i(this, e);
                        var s = null;
                        if (!(r instanceof u.default)) {
                            var a = arguments[1],
                                h = arguments[2],
                                l = arguments[3],
                                c = arguments[4];
                            console.warn("Please use RenderTexture.create(" + a + ", " + h + ") instead of the ctor directly."), s = arguments[0], n = null, r = new u.default(a, h, l, c)
                        }
                        var d = o(this, t.call(this, r, n));
                        return d.legacyRenderer = s, d.valid = !0, d._updateUvs(), d
                    }
                    return s(e, t), e.prototype.resize = function(t, e, r) {
                        t = Math.ceil(t), e = Math.ceil(e), this.valid = t > 0 && e > 0, this._frame.width = this.orig.width = t, this._frame.height = this.orig.height = e, r || this.baseTexture.resize(t, e), this._updateUvs()
                    }, e.create = function(t, r, n, i) {
                        return new e(new u.default(t, r, n, i))
                    }, e
                }(l.default);
            r.default = c
        }, {
            "./BaseRenderTexture": 111,
            "./Texture": 115
        }],
        114: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                o = t("../"),
                s = t("../utils"),
                a = function() {
                    function t(e, r) {
                        var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
                        n(this, t), this.baseTexture = e, this.textures = {}, this.animations = {}, this.data = r, this.resolution = this._updateResolution(i || this.baseTexture.imageUrl), this._frames = this.data.frames, this._frameKeys = Object.keys(this._frames), this._batchIndex = 0, this._callback = null
                    }
                    return i(t, null, [{
                        key: "BATCH_SIZE",
                        get: function() {
                            return 1e3
                        }
                    }]), t.prototype._updateResolution = function(t) {
                        var e = this.data.meta.scale,
                            r = (0, s.getResolutionOfUrl)(t, null);
                        return null === r && (r = void 0 !== e ? parseFloat(e) : 1), 1 !== r && (this.baseTexture.resolution = r, this.baseTexture.update()), r
                    }, t.prototype.parse = function(e) {
                        this._batchIndex = 0, this._callback = e, this._frameKeys.length <= t.BATCH_SIZE ? (this._processFrames(0), this._processAnimations(), this._parseComplete()) : this._nextBatch()
                    }, t.prototype._processFrames = function(e) {
                        for (var r = e, n = t.BATCH_SIZE, i = this.baseTexture.sourceScale; r - e < n && r < this._frameKeys.length;) {
                            var s = this._frameKeys[r],
                                a = this._frames[s],
                                u = a.frame;
                            if (u) {
                                var h = null,
                                    l = null,
                                    c = !1 !== a.trimmed && a.sourceSize ? a.sourceSize : a.frame,
                                    d = new o.Rectangle(0, 0, Math.floor(c.w * i) / this.resolution, Math.floor(c.h * i) / this.resolution);
                                h = a.rotated ? new o.Rectangle(Math.floor(u.x * i) / this.resolution, Math.floor(u.y * i) / this.resolution, Math.floor(u.h * i) / this.resolution, Math.floor(u.w * i) / this.resolution) : new o.Rectangle(Math.floor(u.x * i) / this.resolution, Math.floor(u.y * i) / this.resolution, Math.floor(u.w * i) / this.resolution, Math.floor(u.h * i) / this.resolution), !1 !== a.trimmed && a.spriteSourceSize && (l = new o.Rectangle(Math.floor(a.spriteSourceSize.x * i) / this.resolution, Math.floor(a.spriteSourceSize.y * i) / this.resolution, Math.floor(u.w * i) / this.resolution, Math.floor(u.h * i) / this.resolution)), this.textures[s] = new o.Texture(this.baseTexture, h, d, l, a.rotated ? 2 : 0, a.anchor), o.Texture.addToCache(this.textures[s], s)
                            }
                            r++
                        }
                    }, t.prototype._processAnimations = function() {
                        var t = this.data.animations || {};
                        for (var e in t) {
                            this.animations[e] = [];
                            for (var r = t[e], n = Array.isArray(r), i = 0, r = n ? r : r[Symbol.iterator]();;) {
                                var o;
                                if (n) {
                                    if (i >= r.length) break;
                                    o = r[i++]
                                } else {
                                    if (i = r.next(), i.done) break;
                                    o = i.value
                                }
                                var s = o;
                                this.animations[e].push(this.textures[s])
                            }
                        }
                    }, t.prototype._parseComplete = function() {
                        var t = this._callback;
                        this._callback = null, this._batchIndex = 0, t.call(this, this.textures)
                    }, t.prototype._nextBatch = function() {
                        var e = this;
                        this._processFrames(this._batchIndex * t.BATCH_SIZE), this._batchIndex++, setTimeout(function() {
                            e._batchIndex * t.BATCH_SIZE < e._frameKeys.length ? e._nextBatch() : (e._processAnimations(), e._parseComplete())
                        }, 0)
                    }, t.prototype.destroy = function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                        for (var e in this.textures) this.textures[e].destroy();
                        this._frames = null, this._frameKeys = null, this.data = null, this.textures = null, t && this.baseTexture.destroy(), this.baseTexture = null
                    }, t
                }();
            r.default = a
        }, {
            "../": 65,
            "../utils": 125
        }],
        115: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function a(t) {
                t.destroy = function() {}, t.on = function() {}, t.once = function() {}, t.emit = function() {}
            }
            r.__esModule = !0;
            var u = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                h = t("./BaseTexture"),
                l = n(h),
                c = t("./VideoBaseTexture"),
                d = n(c),
                f = t("./TextureUvs"),
                p = n(f),
                v = t("eventemitter3"),
                g = n(v),
                y = t("../math"),
                m = t("../utils"),
                _ = t("../settings"),
                b = n(_),
                x = function(t) {
                    function e(r, n, s, a, u, h) {
                        i(this, e);
                        var l = o(this, t.call(this));
                        if (l.noFrame = !1, n || (l.noFrame = !0, n = new y.Rectangle(0, 0, 1, 1)), r instanceof e && (r = r.baseTexture), l.baseTexture = r, l._frame = n, l.trim = a, l.valid = !1, l.requiresUpdate = !1, l._uvs = null, l.orig = s || n, l._rotate = Number(u || 0), !0 === u) l._rotate = 2;
                        else if (l._rotate % 2 != 0) throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");
                        return r.hasLoaded ? (l.noFrame && (n = new y.Rectangle(0, 0, r.width, r.height), r.on("update", l.onBaseTextureUpdated, l)), l.frame = n) : r.once("loaded", l.onBaseTextureLoaded, l), l.defaultAnchor = h ? new y.Point(h.x, h.y) : new y.Point(0, 0), l._updateID = 0, l.transform = null, l.textureCacheIds = [], l
                    }
                    return s(e, t), e.prototype.update = function() {
                        this.baseTexture.update()
                    }, e.prototype.onBaseTextureLoaded = function(t) {
                        this._updateID++, this.noFrame ? this.frame = new y.Rectangle(0, 0, t.width, t.height) : this.frame = this._frame, this.baseTexture.on("update", this.onBaseTextureUpdated, this), this.emit("update", this)
                    }, e.prototype.onBaseTextureUpdated = function(t) {
                        this._updateID++, this._frame.width = t.width, this._frame.height = t.height, this.emit("update", this)
                    }, e.prototype.destroy = function(t) {
                        this.baseTexture && (t && (m.TextureCache[this.baseTexture.imageUrl] && e.removeFromCache(this.baseTexture.imageUrl), this.baseTexture.destroy()), this.baseTexture.off("update", this.onBaseTextureUpdated, this), this.baseTexture.off("loaded", this.onBaseTextureLoaded, this), this.baseTexture = null), this._frame = null, this._uvs = null, this.trim = null, this.orig = null, this.valid = !1, e.removeFromCache(this), this.textureCacheIds = null
                    }, e.prototype.clone = function() {
                        return new e(this.baseTexture, this.frame, this.orig, this.trim, this.rotate)
                    }, e.prototype._updateUvs = function() {
                        this._uvs || (this._uvs = new p.default), this._uvs.set(this._frame, this.baseTexture, this.rotate), this._updateID++
                    }, e.fromImage = function(t, r, n, i) {
                        var o = m.TextureCache[t];
                        return o || (o = new e(l.default.fromImage(t, r, n, i)), e.addToCache(o, t)), o
                    }, e.fromFrame = function(t) {
                        var e = m.TextureCache[t];
                        if (!e) throw new Error('The frameId "' + t + '" does not exist in the texture cache');
                        return e
                    }, e.fromCanvas = function(t, r) {
                        var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "canvas";
                        return new e(l.default.fromCanvas(t, r, n))
                    }, e.fromVideo = function(t, r) {
                        return "string" == typeof t ? e.fromVideoUrl(t, r) : new e(d.default.fromVideo(t, r))
                    }, e.fromVideoUrl = function(t, r) {
                        return new e(d.default.fromUrl(t, r))
                    }, e.from = function(t) {
                        if ("string" == typeof t) {
                            var r = m.TextureCache[t];
                            return r || (null !== t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/) ? e.fromVideoUrl(t) : e.fromImage(t))
                        }
                        return t instanceof HTMLImageElement ? new e(l.default.from(t)) : t instanceof HTMLCanvasElement ? e.fromCanvas(t, b.default.SCALE_MODE, "HTMLCanvasElement") : t instanceof HTMLVideoElement ? e.fromVideo(t) : t instanceof l.default ? new e(t) : t
                    }, e.fromLoader = function(t, r, n) {
                        var i = new l.default(t, void 0, (0, m.getResolutionOfUrl)(r)),
                            o = new e(i);
                        return i.imageUrl = r, n || (n = r), l.default.addToCache(o.baseTexture, n), e.addToCache(o, n), n !== r && (l.default.addToCache(o.baseTexture, r), e.addToCache(o, r)), o
                    }, e.addToCache = function(t, e) {
                        e && (-1 === t.textureCacheIds.indexOf(e) && t.textureCacheIds.push(e), m.TextureCache[e] = t)
                    }, e.removeFromCache = function(t) {
                        if ("string" == typeof t) {
                            var e = m.TextureCache[t];
                            if (e) {
                                var r = e.textureCacheIds.indexOf(t);
                                return r > -1 && e.textureCacheIds.splice(r, 1), delete m.TextureCache[t], e
                            }
                        } else if (t && t.textureCacheIds) {
                            for (var n = 0; n < t.textureCacheIds.length; ++n) m.TextureCache[t.textureCacheIds[n]] === t && delete m.TextureCache[t.textureCacheIds[n]];
                            return t.textureCacheIds.length = 0, t
                        }
                        return null
                    }, u(e, [{
                        key: "frame",
                        get: function() {
                            return this._frame
                        },
                        set: function(t) {
                            this._frame = t, this.noFrame = !1;
                            var e = t.x,
                                r = t.y,
                                n = t.width,
                                i = t.height,
                                o = e + n > this.baseTexture.width,
                                s = r + i > this.baseTexture.height;
                            if (o || s) {
                                var a = o && s ? "and" : "or",
                                    u = "X: " + e + " + " + n + " = " + (e + n) + " > " + this.baseTexture.width,
                                    h = "Y: " + r + " + " + i + " = " + (r + i) + " > " + this.baseTexture.height;
                                throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: " + u + " " + a + " " + h)
                            }
                            this.valid = n && i && this.baseTexture.hasLoaded, this.trim || this.rotate || (this.orig = t), this.valid && this._updateUvs()
                        }
                    }, {
                        key: "rotate",
                        get: function() {
                            return this._rotate
                        },
                        set: function(t) {
                            this._rotate = t, this.valid && this._updateUvs()
                        }
                    }, {
                        key: "width",
                        get: function() {
                            return this.orig.width
                        }
                    }, {
                        key: "height",
                        get: function() {
                            return this.orig.height
                        }
                    }]), e
                }(g.default);
            r.default = x, x.EMPTY = new x(new l.default), a(x.EMPTY), a(x.EMPTY.baseTexture), x.WHITE = function() {
                var t = document.createElement("canvas");
                t.width = 10, t.height = 10;
                var e = t.getContext("2d");
                return e.fillStyle = "white", e.fillRect(0, 0, 10, 10), new x(new l.default(t))
            }(), a(x.WHITE), a(x.WHITE.baseTexture)
        }, {
            "../math": 70,
            "../settings": 101,
            "../utils": 125,
            "./BaseTexture": 112,
            "./TextureUvs": 117,
            "./VideoBaseTexture": 118,
            eventemitter3: 3
        }],
        116: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                o = t("../math/Matrix"),
                s = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(o),
                a = new s.default,
                u = function() {
                    function t(e, r) {
                        n(this, t), this._texture = e, this.mapCoord = new s.default, this.uClampFrame = new Float32Array(4), this.uClampOffset = new Float32Array(2), this._lastTextureID = -1, this.clampOffset = 0, this.clampMargin = void 0 === r ? .5 : r
                    }
                    return t.prototype.multiplyUvs = function(t, e) {
                        void 0 === e && (e = t);
                        for (var r = this.mapCoord, n = 0; n < t.length; n += 2) {
                            var i = t[n],
                                o = t[n + 1];
                            e[n] = i * r.a + o * r.c + r.tx, e[n + 1] = i * r.b + o * r.d + r.ty
                        }
                        return e
                    }, t.prototype.update = function(t) {
                        var e = this._texture;
                        if (!e || !e.valid) return !1;
                        if (!t && this._lastTextureID === e._updateID) return !1;
                        this._lastTextureID = e._updateID;
                        var r = e._uvs;
                        this.mapCoord.set(r.x1 - r.x0, r.y1 - r.y0, r.x3 - r.x0, r.y3 - r.y0, r.x0, r.y0);
                        var n = e.orig,
                            i = e.trim;
                        i && (a.set(n.width / i.width, 0, 0, n.height / i.height, -i.x / i.width, -i.y / i.height), this.mapCoord.append(a));
                        var o = e.baseTexture,
                            s = this.uClampFrame,
                            u = this.clampMargin / o.resolution,
                            h = this.clampOffset;
                        return s[0] = (e._frame.x + u + h) / o.width, s[1] = (e._frame.y + u + h) / o.height, s[2] = (e._frame.x + e._frame.width - u + h) / o.width, s[3] = (e._frame.y + e._frame.height - u + h) / o.height, this.uClampOffset[0] = h / o.realWidth, this.uClampOffset[1] = h / o.realHeight, !0
                    }, i(t, [{
                        key: "texture",
                        get: function() {
                            return this._texture
                        },
                        set: function(t) {
                            this._texture = t, this._lastTextureID = -1
                        }
                    }]), t
                }();
            r.default = u
        }, {
            "../math/Matrix": 67
        }],
        117: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("../math/GroupD8"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i),
                s = function() {
                    function t() {
                        n(this, t), this.x0 = 0, this.y0 = 0, this.x1 = 1, this.y1 = 0, this.x2 = 1, this.y2 = 1, this.x3 = 0, this.y3 = 1, this.uvsUint32 = new Uint32Array(4)
                    }
                    return t.prototype.set = function(t, e, r) {
                        var n = e.width,
                            i = e.height;
                        if (r) {
                            var s = t.width / 2 / n,
                                a = t.height / 2 / i,
                                u = t.x / n + s,
                                h = t.y / i + a;
                            r = o.default.add(r, o.default.NW), this.x0 = u + s * o.default.uX(r), this.y0 = h + a * o.default.uY(r), r = o.default.add(r, 2), this.x1 = u + s * o.default.uX(r), this.y1 = h + a * o.default.uY(r), r = o.default.add(r, 2), this.x2 = u + s * o.default.uX(r), this.y2 = h + a * o.default.uY(r), r = o.default.add(r, 2), this.x3 = u + s * o.default.uX(r), this.y3 = h + a * o.default.uY(r)
                        } else this.x0 = t.x / n, this.y0 = t.y / i, this.x1 = (t.x + t.width) / n, this.y1 = t.y / i, this.x2 = (t.x + t.width) / n, this.y2 = (t.y + t.height) / i, this.x3 = t.x / n, this.y3 = (t.y + t.height) / i;
                        this.uvsUint32[0] = (65535 * this.y0 & 65535) << 16 | 65535 * this.x0 & 65535, this.uvsUint32[1] = (65535 * this.y1 & 65535) << 16 | 65535 * this.x1 & 65535, this.uvsUint32[2] = (65535 * this.y2 & 65535) << 16 | 65535 * this.x2 & 65535, this.uvsUint32[3] = (65535 * this.y3 & 65535) << 16 | 65535 * this.x3 & 65535
                    }, t
                }();
            r.default = s
        }, {
            "../math/GroupD8": 66
        }],
        118: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function a(t, e) {
                e || (t = t.split("?").shift().toLowerCase(), e = "video/" + t.substr(t.lastIndexOf(".") + 1));
                var r = document.createElement("source");
                return r.src = t, r.type = e, r
            }
            r.__esModule = !0;
            var u = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                h = t("./BaseTexture"),
                l = n(h),
                c = t("../utils"),
                d = t("../ticker"),
                f = t("../const"),
                p = t("../utils/determineCrossOrigin"),
                v = n(p),
                g = function(t) {
                    function e(r, n) {
                        if (i(this, e), !r) throw new Error("No video source element specified.");
                        (r.readyState === r.HAVE_ENOUGH_DATA || r.readyState === r.HAVE_FUTURE_DATA) && r.width && r.height && (r.complete = !0);
                        var s = o(this, t.call(this, r, n));
                        return s.width = r.videoWidth, s.height = r.videoHeight, s._autoUpdate = !0, s._isAutoUpdating = !1, s.autoPlay = !0, s.update = s.update.bind(s), s._onCanPlay = s._onCanPlay.bind(s), r.addEventListener("play", s._onPlayStart.bind(s)), r.addEventListener("pause", s._onPlayStop.bind(s)), s.hasLoaded = !1, s.__loaded = !1, s._isSourceReady() ? s._onCanPlay() : (r.addEventListener("canplay", s._onCanPlay), r.addEventListener("canplaythrough", s._onCanPlay)), s
                    }
                    return s(e, t), e.prototype._isSourcePlaying = function() {
                        var t = this.source;
                        return t.currentTime > 0 && !1 === t.paused && !1 === t.ended && t.readyState > 2
                    }, e.prototype._isSourceReady = function() {
                        return 3 === this.source.readyState || 4 === this.source.readyState
                    }, e.prototype._onPlayStart = function() {
                        this.hasLoaded || this._onCanPlay(), !this._isAutoUpdating && this.autoUpdate && (d.shared.add(this.update, this, f.UPDATE_PRIORITY.HIGH), this._isAutoUpdating = !0)
                    }, e.prototype._onPlayStop = function() {
                        this._isAutoUpdating && (d.shared.remove(this.update, this), this._isAutoUpdating = !1)
                    }, e.prototype._onCanPlay = function() {
                        this.hasLoaded = !0, this.source && (this.source.removeEventListener("canplay", this._onCanPlay), this.source.removeEventListener("canplaythrough", this._onCanPlay), this.width = this.source.videoWidth, this.height = this.source.videoHeight, this.__loaded || (this.__loaded = !0, this.emit("loaded", this)), this._isSourcePlaying() ? this._onPlayStart() : this.autoPlay && this.source.play())
                    }, e.prototype.destroy = function() {
                        this._isAutoUpdating && d.shared.remove(this.update, this), this.source && this.source._pixiId && (l.default.removeFromCache(this.source._pixiId), delete this.source._pixiId, this.source.pause(), this.source.src = "", this.source.load()), t.prototype.destroy.call(this)
                    }, e.fromVideo = function(t, r) {
                        t._pixiId || (t._pixiId = "video_" + (0, c.uid)());
                        var n = c.BaseTextureCache[t._pixiId];
                        return n || (n = new e(t, r), l.default.addToCache(n, t._pixiId)), n
                    }, e.fromUrl = function(t, r, n) {
                        var i = document.createElement("video");
                        i.setAttribute("webkit-playsinline", ""), i.setAttribute("playsinline", "");
                        var o = Array.isArray(t) ? t[0].src || t[0] : t.src || t;
                        if (void 0 === n && 0 !== o.indexOf("data:") ? i.crossOrigin = (0, v.default)(o) : n && (i.crossOrigin = "string" == typeof n ? n : "anonymous"), Array.isArray(t))
                            for (var s = 0; s < t.length; ++s) i.appendChild(a(t[s].src || t[s], t[s].mime));
                        else i.appendChild(a(o, t.mime));
                        return i.load(), e.fromVideo(i, r)
                    }, u(e, [{
                        key: "autoUpdate",
                        get: function() {
                            return this._autoUpdate
                        },
                        set: function(t) {
                            t !== this._autoUpdate && (this._autoUpdate = t, !this._autoUpdate && this._isAutoUpdating ? (d.shared.remove(this.update, this), this._isAutoUpdating = !1) : this._autoUpdate && !this._isAutoUpdating && (d.shared.add(this.update, this, f.UPDATE_PRIORITY.HIGH), this._isAutoUpdating = !0))
                        }
                    }]), e
                }(l.default);
            r.default = g, g.fromUrls = g.fromUrl
        }, {
            "../const": 46,
            "../ticker": 121,
            "../utils": 125,
            "../utils/determineCrossOrigin": 124,
            "./BaseTexture": 112
        }],
        119: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var o = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                s = t("../settings"),
                a = n(s),
                u = t("../const"),
                h = t("./TickerListener"),
                l = n(h),
                c = function() {
                    function t() {
                        var e = this;
                        i(this, t), this._head = new l.default(null, null, 1 / 0), this._requestId = null, this._maxElapsedMS = 100, this.autoStart = !1, this.deltaTime = 1, this.elapsedMS = 1 / a.default.TARGET_FPMS, this.lastTime = -1, this.speed = 1, this.started = !1, this._tick = function(t) {
                            e._requestId = null, e.started && (e.update(t), e.started && null === e._requestId && e._head.next && (e._requestId = requestAnimationFrame(e._tick)))
                        }
                    }
                    return t.prototype._requestIfNeeded = function() {
                        null === this._requestId && this._head.next && (this.lastTime = performance.now(), this._requestId = requestAnimationFrame(this._tick))
                    }, t.prototype._cancelIfNeeded = function() {
                        null !== this._requestId && (cancelAnimationFrame(this._requestId), this._requestId = null)
                    }, t.prototype._startIfPossible = function() {
                        this.started ? this._requestIfNeeded() : this.autoStart && this.start()
                    }, t.prototype.add = function(t, e) {
                        var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : u.UPDATE_PRIORITY.NORMAL;
                        return this._addListener(new l.default(t, e, r))
                    }, t.prototype.addOnce = function(t, e) {
                        var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : u.UPDATE_PRIORITY.NORMAL;
                        return this._addListener(new l.default(t, e, r, !0))
                    }, t.prototype._addListener = function(t) {
                        var e = this._head.next,
                            r = this._head;
                        if (e) {
                            for (; e;) {
                                if (t.priority > e.priority) {
                                    t.connect(r);
                                    break
                                }
                                r = e, e = e.next
                            }
                            t.previous || t.connect(r)
                        } else t.connect(r);
                        return this._startIfPossible(), this
                    }, t.prototype.remove = function(t, e) {
                        for (var r = this._head.next; r;) r = r.match(t, e) ? r.destroy() : r.next;
                        return this._head.next || this._cancelIfNeeded(), this
                    }, t.prototype.start = function() {
                        this.started || (this.started = !0, this._requestIfNeeded())
                    }, t.prototype.stop = function() {
                        this.started && (this.started = !1, this._cancelIfNeeded())
                    }, t.prototype.destroy = function() {
                        this.stop();
                        for (var t = this._head.next; t;) t = t.destroy(!0);
                        this._head.destroy(), this._head = null
                    }, t.prototype.update = function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : performance.now(),
                            e = void 0;
                        if (t > this.lastTime) {
                            e = this.elapsedMS = t - this.lastTime, e > this._maxElapsedMS && (e = this._maxElapsedMS), this.deltaTime = e * a.default.TARGET_FPMS * this.speed;
                            for (var r = this._head, n = r.next; n;) n = n.emit(this.deltaTime);
                            r.next || this._cancelIfNeeded()
                        } else this.deltaTime = this.elapsedMS = 0;
                        this.lastTime = t
                    }, o(t, [{
                        key: "FPS",
                        get: function() {
                            return 1e3 / this.elapsedMS
                        }
                    }, {
                        key: "minFPS",
                        get: function() {
                            return 1e3 / this._maxElapsedMS
                        },
                        set: function(t) {
                            var e = Math.min(Math.max(0, t) / 1e3, a.default.TARGET_FPMS);
                            this._maxElapsedMS = 1 / e
                        }
                    }]), t
                }();
            r.default = c
        }, {
            "../const": 46,
            "../settings": 101,
            "./TickerListener": 120
        }],
        120: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                function t(e) {
                    var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null,
                        i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
                        o = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
                    n(this, t), this.fn = e, this.context = r, this.priority = i, this.once = o, this.next = null, this.previous = null, this._destroyed = !1
                }
                return t.prototype.match = function(t, e) {
                    return e = e || null, this.fn === t && this.context === e
                }, t.prototype.emit = function(t) {
                    this.fn && (this.context ? this.fn.call(this.context, t) : this.fn(t));
                    var e = this.next;
                    return this.once && this.destroy(!0), this._destroyed && (this.next = null), e
                }, t.prototype.connect = function(t) {
                    this.previous = t, t.next && (t.next.previous = this), this.next = t.next, t.next = this
                }, t.prototype.destroy = function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                    this._destroyed = !0, this.fn = null, this.context = null, this.previous && (this.previous.next = this.next), this.next && (this.next.previous = this.previous);
                    var e = this.next;
                    return this.next = t ? null : e, this.previous = null, e
                }, t
            }();
            r.default = i
        }, {}],
        121: [function(t, e, r) {
            "use strict";
            r.__esModule = !0, r.Ticker = r.shared = void 0;
            var n = t("./Ticker"),
                i = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n),
                o = new i.default;
            o.autoStart = !0, o.destroy = function() {}, r.shared = o, r.Ticker = i.default
        }, {
            "./Ticker": 119
        }],
        122: [function(t, e, r) {
            "use strict";

            function n() {
                return !(navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform))
            }
            r.__esModule = !0, r.default = n
        }, {}],
        123: [function(t, e, r) {
            "use strict";

            function n(t) {
                for (var e = 6 * t, r = new Uint16Array(e), n = 0, i = 0; n < e; n += 6, i += 4) r[n + 0] = i + 0, r[n + 1] = i + 1, r[n + 2] = i + 2, r[n + 3] = i + 0, r[n + 4] = i + 2, r[n + 5] = i + 3;
                return r
            }
            r.__esModule = !0, r.default = n
        }, {}],
        124: [function(t, e, r) {
            "use strict";

            function n(t) {
                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : window.location;
                if (0 === t.indexOf("data:")) return "";
                e = e || window.location, s || (s = document.createElement("a")), s.href = t, t = o.default.parse(s.href);
                var r = !t.port && "" === e.port || t.port === e.port;
                return t.hostname === e.hostname && r && t.protocol === e.protocol ? "" : "anonymous"
            }
            r.__esModule = !0, r.default = n;
            var i = t("url"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i),
                s = void 0
        }, {
            url: 38
        }],
        125: [function(t, e, r) {
            "use strict";

            function n(t) {
                if (t && t.__esModule) return t;
                var e = {};
                if (null != t)
                    for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                return e.default = t, e
            }

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function o() {
                return ++U
            }

            function s(t, e) {
                return e = e || [], e[0] = (t >> 16 & 255) / 255, e[1] = (t >> 8 & 255) / 255, e[2] = (255 & t) / 255, e
            }

            function a(t) {
                return t = t.toString(16), "#" + (t = "000000".substr(0, 6 - t.length) + t)
            }

            function u(t) {
                return (255 * t[0] << 16) + (255 * t[1] << 8) + (255 * t[2] | 0)
            }

            function h(t, e) {
                var r = S.default.RETINA_PREFIX.exec(t);
                return r ? parseFloat(r[1]) : void 0 !== e ? e : 1
            }

            function l(t) {
                var e = w.DATA_URI.exec(t);
                if (e) return {
                    mediaType: e[1] ? e[1].toLowerCase() : void 0,
                    subType: e[2] ? e[2].toLowerCase() : void 0,
                    charset: e[3] ? e[3].toLowerCase() : void 0,
                    encoding: e[4] ? e[4].toLowerCase() : void 0,
                    data: e[5]
                }
            }

            function c(t) {
                var e = w.URL_FILE_EXTENSION.exec(t);
                if (e) return e[1].toLowerCase()
            }

            function d(t) {
                var e = w.SVG_SIZE.exec(t),
                    r = {};
                return e && (r[e[1]] = Math.round(parseFloat(e[3])), r[e[5]] = Math.round(parseFloat(e[7]))), r
            }

            function f() {
                X = !0
            }

            function p(t) {
                if (!X) {
                    if (navigator.userAgent.toLowerCase().indexOf("chrome") > -1) {
                        var e = ["\n %c %c %c PixiJS " + w.VERSION + " -  " + t + "   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n", "background: #ff66a5; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "color: #ff66a5; background: #030307; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "background: #ffc3dc; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;"];
                        window.console.log.apply(console, e)
                    } else window.console && window.console.log("PixiJS " + w.VERSION + " - " + t + " - http://www.pixijs.com/");
                    X = !0
                }
            }

            function v() {
                var t = {
                    stencil: !0,
                    failIfMajorPerformanceCaveat: !0
                };
                try {
                    if (!window.WebGLRenderingContext) return !1;
                    var e = document.createElement("canvas"),
                        r = e.getContext("webgl", t) || e.getContext("experimental-webgl", t),
                        n = !(!r || !r.getContextAttributes().stencil);
                    if (r) {
                        var i = r.getExtension("WEBGL_lose_context");
                        i && i.loseContext()
                    }
                    return r = null, n
                } catch (t) {
                    return !1
                }
            }

            function g(t) {
                return 0 === t ? 0 : t < 0 ? -1 : 1
            }

            function y() {
                var t = void 0;
                for (t in G) G[t].destroy();
                for (t in W) W[t].destroy()
            }

            function m() {
                var t = void 0;
                for (t in G) delete G[t];
                for (t in W) delete W[t]
            }

            function _(t, e) {
                return H[e ? 1 : 0][t]
            }

            function b(t, e) {
                if (1 === e) return (255 * e << 24) + t;
                if (0 === e) return 0;
                var r = t >> 16 & 255,
                    n = t >> 8 & 255,
                    i = 255 & t;
                return r = r * e + .5 | 0, n = n * e + .5 | 0, i = i * e + .5 | 0, (255 * e << 24) + (r << 16) + (n << 8) + i
            }

            function x(t, e, r, n) {
                return r = r || new Float32Array(4), n || void 0 === n ? (r[0] = t[0] * e, r[1] = t[1] * e, r[2] = t[2] * e) : (r[0] = t[0], r[1] = t[1], r[2] = t[2]), r[3] = e, r
            }

            function T(t, e, r, n) {
                return r = r || new Float32Array(4), r[0] = (t >> 16 & 255) / 255, r[1] = (t >> 8 & 255) / 255, r[2] = (255 & t) / 255, (n || void 0 === n) && (r[0] *= e, r[1] *= e, r[2] *= e), r[3] = e, r
            }
            r.__esModule = !0, r.premultiplyBlendMode = r.BaseTextureCache = r.TextureCache = r.earcut = r.mixins = r.pluginTarget = r.EventEmitter = r.removeItems = r.isMobile = void 0, r.uid = o, r.hex2rgb = s, r.hex2string = a, r.rgb2hex = u, r.getResolutionOfUrl = h, r.decomposeDataUri = l, r.getUrlFileExtension = c, r.getSvgSize = d, r.skipHello = f, r.sayHello = p, r.isWebGLSupported = v, r.sign = g, r.destroyTextureCache = y, r.clearTextureCache = m, r.correctBlendMode = _, r.premultiplyTint = b, r.premultiplyRgba = x, r.premultiplyTintToRgba = T;
            var w = t("../const"),
                E = t("../settings"),
                S = i(E),
                O = t("eventemitter3"),
                M = i(O),
                P = t("./pluginTarget"),
                C = i(P),
                R = t("./mixin"),
                A = n(R),
                I = t("ismobilejs"),
                D = n(I),
                L = t("remove-array-items"),
                N = i(L),
                B = t("./mapPremultipliedBlendModes"),
                F = i(B),
                k = t("earcut"),
                j = i(k),
                U = 0,
                X = !1;
            r.isMobile = D, r.removeItems = N.default, r.EventEmitter = M.default, r.pluginTarget = C.default, r.mixins = A, r.earcut = j.default;
            var G = r.TextureCache = Object.create(null),
                W = r.BaseTextureCache = Object.create(null),
                H = r.premultiplyBlendMode = (0, F.default)()
        }, {
            "../const": 46,
            "../settings": 101,
            "./mapPremultipliedBlendModes": 126,
            "./mixin": 128,
            "./pluginTarget": 129,
            earcut: 2,
            eventemitter3: 3,
            ismobilejs: 4,
            "remove-array-items": 31
        }],
        126: [function(t, e, r) {
            "use strict";

            function n() {
                for (var t = [], e = [], r = 0; r < 32; r++) t[r] = r, e[r] = r;
                t[i.BLEND_MODES.NORMAL_NPM] = i.BLEND_MODES.NORMAL, t[i.BLEND_MODES.ADD_NPM] = i.BLEND_MODES.ADD, t[i.BLEND_MODES.SCREEN_NPM] = i.BLEND_MODES.SCREEN, e[i.BLEND_MODES.NORMAL] = i.BLEND_MODES.NORMAL_NPM, e[i.BLEND_MODES.ADD] = i.BLEND_MODES.ADD_NPM, e[i.BLEND_MODES.SCREEN] = i.BLEND_MODES.SCREEN_NPM;
                var n = [];
                return n.push(e), n.push(t), n
            }
            r.__esModule = !0, r.default = n;
            var i = t("../const")
        }, {
            "../const": 46
        }],
        127: [function(t, e, r) {
            "use strict";

            function n(t) {
                return o.default.tablet || o.default.phone ? 4 : t
            }
            r.__esModule = !0, r.default = n;
            var i = t("ismobilejs"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i)
        }, {
            ismobilejs: 4
        }],
        128: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (t && e)
                    for (var r = Object.keys(e), n = 0; n < r.length; ++n) {
                        var i = r[n];
                        Object.defineProperty(t, i, Object.getOwnPropertyDescriptor(e, i))
                    }
            }

            function i(t, e) {
                s.push(t, e)
            }

            function o() {
                for (var t = 0; t < s.length; t += 2) n(s[t], s[t + 1]);
                s.length = 0
            }
            r.__esModule = !0, r.mixin = n, r.delayMixin = i, r.performMixins = o;
            var s = []
        }, {}],
        129: [function(t, e, r) {
            "use strict";

            function n(t) {
                t.__plugins = {}, t.registerPlugin = function(e, r) {
                    t.__plugins[e] = r
                }, t.prototype.initPlugins = function() {
                    this.plugins = this.plugins || {};
                    for (var e in t.__plugins) this.plugins[e] = new t.__plugins[e](this)
                }, t.prototype.destroyPlugins = function() {
                    for (var t in this.plugins) this.plugins[t].destroy(), this.plugins[t] = null;
                    this.plugins = null
                }
            }
            r.__esModule = !0, r.default = {
                mixin: function(t) {
                    n(t)
                }
            }
        }, {}],
        130: [function(t, e, r) {
            "use strict";

            function n(t) {
                var e = t.width,
                    r = t.height,
                    n = t.getContext("2d"),
                    i = n.getImageData(0, 0, e, r),
                    o = i.data,
                    s = o.length,
                    a = {
                        top: null,
                        left: null,
                        right: null,
                        bottom: null
                    },
                    u = null,
                    h = void 0,
                    l = void 0,
                    c = void 0;
                for (h = 0; h < s; h += 4) 0 !== o[h + 3] && (l = h / 4 % e, c = ~~(h / 4 / e), null === a.top && (a.top = c), null === a.left ? a.left = l : l < a.left && (a.left = l), null === a.right ? a.right = l + 1 : a.right < l && (a.right = l + 1), null === a.bottom ? a.bottom = c : a.bottom < c && (a.bottom = c));
                return null !== a.top && (e = a.right - a.left, r = a.bottom - a.top + 1, u = n.getImageData(a.left, a.top, e, r)), {
                    height: r,
                    width: e,
                    data: u
                }
            }
            r.__esModule = !0, r.default = n
        }, {}],
        131: [function(t, e, r) {
            "use strict";

            function n(t) {
                if (!o[t]) {
                    var e = (new Error).stack;
                    void 0 === e ? console.warn("Deprecation Warning: ", t) : (e = e.split("\n").splice(3).join("\n"), console.groupCollapsed ? (console.groupCollapsed("%cDeprecation Warning: %c%s", "color:#614108;background:#fffbe6", "font-weight:normal;color:#614108;background:#fffbe6", t), console.warn(e), console.groupEnd()) : (console.warn("Deprecation Warning: ", t), console.warn(e))), o[t] = !0
                }
            }

            function i(t) {
                var e = t.mesh,
                    r = t.particles,
                    i = t.extras,
                    o = t.filters,
                    s = t.prepare,
                    a = t.loaders,
                    u = t.interaction;
                Object.defineProperties(t, {
                    SpriteBatch: {
                        get: function() {
                            throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")
                        }
                    },
                    AssetLoader: {
                        get: function() {
                            throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")
                        }
                    },
                    Stage: {
                        get: function() {
                            return n("You do not need to use a PIXI Stage any more, you can simply render any container."), t.Container
                        }
                    },
                    DisplayObjectContainer: {
                        get: function() {
                            return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."), t.Container
                        }
                    },
                    Strip: {
                        get: function() {
                            return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."), e.Mesh
                        }
                    },
                    Rope: {
                        get: function() {
                            return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."), e.Rope
                        }
                    },
                    ParticleContainer: {
                        get: function() {
                            return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."), r.ParticleContainer
                        }
                    },
                    MovieClip: {
                        get: function() {
                            return n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."), i.AnimatedSprite
                        }
                    },
                    TilingSprite: {
                        get: function() {
                            return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."), i.TilingSprite
                        }
                    },
                    BitmapText: {
                        get: function() {
                            return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."), i.BitmapText
                        }
                    },
                    blendModes: {
                        get: function() {
                            return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."), t.BLEND_MODES
                        }
                    },
                    scaleModes: {
                        get: function() {
                            return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."), t.SCALE_MODES
                        }
                    },
                    BaseTextureCache: {
                        get: function() {
                            return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."), t.utils.BaseTextureCache
                        }
                    },
                    TextureCache: {
                        get: function() {
                            return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."), t.utils.TextureCache
                        }
                    },
                    math: {
                        get: function() {
                            return n("The math namespace is deprecated, please access members already accessible on PIXI."), t
                        }
                    },
                    AbstractFilter: {
                        get: function() {
                            return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"), t.Filter
                        }
                    },
                    TransformManual: {
                        get: function() {
                            return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"), t.TransformBase
                        }
                    },
                    TARGET_FPMS: {
                        get: function() {
                            return n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"), t.settings.TARGET_FPMS
                        },
                        set: function(e) {
                            n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"), t.settings.TARGET_FPMS = e
                        }
                    },
                    FILTER_RESOLUTION: {
                        get: function() {
                            return n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"), t.settings.FILTER_RESOLUTION
                        },
                        set: function(e) {
                            n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"), t.settings.FILTER_RESOLUTION = e
                        }
                    },
                    RESOLUTION: {
                        get: function() {
                            return n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"), t.settings.RESOLUTION
                        },
                        set: function(e) {
                            n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"), t.settings.RESOLUTION = e
                        }
                    },
                    MIPMAP_TEXTURES: {
                        get: function() {
                            return n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"), t.settings.MIPMAP_TEXTURES
                        },
                        set: function(e) {
                            n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"), t.settings.MIPMAP_TEXTURES = e
                        }
                    },
                    SPRITE_BATCH_SIZE: {
                        get: function() {
                            return n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"), t.settings.SPRITE_BATCH_SIZE
                        },
                        set: function(e) {
                            n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"), t.settings.SPRITE_BATCH_SIZE = e
                        }
                    },
                    SPRITE_MAX_TEXTURES: {
                        get: function() {
                            return n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"), t.settings.SPRITE_MAX_TEXTURES
                        },
                        set: function(e) {
                            n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"), t.settings.SPRITE_MAX_TEXTURES = e
                        }
                    },
                    RETINA_PREFIX: {
                        get: function() {
                            return n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"), t.settings.RETINA_PREFIX
                        },
                        set: function(e) {
                            n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"), t.settings.RETINA_PREFIX = e
                        }
                    },
                    DEFAULT_RENDER_OPTIONS: {
                        get: function() {
                            return n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"), t.settings.RENDER_OPTIONS
                        }
                    }
                });
                for (var h = [{
                        parent: "TRANSFORM_MODE",
                        target: "TRANSFORM_MODE"
                    }, {
                        parent: "GC_MODES",
                        target: "GC_MODE"
                    }, {
                        parent: "WRAP_MODES",
                        target: "WRAP_MODE"
                    }, {
                        parent: "SCALE_MODES",
                        target: "SCALE_MODE"
                    }, {
                        parent: "PRECISION",
                        target: "PRECISION_FRAGMENT"
                    }], l = 0; l < h.length; l++) ! function(e) {
                    var r = h[e];
                    Object.defineProperty(t[r.parent], "DEFAULT", {
                        get: function() {
                            return n("PIXI." + r.parent + ".DEFAULT has been deprecated, please use PIXI.settings." + r.target), t.settings[r.target]
                        },
                        set: function(e) {
                            n("PIXI." + r.parent + ".DEFAULT has been deprecated, please use PIXI.settings." + r.target), t.settings[r.target] = e
                        }
                    })
                }(l);
                Object.defineProperties(t.settings, {
                    PRECISION: {
                        get: function() {
                            return n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"), t.settings.PRECISION_FRAGMENT
                        },
                        set: function(e) {
                            n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"), t.settings.PRECISION_FRAGMENT = e
                        }
                    }
                }), i.AnimatedSprite && Object.defineProperties(i, {
                    MovieClip: {
                        get: function() {
                            return n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."), i.AnimatedSprite
                        }
                    }
                }), i && Object.defineProperties(i, {
                    TextureTransform: {
                        get: function() {
                            return n("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."), t.TextureMatrix
                        }
                    }
                }), t.DisplayObject.prototype.generateTexture = function(t, e, r) {
                    return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"), t.generateTexture(this, e, r)
                }, t.Graphics.prototype.generateTexture = function(t, e) {
                    return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"), this.generateCanvasTexture(t, e)
                }, t.GroupD8.isSwapWidthHeight = function(e) {
                    return n("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"), t.GroupD8.isVertical(e)
                }, t.RenderTexture.prototype.render = function(t, e, r, i) {
                    this.legacyRenderer.render(t, this, r, e, !i), n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")
                }, t.RenderTexture.prototype.getImage = function(t) {
                    return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"), this.legacyRenderer.extract.image(t)
                }, t.RenderTexture.prototype.getBase64 = function(t) {
                    return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"), this.legacyRenderer.extract.base64(t)
                }, t.RenderTexture.prototype.getCanvas = function(t) {
                    return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"), this.legacyRenderer.extract.canvas(t)
                }, t.RenderTexture.prototype.getPixels = function(t) {
                    return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"), this.legacyRenderer.pixels(t)
                }, t.Sprite.prototype.setTexture = function(t) {
                    this.texture = t, n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")
                }, i.BitmapText && (i.BitmapText.prototype.setText = function(t) {
                    this.text = t, n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")
                }), t.Text.prototype.setText = function(t) {
                    this.text = t, n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")
                }, t.Text.calculateFontProperties = function(e) {
                    return n("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"), t.TextMetrics.measureFont(e)
                }, Object.defineProperties(t.Text, {
                    fontPropertiesCache: {
                        get: function() {
                            return n("Text.fontPropertiesCache is deprecated"), t.TextMetrics._fonts
                        }
                    },
                    fontPropertiesCanvas: {
                        get: function() {
                            return n("Text.fontPropertiesCanvas is deprecated"), t.TextMetrics._canvas
                        }
                    },
                    fontPropertiesContext: {
                        get: function() {
                            return n("Text.fontPropertiesContext is deprecated"), t.TextMetrics._context
                        }
                    }
                }), t.Text.prototype.setStyle = function(t) {
                    this.style = t, n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")
                }, t.Text.prototype.determineFontProperties = function(e) {
                    return n("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"), t.TextMetrics.measureFont(e)
                }, t.Text.getFontStyle = function(e) {
                    return n("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"), e = e || {}, e instanceof t.TextStyle || (e = new t.TextStyle(e)), e.toFontString()
                }, Object.defineProperties(t.TextStyle.prototype, {
                    font: {
                        get: function() {
                            n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");
                            var t = "number" == typeof this._fontSize ? this._fontSize + "px" : this._fontSize;
                            return this._fontStyle + " " + this._fontVariant + " " + this._fontWeight + " " + t + " " + this._fontFamily
                        },
                        set: function(t) {
                            n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"), t.indexOf("italic") > 1 ? this._fontStyle = "italic" : t.indexOf("oblique") > -1 ? this._fontStyle = "oblique" : this._fontStyle = "normal", t.indexOf("small-caps") > -1 ? this._fontVariant = "small-caps" : this._fontVariant = "normal";
                            var e = t.split(" "),
                                r = -1;
                            this._fontSize = 26;
                            for (var i = 0; i < e.length; ++i)
                                if (e[i].match(/(px|pt|em|%)/)) {
                                    r = i, this._fontSize = e[i];
                                    break
                                } this._fontWeight = "normal";
                            for (var o = 0; o < r; ++o)
                                if (e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)) {
                                    this._fontWeight = e[o];
                                    break
                                } if (r > -1 && r < e.length - 1) {
                                this._fontFamily = "";
                                for (var s = r + 1; s < e.length; ++s) this._fontFamily += e[s] + " ";
                                this._fontFamily = this._fontFamily.slice(0, -1)
                            } else this._fontFamily = "Arial";
                            this.styleID++
                        }
                    }
                }), t.Texture.prototype.setFrame = function(t) {
                    this.frame = t, n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")
                }, t.Texture.addTextureToCache = function(e, r) {
                    t.Texture.addToCache(e, r), n("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")
                }, t.Texture.removeTextureFromCache = function(e) {
                    return n("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"), t.BaseTexture.removeFromCache(e), t.Texture.removeFromCache(e)
                }, Object.defineProperties(o, {
                    AbstractFilter: {
                        get: function() {
                            return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"), t.AbstractFilter
                        }
                    },
                    SpriteMaskFilter: {
                        get: function() {
                            return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."), t.SpriteMaskFilter
                        }
                    },
                    VoidFilter: {
                        get: function() {
                            return n("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"), o.AlphaFilter
                        }
                    }
                }), t.utils.uuid = function() {
                    return n("utils.uuid() is deprecated, please use utils.uid() from now on."), t.utils.uid()
                }, t.utils.canUseNewCanvasBlendModes = function() {
                    return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"), t.CanvasTinter.canUseMultiply
                };
                var c = !0;
                if (Object.defineProperty(t.utils, "_saidHello", {
                        set: function(t) {
                            t && (n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"), this.skipHello()), c = t
                        },
                        get: function() {
                            return c
                        }
                    }), s.BasePrepare && (s.BasePrepare.prototype.register = function(t, e) {
                        return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"), t && this.registerFindHook(t), e && this.registerUploadHook(e), this
                    }), s.canvas && Object.defineProperty(s.canvas, "UPLOADS_PER_FRAME", {
                        set: function() {
                            n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")
                        },
                        get: function() {
                            return n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"), NaN
                        }
                    }), s.webgl && Object.defineProperty(s.webgl, "UPLOADS_PER_FRAME", {
                        set: function() {
                            n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")
                        },
                        get: function() {
                            return n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"), NaN
                        }
                    }), a.Loader) {
                    var d = a.Resource,
                        f = a.Loader;
                    Object.defineProperties(d.prototype, {
                        isJson: {
                            get: function() {
                                return n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."), this.type === d.TYPE.JSON
                            }
                        },
                        isXml: {
                            get: function() {
                                return n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."), this.type === d.TYPE.XML
                            }
                        },
                        isImage: {
                            get: function() {
                                return n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."), this.type === d.TYPE.IMAGE
                            }
                        },
                        isAudio: {
                            get: function() {
                                return n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."), this.type === d.TYPE.AUDIO
                            }
                        },
                        isVideo: {
                            get: function() {
                                return n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."), this.type === d.TYPE.VIDEO
                            }
                        }
                    }), Object.defineProperties(f.prototype, {
                        before: {
                            get: function() {
                                return n("The before() method is deprecated, please use pre()."), this.pre
                            }
                        },
                        after: {
                            get: function() {
                                return n("The after() method is deprecated, please use use()."), this.use
                            }
                        }
                    })
                }
                u.interactiveTarget && Object.defineProperty(u.interactiveTarget, "defaultCursor", {
                    set: function(t) {
                        n("Property defaultCursor has been replaced with 'cursor'. "), this.cursor = t
                    },
                    get: function() {
                        return n("Property defaultCursor has been replaced with 'cursor'. "), this.cursor
                    }
                }), u.InteractionManager && (Object.defineProperty(u.InteractionManager, "defaultCursorStyle", {
                    set: function(t) {
                        n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "), this.cursorStyles.default = t
                    },
                    get: function() {
                        return n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "), this.cursorStyles.default
                    }
                }), Object.defineProperty(u.InteractionManager, "currentCursorStyle", {
                    set: function(t) {
                        n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."), this.currentCursorMode = t
                    },
                    get: function() {
                        return n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."), this.currentCursorMode
                    }
                }))
            }
            r.__esModule = !0, r.default = i;
            var o = {}
        }, {}],
        132: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("../../core"),
                o = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(i),
                s = new o.Rectangle,
                a = function() {
                    function t(e) {
                        n(this, t), this.renderer = e, e.extract = this
                    }
                    return t.prototype.image = function(t) {
                        var e = new Image;
                        return e.src = this.base64(t), e
                    }, t.prototype.base64 = function(t) {
                        return this.canvas(t).toDataURL()
                    }, t.prototype.canvas = function(t) {
                        var e = this.renderer,
                            r = void 0,
                            n = void 0,
                            i = void 0,
                            a = void 0;
                        t && (a = t instanceof o.RenderTexture ? t : e.generateTexture(t)), a ? (r = a.baseTexture._canvasRenderTarget.context, n = a.baseTexture._canvasRenderTarget.resolution, i = a.frame) : (r = e.rootContext, i = s, i.width = this.renderer.width, i.height = this.renderer.height);
                        var u = i.width * n,
                            h = i.height * n,
                            l = new o.CanvasRenderTarget(u, h, 1),
                            c = r.getImageData(i.x * n, i.y * n, u, h);
                        return l.context.putImageData(c, 0, 0), l.canvas
                    }, t.prototype.pixels = function(t) {
                        var e = this.renderer,
                            r = void 0,
                            n = void 0,
                            i = void 0,
                            a = void 0;
                        return t && (a = t instanceof o.RenderTexture ? t : e.generateTexture(t)), a ? (r = a.baseTexture._canvasRenderTarget.context, n = a.baseTexture._canvasRenderTarget.resolution, i = a.frame) : (r = e.rootContext, i = s, i.width = e.width, i.height = e.height), r.getImageData(0, 0, i.width * n, i.height * n).data
                    }, t.prototype.destroy = function() {
                        this.renderer.extract = null, this.renderer = null
                    }, t
                }();
            r.default = a, o.CanvasRenderer.registerPlugin("extract", a)
        }, {
            "../../core": 65
        }],
        133: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            r.__esModule = !0;
            var i = t("./webgl/WebGLExtract");
            Object.defineProperty(r, "webgl", {
                enumerable: !0,
                get: function() {
                    return n(i).default
                }
            });
            var o = t("./canvas/CanvasExtract");
            Object.defineProperty(r, "canvas", {
                enumerable: !0,
                get: function() {
                    return n(o).default
                }
            })
        }, {
            "./canvas/CanvasExtract": 132,
            "./webgl/WebGLExtract": 134
        }],
        134: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("../../core"),
                o = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(i),
                s = new o.Rectangle,
                a = function() {
                    function t(e) {
                        n(this, t), this.renderer = e, e.extract = this
                    }
                    return t.prototype.image = function(t) {
                        var e = new Image;
                        return e.src = this.base64(t), e
                    }, t.prototype.base64 = function(t) {
                        return this.canvas(t).toDataURL()
                    }, t.prototype.canvas = function(t) {
                        var e = this.renderer,
                            r = void 0,
                            n = void 0,
                            i = void 0,
                            a = !1,
                            u = void 0,
                            h = !1;
                        t && (t instanceof o.RenderTexture ? u = t : (u = this.renderer.generateTexture(t), h = !0)), u ? (r = u.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID], n = r.resolution, i = u.frame, a = !1) : (r = this.renderer.rootRenderTarget, n = r.resolution, a = !0, i = s, i.width = r.size.width, i.height = r.size.height);
                        var l = i.width * n,
                            c = i.height * n,
                            d = new o.CanvasRenderTarget(l, c, 1);
                        if (r) {
                            e.bindRenderTarget(r);
                            var f = new Uint8Array(4 * l * c),
                                p = e.gl;
                            p.readPixels(i.x * n, i.y * n, l, c, p.RGBA, p.UNSIGNED_BYTE, f);
                            var v = d.context.getImageData(0, 0, l, c);
                            v.data.set(f), d.context.putImageData(v, 0, 0), a && (d.context.scale(1, -1), d.context.drawImage(d.canvas, 0, -c))
                        }
                        return h && u.destroy(!0), d.canvas
                    }, t.prototype.pixels = function(t) {
                        var e = this.renderer,
                            r = void 0,
                            n = void 0,
                            i = void 0,
                            a = void 0,
                            u = !1;
                        t && (t instanceof o.RenderTexture ? a = t : (a = this.renderer.generateTexture(t), u = !0)), a ? (r = a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID], n = r.resolution, i = a.frame) : (r = this.renderer.rootRenderTarget, n = r.resolution, i = s, i.width = r.size.width, i.height = r.size.height);
                        var h = i.width * n,
                            l = i.height * n,
                            c = new Uint8Array(4 * h * l);
                        if (r) {
                            e.bindRenderTarget(r);
                            var d = e.gl;
                            d.readPixels(i.x * n, i.y * n, h, l, d.RGBA, d.UNSIGNED_BYTE, c)
                        }
                        return u && a.destroy(!0), c
                    }, t.prototype.destroy = function() {
                        this.renderer.extract = null, this.renderer = null
                    }, t
                }();
            r.default = a, o.WebGLRenderer.registerPlugin("extract", a)
        }, {
            "../../core": 65
        }],
        135: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("../core"),
                u = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(a),
                h = function(t) {
                    function e(r, o) {
                        n(this, e);
                        var s = i(this, t.call(this, r[0] instanceof u.Texture ? r[0] : r[0].texture));
                        return s._textures = null, s._durations = null, s.textures = r, s._autoUpdate = !1 !== o, s.animationSpeed = 1, s.loop = !0, s.onComplete = null, s.onFrameChange = null, s.onLoop = null, s._currentTime = 0, s.playing = !1, s
                    }
                    return o(e, t), e.prototype.stop = function() {
                        this.playing && (this.playing = !1, this._autoUpdate && u.ticker.shared.remove(this.update, this))
                    }, e.prototype.play = function() {
                        this.playing || (this.playing = !0, this._autoUpdate && u.ticker.shared.add(this.update, this, u.UPDATE_PRIORITY.HIGH))
                    }, e.prototype.gotoAndStop = function(t) {
                        this.stop();
                        var e = this.currentFrame;
                        this._currentTime = t, e !== this.currentFrame && this.updateTexture()
                    }, e.prototype.gotoAndPlay = function(t) {
                        var e = this.currentFrame;
                        this._currentTime = t, e !== this.currentFrame && this.updateTexture(), this.play()
                    }, e.prototype.update = function(t) {
                        var e = this.animationSpeed * t,
                            r = this.currentFrame;
                        if (null !== this._durations) {
                            var n = this._currentTime % 1 * this._durations[this.currentFrame];
                            for (n += e / 60 * 1e3; n < 0;) this._currentTime--, n += this._durations[this.currentFrame];
                            var i = Math.sign(this.animationSpeed * t);
                            for (this._currentTime = Math.floor(this._currentTime); n >= this._durations[this.currentFrame];) n -= this._durations[this.currentFrame] * i, this._currentTime += i;
                            this._currentTime += n / this._durations[this.currentFrame]
                        } else this._currentTime += e;
                        this._currentTime < 0 && !this.loop ? (this.gotoAndStop(0), this.onComplete && this.onComplete()) : this._currentTime >= this._textures.length && !this.loop ? (this.gotoAndStop(this._textures.length - 1), this.onComplete && this.onComplete()) : r !== this.currentFrame && (this.loop && this.onLoop && (this.animationSpeed > 0 && this.currentFrame < r ? this.onLoop() : this.animationSpeed < 0 && this.currentFrame > r && this.onLoop()), this.updateTexture())
                    }, e.prototype.updateTexture = function() {
                        this._texture = this._textures[this.currentFrame], this._textureID = -1, this.cachedTint = 16777215, this.onFrameChange && this.onFrameChange(this.currentFrame)
                    }, e.prototype.destroy = function(e) {
                        this.stop(), t.prototype.destroy.call(this, e)
                    }, e.fromFrames = function(t) {
                        for (var r = [], n = 0; n < t.length; ++n) r.push(u.Texture.fromFrame(t[n]));
                        return new e(r)
                    }, e.fromImages = function(t) {
                        for (var r = [], n = 0; n < t.length; ++n) r.push(u.Texture.fromImage(t[n]));
                        return new e(r)
                    }, s(e, [{
                        key: "totalFrames",
                        get: function() {
                            return this._textures.length
                        }
                    }, {
                        key: "textures",
                        get: function() {
                            return this._textures
                        },
                        set: function(t) {
                            if (t[0] instanceof u.Texture) this._textures = t, this._durations = null;
                            else {
                                this._textures = [], this._durations = [];
                                for (var e = 0; e < t.length; e++) this._textures.push(t[e].texture), this._durations.push(t[e].time)
                            }
                            this.gotoAndStop(0), this.updateTexture()
                        }
                    }, {
                        key: "currentFrame",
                        get: function() {
                            var t = Math.floor(this._currentTime) % this._textures.length;
                            return t < 0 && (t += this._textures.length), t
                        }
                    }]), e
                }(u.Sprite);
            r.default = h
        }, {
            "../core": 65
        }],
        136: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                u = t("../core"),
                h = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(u),
                l = t("../core/math/ObservablePoint"),
                c = n(l),
                d = t("../core/utils"),
                f = t("../core/settings"),
                p = n(f),
                v = function(t) {
                    function e(r) {
                        var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                        i(this, e);
                        var s = o(this, t.call(this));
                        return s._textWidth = 0, s._textHeight = 0, s._glyphs = [], s._font = {
                            tint: void 0 !== n.tint ? n.tint : 16777215,
                            align: n.align || "left",
                            name: null,
                            size: 0
                        }, s.font = n.font, s._text = r, s._maxWidth = 0, s._maxLineHeight = 0, s._letterSpacing = 0, s._anchor = new c.default(function() {
                            s.dirty = !0
                        }, s, 0, 0), s.dirty = !1, s.updateText(), s
                    }
                    return s(e, t), e.prototype.updateText = function() {
                        for (var t = e.fonts[this._font.name], r = this._font.size / t.size, n = new h.Point, i = [], o = [], s = this.text.replace(/(?:\r\n|\r)/g, "\n"), a = s.length, u = this._maxWidth * t.size / this._font.size, l = null, c = 0, d = 0, f = 0, p = -1, v = 0, g = 0, y = 0, m = 0; m < a; m++) {
                            var _ = s.charCodeAt(m),
                                b = s.charAt(m);
                            if (/(?:\s)/.test(b) && (p = m, v = c), "\r" !== b && "\n" !== b) {
                                var x = t.chars[_];
                                x && (l && x.kerning[l] && (n.x += x.kerning[l]), i.push({
                                    texture: x.texture,
                                    line: f,
                                    charCode: _,
                                    position: new h.Point(n.x + x.xOffset + this._letterSpacing / 2, n.y + x.yOffset)
                                }), n.x += x.xAdvance + this._letterSpacing, c = n.x, y = Math.max(y, x.yOffset + x.texture.height), l = _, -1 !== p && u > 0 && n.x > u && (++g, h.utils.removeItems(i, 1 + p - g, 1 + m - p), m = p, p = -1, o.push(v), d = Math.max(d, v), f++, n.x = 0, n.y += t.lineHeight, l = null))
                            } else o.push(c), d = Math.max(d, c), ++f, ++g, n.x = 0, n.y += t.lineHeight, l = null
                        }
                        var T = s.charAt(s.length - 1);
                        "\r" !== T && "\n" !== T && (/(?:\s)/.test(T) && (c = v), o.push(c), d = Math.max(d, c));
                        for (var w = [], E = 0; E <= f; E++) {
                            var S = 0;
                            "right" === this._font.align ? S = d - o[E] : "center" === this._font.align && (S = (d - o[E]) / 2), w.push(S)
                        }
                        for (var O = i.length, M = this.tint, P = 0; P < O; P++) {
                            var C = this._glyphs[P];
                            C ? C.texture = i[P].texture : (C = new h.Sprite(i[P].texture), this._glyphs.push(C)), C.position.x = (i[P].position.x + w[i[P].line]) * r, C.position.y = i[P].position.y * r, C.scale.x = C.scale.y = r, C.tint = M, C.parent || this.addChild(C)
                        }
                        for (var R = O; R < this._glyphs.length; ++R) this.removeChild(this._glyphs[R]);
                        if (this._textWidth = d * r, this._textHeight = (n.y + t.lineHeight) * r, 0 !== this.anchor.x || 0 !== this.anchor.y)
                            for (var A = 0; A < O; A++) this._glyphs[A].x -= this._textWidth * this.anchor.x, this._glyphs[A].y -= this._textHeight * this.anchor.y;
                        this._maxLineHeight = y * r
                    }, e.prototype.updateTransform = function() {
                        this.validate(), this.containerUpdateTransform()
                    }, e.prototype.getLocalBounds = function() {
                        return this.validate(), t.prototype.getLocalBounds.call(this)
                    }, e.prototype.validate = function() {
                        this.dirty && (this.updateText(), this.dirty = !1)
                    }, e.registerFont = function(t, r) {
                        var n = {},
                            i = t.getElementsByTagName("info")[0],
                            o = t.getElementsByTagName("common")[0],
                            s = t.getElementsByTagName("page"),
                            a = (0, d.getResolutionOfUrl)(s[0].getAttribute("file"), p.default.RESOLUTION),
                            u = {};
                        n.font = i.getAttribute("face"), n.size = parseInt(i.getAttribute("size"), 10), n.lineHeight = parseInt(o.getAttribute("lineHeight"), 10) / a, n.chars = {}, r instanceof h.Texture && (r = [r]);
                        for (var l = 0; l < s.length; l++) {
                            var c = s[l].getAttribute("id"),
                                f = s[l].getAttribute("file");
                            u[c] = r instanceof Array ? r[l] : r[f]
                        }
                        for (var v = t.getElementsByTagName("char"), g = 0; g < v.length; g++) {
                            var y = v[g],
                                m = parseInt(y.getAttribute("id"), 10),
                                _ = y.getAttribute("page") || 0,
                                b = new h.Rectangle(parseInt(y.getAttribute("x"), 10) / a + u[_].frame.x / a, parseInt(y.getAttribute("y"), 10) / a + u[_].frame.y / a, parseInt(y.getAttribute("width"), 10) / a, parseInt(y.getAttribute("height"), 10) / a);
                            n.chars[m] = {
                                xOffset: parseInt(y.getAttribute("xoffset"), 10) / a,
                                yOffset: parseInt(y.getAttribute("yoffset"), 10) / a,
                                xAdvance: parseInt(y.getAttribute("xadvance"), 10) / a,
                                kerning: {},
                                texture: new h.Texture(u[_].baseTexture, b),
                                page: _
                            }
                        }
                        for (var x = t.getElementsByTagName("kerning"), T = 0; T < x.length; T++) {
                            var w = x[T],
                                E = parseInt(w.getAttribute("first"), 10) / a,
                                S = parseInt(w.getAttribute("second"), 10) / a,
                                O = parseInt(w.getAttribute("amount"), 10) / a;
                            n.chars[S] && (n.chars[S].kerning[E] = O)
                        }
                        return e.fonts[n.font] = n, n
                    }, a(e, [{
                        key: "tint",
                        get: function() {
                            return this._font.tint
                        },
                        set: function(t) {
                            this._font.tint = "number" == typeof t && t >= 0 ? t : 16777215, this.dirty = !0
                        }
                    }, {
                        key: "align",
                        get: function() {
                            return this._font.align
                        },
                        set: function(t) {
                            this._font.align = t || "left", this.dirty = !0
                        }
                    }, {
                        key: "anchor",
                        get: function() {
                            return this._anchor
                        },
                        set: function(t) {
                            "number" == typeof t ? this._anchor.set(t) : this._anchor.copy(t)
                        }
                    }, {
                        key: "font",
                        get: function() {
                            return this._font
                        },
                        set: function(t) {
                            t && ("string" == typeof t ? (t = t.split(" "), this._font.name = 1 === t.length ? t[0] : t.slice(1).join(" "), this._font.size = t.length >= 2 ? parseInt(t[0], 10) : e.fonts[this._font.name].size) : (this._font.name = t.name, this._font.size = "number" == typeof t.size ? t.size : parseInt(t.size, 10)), this.dirty = !0)
                        }
                    }, {
                        key: "text",
                        get: function() {
                            return this._text
                        },
                        set: function(t) {
                            t = t.toString() || " ", this._text !== t && (this._text = t, this.dirty = !0)
                        }
                    }, {
                        key: "maxWidth",
                        get: function() {
                            return this._maxWidth
                        },
                        set: function(t) {
                            this._maxWidth !== t && (this._maxWidth = t, this.dirty = !0)
                        }
                    }, {
                        key: "maxLineHeight",
                        get: function() {
                            return this.validate(), this._maxLineHeight
                        }
                    }, {
                        key: "textWidth",
                        get: function() {
                            return this.validate(), this._textWidth
                        }
                    }, {
                        key: "letterSpacing",
                        get: function() {
                            return this._letterSpacing
                        },
                        set: function(t) {
                            this._letterSpacing !== t && (this._letterSpacing = t, this.dirty = !0)
                        }
                    }, {
                        key: "textHeight",
                        get: function() {
                            return this.validate(), this._textHeight
                        }
                    }]), e
                }(h.Container);
            r.default = v, v.fonts = {}
        }, {
            "../core": 65,
            "../core/math/ObservablePoint": 68,
            "../core/settings": 101,
            "../core/utils": 125
        }],
        137: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("../core"),
                u = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(a),
                h = t("../core/sprites/canvas/CanvasTinter"),
                l = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(h),
                c = new u.Point,
                d = function(t) {
                    function e(r) {
                        var o = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 100,
                            s = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 100;
                        n(this, e);
                        var a = i(this, t.call(this, r));
                        return a.tileTransform = new u.TransformStatic, a._width = o, a._height = s, a._canvasPattern = null, a.uvTransform = r.transform || new u.TextureMatrix(r), a.pluginName = "tilingSprite", a.uvRespectAnchor = !1, a
                    }
                    return o(e, t), e.prototype._onTextureUpdate = function() {
                        this.uvTransform && (this.uvTransform.texture = this._texture), this.cachedTint = 16777215
                    }, e.prototype._renderWebGL = function(t) {
                        var e = this._texture;
                        e && e.valid && (this.tileTransform.updateLocalTransform(), this.uvTransform.update(), t.setObjectRenderer(t.plugins[this.pluginName]), t.plugins[this.pluginName].render(this))
                    }, e.prototype._renderCanvas = function(t) {
                        var e = this._texture;
                        if (e.baseTexture.hasLoaded) {
                            var r = t.context,
                                n = this.worldTransform,
                                i = t.resolution,
                                o = e.baseTexture,
                                s = o.resolution,
                                a = this.tilePosition.x / this.tileScale.x % e._frame.width * s,
                                h = this.tilePosition.y / this.tileScale.y % e._frame.height * s;
                            if (this._textureID !== this._texture._updateID || this.cachedTint !== this.tint) {
                                this._textureID = this._texture._updateID;
                                var c = new u.CanvasRenderTarget(e._frame.width, e._frame.height, s);
                                16777215 !== this.tint ? (this.tintedTexture = l.default.getTintedTexture(this, this.tint), c.context.drawImage(this.tintedTexture, 0, 0)) : c.context.drawImage(o.source, -e._frame.x * s, -e._frame.y * s), this.cachedTint = this.tint, this._canvasPattern = c.context.createPattern(c.canvas, "repeat")
                            }
                            r.globalAlpha = this.worldAlpha, r.setTransform(n.a * i, n.b * i, n.c * i, n.d * i, n.tx * i, n.ty * i), t.setBlendMode(this.blendMode), r.fillStyle = this._canvasPattern, r.scale(this.tileScale.x / s, this.tileScale.y / s);
                            var d = this.anchor.x * -this._width,
                                f = this.anchor.y * -this._height;
                            this.uvRespectAnchor ? (r.translate(a, h), r.fillRect(-a + d, -h + f, this._width / this.tileScale.x * s, this._height / this.tileScale.y * s)) : (r.translate(a + d, h + f), r.fillRect(-a, -h, this._width / this.tileScale.x * s, this._height / this.tileScale.y * s))
                        }
                    }, e.prototype._calculateBounds = function() {
                        var t = this._width * -this._anchor._x,
                            e = this._height * -this._anchor._y,
                            r = this._width * (1 - this._anchor._x),
                            n = this._height * (1 - this._anchor._y);
                        this._bounds.addFrame(this.transform, t, e, r, n)
                    }, e.prototype.getLocalBounds = function(e) {
                        return 0 === this.children.length ? (this._bounds.minX = this._width * -this._anchor._x, this._bounds.minY = this._height * -this._anchor._y, this._bounds.maxX = this._width * (1 - this._anchor._x), this._bounds.maxY = this._height * (1 - this._anchor._y), e || (this._localBoundsRect || (this._localBoundsRect = new u.Rectangle), e = this._localBoundsRect), this._bounds.getRectangle(e)) : t.prototype.getLocalBounds.call(this, e)
                    }, e.prototype.containsPoint = function(t) {
                        this.worldTransform.applyInverse(t, c);
                        var e = this._width,
                            r = this._height,
                            n = -e * this.anchor._x;
                        if (c.x >= n && c.x < n + e) {
                            var i = -r * this.anchor._y;
                            if (c.y >= i && c.y < i + r) return !0
                        }
                        return !1
                    }, e.prototype.destroy = function(e) {
                        t.prototype.destroy.call(this, e), this.tileTransform = null, this.uvTransform = null
                    }, e.from = function(t, r, n) {
                        return new e(u.Texture.from(t), r, n)
                    }, e.fromFrame = function(t, r, n) {
                        var i = u.utils.TextureCache[t];
                        if (!i) throw new Error('The frameId "' + t + '" does not exist in the texture cache ' + this);
                        return new e(i, r, n)
                    }, e.fromImage = function(t, r, n, i, o) {
                        return new e(u.Texture.fromImage(t, i, o), r, n)
                    }, s(e, [{
                        key: "clampMargin",
                        get: function() {
                            return this.uvTransform.clampMargin
                        },
                        set: function(t) {
                            this.uvTransform.clampMargin = t, this.uvTransform.update(!0)
                        }
                    }, {
                        key: "tileScale",
                        get: function() {
                            return this.tileTransform.scale
                        },
                        set: function(t) {
                            this.tileTransform.scale.copy(t)
                        }
                    }, {
                        key: "tilePosition",
                        get: function() {
                            return this.tileTransform.position
                        },
                        set: function(t) {
                            this.tileTransform.position.copy(t)
                        }
                    }, {
                        key: "width",
                        get: function() {
                            return this._width
                        },
                        set: function(t) {
                            this._width = t
                        }
                    }, {
                        key: "height",
                        get: function() {
                            return this._height
                        },
                        set: function(t) {
                            this._height = t
                        }
                    }]), e
                }(u.Sprite);
            r.default = d
        }, {
            "../core": 65,
            "../core/sprites/canvas/CanvasTinter": 104
        }],
        138: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            var o = t("../core"),
                s = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(o),
                a = t("../core/textures/Texture"),
                u = n(a),
                h = t("../core/textures/BaseTexture"),
                l = n(h),
                c = t("../core/utils"),
                d = s.DisplayObject,
                f = new s.Matrix;
            d.prototype._cacheAsBitmap = !1, d.prototype._cacheData = !1;
            var p = function t() {
                i(this, t), this.textureCacheId = null, this.originalRenderWebGL = null, this.originalRenderCanvas = null, this.originalCalculateBounds = null, this.originalGetLocalBounds = null, this.originalUpdateTransform = null, this.originalHitTest = null, this.originalDestroy = null, this.originalMask = null, this.originalFilterArea = null, this.sprite = null
            };
            Object.defineProperties(d.prototype, {
                cacheAsBitmap: {
                    get: function() {
                        return this._cacheAsBitmap
                    },
                    set: function(t) {
                        if (this._cacheAsBitmap !== t) {
                            this._cacheAsBitmap = t;
                            var e = void 0;
                            t ? (this._cacheData || (this._cacheData = new p), e = this._cacheData, e.originalRenderWebGL = this.renderWebGL, e.originalRenderCanvas = this.renderCanvas, e.originalUpdateTransform = this.updateTransform, e.originalCalculateBounds = this._calculateBounds, e.originalGetLocalBounds = this.getLocalBounds, e.originalDestroy = this.destroy, e.originalContainsPoint = this.containsPoint,
                                e.originalMask = this._mask, e.originalFilterArea = this.filterArea, this.renderWebGL = this._renderCachedWebGL, this.renderCanvas = this._renderCachedCanvas, this.destroy = this._cacheAsBitmapDestroy) : (e = this._cacheData, e.sprite && this._destroyCachedDisplayObject(), this.renderWebGL = e.originalRenderWebGL, this.renderCanvas = e.originalRenderCanvas, this._calculateBounds = e.originalCalculateBounds, this.getLocalBounds = e.originalGetLocalBounds, this.destroy = e.originalDestroy, this.updateTransform = e.originalUpdateTransform, this.containsPoint = e.originalContainsPoint, this._mask = e.originalMask, this.filterArea = e.originalFilterArea)
                        }
                    }
                }
            }), d.prototype._renderCachedWebGL = function(t) {
                !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObject(t), this._cacheData.sprite._transformID = -1, this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._renderWebGL(t))
            }, d.prototype._initCachedDisplayObject = function(t) {
                if (!this._cacheData || !this._cacheData.sprite) {
                    var e = this.alpha;
                    this.alpha = 1, t.currentRenderer.flush();
                    var r = this.getLocalBounds().clone();
                    if (this._filters) {
                        var n = this._filters[0].padding;
                        r.pad(n)
                    }
                    var i = t._activeRenderTarget,
                        o = t.filterManager.filterStack,
                        a = s.RenderTexture.create(0 | r.width, 0 | r.height),
                        h = "cacheAsBitmap_" + (0, c.uid)();
                    this._cacheData.textureCacheId = h, l.default.addToCache(a.baseTexture, h), u.default.addToCache(a, h);
                    var d = f;
                    d.tx = -r.x, d.ty = -r.y, this.transform.worldTransform.identity(), this.renderWebGL = this._cacheData.originalRenderWebGL, t.render(this, a, !0, d, !0), t.bindRenderTarget(i), t.filterManager.filterStack = o, this.renderWebGL = this._renderCachedWebGL, this.updateTransform = this.displayObjectUpdateTransform, this._mask = null, this.filterArea = null;
                    var p = new s.Sprite(a);
                    p.transform.worldTransform = this.transform.worldTransform, p.anchor.x = -r.x / r.width, p.anchor.y = -r.y / r.height, p.alpha = e, p._bounds = this._bounds, this._calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._cacheData.sprite = p, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.parent = t._tempDisplayObjectParent, this.updateTransform(), this.parent = null), this.containsPoint = p.containsPoint.bind(p)
                }
            }, d.prototype._renderCachedCanvas = function(t) {
                !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObjectCanvas(t), this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite.renderCanvas(t))
            }, d.prototype._initCachedDisplayObjectCanvas = function(t) {
                if (!this._cacheData || !this._cacheData.sprite) {
                    var e = this.getLocalBounds(),
                        r = this.alpha;
                    this.alpha = 1;
                    var n = t.context,
                        i = s.RenderTexture.create(0 | e.width, 0 | e.height),
                        o = "cacheAsBitmap_" + (0, c.uid)();
                    this._cacheData.textureCacheId = o, l.default.addToCache(i.baseTexture, o), u.default.addToCache(i, o);
                    var a = f;
                    this.transform.localTransform.copy(a), a.invert(), a.tx -= e.x, a.ty -= e.y, this.renderCanvas = this._cacheData.originalRenderCanvas, t.render(this, i, !0, a, !1), t.context = n, this.renderCanvas = this._renderCachedCanvas, this._calculateBounds = this._calculateCachedBounds, this._mask = null, this.filterArea = null;
                    var h = new s.Sprite(i);
                    h.transform.worldTransform = this.transform.worldTransform, h.anchor.x = -e.x / e.width, h.anchor.y = -e.y / e.height, h._bounds = this._bounds, h.alpha = r, this.parent ? this.updateTransform() : (this.parent = t._tempDisplayObjectParent, this.updateTransform(), this.parent = null), this.updateTransform = this.displayObjectUpdateTransform, this._cacheData.sprite = h, this.containsPoint = h.containsPoint.bind(h)
                }
            }, d.prototype._calculateCachedBounds = function() {
                this._cacheData.sprite._calculateBounds()
            }, d.prototype._getCachedLocalBounds = function() {
                return this._cacheData.sprite.getLocalBounds()
            }, d.prototype._destroyCachedDisplayObject = function() {
                this._cacheData.sprite._texture.destroy(!0), this._cacheData.sprite = null, l.default.removeFromCache(this._cacheData.textureCacheId), u.default.removeFromCache(this._cacheData.textureCacheId), this._cacheData.textureCacheId = null
            }, d.prototype._cacheAsBitmapDestroy = function(t) {
                this.cacheAsBitmap = !1, this.destroy(t)
            }
        }, {
            "../core": 65,
            "../core/textures/BaseTexture": 112,
            "../core/textures/Texture": 115,
            "../core/utils": 125
        }],
        139: [function(t, e, r) {
            "use strict";
            var n = t("../core"),
                i = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(n);
            i.DisplayObject.prototype.name = null, i.Container.prototype.getChildByName = function(t) {
                for (var e = 0; e < this.children.length; e++)
                    if (this.children[e].name === t) return this.children[e];
                return null
            }
        }, {
            "../core": 65
        }],
        140: [function(t, e, r) {
            "use strict";
            var n = t("../core"),
                i = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(n);
            i.DisplayObject.prototype.getGlobalPosition = function() {
                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new i.Point,
                    e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                return this.parent ? this.parent.toGlobal(this.position, t, e) : (t.x = this.position.x, t.y = this.position.y), t
            }
        }, {
            "../core": 65
        }],
        141: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            r.__esModule = !0, r.BitmapText = r.TilingSpriteRenderer = r.TilingSprite = r.AnimatedSprite = void 0;
            var i = t("./AnimatedSprite");
            Object.defineProperty(r, "AnimatedSprite", {
                enumerable: !0,
                get: function() {
                    return n(i).default
                }
            });
            var o = t("./TilingSprite");
            Object.defineProperty(r, "TilingSprite", {
                enumerable: !0,
                get: function() {
                    return n(o).default
                }
            });
            var s = t("./webgl/TilingSpriteRenderer");
            Object.defineProperty(r, "TilingSpriteRenderer", {
                enumerable: !0,
                get: function() {
                    return n(s).default
                }
            });
            var a = t("./BitmapText");
            Object.defineProperty(r, "BitmapText", {
                enumerable: !0,
                get: function() {
                    return n(a).default
                }
            }), t("./cacheAsBitmap"), t("./getChildByName"), t("./getGlobalPosition")
        }, {
            "./AnimatedSprite": 135,
            "./BitmapText": 136,
            "./TilingSprite": 137,
            "./cacheAsBitmap": 138,
            "./getChildByName": 139,
            "./getGlobalPosition": 140,
            "./webgl/TilingSpriteRenderer": 142
        }],
        142: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = t("../../core"),
                a = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(s),
                u = t("../../core/const"),
                h = (t("path"), new a.Matrix),
                l = function(t) {
                    function e(r) {
                        n(this, e);
                        var o = i(this, t.call(this, r));
                        return o.shader = null, o.simpleShader = null, o.quad = null, o
                    }
                    return o(e, t), e.prototype.onContextChange = function() {
                        var t = this.renderer.gl;
                        this.shader = new a.Shader(t, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n", "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"), this.simpleShader = new a.Shader(t, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n", "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"), this.renderer.bindVao(null), this.quad = new a.Quad(t, this.renderer.state.attribState), this.quad.initVao(this.shader)
                    }, e.prototype.render = function(t) {
                        var e = this.renderer,
                            r = this.quad;
                        e.bindVao(r.vao);
                        var n = r.vertices;
                        n[0] = n[6] = t._width * -t.anchor.x, n[1] = n[3] = t._height * -t.anchor.y, n[2] = n[4] = t._width * (1 - t.anchor.x), n[5] = n[7] = t._height * (1 - t.anchor.y), t.uvRespectAnchor && (n = r.uvs, n[0] = n[6] = -t.anchor.x, n[1] = n[3] = -t.anchor.y, n[2] = n[4] = 1 - t.anchor.x, n[5] = n[7] = 1 - t.anchor.y), r.upload();
                        var i = t._texture,
                            o = i.baseTexture,
                            s = t.tileTransform.localTransform,
                            l = t.uvTransform,
                            c = o.isPowerOfTwo && i.frame.width === o.width && i.frame.height === o.height;
                        c && (o._glTextures[e.CONTEXT_UID] ? c = o.wrapMode !== u.WRAP_MODES.CLAMP : o.wrapMode === u.WRAP_MODES.CLAMP && (o.wrapMode = u.WRAP_MODES.REPEAT));
                        var d = c ? this.simpleShader : this.shader;
                        e.bindShader(d);
                        var f = i.width,
                            p = i.height,
                            v = t._width,
                            g = t._height;
                        h.set(s.a * f / v, s.b * f / g, s.c * p / v, s.d * p / g, s.tx / v, s.ty / g), h.invert(), c ? h.prepend(l.mapCoord) : (d.uniforms.uMapCoord = l.mapCoord.toArray(!0), d.uniforms.uClampFrame = l.uClampFrame, d.uniforms.uClampOffset = l.uClampOffset), d.uniforms.uTransform = h.toArray(!0), d.uniforms.uColor = a.utils.premultiplyTintToRgba(t.tint, t.worldAlpha, d.uniforms.uColor, o.premultipliedAlpha), d.uniforms.translationMatrix = t.transform.worldTransform.toArray(!0), d.uniforms.uSampler = e.bindTexture(i), e.setBlendMode(a.utils.correctBlendMode(t.blendMode, o.premultipliedAlpha)), r.vao.draw(this.renderer.gl.TRIANGLES, 6, 0)
                    }, e
                }(a.ObjectRenderer);
            r.default = l, a.WebGLRenderer.registerPlugin("tilingSprite", l)
        }, {
            "../../core": 65,
            "../../core/const": 46,
            path: 8
        }],
        143: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("../../core"),
                u = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(a),
                h = (t("path"), function(t) {
                    function e() {
                        var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1;
                        n(this, e);
                        var o = i(this, t.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}", "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));
                        return o.alpha = r, o.glShaderKey = "alpha", o
                    }
                    return o(e, t), s(e, [{
                        key: "alpha",
                        get: function() {
                            return this.uniforms.uAlpha
                        },
                        set: function(t) {
                            this.uniforms.uAlpha = t
                        }
                    }]), e
                }(u.Filter));
            r.default = h
        }, {
            "../../core": 65,
            path: 8
        }],
        144: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                u = t("../../core"),
                h = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(u),
                l = t("./BlurXFilter"),
                c = n(l),
                d = t("./BlurYFilter"),
                f = n(d),
                p = function(t) {
                    function e(r, n, s, a) {
                        i(this, e);
                        var u = o(this, t.call(this));
                        return u.blurXFilter = new c.default(r, n, s, a), u.blurYFilter = new f.default(r, n, s, a), u.padding = 0, u.resolution = s || h.settings.RESOLUTION, u.quality = n || 4, u.blur = r || 8, u
                    }
                    return s(e, t), e.prototype.apply = function(t, e, r) {
                        var n = t.getRenderTarget(!0);
                        this.blurXFilter.apply(t, e, n, !0), this.blurYFilter.apply(t, n, r, !1), t.returnRenderTarget(n)
                    }, a(e, [{
                        key: "blur",
                        get: function() {
                            return this.blurXFilter.blur
                        },
                        set: function(t) {
                            this.blurXFilter.blur = this.blurYFilter.blur = t, this.padding = 2 * Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength))
                        }
                    }, {
                        key: "quality",
                        get: function() {
                            return this.blurXFilter.quality
                        },
                        set: function(t) {
                            this.blurXFilter.quality = this.blurYFilter.quality = t
                        }
                    }, {
                        key: "blurX",
                        get: function() {
                            return this.blurXFilter.blur
                        },
                        set: function(t) {
                            this.blurXFilter.blur = t, this.padding = 2 * Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength))
                        }
                    }, {
                        key: "blurY",
                        get: function() {
                            return this.blurYFilter.blur
                        },
                        set: function(t) {
                            this.blurYFilter.blur = t, this.padding = 2 * Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength))
                        }
                    }, {
                        key: "blendMode",
                        get: function() {
                            return this.blurYFilter._blendMode
                        },
                        set: function(t) {
                            this.blurYFilter._blendMode = t
                        }
                    }]), e
                }(h.Filter);
            r.default = p
        }, {
            "../../core": 65,
            "./BlurXFilter": 145,
            "./BlurYFilter": 146
        }],
        145: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                u = t("../../core"),
                h = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(u),
                l = t("./generateBlurVertSource"),
                c = n(l),
                d = t("./generateBlurFragSource"),
                f = n(d),
                p = t("./getMaxBlurKernelSize"),
                v = n(p),
                g = function(t) {
                    function e(r, n, s, a) {
                        i(this, e), a = a || 5;
                        var u = (0, c.default)(a, !0),
                            l = (0, f.default)(a),
                            d = o(this, t.call(this, u, l));
                        return d.resolution = s || h.settings.RESOLUTION, d._quality = 0, d.quality = n || 4, d.strength = r || 8, d.firstRun = !0, d
                    }
                    return s(e, t), e.prototype.apply = function(t, e, r, n) {
                        if (this.firstRun) {
                            var i = t.renderer.gl,
                                o = (0, v.default)(i);
                            this.vertexSrc = (0, c.default)(o, !0), this.fragmentSrc = (0, f.default)(o), this.firstRun = !1
                        }
                        if (this.uniforms.strength = 1 / r.size.width * (r.size.width / e.size.width), this.uniforms.strength *= this.strength, this.uniforms.strength /= this.passes, 1 === this.passes) t.applyFilter(this, e, r, n);
                        else {
                            for (var s = t.getRenderTarget(!0), a = e, u = s, h = 0; h < this.passes - 1; h++) {
                                t.applyFilter(this, a, u, !0);
                                var l = u;
                                u = a, a = l
                            }
                            t.applyFilter(this, a, r, n), t.returnRenderTarget(s)
                        }
                    }, a(e, [{
                        key: "blur",
                        get: function() {
                            return this.strength
                        },
                        set: function(t) {
                            this.padding = 2 * Math.abs(t), this.strength = t
                        }
                    }, {
                        key: "quality",
                        get: function() {
                            return this._quality
                        },
                        set: function(t) {
                            this._quality = t, this.passes = t
                        }
                    }]), e
                }(h.Filter);
            r.default = g
        }, {
            "../../core": 65,
            "./generateBlurFragSource": 147,
            "./generateBlurVertSource": 148,
            "./getMaxBlurKernelSize": 149
        }],
        146: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                u = t("../../core"),
                h = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(u),
                l = t("./generateBlurVertSource"),
                c = n(l),
                d = t("./generateBlurFragSource"),
                f = n(d),
                p = t("./getMaxBlurKernelSize"),
                v = n(p),
                g = function(t) {
                    function e(r, n, s, a) {
                        i(this, e), a = a || 5;
                        var u = (0, c.default)(a, !1),
                            l = (0, f.default)(a),
                            d = o(this, t.call(this, u, l));
                        return d.resolution = s || h.settings.RESOLUTION, d._quality = 0, d.quality = n || 4, d.strength = r || 8, d.firstRun = !0, d
                    }
                    return s(e, t), e.prototype.apply = function(t, e, r, n) {
                        if (this.firstRun) {
                            var i = t.renderer.gl,
                                o = (0, v.default)(i);
                            this.vertexSrc = (0, c.default)(o, !1), this.fragmentSrc = (0, f.default)(o), this.firstRun = !1
                        }
                        if (this.uniforms.strength = 1 / r.size.height * (r.size.height / e.size.height), this.uniforms.strength *= this.strength, this.uniforms.strength /= this.passes, 1 === this.passes) t.applyFilter(this, e, r, n);
                        else {
                            for (var s = t.getRenderTarget(!0), a = e, u = s, h = 0; h < this.passes - 1; h++) {
                                t.applyFilter(this, a, u, !0);
                                var l = u;
                                u = a, a = l
                            }
                            t.applyFilter(this, a, r, n), t.returnRenderTarget(s)
                        }
                    }, a(e, [{
                        key: "blur",
                        get: function() {
                            return this.strength
                        },
                        set: function(t) {
                            this.padding = 2 * Math.abs(t), this.strength = t
                        }
                    }, {
                        key: "quality",
                        get: function() {
                            return this._quality
                        },
                        set: function(t) {
                            this._quality = t, this.passes = t
                        }
                    }]), e
                }(h.Filter);
            r.default = g
        }, {
            "../../core": 65,
            "./generateBlurFragSource": 147,
            "./generateBlurVertSource": 148,
            "./getMaxBlurKernelSize": 149
        }],
        147: [function(t, e, r) {
            "use strict";

            function n(t) {
                for (var e = i[t], r = e.length, n = o, s = "", a = "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;", u = void 0, h = 0; h < t; h++) {
                    var l = a.replace("%index%", h);
                    u = h, h >= r && (u = t - h - 1), l = l.replace("%value%", e[u]), s += l, s += "\n"
                }
                return n = n.replace("%blur%", s), n = n.replace("%size%", t)
            }
            r.__esModule = !0, r.default = n;
            var i = {
                    5: [.153388, .221461, .250301],
                    7: [.071303, .131514, .189879, .214607],
                    9: [.028532, .067234, .124009, .179044, .20236],
                    11: [.0093, .028002, .065984, .121703, .175713, .198596],
                    13: [.002406, .009255, .027867, .065666, .121117, .174868, .197641],
                    15: [489e-6, .002403, .009246, .02784, .065602, .120999, .174697, .197448]
                },
                o = ["varying vec2 vBlurTexCoords[%size%];", "uniform sampler2D uSampler;", "void main(void)", "{", "    gl_FragColor = vec4(0.0);", "    %blur%", "}"].join("\n")
        }, {}],
        148: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                var r = Math.ceil(t / 2),
                    n = i,
                    o = "",
                    s = void 0;
                s = e ? "vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);" : "vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";
                for (var a = 0; a < t; a++) {
                    var u = s.replace("%index%", a);
                    u = u.replace("%sampleIndex%", a - (r - 1) + ".0"), o += u, o += "\n"
                }
                return n = n.replace("%blur%", o), n = n.replace("%size%", t)
            }
            r.__esModule = !0, r.default = n;
            var i = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "uniform float strength;", "uniform mat3 projectionMatrix;", "varying vec2 vBlurTexCoords[%size%];", "void main(void)", "{", "gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);", "%blur%", "}"].join("\n")
        }, {}],
        149: [function(t, e, r) {
            "use strict";

            function n(t) {
                for (var e = t.getParameter(t.MAX_VARYING_VECTORS), r = 15; r > e;) r -= 2;
                return r
            }
            r.__esModule = !0, r.default = n
        }, {}],
        150: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("../../core"),
                u = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(a),
                h = (t("path"), function(t) {
                    function e() {
                        n(this, e);
                        var r = i(this, t.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}", "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));
                        return r.uniforms.m = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0], r.alpha = 1, r
                    }
                    return o(e, t), e.prototype._loadMatrix = function(t) {
                        var e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                            r = t;
                        e && (this._multiply(r, this.uniforms.m, t), r = this._colorMatrix(r)), this.uniforms.m = r
                    }, e.prototype._multiply = function(t, e, r) {
                        return t[0] = e[0] * r[0] + e[1] * r[5] + e[2] * r[10] + e[3] * r[15], t[1] = e[0] * r[1] + e[1] * r[6] + e[2] * r[11] + e[3] * r[16], t[2] = e[0] * r[2] + e[1] * r[7] + e[2] * r[12] + e[3] * r[17], t[3] = e[0] * r[3] + e[1] * r[8] + e[2] * r[13] + e[3] * r[18], t[4] = e[0] * r[4] + e[1] * r[9] + e[2] * r[14] + e[3] * r[19] + e[4], t[5] = e[5] * r[0] + e[6] * r[5] + e[7] * r[10] + e[8] * r[15], t[6] = e[5] * r[1] + e[6] * r[6] + e[7] * r[11] + e[8] * r[16], t[7] = e[5] * r[2] + e[6] * r[7] + e[7] * r[12] + e[8] * r[17], t[8] = e[5] * r[3] + e[6] * r[8] + e[7] * r[13] + e[8] * r[18], t[9] = e[5] * r[4] + e[6] * r[9] + e[7] * r[14] + e[8] * r[19] + e[9], t[10] = e[10] * r[0] + e[11] * r[5] + e[12] * r[10] + e[13] * r[15], t[11] = e[10] * r[1] + e[11] * r[6] + e[12] * r[11] + e[13] * r[16], t[12] = e[10] * r[2] + e[11] * r[7] + e[12] * r[12] + e[13] * r[17], t[13] = e[10] * r[3] + e[11] * r[8] + e[12] * r[13] + e[13] * r[18], t[14] = e[10] * r[4] + e[11] * r[9] + e[12] * r[14] + e[13] * r[19] + e[14], t[15] = e[15] * r[0] + e[16] * r[5] + e[17] * r[10] + e[18] * r[15], t[16] = e[15] * r[1] + e[16] * r[6] + e[17] * r[11] + e[18] * r[16], t[17] = e[15] * r[2] + e[16] * r[7] + e[17] * r[12] + e[18] * r[17], t[18] = e[15] * r[3] + e[16] * r[8] + e[17] * r[13] + e[18] * r[18], t[19] = e[15] * r[4] + e[16] * r[9] + e[17] * r[14] + e[18] * r[19] + e[19], t
                    }, e.prototype._colorMatrix = function(t) {
                        var e = new Float32Array(t);
                        return e[4] /= 255, e[9] /= 255, e[14] /= 255, e[19] /= 255, e
                    }, e.prototype.brightness = function(t, e) {
                        var r = [t, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, 1, 0];
                        this._loadMatrix(r, e)
                    }, e.prototype.greyscale = function(t, e) {
                        var r = [t, t, t, 0, 0, t, t, t, 0, 0, t, t, t, 0, 0, 0, 0, 0, 1, 0];
                        this._loadMatrix(r, e)
                    }, e.prototype.blackAndWhite = function(t) {
                        var e = [.3, .6, .1, 0, 0, .3, .6, .1, 0, 0, .3, .6, .1, 0, 0, 0, 0, 0, 1, 0];
                        this._loadMatrix(e, t)
                    }, e.prototype.hue = function(t, e) {
                        t = (t || 0) / 180 * Math.PI;
                        var r = Math.cos(t),
                            n = Math.sin(t),
                            i = Math.sqrt,
                            o = 1 / 3,
                            s = i(o),
                            a = r + (1 - r) * o,
                            u = o * (1 - r) - s * n,
                            h = o * (1 - r) + s * n,
                            l = o * (1 - r) + s * n,
                            c = r + o * (1 - r),
                            d = o * (1 - r) - s * n,
                            f = o * (1 - r) - s * n,
                            p = o * (1 - r) + s * n,
                            v = r + o * (1 - r),
                            g = [a, u, h, 0, 0, l, c, d, 0, 0, f, p, v, 0, 0, 0, 0, 0, 1, 0];
                        this._loadMatrix(g, e)
                    }, e.prototype.contrast = function(t, e) {
                        var r = (t || 0) + 1,
                            n = -.5 * (r - 1),
                            i = [r, 0, 0, 0, n, 0, r, 0, 0, n, 0, 0, r, 0, n, 0, 0, 0, 1, 0];
                        this._loadMatrix(i, e)
                    }, e.prototype.saturate = function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                            e = arguments[1],
                            r = 2 * t / 3 + 1,
                            n = -.5 * (r - 1),
                            i = [r, n, n, 0, 0, n, r, n, 0, 0, n, n, r, 0, 0, 0, 0, 0, 1, 0];
                        this._loadMatrix(i, e)
                    }, e.prototype.desaturate = function() {
                        this.saturate(-1)
                    }, e.prototype.negative = function(t) {
                        var e = [-1, 0, 0, 1, 0, 0, -1, 0, 1, 0, 0, 0, -1, 1, 0, 0, 0, 0, 1, 0];
                        this._loadMatrix(e, t)
                    }, e.prototype.sepia = function(t) {
                        var e = [.393, .7689999, .18899999, 0, 0, .349, .6859999, .16799999, 0, 0, .272, .5339999, .13099999, 0, 0, 0, 0, 0, 1, 0];
                        this._loadMatrix(e, t)
                    }, e.prototype.technicolor = function(t) {
                        var e = [1.9125277891456083, -.8545344976951645, -.09155508482755585, 0, 11.793603434377337, -.3087833385928097, 1.7658908555458428, -.10601743074722245, 0, -70.35205161461398, -.231103377548616, -.7501899197440212, 1.847597816108189, 0, 30.950940869491138, 0, 0, 0, 1, 0];
                        this._loadMatrix(e, t)
                    }, e.prototype.polaroid = function(t) {
                        var e = [1.438, -.062, -.062, 0, 0, -.122, 1.378, -.122, 0, 0, -.016, -.016, 1.483, 0, 0, 0, 0, 0, 1, 0];
                        this._loadMatrix(e, t)
                    }, e.prototype.toBGR = function(t) {
                        var e = [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0];
                        this._loadMatrix(e, t)
                    }, e.prototype.kodachrome = function(t) {
                        var e = [1.1285582396593525, -.3967382283601348, -.03992559172921793, 0, 63.72958762196502, -.16404339962244616, 1.0835251566291304, -.05498805115633132, 0, 24.732407896706203, -.16786010706155763, -.5603416277695248, 1.6014850761964943, 0, 35.62982807460946, 0, 0, 0, 1, 0];
                        this._loadMatrix(e, t)
                    }, e.prototype.browni = function(t) {
                        var e = [.5997023498159715, .34553243048391263, -.2708298674538042, 0, 47.43192855600873, -.037703249837783157, .8609577587992641, .15059552388459913, 0, -36.96841498319127, .24113635128153335, -.07441037908422492, .44972182064877153, 0, -7.562075277591283, 0, 0, 0, 1, 0];
                        this._loadMatrix(e, t)
                    }, e.prototype.vintage = function(t) {
                        var e = [.6279345635605994, .3202183420819367, -.03965408211312453, 0, 9.651285835294123, .02578397704808868, .6441188644374771, .03259127616149294, 0, 7.462829176470591, .0466055556782719, -.0851232987247891, .5241648018700465, 0, 5.159190588235296, 0, 0, 0, 1, 0];
                        this._loadMatrix(e, t)
                    }, e.prototype.colorTone = function(t, e, r, n, i) {
                        t = t || .2, e = e || .15, r = r || 16770432, n = n || 3375104;
                        var o = (r >> 16 & 255) / 255,
                            s = (r >> 8 & 255) / 255,
                            a = (255 & r) / 255,
                            u = (n >> 16 & 255) / 255,
                            h = (n >> 8 & 255) / 255,
                            l = (255 & n) / 255,
                            c = [.3, .59, .11, 0, 0, o, s, a, t, 0, u, h, l, e, 0, o - u, s - h, a - l, 0, 0];
                        this._loadMatrix(c, i)
                    }, e.prototype.night = function(t, e) {
                        t = t || .1;
                        var r = [-2 * t, -t, 0, 0, 0, -t, 0, t, 0, 0, 0, t, 2 * t, 0, 0, 0, 0, 0, 1, 0];
                        this._loadMatrix(r, e)
                    }, e.prototype.predator = function(t, e) {
                        var r = [11.224130630493164 * t, -4.794486999511719 * t, -2.8746118545532227 * t, 0 * t, .40342438220977783 * t, -3.6330697536468506 * t, 9.193157196044922 * t, -2.951810836791992 * t, 0 * t, -1.316135048866272 * t, -3.2184197902679443 * t, -4.2375030517578125 * t, 7.476448059082031 * t, 0 * t, .8044459223747253 * t, 0, 0, 0, 1, 0];
                        this._loadMatrix(r, e)
                    }, e.prototype.lsd = function(t) {
                        var e = [2, -.4, .5, 0, 0, -.5, 2, -.4, 0, 0, -.4, -.5, 3, 0, 0, 0, 0, 0, 1, 0];
                        this._loadMatrix(e, t)
                    }, e.prototype.reset = function() {
                        var t = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
                        this._loadMatrix(t, !1)
                    }, s(e, [{
                        key: "matrix",
                        get: function() {
                            return this.uniforms.m
                        },
                        set: function(t) {
                            this.uniforms.m = t
                        }
                    }, {
                        key: "alpha",
                        get: function() {
                            return this.uniforms.uAlpha
                        },
                        set: function(t) {
                            this.uniforms.uAlpha = t
                        }
                    }]), e
                }(u.Filter));
            r.default = h, h.prototype.grayscale = h.prototype.greyscale
        }, {
            "../../core": 65,
            path: 8
        }],
        151: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("../../core"),
                u = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(a),
                h = (t("path"), function(t) {
                    function e(r, o) {
                        n(this, e);
                        var s = new u.Matrix;
                        r.renderable = !1;
                        var a = i(this, t.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}", "varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));
                        return a.maskSprite = r, a.maskMatrix = s, a.uniforms.mapSampler = r._texture, a.uniforms.filterMatrix = s, a.uniforms.scale = {
                            x: 1,
                            y: 1
                        }, null !== o && void 0 !== o || (o = 20), a.scale = new u.Point(o, o), a
                    }
                    return o(e, t), e.prototype.apply = function(t, e, r) {
                        this.uniforms.filterMatrix = t.calculateSpriteMatrix(this.maskMatrix, this.maskSprite), this.uniforms.scale.x = this.scale.x, this.uniforms.scale.y = this.scale.y, t.applyFilter(this, e, r)
                    }, s(e, [{
                        key: "map",
                        get: function() {
                            return this.uniforms.mapSampler
                        },
                        set: function(t) {
                            this.uniforms.mapSampler = t
                        }
                    }]), e
                }(u.Filter));
            r.default = h
        }, {
            "../../core": 65,
            path: 8
        }],
        152: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = t("../../core"),
                a = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(s),
                u = (t("path"), function(t) {
                    function e() {
                        return n(this, e), i(this, t.call(this, "\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}", 'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))
                    }
                    return o(e, t), e
                }(a.Filter));
            r.default = u
        }, {
            "../../core": 65,
            path: 8
        }],
        153: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            r.__esModule = !0;
            var i = t("./fxaa/FXAAFilter");
            Object.defineProperty(r, "FXAAFilter", {
                enumerable: !0,
                get: function() {
                    return n(i).default
                }
            });
            var o = t("./noise/NoiseFilter");
            Object.defineProperty(r, "NoiseFilter", {
                enumerable: !0,
                get: function() {
                    return n(o).default
                }
            });
            var s = t("./displacement/DisplacementFilter");
            Object.defineProperty(r, "DisplacementFilter", {
                enumerable: !0,
                get: function() {
                    return n(s).default
                }
            });
            var a = t("./blur/BlurFilter");
            Object.defineProperty(r, "BlurFilter", {
                enumerable: !0,
                get: function() {
                    return n(a).default
                }
            });
            var u = t("./blur/BlurXFilter");
            Object.defineProperty(r, "BlurXFilter", {
                enumerable: !0,
                get: function() {
                    return n(u).default
                }
            });
            var h = t("./blur/BlurYFilter");
            Object.defineProperty(r, "BlurYFilter", {
                enumerable: !0,
                get: function() {
                    return n(h).default
                }
            });
            var l = t("./colormatrix/ColorMatrixFilter");
            Object.defineProperty(r, "ColorMatrixFilter", {
                enumerable: !0,
                get: function() {
                    return n(l).default
                }
            });
            var c = t("./alpha/AlphaFilter");
            Object.defineProperty(r, "AlphaFilter", {
                enumerable: !0,
                get: function() {
                    return n(c).default
                }
            })
        }, {
            "./alpha/AlphaFilter": 143,
            "./blur/BlurFilter": 144,
            "./blur/BlurXFilter": 145,
            "./blur/BlurYFilter": 146,
            "./colormatrix/ColorMatrixFilter": 150,
            "./displacement/DisplacementFilter": 151,
            "./fxaa/FXAAFilter": 152,
            "./noise/NoiseFilter": 154
        }],
        154: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("../../core"),
                u = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(a),
                h = (t("path"), function(t) {
                    function e() {
                        var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : .5,
                            o = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Math.random();
                        n(this, e);
                        var s = i(this, t.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}", "precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));
                        return s.noise = r, s.seed = o, s
                    }
                    return o(e, t), s(e, [{
                        key: "noise",
                        get: function() {
                            return this.uniforms.uNoise
                        },
                        set: function(t) {
                            this.uniforms.uNoise = t
                        }
                    }, {
                        key: "seed",
                        get: function() {
                            return this.uniforms.uSeed
                        },
                        set: function(t) {
                            this.uniforms.uSeed = t
                        }
                    }]), e
                }(u.Filter));
            r.default = h
        }, {
            "../../core": 65,
            path: 8
        }],
        155: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                o = t("../core"),
                s = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(o),
                a = function() {
                    function t() {
                        n(this, t), this.global = new s.Point, this.target = null, this.originalEvent = null, this.identifier = null, this.isPrimary = !1, this.button = 0, this.buttons = 0, this.width = 0, this.height = 0, this.tiltX = 0, this.tiltY = 0, this.pointerType = null, this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0
                    }
                    return t.prototype.getLocalPosition = function(t, e, r) {
                        return t.worldTransform.applyInverse(r || this.global, e)
                    }, t.prototype.copyEvent = function(t) {
                        t.isPrimary && (this.isPrimary = !0), this.button = t.button, this.buttons = Number.isInteger(t.buttons) ? t.buttons : t.which, this.width = t.width, this.height = t.height, this.tiltX = t.tiltX, this.tiltY = t.tiltY, this.pointerType = t.pointerType, this.pressure = t.pressure, this.rotationAngle = t.rotationAngle, this.twist = t.twist || 0, this.tangentialPressure = t.tangentialPressure || 0
                    }, t.prototype.reset = function() {
                        this.isPrimary = !1
                    }, i(t, [{
                        key: "pointerId",
                        get: function() {
                            return this.identifier
                        }
                    }]), t
                }();
            r.default = a
        }, {
            "../core": 65
        }],
        156: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                function t() {
                    n(this, t), this.stopped = !1, this.target = null, this.currentTarget = null, this.type = null, this.data = null
                }
                return t.prototype.stopPropagation = function() {
                    this.stopped = !0
                }, t.prototype.reset = function() {
                    this.stopped = !1, this.currentTarget = null, this.target = null
                }, t
            }();
            r.default = i
        }, {}],
        157: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                    return typeof t
                } : function(t) {
                    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
                },
                u = t("../core"),
                h = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(u),
                l = t("./InteractionData"),
                c = n(l),
                d = t("./InteractionEvent"),
                f = n(d),
                p = t("./InteractionTrackingData"),
                v = n(p),
                g = t("eventemitter3"),
                y = n(g),
                m = t("./interactiveTarget"),
                _ = n(m);
            h.utils.mixins.delayMixin(h.DisplayObject.prototype, _.default);
            var b = 1,
                x = {
                    target: null,
                    data: {
                        global: null
                    }
                },
                T = function(t) {
                    function e(r, n) {
                        i(this, e);
                        var s = o(this, t.call(this));
                        return n = n || {}, s.renderer = r, s.autoPreventDefault = void 0 === n.autoPreventDefault || n.autoPreventDefault, s.interactionFrequency = n.interactionFrequency || 10, s.mouse = new c.default, s.mouse.identifier = b, s.mouse.global.set(-999999), s.activeInteractionData = {}, s.activeInteractionData[b] = s.mouse, s.interactionDataPool = [], s.eventData = new f.default, s.interactionDOMElement = null, s.moveWhenInside = !1, s.eventsAdded = !1, s.mouseOverRenderer = !1, s.supportsTouchEvents = "ontouchstart" in window, s.supportsPointerEvents = !!window.PointerEvent, s.onPointerUp = s.onPointerUp.bind(s), s.processPointerUp = s.processPointerUp.bind(s), s.onPointerCancel = s.onPointerCancel.bind(s), s.processPointerCancel = s.processPointerCancel.bind(s), s.onPointerDown = s.onPointerDown.bind(s), s.processPointerDown = s.processPointerDown.bind(s), s.onPointerMove = s.onPointerMove.bind(s), s.processPointerMove = s.processPointerMove.bind(s), s.onPointerOut = s.onPointerOut.bind(s), s.processPointerOverOut = s.processPointerOverOut.bind(s), s.onPointerOver = s.onPointerOver.bind(s), s.cursorStyles = {
                            default: "inherit",
                            pointer: "pointer"
                        }, s.currentCursorMode = null, s.cursor = null, s._tempPoint = new h.Point, s.resolution = 1, s.setTargetElement(s.renderer.view, s.renderer.resolution), s
                    }
                    return s(e, t), e.prototype.hitTest = function(t, e) {
                        return x.target = null, x.data.global = t, e || (e = this.renderer._lastObjectRendered), this.processInteractive(x, e, null, !0), x.target
                    }, e.prototype.setTargetElement = function(t) {
                        var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;
                        this.removeEvents(), this.interactionDOMElement = t, this.resolution = e, this.addEvents()
                    }, e.prototype.addEvents = function() {
                        this.interactionDOMElement && (h.ticker.shared.add(this.update, this, h.UPDATE_PRIORITY.INTERACTION), window.navigator.msPointerEnabled ? (this.interactionDOMElement.style["-ms-content-zooming"] = "none", this.interactionDOMElement.style["-ms-touch-action"] = "none") : this.supportsPointerEvents && (this.interactionDOMElement.style["touch-action"] = "none"), this.supportsPointerEvents ? (window.document.addEventListener("pointermove", this.onPointerMove, !0), this.interactionDOMElement.addEventListener("pointerdown", this.onPointerDown, !0), this.interactionDOMElement.addEventListener("pointerleave", this.onPointerOut, !0), this.interactionDOMElement.addEventListener("pointerover", this.onPointerOver, !0), window.addEventListener("pointercancel", this.onPointerCancel, !0), window.addEventListener("pointerup", this.onPointerUp, !0)) : (window.document.addEventListener("mousemove", this.onPointerMove, !0), this.interactionDOMElement.addEventListener("mousedown", this.onPointerDown, !0), this.interactionDOMElement.addEventListener("mouseout", this.onPointerOut, !0), this.interactionDOMElement.addEventListener("mouseover", this.onPointerOver, !0), window.addEventListener("mouseup", this.onPointerUp, !0)), this.supportsTouchEvents && (this.interactionDOMElement.addEventListener("touchstart", this.onPointerDown, !0), this.interactionDOMElement.addEventListener("touchcancel", this.onPointerCancel, !0), this.interactionDOMElement.addEventListener("touchend", this.onPointerUp, !0), this.interactionDOMElement.addEventListener("touchmove", this.onPointerMove, !0)), this.eventsAdded = !0)
                    }, e.prototype.removeEvents = function() {
                        this.interactionDOMElement && (h.ticker.shared.remove(this.update, this), window.navigator.msPointerEnabled ? (this.interactionDOMElement.style["-ms-content-zooming"] = "", this.interactionDOMElement.style["-ms-touch-action"] = "") : this.supportsPointerEvents && (this.interactionDOMElement.style["touch-action"] = ""), this.supportsPointerEvents ? (window.document.removeEventListener("pointermove", this.onPointerMove, !0), this.interactionDOMElement.removeEventListener("pointerdown", this.onPointerDown, !0), this.interactionDOMElement.removeEventListener("pointerleave", this.onPointerOut, !0), this.interactionDOMElement.removeEventListener("pointerover", this.onPointerOver, !0), window.removeEventListener("pointercancel", this.onPointerCancel, !0), window.removeEventListener("pointerup", this.onPointerUp, !0)) : (window.document.removeEventListener("mousemove", this.onPointerMove, !0), this.interactionDOMElement.removeEventListener("mousedown", this.onPointerDown, !0), this.interactionDOMElement.removeEventListener("mouseout", this.onPointerOut, !0), this.interactionDOMElement.removeEventListener("mouseover", this.onPointerOver, !0), window.removeEventListener("mouseup", this.onPointerUp, !0)), this.supportsTouchEvents && (this.interactionDOMElement.removeEventListener("touchstart", this.onPointerDown, !0), this.interactionDOMElement.removeEventListener("touchcancel", this.onPointerCancel, !0), this.interactionDOMElement.removeEventListener("touchend", this.onPointerUp, !0), this.interactionDOMElement.removeEventListener("touchmove", this.onPointerMove, !0)), this.interactionDOMElement = null, this.eventsAdded = !1)
                    }, e.prototype.update = function(t) {
                        if (this._deltaTime += t, !(this._deltaTime < this.interactionFrequency) && (this._deltaTime = 0, this.interactionDOMElement)) {
                            if (this.didMove) return void(this.didMove = !1);
                            this.cursor = null;
                            for (var e in this.activeInteractionData)
                                if (this.activeInteractionData.hasOwnProperty(e)) {
                                    var r = this.activeInteractionData[e];
                                    if (r.originalEvent && "touch" !== r.pointerType) {
                                        var n = this.configureInteractionEventForDOMEvent(this.eventData, r.originalEvent, r);
                                        this.processInteractive(n, this.renderer._lastObjectRendered, this.processPointerOverOut, !0)
                                    }
                                } this.setCursorMode(this.cursor)
                        }
                    }, e.prototype.setCursorMode = function(t) {
                        if (t = t || "default", this.currentCursorMode !== t) {
                            this.currentCursorMode = t;
                            var e = this.cursorStyles[t];
                            if (e) switch (void 0 === e ? "undefined" : a(e)) {
                                case "string":
                                    this.interactionDOMElement.style.cursor = e;
                                    break;
                                case "function":
                                    e(t);
                                    break;
                                case "object":
                                    Object.assign(this.interactionDOMElement.style, e)
                            } else "string" != typeof t || Object.prototype.hasOwnProperty.call(this.cursorStyles, t) || (this.interactionDOMElement.style.cursor = t)
                        }
                    }, e.prototype.dispatchEvent = function(t, e, r) {
                        r.stopped || (r.currentTarget = t, r.type = e, t.emit(e, r), t[e] && t[e](r))
                    }, e.prototype.mapPositionToPoint = function(t, e, r) {
                        var n = void 0;
                        n = this.interactionDOMElement.parentElement ? this.interactionDOMElement.getBoundingClientRect() : {
                            x: 0,
                            y: 0,
                            width: 0,
                            height: 0
                        };
                        var i = navigator.isCocoonJS ? this.resolution : 1 / this.resolution;
                        t.x = (e - n.left) * (this.interactionDOMElement.width / n.width) * i, t.y = (r - n.top) * (this.interactionDOMElement.height / n.height) * i
                    }, e.prototype.processInteractive = function(t, e, r, n, i) {
                        if (!e || !e.visible) return !1;
                        var o = t.data.global;
                        i = e.interactive || i;
                        var s = !1,
                            a = i,
                            u = !0;
                        if (e.hitArea ? (n && (e.worldTransform.applyInverse(o, this._tempPoint), e.hitArea.contains(this._tempPoint.x, this._tempPoint.y) ? s = !0 : (n = !1, u = !1)), a = !1) : e._mask && n && (e._mask.containsPoint(o) || (n = !1, u = !1)), u && e.interactiveChildren && e.children)
                            for (var h = e.children, l = h.length - 1; l >= 0; l--) {
                                var c = h[l],
                                    d = this.processInteractive(t, c, r, n, a);
                                if (d) {
                                    if (!c.parent) continue;
                                    a = !1, d && (t.target && (n = !1), s = !0)
                                }
                            }
                        return i && (n && !t.target && !e.hitArea && e.containsPoint && e.containsPoint(o) && (s = !0), e.interactive && (s && !t.target && (t.target = e), r && r(t, e, !!s))), s
                    }, e.prototype.onPointerDown = function(t) {
                        if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
                            var e = this.normalizeToPointerData(t);
                            this.autoPreventDefault && e[0].isNormalized && t.preventDefault();
                            for (var r = e.length, n = 0; n < r; n++) {
                                var i = e[n],
                                    o = this.getInteractionDataForPointerId(i),
                                    s = this.configureInteractionEventForDOMEvent(this.eventData, i, o);
                                if (s.data.originalEvent = t, this.processInteractive(s, this.renderer._lastObjectRendered, this.processPointerDown, !0), this.emit("pointerdown", s), "touch" === i.pointerType) this.emit("touchstart", s);
                                else if ("mouse" === i.pointerType || "pen" === i.pointerType) {
                                    var a = 2 === i.button;
                                    this.emit(a ? "rightdown" : "mousedown", this.eventData)
                                }
                            }
                        }
                    }, e.prototype.processPointerDown = function(t, e, r) {
                        var n = t.data,
                            i = t.data.identifier;
                        if (r)
                            if (e.trackedPointers[i] || (e.trackedPointers[i] = new v.default(i)), this.dispatchEvent(e, "pointerdown", t), "touch" === n.pointerType) this.dispatchEvent(e, "touchstart", t);
                            else if ("mouse" === n.pointerType || "pen" === n.pointerType) {
                            var o = 2 === n.button;
                            o ? e.trackedPointers[i].rightDown = !0 : e.trackedPointers[i].leftDown = !0, this.dispatchEvent(e, o ? "rightdown" : "mousedown", t)
                        }
                    }, e.prototype.onPointerComplete = function(t, e, r) {
                        for (var n = this.normalizeToPointerData(t), i = n.length, o = t.target !== this.interactionDOMElement ? "outside" : "", s = 0; s < i; s++) {
                            var a = n[s],
                                u = this.getInteractionDataForPointerId(a),
                                h = this.configureInteractionEventForDOMEvent(this.eventData, a, u);
                            if (h.data.originalEvent = t, this.processInteractive(h, this.renderer._lastObjectRendered, r, e || !o), this.emit(e ? "pointercancel" : "pointerup" + o, h), "mouse" === a.pointerType || "pen" === a.pointerType) {
                                var l = 2 === a.button;
                                this.emit(l ? "rightup" + o : "mouseup" + o, h)
                            } else "touch" === a.pointerType && (this.emit(e ? "touchcancel" : "touchend" + o, h), this.releaseInteractionDataForPointerId(a.pointerId, u))
                        }
                    }, e.prototype.onPointerCancel = function(t) {
                        this.supportsTouchEvents && "touch" === t.pointerType || this.onPointerComplete(t, !0, this.processPointerCancel)
                    }, e.prototype.processPointerCancel = function(t, e) {
                        var r = t.data,
                            n = t.data.identifier;
                        void 0 !== e.trackedPointers[n] && (delete e.trackedPointers[n], this.dispatchEvent(e, "pointercancel", t), "touch" === r.pointerType && this.dispatchEvent(e, "touchcancel", t))
                    }, e.prototype.onPointerUp = function(t) {
                        this.supportsTouchEvents && "touch" === t.pointerType || this.onPointerComplete(t, !1, this.processPointerUp)
                    }, e.prototype.processPointerUp = function(t, e, r) {
                        var n = t.data,
                            i = t.data.identifier,
                            o = e.trackedPointers[i],
                            s = "touch" === n.pointerType,
                            a = "mouse" === n.pointerType || "pen" === n.pointerType,
                            u = !1;
                        if (a) {
                            var h = 2 === n.button,
                                l = v.default.FLAGS,
                                c = h ? l.RIGHT_DOWN : l.LEFT_DOWN,
                                d = void 0 !== o && o.flags & c;
                            r ? (this.dispatchEvent(e, h ? "rightup" : "mouseup", t), d && (this.dispatchEvent(e, h ? "rightclick" : "click", t), u = !0)) : d && this.dispatchEvent(e, h ? "rightupoutside" : "mouseupoutside", t), o && (h ? o.rightDown = !1 : o.leftDown = !1)
                        }
                        r ? (this.dispatchEvent(e, "pointerup", t), s && this.dispatchEvent(e, "touchend", t), o && (a && !u || this.dispatchEvent(e, "pointertap", t), s && (this.dispatchEvent(e, "tap", t), o.over = !1))) : o && (this.dispatchEvent(e, "pointerupoutside", t), s && this.dispatchEvent(e, "touchendoutside", t)), o && o.none && delete e.trackedPointers[i]
                    }, e.prototype.onPointerMove = function(t) {
                        if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
                            var e = this.normalizeToPointerData(t);
                            "mouse" !== e[0].pointerType && "pen" !== e[0].pointerType || (this.didMove = !0, this.cursor = null);
                            for (var r = e.length, n = 0; n < r; n++) {
                                var i = e[n],
                                    o = this.getInteractionDataForPointerId(i),
                                    s = this.configureInteractionEventForDOMEvent(this.eventData, i, o);
                                s.data.originalEvent = t;
                                var a = "touch" !== i.pointerType || this.moveWhenInside;
                                this.processInteractive(s, this.renderer._lastObjectRendered, this.processPointerMove, a), this.emit("pointermove", s), "touch" === i.pointerType && this.emit("touchmove", s), "mouse" !== i.pointerType && "pen" !== i.pointerType || this.emit("mousemove", s)
                            }
                            "mouse" === e[0].pointerType && this.setCursorMode(this.cursor)
                        }
                    }, e.prototype.processPointerMove = function(t, e, r) {
                        var n = t.data,
                            i = "touch" === n.pointerType,
                            o = "mouse" === n.pointerType || "pen" === n.pointerType;
                        o && this.processPointerOverOut(t, e, r), this.moveWhenInside && !r || (this.dispatchEvent(e, "pointermove", t), i && this.dispatchEvent(e, "touchmove", t), o && this.dispatchEvent(e, "mousemove", t))
                    }, e.prototype.onPointerOut = function(t) {
                        if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
                            var e = this.normalizeToPointerData(t),
                                r = e[0];
                            "mouse" === r.pointerType && (this.mouseOverRenderer = !1, this.setCursorMode(null));
                            var n = this.getInteractionDataForPointerId(r),
                                i = this.configureInteractionEventForDOMEvent(this.eventData, r, n);
                            i.data.originalEvent = r, this.processInteractive(i, this.renderer._lastObjectRendered, this.processPointerOverOut, !1), this.emit("pointerout", i), "mouse" === r.pointerType || "pen" === r.pointerType ? this.emit("mouseout", i) : this.releaseInteractionDataForPointerId(n.identifier)
                        }
                    }, e.prototype.processPointerOverOut = function(t, e, r) {
                        var n = t.data,
                            i = t.data.identifier,
                            o = "mouse" === n.pointerType || "pen" === n.pointerType,
                            s = e.trackedPointers[i];
                        r && !s && (s = e.trackedPointers[i] = new v.default(i)), void 0 !== s && (r && this.mouseOverRenderer ? (s.over || (s.over = !0, this.dispatchEvent(e, "pointerover", t), o && this.dispatchEvent(e, "mouseover", t)), o && null === this.cursor && (this.cursor = e.cursor)) : s.over && (s.over = !1, this.dispatchEvent(e, "pointerout", this.eventData), o && this.dispatchEvent(e, "mouseout", t), s.none && delete e.trackedPointers[i]))
                    }, e.prototype.onPointerOver = function(t) {
                        var e = this.normalizeToPointerData(t),
                            r = e[0],
                            n = this.getInteractionDataForPointerId(r),
                            i = this.configureInteractionEventForDOMEvent(this.eventData, r, n);
                        i.data.originalEvent = r, "mouse" === r.pointerType && (this.mouseOverRenderer = !0), this.emit("pointerover", i), "mouse" !== r.pointerType && "pen" !== r.pointerType || this.emit("mouseover", i)
                    }, e.prototype.getInteractionDataForPointerId = function(t) {
                        var e = t.pointerId,
                            r = void 0;
                        return e === b || "mouse" === t.pointerType ? r = this.mouse : this.activeInteractionData[e] ? r = this.activeInteractionData[e] : (r = this.interactionDataPool.pop() || new c.default, r.identifier = e, this.activeInteractionData[e] = r), r.copyEvent(t), r
                    }, e.prototype.releaseInteractionDataForPointerId = function(t) {
                        var e = this.activeInteractionData[t];
                        e && (delete this.activeInteractionData[t], e.reset(), this.interactionDataPool.push(e))
                    }, e.prototype.configureInteractionEventForDOMEvent = function(t, e, r) {
                        return t.data = r, this.mapPositionToPoint(r.global, e.clientX, e.clientY), navigator.isCocoonJS && "touch" === e.pointerType && (r.global.x = r.global.x / this.resolution, r.global.y = r.global.y / this.resolution), "touch" === e.pointerType && (e.globalX = r.global.x, e.globalY = r.global.y), r.originalEvent = e, t.reset(), t
                    }, e.prototype.normalizeToPointerData = function(t) {
                        var e = [];
                        if (this.supportsTouchEvents && t instanceof TouchEvent)
                            for (var r = 0, n = t.changedTouches.length; r < n; r++) {
                                var i = t.changedTouches[r];
                                void 0 === i.button && (i.button = t.touches.length ? 1 : 0), void 0 === i.buttons && (i.buttons = t.touches.length ? 1 : 0), void 0 === i.isPrimary && (i.isPrimary = 1 === t.touches.length && "touchstart" === t.type), void 0 === i.width && (i.width = i.radiusX || 1), void 0 === i.height && (i.height = i.radiusY || 1), void 0 === i.tiltX && (i.tiltX = 0), void 0 === i.tiltY && (i.tiltY = 0), void 0 === i.pointerType && (i.pointerType = "touch"), void 0 === i.pointerId && (i.pointerId = i.identifier || 0), void 0 === i.pressure && (i.pressure = i.force || .5), i.twist = 0, i.tangentialPressure = 0, void 0 === i.layerX && (i.layerX = i.offsetX = i.clientX), void 0 === i.layerY && (i.layerY = i.offsetY = i.clientY), i.isNormalized = !0, e.push(i)
                            } else !(t instanceof MouseEvent) || this.supportsPointerEvents && t instanceof window.PointerEvent ? e.push(t) : (void 0 === t.isPrimary && (t.isPrimary = !0), void 0 === t.width && (t.width = 1), void 0 === t.height && (t.height = 1), void 0 === t.tiltX && (t.tiltX = 0), void 0 === t.tiltY && (t.tiltY = 0), void 0 === t.pointerType && (t.pointerType = "mouse"), void 0 === t.pointerId && (t.pointerId = b), void 0 === t.pressure && (t.pressure = .5), t.twist = 0, t.tangentialPressure = 0, t.isNormalized = !0, e.push(t));
                        return e
                    }, e.prototype.destroy = function() {
                        this.removeEvents(), this.removeAllListeners(), this.renderer = null, this.mouse = null, this.eventData = null, this.interactionDOMElement = null, this.onPointerDown = null, this.processPointerDown = null, this.onPointerUp = null, this.processPointerUp = null, this.onPointerCancel = null, this.processPointerCancel = null, this.onPointerMove = null, this.processPointerMove = null, this.onPointerOut = null, this.processPointerOverOut = null, this.onPointerOver = null, this._tempPoint = null
                    }, e
                }(y.default);
            r.default = T, h.WebGLRenderer.registerPlugin("interaction", T), h.CanvasRenderer.registerPlugin("interaction", T)
        }, {
            "../core": 65,
            "./InteractionData": 155,
            "./InteractionEvent": 156,
            "./InteractionTrackingData": 158,
            "./interactiveTarget": 160,
            eventemitter3: 3
        }],
        158: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                o = function() {
                    function t(e) {
                        n(this, t), this._pointerId = e, this._flags = t.FLAGS.NONE
                    }
                    return t.prototype._doSet = function(t, e) {
                        this._flags = e ? this._flags | t : this._flags & ~t
                    }, i(t, [{
                        key: "pointerId",
                        get: function() {
                            return this._pointerId
                        }
                    }, {
                        key: "flags",
                        get: function() {
                            return this._flags
                        },
                        set: function(t) {
                            this._flags = t
                        }
                    }, {
                        key: "none",
                        get: function() {
                            return this._flags === this.constructor.FLAGS.NONE
                        }
                    }, {
                        key: "over",
                        get: function() {
                            return 0 != (this._flags & this.constructor.FLAGS.OVER)
                        },
                        set: function(t) {
                            this._doSet(this.constructor.FLAGS.OVER, t)
                        }
                    }, {
                        key: "rightDown",
                        get: function() {
                            return 0 != (this._flags & this.constructor.FLAGS.RIGHT_DOWN)
                        },
                        set: function(t) {
                            this._doSet(this.constructor.FLAGS.RIGHT_DOWN, t)
                        }
                    }, {
                        key: "leftDown",
                        get: function() {
                            return 0 != (this._flags & this.constructor.FLAGS.LEFT_DOWN)
                        },
                        set: function(t) {
                            this._doSet(this.constructor.FLAGS.LEFT_DOWN, t)
                        }
                    }]), t
                }();
            r.default = o, o.FLAGS = Object.freeze({
                NONE: 0,
                OVER: 1,
                LEFT_DOWN: 2,
                RIGHT_DOWN: 4
            })
        }, {}],
        159: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            r.__esModule = !0;
            var i = t("./InteractionData");
            Object.defineProperty(r, "InteractionData", {
                enumerable: !0,
                get: function() {
                    return n(i).default
                }
            });
            var o = t("./InteractionManager");
            Object.defineProperty(r, "InteractionManager", {
                enumerable: !0,
                get: function() {
                    return n(o).default
                }
            });
            var s = t("./interactiveTarget");
            Object.defineProperty(r, "interactiveTarget", {
                enumerable: !0,
                get: function() {
                    return n(s).default
                }
            });
            var a = t("./InteractionTrackingData");
            Object.defineProperty(r, "InteractionTrackingData", {
                enumerable: !0,
                get: function() {
                    return n(a).default
                }
            });
            var u = t("./InteractionEvent");
            Object.defineProperty(r, "InteractionEvent", {
                enumerable: !0,
                get: function() {
                    return n(u).default
                }
            })
        }, {
            "./InteractionData": 155,
            "./InteractionEvent": 156,
            "./InteractionManager": 157,
            "./InteractionTrackingData": 158,
            "./interactiveTarget": 160
        }],
        160: [function(t, e, r) {
            "use strict";
            r.__esModule = !0, r.default = {
                interactive: !1,
                interactiveChildren: !0,
                hitArea: null,
                get buttonMode() {
                    return "pointer" === this.cursor
                },
                set buttonMode(t) {
                    t ? this.cursor = "pointer" : "pointer" === this.cursor && (this.cursor = null)
                },
                cursor: null,
                get trackedPointers() {
                    return void 0 === this._trackedPointers && (this._trackedPointers = {}), this._trackedPointers
                },
                _trackedPointers: void 0
            }
        }, {}],
        161: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                t.bitmapFont = a.BitmapText.registerFont(t.data, e)
            }
            r.__esModule = !0, r.parse = n, r.default = function() {
                return function(t, e) {
                    if (!t.data || t.type !== s.Resource.TYPE.XML) return void e();
                    if (0 === t.data.getElementsByTagName("page").length || 0 === t.data.getElementsByTagName("info").length || null === t.data.getElementsByTagName("info")[0].getAttribute("face")) return void e();
                    var r = t.isDataUrl ? "" : o.dirname(t.url);
                    t.isDataUrl && ("." === r && (r = ""), this.baseUrl && r && "/" === this.baseUrl.charAt(this.baseUrl.length - 1) && (r += "/")), (r = r.replace(this.baseUrl, "")) && "/" !== r.charAt(r.length - 1) && (r += "/");
                    for (var i = t.data.getElementsByTagName("page"), a = {}, u = function(r) {
                            a[r.metadata.pageFile] = r.texture, Object.keys(a).length === i.length && (n(t, a), e())
                        }, h = 0; h < i.length; ++h) {
                        var l = i[h].getAttribute("file"),
                            c = r + l,
                            d = !1;
                        for (var f in this.resources) {
                            var p = this.resources[f];
                            if (p.url === c) {
                                p.metadata.pageFile = l, p.texture ? u(p) : p.onAfterMiddleware.add(u), d = !0;
                                break
                            }
                        }
                        if (!d) {
                            var v = {
                                crossOrigin: t.crossOrigin,
                                loadType: s.Resource.LOAD_TYPE.IMAGE,
                                metadata: Object.assign({
                                    pageFile: l
                                }, t.metadata.imageMetadata),
                                parentResource: t
                            };
                            this.add(c, v, u)
                        }
                    }
                }
            };
            var i = t("path"),
                o = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(i),
                s = t("resource-loader"),
                a = t("../extras")
        }, {
            "../extras": 141,
            path: 8,
            "resource-loader": 36
        }],
        162: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            r.__esModule = !0, r.shared = r.Resource = r.textureParser = r.getResourcePath = r.spritesheetParser = r.parseBitmapFontData = r.bitmapFontParser = r.Loader = void 0;
            var i = t("./bitmapFontParser");
            Object.defineProperty(r, "bitmapFontParser", {
                enumerable: !0,
                get: function() {
                    return n(i).default
                }
            }), Object.defineProperty(r, "parseBitmapFontData", {
                enumerable: !0,
                get: function() {
                    return i.parse
                }
            });
            var o = t("./spritesheetParser");
            Object.defineProperty(r, "spritesheetParser", {
                enumerable: !0,
                get: function() {
                    return n(o).default
                }
            }), Object.defineProperty(r, "getResourcePath", {
                enumerable: !0,
                get: function() {
                    return o.getResourcePath
                }
            });
            var s = t("./textureParser");
            Object.defineProperty(r, "textureParser", {
                enumerable: !0,
                get: function() {
                    return n(s).default
                }
            });
            var a = t("resource-loader");
            Object.defineProperty(r, "Resource", {
                enumerable: !0,
                get: function() {
                    return a.Resource
                }
            });
            var u = t("../core/Application"),
                h = n(u),
                l = t("./loader"),
                c = n(l);
            r.Loader = c.default;
            var d = new c.default;
            d.destroy = function() {}, r.shared = d;
            var f = h.default.prototype;
            f._loader = null, Object.defineProperty(f, "loader", {
                get: function() {
                    if (!this._loader) {
                        var t = this._options.sharedLoader;
                        this._loader = t ? d : new c.default
                    }
                    return this._loader
                }
            }), f._parentDestroy = f.destroy, f.destroy = function(t, e) {
                this._loader && (this._loader.destroy(), this._loader = null), this._parentDestroy(t, e)
            }
        }, {
            "../core/Application": 43,
            "./bitmapFontParser": 161,
            "./loader": 163,
            "./spritesheetParser": 164,
            "./textureParser": 165,
            "resource-loader": 36
        }],
        163: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("resource-loader"),
                u = n(a),
                h = t("resource-loader/lib/middlewares/parsing/blob"),
                l = t("eventemitter3"),
                c = n(l),
                d = t("./textureParser"),
                f = n(d),
                p = t("./spritesheetParser"),
                v = n(p),
                g = t("./bitmapFontParser"),
                y = n(g),
                m = function(t) {
                    function e(r, n) {
                        i(this, e);
                        var s = o(this, t.call(this, r, n));
                        c.default.call(s);
                        for (var a = 0; a < e._pixiMiddleware.length; ++a) s.use(e._pixiMiddleware[a]());
                        return s.onStart.add(function(t) {
                            return s.emit("start", t)
                        }), s.onProgress.add(function(t, e) {
                            return s.emit("progress", t, e)
                        }), s.onError.add(function(t, e, r) {
                            return s.emit("error", t, e, r)
                        }), s.onLoad.add(function(t, e) {
                            return s.emit("load", t, e)
                        }), s.onComplete.add(function(t, e) {
                            return s.emit("complete", t, e)
                        }), s
                    }
                    return s(e, t), e.addPixiMiddleware = function(t) {
                        e._pixiMiddleware.push(t)
                    }, e.prototype.destroy = function() {
                        this.removeAllListeners(), this.reset()
                    }, e
                }(u.default);
            r.default = m;
            for (var _ in c.default.prototype) m.prototype[_] = c.default.prototype[_];
            m._pixiMiddleware = [h.blobMiddlewareFactory, f.default, v.default, y.default];
            var b = u.default.Resource;
            b.setExtensionXhrType("fnt", b.XHR_RESPONSE_TYPE.DOCUMENT)
        }, {
            "./bitmapFontParser": 161,
            "./spritesheetParser": 164,
            "./textureParser": 165,
            eventemitter3: 3,
            "resource-loader": 36,
            "resource-loader/lib/middlewares/parsing/blob": 37
        }],
        164: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                return t.isDataUrl ? t.data.meta.image : s.default.resolve(t.url.replace(e, ""), t.data.meta.image)
            }
            r.__esModule = !0, r.default = function() {
                return function(t, e) {
                    var r = t.name + "_image";
                    if (!t.data || t.type !== i.Resource.TYPE.JSON || !t.data.frames || this.resources[r]) return void e();
                    var o = {
                            crossOrigin: t.crossOrigin,
                            metadata: t.metadata.imageMetadata,
                            parentResource: t
                        },
                        s = n(t, this.baseUrl);
                    this.add(r, s, o, function(r) {
                        if (r.error) return void e(r.error);
                        var n = new a.Spritesheet(r.texture.baseTexture, t.data, t.url);
                        n.parse(function() {
                            t.spritesheet = n, t.textures = n.textures, e()
                        })
                    })
                }
            }, r.getResourcePath = n;
            var i = t("resource-loader"),
                o = t("url"),
                s = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(o),
                a = t("../core")
        }, {
            "../core": 65,
            "resource-loader": 36,
            url: 38
        }],
        165: [function(t, e, r) {
            "use strict";
            r.__esModule = !0, r.default = function() {
                return function(t, e) {
                    t.data && t.type === n.Resource.TYPE.IMAGE && (t.texture = o.default.fromLoader(t.data, t.url, t.name)), e()
                }
            };
            var n = t("resource-loader"),
                i = t("../core/textures/Texture"),
                o = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i)
        }, {
            "../core/textures/Texture": 115,
            "resource-loader": 36
        }],
        166: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("../core"),
                u = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(a),
                h = t("../core/textures/Texture"),
                l = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(h),
                c = new u.Point,
                d = new u.Polygon,
                f = function(t) {
                    function e(r, o, s, a, h) {
                        n(this, e);
                        var c = i(this, t.call(this));
                        return c._texture = r || l.default.EMPTY, c.uvs = s || new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]), c.vertices = o || new Float32Array([0, 0, 100, 0, 100, 100, 0, 100]), c.indices = a || new Uint16Array([0, 1, 3, 2]), c.dirty = 0, c.indexDirty = 0, c.vertexDirty = 0, c.autoUpdate = !0, c.blendMode = u.BLEND_MODES.NORMAL, c.canvasPadding = u.settings.MESH_CANVAS_PADDING, c.drawMode = h || e.DRAW_MODES.TRIANGLE_MESH, c.shader = null, c.tintRgb = new Float32Array([1, 1, 1]), c._glDatas = {}, c._uvTransform = new u.TextureMatrix(c._texture), c.uploadUvTransform = !1, c.pluginName = "mesh", c
                    }
                    return o(e, t), e.prototype._renderWebGL = function(t) {
                        this.refresh(), t.setObjectRenderer(t.plugins[this.pluginName]), t.plugins[this.pluginName].render(this)
                    }, e.prototype._renderCanvas = function(t) {
                        this.refresh(), t.plugins[this.pluginName].render(this)
                    }, e.prototype._onTextureUpdate = function() {
                        this._uvTransform.texture = this._texture, this.refresh()
                    }, e.prototype.multiplyUvs = function() {
                        this.uploadUvTransform || this._uvTransform.multiplyUvs(this.uvs)
                    }, e.prototype.refresh = function(t) {
                        this.autoUpdate && this.vertexDirty++, this._uvTransform.update(t) && this._refresh()
                    }, e.prototype._refresh = function() {}, e.prototype._calculateBounds = function() {
                        this._bounds.addVertices(this.transform, this.vertices, 0, this.vertices.length)
                    }, e.prototype.containsPoint = function(t) {
                        if (!this.getBounds().contains(t.x, t.y)) return !1;
                        this.worldTransform.applyInverse(t, c);
                        for (var r = this.vertices, n = d.points, i = this.indices, o = this.indices.length, s = this.drawMode === e.DRAW_MODES.TRIANGLES ? 3 : 1, a = 0; a + 2 < o; a += s) {
                            var u = 2 * i[a],
                                h = 2 * i[a + 1],
                                l = 2 * i[a + 2];
                            if (n[0] = r[u], n[1] = r[u + 1], n[2] = r[h], n[3] = r[h + 1], n[4] = r[l], n[5] = r[l + 1], d.contains(c.x, c.y)) return !0
                        }
                        return !1
                    }, e.prototype.destroy = function(e) {
                        for (var r in this._glDatas) {
                            var n = this._glDatas[r];
                            n.destroy ? n.destroy() : (n.vertexBuffer && (n.vertexBuffer.destroy(), n.vertexBuffer = null), n.indexBuffer && (n.indexBuffer.destroy(), n.indexBuffer = null), n.uvBuffer && (n.uvBuffer.destroy(), n.uvBuffer = null), n.vao && (n.vao.destroy(), n.vao = null))
                        }
                        this._glDatas = null, t.prototype.destroy.call(this, e)
                    }, s(e, [{
                        key: "texture",
                        get: function() {
                            return this._texture
                        },
                        set: function(t) {
                            this._texture !== t && (this._texture = t, t && (t.baseTexture.hasLoaded ? this._onTextureUpdate() : t.once("update", this._onTextureUpdate, this)))
                        }
                    }, {
                        key: "tint",
                        get: function() {
                            return u.utils.rgb2hex(this.tintRgb)
                        },
                        set: function(t) {
                            this.tintRgb = u.utils.hex2rgb(t, this.tintRgb)
                        }
                    }]), e
                }(u.Container);
            r.default = f, f.DRAW_MODES = {
                TRIANGLE_MESH: 0,
                TRIANGLES: 1
            }
        }, {
            "../core": 65,
            "../core/textures/Texture": 115
        }],
        167: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("./Plane"),
                u = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(a),
                h = 10,
                l = function(t) {
                    function e(r, o, s, a, u) {
                        n(this, e);
                        var l = i(this, t.call(this, r, 4, 4));
                        return l._origWidth = r.orig.width, l._origHeight = r.orig.height, l._width = l._origWidth, l._height = l._origHeight, l._leftWidth = void 0 !== o ? o : h, l._rightWidth = void 0 !== a ? a : h, l._topHeight = void 0 !== s ? s : h, l._bottomHeight = void 0 !== u ? u : h, l.refresh(!0), l
                    }
                    return o(e, t), e.prototype.updateHorizontalVertices = function() {
                        var t = this.vertices,
                            e = this._topHeight + this._bottomHeight,
                            r = this._height > e ? 1 : this._height / e;
                        t[9] = t[11] = t[13] = t[15] = this._topHeight * r, t[17] = t[19] = t[21] = t[23] = this._height - this._bottomHeight * r, t[25] = t[27] = t[29] = t[31] = this._height
                    }, e.prototype.updateVerticalVertices = function() {
                        var t = this.vertices,
                            e = this._leftWidth + this._rightWidth,
                            r = this._width > e ? 1 : this._width / e;
                        t[2] = t[10] = t[18] = t[26] = this._leftWidth * r, t[4] = t[12] = t[20] = t[28] = this._width - this._rightWidth * r, t[6] = t[14] = t[22] = t[30] = this._width
                    }, e.prototype._renderCanvas = function(t) {
                        var e = t.context;
                        e.globalAlpha = this.worldAlpha, t.setBlendMode(this.blendMode);
                        var r = this.worldTransform,
                            n = t.resolution;
                        t.roundPixels ? e.setTransform(r.a * n, r.b * n, r.c * n, r.d * n, r.tx * n | 0, r.ty * n | 0) : e.setTransform(r.a * n, r.b * n, r.c * n, r.d * n, r.tx * n, r.ty * n);
                        var i = this._texture.baseTexture,
                            o = i.source,
                            s = i.width * i.resolution,
                            a = i.height * i.resolution;
                        this.drawSegment(e, o, s, a, 0, 1, 10, 11), this.drawSegment(e, o, s, a, 2, 3, 12, 13), this.drawSegment(e, o, s, a, 4, 5, 14, 15), this.drawSegment(e, o, s, a, 8, 9, 18, 19), this.drawSegment(e, o, s, a, 10, 11, 20, 21), this.drawSegment(e, o, s, a, 12, 13, 22, 23), this.drawSegment(e, o, s, a, 16, 17, 26, 27), this.drawSegment(e, o, s, a, 18, 19, 28, 29), this.drawSegment(e, o, s, a, 20, 21, 30, 31)
                    }, e.prototype.drawSegment = function(t, e, r, n, i, o, s, a) {
                        var u = this.uvs,
                            h = this.vertices,
                            l = (u[s] - u[i]) * r,
                            c = (u[a] - u[o]) * n,
                            d = h[s] - h[i],
                            f = h[a] - h[o];
                        l < 1 && (l = 1), c < 1 && (c = 1), d < 1 && (d = 1), f < 1 && (f = 1), t.drawImage(e, u[i] * r, u[o] * n, l, c, h[i], h[o], d, f)
                    }, e.prototype._refresh = function() {
                        t.prototype._refresh.call(this);
                        var e = this.uvs,
                            r = this._texture;
                        this._origWidth = r.orig.width, this._origHeight = r.orig.height;
                        var n = 1 / this._origWidth,
                            i = 1 / this._origHeight;
                        e[0] = e[8] = e[16] = e[24] = 0, e[1] = e[3] = e[5] = e[7] = 0, e[6] = e[14] = e[22] = e[30] = 1, e[25] = e[27] = e[29] = e[31] = 1, e[2] = e[10] = e[18] = e[26] = n * this._leftWidth, e[4] = e[12] = e[20] = e[28] = 1 - n * this._rightWidth, e[9] = e[11] = e[13] = e[15] = i * this._topHeight, e[17] = e[19] = e[21] = e[23] = 1 - i * this._bottomHeight, this.updateHorizontalVertices(), this.updateVerticalVertices(), this.dirty++, this.multiplyUvs()
                    }, s(e, [{
                        key: "width",
                        get: function() {
                            return this._width
                        },
                        set: function(t) {
                            this._width = t, this._refresh()
                        }
                    }, {
                        key: "height",
                        get: function() {
                            return this._height
                        },
                        set: function(t) {
                            this._height = t, this._refresh()
                        }
                    }, {
                        key: "leftWidth",
                        get: function() {
                            return this._leftWidth
                        },
                        set: function(t) {
                            this._leftWidth = t, this._refresh()
                        }
                    }, {
                        key: "rightWidth",
                        get: function() {
                            return this._rightWidth
                        },
                        set: function(t) {
                            this._rightWidth = t, this._refresh()
                        }
                    }, {
                        key: "topHeight",
                        get: function() {
                            return this._topHeight
                        },
                        set: function(t) {
                            this._topHeight = t, this._refresh()
                        }
                    }, {
                        key: "bottomHeight",
                        get: function() {
                            return this._bottomHeight
                        },
                        set: function(t) {
                            this._bottomHeight = t, this._refresh()
                        }
                    }]), e
                }(u.default);
            r.default = l
        }, {
            "./Plane": 168
        }],
        168: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = t("./Mesh"),
                a = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(s),
                u = function(t) {
                    function e(r, o, s) {
                        n(this, e);
                        var u = i(this, t.call(this, r));
                        return u._ready = !0, u.verticesX = o || 10, u.verticesY = s || 10, u.drawMode = a.default.DRAW_MODES.TRIANGLES, u.refresh(), u
                    }
                    return o(e, t), e.prototype._refresh = function() {
                        for (var t = this._texture, e = this.verticesX * this.verticesY, r = [], n = [], i = [], o = [], s = this.verticesX - 1, a = this.verticesY - 1, u = t.width / s, h = t.height / a, l = 0; l < e; l++) {
                            var c = l % this.verticesX,
                                d = l / this.verticesX | 0;
                            r.push(c * u, d * h), i.push(c / s, d / a)
                        }
                        for (var f = s * a, p = 0; p < f; p++) {
                            var v = p % s,
                                g = p / s | 0,
                                y = g * this.verticesX + v,
                                m = g * this.verticesX + v + 1,
                                _ = (g + 1) * this.verticesX + v,
                                b = (g + 1) * this.verticesX + v + 1;
                            o.push(y, m, _), o.push(m, b, _)
                        }
                        this.vertices = new Float32Array(r), this.uvs = new Float32Array(i), this.colors = new Float32Array(n), this.indices = new Uint16Array(o), this.dirty++, this.indexDirty++, this.multiplyUvs()
                    }, e.prototype._onTextureUpdate = function() {
                        a.default.prototype._onTextureUpdate.call(this), this._ready && this.refresh()
                    }, e
                }(a.default);
            r.default = u
        }, {
            "./Mesh": 166
        }],
        169: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = t("./Mesh"),
                a = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(s),
                u = function(t) {
                    function e(r, o) {
                        n(this, e);
                        var s = i(this, t.call(this, r));
                        return s.points = o, s.vertices = new Float32Array(4 * o.length), s.uvs = new Float32Array(4 * o.length), s.colors = new Float32Array(2 * o.length), s.indices = new Uint16Array(2 * o.length), s.autoUpdate = !0, s.refresh(), s
                    }
                    return o(e, t), e.prototype._refresh = function() {
                        var t = this.points;
                        if (!(t.length < 1) && this._texture._uvs) {
                            this.vertices.length / 4 !== t.length && (this.vertices = new Float32Array(4 * t.length), this.uvs = new Float32Array(4 * t.length), this.colors = new Float32Array(2 * t.length), this.indices = new Uint16Array(2 * t.length));
                            var e = this.uvs,
                                r = this.indices,
                                n = this.colors;
                            e[0] = 0, e[1] = 0, e[2] = 0, e[3] = 1, n[0] = 1, n[1] = 1, r[0] = 0, r[1] = 1;
                            for (var i = t.length, o = 1; o < i; o++) {
                                var s = 4 * o,
                                    a = o / (i - 1);
                                e[s] = a, e[s + 1] = 0, e[s + 2] = a, e[s + 3] = 1, s = 2 * o, n[s] = 1, n[s + 1] = 1, s = 2 * o, r[s] = s, r[s + 1] = s + 1
                            }
                            this.dirty++, this.indexDirty++, this.multiplyUvs(), this.refreshVertices()
                        }
                    }, e.prototype.refreshVertices = function() {
                        var t = this.points;
                        if (!(t.length < 1))
                            for (var e = t[0], r = void 0, n = 0, i = 0, o = this.vertices, s = t.length, a = 0; a < s; a++) {
                                var u = t[a],
                                    h = 4 * a;
                                r = a < t.length - 1 ? t[a + 1] : u, i = -(r.x - e.x), n = r.y - e.y;
                                var l = 10 * (1 - a / (s - 1));
                                l > 1 && (l = 1);
                                var c = Math.sqrt(n * n + i * i),
                                    d = this._texture.height / 2;
                                n /= c, i /= c, n *= d, i *= d, o[h] = u.x + n, o[h + 1] = u.y + i, o[h + 2] = u.x - n, o[h + 3] = u.y - i, e = u
                            }
                    }, e.prototype.updateTransform = function() {
                        this.autoUpdate && this.refreshVertices(), this.containerUpdateTransform()
                    }, e
                }(a.default);
            r.default = u
        }, {
            "./Mesh": 166
        }],
        170: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = t("../../core"),
                o = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(i),
                s = t("../Mesh"),
                a = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(s),
                u = function() {
                    function t(e) {
                        n(this, t), this.renderer = e
                    }
                    return t.prototype.render = function(t) {
                        var e = this.renderer,
                            r = e.context,
                            n = t.worldTransform,
                            i = e.resolution;
                        e.roundPixels ? r.setTransform(n.a * i, n.b * i, n.c * i, n.d * i, n.tx * i | 0, n.ty * i | 0) : r.setTransform(n.a * i, n.b * i, n.c * i, n.d * i, n.tx * i, n.ty * i), e.context.globalAlpha = t.worldAlpha, e.setBlendMode(t.blendMode), t.drawMode === a.default.DRAW_MODES.TRIANGLE_MESH ? this._renderTriangleMesh(t) : this._renderTriangles(t)
                    }, t.prototype._renderTriangleMesh = function(t) {
                        for (var e = t.vertices.length / 2, r = 0; r < e - 2; r++) {
                            var n = 2 * r;
                            this._renderDrawTriangle(t, n, n + 2, n + 4)
                        }
                    }, t.prototype._renderTriangles = function(t) {
                        for (var e = t.indices, r = e.length, n = 0; n < r; n += 3) {
                            var i = 2 * e[n],
                                o = 2 * e[n + 1],
                                s = 2 * e[n + 2];
                            this._renderDrawTriangle(t, i, o, s)
                        }
                    }, t.prototype._renderDrawTriangle = function(t, e, r, n) {
                        var i = this.renderer.context,
                            o = t.uvs,
                            s = t.vertices,
                            a = t._texture;
                        if (a.valid) {
                            var u = a.baseTexture,
                                h = u.source,
                                l = u.width,
                                c = u.height,
                                d = void 0,
                                f = void 0,
                                p = void 0,
                                v = void 0,
                                g = void 0,
                                y = void 0;
                            if (t.uploadUvTransform) {
                                var m = t._uvTransform.mapCoord;
                                d = (o[e] * m.a + o[e + 1] * m.c + m.tx) * u.width, f = (o[r] * m.a + o[r + 1] * m.c + m.tx) * u.width, p = (o[n] * m.a + o[n + 1] * m.c + m.tx) * u.width, v = (o[e] * m.b + o[e + 1] * m.d + m.ty) * u.height, g = (o[r] * m.b + o[r + 1] * m.d + m.ty) * u.height, y = (o[n] * m.b + o[n + 1] * m.d + m.ty) * u.height
                            } else d = o[e] * u.width, f = o[r] * u.width, p = o[n] * u.width, v = o[e + 1] * u.height, g = o[r + 1] * u.height, y = o[n + 1] * u.height;
                            var _ = s[e],
                                b = s[r],
                                x = s[n],
                                T = s[e + 1],
                                w = s[r + 1],
                                E = s[n + 1],
                                S = t.canvasPadding / this.renderer.resolution;
                            if (S > 0) {
                                var O = S / Math.abs(t.worldTransform.a),
                                    M = S / Math.abs(t.worldTransform.d),
                                    P = (_ + b + x) / 3,
                                    C = (T + w + E) / 3,
                                    R = _ - P,
                                    A = T - C,
                                    I = Math.sqrt(R * R + A * A);
                                _ = P + R / I * (I + O), T = C + A / I * (I + M), R = b - P, A = w - C, I = Math.sqrt(R * R + A * A), b = P + R / I * (I + O), w = C + A / I * (I + M), R = x - P, A = E - C, I = Math.sqrt(R * R + A * A), x = P + R / I * (I + O), E = C + A / I * (I + M)
                            }
                            i.save(), i.beginPath(), i.moveTo(_, T), i.lineTo(b, w), i.lineTo(x, E), i.closePath(), i.clip();
                            var D = d * g + v * p + f * y - g * p - v * f - d * y,
                                L = _ * g + v * x + b * y - g * x - v * b - _ * y,
                                N = d * b + _ * p + f * x - b * p - _ * f - d * x,
                                B = d * g * x + v * b * p + _ * f * y - _ * g * p - v * f * x - d * b * y,
                                F = T * g + v * E + w * y - g * E - v * w - T * y,
                                k = d * w + T * p + f * E - w * p - T * f - d * E,
                                j = d * g * E + v * w * p + T * f * y - T * g * p - v * f * E - d * w * y;
                            i.transform(L / D, F / D, N / D, k / D, B / D, j / D), i.drawImage(h, 0, 0, l * u.resolution, c * u.resolution, 0, 0, l, c), i.restore(), this.renderer.invalidateBlendMode()
                        }
                    }, t.prototype.renderMeshFlat = function(t) {
                        var e = this.renderer.context,
                            r = t.vertices,
                            n = r.length / 2;
                        e.beginPath();
                        for (var i = 1; i < n - 2; ++i) {
                            var o = 2 * i,
                                s = r[o],
                                a = r[o + 1],
                                u = r[o + 2],
                                h = r[o + 3],
                                l = r[o + 4],
                                c = r[o + 5];
                            e.moveTo(s, a), e.lineTo(u, h), e.lineTo(l, c)
                        }
                        e.fillStyle = "#FF0000", e.fill(), e.closePath()
                    }, t.prototype.destroy = function() {
                        this.renderer = null
                    }, t
                }();
            r.default = u, o.CanvasRenderer.registerPlugin("mesh", u)
        }, {
            "../../core": 65,
            "../Mesh": 166
        }],
        171: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            r.__esModule = !0;
            var i = t("./Mesh");
            Object.defineProperty(r, "Mesh", {
                enumerable: !0,
                get: function() {
                    return n(i).default
                }
            });
            var o = t("./webgl/MeshRenderer");
            Object.defineProperty(r, "MeshRenderer", {
                enumerable: !0,
                get: function() {
                    return n(o).default
                }
            });
            var s = t("./canvas/CanvasMeshRenderer");
            Object.defineProperty(r, "CanvasMeshRenderer", {
                enumerable: !0,
                get: function() {
                    return n(s).default
                }
            });
            var a = t("./Plane");
            Object.defineProperty(r, "Plane", {
                enumerable: !0,
                get: function() {
                    return n(a).default
                }
            });
            var u = t("./NineSlicePlane");
            Object.defineProperty(r, "NineSlicePlane", {
                enumerable: !0,
                get: function() {
                    return n(u).default
                }
            });
            var h = t("./Rope");
            Object.defineProperty(r, "Rope", {
                enumerable: !0,
                get: function() {
                    return n(h).default
                }
            })
        }, {
            "./Mesh": 166,
            "./NineSlicePlane": 167,
            "./Plane": 168,
            "./Rope": 169,
            "./canvas/CanvasMeshRenderer": 170,
            "./webgl/MeshRenderer": 172
        }],
        172: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("../../core"),
                u = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(a),
                h = t("pixi-gl-core"),
                l = n(h),
                c = t("../Mesh"),
                d = n(c),
                f = (t("path"), u.Matrix.IDENTITY),
                p = function(t) {
                    function e(r) {
                        i(this, e);
                        var n = o(this, t.call(this, r));
                        return n.shader = null, n
                    }
                    return s(e, t), e.prototype.onContextChange = function() {
                        var t = this.renderer.gl;
                        this.shader = new u.Shader(t, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n", "varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")
                    }, e.prototype.render = function(t) {
                        var e = this.renderer,
                            r = e.gl,
                            n = t._texture;
                        if (n.valid) {
                            var i = t._glDatas[e.CONTEXT_UID];
                            i || (e.bindVao(null), i = {
                                shader: this.shader,
                                vertexBuffer: l.default.GLBuffer.createVertexBuffer(r, t.vertices, r.STREAM_DRAW),
                                uvBuffer: l.default.GLBuffer.createVertexBuffer(r, t.uvs, r.STREAM_DRAW),
                                indexBuffer: l.default.GLBuffer.createIndexBuffer(r, t.indices, r.STATIC_DRAW),
                                vao: null,
                                dirty: t.dirty,
                                indexDirty: t.indexDirty,
                                vertexDirty: t.vertexDirty
                            }, i.vao = new l.default.VertexArrayObject(r).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer, i.shader.attributes.aVertexPosition, r.FLOAT, !1, 8, 0).addAttribute(i.uvBuffer, i.shader.attributes.aTextureCoord, r.FLOAT, !1, 8, 0), t._glDatas[e.CONTEXT_UID] = i), e.bindVao(i.vao), t.dirty !== i.dirty && (i.dirty = t.dirty, i.uvBuffer.upload(t.uvs)), t.indexDirty !== i.indexDirty && (i.indexDirty = t.indexDirty, i.indexBuffer.upload(t.indices)), t.vertexDirty !== i.vertexDirty && (i.vertexDirty = t.vertexDirty, i.vertexBuffer.upload(t.vertices)), e.bindShader(i.shader), i.shader.uniforms.uSampler = e.bindTexture(n), e.state.setBlendMode(u.utils.correctBlendMode(t.blendMode, n.baseTexture.premultipliedAlpha)), i.shader.uniforms.uTransform && (t.uploadUvTransform ? i.shader.uniforms.uTransform = t._uvTransform.mapCoord.toArray(!0) : i.shader.uniforms.uTransform = f.toArray(!0)), i.shader.uniforms.translationMatrix = t.worldTransform.toArray(!0), i.shader.uniforms.uColor = u.utils.premultiplyRgba(t.tintRgb, t.worldAlpha, i.shader.uniforms.uColor, n.baseTexture.premultipliedAlpha);
                            var o = t.drawMode === d.default.DRAW_MODES.TRIANGLE_MESH ? r.TRIANGLE_STRIP : r.TRIANGLES;
                            i.vao.draw(o, t.indices.length, 0)
                        }
                    }, e
                }(u.ObjectRenderer);
            r.default = p, u.WebGLRenderer.registerPlugin("mesh", p)
        }, {
            "../../core": 65,
            "../Mesh": 166,
            path: 8,
            "pixi-gl-core": 15
        }],
        173: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = function() {
                    function t(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, r, n) {
                        return r && t(e.prototype, r), n && t(e, n), e
                    }
                }(),
                a = t("../core"),
                u = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(a),
                h = t("../core/utils"),
                l = function(t) {
                    function e() {
                        var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1500,
                            o = arguments[1],
                            s = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 16384,
                            a = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
                        n(this, e);
                        var h = i(this, t.call(this));
                        return s > 16384 && (s = 16384), s > r && (s = r), h._properties = [!1, !0, !1, !1, !1], h._maxSize = r, h._batchSize = s, h._glBuffers = {}, h._bufferUpdateIDs = [], h._updateID = 0, h.interactiveChildren = !1, h.blendMode = u.BLEND_MODES.NORMAL, h.autoResize = a, h.roundPixels = !0, h.baseTexture = null, h.setProperties(o), h._tint = 0, h.tintRgb = new Float32Array(4), h.tint = 16777215, h
                    }
                    return o(e, t), e.prototype.setProperties = function(t) {
                        t && (this._properties[0] = "vertices" in t || "scale" in t ? !!t.vertices || !!t.scale : this._properties[0], this._properties[1] = "position" in t ? !!t.position : this._properties[1], this._properties[2] = "rotation" in t ? !!t.rotation : this._properties[2], this._properties[3] = "uvs" in t ? !!t.uvs : this._properties[3], this._properties[4] = "tint" in t || "alpha" in t ? !!t.tint || !!t.alpha : this._properties[4])
                    }, e.prototype.updateTransform = function() {
                        this.displayObjectUpdateTransform()
                    }, e.prototype.renderWebGL = function(t) {
                        var e = this;
                        this.visible && !(this.worldAlpha <= 0) && this.children.length && this.renderable && (this.baseTexture || (this.baseTexture = this.children[0]._texture.baseTexture, this.baseTexture.hasLoaded || this.baseTexture.once("update", function() {
                            return e.onChildrenChange(0)
                        })), t.setObjectRenderer(t.plugins.particle), t.plugins.particle.render(this))
                    }, e.prototype.onChildrenChange = function(t) {
                        for (var e = Math.floor(t / this._batchSize); this._bufferUpdateIDs.length < e;) this._bufferUpdateIDs.push(0);
                        this._bufferUpdateIDs[e] = ++this._updateID
                    }, e.prototype.renderCanvas = function(t) {
                        if (this.visible && !(this.worldAlpha <= 0) && this.children.length && this.renderable) {
                            var e = t.context,
                                r = this.worldTransform,
                                n = !0,
                                i = 0,
                                o = 0,
                                s = 0,
                                a = 0;
                            t.setBlendMode(this.blendMode), e.globalAlpha = this.worldAlpha, this.displayObjectUpdateTransform();
                            for (var u = 0; u < this.children.length; ++u) {
                                var h = this.children[u];
                                if (h.visible) {
                                    var l = h._texture.frame;
                                    if (e.globalAlpha = this.worldAlpha * h.alpha, h.rotation % (2 * Math.PI) == 0) n && (e.setTransform(r.a, r.b, r.c, r.d, r.tx * t.resolution, r.ty * t.resolution), n = !1), i = h.anchor.x * (-l.width * h.scale.x) + h.position.x + .5, o = h.anchor.y * (-l.height * h.scale.y) + h.position.y + .5, s = l.width * h.scale.x, a = l.height * h.scale.y;
                                    else {
                                        n || (n = !0), h.displayObjectUpdateTransform();
                                        var c = h.worldTransform;
                                        t.roundPixels ? e.setTransform(c.a, c.b, c.c, c.d, c.tx * t.resolution | 0, c.ty * t.resolution | 0) : e.setTransform(c.a, c.b, c.c, c.d, c.tx * t.resolution, c.ty * t.resolution), i = h.anchor.x * -l.width + .5, o = h.anchor.y * -l.height + .5, s = l.width, a = l.height
                                    }
                                    var d = h._texture.baseTexture.resolution;
                                    e.drawImage(h._texture.baseTexture.source, l.x * d, l.y * d, l.width * d, l.height * d, i * t.resolution, o * t.resolution, s * t.resolution, a * t.resolution)
                                }
                            }
                        }
                    }, e.prototype.destroy = function(e) {
                        if (t.prototype.destroy.call(this, e), this._buffers)
                            for (var r = 0; r < this._buffers.length; ++r) this._buffers[r].destroy();
                        this._properties = null, this._buffers = null, this._bufferUpdateIDs = null
                    }, s(e, [{
                        key: "tint",
                        get: function() {
                            return this._tint
                        },
                        set: function(t) {
                            this._tint = t, (0, h.hex2rgb)(t, this.tintRgb)
                        }
                    }]), e
                }(u.Container);
            r.default = l
        }, {
            "../core": 65,
            "../core/utils": 125
        }],
        174: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            r.__esModule = !0;
            var i = t("./ParticleContainer");
            Object.defineProperty(r, "ParticleContainer", {
                enumerable: !0,
                get: function() {
                    return n(i).default
                }
            });
            var o = t("./webgl/ParticleRenderer");
            Object.defineProperty(r, "ParticleRenderer", {
                enumerable: !0,
                get: function() {
                    return n(o).default
                }
            })
        }, {
            "./ParticleContainer": 173,
            "./webgl/ParticleRenderer": 176
        }],
        175: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var o = t("pixi-gl-core"),
                s = n(o),
                a = t("../../core/utils/createIndicesForQuads"),
                u = n(a),
                h = function() {
                    function t(e, r, n, o) {
                        i(this, t), this.gl = e, this.size = o, this.dynamicProperties = [], this.staticProperties = [];
                        for (var s = 0; s < r.length; ++s) {
                            var a = r[s];
                            a = {
                                attribute: a.attribute,
                                size: a.size,
                                uploadFunction: a.uploadFunction,
                                unsignedByte: a.unsignedByte,
                                offset: a.offset
                            }, n[s] ? this.dynamicProperties.push(a) : this.staticProperties.push(a)
                        }
                        this.staticStride = 0, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.dynamicStride = 0, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this._updateID = 0, this.initBuffers()
                    }
                    return t.prototype.initBuffers = function() {
                        var t = this.gl,
                            e = 0;
                        this.indices = (0, u.default)(this.size), this.indexBuffer = s.default.GLBuffer.createIndexBuffer(t, this.indices, t.STATIC_DRAW), this.dynamicStride = 0;
                        for (var r = 0; r < this.dynamicProperties.length; ++r) {
                            var n = this.dynamicProperties[r];
                            n.offset = e, e += n.size, this.dynamicStride += n.size
                        }
                        var i = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);
                        this.dynamicData = new Float32Array(i), this.dynamicDataUint32 = new Uint32Array(i), this.dynamicBuffer = s.default.GLBuffer.createVertexBuffer(t, i, t.STREAM_DRAW);
                        var o = 0;
                        this.staticStride = 0;
                        for (var a = 0; a < this.staticProperties.length; ++a) {
                            var h = this.staticProperties[a];
                            h.offset = o, o += h.size, this.staticStride += h.size
                        }
                        var l = new ArrayBuffer(this.size * this.staticStride * 4 * 4);
                        this.staticData = new Float32Array(l), this.staticDataUint32 = new Uint32Array(l), this.staticBuffer = s.default.GLBuffer.createVertexBuffer(t, l, t.STATIC_DRAW), this.vao = new s.default.VertexArrayObject(t).addIndex(this.indexBuffer);
                        for (var c = 0; c < this.dynamicProperties.length; ++c) {
                            var d = this.dynamicProperties[c];
                            d.unsignedByte ? this.vao.addAttribute(this.dynamicBuffer, d.attribute, t.UNSIGNED_BYTE, !0, 4 * this.dynamicStride, 4 * d.offset) : this.vao.addAttribute(this.dynamicBuffer, d.attribute, t.FLOAT, !1, 4 * this.dynamicStride, 4 * d.offset)
                        }
                        for (var f = 0; f < this.staticProperties.length; ++f) {
                            var p = this.staticProperties[f];
                            p.unsignedByte ? this.vao.addAttribute(this.staticBuffer, p.attribute, t.UNSIGNED_BYTE, !0, 4 * this.staticStride, 4 * p.offset) : this.vao.addAttribute(this.staticBuffer, p.attribute, t.FLOAT, !1, 4 * this.staticStride, 4 * p.offset)
                        }
                    }, t.prototype.uploadDynamic = function(t, e, r) {
                        for (var n = 0; n < this.dynamicProperties.length; n++) {
                            var i = this.dynamicProperties[n];
                            i.uploadFunction(t, e, r, i.unsignedByte ? this.dynamicDataUint32 : this.dynamicData, this.dynamicStride, i.offset)
                        }
                        this.dynamicBuffer.upload()
                    }, t.prototype.uploadStatic = function(t, e, r) {
                        for (var n = 0; n < this.staticProperties.length; n++) {
                            var i = this.staticProperties[n];
                            i.uploadFunction(t, e, r, i.unsignedByte ? this.staticDataUint32 : this.staticData, this.staticStride, i.offset)
                        }
                        this.staticBuffer.upload()
                    }, t.prototype.destroy = function() {
                        this.dynamicProperties = null, this.dynamicBuffer.destroy(), this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this.staticProperties = null, this.staticBuffer.destroy(), this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null
                    }, t
                }();
            r.default = h
        }, {
            "../../core/utils/createIndicesForQuads": 123,
            "pixi-gl-core": 15
        }],
        176: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function i(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var a = t("../../core"),
                u = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(a),
                h = t("./ParticleShader"),
                l = n(h),
                c = t("./ParticleBuffer"),
                d = n(c),
                f = t("../../core/utils"),
                p = function(t) {
                    function e(r) {
                        i(this, e);
                        var n = o(this, t.call(this, r));
                        return n.shader = null, n.indexBuffer = null, n.properties = null, n.tempMatrix = new u.Matrix, n.CONTEXT_UID = 0, n
                    }
                    return s(e, t), e.prototype.onContextChange = function() {
                        var t = this.renderer.gl;
                        this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.shader = new l.default(t), this.properties = [{
                            attribute: this.shader.attributes.aVertexPosition,
                            size: 2,
                            uploadFunction: this.uploadVertices,
                            offset: 0
                        }, {
                            attribute: this.shader.attributes.aPositionCoord,
                            size: 2,
                            uploadFunction: this.uploadPosition,
                            offset: 0
                        }, {
                            attribute: this.shader.attributes.aRotation,
                            size: 1,
                            uploadFunction: this.uploadRotation,
                            offset: 0
                        }, {
                            attribute: this.shader.attributes.aTextureCoord,
                            size: 2,
                            uploadFunction: this.uploadUvs,
                            offset: 0
                        }, {
                            attribute: this.shader.attributes.aColor,
                            size: 1,
                            unsignedByte: !0,
                            uploadFunction: this.uploadTint,
                            offset: 0
                        }]
                    }, e.prototype.start = function() {
                        this.renderer.bindShader(this.shader)
                    }, e.prototype.render = function(t) {
                        var e = t.children,
                            r = t._maxSize,
                            n = t._batchSize,
                            i = this.renderer,
                            o = e.length;
                        if (0 !== o) {
                            o > r && (o = r);
                            var s = t._glBuffers[i.CONTEXT_UID];
                            s || (s = t._glBuffers[i.CONTEXT_UID] = this.generateBuffers(t));
                            var a = e[0]._texture.baseTexture;
                            this.renderer.setBlendMode(u.utils.correctBlendMode(t.blendMode, a.premultipliedAlpha));
                            var h = i.gl,
                                l = t.worldTransform.copy(this.tempMatrix);
                            l.prepend(i._activeRenderTarget.projectionMatrix), this.shader.uniforms.projectionMatrix = l.toArray(!0), this.shader.uniforms.uColor = u.utils.premultiplyRgba(t.tintRgb, t.worldAlpha, this.shader.uniforms.uColor, a.premultipliedAlpha), this.shader.uniforms.uSampler = i.bindTexture(a);
                            for (var c = !1, d = 0, f = 0; d < o; d += n, f += 1) {
                                var p = o - d;
                                if (p > n && (p = n), f >= s.length) {
                                    if (!t.autoResize) break;
                                    s.push(this._generateOneMoreBuffer(t))
                                }
                                var v = s[f];
                                v.uploadDynamic(e, d, p);
                                var g = t._bufferUpdateIDs[f] || 0;
                                c = c || v._updateID < g, c && (v._updateID = t._updateID, v.uploadStatic(e, d, p)), i.bindVao(v.vao), v.vao.draw(h.TRIANGLES, 6 * p)
                            }
                        }
                    }, e.prototype.generateBuffers = function(t) {
                        for (var e = this.renderer.gl, r = [], n = t._maxSize, i = t._batchSize, o = t._properties, s = 0; s < n; s += i) r.push(new d.default(e, this.properties, o, i));
                        return r
                    }, e.prototype._generateOneMoreBuffer = function(t) {
                        var e = this.renderer.gl,
                            r = t._batchSize,
                            n = t._properties;
                        return new d.default(e, this.properties, n, r)
                    }, e.prototype.uploadVertices = function(t, e, r, n, i, o) {
                        for (var s = 0, a = 0, u = 0, h = 0, l = 0; l < r; ++l) {
                            var c = t[e + l],
                                d = c._texture,
                                f = c.scale.x,
                                p = c.scale.y,
                                v = d.trim,
                                g = d.orig;
                            v ? (a = v.x - c.anchor.x * g.width, s = a + v.width, h = v.y - c.anchor.y * g.height, u = h + v.height) : (s = g.width * (1 - c.anchor.x), a = g.width * -c.anchor.x, u = g.height * (1 - c.anchor.y), h = g.height * -c.anchor.y), n[o] = a * f, n[o + 1] = h * p, n[o + i] = s * f, n[o + i + 1] = h * p, n[o + 2 * i] = s * f, n[o + 2 * i + 1] = u * p, n[o + 3 * i] = a * f, n[o + 3 * i + 1] = u * p, o += 4 * i
                        }
                    }, e.prototype.uploadPosition = function(t, e, r, n, i, o) {
                        for (var s = 0; s < r; s++) {
                            var a = t[e + s].position;
                            n[o] = a.x, n[o + 1] = a.y, n[o + i] = a.x, n[o + i + 1] = a.y, n[o + 2 * i] = a.x, n[o + 2 * i + 1] = a.y, n[o + 3 * i] = a.x, n[o + 3 * i + 1] = a.y, o += 4 * i
                        }
                    }, e.prototype.uploadRotation = function(t, e, r, n, i, o) {
                        for (var s = 0; s < r; s++) {
                            var a = t[e + s].rotation;
                            n[o] = a, n[o + i] = a, n[o + 2 * i] = a, n[o + 3 * i] = a, o += 4 * i
                        }
                    }, e.prototype.uploadUvs = function(t, e, r, n, i, o) {
                        for (var s = 0; s < r; ++s) {
                            var a = t[e + s]._texture._uvs;
                            a ? (n[o] = a.x0, n[o + 1] = a.y0, n[o + i] = a.x1, n[o + i + 1] = a.y1, n[o + 2 * i] = a.x2, n[o + 2 * i + 1] = a.y2, n[o + 3 * i] = a.x3, n[o + 3 * i + 1] = a.y3, o += 4 * i) : (n[o] = 0, n[o + 1] = 0, n[o + i] = 0, n[o + i + 1] = 0, n[o + 2 * i] = 0, n[o + 2 * i + 1] = 0, n[o + 3 * i] = 0, n[o + 3 * i + 1] = 0, o += 4 * i)
                        }
                    }, e.prototype.uploadTint = function(t, e, r, n, i, o) {
                        for (var s = 0; s < r; ++s) {
                            var a = t[e + s],
                                u = a._texture.baseTexture.premultipliedAlpha,
                                h = a.alpha,
                                l = h < 1 && u ? (0, f.premultiplyTint)(a._tintRGB, h) : a._tintRGB + (255 * h << 24);
                            n[o] = l, n[o + i] = l, n[o + 2 * i] = l, n[o + 3 * i] = l, o += 4 * i
                        }
                    }, e.prototype.destroy = function() {
                        this.renderer.gl && this.renderer.gl.deleteBuffer(this.indexBuffer), t.prototype.destroy.call(this), this.shader.destroy(), this.indices = null, this.tempMatrix = null
                    }, e
                }(u.ObjectRenderer);
            r.default = p, u.WebGLRenderer.registerPlugin("particle", p)
        }, {
            "../../core": 65,
            "../../core/utils": 125,
            "./ParticleBuffer": 175,
            "./ParticleShader": 177
        }],
        177: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            r.__esModule = !0;
            var s = t("../../core/Shader"),
                a = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(s),
                u = function(t) {
                    function e(r) {
                        return n(this, e), i(this, t.call(this, r, ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute vec4 aColor;", "attribute vec2 aPositionCoord;", "attribute float aRotation;", "uniform mat3 projectionMatrix;", "uniform vec4 uColor;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "void main(void){", "   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);", "   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);", "   vec2 v = vec2(x, y);", "   v = v + aPositionCoord;", "   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = aColor * uColor;", "}"].join("\n"), ["varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void){", "  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;", "  gl_FragColor = color;", "}"].join("\n")))
                    }
                    return o(e, t), e
                }(a.default);
            r.default = u
        }, {
            "../../core/Shader": 44
        }],
        178: [function(t, e, r) {
            "use strict";
            Math.sign || (Math.sign = function(t) {
                return t = Number(t), 0 === t || isNaN(t) ? t : t > 0 ? 1 : -1
            })
        }, {}],
        179: [function(t, e, r) {
            "use strict";
            Number.isInteger || (Number.isInteger = function(t) {
                return "number" == typeof t && isFinite(t) && Math.floor(t) === t
            })
        }, {}],
        180: [function(t, e, r) {
            "use strict";
            var n = t("object-assign"),
                i = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n);
            Object.assign || (Object.assign = i.default)
        }, {
            "object-assign": 6
        }],
        181: [function(t, e, r) {
            "use strict";
            t("./Object.assign"), t("./requestAnimationFrame"), t("./Math.sign"), t("./Number.isInteger"), window.ArrayBuffer || (window.ArrayBuffer = Array), window.Float32Array || (window.Float32Array = Array), window.Uint32Array || (window.Uint32Array = Array), window.Uint16Array || (window.Uint16Array = Array)
        }, {
            "./Math.sign": 178,
            "./Number.isInteger": 179,
            "./Object.assign": 180,
            "./requestAnimationFrame": 182
        }],
        182: [function(t, e, r) {
            (function(t) {
                "use strict";
                if (Date.now && Date.prototype.getTime || (Date.now = function() {
                        return (new Date).getTime()
                    }), !t.performance || !t.performance.now) {
                    var e = Date.now();
                    t.performance || (t.performance = {}), t.performance.now = function() {
                        return Date.now() - e
                    }
                }
                for (var r = Date.now(), n = ["ms", "moz", "webkit", "o"], i = 0; i < n.length && !t.requestAnimationFrame; ++i) {
                    var o = n[i];
                    t.requestAnimationFrame = t[o + "RequestAnimationFrame"], t.cancelAnimationFrame = t[o + "CancelAnimationFrame"] || t[o + "CancelRequestAnimationFrame"]
                }
                t.requestAnimationFrame || (t.requestAnimationFrame = function(t) {
                    if ("function" != typeof t) throw new TypeError(t + "is not a function");
                    var e = Date.now(),
                        n = 16 + r - e;
                    return n < 0 && (n = 0), r = e, setTimeout(function() {
                        r = Date.now(), t(performance.now())
                    }, n)
                }), t.cancelAnimationFrame || (t.cancelAnimationFrame = function(t) {
                    return clearTimeout(t)
                })
            }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {}],
        183: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                var r = !1;
                if (t && t._textures && t._textures.length)
                    for (var n = 0; n < t._textures.length; n++)
                        if (t._textures[n] instanceof d.Texture) {
                            var i = t._textures[n].baseTexture; - 1 === e.indexOf(i) && (e.push(i), r = !0)
                        } return r
            }

            function o(t, e) {
                return t instanceof d.BaseTexture && (-1 === e.indexOf(t) && e.push(t), !0)
            }

            function s(t, e) {
                if (t._texture && t._texture instanceof d.Texture) {
                    var r = t._texture.baseTexture;
                    return -1 === e.indexOf(r) && e.push(r), !0
                }
                return !1
            }

            function a(t, e) {
                return e instanceof d.Text && (e.updateText(!0), !0)
            }

            function u(t, e) {
                if (e instanceof d.TextStyle) {
                    var r = e.toFontString();
                    return d.TextMetrics.measureFont(r), !0
                }
                return !1
            }

            function h(t, e) {
                if (t instanceof d.Text) {
                    -1 === e.indexOf(t.style) && e.push(t.style), -1 === e.indexOf(t) && e.push(t);
                    var r = t._texture.baseTexture;
                    return -1 === e.indexOf(r) && e.push(r), !0
                }
                return !1
            }

            function l(t, e) {
                return t instanceof d.TextStyle && (-1 === e.indexOf(t) && e.push(t), !0)
            }
            r.__esModule = !0;
            var c = t("../core"),
                d = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(c),
                f = t("./limiters/CountLimiter"),
                p = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(f),
                v = d.ticker.shared;
            d.settings.UPLOADS_PER_FRAME = 4;
            var g = function() {
                function t(e) {
                    var r = this;
                    n(this, t), this.limiter = new p.default(d.settings.UPLOADS_PER_FRAME), this.renderer = e, this.uploadHookHelper = null, this.queue = [], this.addHooks = [], this.uploadHooks = [], this.completes = [], this.ticking = !1, this.delayedTick = function() {
                        r.queue && r.prepareItems()
                    }, this.registerFindHook(h), this.registerFindHook(l), this.registerFindHook(i), this.registerFindHook(o), this.registerFindHook(s), this.registerUploadHook(a), this.registerUploadHook(u)
                }
                return t.prototype.upload = function(t, e) {
                    "function" == typeof t && (e = t, t = null), t && this.add(t), this.queue.length ? (e && this.completes.push(e), this.ticking || (this.ticking = !0, v.addOnce(this.tick, this, d.UPDATE_PRIORITY.UTILITY))) : e && e()
                }, t.prototype.tick = function() {
                    setTimeout(this.delayedTick, 0)
                }, t.prototype.prepareItems = function() {
                    for (this.limiter.beginFrame(); this.queue.length && this.limiter.allowedToUpload();) {
                        var t = this.queue[0],
                            e = !1;
                        if (t && !t._destroyed)
                            for (var r = 0, n = this.uploadHooks.length; r < n; r++)
                                if (this.uploadHooks[r](this.uploadHookHelper, t)) {
                                    this.queue.shift(), e = !0;
                                    break
                                } e || this.queue.shift()
                    }
                    if (this.queue.length) v.addOnce(this.tick, this, d.UPDATE_PRIORITY.UTILITY);
                    else {
                        this.ticking = !1;
                        var i = this.completes.slice(0);
                        this.completes.length = 0;
                        for (var o = 0, s = i.length; o < s; o++) i[o]()
                    }
                }, t.prototype.registerFindHook = function(t) {
                    return t && this.addHooks.push(t), this
                }, t.prototype.registerUploadHook = function(t) {
                    return t && this.uploadHooks.push(t), this
                }, t.prototype.add = function(t) {
                    for (var e = 0, r = this.addHooks.length; e < r && !this.addHooks[e](t, this.queue); e++);
                    if (t instanceof d.Container)
                        for (var n = t.children.length - 1; n >= 0; n--) this.add(t.children[n]);
                    return this
                }, t.prototype.destroy = function() {
                    this.ticking && v.remove(this.tick, this), this.ticking = !1, this.addHooks = null, this.uploadHooks = null, this.renderer = null, this.completes = null, this.queue = null, this.limiter = null, this.uploadHookHelper = null
                }, t
            }();
            r.default = g
        }, {
            "../core": 65,
            "./limiters/CountLimiter": 186
        }],
        184: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function s(t, e) {
                if (e instanceof u.BaseTexture) {
                    var r = e.source,
                        n = 0 === r.width ? t.canvas.width : Math.min(t.canvas.width, r.width),
                        i = 0 === r.height ? t.canvas.height : Math.min(t.canvas.height, r.height);
                    return t.ctx.drawImage(r, 0, 0, n, i, 0, 0, t.canvas.width, t.canvas.height), !0
                }
                return !1
            }
            r.__esModule = !0;
            var a = t("../../core"),
                u = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(a),
                h = t("../BasePrepare"),
                l = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(h),
                c = 16,
                d = function(t) {
                    function e(r) {
                        n(this, e);
                        var o = i(this, t.call(this, r));
                        return o.uploadHookHelper = o, o.canvas = document.createElement("canvas"), o.canvas.width = c, o.canvas.height = c, o.ctx = o.canvas.getContext("2d"), o.registerUploadHook(s), o
                    }
                    return o(e, t), e.prototype.destroy = function() {
                        t.prototype.destroy.call(this), this.ctx = null, this.canvas = null
                    }, e
                }(l.default);
            r.default = d, u.CanvasRenderer.registerPlugin("prepare", d)
        }, {
            "../../core": 65,
            "../BasePrepare": 183
        }],
        185: [function(t, e, r) {
            "use strict";

            function n(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            r.__esModule = !0;
            var i = t("./webgl/WebGLPrepare");
            Object.defineProperty(r, "webgl", {
                enumerable: !0,
                get: function() {
                    return n(i).default
                }
            });
            var o = t("./canvas/CanvasPrepare");
            Object.defineProperty(r, "canvas", {
                enumerable: !0,
                get: function() {
                    return n(o).default
                }
            });
            var s = t("./BasePrepare");
            Object.defineProperty(r, "BasePrepare", {
                enumerable: !0,
                get: function() {
                    return n(s).default
                }
            });
            var a = t("./limiters/CountLimiter");
            Object.defineProperty(r, "CountLimiter", {
                enumerable: !0,
                get: function() {
                    return n(a).default
                }
            });
            var u = t("./limiters/TimeLimiter");
            Object.defineProperty(r, "TimeLimiter", {
                enumerable: !0,
                get: function() {
                    return n(u).default
                }
            })
        }, {
            "./BasePrepare": 183,
            "./canvas/CanvasPrepare": 184,
            "./limiters/CountLimiter": 186,
            "./limiters/TimeLimiter": 187,
            "./webgl/WebGLPrepare": 188
        }],
        186: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                function t(e) {
                    n(this, t), this.maxItemsPerFrame = e, this.itemsLeft = 0
                }
                return t.prototype.beginFrame = function() {
                    this.itemsLeft = this.maxItemsPerFrame
                }, t.prototype.allowedToUpload = function() {
                    return this.itemsLeft-- > 0
                }, t
            }();
            r.default = i
        }, {}],
        187: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            r.__esModule = !0;
            var i = function() {
                function t(e) {
                    n(this, t), this.maxMilliseconds = e, this.frameStart = 0
                }
                return t.prototype.beginFrame = function() {
                    this.frameStart = Date.now()
                }, t.prototype.allowedToUpload = function() {
                    return Date.now() - this.frameStart < this.maxMilliseconds
                }, t
            }();
            r.default = i
        }, {}],
        188: [function(t, e, r) {
            "use strict";

            function n(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function i(t, e) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function s(t, e) {
                return e instanceof l.BaseTexture && (e._glTextures[t.CONTEXT_UID] || t.textureManager.updateTexture(e), !0)
            }

            function a(t, e) {
                return e instanceof l.Graphics && ((e.dirty || e.clearDirty || !e._webGL[t.plugins.graphics.CONTEXT_UID]) && t.plugins.graphics.updateGraphics(e), !0)
            }

            function u(t, e) {
                return t instanceof l.Graphics && (e.push(t), !0)
            }
            r.__esModule = !0;
            var h = t("../../core"),
                l = function(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }(h),
                c = t("../BasePrepare"),
                d = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(c),
                f = function(t) {
                    function e(r) {
                        n(this, e);
                        var o = i(this, t.call(this, r));
                        return o.uploadHookHelper = o.renderer, o.registerFindHook(u), o.registerUploadHook(s), o.registerUploadHook(a), o
                    }
                    return o(e, t), e
                }(d.default);
            r.default = f, l.WebGLRenderer.registerPlugin("prepare", f)
        }, {
            "../../core": 65,
            "../BasePrepare": 183
        }],
        189: [function(t, e, r) {
            (function(e) {
                "use strict";

                function n(t) {
                    if (t && t.__esModule) return t;
                    var e = {};
                    if (null != t)
                        for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                    return e.default = t, e
                }
                r.__esModule = !0, r.loader = r.prepare = r.particles = r.mesh = r.loaders = r.interaction = r.filters = r.extras = r.extract = r.accessibility = void 0;
                var i = t("./polyfill");
                Object.keys(i).forEach(function(t) {
                    "default" !== t && "__esModule" !== t && Object.defineProperty(r, t, {
                        enumerable: !0,
                        get: function() {
                            return i[t]
                        }
                    })
                });
                var o = t("./core");
                Object.keys(o).forEach(function(t) {
                    "default" !== t && "__esModule" !== t && Object.defineProperty(r, t, {
                        enumerable: !0,
                        get: function() {
                            return o[t]
                        }
                    })
                });
                var s = t("./deprecation"),
                    a = function(t) {
                        return t && t.__esModule ? t : {
                            default: t
                        }
                    }(s),
                    u = t("./accessibility"),
                    h = n(u),
                    l = t("./extract"),
                    c = n(l),
                    d = t("./extras"),
                    f = n(d),
                    p = t("./filters"),
                    v = n(p),
                    g = t("./interaction"),
                    y = n(g),
                    m = t("./loaders"),
                    _ = n(m),
                    b = t("./mesh"),
                    x = n(b),
                    T = t("./particles"),
                    w = n(T),
                    E = t("./prepare"),
                    S = n(E);
                o.utils.mixins.performMixins();
                var O = _.shared || null;
                r.accessibility = h, r.extract = c, r.extras = f, r.filters = v, r.interaction = y, r.loaders = _, r.mesh = x, r.particles = w, r.prepare = S, r.loader = O, "function" == typeof a.default && (0, a.default)(r), e.PIXI = r
            }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {
            "./accessibility": 42,
            "./core": 65,
            "./deprecation": 131,
            "./extract": 133,
            "./extras": 141,
            "./filters": 153,
            "./interaction": 159,
            "./loaders": 162,
            "./mesh": 171,
            "./particles": 174,
            "./polyfill": 181,
            "./prepare": 185
        }]
    }, {}, [189])(189)
});
Sys.ns("Core"), Core.StateHandler = {
    constructor: function() {
        var t = this;
        Core.StateHandler.superclass.constructor.apply(t, arguments), t.useLogging = !1, t.states = window.GenericStates || {}, t.stateStack = [], t.runningStateMachine = !1
    },
    registerEvents: function(t) {
        var e, n = this,
            a = t.length;
        if (Sys.isArray(t))
            for (e = -1; ++e < a;) n.addListener(t[e], n.onDefaultEventHandler.bind(n, t[e]));
        else "string" == typeof t && n.addListener(t, n.onDefaultEventHandler.bind(n, t))
    },
    onDefaultEventHandler: function(t) {
        this.dispatchEvent(t), this.activateStateMachine()
    },
    initStateHandler: function() {
        var t, e = this;
        Sys.iterate(window.GenericStates || {}, function(t, n) {
            e._registerTrigger(n)
        }), EventHandler.sortEventListeners(this), t = Resources.readData("gameServerInitResponse"), !0 !== t.restore && this.pushState(this.states.idle), this.pushState(this.states.beforeLoaderClose), this.pushState(this.states.setupGame), this.activateStateMachine()
    },
    activateStateMachine: function() {
        var t, e = this;
        if (!e.runningStateMachine) {
            for (e.runningStateMachine = !0; e.hasStatesInStack();) {
                if (!Sys.isEmpty(e.currentState)) {
                    for (t in e.currentState.waitEvents)
                        if (e.currentState.waitEvents.hasOwnProperty(t) && !e.currentState.waitEvents[t]) return void(e.runningStateMachine = !1);
                    return void setTimeout(e.leaveCurrentState.bind(e), 1)
                }
                e.currentState = e.stateStack.pop(), e.currentState.execute({
                    stateHandler: e,
                    states: e.states
                }), e.processModuleQueue(), Sys.isDefined(e.currentState.executeLast) && e.currentState.executeLast({
                    stateHandler: e,
                    states: e.states
                }), e.fireEvent("notify:stateHandler.entering" + e.currentState.name + "State")
            }
            e.runningStateMachine = !1
        }
    },
    leaveCurrentState: function() {
        var t = this;
        t.fireEvent("notify:stateHandler.leaving" + t.currentState.name + "State"), t.currentState = void 0, t.runningStateMachine = !1, t.activateStateMachine()
    },
    processModuleQueue: function() {
        var t, e = this,
            n = Game.moduleLoader.getModuleQueueForState(e.currentState.name),
            a = n.length;
        for (t = 0; t < a; t++) n[t]({
            stateHandler: e,
            states: e.states
        })
    },
    addState: function(t, e) {
        Sys.isDefined(this.states[t]) || (this.states[t] = e, this._registerTrigger(e))
    },
    _registerTrigger: function(t) {
        Sys.isDefined(Services.trigger) && (Services.trigger.registerTrigger("notify:stateHandler.entering" + t.name + "State", this, "When entering the state " + t.name), Services.trigger.registerTrigger("notify:stateHandler.leaving" + t.name + "State", this, "When leaving the state " + t.name))
    },
    pushState: function(t) {
        var e;
        if (this.stateStack.indexOf(t) > -1) return void console.error("Trying to insert state '" + t.name + "', that is already in stack");
        for (e in t.waitEvents) t.waitEvents.hasOwnProperty(e) && (t.waitEvents[e] = !1);
        this.stateStack.push(t)
    },
    dispatchEvent: function(t) {
        var e = this;
        Sys.isEmpty(e.currentState) || Sys.isEmpty(e.currentState.waitEvents[t]) || (e.currentState.waitEvents[t] = !0), Sys.each(e.stateStack, function(e) {
            Sys.isEmpty(e.waitEvents[t]) || (e.waitEvents[t] = !0)
        })
    },
    dumpStack: function(t) {
        var e, n, a, r = this,
            s = "";
        if (r.useLogging)
            if (this.currentState) {
                for (e = t, Sys.each(Object.getOwnPropertyNames(this.currentState.waitEvents), function(t) {
                        n = r.currentState.waitEvents[t] ? "*" : " ", s += "\n\t\t(" + n + ") " + t.replace(/\s/g, "")
                    }), e += "\nCurrent state:\t" + this.currentState.name + s, a = this.stateStack.length - 1; a >= 0; a--) e += "\n\t" + this.stateStack[a].name;
                console.info(e)
            } else console.warn("No current state!")
    },
    hasStates: function() {
        return Object.keys(this.states).length > 0
    },
    hasStatesInStack: function() {
        return this.stateStack.length > 0
    },
    isRunning: function() {
        return this.runningStateMachine
    }
}, Core.StateHandler = Sys.extend(Sys.Observable, Core.StateHandler, "Core.StateHandler");
window.GenericStates = {
    beforeLoaderClose: {
        name: "BeforeLoaderClose",
        execute: function() {},
        waitEvents: {}
    },
    setupGame: {
        name: "SetupGame",
        execute: function() {},
        waitEvents: {}
    },
    idle: {
        name: "Idle",
        execute: function(e) {},
        waitEvents: {}
    }
};
Sys.ns("Core"), Core.ModuleLoader = {
    constructor: function(e) {
        Core.ModuleLoader.superclass.constructor.apply(this, arguments), this.init(e)
    },
    getModuleQueueForState: function(e) {
        var t = this.stateOrder[e];
        return Sys.isDefined(t) ? t : []
    },
    init: function(e) {
        var t = this,
            i = Resources.readData("modules");
        t.stateHandler = e.stateHandler, t.stateOrder = t.getCommonStateOrder(), t.addGameSpecificStateOrder(), t.loadModules(i), t.updateStates(), t.cleanStateQueue(), t.fireEvent("notify:moduleLoader.finishedLoadingModules")
    },
    loadModules: function(e) {
        var t, i, s = this,
            n = Environment.getCurrentPlatform();
        s.modules = {}, Sys.iterate(e, function(e, r) {
            if (t = Sys.isArray(r.platforms) && -1 === r.platforms.indexOf(n), !Sys.isDefined(s.modules[e]) && !t) {
                if (i = s.getClassFromString(r.module), !Sys.isDefined(i) && !0 === r.optional) return;
                s.modules[e] = new i({
                    name: e,
                    model: s.getPlatformSpecificClass(r.model),
                    view: s.getPlatformSpecificClass(r.view),
                    controller: s.getClassFromString(r.controller)
                }), "string" == typeof r.global && (Sys.isDefined(window[r.global]) || (window[r.global] = {}), window[r.global][e] = s.modules[e].controller), s.applyMixins(s.modules[e], s.combineMixins(s.modules[e].getMixinDependencies(), r.mixins))
            }
        })
    },
    combineMixins: function(e, t) {
        var i, s, n, r, o, a, l = {},
            d = Environment.getCurrentPlatform();
        for (Sys.isArray(e) ? (o = e, a = e.length) : (o = e.hasOwnProperty(d) ? e[d] : e.fallback, a = o && o.length || 0), r = -1; ++r < a;) i = o[r], Sys.isObj(i) ? (n = Object.keys(i)[0], s = i[n], l[n] = s) : "string" == typeof i && (l[i] = void 0);
        if (Sys.isArray(t))
            for (a = t.length, r = -1; ++r < a;) i = t[r], Sys.isDefined(l[i]) || (l[i] = void 0);
        return l
    },
    applyMixins: function(e, t) {
        var i, s, n, r, o, a, l = ["controller", "model", "view"],
            d = Object.keys(t),
            u = d.length,
            f = l.length;
        for (o = -1; ++o < u;)
            if (r = d[o], n = t[r] || {}, i = Mixins[r], Sys.isDefined(i)) {
                for (a = -1; ++a < f;) s = l[a], Sys.isDefined(i[s]) && Sys.isDefined(e[s]) && Sys.isDefined(i[s].methods) && this.applyMixinProperties(e[s], i[s].methods);
                for (a = -1; ++a < f;) s = l[a], Sys.isDefined(i[s]) && Sys.isDefined(e[s]) && Sys.isDefined(i[s].executeOnInstantiation) && this.executeMixinProperties(e[s], i[s].executeOnInstantiation, n)
            }
    },
    applyMixinProperties: function(e, t) {
        for (var i, s = Object.keys(t), n = s.length, r = 0; r < n;) i = s[r], Sys.isDefined(e[i]) || (e[i] = t[i]), ++r
    },
    executeMixinProperties: function(e, t, i) {
        for (var s = Object.keys(t), n = s.length, r = 0; r < n;) t[s[r]].call(e, i), ++r
    },
    updateStates: function() {
        var e = this,
            t = e.modules,
            i = e.stateHandler.states;
        e.moduleQueues = {}, Sys.iterate(t, function(t, i) {
            var s = i.getStateChanges();
            Sys.iterate(s, function(t, s) {
                var n = [];
                Sys.isDefined(s.state) && (e.stateHandler.addState(t, s.state), Sys.iterate(s.state.waitEvents, function(e) {
                    n.push(e)
                }), n.length > 0 && e.registerListenersOnStateHandler(i.controller, n))
            })
        }), Sys.iterate(t, function(t, s) {
            var n = s.getStateChanges();
            Sys.iterate(n, function(n, r) {
                !Sys.isDefined(r.state) && Sys.isDefined(i[n]) && (Sys.isArray(r.waitEvents) && (Sys.each(r.waitEvents, function(e) {
                    i[n].waitEvents[e] = !1
                }), e.registerListenersOnStateHandler(s.controller, r.waitEvents)), Sys.isArray(r.queue) && e.updateModuleQueue(t, i[n].name, r.queue))
            })
        })
    },
    registerListenersOnStateHandler: function(e, t) {
        var i, s = t.length;
        for (i = -1; ++i < s;) this.stateHandler.hasListener(t[i]) || this.stateHandler.registerEvents(t[i])
    },
    updateModuleQueue: function(e, t, i) {
        var s, n = this.stateOrder[t];
        Sys.isDefined(n) ? (s = n.indexOf(e), s >= 0 ? (n.splice.apply(n, [s, 1].concat(i)), this.stateOrder[t] = n) : console.warn("ModuleLoader.updateModuleQueue :: The module (" + e + ") is not specified in the module loader for the current state (" + t + ")")) : console.warn("ModuleLoader.updateModuleQueue :: The state (" + t + ") is not specified in the module loader")
    },
    cleanStateQueue: function() {
        var e = this;
        Sys.iterate(e.stateOrder, function(e, t) {
            var i;
            for (i = 0; i < t.length; i++) "string" != typeof t[i] && Sys.isDefined(t[i]) || (t.splice(i, 1), i--)
        })
    },
    addGameSpecificStateOrder: function() {
        var e = this,
            t = e.stateOrder,
            i = Resources.readData("config"),
            s = i.stateOrder;
        Sys.isDefined(s) && Sys.iterate(s, function(e, i) {
            Sys.each(i, function(i) {
                var s;
                Sys.isDefined(t[e]) ? Sys.isDefined(i.insertBefore) ? (s = t[e].indexOf(i.insertBefore) + 1, s < 0 ? t[e] = i.modules.concat(t[e]) : t[e].splice.apply(t[e], [s, 0].concat(i.modules))) : t[e].push.apply(t[e], i.modules) : t[e] = i.modules
            })
        })
    },
    getClassFromString: function(e) {
        var t, i, s, n;
        if ("string" == typeof e) {
            for (t = e.split("."), i = window, n = t.length, s = 0; s < n; s++) Sys.isDefined(i) && (i = i[t[s]]);
            return i
        }
        if ("function" == typeof e) return e
    },
    getPlatformSpecificClass: function(e) {
        var t = this,
            i = e;
        return Sys.isObj(i) && (t.isMVCSupported(i) ? i = t.getPlatformView(i) : console.error("ModuleLoader.getPlatformSpecificClass : MVCs for non-supported platform provided")), t.getClassFromString(i)
    },
    isMVCSupported: function(e) {
        var t = ["mobile", "mobileLow", "tablet", "tabletLow", "desktop"],
            i = !0;
        return Sys.iterate(e, function(e, s) {
            t.indexOf(e) < 0 && (i = !1)
        }), i
    },
    getPlatformView: function(e) {
        var t = Environment.getCurrentPlatform();
        return "desktop" !== t || Sys.isDefined(e[t]) || (t = "tablet"), "tablet" !== t || Sys.isDefined(e[t]) || (t = "mobile"), "tabletLow" !== t || Sys.isDefined(e[t]) || (t = "mobileLow"), "mobileLow" !== t || Sys.isDefined(e[t]) || (t = "mobile"), e[t]
    },
    getCommonStateOrder: function() {
        return {
            BeforeLoaderClose: ["stage"],
            Idle: ["playForRealPromo"]
        }
    }
}, Core.ModuleLoader = Sys.extend(Sys.Observable, Core.ModuleLoader, "Core.ModuleLoader");
Sys.ns("Core.Slots"), Core.Slots.ModuleLoader = {
    constructor: function(e) {
        Core.Slots.ModuleLoader.superclass.constructor.apply(this, arguments)
    },
    getCommonStateOrder: function() {
        return {
            SetupGame: ["blurredSymbols"],
            BeforeLoaderClose: ["freeSpinOutro", "spinTypeFreespin", "spinTypeRespin", "countDownFreespins", "freeSpinIntro", "bonusProgramWidget", "freeRounds", "introMovie", "stage"],
            Idle: ["spin", "playForRealPromo", "customMessages"],
            Spinning: ["serverManager"],
            ProcessServerResponse: [],
            BeforeStopping: ["customMessages"],
            Stopping: ["spin"],
            Stopped: ["spinTypeRespin", "spinTypeBasic", "freeRounds", "realityCheck", "autoPlayer", "freeSpinOutro", "spinTypeFreespin", "g4", "freeSpinIntro", "freeSpinIntroMovie", "countDownFreespins", "additionalFreespins", "standardWin", "bigWin", "freeSpinSymbolAttentionAnimation", "stickySymbols", "spreadingWild"],
            FreeSpinIntro: ["freeRounds"],
            spinTypeRespinRestore: ["freeRounds"],
            NoWinPresentation: ["customMessages"]
        }
    }
}, Core.Slots.ModuleLoader = Sys.extend(Core.ModuleLoader, Core.Slots.ModuleLoader, "Core.Slots.ModuleLoader");
Sys.ns("Mixins"), Mixins.animation = {
    controller: {
        methods: {
            initAnimations: function() {
                this.view.initAnimations()
            }
        },
        executeOnInstantiation: {
            setupEvents: function() {
                this.on({
                    "notify:animationManager.allImagesLoaded": this.initAnimations
                })
            }
        }
    },
    view: {
        methods: {
            initAnimations: function() {}
        }
    }
};
Sys.ns("Mixins"), Mixins.orientation = {
    controller: {
        methods: {
            onPortrait: function() {
                this.view.onPortrait()
            },
            onLandscape: function() {
                this.view.onLandscape()
            }
        },
        executeOnInstantiation: {
            setupEvents: function() {
                this.on({
                    "notify:viewport.PORTRAIT": this.onPortrait,
                    "notify:viewport.LANDSCAPE": this.onLandscape
                })
            }
        }
    },
    view: {
        methods: {
            onPortrait: function() {
                this.adaptToOrientation("PORTRAIT"), this.currentOrientation = "PORTRAIT"
            },
            onLandscape: function() {
                this.adaptToOrientation("LANDSCAPE"), this.currentOrientation = "LANDSCAPE"
            },
            adaptToOrientation: function(t) {
                this.setSize(t), this.setPosition(t), this.setStyle(t)
            },
            setSize: function(t) {
                var n, i, e, o, s = this,
                    a = s.container,
                    r = Sys.isDefined(a) ? a.el.style : void 0,
                    T = s[t + "_SIZE"],
                    S = 0,
                    h = 0;
                Sys.isDefined(T) && Sys.isDefined(a) && (n = T.RELATIVE_SCREEN ? Utils.Platform.getViewportInnerSize() : Environment.determineResolution().resolution, i = T.RELATIVE_SCREEN ? 1 / Services.scaling.getScale() : 1, Sys.isDefined(T.HEIGHT) ? (e = Math.round(n.height * T.HEIGHT * i), o = Sys.isDefined(T.WIDTH) ? Math.round(n.width * T.WIDTH * i) : Math.round(e * T.ASPECT_RATIO)) : (o = Math.round(n.width * T.WIDTH * i), e = Math.round(o / T.ASPECT_RATIO)), "bottom" === T.VERTICAL_OFFSET ? S = "-" + e + "px" : "center" === T.VERTICAL_OFFSET && (S = "-" + Math.round(e / 2) + "px"), "right" === T.HORIZONTAL_OFFSET ? h = "-" + o + "px" : "center" === T.HORIZONTAL_OFFSET && (h = "-" + Math.round(o / 2) + "px"), r.width = o + "px", r.height = e + "px", r.backgroundSize = o + "px " + e + "px", r.margin = S + " 0 0 " + h)
            },
            setPosition: function(t) {
                var n, i, e, o, s, a, r, T = this,
                    S = T[t + "_POSITION"];
                Sys.isDefined(S) && Sys.isDefined(T.container) && (n = T.container.el.style, Sys.isDefined(S.BOTTOM) ? (e = "BOTTOM", o = "top", r = "getBottom") : (e = "TOP", o = "bottom", r = "getTop"), Sys.isDefined(S.RIGHT) ? (s = "RIGHT", a = "left") : (s = "LEFT", a = "right"), i = S.BELOW_GAME ? Environment[r + "BelowGame"](S[e]) : S.ABOVE_GAME ? Environment[r + "AboveGame"](S[e]) : Environment[r + "InGame"](S[e]), S["MIN_" + e] && (i = Math.max(S["MIN_" + e], i)), n[e.toLowerCase()] = i + "px", n[o] = "auto", n[s.toLowerCase()] = 100 * S[s] + "%", n[a] = "auto")
            },
            setStyle: function(t) {
                var n = this,
                    i = t + "_CSS",
                    e = "LANDSCAPE" === t ? "PORTRAIT_CSS" : "LANDSCAPE_CSS";
                n.container && n[i] && (n.container.removeCls(n[e]), n.container.addCls(n[i]))
            }
        }
    }
};
Sys.ns("Mixins"), Mixins.userInput = {
    controller: {
        methods: {
            startListeningToUserInput: function() {
                this.on(this.USED_INPUT_HANDLERS), this.isListeningToUserInput = !0
            },
            stopListeningToUserInput: function() {
                var n = this;
                Sys.iterate(n.USED_INPUT_HANDLERS, n.removeListener.bind(n)), n.isListeningToUserInput = !1
            },
            onUserInputStart: function() {},
            onUserInputEnd: function() {},
            onUserInputMove: function() {},
            onUserInputHover: function() {},
            onUserInputCanceled: function() {},
            onUserInputScroll: function() {},
            onUserInputKeyUp: function() {},
            onUserInputKeyDown: function() {},
            isUserInputInSegment: function(n, e) {
                Sys.UserInputUtils.isUserInputInSegment(n, e)
            }
        },
        executeOnInstantiation: {
            init: function(n) {
                var e, t = this,
                    s = Sys.isDefined(n.inputEvents) ? n.inputEvents : ["start", "end", "cancel", "move"],
                    r = {};
                for (e = 0; e < s.length; e++) switch (s[e]) {
                    case "start":
                        r["notify:userInputManager.userInputStarted"] = t.onUserInputStart;
                        break;
                    case "end":
                        r["notify:userInputManager.userInputEnded"] = t.onUserInputEnd;
                        break;
                    case "move":
                        r["notify:userInputManager.userInputMove"] = t.onUserInputMove;
                        break;
                    case "hover":
                        r["notify:userInputManager.userInputHover"] = t.onUserInputHover;
                        break;
                    case "cancel":
                        r["notify:userInputManager.userInputCanceled"] = t.onUserInputCanceled;
                        break;
                    case "scroll":
                        r["notify:userInputManager.userInputScroll"] = t.onUserInputScroll;
                        break;
                    case "keyUp":
                        r["notify:userInputManager.userInputKeyUp"] = t.onUserInputKeyUp;
                        break;
                    case "keyDown":
                        r["notify:userInputManager.userInputKeyDown"] = t.onUserInputKeyDown
                }
                t.USED_INPUT_HANDLERS = r, n.listenToUserInput && t.startListeningToUserInput()
            }
        }
    }
};
Sys.ns("Mixins"), Mixins.serverResponse = {
    controller: {
        methods: {
            onServerResponse: function(e) {
                this.model.processServerResponse(e)
            }
        },
        executeOnInstantiation: {
            setupEvents: function() {
                this.on({
                    "notify:responseParser.responseParsed": this.onServerResponse
                })
            }
        }
    },
    model: {
        methods: {
            processServerResponse: function(e) {}
        }
    }
};
Sys.ns("Mixins"), Mixins.waitSequence = {
    controller: {
        methods: {
            initializeWaitSequence: function(e, i) {
                var t = this;
                t.clearWaitSequence(), t.waiting = !0, Sys.isDefined(e) && (t.fireEvent(e, i), t.checkForCompletion())
            },
            clearWaitSequence: function() {
                var e = this;
                Sys.each(e.eventsToWaitFor, e.removeWaitEventListener.bind(e)), e.eventsToWaitFor.length = 0, e.waiting = !1
            },
            removeWaitEventListener: function(e) {
                Sys.isDefined(this.customListeners[e]) && (this.removeListener(e), delete this.customListeners[e])
            },
            checkForCompletion: function() {
                0 === this.eventsToWaitFor.length && (this.onWaitIsComplete(), this.waiting = !1)
            },
            onWaitRequested: function(e) {
                var i, t = this;
                t.waiting && !t.eventsToWaitFor.contains(e) && (Sys.isDefined(t.events[e]) || Sys.isDefined(t.handlers[e]) || (i = t.onWaitEventReceived.bind(t, e), t.addListener(e, i, t), t.customListeners[e] = i), t.eventsToWaitFor.push(e))
            },
            onWaitEventReceived: function(e) {
                var i = this,
                    t = i.eventsToWaitFor.indexOf(e);
                t >= 0 && (i.eventsToWaitFor.splice(t, 1), i.removeWaitEventListener(e)), i.checkForCompletion()
            },
            onWaitIsComplete: function() {}
        },
        executeOnInstantiation: {
            initialize: function() {
                var e = this;
                e.eventsToWaitFor = [], e.waiting = !1, e.customListeners = {}, Sys.isDefined(e.events) || (e.events = {})
            }
        }
    }
};
Sys.ns("Mixins"), Mixins.properties = {
    model: {
        methods: {
            hasProperty: function(e) {
                var r = this.readData("properties")[e];
                return Sys.isDefined(r) && r.length > 0
            },
            addProperty: function(e, r) {
                var t = this.readData("properties");
                Sys.isDefined(t[e]) ? t[e].contains(r) || t[e].push(r) : t[e] = [r], this.storeData("properties", t)
            },
            removeProperty: function(e, r) {
                var t = this.readData("properties")[e];
                Sys.isDefined(t) && t.contains(r) && t.splice(t.indexOf(r), 1)
            }
        }
    },
    controller: {
        executeOnInstantiation: {
            setupEvents: function(e) {
                var r = this,
                    t = this.model.PROPERTIES || {},
                    o = {
                        "view:addProperty": r.addProperty,
                        "view:removeProperty": r.removeProperty
                    };
                r.model.storeData("properties", t), o["request:" + r.MODULE_NAME + ".addProperty"] = r.addProperty, o["request:" + r.MODULE_NAME + ".removeProperty"] = r.removeProperty, r.on(o), Sys.isDefined(e) && !0 === e.updateOnStartup && r.updateAppearance()
            }
        },
        methods: {
            addProperty: function(e, r) {
                var t = !this.model.hasProperty(e);
                this.model.addProperty(e, r), t && this.updateAppearance()
            },
            updateAppearance: function() {},
            removeProperty: function(e, r) {
                var t = this;
                t.model.hasProperty(e) && (t.model.removeProperty(e, r), t.model.hasProperty(e) || t.updateAppearance())
            }
        }
    }
};
Sys.ns("Mixins"), Mixins.trigger = {
    controller: {
        methods: {
            registerTriggers: function(e) {
                throw new Error("Abstract method! Must be implemented!")
            },
            onTriggerReady: function() {
                this.registerTriggers(Services.trigger)
            }
        },
        executeOnInstantiation: {
            setupEvents: function() {
                this.on({
                    "notify:trigger.ready": this.onTriggerReady
                })
            }
        }
    }
};
Sys.ns("NetEntExtend.API"), NetEntExtend.API.BaseGetter = {
    platforms: ["desktop", "mobile"],
    isAvailable: function() {
        return !0
    },
    validateNumArguments: function() {
        return 3 === arguments.length
    },
    validateArguments: function() {
        return !0
    },
    func: function() {}
};
Sys.ns("NetEntExtend.API"), NetEntExtend.API.BaseSetter = {
    platforms: ["desktop", "mobile"],
    isAvailable: function(t) {
        return this.model.readData("inIdleState") && Services.settingsManager.isSettable(t)
    },
    validateNumArguments: function() {
        return 4 === arguments.length
    },
    validateArguments: function() {
        return !0
    },
    func: function() {}
};
Sys.ns("NetEntExtend.API"), NetEntExtend.API.BaseCall = {
    platforms: ["desktop", "mobile"],
    isAvailable: function() {
        return this.model.readData("inIdleState") && !Services.storage.readData("dialog.showing")
    },
    validateNumArguments: function() {
        return 3 === arguments.length
    },
    validateArguments: function() {
        return !0
    },
    func: function() {}
};
Sys.ns("NetEntExtend.API"), NetEntExtend.API.Getters = {
    balanceInCurrency: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                t = Services.moneyManager,
                a = t.getBalanceCents(),
                r = t.formatMoneyCurrencySign(a),
                s = Array.prototype.slice.call(arguments),
                n = e.addParamsToArgument(s, r);
            e.success.apply(e, n)
        }
    }, NetEntExtend.API.BaseGetter),
    balanceInCents: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                t = Services.moneyManager.getBalanceCents(),
                a = Array.prototype.slice.call(arguments),
                r = e.addParamsToArgument(a, t);
            e.success.apply(e, r)
        }
    }, NetEntExtend.API.BaseGetter),
    betInCurrency: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                t = Services.moneyManager,
                a = t.getBetCents(),
                r = t.formatMoneyCurrencySign(a),
                s = Array.prototype.slice.call(arguments),
                n = e.addParamsToArgument(s, r);
            e.success.apply(e, n)
        }
    }, NetEntExtend.API.BaseGetter),
    betInCents: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                t = Services.moneyManager.getBetCents(),
                a = Array.prototype.slice.call(arguments),
                r = e.addParamsToArgument(a, t);
            e.success.apply(e, r)
        }
    }, NetEntExtend.API.BaseGetter),
    winInCurrency: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                t = Services.storage.readData("cashField.winInCents"),
                a = Services.moneyManager.formatMoneyCurrencySign(t),
                r = Array.prototype.slice.call(arguments),
                s = e.addParamsToArgument(r, a);
            e.success.apply(e, s)
        }
    }, NetEntExtend.API.BaseGetter),
    winInCents: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                t = Services.storage.readData("cashField.winInCents"),
                a = Array.prototype.slice.call(arguments),
                r = e.addParamsToArgument(a, t);
            e.success.apply(e, r)
        }
    }, NetEntExtend.API.BaseGetter),
    audio: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                t = Services.settingsManager.getSetting("volume") > 0,
                a = Array.prototype.slice.call(arguments),
                r = e.addParamsToArgument(a, t);
            e.success.apply(e, r)
        }
    }, NetEntExtend.API.BaseGetter),
    currentPlayMode: Sys.applyPropertiesIf({
        func: function() {
            var e = Services.storage.readData("playModeManager.modes"),
                t = Array.prototype.slice.call(arguments),
                a = this.addParamsToArgument(t, e);
            this.success.apply(this, a)
        }
    }, NetEntExtend.API.BaseGetter),
    autoplayNumberOfRoundsAvailable: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                t = e.autoplayNumberOfRoundsAvailable(),
                a = Array.prototype.slice.call(arguments),
                r = e.addParamsToArgument(a, t);
            e.success.apply(e, r)
        }
    }, NetEntExtend.API.BaseGetter),
    autoplayCurrentRoundsLeft: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                t = Services.storage.readData("autoPlayer.roundsLeft"),
                a = Sys.isDefined(t) && t > 0 ? t : null,
                r = Array.prototype.slice.call(arguments),
                s = e.addParamsToArgument(r, a);
            e.success.apply(e, s)
        }
    }, NetEntExtend.API.BaseGetter),
    paytableCount: Sys.applyPropertiesIf({
        func: function() {
            var e = Services.storage.readData("paytable.numberOfPages"),
                t = Array.prototype.slice.call(arguments),
                a = this.addParamsToArgument(t, e);
            this.success.apply(this, a)
        }
    }, NetEntExtend.API.BaseGetter),
    paytablePage: Sys.applyPropertiesIf({
        func: function() {
            var e = null,
                t = Array.prototype.slice.call(arguments);
            Services.storage.readData("paytable.showing") && (e = Services.storage.readData("paytable.currentPage")), this.success.apply(this, this.addParamsToArgument(t, e))
        }
    }, NetEntExtend.API.BaseGetter),
    volumeLevel: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                t = Sys.utils.toInt(100 * Services.settingsManager.getSetting("volume")),
                a = Array.prototype.slice.call(arguments),
                r = e.addParamsToArgument(a, t);
            e.success.apply(e, r)
        }
    }, NetEntExtend.API.BaseGetter),
    debugMode: Sys.applyPropertiesIf({
        func: function() {
            var e, t = this,
                a = Array.prototype.slice.call(arguments);
            e = t.addParamsToArgument(a, !1), t.success.apply(t, e)
        }
    }, NetEntExtend.API.BaseGetter)
};
Sys.ns("NetEntExtend.API"), NetEntExtend.API.Setters = {
    volumeLevel: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            return !0
        },
        validateArguments: function() {
            return Sys.isNumber(arguments[3]) && 0 <= arguments[3] && arguments[3] <= 100
        },
        func: function() {
            var t = this,
                e = arguments[3] / 100,
                n = Array.prototype.slice.call(arguments);
            t.updateSetting("volume", e, n)
        }
    }, NetEntExtend.API.BaseSetter),
    audio: Sys.applyPropertiesIf({
        isAvailable: function() {
            return !0
        },
        validateArguments: function() {
            return "boolean" == typeof arguments[3]
        },
        func: function() {
            var t = this,
                e = arguments[3] ? 1 : 0,
                n = Array.prototype.slice.call(arguments);
            t.updateSetting("volume", e, n)
        }
    }, NetEntExtend.API.BaseSetter),
    inGameMessage: Sys.applyPropertiesIf({
        platforms: ["mobile"],
        isAvailable: function() {
            return !0
        },
        validateArguments: function() {
            var t, e = arguments[3];
            return !!(Sys.isArray(e) && e.length > 0) && (t = Sys.find(e, function(t) {
                if (Sys.isObj(t) && "string" == typeof t.text) {
                    if (Sys.isDefined(t.type)) {
                        if ("link" !== t.type && "text" !== t.type) return !0;
                        if ("link" === t.type && Sys.isDefined(t.url) && "string" != typeof t.url) return !0
                    }
                    return !1
                }
                return !0
            }), !Sys.isDefined(t))
        },
        func: function() {
            var t, e = this,
                n = arguments[3],
                i = [],
                r = "",
                s = 0,
                l = Array.prototype.slice.call(arguments);
            n.forEach(function(e) {
                s++, r += e.text, r.length > 60 && (e.text = e.text.substring(0, e.text.length - r.length + 60)), e.text.length > 0 && (Sys.isDefined(e.type) && "link" === e.type ? (t = new Interface.utils.Button({
                    id: "ticker_lnk_" + s,
                    label: e.text,
                    clickCallback: function() {
                        Sys.utils.openURL(e.url)
                    }
                }), t.enable(), window.linkContainer = t.getContainer(), window.linkContainer.addCSSClass("netEntExtend_button"), i.push(window.linkContainer)) : i.push(new Sys.Element({
                    tag: "span",
                    textContent: e.text
                })))
            }), e.fireEvent("request:ticker.enable", "netEntExtend"), e.fireEvent("request:ticker.setText", i), e.success.apply(e, l)
        }
    }, NetEntExtend.API.BaseSetter)
};
Sys.ns("NetEntExtend.API"), NetEntExtend.API.Calls = {
    stopAutoplay: Sys.applyPropertiesIf({
        platforms: ["desktop", "mobile"],
        isAvailable: function() {
            var e = Services.storage.readData("dialog.showing"),
                t = Services.storage.readData("autoPlayer.roundsLeft");
            return !e && t > 0
        },
        func: function() {
            var e = this,
                t = Array.prototype.slice.call(arguments);
            e.fireEvent("request:autoPlayer.stop"), e.success.apply(e, t)
        }
    }, NetEntExtend.API.BaseCall),
    pauseAutoplay: Sys.applyPropertiesIf({
        platforms: ["desktop", "mobile"],
        isAvailable: function() {
            var e = Services.storage.readData("dialog.showing"),
                t = Services.storage.readData("autoPlayer.roundsLeft");
            return !e && t > 0
        },
        func: function() {
            this.fireEvent("request:autoPlayer.pause"), this.success.apply(this, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    resumeAutoplay: Sys.applyPropertiesIf({
        platforms: ["desktop", "mobile"],
        isAvailable: function() {
            var e = Services.storage.readData("dialog.showing"),
                t = Services.storage.readData("autoPlayer.roundsLeft");
            return !e && t > 0
        },
        func: function() {
            this.fireEvent("request:autoPlayer.resume"), this.success.apply(this, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    reloadBalance: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                t = Array.prototype.slice.call(arguments);
            e.fireEvent("request:serverManager.sendAction", "reloadbalance", "notify:responseParser.reloadBalanceResponseParsed", "notify:serverManager.reloadBalanceFailed"), e.model.storeData("reloadBalanceArguments", t), e.model.storeData("reloadBalanceSpin", !1)
        }
    }, NetEntExtend.API.BaseCall),
    createDialogbox: Sys.applyPropertiesIf({
        platforms: ["mobile"],
        isAvailable: function() {
            var e = !1,
                t = arguments[6],
                a = Resources.readData("pluginMenuOpen") || Services.storage.readData("dialog.showing");
            return Object.keys(t).forEach(function(a) {
                "showplugin" === (void 0 !== t[a].action ? t[a].action.toLowerCase() : "") && (e = !0)
            }), !e || !a
        },
        validateNumArguments: function() {
            return 7 === arguments.length
        },
        validateArguments: function() {
            var e = arguments[3],
                t = arguments[4],
                a = arguments[5],
                n = arguments[6],
                s = !1,
                i = ["gotolobby", "reload", "showplugin", ""];
            return Object.keys(n).forEach(function(e) {
                var t = void 0 !== n[e].action ? n[e].action.toLowerCase() : ""; - 1 !== i.indexOf(t) && (s = !0)
            }), s && Sys.isString(e) && Sys.isString(t) && Sys.isString(a) && Sys.isArray(n) && n.length > 0 && n.length <= 2 && void 0 === Sys.find(n, function(e) {
                return !("string" == typeof e.buttonid && "string" == typeof e.buttontext)
            })
        },
        func: function() {
            var e = this,
                t = arguments[3],
                a = arguments[4].substring(0, 20),
                n = arguments[5],
                s = arguments[6],
                i = {
                    id: "netEntExtend_" + t,
                    title: a,
                    text: n,
                    buttons: [],
                    stopAutoplay: !0
                },
                r = Array.prototype.slice.call(arguments);
            Object.keys(s).forEach(function(a) {
                "showplugin" === (void 0 !== s[a].action ? s[a].action.toLowerCase() : "") && e.fireEvent("request:customMessages.removeDialog", "netEntExtend_" + t)
            }), Sys.each(s, function(a) {
                var n = {};
                n.action = function() {
                    var t = Sys.isDefined(this.buttontype) ? this.buttontype.toLowerCase() : "";
                    switch (e.fireEvent("notify:dialogBoxClosed", this.dialogid, this.buttonid, {
                        name: this.dialogid,
                        button: this.buttonid
                    }), t) {
                        case "gotolobby":
                            e.fireEvent("request:disableBasicGamePanel", "prevent_panel_work_before_go_to_lobby"), Sys.utils.goToLobby(this.reason);
                            break;
                        case "reload":
                            Sys.utils.reload();
                            break;
                        case "showplugin":
                            e.fireEvent("request:pluginMenu.activate")
                    }
                }, n.scope = {
                    dialogid: t,
                    buttonid: a.buttonid,
                    buttontype: a.action,
                    reason: a.reason
                }, n.text = a.buttontext, n.buttonid = a.buttonid, i.buttons.push(n)
            }), e.fireEvent("request:customMessages.showDialog", i), e.success.apply(e, r)
        }
    }, NetEntExtend.API.BaseCall),
    removeDialogbox: Sys.applyPropertiesIf({
        platforms: ["mobile"],
        isAvailable: function() {
            return !0
        },
        validateNumArguments: function() {
            return 4 === arguments.length
        },
        validateArguments: function() {
            return "string" == typeof arguments[3]
        },
        func: function() {
            var e = this,
                t = Array.prototype.slice.call(arguments);
            e.fireEvent("request:customMessages.removeDialog", "netEntExtend_" + arguments[3]), e.success.apply(e, t)
        }
    }, NetEntExtend.API.BaseCall),
    pluginError: Sys.applyPropertiesIf({
        platforms: ["mobile"],
        isAvailable: function() {
            return !0
        },
        func: function() {
            var e = Array.prototype.slice.call(arguments);
            this.fireEvent("request:errorManager.handleError"), this.success.apply(this, e)
        }
    }, NetEntExtend.API.BaseCall),
    deactivatePluginMenu: Sys.applyPropertiesIf({
        platforms: ["mobile"],
        isAvailable: function() {
            return !0
        },
        func: function() {
            var e = Array.prototype.slice.call(arguments);
            this.fireEvent("request:pluginMenu.deactivate"), this.success.apply(this, e)
        }
    }, NetEntExtend.API.BaseCall),
    activatePluginMenu: Sys.applyPropertiesIf({
        platforms: ["mobile"],
        isAvailable: function() {
            var e = !0 === this.model.readData("inIdleState"),
                t = !0 !== Resources.readData("pluginMenuOpen"),
                a = !0 !== Resources.readData("overlayVisible");
            return e && t && a
        },
        func: function() {
            var e = Array.prototype.slice.call(arguments);
            this.fireEvent("request:pluginMenu.activate"), this.success.apply(this, e)
        }
    }, NetEntExtend.API.BaseCall),
    pluginNotification: Sys.applyPropertiesIf({
        platforms: ["mobile"],
        isAvailable: function() {
            return !0
        },
        validateNumArguments: function() {
            return 4 === arguments.length
        },
        validateArguments: function() {
            return "string" == typeof arguments[3]
        },
        func: function() {
            var e = Array.prototype.slice.call(arguments);
            this.fireEvent("request:pluginMenu.notification", arguments[3]), this.success.apply(this, e)
        }
    }, NetEntExtend.API.BaseCall),
    pluginChangeMenuHeight: Sys.applyPropertiesIf({
        platforms: ["mobile"],
        isAvailable: function() {
            return !0
        },
        validateNumArguments: function() {
            return 4 === arguments.length
        },
        validateArguments: function() {
            return Sys.isNumber(arguments[3]) || Sys.isObj(arguments[3])
        },
        func: function() {
            var e = Array.prototype.slice.call(arguments);
            this.fireEvent("request:pluginMenu.changeMenuHeight", arguments[3]), this.success.apply(this, e)
        }
    }, NetEntExtend.API.BaseCall),
    showSystemClock: Sys.applyPropertiesIf({
        platforms: ["desktop", "mobile"],
        isAvailable: function() {
            return !0
        },
        func: function() {
            var e = Array.prototype.slice.call(arguments);
            this.fireEvent("request:systemClock.show"), this.success.apply(this, e)
        }
    }, NetEntExtend.API.BaseCall),
    addButton: Sys.applyPropertiesIf({
        platforms: ["desktop", "mobile"],
        isAvailable: function() {
            return !0
        },
        validateNumArguments: function() {
            return 4 === arguments.length
        },
        validateArguments: function() {
            return Sys.isObj(arguments[3])
        },
        func: function() {
            var e, t, a, n, s, i = this,
                r = Array.prototype.slice.call(arguments),
                o = r[3];
            o.image ? (e = document.createElement("img"), e.src = o.image, e.alt = o.text) : (e = document.createElement("input"), e.type = "button", e.value = o.text), e.name = o.name, e.id = o.id, e.className = "injected-btn", a = document.createElement("style"), a.type = "text/css", s = function(e) {
                return ".mobile_landscape #" + e.id + " { z-index: 1000;position: fixed;background: " + e.landscape.color + ";top:" + e.landscape.top + ";left:" + e.landscape.left + ";width:" + e.landscape.width + ";height:" + e.landscape.height + ";" + e.landscape.style + ";}.mobile_portrait #" + e.id + " { z-index: 1000;position: fixed;background: " + e.portrait.color + ";top:" + e.portrait.top + ";left:" + e.portrait.left + ";width:" + e.portrait.width + ";height:" + e.portrait.height + ";" + e.portrait.style + ";}.tablet_landscape #" + e.id + " { z-index: 1000;position: fixed;background: " + e.tablet.color + ";top:" + e.tablet.top + ";left:" + e.tablet.left + ";width:" + e.tablet.width + ";height:" + e.tablet.height + ";" + e.tablet.style + ";}"
            }, n = s(o), a.styleSheet ? a.styleSheet.cssText = n : a.appendChild(document.createTextNode(n)), document.getElementsByTagName("head")[0].appendChild(a), t = function(e, t) {
                t.target && "injected-btn" === t.target.className && i.fireEvent("request:postman.sendMessage", ["event", t.target.id + "_click", t.target.id])
            }, i.on({
                "notify:userInputManager.userInputEnded": t
            }), document.body.appendChild(e), i.success.apply(this, r)
        }
    }, NetEntExtend.API.BaseCall)
};
Sys.ns("NetEntExtend.API"), Sys.apply(NetEntExtend.API.Getters, {
    balanceInCoins: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                a = Services.moneyManager,
                t = a.getBalanceCoins(),
                s = e.addParamsToArgument(arguments, t);
            e.success.apply(e, s)
        }
    }, NetEntExtend.API.BaseGetter),
    betInCoins: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                a = Services.moneyManager,
                t = a.getBetCoins(),
                s = e.addParamsToArgument(arguments, t);
            e.success.apply(e, s)
        }
    }, NetEntExtend.API.BaseGetter),
    availableCoins: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                a = Resources.readData("gameServerInitResponse"),
                t = a["denomination.all"],
                s = e.addParamsToArgument(arguments, t);
            e.success.apply(e, s)
        }
    }, NetEntExtend.API.BaseGetter),
    selectedCoinValue: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                a = Services.moneyManager,
                t = a.model.readData("denomination"),
                s = e.addParamsToArgument(arguments, t);
            e.success.apply(e, s)
        }
    }, NetEntExtend.API.BaseGetter),
    winInCoins: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                a = Services.storage.readData("cashField.winInCents"),
                t = Services.moneyManager.model.readData("denomination"),
                s = Math.floor(a / t),
                n = e.addParamsToArgument(arguments, s);
            e.success.apply(e, n)
        }
    }, NetEntExtend.API.BaseGetter),
    freeRoundsLeft: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                a = Services.storage.readData("freeRounds.roundsLeft"),
                t = Sys.isDefined(a) && a > 0 ? a : null,
                s = e.addParamsToArgument(arguments, t);
            e.success.apply(e, s)
        }
    }, NetEntExtend.API.BaseGetter),
    freeSpinsLeft: Sys.applyPropertiesIf({
        func: function() {
            var e = this,
                a = Services.storage.readData("freespin.freespinsLeft"),
                t = Sys.isDefined(a) && a >= 0 && ["FREESPIN", "SUPERSPIN"].contains(e.model.readData("gameMode")) ? a : null;
            e.success.apply(e, e.addParamsToArgument(arguments, t))
        }
    }, NetEntExtend.API.BaseGetter)
});
Sys.ns("NetEntExtend.API"), Sys.apply(NetEntExtend.API.Setters, {});
Sys.ns("NetEntExtend.API"), Sys.apply(NetEntExtend.API.Calls, {});
Sys.ns("NetEntExtend.API.Restricted"), NetEntExtend.API.Restricted.Getters = Sys.apply(Sys.clone(NetEntExtend.API.Getters), {});
Sys.ns("NetEntExtend.API.Restricted"), NetEntExtend.API.Restricted.Setters = Sys.apply(Sys.clone(NetEntExtend.API.Setters), {});
Sys.ns("NetEntExtend.API.Restricted"), NetEntExtend.API.Restricted.Calls = Sys.apply(Sys.clone(NetEntExtend.API.Calls), {
    startAutoplay: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        validateNumArguments: function() {
            return 4 === arguments.length
        },
        validateArguments: function() {
            var e = this,
                t = e.autoplayNumberOfRoundsAvailable(),
                a = null === t ? [] : t.split(","),
                s = arguments[3];
            return "string" == typeof s && a.contains(s)
        },
        func: function() {
            var e = this,
                t = arguments[3];
            Services.settingsManager.storeSetting("autoPlayNrSpins", Number(t), !1), e.fireEvent("request:autoPlayer.start"), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    showAutoplay: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            var e = Services.storage.readData("autoplaySettings.showing"),
                t = Services.storage.readData("spinSettings.showing"),
                a = Services.storage.readData("dialog.showing"),
                s = Services.storage.readData("IntroMovie.showing"),
                r = this.model.readData("featureSplash.showing");
            return !(e || t || a || s || r)
        },
        func: function() {
            var e = this;
            e.fireEvent("request:autoplaySettings.show"), e.fireEvent("request:spinSettings.show"), Services.storage.readData("autoplaySettings.showing") || Services.storage.readData("spinSettings.showing") ? e.success.apply(e, arguments) : e.error(arguments, e.model.ERROR_CODES.UNKNOWN_ERROR)
        }
    }, NetEntExtend.API.BaseCall),
    hideAutoplay: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            return !Services.storage.readData("dialog.showing") && (Services.storage.readData("autoplaySettings.showing") || Services.storage.readData("spinSettings.showing"))
        },
        func: function() {
            var e = this;
            e.fireEvent("request:autoplaySettings.hide"), e.fireEvent("request:spinSettings.hide"), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    showPaytable: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            return !Services.storage.readData("dialog.showing")
        },
        validateNumArguments: function() {
            return 4 === arguments.length
        },
        validateArguments: function() {
            var e = arguments[3],
                t = Services.storage.readData("paytable.numberOfPages");
            return Sys.isNumber(e) && 1 <= e && e <= t
        },
        func: function() {
            var e = this,
                t = arguments[3];
            e.fireEvent("request:paytable.show", t), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    hidePaytable: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            return !Services.storage.readData("dialog.showing") && Services.storage.readData("paytable.showing")
        },
        func: function() {
            var e = this;
            e.fireEvent("request:paytable.hide"), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    paytableForward: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            return !Services.storage.readData("dialog.showing") && Services.storage.readData("paytable.showing")
        },
        func: function() {
            var e = this;
            e.fireEvent("request:paytable.forward"), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    paytableBackward: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            return !Services.storage.readData("dialog.showing") && Services.storage.readData("paytable.showing")
        },
        func: function() {
            var e = this;
            e.fireEvent("request:paytable.backward"), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    closeSplash: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            var e = this;
            return !Services.storage.readData("dialog.showing") && e.model.readData("featureSplash.showing")
        },
        func: function() {
            var e = this;
            e.fireEvent("request:featureSplash.close"), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    startFreespins: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            return !Services.storage.readData("dialog.showing") && Services.storage.readData("freeSpins.canStart")
        },
        func: function() {
            var e = this;
            e.fireEvent("request:freeSpins.start"), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    openHelp: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            var e = this;
            return !Services.storage.readData("dialog.showing") && e.model.readData("inIdleState") && !Services.storage.readData("gameRules.showing")
        },
        func: function() {
            var e = this;
            e.fireEvent("request:gameRules.show"), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    skipIntro: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            return !Services.storage.readData("dialog.showing") && Services.storage.readData("IntroMovie.showing")
        },
        func: function() {
            var e = this;
            e.fireEvent("request:introMovie.close"), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall)
});
Sys.ns("NetEntExtend.API"), Sys.apply(NetEntExtend.API.Restricted.Setters, {
    betLevel: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            return NetEntExtend.API.BaseSetter.isAvailable.call(this, "betLevel")
        },
        validateArguments: function() {
            var e = arguments[3],
                t = Resources.readData("gameServerInitResponse"),
                n = t["betlevel.all"].split(",");
            return Sys.isNumber(e) && n.contains(String(e))
        },
        func: function() {
            this.updateSetting("betLevel", arguments[3], arguments)
        }
    }, NetEntExtend.API.BaseSetter),
    coinValue: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            return NetEntExtend.API.BaseSetter.isAvailable.call(this, "denomination")
        },
        validateArguments: function() {
            var e = arguments[3],
                t = Resources.readData("gameServerInitResponse"),
                n = t["denomination.all"].split(",");
            return Sys.isNumber(e) && n.contains(String(e))
        },
        func: function() {
            this.updateSetting("denomination", arguments[3], arguments)
        }
    }, NetEntExtend.API.BaseSetter)
});
Sys.ns("NetEntExtend.API"), Sys.apply(NetEntExtend.API.Restricted.Calls, {
    startSpin: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            return NetEntExtend.API.BaseCall.isAvailable.call(this) && Services.moneyManager.canPlaceAnotherBet()
        },
        func: function() {
            var e = this;
            e.fireEvent("request:spin.startNewRound"), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    startQuickSpin: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        isAvailable: function() {
            return NetEntExtend.API.BaseCall.isAvailable.call(this) && Services.settingsManager.isSettable("quickSpin") && Services.moneyManager.canPlaceAnotherBet()
        },
        func: function() {
            var e = this,
                t = Services.settingsManager.getSetting("quickSpin");
            e.fireEvent("request:settingsManager.storeData", "quickSpin", !0), e.fireEvent("request:spin.startNewRound"), e.onEnteringIdleState.push(function() {
                e.fireEvent("request:settingsManager.storeData", "quickSpin", t)
            }), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    maxBetSpin: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        func: function() {
            var e = this,
                t = Resources.readData("gameServerInitResponseObject").betlevel.all,
                s = Math.max.apply(null, t);
            e.fireEvent("request:settingsManager.storeData", "betLevel", s), e.startRound(), e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall),
    featurePreview: Sys.applyPropertiesIf({
        platforms: ["desktop"],
        func: function() {
            var e = this;
            e.success.apply(e, arguments)
        }
    }, NetEntExtend.API.BaseCall)
});
Sys.ns("Core.NetEntExtend"), Core.NetEntExtend = {
    constructor: function() {
        Core.NetEntExtend.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.NetEntExtendModel,
            controller: Core.NetEntExtendController
        }
    }
}, Core.NetEntExtend = Sys.extend(Core.Module, Core.NetEntExtend, "Core.NetEntExtend");
Sys.ns("Core"), Core.NetEntExtendController = {
    USE_LOGGING: !1,
    ROUND_START_EVENT: "request:spin.startNewRound",
    constructor: function() {
        Core.NetEntExtendController.superclass.constructor.apply(this, arguments)
    },
    init: function() {
        var e = this;
        Core.NetEntExtendController.superclass.init.apply(e, arguments), e.onEnteringIdleState = [], e.setupAPI()
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "notify:stateHandler.enteringIdleState": e.enteringIdleState,
            "notify:stateHandler.leavingIdleState": e.leavingIdleState,
            "notify:netEntExtendEvents.eventTriggered": e.sendMessage,
            "notify:responseParser.reloadBalanceResponseParsed": e.onReloadBalanceResponse,
            "notify:serverManager.reloadBalanceFailed": e.onReloadBalanceFailed,
            "notify:featureSplash.showing": e.onFeatureSplashShowing,
            "notify:featureSplash.closed": e.onFeatureSplashClosed,
            "notify:gameModeChanged": e.onGameModeChanged,
            "request:NetEntExtend.newMessage": e.handleIncomingMessage
        })
    },
    setupAPI: function() {
        var e = this,
            t = e.model.readData("useRestricted"),
            n = !0 === t ? NetEntExtend.API.Restricted : NetEntExtend.API;
        e.API = {
            get: n.Getters,
            set: n.Setters,
            call: n.Calls
        }
    },
    enteringIdleState: function() {
        var e = this;
        e.onEnteringIdleState.forEach(function(t) {
            t.apply(e, arguments)
        }), e.onEnteringIdleState = [], e.model.storeData("inIdleState", !0)
    },
    leavingIdleState: function() {
        var e = this;
        e.model.storeData("inIdleState", !1), e.model.storeData("reloadBalanceSpin", !0)
    },
    handleIncomingMessage: function() {
        var e, t = this,
            n = arguments[0],
            a = arguments[1],
            s = arguments[2];
        if (arguments.length < 3 || "string" != typeof n || !Sys.isNumber(a) || "string" != typeof s) t.error(arguments, t.model.ERROR_CODES.WRONG_NUMBER_OF_ARGUMENTS);
        else if (Sys.isDefined(t.API[n]) && Sys.isDefined(t.API[n][s]))
            if (e = t.API[n][s], Platform.isDesktopDevice && -1 === e.platforms.indexOf("desktop") || (Platform.isMobileDevice || Platform.isTabletDevice) && -1 === e.platforms.indexOf("mobile")) t.error(arguments, t.model.ERROR_CODES.FUNCTIONALITY_NOT_AVAILABLE);
            else if (e.isAvailable.apply(t, arguments))
            if (e.validateNumArguments.apply(t, arguments))
                if (e.validateArguments.apply(t, arguments)) try {
                    e.func.apply(t, arguments)
                } catch (e) {
                    t.error(arguments, t.model.ERROR_CODES.UNKNOWN_ERROR)
                } else t.error(arguments, t.model.ERROR_CODES.ILLEGAL_ARGUMENT);
                else t.error(arguments, t.model.ERROR_CODES.WRONG_NUMBER_OF_ARGUMENTS);
        else t.error(arguments, t.model.ERROR_CODES.NOT_AVAILABLE_IN_CURRENT_STATE);
        else t.error(arguments, t.model.ERROR_CODES.FUNCTIONALITY_NOT_AVAILABLE)
    },
    success: function() {
        var e = this,
            t = e.getResponseArguments.apply(e, arguments);
        e.sendMessage(["success", t.callId].concat(t.rest))
    },
    error: function(e, t, n) {
        var a = this,
            s = a.getResponseArguments.apply(a, e);
        a.sendMessage(["error", s.callId, t, n])
    },
    sendMessage: function(e) {
        this.fireEvent("request:postman.sendMessage", e)
    },
    getResponseArguments: function() {
        var e = Array.prototype.slice.call(arguments);
        return {
            callId: e[1],
            rest: e.splice(3)
        }
    },
    addParamsToArgument: function(e, t) {
        var n = Array.prototype.slice.call(e);
        return Sys.isArray(t) ? t.forEach(function(e) {
            n.push(e)
        }) : n.push(t), n
    },
    updateSetting: function(e, t, n) {
        var a = this,
            s = Services.settingsManager,
            r = this.model.ERROR_CODES;
        s.storeSetting(e, t, !1), s.getSetting(e) === t ? a.success.apply(a, n) : a.error(n, r.UNKNOWN_ERROR)
    },
    autoplayNumberOfRoundsAvailable: function() {
        var e = Services.storage.readData("spinSettings.autoplayRoundsAvailable");
        return Sys.isDefined(e) ? e.toString() : null
    },
    onReloadBalanceResponse: function(e) {
        var t = this,
            n = t.model.readData("reloadBalanceArguments"),
            a = t.model.readData("reloadBalanceSpin"),
            s = e.credit;
        a ? t.success.apply(t, t.addParamsToArgument(n, "busy")) : Sys.isNumber(s) && (Services.moneyManager.setBalance(s), t.success.apply(t, t.addParamsToArgument(n, s)))
    },
    onReloadBalanceFailed: function() {
        var e = this,
            t = e.model.readData("reloadBalanceArguments");
        e.error(t, e.model.UNKNOWN_ERROR)
    },
    onFeatureSplashShowing: function() {
        this.model.storeData("featureSplash.showing", !0)
    },
    onFeatureSplashClosed: function() {
        this.model.storeData("featureSplash.showing", !1)
    },
    startRound: function() {
        var e = this;
        e.fireEvent(e.ROUND_START_EVENT)
    },
    onGameModeChanged: function(e) {
        this.model.storeData("gameMode", e)
    }
}, Core.NetEntExtendController = Sys.extend(Core.Controller, Core.NetEntExtendController, "Core.NetEntExtendController");
Sys.ns("Core"), Core.NetEntExtendModel = {
    ERROR_CODES: {
        UNKNOWN_ERROR: 0,
        ILLEGAL_ARGUMENT: 1,
        EVENTS_NOT_AVAILABLE_IN_GAME: 7,
        CALLBACK_NOT_PROVIDED: 8,
        FUNCTIONALITY_NOT_AVAILABLE: 9,
        WRONG_NUMBER_OF_ARGUMENTS: 10,
        NO_RESPONSE_FROM_GAME: 11,
        NOT_AVAILABLE_IN_CURRENT_STATE: 12,
        HTML_GAME_LAUNCH_FAILED: 18
    },
    constructor: function() {
        Core.NetEntExtendModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = this,
            t = Resources.readData("gameServerInitResponse"),
            E = !!Sys.isDefined(t) && t["gameEventSetters.enabled"],
            s = !1;
        Sys.isDefined(E) && !0 === E && (s = !0), e.storeData("useRestricted", s), e.storeData("locked", !0), e.storeData("inIdleState", !1), e.storeData("featureSplash.showing", !1)
    }
}, Core.NetEntExtendModel = Sys.extend(Core.Model, Core.NetEntExtendModel, "Core.NetEntExtendModel");
Sys.ns("Core.NetEntExtendEvents"), Core.NetEntExtendEvents = {
    constructor: function() {
        Core.NetEntExtendEvents.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.NetEntExtendEventsModel,
            controller: Core.NetEntExtendEventsController
        }
    }
}, Core.NetEntExtendEvents = Sys.extend(Core.Module, Core.NetEntExtendEvents, "Core.NetEntExtendEvents");
Sys.ns("Core"), Core.NetEntExtendEventsController = {
    USE_LOGGING: !1,
    constructor: function() {
        Core.NetEntExtendEventsController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this,
            n = {
                "notify:autoPlayer.starting": e.onAutoplayStarting,
                "notify:autoPlayer.startRound": e.onAutoplayStartRound,
                "notify:settingsManager.settingChanged": e.onSettingsChanged,
                "notify:spin.spinAnimationStarted": e.onSpinStart,
                "notify:spin.spinAnimationComplete": e.onSpinEnded,
                "notify:stateHandler.enteringStandardWinPresentationState": e.onWinPresentationStarted,
                "notify:responseParser.responseParsed": e.onServerResponseParsed,
                "notify:standardWin.presentationComplete": e.onWinPresentationComplete,
                "notify:paytable.shown": e.sendEvent.bind(e, "paytableToggle", !0),
                "notify:paytable.hidden": e.sendEvent.bind(e, "paytableToggle", !1),
                "notify:bonusGameIntro.bonusGameStarted": e.onBonusGameStarted,
                "notify:bonusGameOutro.bonusGameEnded": e.onBonusGameEnded,
                "notify:gameModeChanged": e.onGameModeChanged,
                "notify:stateHandler.enteringIdleState": e.onEnteringIdleState,
                "notify:stateHandler.leavingIdleState": e.onLeavingIdleState,
                "notify:cashField.update": e.onCashFieldUpdate,
                "notify:freeRounds.started": e.onFreeRoundsStarted,
                "notify:freeRounds.ended": e.onFreeRoundsEnded,
                "notify:freeRounds.nextRound": e.onFreeRoundsNextRound,
                "notify:pluginMenu.activated": e.onPluginMenuActivated,
                "notify:pluginMenu.deactivated": e.onPluginMenuDeactivated,
                "notify:viewport.PORTRAIT": e.onPortrait,
                "notify:viewport.LANDSCAPE": e.onLandscape,
                "notify:loader.closed": e.onLoaderClosed,
                "notify:customMessages.fatalMessageShowing": e.onFatalCustomMessage,
                "notify:action.goToLobby": e.onGoToLobby,
                "notify:dialogBoxClosed": e.onDialogBoxClosed
            };
        Sys.iterate(e.model.EVENT_MAP, function(t, o) {
            n[t] = e.sendEvent.bind(e, o)
        }), e.on(n)
    },
    onLoaderClosed: function() {
        !0 === this.model.readData("isRestore") && this.sendEvent("gameRoundStarted")
    },
    onFatalCustomMessage: function(e, n) {
        990 !== e && 992 !== e || this.sendEvent("gameError", 18, n)
    },
    onFreeRoundsStarted: function(e) {
        this.sendEvent("freeRoundsStarted", e)
    },
    onFreeRoundsEnded: function() {
        this.sendEvent("freeRoundsEnded")
    },
    onFreeRoundsNextRound: function(e, n) {
        this.sendEvent("freeRoundsNextRound", e, n)
    },
    sendEvent: function() {
        var e = Array.prototype.slice.call(arguments);
        this.fireEvent("notify:netEntExtendEvents.eventTriggered", ["event"].concat(e))
    },
    onSpinStart: function() {
        var e = Services.storage.readData("playModeManager.modes");
        this.model.storeData("spinStarted", !0), this.sendEvent("spinStarted", e)
    },
    onSpinEnded: function() {
        this.model.storeData("spinStarted", !1), this.sendEvent("spinEnded")
    },
    onWinPresentationStarted: function() {
        this.sendEvent("spinProgress", "initialWinPresentationStarted")
    },
    onServerResponseParsed: function(e) {
        var n, t = this;
        t.model.readData("spinStarted") && (n = Sys.isDefined(e.gameroundid) ? e.gameroundid : 0, t.sendEvent("spinProgress", "outcomeReceived", n)), !0 === e.restore && t.model.storeData("isRestore", !0)
    },
    onWinPresentationComplete: function(e) {
        var n;
        Sys.isDefined(e) && (n = !0 === e ? "initialWinPresentationAborted" : "initialWinPresentationEnded"), n && this.sendEvent("spinProgress", n)
    },
    onSettingsChanged: function(e, n) {
        var t = this;
        "volume" === e && t.volumeChange(n)
    },
    onAutoplayStarting: function() {
        var e = this,
            n = Services.settingsManager.getSetting("autoPlayNrSpins");
        e.model.storeData("autoplayRoundsSelected", n), e.sendEvent("autoplayStarted", n)
    },
    onAutoplayStartRound: function(e) {
        var n = this,
            t = n.model.readData("autoplayRoundsSelected");
        n.sendEvent("autoplayNextRound", t, e)
    },
    volumeChange: function(e) {
        var n = this,
            t = Math.floor(100 * e),
            o = e > 0,
            a = n.model.readData("lastVolume") > 0;
        n.model.storeData("lastVolume", e), n.sendEvent("volumeChange", t), o !== a && n.sendEvent("audioToggle", o)
    },
    onCashFieldUpdate: function(e) {
        var n = this,
            t = n.model,
            o = t.readData("balance");
        Sys.isDefined(o) ? e !== o && (n.sendEvent("balanceChanged"), t.storeData("balance", e)) : t.storeData("balance", e)
    },
    onGameModeChanged: function(e) {
        this.model.storeData("gameMode", e.toLowerCase())
    },
    onBonusGameStarted: function(e) {
        this.sendEvent("bonusGameStarted", e)
    },
    onBonusGameEnded: function(e) {
        this.sendEvent("bonusGameEnded", e)
    },
    onEnteringIdleState: function() {
        var e = this,
            n = e.model.readData("leftIdleState"),
            t = e.model.readData("isRestore");
        (n || t) && (e.sendEvent("gameRoundEnded"), e.model.storeData("isRestore", !1)), e.model.storeData("leftIdleState", !1)
    },
    onLeavingIdleState: function() {
        var e = this;
        e.sendEvent("gameRoundStarted"), e.model.storeData("leftIdleState", !0)
    },
    onPluginMenuActivated: function() {
        this.sendEvent("pluginMenuActivated")
    },
    onPluginMenuDeactivated: function() {
        this.sendEvent("pluginMenuDeactivated")
    },
    onPortrait: function() {
        this.sendEvent("rotate", {
            orientation: "portrait"
        })
    },
    onLandscape: function() {
        this.sendEvent("rotate", {
            orientation: "landscape"
        })
    },
    onGoToLobby: function(e) {
        this.sendEvent("goToLobby", e)
    },
    onDialogBoxClosed: function(e, n, t) {
        "object" == typeof arguments[0] ? this.sendEvent("dialogBoxClosed", "", "", arguments[0]) : this.sendEvent("dialogBoxClosed", e, n, t)
    }
}, Core.NetEntExtendEventsController = Sys.extend(Core.Controller, Core.NetEntExtendEventsController, "Core.NetEntExtendEventsController");
Sys.ns("Core"), Core.NetEntExtendEventsModel = {
    EVENT_MAP: {
        "notify:stateHandler.leavingBeforeLoaderCloseState": "gameReady",
        "notify:errorManager.error": "gameError",
        "notify:errorManager.errorDialogClosed": "gameErrorClose",
        "notify:paytable.pageSwitched": "paytablePageSwitch",
        "notify:autoPlayer.stopped": "autoplayStopped"
    },
    constructor: function() {
        Core.NetEntExtendEventsModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        this.storeData("autoplay", !1), this.storeData("gameMode", "basic")
    },
    getCurrentGameMode: function() {
        var e = this,
            t = e.readData("gameMode");
        return e.readData("autoplay") && (t += ", autoplay"), t
    }
}, Core.NetEntExtendEventsModel = Sys.extend(Core.Model, Core.NetEntExtendEventsModel, "Core.NetEntExtendEventsModel");
Sys.ns("Core.Slots"), Core.Slots.NetEntExtendEventsModel = {
    SLOTS_EVENT_MAP: {
        "notify:stateHandler.enteringBigWinState": "bigWinStarted",
        "notify:stateHandler.leavingBigWinState": "bigWinEnded",
        "notify:freeSpinIntro.closed": "freeSpinStarted",
        "notify:freeSpinOutro.closed": "freeSpinEnded"
    },
    constructor: function() {
        Core.Slots.NetEntExtendEventsModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        Core.Slots.NetEntExtendEventsModel.superclass.setupData.apply(this, arguments), Sys.apply(this.EVENT_MAP, this.SLOTS_EVENT_MAP)
    }
}, Core.Slots.NetEntExtendEventsModel = Sys.extend(Core.NetEntExtendEventsModel, Core.Slots.NetEntExtendEventsModel, "Core.Slots.NetEntExtendEventsModel");
Sys.ns("Core"), Core.Postman = {
    constructor: function() {
        Core.Postman.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            setupGame: {
                waitEvents: ["notify:postman.ready"]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Core.PostmanController
        }
    }
}, Core.Postman = Sys.extend(Core.Module, Core.Postman, "Core.Postman");
Sys.ns("Core"), Core.PostmanController = {
    IS_READY: !1,
    PLUGIN_TIMEOUT: 3e4,
    constructor: function() {
        Core.PostmanController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        this.pluginURL = Resources.readData("pluginURL"), this.enableSwedenPlugin = !!Resources.readData("queryData") && Resources.readData("queryData").enableDefaultSwedenButtons, this.swedenButtonPluginHost = Resources.readData("queryData") ? Resources.readData("queryData").swedenButtonPluginHost : void 0, this.hiddenIframeForSweden = null, this.iframe = null, this.on({
            "request:postman.sendMessage": this.sendMessage,
            "notify:stateHandler.enteringSetupGameState": this.setupPlugin
        }), window.addEventListener("message", function(t) {
            e.onMessage(t)
        })
    },
    onMessage: function(e) {
        e.data.moduleId ? this.fireEvent("notify:" + e.data.moduleId + ".notification", e.data) : this.handleIncomingMessage(e.data)
    },
    setupPlugin: function() {
        var e, t = this;
        this.pluginURL ? (this.enableSwedenPlugin && this.loadPluginForSwedenIntegration(), this.iframe = document.createElement("iframe"), this.iframe.setAttribute("id", "netEntExtendPlugin"), this.iframe.setAttribute("sandbox", "allow-scripts allow-popups allow-popups-to-escape-sandbox allow-top-navigation allow-top-navigation-by-user-activation allow-same-origin allow-forms allow-pointer-lock"), this.iframe.setAttribute("frameborder", 0), this.iframe.setAttribute("width", "100%"), this.iframe.setAttribute("height", 0), this.iframe.src = this.pluginURL, e = document.getElementById("viewport"), e.insertBefore(this.iframe, e.firstChild), this.timeout = setTimeout(function() {
            t.fireEvent("request:loaderErrorHandler.handlePluginTimeoutError")
        }, this.PLUGIN_TIMEOUT)) : (this.fireEvent("notify:postman.ready"), this.IS_READY = !0)
    },
    handlePluginReadyCall: function(e) {
        var t = e[3],
            s = e[4],
            n = e[5];
        "call" === e[0] && "pluginReady" === e[2] && (clearTimeout(this.timeout), this.IS_READY = !0, this.fireEvent("notify:postman.ready"), Sys.isDefined(t) && Sys.isDefined(s) && this.fireEvent("request:pluginMenu.init", t, s, n), this.sendMessage(["success", e[1]]))
    },
    handleIncomingMessage: function(e) {
        this.pluginURL && !this.IS_READY ? this.handlePluginReadyCall(e) : this.fireEvent.apply(this, ["request:NetEntExtend.newMessage"].concat(e))
    },
    sendMessage: function(e) {
        Utils.Platform.inIframe() && window.parent.postMessage(e, "*"), this.iframe && this.pluginURL && (this.iframe.contentWindow.postMessage(e, "*"), this.hiddenIframeForSweden && this.hiddenIframeForSweden.contentWindow.postMessage(e, "*"))
    },
    loadPluginForSwedenIntegration: function() {
        var e = document.createElement("link"),
            t = Resources.readData("queryData").gameId;
        this.hiddenIframeForSweden = document.createElement("iframe"), this.hiddenIframeForSweden.setAttribute("frameborder", 0), this.hiddenIframeForSweden.setAttribute("style", "width: 100%;height: 0px;z-index: -1;position: absolute;"), this.hiddenIframeForSweden.src = (this.swedenButtonPluginHost ? this.swedenButtonPluginHost : "https://static-shared.casinomodule.com") + "/sweden-plugin/sweden_buttons.html?gameid=" + t, this.cssPath = (this.swedenButtonPluginHost ? this.swedenButtonPluginHost : "https://static-shared.casinomodule.com") + "/sweden-plugin/origin.css", document.body.insertBefore(this.hiddenIframeForSweden, document.body.firstChild), e.href = this.cssPath, e.type = "text/css", e.rel = "stylesheet", Sys.utils.addCSSClass(document.body, "sweden-regulation"), Sys.utils.addCSSClass(document.body, t), document.getElementsByTagName("head")[0].appendChild(e)
    }
}, Core.PostmanController = Sys.extend(Core.Controller, Core.PostmanController, "Core.PostmanController");
Sys.ns("Core"), Core.CustomMessages = {
    constructor: function() {
        Core.CustomMessages.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        var e = this.model;
        return {
            showingCustomMessages: {
                state: {
                    name: "ShowingCustomMessages",
                    execute: function() {},
                    waitEvents: {
                        "notify:customMessages.messagesClosed": !1
                    }
                }
            },
            delayBeforeShowingMessages: {
                state: {
                    name: "DelayBeforeShowingMessages",
                    execute: function() {},
                    waitEvents: {
                        "notify:customMessages.delayComplete": !1
                    }
                }
            },
            idle: {
                waitEvents: ["notify:customMessages.messagesClosed"]
            },
            beforeStopping: {
                queue: [function(s) {
                    !e.hasImmediate() && e.readData("shouldShowDialogs") || s.stateHandler.pushState(s.states.showingCustomMessages)
                }]
            },
            setupGame: {
                waitEvents: ["notify:customMessages.ready"]
            },
            noWinPresentation: {
                queue: [function(s) {
                    !e.hasDialogs() && e.readData("shouldShowDialogs") || s.stateHandler.pushState(s.states.delayBeforeShowingMessages)
                }]
            }
        }
    },
    getMixinDependencies: function() {
        return ["userInput"]
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Core.CustomMessagesController,
            model: Core.CustomMessagesModel
        }
    }
}, Core.CustomMessages = Sys.extend(Core.Module, Core.CustomMessages, "Core.CustomMessages");
Sys.ns("Core"), Core.CustomMessagesController = {
    DIALOG_DELAY: 3e3,
    ERRORS: {
        DISPLAY_IMMEDIATELY_CLOSE: 990,
        DISPLAY_IMMEDIATELY_CONTINUE: 991,
        DISPLAY_ON_IDLE_CLOSE: 992,
        DISPLAY_ON_IDLE_CONTINUE: 993
    },
    constructor: function() {
        Core.CustomMessagesController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "request:customMessages.showDialog": this.onShowDialogRequest,
            "request:customMessages.removeDialog": this.onRemoveDialogRequest,
            "notify:serverManager.serverResponseReceived": this.onServerResponseReceived,
            "notify:serverManager.serverErrorReceived": this.onServerErrorReceived,
            "notify:stateHandler.enteringSetupGameState": this.onEnteringSetupGameState,
            "notify:stateHandler.enteringIdleState": this.onEnteringIdleState,
            "notify:stateHandler.leavingIdleState": this.onLeavingIdleState,
            "notify:stateHandler.enteringShowingCustomMessagesState": this.onEnteringShowingCustomMessagesState,
            "notify:stateHandler.leavingBeforeLoaderCloseState": this.onLoaderClose,
            "notify:stateHandler.enteringDelayBeforeShowingMessagesState": this.onEnteringDelayBeforeShowingMessagesState,
            "notify:stateHandler.leavingDelayBeforeShowingMessagesState": this.onLeavingDelayBeforeShowingMessagesState,
            "notify:dialogWindow.dialogShown": this.onDialogShown
        })
    },
    onLoaderClose: function() {
        this.model.storeData("showingLoader", !1), this.model.storeData("shouldShowDialogs", !0)
    },
    onShowDialogRequest: function(e) {
        var t;
        try {
            t = this.prepareDialogConfig(e)
        } catch (e) {
            return this.showTechnicalError(), void this.model.storeData("shouldShowDialogs", !1)
        }
        delete t.immediate, this.model.readData("isIdle") ? (this.model.hasDialogsToWaitFor() && this.model.addDialogToWaitFor(t.id), this.fireEvent("request:dialogWindow.showDialog", t)) : this.model.addDialog(t)
    },
    onRemoveDialogRequest: function(e) {
        this.model.removeDialogToWaitFor(e), this.model.removeDialog(e), this.fireEvent("request:dialogWindow.removeDialog", e)
    },
    onServerResponseReceived: function(e) {
        var t = Sys.utils.queryStringToObject(e.responseText, !0),
            s = Object.keys(t).length;
        Sys.isDefined(t.messages) && this.handleMessagesFromServerRequest(t.messages, 1 === s)
    },
    onServerErrorReceived: function(e) {
        var t = Sys.utils.qsToObj(e.responseText, !0);
        Sys.isDefined(t.messages) && this.handleMessagesFromServerRequest(t.messages, !0)
    },
    handleMessagesFromServerRequest: function(e, t) {
        var s, o, i, a;
        try {
            s = JSON.parse(e), Sys.isArray(s) && (o = s.pop(), Sys.isDefined(o) && (i = this.createConfigFromMessage(o), a = this.prepareDialogConfig(i), this.model.addDialog(a)), t && this.showImmediateMessages())
        } catch (e) {
            this.showTechnicalError(), this.model.storeData("shouldShowDialogs", !1)
        }
    },
    onEnteringSetupGameState: function() {
        this.model.readData("showingError") || this.fireEvent("notify:customMessages.ready")
    },
    onEnteringIdleState: function() {
        this.model.storeData("isIdle", !0), this.model.readData("shouldShowDialogs") && this.showDialogs(this.model.popAll())
    },
    onLeavingIdleState: function() {
        this.model.storeData("isIdle", !1)
    },
    onEnteringShowingCustomMessagesState: function() {
        this.showImmediateMessages()
    },
    onEnteringDelayBeforeShowingMessagesState: function() {
        var e = this;
        clearTimeout(this.delayTimeout), this.startListeningToUserInput(), this.delayTimeout = setTimeout(function() {
            e.fireEvent("notify:customMessages.delayComplete")
        }, this.DIALOG_DELAY)
    },
    onLeavingDelayBeforeShowingMessagesState: function() {
        this.stopListeningToUserInput()
    },
    onUserInputEnd: function(e) {
        Sys.UserInputUtils.isCoordinateTarget(Game.stage.getGameContainer(), e) && (clearTimeout(this.delayTimeout), this.fireEvent("notify:customMessages.delayComplete"))
    },
    showImmediateMessages: function() {
        this.model.readData("shouldShowDialogs") && this.showDialogs(this.model.popAllImmediate())
    },
    onDialogShown: function(e) {
        Sys.isDefined(e) && (this.model.removeDialogToWaitFor(e), this.model.hasDialogsToWaitFor() || this.fireEvent("notify:customMessages.messagesClosed"))
    },
    showDialogs: function(e) {
        var t = this;
        e.length > 0 ? e.forEach(function(e) {
            t.model.addDialogToWaitFor(e.id), Services.settingsManager.getSetting("autoPlayNrSpins") > 0 && (t.isErrorMessage(e.messageCode) || e.stopAutoplay) && t.fireEvent("request:autoPlayer.stop"), t.fireEvent("request:dialogWindow.showDialog", e), e.messageCode !== t.ERRORS.DISPLAY_IMMEDIATELY_CLOSE && e.messageCode !== t.ERRORS.DISPLAY_ON_IDLE_CLOSE || t.fireEvent("notify:customMessages.fatalMessageShowing", e.messageCode, e.text)
        }) : this.fireEvent("notify:customMessages.messagesClosed")
    },
    isErrorMessage: function(e) {
        var t, s = this;
        for (t in s.ERRORS)
            if (s.ERRORS.hasOwnProperty(t) && e === s.ERRORS[t]) return !0;
        return !1
    },
    createConfigFromMessage: function(e) {
        var t, s = {
            title: Services.languageManager.getText(Language.Keys.messageCaption),
            text: e.message,
            buttons: [],
            immediate: !0,
            id: e.code,
            messageCode: e.code
        };
        switch (e.code) {
            case this.ERRORS.DISPLAY_IMMEDIATELY_CLOSE:
                t = this.model.getCloseButtonConfig(this), s.hideGame = !0;
                break;
            case this.ERRORS.DISPLAY_IMMEDIATELY_CONTINUE:
                t = this.model.getContinueButtonConfig(this, !0);
                break;
            case this.ERRORS.DISPLAY_ON_IDLE_CLOSE:
                t = this.model.getCloseButtonConfig(this), s.hideGame = !0, s.immediate = !1;
                break;
            case this.ERRORS.DISPLAY_ON_IDLE_CONTINUE:
                t = this.model.getContinueButtonConfig(this), s.immediate = !1;
                break;
            default:
                throw new Error("Technical Error")
        }
        return Sys.isDefined(t) && s.buttons.push(t), s
    },
    prepareDialogConfig: function(e) {
        return e.text = this.scrubMessageString(e.text), e
    },
    scrubMessageString: function(e) {
        var t = (e.match(/<\/?\w+((\s+\w+(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)\/?>/g) || []).length > 0,
            s = document.createElement("div");
        if (t) throw new Error("Technical Error");
        try {
            s.textContent = e
        } catch (e) {
            throw new Error("Technical Error")
        }
        return e
    },
    showTechnicalError: function() {
        this.model.storeData("showingError", !0), this.model.readData("showingLoader") ? this.fireEvent("request:loaderErrorHandler.showTechnicalError") : this.fireEvent("request:errorManager.handleError")
    },
    revertSpin: function() {
        this.fireEvent("request:moneyManager.revertBet"), this.fireEvent("request:spin.cancelSpin")
    }
}, Core.CustomMessagesController = Sys.extend(Core.Controller, Core.CustomMessagesController, "Core.CustomMessagesController");
Sys.ns("Core"), Core.CustomMessagesModel = {
    constructor: function() {
        Core.CustomMessagesModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        this.roundEndQueue = [], this.immediateQueue = [], this.dialogsToWaitFor = [], this.storeData("isIdle", !1), this.storeData("showingLoader", !0)
    },
    addDialogToWaitFor: function(e) {
        this.dialogsToWaitFor.push(e)
    },
    removeDialogToWaitFor: function(e) {
        var t = this.dialogsToWaitFor.indexOf(e); - 1 !== t && this.dialogsToWaitFor.splice(t, 1)
    },
    hasDialogsToWaitFor: function() {
        return this.dialogsToWaitFor.length > 0
    },
    addDialog: function(e) {
        e.immediate ? this.immediateQueue.push(e) : this.roundEndQueue.push(e)
    },
    removeDialog: function(e) {
        this.spliceDialogFromQueue(this.roundEndQueue, e), this.spliceDialogFromQueue(this.immediateQueue, e)
    },
    spliceDialogFromQueue: function(e, t) {
        var o, i = e.length;
        for (o = 0; o < i; o++)
            if (e[o].id === t) return e.splice(o, 1);
        return null
    },
    popAllImmediate: function() {
        return this.immediateQueue.splice(0, this.immediateQueue.length)
    },
    popAllRoundEnd: function() {
        return this.roundEndQueue.splice(0, this.roundEndQueue.length)
    },
    popAll: function() {
        return this.popAllImmediate().concat(this.popAllRoundEnd())
    },
    hasImmediate: function() {
        return this.immediateQueue.length > 0
    },
    hasDialogs: function() {
        return this.immediateQueue.length > 0 || this.roundEndQueue.length > 0
    },
    getCloseButtonConfig: function(e) {
        return {
            scope: e,
            text: Services.languageManager.getText(Language.Keys.btn_casino),
            action: function() {
                e.fireEvent("notify:dialogBoxClosed", {
                    name: "netentExtendCustomError",
                    button: "home"
                }), Sys.utils.goToLobby()
            }
        }
    },
    getContinueButtonConfig: function(e, t) {
        return {
            scope: e,
            text: Services.languageManager.getText(Language.Keys.btn_continue),
            action: function() {
                e.fireEvent("notify:dialogBoxClosed", {
                    name: "netentExtendCustomError",
                    button: "continue"
                }), t && e.revertSpin()
            }
        }
    }
}, Core.CustomMessagesModel = Sys.extend(Core.Model, Core.CustomMessagesModel, "Core.CustomMessagesModel");
Sys.ns("Core"), Core.CustomMessagesDesktopModel = {
    constructor: function() {
        Core.CustomMessagesDesktopModel.superclass.constructor.apply(this, arguments)
    },
    getCloseButtonConfig: function() {}
}, Core.CustomMessagesDesktopModel = Sys.extend(Core.CustomMessagesModel, Core.CustomMessagesDesktopModel, "Core.CustomMessagesDesktopModel");
Sys.ns("Core"), Core.BonusMessage = {
    constructor: function() {
        Core.BonusMessage.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.Model,
            controller: Core.BonusMessageController
        }
    }
}, Core.BonusMessage = Sys.extend(Core.Module, Core.BonusMessage, "Core.BonusMessage");
Sys.ns("Core"), Core.BonusMessageController = {
    constructor: function() {
        Core.BonusMessageController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:stateHandler.enteringIdleState": this.showBonusMessageDialog
        })
    },
    onServerResponse: function(e) {
        var s;
        Sys.isNumber(e.bonusAwarded) && (s = e.bonusAwarded.toFixed(2)), this.model.storeData("bonusAwarded", s)
    },
    showBonusMessageDialog: function() {
        var e = this.model.readData("bonusAwarded");
        Sys.isDefined(e) && (this.requestDialog(e), this.model.setState("dialogOpen"))
    },
    requestDialog: function(e) {
        this.fireEvent("request:dialogWindow.showDialog", this.getDialog(e))
    },
    getDialog: function(e) {
        var s = this;
        return {
            title: Services.languageManager.getText(Language.Keys.bonusAwardedTitle),
            text: Services.languageManager.getText(Language.Keys.bonusAwardedCongrats, [e]),
            buttons: [{
                text: Services.languageManager.getText(Language.Keys.btn_continue),
                action: function() {
                    s.fireEvent("notify:dialogBoxClosed", {
                        name: "bonusMessage",
                        button: "continue"
                    })
                }
            }]
        }
    }
}, Core.BonusMessageController = Sys.extend(Core.Controller, Core.BonusMessageController, "Core.BonusMessageController");
Sys.ns("Core"), Core.ServerManager = {
    constructor: function() {
        Core.ServerManager.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.ServerManagerModel,
            controller: Core.ServerManagerController
        }
    }
}, Core.ServerManager = Sys.extend(Core.Module, Core.ServerManager, "Core.ServerManager");
Sys.ns("Core"), Core.ServerManagerController = {
    constructor: function() {
        Core.ServerManagerController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "request:serverManager.sendAction": this.sendAction,
            "request:serverManager.storeParameter": this.storeParameter,
            "notify:moduleLoader.finishedLoadingModules": this.initResponse
        })
    },
    initResponse: function() {
        this.fireEvent("notify:serverManager.serverResponseReceived", {
            responseText: Resources.readData("unParsedGameServerInitResponse")
        })
    },
    sendAction: function(e, r, t) {
        var n = this.model.getRequestURL(e),
            s = this.model.readData("slowServerRequestTimeLimit"),
            o = setTimeout(function() {
                this.fireEvent("notify:serverManager.slowRequest")
            }.bind(this), s);
        this.fireEvent("notify:serverManager.actionRequestSent", e), Sys.utils.httpGet({
            url: n
        }).fail(function(r) {
            this.fireEvent("notify:serverManager.serverErrorReceived", r), this.fireEvent("request:errorManager.handleRequestError", r), this.fireEvent("notify:serverManager.actionRequestError", e), t && this.fireEvent(t, r)
        }, this).done(function(e) {
            this.fireEvent("notify:serverManager.serverResponseReceived", e, r)
        }, this).always(function() {
            clearTimeout(o)
        })
    },
    storeParameter: function(e, r) {
        this.model.storeData("parameter:" + e, r)
    }
}, Core.ServerManagerController = Sys.extend(Core.Controller, Core.ServerManagerController, "Core.ServerManagerController");
Sys.ns("Core"), Core.ServerManagerModel = {
    constructor: function() {
        Core.ServerManagerModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = Resources.readData("queryData");
        this.storeData("queryData", e), this.storeData("serverURL", e.server), this.storeData("parameter:sessionID", Resources.readData("sessionID")), this.storeData("parameter:gameID", e.gameId), this.storeData("slowServerRequestTimeLimit", 5e3)
    },
   getRequestURL: function(b) {
       var a = ["",'game/'+ GameName+"/server", "?", this.getActionParameters(b), "&no-cache=", Sys.utils.pseudoGUID()].join("");
        return this.doIntegrationSpecificRequestUrlUpdates(a)
    },
    getActionParameters: function(e) {
        return "init" === e ? this.getInitParameters(e) : ""
    },
    getInitParameters: function(e) {
        return ["action=" + e, "&sessid=" + this.readData("parameter:sessionID"), "&gameId=" + this.readData("parameter:gameID")].join("")
    },
    doIntegrationSpecificRequestUrlUpdates: function(e) {
        return e
    }
}, Core.ServerManagerModel = Sys.extend(Core.Model, Core.ServerManagerModel, "Core.ServerManagerModel");
Sys.ns("Core"), Core.MoneyManager = {
    constructor: function() {
        Core.MoneyManager.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.MoneyManagerModel,
            controller: Core.MoneyManagerController
        }
    }
}, Core.MoneyManager = Sys.extend(Core.Module, Core.MoneyManager, "Core.MoneyManager");
Sys.ns("Core"), Core.MoneyManagerController = {
    constructor: function() {
        Core.MoneyManagerController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:stateHandler.leavingBeforeLoaderCloseState": this.onBeforeLoaderClose,
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:settingsManager.settingChanged": this.onSettingChanged,
            "request:moneyManager.revertBet": this.revertBet,
            "notify:freeRounds.reInitResponseReceived": this.onFreeRoundsReInit,
            "notify:freeRounds.ended": this.onFreeRoundsEnded
        })
    },
    onBeforeLoaderClose: function() {
        this.notifyBalanceChange()
    },
    onServerResponse: function(e) {
        void 0 !== e.credit && this.model.setBalance(e.credit)
    },
    onSettingChanged: function(e, n) {
        "betLevel" === e ? this.model.setBetLevel(n) && this.notifyBetChange() : "denomination" === e && this.model.setDenomination(n) && this.notifyBetChange()
    },
    notifyBalanceChange: function() {
        this.fireEvent("notify:moneyManager.balanceChanged", {
            denomination: this.model.readData("denomination"),
            playerBetCents: this.model.readData("playerBetCents"),
            playerBalanceCoins: this.model.readData("playerBalanceCoins"),
            playerBalanceCents: this.model.readData("playerBalanceCents"),
            playerBalanceFormatted: this.formatMoneyCurrencySign(this.model.readData("playerBalanceCents"))
        })
    },
    notifyBetChange: function() {
        this.fireEvent("notify:moneyManager.betChanged", {
            playerBetCoins: this.model.readData("playerBetCoins"),
            playerBetCents: this.model.readData("playerBetCents"),
            playerBetFormatted: this.formatMoneyCurrencySign(this.model.readData("playerBetCents"))
        })
    },
    revertBet: function() {
        this.setBalance(this.getBalanceCents() + this.getBetCents()), this.reloadBalance()
    },
    setBalance: function(e) {
        this.model.setBalance(e) && (this.notifyBetChange(), this.notifyBalanceChange())
    },
    reloadBalance: function() {
        var e = this,
            n = new Sys.Deferred,
            t = function() {
                e.removeListener("notify:responseParser.reloadBalanceParsed"), e.removeListener("notify:serverManager.reloadBalanceRequestFailed")
            };
        return this.addListener("notify:responseParser.reloadBalanceParsed", function(a) {
            e.setBalance(parseInt(a.credit, 10)), n.resolve(a), t(), e.fireEvent("notify:moneyManager.balanceReloaded")
        }), this.addListener("notify:serverManager.reloadBalanceRequestFailed", function(e) {
            n.reject(e), t()
        }), this.fireEvent("request:serverManager.sendAction", "reloadbalance", "notify:responseParser.reloadBalanceParsed", "notify:serverManager.reloadBalanceRequestFailed"), n
    },
    formatMoney: function(e, n, t) {
        var a = this.model.getMoneyFormat(n),
            r = Sys.isNumber(t) ? t : 2,
            o = (Math.floor(e) / 100).toFixed(r).split("."),
            s = o[0],
            i = o[1];
        return s.split("").reduce(function(e, n, t, r) {
            var o = e;
            return t > 0 && t % 3 == 0 && (o = a.thousandsDivider + o), o = r[r.length - t - 1] + o
        }, "") + (i ? a.decimalDivider + i : "")
    },
    formatMoneyCurrencySign: function(e, n, t) {
        var a = this.model.getMoneyFormat(n),
            r = a.currencyChar,
            o = this.formatMoney(e, n, t),
            s = function(e) {
                return e.length > 1 ? " " : ""
            };
        return a.isCurrCharAfter ? o + s(r) + r : r + s(r) + o
    },
    getBalanceCents: function() {
        return this.model.readData("playerBalanceCents")
    },
    getBalanceCoins: function() {
        return this.model.readData("playerBalanceCoins")
    },
    getBetCents: function() {
        return this.model.readData("playerBetCents")
    },
    getBetCoins: function() {
        return this.model.readData("playerBetCoins")
    },
    canPlaceAnotherBet: function() {
        return this.getBetCents() <= this.getBalanceCents() || this.model.readData("inFreeRounds")
    },
    placeBet: function() {
        this.model.readData("inFreeRounds") || this.setBalance(this.getBalanceCents() - this.getBetCents())
    },
    getMinimumBetCents: function() {
        return this.model.readData("minimumBetInCents")
    },
    getCurrencyIsoName: function(e) {
        return this.model.getMoneyFormat(e).iso
    },
    onFreeRoundsReInit: function() {
        this.model.setupData()
    },
    onFreeRoundsEnded: function() {
        this.model.storeData("inFreeRounds", !1)
    }
}, Core.MoneyManagerController = Sys.extend(Core.Controller, Core.MoneyManagerController, "Core.MoneyManagerController");
Sys.ns("Core"), Core.MoneyManagerModel = {
    constructor: function() {
        Core.MoneyManagerModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = Resources.readData("gameServerInitResponse");
        this.setupMoneyHandling(), this.setBalance(Number(e.credit)), this.storeData("betlineCoins", this.getBetlineCoinValue(e)), this.storeData("inFreeRounds", parseInt(e.freeRoundsLeft, 10) > 0), this.calculateMinimumBetInCents()
    },
    setupMoneyHandling: function() {
        var e = Resources.readData("gameServerInitResponse"),
            t = {
                player: Sys.utils.XMLHelper.getMoneyFormatFromXML(Resources.readData("moneyformat_player"), e.playercurrencyiso),
                jackpot: Sys.utils.XMLHelper.getMoneyFormatFromXML(Resources.readData("moneyformat_jackpot"), e.jackpotcurrencyiso)
            };
        if (!t.player) throw new Error("The player currency format is missing!");
        if (!t.jackpot) throw new Error("The jackpot currency format is missing!");
        this.storeData("moneyFormats", t)
    },
    getMoneyFormat: function(e) {
        var t = this.readData("moneyFormats");
        return t[e] ? t[e] : t.player
    },
    getCurrency: function(e) {
        return this.getMoneyFormat(e).currencyChar
    },
    setBalance: function(e) {
        var t = parseInt(e, 10);
        return !isNaN(t) && t >= 0 && (this.storeData("playerBalanceCents", t), this.storeData("playerBalanceCoins", Math.floor(t / this.readData("denomination"))), !0)
    },
    setBetLevel: function(e) {
        var t;
        return e > 0 && Math.floor(e) === e && (this.storeData("betLevel", e), t = e * this.readData("betlineCoins"), this.storeData("playerBetCoins", t), this.storeData("playerBetCents", t * this.readData("denomination")), !0)
    },
    setDenomination: function(e) {
        return e > 0 && (this.storeData("denomination", e), this.storeData("playerBetCents", this.readData("playerBetCoins") * e), this.storeData("playerBalanceCoins", Math.floor(this.readData("playerBalanceCents") / e)), !0)
    },
    getBalanceCents: function() {
        return this.readData("playerBalanceCents")
    },
    getBalanceCoins: function() {
        return this.readData("playerBalanceCoins")
    },
    getBetCents: function() {
        return this.readData("playerBetCents")
    },
    getBetCoins: function() {
        return this.readData("playerBetCoins")
    },
    getBetlineCoinValue: function(e) {
        var t, a = e["bl.standard"].split(","),
            n = a.length,
            r = 0;
        for (t = 0; t < n; t++) r += parseInt(e["bl.i" + t + ".coins"], 10);
        return r
    },
    calculateMinimumBetInCents: function() {
        var e = Resources.readData("gameServerInitResponseObject"),
            t = e.betlevel.all,
            a = e.denomination.all,
            n = this.validateArray(t),
            r = this.validateArray(a),
            s = this.readData("betlineCoins"),
            o = n[0] * s * r[0];
        this.storeData("minimumBetInCents", o)
    },
    validateArray: function(e) {
        return Sys.isArray(e) ? e.slice(0).sort(function(e, t) {
            return e - t
        }) : [e]
    },
    setMinimumBetInCents: function(e) {
        this.storeData("minimumBetInCents", e)
    },
    getMinimumBetInCents: function() {
        return this.readData("minimumBetInCents")
    }
}, Core.MoneyManagerModel = Sys.extend(Core.Model, Core.MoneyManagerModel, "Core.MoneyManagerModel");
Sys.ns("Core"), Core.SettingsManager = {
    constructor: function() {
        Core.SettingsManager.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["trigger"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.SettingsManagerModel,
            controller: Core.SettingsManagerController
        }
    }
}, Core.SettingsManager = Sys.extend(Core.Module, Core.SettingsManager, "Core.SettingsManager");
Sys.ns("Core"), Core.SettingsManagerController = {
    constructor: function() {
        Core.SettingsManagerController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var t = this;
        t.on({
            "request:settingsManager.storeData": t.storeSetting,
            "request:settingsManager.lockSetting": t.lockSetting,
            "request:settingsManager.unlockSetting": t.unlockSetting,
            "request:settingsManager.disableSetting": t.disableSetting,
            "request:settingsManager.enableSetting": t.enableSetting
        })
    },
    registerTriggers: function() {
        Services.trigger.registerTrigger("notify:settingsManager.settingChanged", this, "When the settings are changed")
    },
    isSettable: function(t) {
        var e = this;
        return !e.model.isLocked(t) && !e.model.isDisabled(t)
    },
    storeSetting: function(t, e, n, i) {
        var s, r = this;
        r.model.isLocked(t) || r.model.isDisabled(t) || (s = r.model.readData("settings"), s[t] !== e && (s[t] = e, r.model.storeData("settings", s), n && Services.localStorageManager.storeData(t, "string" == typeof e ? e : JSON.stringify(e)), i || r.fireEvent("notify:settingsManager.settingChanged", t, e)))
    },
    getSetting: function(t) {
        return this.model.readData("settings")[t]
    },
    lockSetting: function(t, e) {
        var n = this.model.readData("lockedSettings");
        Sys.isArray(n[t]) || (n[t] = []), n[t].contains(e) || (n[t].push(e), this.model.storeData("lockedSettings", n), 1 === n[t].length && this.fireEvent("notify:settingsManager.settingLocked", t))
    },
    unlockSetting: function(t, e) {
        var n = this.model.readData("lockedSettings");
        Sys.isArray(n[t]) && n[t].contains(e) && (n[t].splice(n[t].indexOf(e), 1), this.model.storeData("lockedSettings", n), 0 === n[t].length && this.fireEvent("notify:settingsManager.settingUnlocked", t))
    },
    disableSetting: function(t) {
        var e = this;
        e.model.readData("disabledSettings")[t] = !0, e.fireEvent("notify:settingsManager.settingDisabled", t)
    },
    enableSetting: function(t) {
        var e = this;
        e.model.readData("disabledSettings")[t] = !1, e.fireEvent("notify:settingsManager.settingEnabled", t)
    }
}, Core.SettingsManagerController = Sys.extend(Core.Controller, Core.SettingsManagerController, "Core.SettingsManagerController");
Sys.ns("Core"), Core.SettingsManagerModel = {
    constructor: function() {
        Core.SettingsManagerModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        this.data = {
            settings: {},
            lockedSettings: {},
            disabledSettings: {}
        }
    },
    isLocked: function(e) {
        var t = this.readData("lockedSettings")[e];
        return Sys.isArray(t) && t.length > 0
    },
    isDisabled: function(e) {
        return this.readData("disabledSettings")[e]
    }
}, Core.SettingsManagerModel = Sys.extend(Core.Model, Core.SettingsManagerModel, "Core.SettingsManagerModel");
Sys.ns("Core"), Core.StopGame = {
    constructor: function() {
        Core.StopGame.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Core.StopGameController,
            view: Core.StopGameView
        }
    }
}, Core.StopGame = Sys.extend(Core.Module, Core.StopGame, "Core.StopGame");
Sys.ns("Core"), Core.StopGameController = {
    constructor: function() {
        Core.StopGameController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "request:stopGame.disable": this.disable,
            "request:stopGame.pause": this.pause
        })
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    disable: function() {
        this.pause(), this.view.displayOverlay()
    },
    disableAnimations: function() {
        this.fireEvent("request:stage.pauseAnimation")
    },
    disableAudio: function() {
        this.fireEvent("request:audioPlayer.stopAll"), Services.settingsManager.storeSetting("volume", 0)
    },
    disableInterface: function() {
        var e = this;
        e.fireEvent("request:disableBasicGamePanel", e.MODULE_NAME), e.fireEvent("request:userInputManager.activateExclusivity", e.MODULE_NAME)
    },
    pause: function() {
        this.disableInterface(), this.disableAnimations(), this.disableAudio()
    }
}, Core.StopGameController = Sys.extend(Core.Controller, Core.StopGameController, "Core.StopGameController");
Sys.ns("Core"), Core.StopGameView = {
    constructor: function() {
        Core.StopGameView.superclass.constructor.apply(this, arguments)
    },
    displayOverlay: function() {
        this.overlay.el.style.display = "block"
    },
    initAnimations: function() {
        this.overlay = new Sys.Element({
            tag: "div",
            id: "stopGameOverlay",
            cls: "stopGameOverlay",
            style: "display:none",
            renderTo: "gameWrapper"
        })
    }
}, Core.StopGameView = Sys.extend(Core.View, Core.StopGameView, "Core.StopGameView");
Sys.ns("Core"), Core.RealityCheck = {
    CONTROL_STATE: "idle",
    constructor: function() {
        Core.RealityCheck.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        var e = this.model,
            t = {
                realityCheck: {
                    state: {
                        name: "RealityCheck",
                        execute: function(e) {},
                        waitEvents: {
                            "notify:realityCheck:completed": !1
                        }
                    }
                }
            };
        return t[this.CONTROL_STATE] = {
            queue: [function(t) {
                e.isTimeToDoRealityCheck() && t.stateHandler.pushState(t.states.realityCheck)
            }]
        }, t
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.RealityCheckModel,
            view: Core.View,
            controller: Core.RealityCheckController
        }
    }
}, Core.RealityCheck = Sys.extend(Core.Module, Core.RealityCheck, "Core.RealityCheck");
Sys.ns("Core"), Core.RealityCheckController = {
    constructor: function() {
        Core.RealityCheckController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:stateHandler.enteringRealityCheckState": this.doRealityCheck,
            "notify:responseParser.rcInfoParsed": this.handleInfoResponse,
            "notify:responseParser.rcInfoReset": this.handleResetResponse,
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:responseParser.gameConfigurationParsed": this.onFreeRoundsEnded
        })
    },
    onServerResponse: function(e) {
        this.model.processServerResponse(e)
    },
    sendServerAction: function(e, t) {
        this.model.setState("requestPending"), this.fireEvent("request:serverManager.sendAction", e, t)
    },
    handleResetResponse: function(e) {
        this.model.storeData("msUntilTimeout", e.rc.msuntiltimeout), this.model.storeData("lastCheckTime", Date.now())
    },
    handleInfoResponse: function(e) {
        var t, n, o, s = this,
            r = e.rc;
        Sys.isDefined(r) && r.msuntiltimeout <= 0 ? (o = Math.round(r.duration / 60 / 60 / 10) / 100, r.totalwin >= 0 ? (n = r.totalwin, t = Language.Keys.rc_checkPlayingWon) : (n = Sys.utils.toInt(-r.totalwin), t = Language.Keys.rc_checkPlayingLost), s.requestDialog(Services.languageManager.getText(t, [o, Services.moneyManager.formatMoneyCurrencySign(n)])), s.model.setState("dialogOpen")) : (s.handleResetResponse(e), s.complete())
    },
    requestDialog: function(e) {
        this.fireEvent("request:dialogWindow.showDialog", this.model.getDialog(e, this))
    },
    complete: function() {
        this.fireEvent("notify:realityCheck:completed")
    },
    doRealityCheck: function() {
        this.sendServerAction("rcinfo", "notify:responseParser.rcInfoParsed")
    },
    onFreeRoundsEnded: function() {
        this.model.processInitData(Resources.readData("gameServerInitResponse"))
    }
}, Core.RealityCheckController = Sys.extend(Core.Controller, Core.RealityCheckController, "Core.RealityCheckController");
Sys.ns("Core"), Core.RealityCheckModel = {
    constructor: function() {
        Core.RealityCheckModel.superclass.constructor.apply(this, arguments)
    },
    getDialog: function(e, t) {
        return {
            title: Services.languageManager.getText(Language.Keys.rc_checkReminder),
            text: e,
            buttons: [{
                scope: t,
                text: Services.languageManager.getText(Language.Keys.btn_casino),
                action: function() {
                    t.fireEvent("notify:dialogBoxClosed", {
                        name: "realityCheck",
                        button: "home"
                    }), Sys.utils.goToLobby("0")
                }
            }, {
                scope: t,
                text: Services.languageManager.getText(Language.Keys.btn_continue),
                action: function() {
                    t.fireEvent("notify:dialogBoxClosed", {
                        name: "realityCheck",
                        button: "continue"
                    }), t.sendServerAction("rcreset", "notify:responseParser.rcInfoReset"), t.complete()
                }
            }]
        }
    },
    setupData: function() {
        this.processInitData(Resources.readData("gameServerInitResponse"))
    },
    processInitData: function(e) {
        var t = Sys.utils.strIsTrue(e["rc.enabled"]);
        Sys.utils.toInt(e.freeRoundsLeft) > 0 && (t = !1), this.storeData("rcEnabled", t), t && (Sys.isDefined(e["rc.msuntiltimeout"]) ? (this.storeData("msUntilTimeout", Sys.utils.toInt(e["rc.msuntiltimeout"])), this.storeData("lastCheckTime", Date.now())) : this.storeData("rcEnabled", !1))
    },
    processServerResponse: function(e) {
        this.storeData("nextAction", e.nextaction)
    },
    isTimeToDoRealityCheck: function() {
        var e;
        return !(!this.readData("rcEnabled") || (e = this.readData("lastCheckTime") + this.readData("msUntilTimeout") <= Date.now(), "spin" !== this.readData("nextAction") || !e))
    }
}, Core.RealityCheckModel = Sys.extend(Core.Model, Core.RealityCheckModel, "Core.RealityCheckModel");
Sys.ns("Core"), Core.RealityCheckDesktopModel = {
    constructor: function() {
        Core.RealityCheckDesktopModel.superclass.constructor.apply(this, arguments)
    },
    getDialog: function(e, t) {
        return {
            title: Services.languageManager.getText(Language.Keys.rc_checkReminder),
            text: e,
            buttons: [{
                scope: t,
                text: Services.languageManager.getText(Language.Keys.btn_checkEnd),
                action: function() {
                    t.fireEvent("notify:dialogBoxClosed", {
                        name: "realityCheck",
                        button: "end"
                    }), t.fireEvent("request:stopGame.disable")
                }
            }, {
                scope: t,
                text: Services.languageManager.getText(Language.Keys.btn_continue),
                action: function() {
                    t.fireEvent("notify:dialogBoxClosed", {
                        name: "realityCheck",
                        button: "continue"
                    }), t.sendServerAction("rcreset", "notify:responseParser.rcInfoReset"), t.complete()
                }
            }]
        }
    }
}, Core.RealityCheckDesktopModel = Sys.extend(Core.RealityCheckModel, Core.RealityCheckDesktopModel, "Core.RealityCheckDesktopModel");
Sys.ns("Core.Slots"), Core.Slots.RealityCheck = {
    CONTROL_STATE: "stopped",
    constructor: function() {
        Core.Slots.RealityCheck.superclass.constructor.apply(this, arguments)
    }
}, Core.Slots.RealityCheck = Sys.extend(Core.RealityCheck, Core.Slots.RealityCheck, "Core.Slots.RealityCheck");
Sys.ns("Core"), Core.KeepAlive = {
    constructor: function() {
        Core.KeepAlive.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.KeepAliveModel,
            view: Core.View,
            controller: Core.KeepAliveController
        }
    }
}, Core.KeepAlive = Sys.extend(Core.Module, Core.KeepAlive, "Core.KeepAlive");
Sys.ns("Core"), Core.KeepAliveController = {
    constructor: function() {
        Core.KeepAliveController.superclass.constructor.apply(this, arguments), this.model.readData("url") && this.keepAlive()
    },
    keepAlive: function() {
        var e = this,
            o = this.model.readData("interval");
        Sys.utils.httpGet({
            url: this.model.readData("url"),
            handleError: !1,
            showTimeoutDialog: !1
        }).always(function() {
            setTimeout(function() {
                e.keepAlive()
            }, o)
        })
    }
}, Core.KeepAliveController = Sys.extend(Core.Controller, Core.KeepAliveController, "Core.KeepAliveController");
Sys.ns("Core"), Core.KeepAliveModel = {
    constructor: function() {
        Core.KeepAliveModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = Resources.readData("queryData"),
            s = e.keepAliveURL,
            r = e.keepAliveInterval,
            o = Resources.readData("sessionID");
        o && Sys.utils.isUrl(s) && parseInt(r, 10) >= 5 && (this.storeData("url", Sys.utils.appendParameterToQuery(s, "sessId=" + o)), this.storeData("interval", 1e3 * r))
    }
}, Core.KeepAliveModel = Sys.extend(Core.Model, Core.KeepAliveModel, "Core.KeepAliveModel");
Sys.ns("Core"), Core.PlayForRealPromo = {
    constructor: function() {
        Core.PlayForRealPromo.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            idle: {
                waitEvents: ["notify:playForRealPromo:completed"]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.PlayForRealPromoModel,
            view: Core.View,
            controller: Core.PlayForRealPromoController
        }
    }
}, Core.PlayForRealPromo = Sys.extend(Core.Module, Core.PlayForRealPromo, "Core.PlayForRealPromo");
Sys.ns("Core"), Core.PlayForRealPromoController = {
    constructor: function() {
        Core.PlayForRealPromoController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var o = this;
        o.on({
            "notify:stateHandler.enteringIdleState": o.onEnteringIdleState,
            "request:playForRealPromo:enable": o.onEnable,
            "request:playForRealPromo:disable": o.onDisable
        })
    },
    onEnteringIdleState: function() {
        var o = this,
            e = o.model.readData("roundsLeft");
        0 !== e || o.isDisabled ? o.complete() : o.requestDialog(), Sys.isDefined(e) && o.model.handleRounds()
    },
    requestDialog: function() {
        this.fireEvent("request:dialogWindow.showDialog", this.model.getDialog(this))
    },
    complete: function() {
        this.fireEvent("notify:playForRealPromo:completed")
    },
    onEnable: function() {
        this.isDisabled = !1
    },
    onDisable: function() {
        this.isDisabled = !0
    }
}, Core.PlayForRealPromoController = Sys.extend(Core.Controller, Core.PlayForRealPromoController, "Core.PlayForRealPromoController");
Sys.ns("Core"), Core.PlayForRealPromoModel = {
    constructor: function() {
        Core.PlayForRealPromoModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var o, e = Resources.readData("gameServerInitResponse") || {};
        e.playforfun && Sys.isDefined(e["playforrealpromo.rounds"]) && (o = Sys.utils.toInt(e["playforrealpromo.rounds"]), this.storeData("roundsLeft", o), this.storeData("rounds", o))
    },
    getDialog: function(o) {
        return {
            title: Services.languageManager.getText(Language.Keys.youPlayingForFun),
            buttons: [{
                text: Services.languageManager.getText(Language.Keys.btn_login),
                scope: o,
                action: function() {
                    o.fireEvent("notify:dialogBoxClosed", {
                        name: "playForRealPromo",
                        button: "login"
                    }), Sys.utils.goToLobby("4")
                }
            }, {
                text: Services.languageManager.getText(Language.Keys.btn_continue),
                scope: o,
                action: function() {
                    o.fireEvent("notify:dialogBoxClosed", {
                        name: "playForRealPromo",
                        button: "continue"
                    }), o.complete()
                }
            }]
        }
    },
    handleRounds: function() {
        var o, e = this.readData("roundsLeft");
        o = 0 === e ? this.readData("rounds") : --e, this.storeData("roundsLeft", o)
    }
}, Core.PlayForRealPromoModel = Sys.extend(Core.Model, Core.PlayForRealPromoModel, "Core.PlayForRealPromoModel");
Sys.ns("Core"), Core.PlayForRealPromoDesktopModel = {
    constructor: function() {
        Core.PlayForRealPromoDesktopModel.superclass.constructor.apply(this, arguments)
    },
    getDialog: function(o) {
        return {
            title: Services.languageManager.getText(Language.Keys.youPlayingForFun),
            buttons: [{
                text: Services.languageManager.getText(Language.Keys.btn_continue),
                scope: o,
                action: function() {
                    o.fireEvent("notify:dialogBoxClosed", {
                        name: "playForRealPromo",
                        button: "continue"
                    }), o.complete()
                }
            }]
        }
    }
}, Core.PlayForRealPromoDesktopModel = Sys.extend(Core.PlayForRealPromoModel, Core.PlayForRealPromoDesktopModel, "Core.PlayForRealPromoDesktopModel");
Sys.ns("Core"), Core.CountUp = {
    constructor: function() {
        Core.CountUp.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.CountUpModel,
            view: Core.CountUpView,
            controller: Core.CountUpController
        }
    }
}, Core.CountUp = Sys.extend(Core.Module, Core.CountUp, "Core.CountUp");
Sys.ns("Core"), Core.CountUpModel = {
    constructor: function() {
        Core.CountUpModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        this.setState("stopped"), this.defineEasingMethods()
    },
    defineEasingMethods: function() {
        this.storeData("easingMethods", {
            "ease-in": 0,
            "ease-out": 1,
            linear: .5
        })
    }
}, Core.CountUpModel = Sys.extend(Core.Model, Core.CountUpModel, "Core.CountUpModel");
Sys.ns("Core"), Core.CountUpView = {
    NUMBER_IMAGE: void 0,
    NUMBER_WIDTH: 80,
    NUMBER_HEIGHT: 100,
    NUMBER_FONT: "bold 100px Verdana",
    NUMBER_OFFSET: 0,
    NUMBER_TEXT_OPERATIONS: [{
        fillStyle: "#FFFFFF"
    }, {
        lineWidth: 5,
        strokeStyle: "#00000",
        drawType: "stroke"
    }],
    COUNT_UP_LEFT: void 0,
    COUNT_UP_TOP: 250,
    COUNT_UP_DEPTH: 100,
    COUNT_UP_EASING_TYPE: "ease-out",
    SHOW_TOTAL_DURATION: 3e3,
    constructor: function() {
        var t = {
            COUNT_UP_LEFT: this.COUNT_UP_LEFT,
            COUNT_UP_TOP: this.COUNT_UP_TOP
        };
        Core.CountUpView.superclass.constructor.apply(this, arguments), this.CONFIG = this.CONFIG || {}, this.CONFIG.DEFAULT = this.CONFIG.DEFAULT || {}, Sys.applyProperties(this.CONFIG.DEFAULT, t)
    },
    configureStartAnimation: function(t) {},
    configureEndAnimation: function() {},
    createItems: function() {
        var t = this;
        t.countUpItem = t.createCountUpItem(), t.list.add(t.countUpItem)
    },
    initAnimations: function() {
        this.scaleFactor = this.getScaleFactor(), this.createList(), this.createItems(), Game.stage.view.addToRenderLoop(this.list), this.list.stop()
    },
    getScaleFactor: function() {
        return Resources.readData("config").mobileResourceToVirtualScale || 1
    },
    refresh: function() {
        var t = this.scaleFactor,
            e = Environment.getOrientationSpecificConfig(this.CONFIG, !0);
        Animation.utils.isAnimationItem(this.countUpItem) && (this.countUpItem.setLeft(Math.round(e.COUNT_UP_LEFT * t) || Environment.determineResolution().virtualResolution.width / 2), this.countUpItem.setTop(Math.round(e.COUNT_UP_TOP * t)))
    },
    createList: function() {
        this.list = new Animation.CanvasAnimationList({})
    },
    createCountUpItem: function() {
        var t = this,
            e = Environment.getOrientationSpecificConfig(this.CONFIG, !0),
            i = Animation.utils.text.createNumberDrawingProperties(t);
        return new Animation.CanvasAnimationItem({
            left: Math.round(e.COUNT_UP_LEFT * t.scaleFactor) || Environment.determineResolution().virtualResolution.width / 2,
            top: Math.round(e.COUNT_UP_TOP * t.scaleFactor),
            width: 0,
            height: 0,
            depth: t.COUNT_UP_DEPTH,
            executeBefore: function(e) {
                var n, o, s, a = this.value.toString();
                if (Animation.utils.text.drawTextFromImage(a, t.NUMBER_OFFSET, this.pivot.x, this.pivot.y, !0, i.image, i.charMap, i.width, i.height, e), Sys.isDefined(this.fireOnValue))
                    for (n = this.fireOnValue.length, s = -1; ++s < n;) o = this.fireOnValue[s], !o.fired && this.value >= o.value && (o.scope.fireEvent(o.event, o.argument), o.fired = !0)
            },
            operations: {}
        })
    },
    setCountUpValues: function(t) {
        var e = this,
            i = e.countUpItem.prop;
        i.fireOnValue = t.fireEventsOnValue, i.operations = {
            value: [{
                time: 0,
                value: t.from,
                support: e.model.readData("easingMethods")[e.COUNT_UP_EASING_TYPE] * t.to,
                numDecimals: 0
            }, {
                time: t.duration,
                value: t.to,
                fireEvent: {
                    event: "view:countUpComplete",
                    scope: e
                }
            }, {
                time: t.duration + 1,
                value: t.to
            }, {
                time: t.duration + 2,
                value: t.to,
                goTo: 2
            }]
        }, e.configureStartAnimation(t.duration)
    },
    start: function(t) {
        this.list.restore(), this.setCountUpValues(t), this.list.play()
    },
    stop: function() {
        this.list.stop()
    },
    pause: function() {
        this.list.pause()
    },
    resume: function() {
        this.list.play()
    },
    showTotal: function(t) {
        var e, i, n = this,
            o = [];
        t = t || {}, n.list.stop(), e = n.countUpItem.prop.operations.value[1].value, n.countUpItem.prop.fireOnValue.length = 0, n.list.restore(), o.push({
            value: e,
            time: 0
        }), t.showUntilStopped ? o.push({
            value: e,
            time: 1,
            goTo: 0
        }) : (i = Sys.isDefined(t.showDuration) ? t.showDuration : n.SHOW_TOTAL_DURATION, o.push({
            value: e,
            time: i,
            fireEvent: {
                event: "view:showTotalDurationPassed",
                scope: n
            }
        })), n.countUpItem.value(o), n.configureEndAnimation(i), n.list.play()
    }
}, Core.CountUpView = Sys.extend(Core.View, Core.CountUpView, "Core.CountUpView");
Sys.ns("Core"), Core.CountUpController = {
    constructor: function() {
        Core.CountUpController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var t = {
            "view:countUpComplete": this.onCountUpComplete,
            "view:showTotalDurationPassed": this.stop,
            "notify:scaling.gameSizeChanged": this.onGameSizeChanged,
            "notify:animationManager.allImagesLoaded": this.initAnimations
        };
        t["request:" + this.MODULE_NAME + ".start"] = this.start, t["request:" + this.MODULE_NAME + ".pause"] = this.pause, t["request:" + this.MODULE_NAME + ".resume"] = this.resume, t["request:" + this.MODULE_NAME + ".stop"] = this.stop, t["request:" + this.MODULE_NAME + ".showTotal"] = this.showTotal, this.on(t)
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    start: function(t) {
        this.view.start(t), this.model.setState("countingUp")
    },
    stop: function() {
        this.model.isState("stopped") || (this.model.setState("stopped"), this.view.stop(), this.fireEvent("notify:" + this.MODULE_NAME + ".hidden"))
    },
    pause: function() {
        this.view.pause()
    },
    resume: function() {
        this.model.isState("stopped") || this.view.resume()
    },
    onGameSizeChanged: function() {
        "function" == typeof this.view.refresh && this.view.refresh()
    },
    showTotal: function(t) {
        this.model.isState("showingTotal") || (this.view.showTotal(t), this.model.setState("showingTotal"))
    },
    onCountUpComplete: function() {
        this.fireEvent("notify:" + this.MODULE_NAME + ".countUpComplete")
    }
}, Core.CountUpController = Sys.extend(Core.Controller, Core.CountUpController, "Core.CountUpController");
Sys.ns("Core"), Core.DialogWindow = {
    constructor: function() {
        Core.DialogWindow.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.DialogWindowModel,
            view: Core.DialogWindowBaseView,
            controller: Core.DialogWindowController
        }
    },
    getMixinDependencies: function() {
        return [{
            userInput: {
                inputEvents: ["start", "end", "move", "scroll"]
            }
        }, "orientation"]
    }
}, Core.DialogWindow = Sys.extend(Core.Module, Core.DialogWindow, "Core.DialogWindow");
Sys.ns("Core"), Core.DialogWindowController = {
    constructor: function() {
        Core.DialogWindowController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = {
            "request:dialogWindow.showDialog": this.onShowDialogRequest,
            "request:dialogWindow.removeDialog": this.onRemoveDialogRequest,
            "request:dialogWindow.closeCurrentDialog": this.onCloseDialogRequest,
            "view:dialogShown": this.onDialogShown,
            "view:showingDialog": this.onShowingDialog,
            "view:pauseGame": this.pauseGame,
            "notify:scaling.gameSizeChanged": this.onGameSizeChanged,
            "notify:viewport.scaled": this.onGameSizeChanged,
            "notify:platform.resized": this.onResize
        };
        e["notify:userInputManager." + this.MODULE_NAME + "ExclusiveStart"] = this.onUserInputStart, e["notify:userInputManager." + this.MODULE_NAME + "ExclusiveEnd"] = this.onUserInputEnd, e["notify:userInputManager." + this.MODULE_NAME + "ExclusiveMove"] = this.onUserInputMove, e["notify:userInputManager." + this.MODULE_NAME + "ExclusiveScroll"] = this.onUserInputScroll, this.on(e)
    },
    onGameSizeChanged: function() {
        "function" == typeof this.view.refresh && this.view.refresh()
    },
    onResize: function() {
        this.view.resize(), this.onGameSizeChanged()
    },
    onShowDialogRequest: function(e) {
        var i = this.model.readData("currentDialogConfig") || {};
        this.model.isState("showing") ? e.fatal && !i.fatal ? (this.model.addAsFirst(e), this.view.closeCurrentDialog()) : this.model.queue(e) : (this.view.showDialog(e), "function" == typeof this.view.refresh && this.view.refresh())
    },
    onRemoveDialogRequest: function(e) {
        var i = this.model.readData("currentDialogConfig") || {};
        this.model.isState("showing") && i.id === e ? (this.view.closeCurrentDialog(), this.fireEvent("request:userInputManager.deactivateExclusivity", this.MODULE_NAME)) : this.model.remove(e)
    },
    onCloseDialogRequest: function() {
        (this.model.readData("currentDialogConfig") || {}).fatal || (this.view.closeCurrentDialog(), this.fireEvent("request:userInputManager.deactivateExclusivity", this.MODULE_NAME))
    },
    onDialogShown: function(e) {
        this.model.hasQueuedDialog() ? this.view.showNextDialog() : (this.fireEvent("request:quickSettingsMenu.externalActivate", this.MODULE_NAME), this.fireEvent("request:enableBasicGamePanel", this.MODULE_NAME), this.fireEvent("notify:dialogWindow.allDialogsClosed")), this.fireEvent("notify:dialogWindow.dialogShown", e.id)
    },
    onShowingDialog: function() {
        this.fireEvent("request:userInputManager.activateExclusivity", this.MODULE_NAME), this.fireEvent("request:quickSettingsMenu.externalDeactivate", this.MODULE_NAME), this.fireEvent("request:disableBasicGamePanel", this.MODULE_NAME), this.fireEvent("notify.dialogWindow.showingDialog")
    },
    pauseGame: function() {
        this.fireEvent("request:stopGame.pause")
    },
    onUserInputStart: function(e) {
        var i = this.view.getButtonFromCoordinate(e);
        this.view.handleScrolling("start", e), i && this.model.storeData("activeButton", i)
    },
    onUserInputEnd: function(e) {
        var i = Sys.UserInputUtils.getDOMElementFromCoordinates(e),
            t = this.model.readData("activeButton");
        this.view.handleScrolling("end", e), Sys.isDefined(t) && Sys.UserInputUtils.isParentAndChildElements(t.element, i) && ("function" == typeof t.action && t.action(), this.fireEvent("request:userInputManager.deactivateExclusivity", this.MODULE_NAME)), this.model.removeData("activeButton")
    },
    onUserInputMove: function(e) {
        this.view.handleScrolling("move", e)
    },
    onUserInputScroll: function(e, i) {
        this.view.handleScrolling("scroll", e, i)
    },
    onPortrait: function() {
        this.view.handleScrolling("orientation")
    },
    onLandscape: function() {
        this.view.handleScrolling("orientation")
    }
}, Core.DialogWindowController = Sys.extend(Core.Controller, Core.DialogWindowController, "Core.DialogWindowController");
Sys.ns("Core"), Core.DialogWindowModel = {
    constructor: function() {
        Core.DialogWindowModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        this.requestQueue = [], Services.storage.storeData("dialog.showing", !1)
    },
    queue: function(e) {
        this.requestQueue.push(e)
    },
    addAsFirst: function(e) {
        this.requestQueue.unshift(e)
    },
    getNextDialogConfig: function() {
        if (this.requestQueue.length > 0) return this.requestQueue.shift()
    },
    remove: function(e) {
        var u;
        for (u = 0; u < this.requestQueue.length; u++)
            if (this.requestQueue[u].id === e) return this.requestQueue.splice(u, 1), !0;
        return !1
    },
    hasQueuedDialog: function() {
        return this.requestQueue.length > 0
    },
    getQueue: function() {
        return this.requestQueue
    }
}, Core.DialogWindowModel = Sys.extend(Core.Model, Core.DialogWindowModel, "Core.DialogWindowModel");
Sys.ns("Core"), Core.DialogWindowView = {
    constructor: function() {
        Core.DialogWindowView.superclass.constructor.apply(this, arguments), this.dialogDOMElement = new Core.DialogWindowDOMElement
    },
    button1Clicked: function() {
        var e = this.model.readData("currentDialogConfig");
        this.handleButtonClick(e.buttons[0], !e.fatal)
    },
    button2Clicked: function() {
        var e = this.model.readData("currentDialogConfig");
        this.handleButtonClick(e.buttons[1], !e.fatal)
    },
    handleButtonClick: function(e, t) {
        e && e.action && e.action.call(e.scope || window), t && this.closeCurrentDialog()
    },
    hideGame: function() {
        document.getElementById("gameWrapper").classList.add("hideGame"), this.fireEvent("view:pauseGame")
    },
    showDialog: function(e) {
        var t = this,
            o = t.dialogDOMElement;
        o.setTitle(e.title), o.setMessage(e.text), o.setScrollable(o.text.el.textContent.length > 150), o.hideButtons(), Sys.isArray(e.buttons) && (2 === e.buttons.length ? o.showDualButtons(e.buttons[0].text, e.buttons[1].text) : 1 === e.buttons.length && o.showSingleButton(e.buttons[0].text)), t.model.storeData("currentDialogConfig", e), t.model.setState("showing"), t.fireEvent("view:showingDialog"), o.show(), Services.storage.storeData("dialog.showing", !0), t.dialogDOMElement.scroll.show(), t.dialogDOMElement.scroll.scrollTo(0, 0, !1), Sys.isDefined(e.hideGame) && e.hideGame && t.hideGame()
    },
    getButtonFromCoordinate: function(e) {
        var t, o, n = this,
            i = Sys.UserInputUtils.getDOMElementFromCoordinates(e),
            l = n.dialogDOMElement.singleButton.getContainer().el,
            s = n.dialogDOMElement.leftDualButton.getContainer().el,
            a = n.dialogDOMElement.rightDualButton.getContainer().el;
        switch (Sys.UserInputUtils.isParentAndChildElements(l, i) && (t = l), !Sys.isDefined(t) && Sys.UserInputUtils.isParentAndChildElements(s, i) && (t = s), !Sys.isDefined(t) && Sys.UserInputUtils.isParentAndChildElements(a, i) && (t = a), t) {
            case l:
            case s:
                o = n.button1Clicked.bind(n);
                break;
            case a:
                o = n.button2Clicked.bind(n);
                break;
            default:
                return
        }
        return {
            element: t,
            action: o
        }
    },
    showNextDialog: function() {
        var e = this.model.getNextDialogConfig();
        e && this.showDialog(e)
    },
    closeCurrentDialog: function() {
        this.dialogDOMElement.close(), this.model.setState("idle"), this.fireEvent("view:dialogShown", this.model.readData("currentDialogConfig")), Services.storage.storeData("dialog.showing", !1)
    },
    handleScrolling: function(e, t, o) {
        var n = this;
        if (n.dialogDOMElement.scroll) switch (e) {
            case "start":
                n.dialogDOMElement.scroll.onUserInputStart(t);
                break;
            case "end":
                n.dialogDOMElement.scroll.onUserInputEnd(t);
                break;
            case "move":
                n.dialogDOMElement.scroll.onUserInputMove(t);
                break;
            case "scroll":
                n.dialogDOMElement.scroll.onUserInputScroll(t, o);
                break;
            case "orientation":
                n.dialogDOMElement.scroll.show()
        }
    },
    resize: function() {
        this.dialogDOMElement.resize()
    }
}, Core.DialogWindowView = Sys.extend(Core.View, Core.DialogWindowView, "Core.DialogWindowView");
Sys.ns("Gui"), Core.DialogWindowDOMElement = {
    constructor: function() {
        var t = this;
        t.initParentAsWrapper(), t.initContainer(), t.initTitle(), t.initText(), t.initButtonContainer(), t.initSingleButton(), t.initDualButtons()
    },
    initParentAsWrapper: function() {
        var t;
        Core.DialogWindowDOMElement.superclass.constructor.call(this, {
            tag: "div",
            id: "dialogWindowWrapper",
            cls: "dialogWindowWrapper hidden"
        }), t = this.getEl(), this.resize(), document.body.appendChild(t)
    },
    initContainer: function() {
        this.container = new Sys.Element({
            tag: "div",
            id: "dialogWindowContainer",
            cls: "dialogWindowContainer"
        }), this.add(this.container)
    },
    initTitle: function() {
        this.title = this.container.add(new Sys.Element({
            tag: "div",
            id: "dialogWindowTitle",
            cls: "dialogWindowTitle"
        }))
    },
    initText: function() {
        var t = this;
        t.text = new Sys.Element({
            tag: "div",
            id: "dialogWindowText",
            cls: "dialogWindowText"
        }), t.scroll = new Interface.utils.DOMScrollableContent({
            content: t.text,
            id: "dialogWindowScroll",
            CSS: {
                base: "dialogWindowScrollWrapper"
            }
        }), t.container.add(t.scroll.container), t.scroll.addScrollBar(), t.scroll.enable()
    },
    initButtonContainer: function() {
        this.buttonContainer = new Sys.Element({
            tag: "div",
            id: "dialogWindowButtonContainer",
            cls: "dialogWindowButtonContainer"
        }), this.container.add(this.buttonContainer)
    },
    initSingleButton: function() {
        this.singleButton = new Interface.utils.Button({
            id: "dialogWindowSingleButton",
            CSS: {
                base: "button dialogWindowSingleButton"
            },
            hidden: !0
        }), this.buttonContainer.add(this.singleButton.getContainer())
    },
    initDualButtons: function() {
        var t = this;
        t.leftDualButton = new Interface.utils.Button({
            id: "dialogWindowLeftDualButton",
            CSS: {
                base: "button dialogWindowDualButton dialogWindowRightButton"
            },
            hidden: !0
        }), t.buttonContainer.add(t.leftDualButton.getContainer()), t.rightDualButton = new Interface.utils.Button({
            id: "dialogWindowRightDualButton",
            CSS: {
                base: "button dialogWindowDualButton dialogWindowLeftButton"
            },
            hidden: !0
        }), t.buttonContainer.add(t.rightDualButton.getContainer())
    },
    show: function() {
        this.removeCSSClass("hidden")
    },
    close: function() {
        this.addCSSClass("hidden")
    },
    setTitle: function(t) {
        this.title.el.textContent = t || ""
    },
    setMessage: function(t) {
        var n, i, e = this;
        Sys.isDefined(t) ? (n = e.parseHyperlink(t), i = new Sys.Element({
            tag: "p"
        }), i.addChildren(n), e.text.removeAll(), e.text.addChildren([i.el])) : e.text.el.textContent = ""
    },
    parseHyperlink: function(t) {
        var n, i, e = /\[([^\]]+)\]\(([^)]+)\)/,
            o = {
                started: "notify:userInputManager.dialogWindowExclusiveStart",
                ended: "notify:userInputManager.dialogWindowExclusiveEnd",
                move: "notify:userInputManager.dialogWindowExclusiveMove",
                hover: "notify:userInputManager.dialogWindowExclusiveHover"
            },
            l = 0;
        return t = t || "", n = t.split(/(\[[^\]]+\]\([^)]+\))/), n.forEach(function(t, a) {
            var d;
            a % 2 == 1 ? (d = e.exec(t), i = new Interface.utils.Button({
                id: "dialogWindow_link_" + l++,
                label: d[1],
                CSS: {
                    base: "dialogWindow_link"
                },
                clickCallback: function() {
                    Sys.utils.openURL(d[2])
                },
                userInputEvents: o
            }), i.enable(), n[a] = i.getContainer().getEl()) : n[a] = document.createTextNode(n[a])
        }), n
    },
    showSingleButton: function(t) {
        var n = this;
        n.singleButton.setText(t), n.singleButton.enable(), n.singleButton.show("inline-block"), n.leftDualButton.disable(), n.leftDualButton.hide(), n.rightDualButton.disable(), n.rightDualButton.hide()
    },
    showDualButtons: function(t, n) {
        var i = this;
        i.singleButton.disable(), i.singleButton.hide(), i.leftDualButton.setText(t), i.leftDualButton.enable(), i.leftDualButton.show("inline-block"), i.rightDualButton.setText(n), i.rightDualButton.enable(), i.rightDualButton.show("inline-block")
    },
    hideButtons: function() {
        var t = this;
        t.singleButton.disable(), t.singleButton.hide(), t.leftDualButton.disable(), t.leftDualButton.hide(), t.rightDualButton.disable(), t.rightDualButton.hide()
    },
    hideGame: function() {
        this.addCls("hideGame")
    },
    setScrollable: function(t) {
        t ? this.addCSSClass("scrollable") : this.removeCSSClass("scrollable")
    },
    resize: function() {
        var t = this,
            n = t.getEl(),
            i = Utils.Platform.getViewportInnerSize();
        Platform.isSafariBrowser && Platform.isIOS13Device && (n.style.height = i.height + "px", n.style.width = i.width + "px")
    }
}, Core.DialogWindowDOMElement = Sys.extend(Sys.Element, Core.DialogWindowDOMElement, "Core.DialogWindowDOMElement");
Sys.ns("Core"), Core.DialogWindowBaseView = {
    BASE_CSS: "interface-dialogWindow_base",
    PORTRAIT_CSS: "interface-dialogWindow_portrait",
    LANDSCAPE_CSS: "interface-dialogWindow_landscape",
    constructor: function() {
        var i = this;
        Core.DialogWindowBaseView.superclass.constructor.apply(i, arguments), i.container = i.dialogDOMElement
    },
    onPortrait: function() {
        var i = this;
        Mixins.orientation.view.methods.onPortrait.call(i)
    },
    onLandscape: function() {
        var i = this;
        Mixins.orientation.view.methods.onLandscape.call(i)
    },
    adaptToOrientation: function(i) {
        Mixins.orientation.view.methods.setStyle.call(this, i)
    }
}, Core.DialogWindowBaseView = Sys.extend(Core.DialogWindowView, Core.DialogWindowBaseView, "Core.DialogWindowBaseView");
Sys.ns("Core"), Core.DialogWindowMobileView = {
    PORTRAIT_CSS: "interface-dialogWindow-mobile_portrait",
    LANDSCAPE_CSS: "interface-dialogWindow-mobile_landscape",
    constructor: function() {
        Core.DialogWindowMobileView.superclass.constructor.apply(this, arguments), this.setScale()
    },
    refresh: function() {
        this.setScale()
    },
    setScale: function() {
        var e, i = Environment.determineResolution().resolution.pixelFactor,
            t = this.dialogDOMElement.el,
            o = this.dialogDOMElement.container.el,
            l = Sys.utils.getPrefixedCSSProperty("transform");
        Sys.isNumber(i) && (o.style[l] = "", o.style.height = "", o.style.width = "", e = 1 / (o.offsetWidth / Utils.Platform.getViewportInnerSize().width), Utils.Platform.isPortrait() ? (e = .95 * (isFinite(e) ? e : 1), o.style[l] = "scale(" + e.toFixed(1) + ")") : o.style[l] = "none", t.classList.contains("scrollable") ? (o.style[l] = "scale(" + 1 / i + ")", o.style.height = "calc(100% / " + 1 / i + ")", o.style.width = "calc(100% / " + 1 / i + ")") : (o.style.height = "", o.style.width = ""))
    }
}, Core.DialogWindowMobileView = Sys.extend(Core.DialogWindowBaseView, Core.DialogWindowMobileView, "Core.DialogWindowMobileView");
Sys.ns("Core"), Core.ResponseParser = {
    constructor: function() {
        Core.ResponseParser.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Core.ResponseParserController
        }
    }
}, Core.ResponseParser = Sys.extend(Core.Module, Core.ResponseParser, "Core.ResponseParser");
Sys.ns("Core"), Core.ResponseParserController = {
    constructor: function() {
        Core.ResponseParserController.superclass.constructor.apply(this, arguments)
    },
    init: function() {
        var e = Resources.readData("unParsedGameServerInitResponse") || "";
        Core.ResponseParserController.superclass.init.apply(this, arguments), this.doIntegrationSpecificResponseHandling(this.parseServerResponse(e))
    },
    setupEvents: function() {
        this.on({
            "notify:serverManager.serverResponseReceived": this.parseAndBroadcastServerResponse
        })
    },
    parseAndBroadcastServerResponse: function(e, r) {
        var s = Sys.isDefined(r) ? r : "notify:responseParser.responseParsed",
            n = this.doIntegrationSpecificResponseHandling(this.parseServerResponse(e.responseText));
        0 === e.responseText.trim().length ? this.fireEvent("request:errorManager.handleError") : Object.keys(n).length > 1 && this.fireEvent(s, n, e)
    },
    parseServerResponse: function(e) {
        return Sys.utils.parseQueryString(e, !0)
    },
    doIntegrationSpecificResponseHandling: function(e) {
        return e
    }
}, Core.ResponseParserController = Sys.extend(Core.Controller, Core.ResponseParserController, "Core.ResponseParserController");
Sys.ns("Core"), Core.ErrorManager = {
    constructor: function() {
        Core.ErrorManager.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Core.ErrorManagerController,
            model: Core.ErrorManagerModel
        }
    }
}, Core.ErrorManager = Sys.extend(Core.Module, Core.ErrorManager, "Core.ErrorManager");
Sys.ns("Core"), Core.ErrorManagerModel = {
    constructor: function() {
        Core.ErrorManagerModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = Resources.readData("queryData"),
            a = Sys.isDefined(e.depositAvailable) && !0 === e.depositAvailable;
        this.storeData("depositAvailable", a), this.storeData("dialogConfig", this.setupDialogConfig(a))
    },
    setupDialogConfig: function(e) {
        var a = {};
        return a.http = {
            title: Services.languageManager.getText(Language.Keys.connectionLost),
            text: Services.languageManager.getText(Language.Keys.reload),
            buttons: [{
                type: "casino",
                reason: "9"
            }, {
                type: "reload"
            }],
            fatal: !0
        }, a[11] = {
            title: Services.languageManager.getText(Language.Keys.playLimit),
            text: Services.languageManager.getText("11"),
            buttons: [{
                type: "casino",
                reason: "11"
            }]
        }, a[12] = {
            title: Services.languageManager.getText(Language.Keys.freeRounds_expired),
            buttons: [{
                type: "casino"
            }],
            fatal: !0
        }, a[13] = {
            title: Services.languageManager.getText(Language.Keys.playLimit),
            text: Services.languageManager.getText("13"),
            buttons: [{
                type: "reduceBetAndRevertSpin"
            }, {
                type: "closeAndRevertSpin"
            }]
        }, Sys.each([14, 16], function(e) {
            a[e] = {
                text: Services.languageManager.getText(Language.Keys.freeRoundsOfferUsed),
                buttons: [{
                    type: "closeBonusProgramWidget"
                }]
            }
        }), a[20] = {
            title: Services.languageManager.getText(Language.Keys.sessionTimeOut),
            text: Services.languageManager.getText(Language.Keys.returnToLobby),
            buttons: [{
                type: "casino",
                reason: "3"
            }],
            fatal: !0
        }, Sys.each([10, 15, 51, 100, 101, 102], function(t) {
            a[t] = {
                title: Services.languageManager.getText(Language.Keys.outOfMoney),
                text: Services.languageManager.getText(Language.Keys.deposit),
                buttons: e ? [{
                    type: "deposit"
                }, {
                    type: "reduceBetAndRevertSpin"
                }] : [{
                    type: "casino"
                }, {
                    type: "reduceBetAndRevertSpin"
                }]
            }
        }), Sys.each([0, 53, 56, 58], function(e) {
            a[e] = {
                title: Services.languageManager.getText(Language.Keys.gameUnavailable) + " (" + e + ")",
                buttons: [{
                    type: "casino",
                    reason: "9"
                }, {
                    type: "reload"
                }],
                fatal: !0
            }
        }), a[70] = {
            title: Services.languageManager.getText(Language.Keys.accountUnavailable),
            buttons: [{
                type: "casino"
            }, {
                type: "reload"
            }],
            fatal: !0
        }, a.generic = {
            title: Services.languageManager.getText(Language.Keys.error),
            text: Services.languageManager.getText(Language.Keys.returnToLobby),
            buttons: [{
                type: "casino",
                reason: "9"
            }],
            fatal: !0,
            hideGame: !0
        }, a.gameInactive = {
            title: Services.languageManager.getText(Language.Keys.gameUnavailable),
            text: Services.languageManager.getText(Language.Keys.lostConnectInactivity),
            buttons: [{
                type: "casino",
                reason: "9"
            }, {
                type: "reload"
            }],
            fatal: !0,
            hideGame: !0
        }, a
    },
    getDialogConfig: function(e) {
        var a, t = this.readData("dialogConfig");
        return a = Sys.isDefined(t[e]) ? t[e] : t.generic, a.errorCode = e, a
    },
    setUpOutOfMoneyErrorConfig: function() {
        var e, a, t = Services.languageManager.getText(Language.Keys.outOfMoney),
            n = this.readData("depositAvailable"),
            g = Services.moneyManager.getBalanceCents(),
            r = Services.moneyManager.getMinimumBetCents();
        return g >= r ? n ? (e = Services.languageManager.getText(Language.Keys.deposit), a = [{
            type: "deposit"
        }, {
            type: "reduceBet"
        }]) : (e = Services.languageManager.getText(Language.Keys.reduce), a = [{
            type: "reduceBet"
        }, {
            type: "close"
        }]) : (e = Services.languageManager.getText(Language.Keys.depositPlay), a = n ? [{
            type: "deposit"
        }, {
            type: "close"
        }] : [{
            type: "close"
        }]), {
            title: t,
            text: e,
            buttons: a,
            errorCode: 100
        }
    }
}, Core.ErrorManagerModel = Sys.extend(Core.Model, Core.ErrorManagerModel, "Core.ErrorManagerModel");
Sys.ns("Core"), Core.ErrorManagerController = {
    constructor: function() {
        Core.ErrorManagerController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "request:errorManager.handleError": this.showDialogForErrorCode,
            "request:errorManager.handleRequestError": this.handleRequestError,
            "request:errorManager.handleGameInactive": this.handleGameInactive,
            "request:errorManager.handleClientOutOfMoneyError": this.handleClientOutOfMoneyError
        })
    },
    showDialog: function(e) {
        var t = "http" === e.errorCode ? 0 : e.errorCode;
        this.fireEvent("notify:errorManager.error", t, Services.languageManager.getText(t)), this.fireEvent("request:dialogWindow.showDialog", e)
    },
    showDialogForErrorCode: function(e) {
        this.showDialog(this.getDialogConfig(e))
    },
    handleRequestError: function(e) {
        var t = this.handleHttpErrors(e);
        t || (t = this.handleIntegrationSpecificErrors(e)), t || (t = this.handleGameSpecificErrors(e)), t || (t = this.handleServerErrors(e)), t ? (t.fatal && this.fireEvent("request:audioPlayer.stopAll"), this.showDialog(t)) : this.fireEvent("notify:errorManager.noErrorDetected")
    },
    handleHttpErrors: function(e) {
        if (!Sys.utils.httpRequestIsOK(e)) return this.getDialogConfig("http")
    },
    handleIntegrationSpecificErrors: function(e) {},
    handleGameSpecificErrors: function(e) {},
    handleServerErrors: function(e) {
        var t = Sys.utils.getErrorCode(e);
        if (Sys.isDefined(t)) return this.getDialogConfig(t)
    },
    handleGameInactive: function() {},
    handleClientOutOfMoneyError: function() {
        var e = this.model.setUpOutOfMoneyErrorConfig();
        e.buttons = this.getButtons(e.buttons), this.showDialog(e)
    },
    getDialogConfig: function(e) {
        var t = this.model.getDialogConfig(e);
        return {
            title: t.title,
            text: t.text,
            buttons: this.getButtons(t.buttons),
            fatal: Boolean(t.fatal),
            hideGame: Boolean(t.hideGame),
            errorCode: e
        }
    },
    getButtons: function(e) {
        var t = this;
        return e.map(function(e) {
            return t.getButton(e)
        })
    },
    getButton: function(e) {
        var t = this,
            r = e.type;
        switch (r) {
            case "casino":
                return {
                    text: Services.languageManager.getText(Language.Keys.btn_casino), action: function() {
                        t.onButtonInteraction("home"), Sys.utils.goToLobby(e.reason)
                    }
                };
            case "reload":
                return {
                    text: Services.languageManager.getText(Language.Keys.btn_reload), action: function() {
                        t.onButtonInteraction(r), Sys.utils.reload()
                    }
                };
            case "close":
                return {
                    text: Services.languageManager.getText(Language.Keys.btn_close), action: function() {
                        t.onButtonInteraction(r)
                    }
                };
            case "closeBonusProgramWidget":
                return {
                    text: Services.languageManager.getText(Language.Keys.btn_close), action: function() {
                        t.onButtonInteraction(r), t.closeBonusProgramWidget()
                    }
                };
            case "closeAndRevertSpin":
                return {
                    text: Services.languageManager.getText(Language.Keys.btn_close), action: function() {
                        t.onButtonInteraction(r), t.revertSpin()
                    }
                };
            case "reduceBetAndRevertSpin":
                return {
                    text: Services.languageManager.getText(Language.Keys.btn_reduceBet), action: function() {
                        t.onButtonInteraction(r), t.revertSpin(), t.openBetSettings()
                    }
                };
            case "reduceBet":
                return {
                    text: Services.languageManager.getText(Language.Keys.btn_reduceBet), action: function() {
                        t.onButtonInteraction(r), t.openBetSettings()
                    }
                };
            case "deposit":
                return {
                    text: Services.languageManager.getText(Language.Keys.btn_deposit), action: function() {
                        t.onButtonInteraction(r), Services.moneyManager.reloadBalance(), Sys.utils.goToCashier()
                    }
                };
            default:
                return {
                    text: "[ERROR]", action: function() {
                        console.error("this button was not correctly configured in the error manager")
                    }
                }
        }
    },
    openBetSettings: function() {
        this.fireEvent("request:betSettings.show")
    },
    revertSpin: function() {
        this.fireEvent("request:moneyManager.revertBet"), this.fireEvent("request:spin.activateDefaultOutcome", "basic")
    },
    closeBonusProgramWidget: function() {
        this.fireEvent("notify:bonusProgramWidget.close")
    },
    onButtonInteraction: function(e) {
        this.fireEvent("notify:errorManager.errorDialogClosed"), this.fireEvent("notify:dialogBoxClosed", {
            name: "error",
            button: e
        })
    }
}, Core.ErrorManagerController = Sys.extend(Core.Controller, Core.ErrorManagerController, "Core.ErrorManagerController");
Sys.ns("Core"), Core.ErrorManagerDesktopModel = {
    constructor: function() {
        Core.ErrorManagerDesktopModel.superclass.constructor.apply(this, arguments)
    },
    setUpOutOfMoneyErrorConfig: function() {
        var e, t = Services.languageManager.getText(Language.Keys.outOfMoney),
            r = Services.moneyManager.getBalanceCents(),
            o = Services.moneyManager.getMinimumBetCents(),
            a = [{
                type: "close"
            }];
        return e = r >= o ? Services.languageManager.getText(Language.Keys.reduce) : Services.languageManager.getText(Language.Keys.depositPlay), {
            title: t,
            text: e,
            buttons: a,
            errorCode: 100
        }
    },
    setupDialogConfig: function(e) {
        var t = Core.ErrorManagerDesktopModel.superclass.setupDialogConfig.apply(this, arguments);
        return t.http.buttons = [{
            type: "reload"
        }], t[11].buttons = [{
            type: "reload"
        }], t[12].buttons = [{
            type: "reload"
        }], t[13].buttons = [{
            type: "closeAndRevertSpin"
        }], t[20].buttons = [], t[20].text = Services.languageManager.getText("20"), Sys.each([10, 15, 51, 100, 101, 102], function(e) {
            t[e].buttons = [{
                type: "closeAndRevertSpin"
            }]
        }), Sys.each([0, 53, 56, 58], function(e) {
            t[e].buttons = [{
                type: "reload"
            }]
        }), t[70].buttons = [{
            type: "reload"
        }], t.generic.buttons = [{
            type: "reload"
        }], t.generic.text = Services.languageManager.getText(Language.Keys.reload), t.gameInactive.buttons = [{
            type: "reload"
        }], t
    }
}, Core.ErrorManagerDesktopModel = Sys.extend(Core.ErrorManagerModel, Core.ErrorManagerDesktopModel, "Core.ErrorManagerDesktopModel");
Sys.ns("Core"), Core.LocalStorageManager = {
    constructor: function() {
        Core.LocalStorageManager.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.LocalStorageManagerModel,
            controller: Core.LocalStorageManagerController
        }
    }
}, Core.LocalStorageManager = Sys.extend(Core.Module, Core.LocalStorageManager, "Core.LocalStorageManager");
Sys.ns("Core"), Core.LocalStorageManagerController = {
    constructor: function() {
        Core.LocalStorageManagerController.superclass.constructor.apply(this, arguments)
    },
    storeData: function(o, r) {
        this.model.writeToStorage(o, r)
    },
    readData: function(o) {
        return this.model.readFromStorage(o)
    },
    removeData: function(o) {
        this.model.removeFromStorage(o)
    },
    hasData: function(o) {
        return this.model.hasData(o)
    }
}, Core.LocalStorageManagerController = Sys.extend(Core.Controller, Core.LocalStorageManagerController, "Core.LocalStorageManagerController");
Sys.ns("Core"), Core.LocalStorageManagerModel = {
    constructor: function() {
        Core.LocalStorageManagerModel.superclass.constructor.apply(this, arguments)
    },
    writeToStorage: function(e, t) {
        this.readData("storageActive") && "string" == typeof e && "string" == typeof t && this._setItemInStorage(this.accessKey + e, t)
    },
    readFromStorage: function(e) {
        var t = this;
        if (t.readData("storageActive")) {
            if (!Sys.isDefined(e)) return t.getAllData();
            if ("string" == typeof e) return t._getItemFromStorage(t.accessKey + e)
        }
        return !1
    },
    removeFromStorage: function(e) {
        this.readData("storageActive") && "string" == typeof e && this._removeItemFromStorage(this.accessKey + e)
    },
    hasData: function(e) {
        return !(!Sys.isDefined(e) || "string" != typeof this.readFromStorage(e))
    },
    setupData: function() {
        var e = Resources.readData("queryData");
        this.accessKey = "netent." + e.operatorId + "." + e.gameId + ".", this.storeData("storageActive", this.isLocalStorageSupported())
    },
    createAccessKey: function(e, t, r) {
        if (Sys.isDefined(e) && Sys.isDefined(t) && Sys.isDefined(r)) return this.hashValue(e + "." + t + "." + r) + "."
    },
    activate: function() {
        this.storeData("storageActive", !0)
    },
    deactivate: function() {
        this.storeData("storageActive", !1)
    },
    getAllData: function() {
        for (var e = this, t = {}, r = 0, a = e._getKeyFromStorage(r); a;) 0 === a.indexOf(e.accessKey) && (t[a.replace(e.accessKey, "")] = e._getItemFromStorage(a)), ++r, a = e._getKeyFromStorage(r);
        return t
    },
    hashValue: function(e) {
        var t, r, a = 2285455121;
        if ("string" != typeof e) return null;
        for (r = 0, t = e.length; r < t; r++) a += e.charCodeAt(r) * (r + 1);
        return a
    },
    isLocalStorageSupported: function() {
        try {
            return "object" == typeof window.localStorage && (this._setItemInStorage("availabilityCheck", "true"), this._removeItemFromStorage("availabilityCheck"), !0)
        } catch (e) {
            return !1
        }
    },
    _setItemInStorage: function(e, t) {
        localStorage.setItem(e, t)
    },
    _removeItemFromStorage: function(e) {
        localStorage.removeItem(e)
    },
    _getItemFromStorage: function(e) {
        return localStorage.getItem(e)
    },
    _getKeyFromStorage: function(e) {
        return localStorage.key(e)
    }
}, Core.LocalStorageManagerModel = Sys.extend(Core.Model, Core.LocalStorageManagerModel, "Core.LocalStorageManagerModel");
Sys.ns("Core"), Core.AutoPlayer = {
    constructor: function() {
        Core.AutoPlayer.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.AutoPlayerModel,
            controller: Core.AutoPlayerController
        }
    }
}, Core.AutoPlayer = Sys.extend(Core.Module, Core.AutoPlayer, "Core.AutoPlayer");
Sys.ns("Core"), Core.AutoPlayerController = {
    constructor: function() {
        Core.AutoPlayerController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "request:autoPlayer.stop": this.stop,
            "request:autoPlayer.pause": this.pause,
            "request:autoPlayer.start": this.start,
            "request:autoPlayer.resume": this.resume,
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:serverManager.serverErrorReceived": this.stop,
            "notify:stateHandler.leavingIdleState": this.onLeavingIdleState,
            "notify:stateHandler.enteringIdleState": this.onEnteringIdleState,
            "notify:stateHandler.enteringStandardWinPresentationState": this.onEnteringWinPresentationState,
            "notify:stateHandler.enteringBigWinState": this.onEnteringWinPresentationState,
            "notify:spinButton.clicked": this.onSpinButtonClicked,
            "notify.dialogWindow.showingDialog": this.onShowingDialog,
            "notify:dialogWindow.allDialogsClosed": this.onAllDialogsClosed,
            "notify:settingsManager.settingChanged": this.onSettingChanged,
            "notify:errorManager.error": this.stop
        })
    },
    onServerResponse: function(e) {
        this.model.processServerResponse(e)
    },
    playRound: function() {
        this.model.readData("nrRounds") > 0 && this.requestRoundStart()
    },
    start: function() {
        this.play(), !this.model.readData("spinning") && this.model.readData("isBasicState") && this.requestRoundStart()
    },
    stop: function() {
        this.model.isState("STOPPED") || (this.fireEvent("request:spinButton.removeProperty", "visibleDuringRound", this.MODULE_NAME), this.fireEvent("request:spinButton.hideCounter"), this.fireEvent("request:spinButton.removeDisplayType", "autoPlay"), this.fireEvent("request:spinButton.removeDisplayType", "autoPlayStop"), this.fireEvent("request:quickStopper.enableInMode", "autoPlay"), this.fireEvent("request:playModeManager.removeMode", "autoplay"), this.model.setState("STOPPED"), this.model.storeData("nrRounds", 0), this.fireEvent("request:settingsManager.storeData", "autoPlayNrSpins", 0), this.fireEvent("request:spinButton.enable", this.MODULE_NAME), this.fireEvent("request:settingsButton.enable", this.MODULE_NAME), this.fireEvent("request:pluginMenu.enable", this.MODULE_NAME), this.fireEvent("request:betSettings.enable", this.MODULE_NAME), this.fireEvent("request:maxBetButton.enable", this.MODULE_NAME), this.fireEvent("notify:autoPlayer.stopped"))
    },
    pause: function() {
        this.model.isState("PLAYING") && this.model.setState("PAUSED")
    },
    resume: function() {
        var e = this;
        this.model.isState("PAUSED") && (this.model.setState("PLAYING"), e.model.readData("spinning") || e.playRound())
    },
    play: function() {
        var e = this;
        !e.model.isState("PLAYING") && e.model.readData("nrRounds") > 0 && (e.model.setState("PLAYING"), e.fireEvent("request:spinButton.removeDisplayType", "autoPlay"), e.fireEvent("request:spinButton.addDisplayType", "autoPlayStop"), e.fireEvent("request:quickStopper.disableInMode", "autoPlay"), e.fireEvent("request:spinButton.disable", e.MODULE_NAME), e.fireEvent("request:betSettings.disable", e.MODULE_NAME), e.fireEvent("request:maxBetButton.disable", e.MODULE_NAME), e.fireEvent("request:settingsButton.disable", e.MODULE_NAME), e.fireEvent("request:pluginMenu.disable", e.MODULE_NAME), e.fireEvent("notify:autoPlayer.starting"), e.fireEvent("request:playModeManager.addMode", "autoplay"))
    },
    onSpinButtonClicked: function(e) {
        return (!Sys.isDefined(e) || !e.hasOwnProperty("skip") || !0 !== e.skip) && ((this.model.isState("PLAYING") || this.model.isState("PAUSED") || this.model.isState("STOPPING")) && this.stop(), !0)
    },
    onEnteringIdleState: function() {
        var e = this,
            t = e.model;
        t.storeData("spinning", !1), t.isState("PLAYING") && e.playRound(), t.isState("STOPPING") && e.stop(), t.isState("WAITING") && (e.fireEvent("request:playModeManager.addMode", "autoplay"), e.play(), e.requestRoundStart())
    },
    onLeavingIdleState: function() {
        var e = this;
        e.model.storeData("spinning", !0), e.model.isState("WAITING") && (e.fireEvent("request:playModeManager.addMode", "autoplay"), e.play()), e.model.isState("PLAYING") && e.fireEvent("request:spinButton.updateCounter", e.model.readData("nrRounds"))
    },
    onEnteringWinPresentationState: function() {
        var e = this;
        e.model.isState("STOPPING") && Services.settingsManager.getSetting("autoPlayNrSpins") > 0 && e.fireEvent("request:settingsManager.storeData", "autoPlayNrSpins", 0)
    },
    onShowingDialog: function() {
        this.model.readData("nrRounds") > 0 && this.pause()
    },
    onAllDialogsClosed: function() {
        this.model.readData("nrRounds") > 0 && this.resume()
    },
    reduceNumberOfRounds: function() {
        this.model.playRound(), this.fireEvent("request:spinButton.updateCounter", this.model.readData("nrRounds")), this.fireEvent("notify:autoPlayer.reduceCounter", this.model.readData("nrRounds"))
    },
    onSettingChanged: function(e, t) {
        var n = this;
        "autoPlayNrSpins" === e && t !== n.model.readData("nrRounds") ? (n.model.storeData("nrRounds", t), 0 === t ? n.stop() : (n.fireEvent("notify:autoPlayer.enabled", t), n.fireEvent("request:spinButton.showCounter", t), n.fireEvent("request:spinButton.addDisplayType", "autoPlay"), n.fireEvent("request:spinButton.addProperty", "visibleDuringRound", n.MODULE_NAME), n.model.setState("WAITING"), n.model.storeData("startingBalance", Services.moneyManager.getBalanceCents()))) : ["stopAutoplayIfBalanceIncreasedBy", "stopAutoplayIfBalanceDecreasedBy", "stopAutoplayOnAnyWin", "stopAutoplayIfWinExceeds"].contains(e) && n.model.storeData(e, t)
    },
    requestRoundStart: function() {
        this.reduceNumberOfRounds(), this.fireEvent("notify:autoPlayer.startRound", this.model.readData("nrRounds")), this.fireEvent("request:spinButton.startRound")
    }
}, Core.AutoPlayerController = Sys.extend(Core.Controller, Core.AutoPlayerController, "Core.AutoPlayerController");
Sys.ns("Core"), Core.AutoPlayerModel = {
    constructor: function() {
        Core.AutoPlayerModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        this.storeData("nrRounds", 0), this.storeData("spinning", !0), this.storeData("startingBalance", 0), this.storeData("stopAutoplayIfBalanceIncreasedBy", !1), this.storeData("stopAutoplayIfBalanceDecreasedBy", !1), this.storeData("stopAutoplayOnAnyWin", !1), this.storeData("stopAutoplayIfWinExceeds", !1), this.setState("STOPPED")
    },
    playRound: function() {
        var t = this.readData("nrRounds") - 1;
        t <= 0 && (t = 0, this.setState("STOPPING")), this.storeData("nrRounds", t)
    },
    storeData: function(t, a) {
        Core.AutoPlayerModel.superclass.storeData.apply(this, arguments), "nrRounds" === t && Services.storage.storeData("autoPlayer.roundsLeft", a)
    },
    shouldPlayAnotherRound: function() {
        return this.isState("PLAYING")
    },
    shouldStopAutoplay: function(t) {
        var a, e, s = this.readData("startingBalance"),
            o = this.readData("stopAutoplayIfBalanceIncreasedBy"),
            r = this.readData("stopAutoplayIfBalanceDecreasedBy"),
            n = this.readData("stopAutoplayOnAnyWin"),
            i = this.readData("stopAutoplayIfWinExceeds"),
            u = "spin" === t.nextaction ? Services.moneyManager.getBetCents() : 0;
        return Sys.isObj(t.wins) && (a = t.wins.cents, e = t.wins.centsTotal), !1 !== o && 0 !== o && t.credit >= s + o || (!1 !== r && 0 !== r && t.credit - u < s - r || (!0 === n && (a > 0 || e > 0) || !1 !== i && 0 !== i && (a >= i || e >= i)))
    },
    processServerResponse: function(t) {
        var a = t.gamestate || {};
        !this.isState("STOPPED") && this.shouldStopAutoplay(t) && this.setState("STOPPING"), this.storeData("isBasicState", "basic" === a.current)
    }
}, Core.AutoPlayerModel = Sys.extend(Core.Model, Core.AutoPlayerModel, "Core.AutoPlayerModel");
Sys.ns("Core"), Core.G4 = {
    constructor: function() {
        Core.G4.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.G4Model,
            view: Core.View,
            controller: Core.G4Controller
        }
    },
    getStateChanges: function() {
        var e = this.model;
        return {
            minimumRoundTimeEnforcement: {
                state: {
                    name: "MinimumRoundTimeEnforcement",
                    execute: function(e) {},
                    waitEvents: {
                        "notify:g4.minimumRoundTimePassed": !1
                    }
                }
            },
            stopped: {
                queue: [function(n) {
                    e.isG4() && e.isNewRound() && n.stateHandler.pushState(n.states.minimumRoundTimeEnforcement)
                }]
            }
        }
    }
}, Core.G4 = Sys.extend(Core.Module, Core.G4, "Core.G4");
Sys.ns("Core"), Core.G4Model = {
    constructor: function() {
        Core.G4Model.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var t = Resources.readData("gameServerInitResponse") || {};
        this.storeData("isG4", t.g4mode), this.storeData("G4Config", this.setupG4Config()), this.storeData("isNewRound", !1), this.storeData("roundTimeLimit", 3e3), this.storeData("disabledDuringRound", !1)
    },
    isG4: function() {
        return this.readData("isG4")
    },
    setupG4Config: function() {
        return {
            settings: [{
                name: "quickSpin",
                enabled: !1,
                offValue: !1
            }],
            modules: [{
                name: "systemClock",
                enabled: !0
            }, {
                name: "quickStopper",
                enabled: !1
            }]
        }
    },
    getMinimumTimeLeft: function() {
        var t = this.getRoundStartTime() + this.readData("roundTimeLimit"),
            e = t - Date.now();
        return e > 0 ? e : 0
    },
    isNewRound: function() {
        return this.readData("isNewRound")
    },
    setRoundStartTime: function() {
        var t = Date.now();
        this.storeData("roundStartTime", t)
    },
    getRoundStartTime: function() {
        return this.readData("roundStartTime")
    },
    getG4Config: function(t) {
        var e = this.readData("G4Config");
        if (e.hasOwnProperty(t)) return e[t]
    }
}, Core.G4Model = Sys.extend(Core.Model, Core.G4Model, "Core.G4Model");
Sys.ns("Core"), Core.G4DesktopModel = {
    constructor: function() {
        Core.G4DesktopModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        Core.G4DesktopModel.superclass.setupData.apply(this, arguments), this.storeData("disabledDuringRound", !0)
    }
}, Core.G4DesktopModel = Sys.extend(Core.G4Model, Core.G4DesktopModel, "Core.G4DesktopModel");
Sys.ns("Core"), Core.G4Controller = {
    constructor: function() {
        Core.G4Controller.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "notify:stateHandler.enteringBeforeLoaderCloseState": e.initG4IfActive,
            "notify:stateHandler.enteringMinimumRoundTimeEnforcementState": e.minimumRoundTimeEnforcement,
            "notify:stateHandler.enteringSpinningState": e.onStartSpin
        })
    },
    initG4IfActive: function() {
        var e, t = this;
        t.model.readData("isG4") && (e = t.model.readData("G4Config"), t.requestModuleChanges(e.modules), t.requestSettingChanges(e.settings), t.model.readData("disabledDuringRound") && t.fireEvent("request:spinButton.addProperty", "disabledDuringRound", t.MODULE_NAME))
    },
    minimumRoundTimeEnforcement: function() {
        var e, t, n, i = this;
        i.model.isNewRound() && (n = i.model.getMinimumTimeLeft(), t = i.model.readData("roundExtensionTimer"), n > 0 ? (Sys.isDefined(t) && clearTimeout(t), e = setTimeout(function() {
            i.fireEvent("notify:g4.minimumRoundTimePassed")
        }, n), i.model.storeData("roundExtensionTimer", e)) : i.fireEvent("notify:g4.minimumRoundTimePassed"))
    },
    onStartSpin: function() {
        this.model.storeData("isNewRound", !0), this.model.setRoundStartTime()
    },
    requestSettingChanges: function(e) {
        var t = this;
        Sys.each(e, function(e) {
            e.enabled ? t.dispatchRequestEnableSettingEvent(e.name) : e.enabled || t.dispatchRequestDisableSettingEvent(e.name, e.offValue)
        })
    },
    requestModuleChanges: function(e) {
        var t = this;
        Sys.each(e, function(e) {
            e.enabled ? t.dispatchRequestEnableModuleEvent(e.name) : e.enabled || t.dispatchRequestDisableModuleEvent(e.name)
        })
    },
    dispatchRequestDisableSettingEvent: function(e, t) {
        var n = this;
        Sys.isDefined(t) && n.fireEvent("request:settingsManager.storeValue", e, t), n.fireEvent("request:settingsManager.disableSetting", e), n.fireEvent("request:settingsManager.lockSetting", e, n.MODULE_NAME)
    },
    dispatchRequestEnableSettingEvent: function(e) {
        this.fireEvent("request:settingsManager.enableSetting", e)
    },
    dispatchRequestDisableModuleEvent: function(e) {
        this.fireEvent("request:" + e + ".disableInMode", "g4")
    },
    dispatchRequestEnableModuleEvent: function(e) {
        this.fireEvent("request:" + e + ".enableInMode", "g4")
    }
}, Core.G4Controller = Sys.extend(Core.Controller, Core.G4Controller, "Core.G4Controller");
Sys.ns("Core"), Core.PlayModeManager = {
    constructor: function() {
        Core.PlayModeManager.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.PlayModeManagerModel,
            controller: Core.PlayModeManagerController
        }
    }
}, Core.PlayModeManager = Sys.extend(Core.Module, Core.PlayModeManager, "Core.PlayModeManager");
Sys.ns("Core"), Core.PlayModeManagerController = {
    USE_LOGGING: !1,
    constructor: function() {
        Core.PlayModeManagerController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "request:playModeManager.addMode": e.addMode,
            "request:playModeManager.removeMode": e.removeMode
        })
    },
    addMode: function(e) {
        this.model.addMode(e)
    },
    removeMode: function(e) {
        this.model.removeMode(e)
    }
}, Core.PlayModeManagerController = Sys.extend(Core.Controller, Core.PlayModeManagerController, "Core.PlayModeManagerController");
Sys.ns("Core"), Core.PlayModeManagerModel = {
    constructor: function() {
        Core.PlayModeManagerModel.superclass.constructor.apply(this, arguments)
    },
    addMode: function(e) {
        var o = this.readData("modes"); - 1 === o.indexOf(e) && (o.push(e), this.storeModeString())
    },
    removeMode: function(e) {
        var o = this.readData("modes"),
            t = o.indexOf(e);
        t >= 0 && (o.splice(t, 1), this.storeModeString())
    },
    getModeString: function() {
        var e, o = this.readData("modes"),
            t = o.length,
            r = "";
        for (e = -1; ++e < t;) r += (e > 0 ? "," : "") + o[e];
        return r
    },
    setupData: function() {
        this.storeData("modes", []), this.storeModeString()
    },
    storeModeString: function() {
        Services.storage.storeData(this.MODULE_NAME + ".modes", this.getModeString())
    }
}, Core.PlayModeManagerModel = Sys.extend(Core.Model, Core.PlayModeManagerModel, "Core.PlayModeManagerModel");
Sys.ns("Core.Slots"), Core.Slots.FreeRounds = {
    constructor: function() {
        Core.Slots.FreeRounds.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        var e = this.model;
        return {
            beforeLoaderClose: {
                queue: [function(o) {
                    e.hasFreeRounds() && !e.readData("hasShownSplash") && o.stateHandler.pushState(o.states.freeRoundsDialog)
                }]
            },
            stopped: {
                queue: [function(o) {
                    0 === e.readData("freeRoundsLeft") && o.stateHandler.pushState(o.states.checkForAdditionalFreeRounds)
                }]
            },
            checkForAdditionalFreeRounds: {
                state: {
                    name: "CheckForAdditionalFreeRounds",
                    execute: function() {},
                    waitEvents: {
                        "notify:responseParser.gameConfigurationParsed": !1
                    }
                }
            },
            freeRoundsDialog: {
                state: {
                    name: "FreeRoundsDialog",
                    execute: function() {},
                    waitEvents: {}
                }
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.Slots.FreeRoundsModel,
            controller: Core.Slots.FreeRoundsController
        }
    }
}, Core.Slots.FreeRounds = Sys.extend(Core.Module, Core.Slots.FreeRounds, "Core.Slots.FreeRounds");
Sys.ns("Core.Slots"), Core.Slots.FreeRoundsController = {
    constructor: function() {
        Core.Slots.FreeRoundsController.superclass.constructor.apply(this, arguments)
    },
    init: function() {
        Core.Slots.FreeRoundsController.superclass.init.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:stateHandler.enteringFreeRoundsDialogState": this.showEnforcedContinueDialog,
            "notify:stateHandler.enteringCheckForAdditionalFreeRoundsState": this.requestGameConfiguration,
            "notify:responseParser.responseParsed": this.onResponseParsed,
            "notify:responseParser.gameConfigurationParsed": this.onGameConfigurationParsed,
            "request:freeRounds.requestGameConfiguration": this.requestGameConfiguration
        })
    },
    onResponseParsed: function(e) {
        this.model.handleFreeRounds(e)
    },
    startFreeRounds: function() {
        this.freeRoundsStarted = !0, this.addListener("notify:stateHandler.enteringIdleState", this.onEnteringIdleState), this.addListener("notify:stateHandler.leavingIdleState", this.onLeavingIdleState), this.fireEvent("request:maxBetButton.disable", this.MODULE_NAME), this.fireEvent("request:betSettings.disable", this.MODULE_NAME), this.fireEvent("notify:freeRounds.started", this.model.readData("freeRoundsLeft")), this.setFreeroundModeParameter(!0), this.model.storeData("hasShownSplash", !0), this.model.storeData("totalFreeRounds", this.model.readData("freeRoundsLeft"))
    },
    endFreeRounds: function() {
        this.freeRoundsStarted = !1, this.showFreeRoundsEndDialog(), this.model.removeData("freeRoundsLeft"), this.removeListener("notify:stateHandler.enteringIdleState"), this.removeListener("notify:stateHandler.leavingIdleState"), this.fireEvent("request:maxBetButton.enable", this.MODULE_NAME), this.fireEvent("notify:freeRounds.ended")
    },
    setFreeroundModeParameter: function(e) {
        this.setExtraParameter("freeroundmode", e)
    },
    setExtraParameter: function(e, t) {
        var n = Resources.readData("extraParams");
        Sys.isObj(n) && (n[e] = t, Resources.storeData("extraParams", n))
    },
    onEnteringIdleState: function() {
        this.requestCounterUpdate()
    },
    onLeavingIdleState: function() {
        this.notifyFreeRoundsLeft()
    },
    notifyFreeRoundsLeft: function() {
        var e = this.model.readData("totalFreeRounds"),
            t = this.model.readData("freeRoundsLeft");
        this.fireEvent("notify:freeRounds.nextRound", e, t)
    },
    requestGameConfiguration: function() {
        this.fireEvent("request:autoPlayer.stop"), this.setFreeroundModeParameter(!1), this.fireEvent("request:serverManager.sendAction", "init", "notify:responseParser.gameConfigurationParsed", "notify:serverManager.reInitRequestFailed")
    },
    onGameConfigurationParsed: function(e, t) {
        var n = this,
            o = "spin" === e.nextaction;
        Resources.storeData("gameServerInitResponse", Sys.utils.qsToObj(t.responseText)), Resources.storeData("gameServerInitResponseObject", e), Resources.storeData("unParsedGameServerInitResponse", t.responseText), this.bonusProgramWidgetQueued = Boolean(e.freeRoundWidgetEnabled), this.bonusProgramWidgetActive = Boolean(Resources.readData("bonusProgramWidgetActive")), this.model.storeData("hasShownSplash", !1), this.model.handleFreeRounds(e), this.model.readData("freeRoundsLeft") > 0 ? (this.model.readData("isLowWinFreeRound") ? this.showExtraFreeRoundsDialog() : this.bonusProgramWidgetActive ? (this.fireEvent("notify:freeRounds.reInitResponseReceived", e), this.startFreeRounds(), Resources.removeData("bonusProgramWidgetActive")) : (this.showFreeRoundsEndDialog(), this.fireEvent("request:cashField.showBasicCashValues"), this.showEnforcedContinueDialog(function() {
            n.fireEvent("notify:dialogBoxClosed", {
                name: "freeRoundsStart",
                button: "continue"
            }), n.fireEvent("notify:freeRounds.reInitResponseReceived", e), n.startFreeRounds()
        })), this.requestCounterUpdate(), this.notifyFreeRoundsLeft(), this.setFreeroundModeParameter(!0)) : o ? this.freeRoundsStarted && this.endFreeRounds() : this.showFreeRoundsReloadDialog()
    },
    requestCounterUpdate: function() {
        Services.storage.storeData("freeRounds.roundsLeft", this.model.readData("freeRoundsLeft"))
    },
    closeFreeRoundsDialog: function() {
        this.fireEvent("notify:freeRounds.dialogClosed"), this.bonusProgramWidgetQueued && (this.fireEvent("notify:bonusProgramWidget.reInit", Resources.readData("gameServerInitResponse")), this.bonusProgramWidgetQueued = !1)
    },
    showExtraFreeRoundsDialog: function() {
        var e = this;
        e.requestDialog({
            title: Services.languageManager.getText(Language.Keys.freeRoundsExtraTitle),
            text: Services.languageManager.getText(Language.Keys.freeRoundsExtraWon, [this.model.readData("freeRoundsLeft")]),
            buttons: [{
                scope: this,
                text: Services.languageManager.getText(Language.Keys.continue),
                action: function() {
                    e.fireEvent("notify:dialogBoxClosed", {
                        name: "freeRoundsExtra",
                        button: "continue"
                    }), e.closeFreeRoundsDialog()
                }
            }]
        })
    },
    showFreeRoundsReloadDialog: function() {
        var e = this;
        e.requestDialog({
            title: Services.languageManager.getText(Language.Keys.freeRoundsFinished),
            text: Services.languageManager.getText(Language.Keys.roundsUseAcctMoney) + " " + Services.languageManager.getText(Language.Keys.reload),
            buttons: [{
                scope: this,
                text: Services.languageManager.getText(Language.Keys.btn_reload),
                action: function() {
                    e.fireEvent("notify:dialogBoxClosed", {
                        name: "freeRoundsReload",
                        button: "reload"
                    }), Sys.utils.reload()
                }
            }]
        })
    },
    showFreeRoundsEndDialog: function() {
        var e = this;
        e.requestDialog({
            title: Services.languageManager.getText(Language.Keys.freeRoundsFinished),
            text: Services.languageManager.getText(Language.Keys.roundsUseAcctMoney),
            buttons: [{
                scope: this,
                text: Services.languageManager.getText(Language.Keys.continue),
                action: function() {
                    e.fireEvent("notify:dialogBoxClosed", {
                        name: "freeRoundsEnd",
                        button: "continue"
                    }), e.closeFreeRoundsDialog()
                }
            }]
        })
    },
    showEnforcedContinueDialog: function(e) {
        var t = this;
        t.requestDialog({
            title: Services.languageManager.getText(Language.Keys.roundsLeft),
            text: Services.languageManager.getText(Language.Keys.haveFreeRounds, [this.model.readData("freeRoundsLeft")]),
            buttons: [{
                scope: this,
                text: Services.languageManager.getText(Language.Keys.continue),
                action: e || function() {
                    t.fireEvent("notify:dialogBoxClosed", {
                        name: "freeRoundsStart",
                        button: "continue"
                    }), t.startFreeRounds()
                }
            }]
        })
    },
    requestDialog: function(e) {
        this.fireEvent("request:dialogWindow.showDialog", e)
    }
}, Core.Slots.FreeRoundsController = Sys.extend(Core.Controller, Core.Slots.FreeRoundsController, "Core.Slots.FreeRoundsController");
Sys.ns("Core.Slots"), Core.Slots.FreeRoundsModel = {
    constructor: function() {
        Core.Slots.FreeRoundsModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = Resources.readData("gameServerInitResponseObject");
        this.storeData("hasShownSplash", !1), this.handleFreeRounds(e)
    },
    hasFreeRounds: function() {
        return this.readData("freeRoundsLeft") > 0
    },
    handleFreeRounds: function(e) {
        Sys.isNumber(e.freeRoundsLeft) ? (this.storeData("freeRoundsLeft", e.freeRoundsLeft), this.storeData("isLowWinFreeRound", e.isLowWinFreeRound)) : (this.removeData("freeRoundsLeft"), this.removeData("isLowWinFreeRound"))
    }
}, Core.Slots.FreeRoundsModel = Sys.extend(Core.Model, Core.Slots.FreeRoundsModel, "Core.Slots.FreeRoundsModel");
Sys.ns("Core.Slots"), Core.Slots.ServerManager = {
    constructor: function() {
        Core.Slots.ServerManager.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            spinning: {
                queue: [function(e) {
                    e.stateHandler.pushState(e.states.processServerResponse)
                }]
            },
            processServerResponse: {
                state: {
                    name: "ProcessServerResponse",
                    execute: function(e) {},
                    waitEvents: {}
                }
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.Slots.ServerManagerModel,
            view: Core.View,
            controller: Core.Slots.ServerManagerController
        }
    }
}, Core.Slots.ServerManager = Sys.extend(Core.Module, Core.Slots.ServerManager, "Core.Slots.ServerManager");
Sys.ns("Core.Slots"), Core.Slots.ServerManagerController = {
    constructor: function() {
        Core.Slots.ServerManagerController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        Core.Slots.ServerManagerController.superclass.setupEvents.apply(this, arguments), e.on({
            "notify:responseParser.responseParsed": e.storeNextAction,
            "notify:settingsManager.settingChanged": e.onSettingsChanged
        })
    },
    onSettingsChanged: function(e, t) {
        "betLevel" !== e && "denomination" !== e && "betLines" !== e || this.model.storeData("parameters:" + e, t)
    },
    sendAction: function(e, t) {
        e = "nextAction" === e ? this.model.readData("nextAction") : e, Core.Slots.ServerManagerController.superclass.sendAction.call(this, e, t)
    },
    storeNextAction: function(e) {
        this.model.storeData("nextAction", e.nextaction)
    }
}, Core.Slots.ServerManagerController = Sys.extend(Core.ServerManagerController, Core.Slots.ServerManagerController, "Core.Slots.ServerManagerController");
Sys.ns("Core.Slots"), Core.Slots.ServerManagerModel = {
    constructor: function() {
        Core.Slots.ServerManagerModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e, t, r, a = this;
        Core.Slots.ServerManagerModel.superclass.setupData.apply(a, arguments), e = Resources.readData("gameServerInitResponse"), t = e["bl.standard"].split(",").length, r = "0-" + (t - 1).toString(), a.storeData("parameters:betLines", r), a.storeData("nextAction", e.nextaction)
    },
    getActionParameters: function(e) {
        var t = this.getBaseParameters(e);
        switch (t += this.getFreeroundsParameters(), e) {
            case "init":
                return t + this.getInitParameters();
            case "jmxinit":
                return t + this.getJMXInitParameters();
            case "paytable":
                return t + this.getPaytableParameters();
            case "spin":
                return t + this.getSpinParameters();
            case "initfreespin":
                return t + this.getInitFreespinParameters();
            case "respin":
            case "freespin":
                return t + this.getFreespinParameters();
            case "widgetspin":
                return t + this.getWidgetspinParameters();
            case "initbonus":
                return t + this.getInitBonusParameters();
            case "bonusaction":
                return t + this.getBonusActionParameters();
            default:
                return t
        }
    },
    getBaseParameters: function(e) {
        return "action=" + e + "&sessid=" + this.readData("parameter:sessionID") + "&gameId=" + this.readData("parameter:gameID") + "&wantsreels=true"
    },
    getFreeroundsParameters: function() {
        var e = Resources.readData("extraParams");
        return "&wantsfreerounds=" + e.wantsfreerounds + "&freeroundmode=" + e.freeroundmode
    },
    getInitParameters: function() {
        return ""
    },
    getJMXInitParameters: function() {
        return this.getInitParameters()
    },
    getPaytableParameters: function() {
        return ""
    },
    getSpinParameters: function() {
        var e = this,
            t = "&bet.betlevel=" + e.readData("parameters:betLevel") + "&bet.denomination=" + e.readData("parameters:denomination") + "&bet.betlines=" + e.readData("parameters:betLines"),
            r = e.readData("parameter:jmx");
        return r && (t += "&" + r), t
    },
    getInitFreespinParameters: function() {
        return this.getInitParameters()
    },
    getFreespinParameters: function() {
        var e = this.getInitParameters(),
            t = this.readData("parameter:jmx");
        return t && (e += "&" + t), e
    },
    getInitBonusParameters: function() {
        var e = "&bonusid=" + this.readData("parameter:bonusid"),
            t = this.readData("parameter:jmx");
        return t && (e += "&" + t), e
    },
    getBonusActionParameters: function() {
        var e = "",
            t = this.readData("parameter:bonusactiontype"),
            r = this.readData("parameter:jmx");
        return t && (e += "&bonusactiontype=" + t), r && (e += "&" + r), e
    },
    getWidgetspinParameters: function() {
        return "&bonusProgramId=" + Resources.readData("gameServerInitResponse").bonusProgramId
    }
}, Core.Slots.ServerManagerModel = Sys.extend(Core.ServerManagerModel, Core.Slots.ServerManagerModel, "Core.Slots.ServerManagerModel");
Sys.ns("Core.Slots"), Core.Slots.ResponseParser = {
    constructor: function() {
        Core.Slots.ResponseParser.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.Model,
            view: Core.View,
            controller: Core.Slots.ResponseParserController
        }
    }
}, Core.Slots.ResponseParser = Sys.extend(Core.ResponseParser, Core.Slots.ResponseParser, "Core.Slots.ResponseParser");
Sys.ns("Core.Slots"), Core.Slots.ResponseParserController = {
    constructor: function() {
        Core.Slots.ResponseParserController.superclass.constructor.apply(this, arguments)
    },
    parseServerResponse: function(e) {
        var s, n = this,
            i = Core.Slots.ResponseParserController.superclass.parseServerResponse.call(n, e),
            t = Resources.readData("config");
        return i.gamestate && (i.currentGameState = n.getCurrentGameState(i)), i.rs ? (i.rs = this.sortReelSets(i.rs, t.expectedReelSetOrder), s = this.parseReelInfo(i), i.reelInfo = s, i.nearWinList = this.parseNearWin(i), i.ws ? (i.wins = n.parseWinSituations(i, s), i.wins.winType = n.setWinType(i.wins.coins, Services.moneyManager.getBetCoins()), i.wins.centsTotal = i.totalwin.cents, i.wins.coinsTotal = i.totalwin.coins) : Sys.isDefined(i.totalwin) && (i.wins = {
            centsTotal: i.totalwin.cents,
            coinsTotal: i.totalwin.coins
        })) : Sys.isDefined(i.totalwin) && (i.wins = {
            centsTotal: i.totalwin.cents,
            coinsTotal: i.totalwin.coins
        }), i
    },
    sortReelSets: function(e, s) {
        return Object.keys(e).map(function(s) {
            return e[s]
        }).sort(function(e, n) {
            if (s) {
                if (-1 === s.indexOf(e.id) || -1 === s.indexOf(n.id)) throw new Error("Missing order of item.");
                return s.indexOf(e.id) > s.indexOf(n.id) ? 1 : -1
            }
            return e.id > n.id ? 1 : -1
        }).reduce(function(e, s, n) {
            return e["i" + n] = s, e
        }, {})
    },
    getCurrentGameState: function(e) {
        var s = this,
            n = s.model.readData("currentServerGameState");
        return e.gamestate.current ? s.model.storeData("currentServerGameState", e.gamestate.current) : s.model.storeData("currentServerGameState", e.gamestate), n || "basic" === (n = s.model.readData("currentServerGameState")) && s.fireEvent("request:playModeManager.addMode", "basic"), n
    },
    parseNearWin: function(e) {
        var s;
        if (Sys.isDefined(e.rs.i0)) {
            if (s = e.rs.i0.nearwin, Sys.isArray(s)) return s;
            if (Sys.isNumber(s)) return [s]
        }
    },
    setWinType: function(e, s) {
        var n = Resources.readData("config"),
            i = n.winTypes,
            t = "";
        return e > 0 && (e >= s * i.smallWin.from && e < s * i.smallWin.to ? t = "smallWin" : e >= s * i.mediumWin.from && e < s * i.mediumWin.to ? t = "mediumWin" : e >= s * i.largeWin.from && e < s * i.largeWin.to ? t = "largeWin" : e >= s * i.bigWin.from && (t = "bigWin")), t
    },
    parseReelInfo: function(e) {
        return Sys.utils.parseReelInfo(e)
    },
    parseWinSituations: function(e, s) {
        var n, i = 0,
            t = [];
        if (e.ws)
            for (; e.ws["i" + i];) t.push(e.ws["i" + i]), i++;
        return n = this.parseWinLayouts(t, s), this.doGameSpecificWinSituationParsing(n, t), n
    },
    parseWinLayouts: function(e, s) {
        var n, i, t, r, o = [],
            a = 0,
            l = 0,
            c = 0;
        for (n = 0; n < e.length; n++) {
            if (o.push({
                    betline: Sys.isNumber(e[n].betline) ? e[n].betline + 1 : void 0,
                    positions: [],
                    reelset: e[n].reelset,
                    wins: {}
                }), Sys.isDefined(e[n].pos)) {
                for (i = 0; Sys.isDefined(e[n].pos["i" + i]); i++) r = {}, r.reelIndex = e[n].pos["i" + i][0], r.symbolIndex = e[n].pos["i" + i][1], r = Sys.apply(r, s[r.reelIndex].symbols[r.symbolIndex]), o[n].positions.push(r);
                o[n].positions.sort(this.sortSymbols)
            }
            for (t = 0; Sys.isDefined(e[n].types["i" + t]) && Sys.isDefined(e[n].types["i" + t].wintype); t++) o[n].wins.type = e[n].types["i" + t].wintype, "coins" === e[n].types["i" + t].wintype ? (o[n].wins.coins = e[n].types["i" + t].coins, o[n].wins.cents = e[n].types["i" + t].cents, a += e[n].types["i" + t].coins, l += e[n].types["i" + t].cents) : "freespins" === e[n].types["i" + t].wintype && (o[n].wins.freespins = e[n].types["i" + t].freespins, c += e[n].types["i" + t].freespins)
        }
        return o.sort(this.sortWinSituations), {
            winSituations: o,
            coins: a,
            cents: l,
            freespins: c
        }
    },
    sortSymbols: function(e, s) {
        return e.reelIndex - s.reelIndex
    },
    sortWinSituations: function(e, s) {
        return e.wins.coins ? s.wins.coins ? s.wins.coins - e.wins.coins : -1 : s.wins.coins ? 1 : s.wins.freespins - e.wins.freespins
    },
    doGameSpecificWinSituationParsing: function(e, s) {}
}, Core.Slots.ResponseParserController = Sys.extend(Core.ResponseParserController, Core.Slots.ResponseParserController, "Core.Slots.ResponseParserController");
Sys.ns("Core"), Core.ResourceLoader = {
    constructor: function() {
        Core.ResourceLoader.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.ResourceLoaderModel,
            view: Core.ResourceLoaderView,
            controller: Core.ResourceLoaderController
        }
    }
}, Core.ResourceLoader = Sys.extend(Core.Module, Core.ResourceLoader, "Core.ResourceLoader");
Sys.ns("Core"), Core.ResourceLoaderController = {
    constructor: function() {
        Core.ResourceLoaderController.superclass.constructor.apply(this, arguments), this.requestedResources = {}
    },
    setupEvents: function() {
        this.on({
            "request:resourceLoader.loadResource": this.loadResource,
            "request:resourceLoader.removeLoadAnimation": this.removeLoadAnimation
        })
    },
    removeLoadAnimation: function() {
        this.model.setState("clearAnimations")
    },
    loadResource: function(e) {
        var t = this.requestedResources[e.url];
        if (Sys.isObj(t)) "fetched" === t.status && e.successEvent ? this.fireEvent(e.successEvent, e.name, t.data) : "fetching" === t.status && t.requesters.push(e);
        else switch (e.showLoadAnimation && this.model.setState("showLoadAnimation"), this.requestedResources[e.url] = {
            status: "fetching",
            requesters: [e]
        }, e.type) {
            case "audioFile":
                this.fetchAudioFile(e);
                break;
            case "audioElementSource":
                this.fetchAudioElementSource(e);
                break;
            case "JSON":
                this.fetchJSON(e);
                break;
            default:
                this.fetchGenericResource(e)
        }
    },
    fetchAudioFile: function(e) {
        var t = this;
        Sys.utils.httpGet({
            url: e.url,
            responseType: "arraybuffer"
        }).fail(function() {
            t.failedToLoadResource(e)
        }).then(function(s) {
            t.fetchedResource(e, s.response)
        })
    },
    fetchAudioElementSource: function(e) {
        var t = this,
            s = document.createElement("audio");
        Sys.utils.httpGet({
            url: e.url
        }).fail(t.failedToLoadResource.bind(t, e)).then(function() {
            s.src = e.url, s.load(), t.fetchedResource(e, s)
        })
    },
    fetchJSON: function(e) {
        var t = this;
        Sys.utils.httpGet({
            url: e.url
        }).fail(function() {
            t.failedToLoadResource(e)
        }).then(function(s) {
            t.fetchedResource(e, s.responseText)
        })
    },
    fetchGenericResource: function(e) {
        var t = this;
        Sys.utils.httpGet({
            url: e.url
        }).fail(function() {
            t.failedToLoadResource(e)
        }).then(function(s) {
            t.fetchedResource(e, s)
        })
    },
    failedToLoadResource: function(e) {
        var t = this;
        this.requestedResources[e.url].requesters.forEach(function(s) {
            s.failEvent && t.fireEvent(s.failEvent, e.name)
        }), delete this.requestedResources[e.url]
    },
    fetchedResource: function(e, t) {
        var s = this,
            r = this.requestedResources[e.url];
        r.requesters.forEach(function(r) {
            r.successEvent && s.fireEvent(r.successEvent, e.name, t)
        }), r.status = "fetched", r.data = t, r.requesters = [], this.requestedResources[e.url] = r
    }
}, Core.ResourceLoaderController = Sys.extend(Core.Controller, Core.ResourceLoaderController, "Core.ResourceLoaderController");
Sys.ns("Core"), Core.ResourceLoaderModel = {
    constructor: function() {
        Core.ResourceLoaderModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = Resources.readData("gameServerInitResponse");
        this.storeData("isRestore", e.restore)
    }
}, Core.ResourceLoaderModel = Sys.extend(Core.Model, Core.ResourceLoaderModel, "Core.ResourceLoaderModel");
Sys.ns("Core"), Core.ResourceLoaderAbstractView = {
    constructor: function() {
        Core.ResourceLoaderAbstractView.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var o = this;
        o.on({
            "model:showLoadAnimation": o.showLoadAnimation,
            "model:hideLoadAnimation": o.hideLoadAnimation,
            "model:clearAnimations": o.removeAnimations
        })
    },
    init: function(o) {},
    showLoadAnimation: function() {},
    hideLoadAnimation: function() {},
    removeAnimations: function() {}
}, Core.ResourceLoaderAbstractView = Sys.extend(Core.View, Core.ResourceLoaderAbstractView, "Core.ResourceLoaderAbstractView");
Sys.ns("Core"), Core.ResourceLoaderView = {
    SPINNER: {
        width: 132,
        height: 130,
        sprite: "loadingAnimation",
        frameWidth: 132,
        frameHeight: 130,
        totalSpriteWidth: 1188,
        duration: 1e3,
        endFrame: 8
    },
    FADE: {
        RESTORE: {
            startOpacity: 1,
            endOpacity: 1,
            duration: 100
        },
        STANDARD: {
            startOpacity: 0,
            endOpacity: .2,
            duration: 100
        }
    },
    constructor: function() {
        Core.ResourceLoaderView.superclass.constructor.apply(this, arguments)
    },
    init: function(e) {
        var t = this;
        Core.ResourceLoaderView.superclass.init.call(t, e), t.loaderList = new Animation.CanvasAnimationList({}), t.fadeList = new Animation.CanvasAnimationList({}), t.bonusGameName = "", t.loading = Services.languageManager.getText(Language.Keys.loading), t.loaderItem = t.createLoadItem(), t.fadeItem = t.createFadeItem(), t.loaderList.add(t.loaderItem)
    },
    createFadeItem: function() {
        var e = this.getLayeringValues(),
            t = this.FADE.STANDARD;
        return new Animation.CanvasAnimationItem({
            fullScreen: !0,
            depth: e.fade,
            opacity: 0,
            executeBefore: function(e) {
                var t = this;
                e.fillStyle = "rgb(0,0,0)", e.fillRect(t.pivot.x, t.pivot.y, t.width, t.height)
            },
            operations: {
                fade: [{
                    time: 0,
                    value: t.startOpacity
                }, {
                    time: t.duration,
                    value: t.endOpacity
                }, {
                    time: t.duration + 1,
                    value: t.endOpacity,
                    goTo: 1
                }]
            }
        })
    },
    createLoadItem: function() {
        var e = this.SPINNER,
            t = this.getLayeringValues(),
            a = Environment.determineResolution().virtualResolution;
        return new Animation.CanvasAnimationItem({
            left: Math.round((a.width - e.width) / 2),
            top: Math.round((a.height - e.height) / 2),
            width: e.width,
            height: e.height,
            frameWidth: e.frameWidth,
            frameHeight: e.frameHeight,
            totalSpriteWidth: e.totalSpriteWidth,
            image: e.sprite,
            spriteArray: Game.stage.view.animationManager.getSpriteSequence(e.sprite),
            depth: t.spinner,
            operations: {
                sprite: [{
                    time: 0,
                    value: 0
                }, {
                    time: e.duration,
                    value: e.endFrame,
                    goTo: 0
                }]
            }
        })
    },
    showLoadAnimation: function() {
        var e = this,
            t = e.model.readData("isRestore"),
            a = e.fadeItem.prop.operations.fade,
            i = t ? e.FADE.RESTORE : e.FADE.STANDARD;
        e.loaderItem.restore(), e.fadeItem.restore(), a[0].value = i.startOpacity, a[1].value = i.duration, a[1].value = i.endOpacity, a[2].value = i.duration + 1, a[2].value = i.endOpacity, e.bonusGameName = "", e.fadeList.add(e.fadeItem), Game.stage.view.addToRenderLoop(e.loaderList), Game.stage.view.addToRenderLoop(e.fadeList), e.isRestore = t
    },
    hideLoadAnimation: function() {
        Game.stage.view.removeFromRenderLoop(this.loaderList, "base"), this.isRestore && this.clearFade()
    },
    clearFade: function() {
        this.fadeList.items = [], Game.stage.view.removeFromRenderLoop(this.fadeList, "base")
    },
    removeAnimations: function() {
        Game.stage.view.removeFromRenderLoop(this.loaderList, "base"), this.clearFade()
    },
    getLayeringValues: function() {
        return Layering.Game.ResourceLoader
    }
}, Core.ResourceLoaderView = Sys.extend(Core.ResourceLoaderAbstractView, Core.ResourceLoaderView, "Core.ResourceLoaderView");
Sys.ns("Core"), Core.KeyboardManager = {
    constructor: function() {
        Core.KeyboardManager.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return [{
            userInput: {
                inputEvents: ["keyUp", "keyDown"],
                listenToUserInput: !0
            }
        }, "properties"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.KeyboardManagerModel,
            controller: Core.KeyboardManagerController
        }
    }
}, Core.KeyboardManager = Sys.extend(Core.Module, Core.KeyboardManager, "Core.KeyboardManager");
Sys.ns("Core"), Core.KeyboardManagerController = {
    constructor: function() {
        Core.KeyboardManagerController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:stateHandler.enteringStoppedState": this.onEnteringStoppedState,
            "notify:stateHandler.enteringSpinningState": this.onEnteringSpinningState
        })
    },
    onEnteringStoppedState: function() {
        this.model.storeData("quickStopAvailable", !1)
    },
    onEnteringSpinningState: function() {
        this.model.storeData("quickStopAvailable", !0)
    },
    onUserInputKeyDown: function(e, t) {
        this.handleUserInput(t.keyCode, "down"), this.model.storeData("currentState", "down")
    },
    onUserInputKeyUp: function(e, t) {
        this.handleUserInput(t.keyCode, "up"), this.model.storeData("currentKey", ""), this.model.storeData("currentState", "up")
    },
    handleUserInput: function(e, t) {
        var n = this.model.getKey(e),
            r = this.model.readData("currentKey") !== e || this.model.readData("currentState") !== t;
        !this.model.hasProperty("disabled") && n && r && n.triggerOnState.contains(t) && (this.model.storeData("currentKey", e), this[n.action](t))
    },
    onSpaceBarPressed: function(e) {
        Services.settingsManager.getSetting("spacebarToSpin") && ("down" === e ? (window.onkeydown = function(e) {
            return 32 !== e.keyCode
        }, this.fireEvent("request:spinButton.pressed")) : "up" === e && (this.fireEvent("request:spinButton.released"), this.fireEvent("request:abortPresentation"), this.model.readData("quickStopAvailable") && this.fireEvent("request:quickStopper.quickStop")))
    }
}, Core.KeyboardManagerController = Sys.extend(Core.Controller, Core.KeyboardManagerController, "Core.KeyboardManagerController");
Sys.ns("Core"), Core.KeyboardManagerModel = {
    KEY_MAP: {
        32: {
            action: "onSpaceBarPressed",
            triggerOnState: ["down", "up"]
        }
    },
    constructor: function() {
        Core.KeyboardManagerModel.superclass.constructor.apply(this, arguments)
    },
    getKey: function(e) {
        return this.KEY_MAP[e]
    }
}, Core.KeyboardManagerModel = Sys.extend(Core.Model, Core.KeyboardManagerModel, "Core.KeyboardManagerModel");
Sys.ns("Interface"), Interface.Keyboard = {
    constructor: function() {
        Interface.Keyboard.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["orientation", {
            userInput: {
                listenToUserInput: !0
            }
        }]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.Model,
            controller: Interface.KeyboardController,
            view: Interface.KeyboardView
        }
    }
}, Interface.Keyboard = Sys.extend(Core.Module, Interface.Keyboard, "Interface.Keyboard");
Sys.ns("Interface"), Interface.KeyboardController = {
    MAX_LENGTH: 8,
    constructor: function() {
        Interface.KeyboardController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "request:keyboard.open": e.open,
            "request:keyboard.close": e.close,
            "request:keyboard.cancel": e.cancel,
            "view:ok": e.onOkClicked,
            "view:cancel": e.onCancelClicked,
            "view:back": e.onBackKeyClicked,
            "view:keyClicked": e.onKeyClicked,
            "notify:viewport.scaled": e.viewportScaled
        })
    },
    viewportScaled: function() {
        var e = this;
        Platform.isChromeForIOS && window.setTimeout(function() {
            e.view.adaptToOrientation(Utils.Platform.getOrientation())
        }, 500)
    },
    open: function(e) {
        var t = this;
        !0 !== t.model.readData("isOpen") && (t.fireEvent("request:userInputManager.activateExclusivity", t.MODULE_NAME), e = e || {}, e.formatFunction && "function" == typeof e.formatFunction && (t.formatFunc = e.formatFunction), t.model.storeData("info", Sys.isDefined(e.info) ? e.info : ""), t.model.storeData("label", Sys.isDefined(e.label) ? e.label : ""), t.model.storeData("isOpen", !0), t.model.storeData("minValue", e.minValue), t.updateModel("0"), t.okCallback = e.okCallback, t.cancelCallback = e.cancelCallback, t.view.show())
    },
    close: function() {
        var e = this;
        e.fireEvent("request:userInputManager.deactivateExclusivity", e.MODULE_NAME), e.view.hide(), e.model.storeData("isOpen", !1)
    },
    cancel: function() {
        this.model.readData("isOpen") && this.onCancelClicked()
    },
    onOkClicked: function() {
        var e = this;
        "function" == typeof e.okCallback && e.okCallback({
            formattedInput: e.model.readData("formattedInputField"),
            input: e.model.readData("inputField"),
            value: parseInt(e.model.readData("inputField"), 10),
            cents: 100 * parseInt(e.model.readData("inputField"), 10)
        }), e.close()
    },
    onCancelClicked: function() {
        var e = this;
        e.updateModel("0"), "function" == typeof e.cancelCallback && e.cancelCallback({
            formattedInput: e.model.readData("formattedInputField"),
            input: e.model.readData("inputField"),
            value: parseInt(e.model.readData("inputField"), 10),
            cents: 100 * parseInt(e.model.readData("inputField"), 10)
        }), e.close()
    },
    onKeyClicked: function(e) {
        var t = this,
            a = t.model.readData("inputField");
        a.length < t.MAX_LENGTH && (a = Sys.utils.toInt(a) + e), t.updateModel(a), t.view.update()
    },
    onBackKeyClicked: function() {
        var e = this,
            t = e.model.readData("inputField");
        t = t.substring(0, t.length - 1), t = 0 === t.length ? "0" : t, e.updateModel(t), e.view.update()
    },
    updateModel: function(e) {
        var t = this,
            a = t.model;
        a.storeData("formattedInputField", t.formatFunc(e)), a.storeData("inputField", e), a.storeData("value", parseInt(e, 10)), a.storeData("cents", 100 * parseInt(e, 10)), a.storeData("isOkButtonEnabled", t.isInputValid())
    },
    formatFunc: function(e) {
        return Services.moneyManager.formatMoneyCurrencySign(100 * Sys.utils.toInt(e), void 0, 0)
    },
    isInputValid: function() {
        var e = this,
            t = e.model.readData("minValue"),
            a = e.model.readData("cents");
        return !Sys.isDefined(t) || t > 0 && t <= a
    }
}, Interface.KeyboardController = Sys.extend(Core.Controller, Interface.KeyboardController, "Interface.KeyboardController");
Sys.ns("Interface"), Interface.KeyboardView = {
    RENDER_TARGET: "gameWrapper",
    KEYPAD: "keyboardKeypad",
    constructor: function() {
        Interface.KeyboardView.superclass.constructor.apply(this, arguments)
    },
    init: function() {
        var e = this;
        Interface.KeyboardView.superclass.init.apply(this, arguments), e.container = new Sys.Element({
            id: "keyboard",
            tag: "div",
            cls: "interface-keyboard_container",
            renderTo: e.RENDER_TARGET,
            style: "display:none;"
        }), e.info = new Sys.Element({
            id: "keyboardInfo",
            tag: "div",
            cls: "info",
            renderTo: "keyboard",
            innerHTML: e.model.readData("info")
        }), e.label = new Sys.Element({
            id: "keyboardFieldContainerLabel",
            tag: "div",
            cls: "label",
            renderTo: "keyboard",
            innerHTML: e.model.readData("label")
        }), e.fieldContainer = new Sys.Element({
            id: "keyboardFieldContainer",
            tag: "div",
            cls: "fieldContainer",
            renderTo: "keyboard"
        }), e.value = new Sys.Element({
            id: "",
            tag: "div",
            cls: "value",
            renderTo: "keyboardFieldContainer",
            innerHTML: e.model.readData("formattedInputField")
        }), e.keypad = new Sys.Element({
            id: e.KEYPAD,
            tag: "div",
            cls: "keypad digits",
            renderTo: "keyboard"
        }), e.initKeyboard()
    },
    initKeyboard: function() {
        var e, t, n = this,
            a = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "0"];
        for (n.keys = [], e = 0; e < a.length; e++) t = new Interface.utils.DOMButton({
            id: "keypad_num_" + a[e],
            textContent: a[e],
            clickCallback: n.fireEvent.bind(n, "view:keyClicked", a[e]),
            renderTo: n.KEYPAD,
            baseCSS: "button num_" + a[e],
            exclusiveUserInput: n.MODULE_NAME
        }), n.keys.push(t);
        n.cancelButton = new Interface.utils.DOMButton({
            id: "keypad_cancel",
            textContent: "",
            clickCallback: n.fireEvent.bind(n, "view:cancel"),
            renderTo: n.KEYPAD,
            baseCSS: "button cancelButton ",
            exclusiveUserInput: n.MODULE_NAME
        }), n.okButton = new Interface.utils.DOMButton({
            id: "keypad_ok",
            textContent: "",
            clickCallback: n.fireEvent.bind(n, "view:ok"),
            renderTo: n.KEYPAD,
            baseCSS: "button okButton",
            exclusiveUserInput: n.MODULE_NAME
        }), n.backButton = new Interface.utils.DOMButton({
            textContent: "",
            clickCallback: n.fireEvent.bind(n, "view:back"),
            renderTo: "keyboardFieldContainer",
            baseCSS: "button removeDigit",
            exclusiveUserInput: n.MODULE_NAME
        })
    },
    show: function() {
        this.update(), this.container.el.style.display = "block"
    },
    hide: function() {
        this.container.el.style.display = "none"
    },
    adaptToOrientation: function() {
        this.setHeight()
    },
    setHeight: function() {
        var e = Environment.determineResolution().resolution.height;
        Utils.Platform.isPortrait() ? this.container.el.style.height = Math.floor(e + Environment.getSpaceBelowGame()) + "px" : this.container.el.style.height = Math.floor(e) + "px"
    },
    update: function() {
        var e = this,
            t = e.model,
            n = t.readData("isOkButtonEnabled");
        e.label.getEl().innerHTML = t.readData("label"), e.info.getEl().innerHTML = t.readData("info"), e.value.getEl().innerHTML = t.readData("formattedInputField"), n ? e.okButton.enable() : e.okButton.disable()
    }
}, Interface.KeyboardView = Sys.extend(Core.View, Interface.KeyboardView, "Interface.KeyboardView");
Sys.ns("Game"), Game.Stage = {
    constructor: function() {
        Game.Stage.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            setupGame: {
                waitEvents: ["notify:animationManager.allImagesLoaded", "notify:resourceHandler.animationComplete"]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            model: Game.StageModel,
            view: Game.StageView,
            controller: Game.StageController
        }
    }
}, Game.Stage = Sys.extend(Core.Module, Game.Stage, "Game.Stage");
Sys.ns("Game"), Game.StageController = {
    constructor: function() {
        Game.StageController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "notify:stateHandler.enteringBeforeLoaderCloseState": e.startRenderLoop,
            "request:stage.setupImages": e.onSetupImages,
            "request:stage.elevate": e.view.elevate.bind(e.view),
            "request:stage.lower": e.view.lower.bind(e.view),
            "request:stage.pauseAnimation": e.view.pauseAnimation.bind(e.view),
            "notify:scaling.gameSizeChanged": e.onGameSizeChanged
        })
    },
    startRenderLoop: function() {
        this.model.setState("playRenderLoop")
    },
    switchScenes: function(e) {
        this.model.switchScenes(e)
    },
    getGameContainer: function() {
        return this.view.getGameContainer()
    },
    onSetupImages: function(e) {
        this.view.setupImages(e)
    },
    onGameSizeChanged: function() {
        Environment.allowsCustomCanvasSize() && this.view.updateActiveRenderContextSize()
    },
    getOrientationSpecificImage: function(e) {
        return this.view.getOrientationSpecificImage(e)
    }
}, Game.StageController = Sys.extend(Core.Controller, Game.StageController, "Game.StageController");
Sys.ns("Game"), Game.StageModel = {
    constructor: function() {
        Game.StageModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = Resources.readData("config");
        this.storeData("images", Resources.readData("images") || {}), this.storeData("sprites", e.sprites), this.storeData("reelConfig", e.reel), this.storeData("reelGroups", e.reelGroups), this.storeData("scenes", e.scenes), this.switchScenes("base")
    },
    switchScenes: function(e) {
        this.storeData("currentScene", e), this.setState("switchScene", e)
    },
    getSymbolConfiguration: function(e, t) {
        return this.readData("reelGroups") ? this.getNewSymbolConfiguration(e, t) : this.readData("reelConfig") ? this.getLegacySymbolConfiguration(e, t) : null
    },
    getCurrentReelGroupConfiguration: function() {
        return this.readData("reelGroups") ? this.getCompatibleReelGroupConfiguration() : this.readData("reelConfig") ? this.readData("reelConfig") : null
    },
    getCompatibleReelGroupConfiguration: function() {
        var e = this.readData("reelGroups").default,
            t = this.readData("reelConfig") || {},
            r = t.reelFrame || {},
            a = this.getReelLayout(e.reelLayouts) || e.reelLayout,
            o = a.config || a.standard,
            s = o.left || 0,
            i = o.top || 0,
            l = 0,
            n = e.numberOfReels,
            u = o.numberOfOutcomeSymbols || 0,
            h = o.symbolWidths.standard,
            g = o.symbolHeights.standard,
            m = Sys.applyProperties({}, o);
        return Object.keys(a).map(function(e) {
            return parseInt(e, 10)
        }).filter(Sys.isNumber).forEach(function(e) {
            var t = a[e];
            0 === e ? (s = this.getNumberValue(t.left, s), i = this.getNumberValue(t.top, i), l = s) : (s = Math.min(s, this.getNumberValue(t.left, s)), i = Math.min(i, this.getNumberValue(t.top, i)), l = Math.max(l, this.getNumberValue(t.left, s))), u = Math.max(u, t.numberOfOutcomeSymbols || 0)
        }, this), l += h - s, Sys.applyProperties(m, {
            symbolWidth: this.getNumberValue(t.symbolWidth, h),
            symbolHeight: this.getNumberValue(t.symbolHeight, g),
            symbolCols: this.getNumberValue(t.symbolCols, n),
            symbolRows: this.getNumberValue(t.symbolRows, u),
            reelFrame: {
                left: this.getNumberValue(r.left, s),
                top: this.getNumberValue(r.top, i),
                width: this.getNumberValue(r.width, l),
                height: this.getNumberValue(r.height, u * g)
            },
            reelAreaTop: this.getNumberValue(t.reelAreaTop, i),
            reelAreaLeft: this.getNumberValue(t.reelAreaLeft, s),
            reelSpacing: this.getNumberValue(t.reelSpacing, Math.round((l - h * n) / (n - 1))),
            symbolSpacing: this.getNumberValue(t.symbolSpacing, Math.round(o.symbolCenterToCenter - g))
        })
    },
    getNumberValue: function(e, t) {
        return Sys.isNumber(e) ? e : t
    },
    getReelLayout: function(e) {
        var t;
        return e ? (t = Environment.getConfigForCurrentDeviceState(e), t || console.warn("No reel layout found for the current platform and/or orientation"), t) : null
    },
    getLegacySymbolConfiguration: function(e, t) {
        var r = this.readData("reelConfig"),
            a = r.symbolWidth,
            o = r.symbolHeight;
        return {
            width: a,
            height: o,
            top: r.reelAreaTop + t * (o + r.symbolSpacing),
            left: r.reelAreaLeft + e * (a + r.reelSpacing)
        }
    },
    getNewSymbolConfiguration: function(e, t) {
        var r = this.readData("reelGroups").default,
            a = this.getReelLayout(r.reelLayouts) || r.reelLayout,
            o = a[e.toString()],
            s = a.config || a.standard,
            i = o.top || s.top,
            l = s.outcomeOffset || 0;
        return {
            width: s.symbolWidths.standard,
            height: s.symbolHeights.standard,
            top: i + l + t * s.symbolCenterToCenter,
            left: o.left
        }
    }
}, Game.StageModel = Sys.extend(Core.Model, Game.StageModel, "Game.StageModel");
Sys.ns("Game"), Game.StageView = {
    constructor: function() {
        Game.StageView.superclass.constructor.apply(this, arguments)
    },
    init: function(e) {
        this.model = e.model, this.setupAnimationManager(), this.setupEvents()
    },
    setupAnimationManager: function() {
        var e = this,
            n = Environment.determineResolution().resolution;
        e.animationManager = this.getAnimationManager({
            parent: document.getElementById("gameElements"),
            images: e.model.readData("images"),
            sprites: e.model.readData("sprites"),
            top: "0px",
            left: "0px",
            height: n.height,
            width: n.width,
            scenes: e.model.readData("scenes")
        })
    },
    getAnimationManager: function(e) {
        return new Animation.CanvasAnimationManager(e)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "model:switchScene": e.switchScenes,
            "model:playRenderLoop": e.playRenderLoop
        })
    },
    updateActiveRenderContextSize: function() {
        var e = Environment.determineResolution().resolution,
            n = {
                width: e.width,
                height: e.height
            };
        this.animationManager.updateActiveRenderContextSize(n)
    },
    getOrientationSpecificImage: function(e) {
        var n = Utils.Platform.getOrientation(),
            t = e + "_" + n.toLowerCase(),
            a = this.animationManager.images[t];
        return Environment.allowsCustomCanvasSize() && Sys.isDefined(a) ? t : e
    },
    pauseAnimation: function() {
        this.animationManager.pauseAnimation()
    },
    switchScenes: function(e) {
        this.animationManager.switchScenes(e)
    },
    clearScene: function(e) {
        this.animationManager.clearScene(e)
    },
    playRenderLoop: function() {
        var e = this.model.readData("currentScene");
        this.animationManager.start(e)
    },
    addToRenderLoop: function(e, n) {
        this.animationManager.addToRenderLoop(e, n)
    },
    removeFromRenderLoop: function(e, n) {
        this.animationManager.removeList(e, n)
    },
    addImages: function(e) {
        this.animationManager.addImages(e)
    },
    setupImages: function(e) {
        this.animationManager.setupImages(e[0], e[1])
    },
    getGameContainer: function() {
        return document.getElementById("gameElements")
    },
    elevate: function() {
        this.getGameContainer().classList.add("elevated")
    },
    lower: function() {
        this.getGameContainer().className = this.getGameContainer().className.replace(/\belevated\b/, "")
    }
}, Game.StageView = Sys.extend(Core.View, Game.StageView, "Game.StageView");
Sys.ns("Core"), Core.Slots.BufferedSpin = {
    constructor: function() {
        Core.Slots.BufferedSpin.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        var e = this.model;
        return {
            idle: {
                queue: [function(e) {
                    e.stateHandler.pushState(e.states.validateSpin), e.stateHandler.pushState(e.states.spinning)
                }],
                waitEvents: ["notify:spin.roundStart"]
            },
            validateSpin: {
                state: {
                    name: "ValidateSpin",
                    execute: function(t) {
                        e.readData("isValidServerResponse") ? (t.stateHandler.pushState(t.states.stopped), t.stateHandler.pushState(t.states.stopping), t.stateHandler.pushState(t.states.beforeStopping)) : t.stateHandler.pushState(t.states.idle)
                    },
                    waitEvents: {
                        "notify:spin:serverResponseReceived": !1
                    }
                }
            },
            spinning: {
                state: {
                    name: "Spinning",
                    execute: function(e) {},
                    waitEvents: {
                        "notify:spin:serverResponseReceived": !1
                    }
                }
            },
            beforeStopping: {
                state: {
                    name: "BeforeStopping",
                    execute: function() {},
                    waitEvents: {}
                }
            },
            stopping: {
                state: {
                    name: "Stopping",
                    execute: function(e) {},
                    waitEvents: {
                        "notify:spin.AllIsStopped": !1
                    }
                }
            },
            stopped: {
                state: {
                    name: "Stopped",
                    execute: function(e) {},
                    waitEvents: {}
                }
            }
        }
    },
    getMixinDependencies: function() {
        return ["trigger"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.Slots.BufferedSpinModel,
            view: Core.Slots.BufferedSpinView,
            controller: Core.Slots.BufferedSpinController
        }
    }
}, Core.Slots.BufferedSpin = Sys.extend(Core.Module, Core.Slots.BufferedSpin, "Core.Slots.BufferedSpin");
Sys.ns("Core.Slots"), Core.Slots.BufferedSpinModel = {
    constructor: function() {
        Core.Slots.BufferedSpinModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = this,
            t = Resources.readData("gameServerInitResponse");
        e.storeData("nearWinEnabled", t.nearwinallowed), e.storeData("isValidServerResponse", !1), e.storeData("initialOutcomes", e.parseInitialOutcomes()), Resources.storeData("symbolLayout", [])
    },
    parseInitialOutcomes: function() {
        var e = Resources.readData("gameServerInitResponseObject"),
            t = e.rs,
            o = {};
        return Sys.iterate(t, function(t, s) {
            o[s.id] = Sys.utils.parseReelInfo(e, s.id)
        }), o
    },
    setInitialOutcomeInfo: function(e, t) {
        var o = this.readData("initialOutcomes");
        o[e] = t, this.storeData("initialOutcomes", o)
    },
    setDefaultOutcome: function(e) {
        var t = this,
            o = t.getDefaultOutcome(e);
        t.setInitialOutcomeInfo(e, o)
    }
}, Core.Slots.BufferedSpinModel = Sys.extend(Core.Model, Core.Slots.BufferedSpinModel, "Core.Slots.BufferedSpinModel");
Sys.ns("Core.Slots"), Core.Slots.BufferedSpinView = {
    SPIN_SOUNDS: {
        basic: {
            spinStart: {
                id: "spinStart",
                name: "spinStart"
            },
            reelSpin: {
                id: "reelSpin",
                name: "reelSpin",
                loop: !0
            },
            reelBounce: {
                id: "reelBounce",
                name: "reelBounce"
            },
            reelStop: {
                id: "reelStop",
                name: "reelStop"
            }
        }
    },
    constructor: function() {
        Core.Slots.BufferedSpinView.superclass.constructor.apply(this, arguments)
    },
    pauseStopSequenceConfig: {},
    initAnimations: function() {
        var e, t = this,
            n = Resources.readData("config").reelGroups,
            i = t.model.readData("currentReelSet"),
            r = [],
            o = {},
            a = {},
            l = this.model.readData("spinType");
        Sys.iterate(n, function(n, i) {
            e = new Core.Slots.ReelGroup(n, i, {
                reelStartCallback: t.onReelStart.bind(t, n),
                reelStartCompleteCallback: t.onReelStartComplete.bind(t, n),
                reelStartedStoppingCallback: t.onReelStartedStopping.bind(t, n),
                reelBounceStartCallback: t.onReelStartedBouncing.bind(t, n),
                reelStoppedCallback: t.onReelStopped.bind(t, n),
                fillerEventCallback: t.onFillerEvent.bind(t)
            }, {
                nearWinEnabled: t.model.readData("nearWinEnabled")
            }), Sys.isDefined(l) && e.setSpinType(l), r.push(e), Sys.each(i.reelSets, function(t) {
                o[t] = e
            }), a[n] = e
        }), t.reelGroups = r, t.reelSetToGroupMapping = o, t.groupNameToGroupMapping = a, Sys.isDefined(i) && t.activateReelSet(i, t.model.readData("startScene"))
    },
    onReelStart: function(e, t) {
        this.fireEvent("view:reelStart", t)
    },
    onReelStartComplete: function(e, t) {
        var n = this;
        n.fireEvent("view:startSpinComplete", t), n.spinSoundStarted || (n.fireEvent("view:playAudio", n.getSoundConfig("reelSpin")), n.spinSoundStarted = !0)
    },
    onReelStartedStopping: function(e, t) {
        this.fireEvent("view:reelStopStarted", t)
    },
    onReelStartedBouncing: function(e, t) {
        this.playReelSpecificSound("reelBounce", t), this.fireEvent("view:reelStopBouncingStarted", t)
    },
    onReelStopped: function(e, t) {
        var n = this,
            i = n.groupNameToGroupMapping[e].reelLists[t],
            r = n.currentReelGroup();
        n.playReelSpecificSound("reelStop", t), n.updateSymbolLayout(i, t), n.fireEvent("view:reelStoppedSpinning", t), t === n.lastReelToStop && (n.fireEvent("view:stopAudio", n.getSoundConfig("reelSpin").id), n.fireEvent("view:allReelsStoppedSpinning")), !0 === r.nearWinEnabled && Sys.isDefined(r.nearWinList) && r.nearWinList.length > 0 && 0 === r.nearWinList.indexOf(t + 1) && n.fireEvent("view:nearWinStarted", t + 1), i.correctMisalignedOutcomeOnDeviceRotate()
    },
    refresh: function() {
        var e = this.reelGroups,
            t = Resources.readData("config").reelGroups;
        e.forEach(function(e) {
            e.refresh(t)
        })
    },
    updateSymbolLayout: function(e, t) {
        Resources.readData("symbolLayout")[t] = e.getSymbolLayout()
    },
    changeCurrentReelStopDelays: function(e) {
        this.currentReelGroup().changeCurrentReelStopDelays(e)
    },
    resetCurrentReelStopDelays: function() {
        this.currentReelGroup().resetCurrentReelStopDelays()
    },
    getSoundConfig: function(e) {
        var t = this,
            n = t.model.readData("currentReelSet"),
            i = t.SPIN_SOUNDS,
            r = i.basic[e];
        return Sys.isDefined(i[n]) && Sys.isDefined(i[n][e]) && (r = i[n][e]), r
    },
    playReelSpecificSound: function(e, t) {
        var n = this.getSoundConfig(e),
            i = Sys.applyProperties({}, n);
        i.id += t, this.fireEvent("view:playAudio", i)
    },
    startSpin: function(e) {
        var t = this,
            n = t.currentReelGroup(),
            i = n.getReelCount() - 1;
        if (t.fireEvent("view:playAudio", t.getSoundConfig("spinStart")), Sys.isDefined(e))
            for (; i >= 0 && e.contains(i); --i);
        t.lastReelToStop = i, t.isStopSequenceResuming = !1, t.spinSoundStarted = !1, n.lastReelToStop = t.lastReelToStop, n.startSpin(e)
    },
    stopSpin: function(e, t, n) {
        this.currentReelGroup().stopSpin(e, t, n)
    },
    cancelSpin: function() {
        this.currentReelGroup().cancelSpin()
    },
    pauseStopSequence: function(e, t) {
        this.currentReelGroup().pauseStopSequence(e, t)
    },
    resumeStopSequence: function(e, t) {
        this.currentReelGroup().resumeStopSequence(e, t)
    },
    activateReelSet: function(e, t) {
        var n, i, r = this;
        Sys.isDefined(r.reelSetToGroupMapping) ? (n = r.reelSetToGroupMapping[e], Sys.isDefined(n) && (n.activate(e, t), r.model.storeData("currentReelSet", e), i = r.model.readData("initialOutcomes")[e], Sys.isDefined(i) && n.presentOutcome(i, r.model.readData("serverResponse")), n.reelLists.forEach(function(e, t) {
            r.updateSymbolLayout(e, t)
        }))) : (r.model.storeData("currentReelSet", e), r.model.storeData("startScene", t))
    },
    deactivateReelSet: function(e) {
        var t, n = this;
        Sys.isDefined(e) || (e = n.model.readData("currentReelSet")), Sys.isDefined(n.reelSetToGroupMapping) ? (t = n.reelSetToGroupMapping[e], Sys.isDefined(t) && t.deactivate(e)) : e === n.model.readData("currentReelSet") && (n.model.removeData("currentReelSet"), n.model.removeData("startScene"))
    },
    setSymbols: function(e) {
        this.currentReelGroup().setSymbols(e)
    },
    hide: function() {
        this.currentReelGroup().hide()
    },
    show: function() {
        this.currentReelGroup().show()
    },
    currentReelGroup: function() {
        return this.reelSetToGroupMapping[this.model.readData("currentReelSet")]
    },
    setReelVisibility: function(e) {},
    handleSymbols: function(e, t) {},
    setSpinType: function(e) {
        var t = -1,
            n = this.reelGroups;
        if (Sys.isDefined(n))
            for (; ++t < n.length;) n[t].setSpinType(e);
        this.model.storeData("spinType", e)
    },
    quickStop: function() {
        var e, t = this,
            n = t.model.readData("currentReelSet");
        Sys.isDefined(t.reelSetToGroupMapping) && (e = t.reelSetToGroupMapping[n], Sys.isDefined(e) && e.quickStop())
    },
    hideSymbols: function(e) {
        this.currentReelGroup().hideSymbols(e)
    },
    showSymbols: function(e) {
        this.currentReelGroup().showSymbols(e)
    },
    setTimeToMoveOneSlot: function(e) {
        this.currentReelGroup().setTimeToMoveOneSlot(e)
    },
    onFillerEvent: function() {
        var e = ["view:fillerEvent"];
        e.push.apply(e, Array.prototype.slice.call(arguments, 0)), this.fireEvent.apply(this, e)
    }
}, Core.Slots.BufferedSpinView = Sys.extend(Core.View, Core.Slots.BufferedSpinView, "Core.Slots.BufferedSpinView");
Sys.ns("Core.Slots"), Core.Slots.BufferedSpinController = {
    constructor: function() {
        Core.Slots.BufferedSpinController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:responseParser.responseParsed": this.serverResponse,
            "notify:stateHandler.enteringSpinningState": this.wantStartSpin,
            "notify:stateHandler.enteringStoppingState": this.wantStopSpin,
            "notify:stateHandler.leavingIdleState": this.onLeavingIdleState,
            "notify:stateHandler.leavingBeforeLoaderCloseState": this.updateSpinType,
            "notify:quickStopper.quickStop": this.quickStop,
            "notify:settingsManager.settingChanged": this.onSettingsChanged,
            "notify:scaling.gameSizeChanged": this.onGameSizeChanged,
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "request:spin.startNewRound": this.startNewRound,
            "request:spin.activateReelset": this.activateReelSet,
            "request:spin.activateInitReelset": this.activateReelSet,
            "request:spin.deactivateReelset": this.deactivateReelSet,
            "request:spin.startSpin": this.startSpin,
            "request:spin.stopSpin": this.stopSpin,
            "request:spin.cancelSpin": this.cancelSpin,
            "request:spin.activateDefaultOutcome": this.cancelSpin,
            "request:spin.setSymbols": this.setSymbols,
            "request:spin.pauseStopSequence": this.pauseStopSequence,
            "request:spin.resumeStopSequence": this.resumeStopSequence,
            "request:spin.updateInitReelInfo": this.setInitialOutcomeInfo,
            "request:spin.hideSymbols": this.hideSymbols,
            "request:spin.showSymbols": this.showSymbols,
            "request:spin.setTimeToMoveOneSlot": this.setTimeToMoveOneSlot,
            "request:spin.changeCurrentReelStopDelays": this.changeCurrentReelStopDelays,
            "request:spin.resetCurrentReelStopDelays": this.resetCurrentReelStopDelays,
            "view:reelStart": this.announceReelSpinStart,
            "view:startSpinComplete": this.onStartSpinComplete,
            "view:reelStoppedSpinning": this.announceReelStopped,
            "view:reelStopBouncingStarted": this.announceReelStopBouncingStarted,
            "view:allReelsStoppedSpinning": this.announceSpinComplete,
            "view:stopSequencePaused": this.announceSpinStopSequencePaused,
            "view:stopSequenceResumed": this.announceSpinStopSequenceResumed,
            "view:resumeStopSequence": this.resumeStopSequence,
            "view:reelStopStarted": this.announceStopSpinStarted,
            "view:fillerEvent": this.announceFillerEvent,
            "view:nearWinStarted": this.announceNearWinStarted,
            "view:playAudio": this.fireEvent.bind(this, "request:audioPlayer.play"),
            "view:stopAudio": this.fireEvent.bind(this, "request:audioPlayer.stop")
        })
    },
    registerTriggers: function(e) {
        e.registerTrigger("notify:spin.reelStopStarted", this, "The stop spin has started on the given reel."), e.registerTrigger("notify:spin.reelStopBouncingStarted", this, "Reel stop bounce started."), e.registerTrigger("notify:spin.spinAnimationStarted", this, "When reel starts spinning."), e.registerTrigger("notify:quickStopper.quickStop", this, "When spin is quick stopped."), e.registerTrigger("notify:spin.nearWinStarted", this, "Near win started."), e.registerTrigger("notify:spin.spinAnimationComplete", this, "When spin animation complete.")
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    serverResponse: function(e) {
        this.fireEvent("request:spin.child.storeServerResponse", e), e.clientaction.contains("init") || "endbonus" === e.clientaction || (this.model.storeData("isValidServerResponse", !0), this.fireEvent("notify:spin:serverResponseReceived")), this.model.storeData("serverResponse", e)
    },
    wantStartSpin: function() {
        this.fireEvent("request:spin.child.wantStartSpin"), this.fireEvent("request:serverManager.sendAction", "nextAction")
    },
    wantStopSpin: function() {
        this.fireEvent("request:spin.child.wantStopSpin")
    },
    quickStop: function() {
        this.view.quickStop()
    },
    onLeavingIdleState: function() {
        this.waitingToStart = !1
    },
    onSettingsChanged: function(e, t) {
        var n = this;
        "quickSpin" === e && (n.updateSpinType(), t ? n.fireEvent("request:spinButton.addDisplayType", "quickSpin") : n.fireEvent("request:spinButton.removeDisplayType", "quickSpin"))
    },
    onGameSizeChanged: function() {
        "function" == typeof this.view.refresh && this.view.refresh()
    },
    changeCurrentReelStopDelays: function(e) {
        this.view.changeCurrentReelStopDelays(e)
    },
    resetCurrentReelStopDelays: function() {
        this.view.resetCurrentReelStopDelays()
    },
    updateSpinType: function() {
        var e = this;
        Services.settingsManager.getSetting("quickSpin") ? e.view.setSpinType("quickSpin") : e.view.setSpinType("standard")
    },
    setInitialOutcomeInfo: function(e, t) {
        this.model.setInitialOutcomeInfo(e, t)
    },
    startNewRound: function() {
        var e = this;
        e.waitingToStart || (e.waitingToStart = !0, Services.moneyManager.canPlaceAnotherBet() ? e.performSpin() : Services.moneyManager.reloadBalance().done(function() {
            Services.moneyManager.canPlaceAnotherBet() ? e.performSpin() : e.fireEvent("request:errorManager.handleClientOutOfMoneyError")
        }).fail(function() {
            e.fireEvent("request:errorManager.handleClientOutOfMoneyError")
        }).always(function() {
            e.waitingToStart = !1
        }))
    },
    performSpin: function() {
        this.updateSpinType(), this.fireEvent("notify:spin.roundStart"), Services.moneyManager.placeBet()
    },
    activateReelSet: function(e, t) {
        this.view.activateReelSet(e, t), this.fireEvent("notify:spin.reelSetActivated", e)
    },
    deactivateReelSet: function() {
        this.view.deactivateReelSet()
    },
    startSpin: function(e, t) {
        var n = this,
            i = n.getHeldReels();
        n.aborted = !1, n.dialogClosed = !1, n.allReelsHaveStopped = !1, n.model.storeData("isValidServerResponse", !1), n.announceSpinStarted(e), "respin" !== e && n.model.readData("currentReelSet") !== e && n.activateReelSet(e, t), n.view.startSpin(i)
    },
    stopSpin: function(e, t, n) {
        this.view.stopSpin(e, t, n), this.setInitialOutcomeInfo(this.model.readData("currentReelSet"), e)
    },
    setSymbols: function(e) {
        this.view.setSymbols(e)
    },
    pauseStopSequence: function(e, t) {
        this.view.pauseStopSequence(e, t)
    },
    resumeStopSequence: function(e, t) {
        this.view.resumeStopSequence(e, t)
    },
    cancelSpin: function() {
        var e = this;
        e.view.cancelSpin(), e.fireEvent("notify:spin:serverResponseReceived"), e.fireEvent("notify:spin.spinCanceled"), e.fireEvent("notify:spin.spinAnimationComplete"), e.fireEvent("request:spin.child.revertSpin")
    },
    hideSymbols: function(e) {
        this.view.hideSymbols(e)
    },
    showSymbols: function(e) {
        this.view.showSymbols(e)
    },
    setTimeToMoveOneSlot: function(e) {
        this.view.setTimeToMoveOneSlot(e)
    },
    announceSpinStarted: function(e) {
        this.fireEvent("notify:spin.spinAnimationStarted", e)
    },
    announceReelSpinStart: function(e) {
        this.fireEvent("notify:spin.startReelSpin", e)
    },
    onStartSpinComplete: function(e) {
        this.fireEvent("notify:spin.startSpinComplete", e)
    },
    announceReelStopped: function(e) {
        this.fireEvent("notify:spin.reelStoppedSpinning", e)
    },
    announceReelStopBouncingStarted: function(e) {
        this.fireEvent("notify:spin.reelStopBouncingStarted", e)
    },
    announceSpinComplete: function() {
        var e = this;
        e.aborted && e.dialogClosed && e.view.show(), e.allReelsHaveStopped = !0, this.fireEvent("notify:spin.spinAnimationComplete"), this.fireEvent("notify:spin.AllIsStopped")
    },
    announceSpinStopSequencePaused: function() {
        this.fireEvent("notify:spin.stopSequencePaused")
    },
    announceSpinStopSequenceResumed: function() {
        this.fireEvent("notify:spin.stopSequenceResumed")
    },
    announceStopSpinStarted: function(e) {
        this.fireEvent("notify:spin.reelStopStarted", e)
    },
    announceFillerEvent: function(e) {
        var t = [];
        t.push("notify:spin." + e), t.push.apply(t, Array.prototype.slice.call(arguments, 1)), this.fireEvent.apply(this, t)
    },
    announceNearWinStarted: function(e) {
        this.fireEvent("notify:spin.nearWinStarted", e)
    },
    getHeldReels: function() {
        var e = [],
            t = this.model.readData("serverResponse").reelInfo;
        return t && t.forEach(function(t, n) {
            t.hold && e.push(n)
        }), e
    }
}, Core.Slots.BufferedSpinController = Sys.extend(Core.Controller, Core.Slots.BufferedSpinController, "Core.Slots.BufferedSpinController");
Sys.ns("Core.Slots"), Core.Slots.ReelGroup = function(e, t, s, i) {
    this.constructor(e, t, s, i)
}, Core.Slots.ReelGroup.prototype = {
    constructor: function(e, t, s, i) {
        var n = this,
            o = this.getReelLayout(t.reelLayouts) || t.reelLayout;
        n.createSymbolBuffer(t.numberOfReels, t.fillers, s), n.createReelLists(e, t.numberOfReels, o, s), n.groupName = e, n.spinType = "standard", n.spinTimes = t.spinTimes, n.gameModeSpinTimes = t.spinTimes.gameModes || {}, n.nearWinEnabled = i.nearWinEnabled, n.lastReelToStop = n.getReelCount() - 1
    },
    createSymbolBuffer: function(e, t, s) {
        this.symbolBuffer = new Core.Slots.SymbolBuffer(e, t, s)
    },
    createReelLists: function(e, t, s, i) {
        var n, o, r, a = this,
            l = 0,
            u = Layering.Game.Slots.Spin[e].symbols,
            S = a.symbolBuffer,
            f = [];
        for (a.reelLists = [], a.slotLengthGroups = {}; l < t; l++) n = Sys.applyProperties({}, s.standard || s.config), Sys.isDefined(s[l]) && Sys.applyProperties(n, s[l]), n.id = e + "_" + l, n.baseDepth += u, n.symbolRetrievalFunction = S.getSymbols.bind(S, l), Sys.applyProperties(n, a.getReelSpecificCallbacks(l, i)), o = new Animation.BufferedReelList(n), r = o.getSlotLength(), Sys.isDefined(a.slotLengthGroups[r]) || (a.slotLengthGroups[r] = []), a.slotLengthGroups[r].push(o), f.push(o.getVisibleSymbolsCount()), a.reelLists.push(o);
        a.symbolBuffer.setVisibleSymbolsCounts(f)
    },
    getReelLayout: function(e) {
        var t;
        return Sys.isDefined(e) ? (t = Environment.getConfigForCurrentDeviceState(e), null === t && console.warn("No reel layout found"), t) : null
    },
    refresh: function(e) {
        var t = this.getReelLayout(e.default.reelLayouts) || e.default.reelLayout,
            s = Sys.apply({}, t.config || t.standard);
        this.reelLists.forEach(function(e, i) {
            t[i] && Sys.apply(s, t[i]), e.refresh(s)
        })
    },
    getReelSpecificCallbacks: function(e, t) {
        var s = this,
            i = {};
        return i.reelStartCallback = function() {
            t.reelStartCallback(e)
        }, i.reelStartCompleteCallback = function() {
            e === s.lastReelToStop && (s.startSpinCompleteTime = Date.now(), s.tryToStartStopSequence()), s.symbolBuffer.updateReelStartedMap(e), t.reelStartCompleteCallback(e)
        }, i.reelStartedStoppingCallback = function() {
            t.reelStartedStoppingCallback(e)
        }, i.reelBounceStartCallback = function() {
            t.reelBounceStartCallback(e)
        }, i.reelStoppedCallback = function() {
            t.reelStoppedCallback(e)
        }, i
    },
    startSpin: function(e) {
        var t = this,
            s = t.spinTimes[t.spinType],
            i = s.reelStartDelays,
            n = t.reelLists,
            o = t.gameModeSpinTimes[t.activeReelSet] || {},
            r = o[t.spinType] || {};
        t.symbolBuffer.cleanUp(), Sys.isArray(r.reelStartDelays) && (i = r.reelStartDelays), i = Sys.isArray(i) ? i : [], Sys.isEmpty(i) || t.symbolBuffer.setReelStartMap(!1), e = Sys.isDefined(e) ? e : [], t.symbolBuffer.setHeldReels(e), t.syncReels(), t.hasBeenToldToStop = !1, t.isQuickStopped = !1, t.startSpinCompleteTime = void 0, t.hasPassedMinimumSpinTime = !1, t.stopStartTime = void 0, t.stopSequencePausers = Sys.utils.init2dMatrix(t.getReelCount(), 0), Sys.each(n, function(t, s) {
            e.contains(s) || t.startSpin(i[s])
        })
    },
    syncReels: function() {
        var e, t, s, i = this,
            n = i.symbolBuffer.workspace.heldReels;
        Sys.iterate(this.slotLengthGroups, function(o, r) {
            e = 0, Sys.each(r, function(t) {
                e = Math.max(e, t.getBufferOffset())
            }), Sys.each(r, function(o) {
                t = o.getBufferOffset(), (s = i.reelLists.indexOf(o)) > -1 && !n.contains(s) && t < e && o.setBufferOffset(e)
            })
        })
    },
    setSpinType: function(e) {
        this.spinType = e, this.updateSpinTimings()
    },
    stopSpin: function(e, t, s) {
        var i = this;
        i.symbolBuffer.setOutcome(e, s), i.nearWinList = t, i.hasBeenToldToStop = !0, i.tryToStartStopSequence()
    },
    cancelSpin: function() {
        this.presentOutcome(Resources.readData("config").reelSets[this.activeReelSet].noWinOutcome)
    },
    presentOutcome: function(e, t) {
        var s = this,
            i = s.symbolBuffer,
            n = s.reelLists;
        s.hasBeenToldToStop = !1, s.stopSequencePausers = Sys.utils.init2dMatrix(s.getReelCount(), 0), i.cleanUp(), i.clearBuffer(), n.forEach(function(e) {
            e.reset()
        }), i.setOutcome(e, t), s.stopNow(), n.forEach(function(e) {
            e.presentOutcome()
        })
    },
    setTimeToMoveOneSlot: function(e) {
        this.reelLists.forEach(function(t) {
            t.setTimeToMoveOneSlot(e)
        })
    },
    setReelStartSpinParameters: function(e) {
        this.reelLists.forEach(function(t) {
            t.setReelStartSpinParameters(e)
        })
    },
    setBlurOffsetFromStart: function(e) {
        this.reelLists.forEach(function(t) {
            t.setBlurOffsetFromStart(e)
        })
    },
    setEndBounceSupportPointOffsets: function(e) {
        this.reelLists.forEach(function(t) {
            t.setEndBounceSupportPointOffsets(e)
        })
    },
    setEndBounceDurations: function(e) {
        this.reelLists.forEach(function(t) {
            t.setEndBounceDurations(e)
        })
    },
    stopNow: function() {
        var e, t = this,
            s = t.getReelCount(),
            i = [];
        for (e = -1; ++e < s;) {
            if (0 !== t.stopSequencePausers[e].length) {
                i[e] = 1 / 0;
                break
            }
            i[e] = 0
        }
        for (; ++e < s;) i[e] = 1 / 0;
        t.symbolBuffer.setStopDistance(i)
    },
    calculateSymbolsBeforeOutcome: function() {
        var e, t, s, i, n = this,
            o = n.getReelCount(),
            r = n.spinTimes[n.spinType],
            a = n.gameModeSpinTimes[n.activeReelSet] || {},
            l = a[n.spinType] || {},
            u = r.minimumSpinTime,
            S = Sys.isNumber(r.nearWinDelay) ? r.nearWinDelay : 0,
            f = [],
            p = r.reelStopDelays,
            c = n.symbolBuffer.getIndexOfLastStoppingReel(),
            y = n.nearWinList,
            m = 0,
            d = n.getRuntimeReelStopDelayOverride();
        for (Sys.isNumber(l.minimumSpinTime) && (u = l.minimumSpinTime), Sys.isNumber(l.nearWinDelay) && (S = l.nearWinDelay), Sys.isArray(l.reelStopDelays) && (p = l.reelStopDelays), Sys.isArray(d) && (p = d), e = u - (Date.now() - n.startSpinCompleteTime), t = -1; ++t <= c;) f[t] = 0;
        for (t = c; ++t < o;) {
            if (0 !== n.stopSequencePausers[t].length) {
                f[t] = 1 / 0;
                break
            }
            s = e + p[t], n.nearWinEnabled && Sys.isArray(y) && (s += S * (y.indexOf(t) + 1)), i = Math.round(s / n.reelLists[t].getTimeToMoveOneSlot()) + m, i < 0 && (m = -i, i = 0), f[t] = i
        }
        for (; ++t < o;) f[t] = 1 / 0;
        return f
    },
    tryToStartStopSequence: function() {
        var e = this;
        e.canStop() && (e.isQuickStopped ? e.stopNow() : e.symbolBuffer.setStopDistance(e.calculateSymbolsBeforeOutcome()))
    },
    canStop: function() {
        return this.hasBeenToldToStop && Sys.isDefined(this.startSpinCompleteTime)
    },
    pauseStopSequence: function(e, t) {
        var s, i = this,
            n = i.getReelCount();
        if (Sys.isDefined(e) && Sys.isDefined(t)) {
            for (i.stopSequencePausers[t].push(e), s = i.symbolBuffer.getStopDistance(); t < n; ++t) s[t] = 1 / 0;
            i.symbolBuffer.setStopDistance(s)
        }
    },
    resumeStopSequence: function(e, t) {
        var s, i = this;
        Sys.isDefined(e) && Sys.isDefined(t) && (s = i.stopSequencePausers[t].indexOf(e)) >= 0 && (i.stopSequencePausers[t].splice(s, 1), 0 === i.stopSequencePausers[t].length && i.tryToStartStopSequence())
    },
    getReelCount: function() {
        return this.reelLists.length
    },
    setSymbols: function(e) {
        for (var t = -1, s = this.reelLists; ++t < s.length;) Sys.isDefined(e[t]) && s[t].setSymbols(e[t])
    },
    hide: function() {
        Sys.each(this.reelLists, function(e) {
            e.stop()
        })
    },
    show: function() {
        Sys.each(this.reelLists, function(e) {
            e.show()
        })
    },
    hideReel: function(e) {
        var t = this.reelLists[e];
        Sys.isDefined(t) && t.stop()
    },
    showReel: function(e) {
        var t = this.reelLists[e];
        Sys.isDefined(t) && t.play()
    },
    hideSymbolsOnReel: function(e, t) {
        var s = this.reelLists[e];
        Sys.isDefined(s) && s.hideSymbols(t)
    },
    hideSymbols: function(e) {
        var t = this;
        Sys.iterate(e, function(e, s) {
            t.hideSymbolsOnReel(e, s)
        })
    },
    showSymbolsOnReel: function(e, t) {
        var s = this.reelLists[e];
        Sys.isDefined(s) && s.showSymbols(t)
    },
    showSymbols: function(e) {
        var t = this;
        Sys.iterate(e, function(e, s) {
            t.showSymbolsOnReel(e, s)
        })
    },
    activate: function(e, t) {
        var s = this;
        Sys.isDefined(s.activeReelSet) && s.deactivate(s.activeReelSet), Sys.each(s.reelLists, function(e) {
            Game.stage.view.addToRenderLoop(e, t)
        }), s.symbolBuffer.activateReelSet(e), s.activeReelSet = e, s.scene = t, s.updateSpinTimings(e)
    },
    deactivate: function(e) {
        var t = this;
        e === t.activeReelSet && (Sys.each(t.reelLists, function(e) {
            Game.stage.view.removeFromRenderLoop(e, t.scene)
        }), t.activeReelSet = void 0)
    },
    quickStop: function() {
        var e = this;
        e.isQuickStopped = !0, e.canStop() && e.stopNow()
    },
    updateSpinTimings: function(e) {
        var t = "string" == typeof e ? e : this.activeReelSet;
        this.updateTimeToMoveOneSlot(t), this.updateReelStartSpinParameters(t), this.updateBlurOffsetFromStart(t), this.updateEndBounceSupportPointOffsets(t), this.updateEndBounceDurations(t)
    },
    getGameModeSpinConfiguration: function(e, t) {
        var s, i = this.spinTimes[this.spinType],
            n = this.gameModeSpinTimes[e];
        return Sys.isObj(i) && Sys.isDefined(i[t]) && (s = i[t]), Sys.isObj(n) && (n[this.spinType] && Sys.isDefined(n[this.spinType][t]) ? s = n[this.spinType][t] : Sys.isDefined(n[t]) && (s = n[t])), s
    },
    updateTimeToMoveOneSlot: function(e) {
        var t = this.getGameModeSpinConfiguration(e, "timeToMoveOneSlot");
        Sys.isNumber(t) && this.setTimeToMoveOneSlot(t)
    },
    updateReelStartSpinParameters: function(e) {
        var t = this.getGameModeSpinConfiguration(e, "reelStartSpinParameters");
        Sys.isObj(t) && this.setReelStartSpinParameters(t)
    },
    updateBlurOffsetFromStart: function(e) {
        var t = this.getGameModeSpinConfiguration(e, "blurOffsetFromStart");
        Sys.isNumber(t) && this.setBlurOffsetFromStart(t)
    },
    updateEndBounceSupportPointOffsets: function(e) {
        var t = this.getGameModeSpinConfiguration(e, "endBounceSupportPointOffsets");
        Sys.isArray(t) && this.setEndBounceSupportPointOffsets(t)
    },
    updateEndBounceDurations: function(e) {
        var t = this.getGameModeSpinConfiguration(e, "endBounceDurations");
        Sys.isArray(t) && this.setEndBounceDurations(t)
    },
    getRuntimeReelStopDelayOverride: function() {
        var e = this;
        return Sys.isDefined(e.runtimeReelStopDelaysOverride) && Sys.isDefined(e.runtimeReelStopDelaysOverride[e.activeReelSet]) && Sys.isDefined(e.runtimeReelStopDelaysOverride[e.activeReelSet][e.spinType]) ? e.runtimeReelStopDelaysOverride[e.activeReelSet][e.spinType] : null
    },
    changeCurrentReelStopDelays: function(e) {
        var t = this;
        t.isValidReelStopDelays(e) && (t.runtimeReelStopDelaysOverride = t.runtimeReelStopDelaysOverride || [], t.runtimeReelStopDelaysOverride[t.activeReelSet] = t.runtimeReelStopDelaysOverride[t.activeReelSet] || [], t.runtimeReelStopDelaysOverride[t.activeReelSet][t.spinType] = e)
    },
    resetCurrentReelStopDelays: function() {
        var e = this;
        Sys.isDefined(e.runtimeReelStopDelaysOverride) && Sys.isDefined(e.runtimeReelStopDelaysOverride[e.activeReelSet]) && Sys.isDefined(e.runtimeReelStopDelaysOverride[e.activeReelSet][e.spinType]) && delete e.runtimeReelStopDelaysOverride[e.activeReelSet][e.spinType]
    },
    isValidReelStopDelays: function(e) {
        var t;
        if (!Sys.isArray(e)) return !1;
        if (e.length !== this.getReelCount()) return !1;
        for (t = 0; t < e.length; t++)
            if (!Sys.isNumber(e[t]) || e[t] < 0) return !1;
        return !0
    }
};
Sys.ns("Core.Slots"), Core.Slots.SymbolBuffer = {
    SYMBOL_CONSTANTS: {
        any: -1,
        fakeReel: -2,
        lowWin: -3
    },
    constructor: function(e, t, s) {
        var r = this;
        Core.Slots.SymbolBuffer.superclass.constructor.apply(r, arguments), r.pipeCount = e, r.clearBuffer(), r.currentReelSet = void 0, r.setUpWorkspace(s), r.createFillers(t), r.setReelStartMap(!0)
    },
    clearBuffer: function() {
        this.buffer = Sys.utils.init2dMatrix(this.pipeCount, 0)
    },
    setUpWorkspace: function(e) {
        var t = this,
            s = t.pipeCount;
        t.workspace = {
            pipeCount: s,
            currentReelSet: t.currentReelSet,
            currentOutcome: void 0,
            outcomeInsertedOnReel: Sys.utils.initArray(s, !1),
            heldReels: [],
            linkedReels: Sys.utils.initArray(s, !1),
            symbolsBeforeOutcome: Sys.utils.initArray(s, 1 / 0),
            symbolConstants: t.SYMBOL_CONSTANTS,
            announce: e.fillerEventCallback
        }
    },
    createFillers: function(e) {
        var t, s = this;
        s.fillers = [], Sys.each(e, function(e) {
            t = Sys.utils.getClassFromString(e), s.fillers.push(new t(s.workspace))
        })
    },
    getSymbols: function(e, t, s) {
        var r = this;
        return r.buffer[e].length < t && r.fill(t - r.buffer[e].length, e, s), r.buffer[e].splice(-t, t)
    },
    fill: function(e, t, s) {
        var r, o = this,
            n = [];
        for (r = -1; ++r < o.pipeCount;) r < t || r !== t && s || o.shouldNotPushSymbolToBuffer(r) ? n.push([]) : n.push(Sys.utils.initArray(e, o.SYMBOL_CONSTANTS.any));
        o.fillBuffer(n, !0 === s)
    },
    shouldNotPushSymbolToBuffer: function(e) {
        return this.workspace.heldReels.contains(e) || !this.workspace.reelStarted[e]
    },
    fillBuffer: function(e, t) {
        var s, r, o = this,
            n = o.fillers,
            l = n.length,
            i = o.pipeCount,
            u = o.workspace.symbolsBeforeOutcome;
        for (r = -1; ++r < l && n[r].fill(e, t););
        for (r = -1; ++r < i;) s = e[r].length, u[r] >= s ? u[r] -= s : u[r] = 0, o.buffer[r] = e[r].reverse().concat(o.buffer[r])
    },
    cleanUp: function() {
        var e, t = this,
            s = t.fillers,
            r = s.length;
        for (e = -1; ++e < r;) s[e].cleanUp();
        t.cleanUpWorkspace()
    },
    cleanUpWorkspace: function() {
        var e = this.workspace,
            t = e.pipeCount;
        e.currentOutcome = void 0, e.outcomeInsertedOnReel = Sys.utils.initArray(t, !1), e.heldReels.length = 0, e.linkedReels = Sys.utils.initArray(t, !1), e.symbolsBeforeOutcome = Sys.utils.initArray(t, 1 / 0)
    },
    activateReelSet: function(e) {
        var t = this;
        e !== t.currentReelSet && (t.currentReelSet = e, t.workspace.currentReelSet = e, Sys.each(t.fillers, function(t) {
            t.setReelSet(e)
        }))
    },
    setOutcome: function(e, t) {
        this.workspace.currentOutcome = e, Sys.each(this.fillers, function(s) {
            s.processOutcome(e, t)
        })
    },
    setStopDistance: function(e) {
        this.fillers.forEach(function(t) {
            t.updateStoppingDistances(e)
        }), this.workspace.symbolsBeforeOutcome = e
    },
    getStopDistance: function() {
        return this.workspace.symbolsBeforeOutcome
    },
    setVisibleSymbolsCounts: function(e) {
        this.workspace.visibleSymbolsCounts = e
    },
    getIndexOfLastStoppingReel: function() {
        return Math.max(this.workspace.outcomeInsertedOnReel.indexOf(!1) - 1, -1)
    },
    setHeldReels: function(e) {
        var t = this.workspace;
        t.heldReels = e, t.heldReels.forEach(function(e) {
            t.outcomeInsertedOnReel[e] = !0
        })
    },
    setReelStartMap: function(e) {
        this.workspace.reelStarted = Sys.utils.initArray(this.pipeCount, e)
    },
    updateReelStartedMap: function(e) {
        this.workspace.reelStarted[e] = !0
    }
}, Core.Slots.SymbolBuffer = Sys.extend(Sys.Observable, Core.Slots.SymbolBuffer, "Core.Slots.SymbolBuffer");
Sys.ns("Core.Slots"), Core.Slots.Filler = function() {}, Core.Slots.Filler.prototype = {
    fill: function() {
        return !0
    },
    cleanUp: function() {},
    analyzePipeBuffer: function(n, t, e) {
        var o, r, s, i = [],
            l = -1;
        for (Sys.isDefined(e) || (e = [this.workspace.symbols.any]), s = -1; ++s < n.length;) o = e.contains(n[s]), r = -1 === l, o && r ? l = s : o || r || (i.push({
            start: l,
            length: s - l
        }), l = -1);
        return -1 !== l && i.push({
            start: l,
            length: t ? n.length - l : 1 / 0
        }), i
    },
    fillSlots: function(n, t, e) {
        e < 0 || e >= t.length || t.splice.apply(t, [e, n.length].concat(n))
    },
    setReelSet: function() {},
    wrapSymbols: function(n) {
        var t, e = [];
        for (t = -1; ++t < n.length;) e.push(this.wrapSymbol(n[t]));
        return e
    },
    wrapSymbol: function(n) {
        return {
            symbol: n
        }
    },
    evenBuffer: function(n) {
        var t, e = this,
            o = e.workspace,
            r = 0,
            s = !1;
        for (t = -1; ++t < n.length;) r = Math.max(r, n[t].length);
        for (t = -1; ++t < n.length;) {
            if (!o.outcomeInsertedOnReel[t])
                for (; n[t].length < r;) n[t].push(o.symbolConstants.any);
            s = s || e.slotsLeftInPipe(n[t])
        }
        return s
    },
    slotsLeftInBuffer: function(n, t) {
        for (var e = -1; ++e < n.length;)
            if (this.slotsLeftInPipe(n[e], t)) return !0;
        return !1
    },
    slotsLeftInPipe: function(n, t) {
        for (var e = -1; ++e < n.length;)
            if (!Sys.isObj(n[e]) && (!Sys.isDefined(t) || t.contains(n[e]))) return !0;
        return !1
    },
    pipeBufferContainsOutcome: function(n) {
        for (var t = -1; ++t < n.length;)
            if (n[t].isOutcomeSymbol) return !0;
        return !1
    },
    processOutcome: function() {},
    updateStoppingDistances: function() {}
};
Sys.ns("Core.Slots"), Core.Slots.SimpleFakeReelFiller = {
    constructor: function(e) {
        var l = this;
        Core.Slots.SimpleFakeReelFiller.superclass.constructor.apply(l, arguments), l.workspace = e, l.setReelSet(e.currentReelSet), l.cleanUp()
    },
    fill: function(e) {
        var l, s, r, t, i, o = this,
            n = o.reelPositions,
            S = o.workspace.symbolConstants,
            a = [S.any, S.fakeReel];
        for (l = -1; ++l < e.length;)
            if (r = e[l], o.slotsLeftInPipe(r, a)) {
                for (t = o.reelStrips[l], i = n[l], s = -1; ++s < r.length;) a.contains(r[s]) && (r[s] = o.wrapSymbol(t[i]), i = ++i % t.length);
                n[l] = i
            } return !1
    },
    setReelSet: function(e) {
        var l = this,
            s = Resources.readData("config").reelSets,
            r = Sys.isDefined(s[e]) ? s[e] : s.basic;
        Sys.isDefined(r) && (l.reelStrips = r.fakeReels, l.reelPositions = Sys.utils.initArray(l.reelStrips.length, 0))
    }
}, Core.Slots.SimpleFakeReelFiller = Sys.extend(Core.Slots.Filler, Core.Slots.SimpleFakeReelFiller, "Core.Slots.SimpleFakeReelFiller");
Sys.ns("Interface"), Interface.Ticker = {
    constructor: function() {
        Interface.Ticker.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["properties"]
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.TickerController,
            view: Interface.TickerBaseView,
            model: Core.Model
        }
    }
}, Interface.Ticker = Sys.extend(Core.Module, Interface.Ticker, "Interface.Ticker");
Sys.ns("Interface"), Interface.TickerBaseView = {
    BASE_CSS: "interface-ticker_container",
    CONTENT_CSS: "interface-ticker_text",
    BACKGROUND_URI: "interface-ticker_uri",
    RENDER_TARGET: "gameWrapper",
    ANIMATION_SPEED: 2e4,
    constructor: function() {
        Interface.TickerBaseView.superclass.constructor.apply(this, arguments)
    },
    enable: function() {},
    disable: function() {},
    update: function() {}
}, Interface.TickerBaseView = Sys.extend(Core.View, Interface.TickerBaseView, "Interface.TickerBaseView");
Sys.ns("Interface"), Interface.TickerMobileView = {
    constructor: function() {
        Interface.TickerMobileView.superclass.constructor.apply(this, arguments), this.constructDOMElement(), this.setupAnimation()
    },
    enable: function() {
        var t = this;
        t.model.hasProperty("enabled") && (t.container.el.style.display = "block", t.update(), t.fireEvent("view:enabled"))
    },
    disable: function() {
        var t = this;
        t.model.hasProperty("enabled") || (t.container.el.style.display = "none", t.update(), t.fireEvent("view:disabled"))
    },
    update: function() {
        var t = this,
            e = t.model.readData("content");
        t.textContainer.removeAll(), Sys.isDefined(e) && (Sys.isArray(e) ? e.forEach(function(e) {
            t.textContainer.add(e)
        }) : t.textContainer.add(e)), !0 === t.model.readData("animate") ? (t.textContainer.el.style.paddingLeft = "100%", t.textContainer.el.style.width = "auto", t.animation.run(t.textContainer.el)) : (t.textContainer.el.style.paddingLeft = "0", t.textContainer.el.style.width = "100%", t.animation.removeAnimation(t.textContainer.el))
    },
    constructDOMElement: function() {
        var t = this;
        t.container = new Sys.Element({
            id: "ticker",
            tag: "div",
            cls: t.BASE_CSS + " " + t.BACKGROUND_URI,
            renderTo: t.RENDER_TARGET
        }), t.textContainer = new Sys.Element({
            tag: "div",
            cls: t.CONTENT_CSS
        }), t.container.add(t.textContainer)
    },
    setupAnimation: function() {
        var t = this;
        Sys.isDefined(t.animation) || (t.animationConfig = {
            name: "scrollingAnimation",
            duration: t.ANIMATION_SPEED,
            timingFunction: "linear",
            iterationCount: "infinite",
            frames: {
                "0%": {
                    "-webkit-transform": "translateX(0);",
                    "-moz-transform": "translateX(0);",
                    "-o-transform": "translateX(0);",
                    "-MS-transform": "translateX(0);",
                    transform: "translateX(0);"
                },
                "100%": {
                    "-webkit-transform": "translateX(-100%);",
                    "-moz-transform": "translateX(-100%);",
                    "-o-transform": "translateX(-100%);",
                    "-MS-transform": "translateX(-100%);",
                    transform: "translateX(-100%);"
                }
            }
        }, t.animation = new Interface.utils.CSSAnimation(t.animationConfig))
    },
    onOrientationChange: function() {
        var t = this.container.el;
        Platform.isEdgeBrowser && setTimeout(function() {
            t.style.visibility = "hidden", setTimeout(function() {
                t.style.visibility = ""
            }, 200)
        }, 150)
    }
}, Interface.TickerMobileView = Sys.extend(Interface.TickerBaseView, Interface.TickerMobileView, "Interface.TickerMobileView");
Sys.ns("Interface"), Interface.TickerController = {
    constructor: function() {
        Interface.TickerController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "request:ticker.enable": this.enable,
            "request:ticker.disable": this.disable,
            "request:ticker.setText": this.setText,
            "notify:scaling.gameSizeChanged": this.onGameSizeChanged,
            "view:enabled": this.viewEnabled,
            "view:disabled": this.viewDisabled
        })
    },
    onGameSizeChanged: function() {
        "function" == typeof this.view.onOrientationChange && this.view.onOrientationChange()
    },
    enable: function(e, t) {
        this.addProperty("enabled", e), this.model.storeData("animate", !0 === t), this.view.enable()
    },
    disable: function(e) {
        this.removeProperty("enabled", e), this.model.storeData("animate", !1), this.view.disable()
    },
    setText: function(e) {
        this.model.storeData("content", e), this.view.update()
    },
    viewEnabled: function() {
        this.model.readData("spinButtonAlignment") || !1 || (this.model.storeData("spinButtonAlignment", !0), this.fireEvent("request:spinButton.moveButton", {
            orientation: "portrait",
            vertical: .13
        })), this.fireEvent("request:balanceDisplay.addClass", "ticker")
    },
    viewDisabled: function() {
        (this.model.readData("spinButtonAlignment") || !1) && (this.model.storeData("spinButtonAlignment", !1), this.fireEvent("request:spinButton.moveButton", {
            orientation: "portrait",
            vertical: -.13
        })), this.fireEvent("request:balanceDisplay.removeClass", "ticker")
    }
}, Interface.TickerController = Sys.extend(Core.Controller, Interface.TickerController, "Interface.TickerController");
Sys.ns("Interface"), Interface.RoundStartButton = {
    constructor: function() {
        Interface.RoundStartButton.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["orientation", "userInput", "properties"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Interface.RoundStartButtonModel,
            view: Interface.RoundStartButtonBaseView,
            controller: Interface.RoundStartButtonController
        }
    }
}, Interface.RoundStartButton = Sys.extend(Core.Module, Interface.RoundStartButton, "Interface.RoundStartButton");
Sys.ns("Game.Slots"), Interface.RoundStartButtonController = {
    ROUND_START_EVENT: void 0,
    constructor: function() {
        Interface.RoundStartButtonController.superclass.constructor.apply(this, arguments), this.view.setUpDOMStructure(), this.properties = {}
    },
    setupEvents: function() {
        var e = this,
            t = {
                "notify:stateHandler.enteringIdleState": e.onEnteringIdleState,
                "notify:stateHandler.leavingIdleState": e.onLeavingIdleState,
                "notify:stateHandler.leavingBeforeLoaderCloseState": e.onLeavingIdleState,
                "notify:gameModeChanged": e.onGameModeChanged,
                "view:clicked": e.onClick,
                "view:hidden": e.fireEvent.bind(e, "notify:" + e.MODULE_NAME + ".hidden"),
                "view:shown": e.fireEvent.bind(e, "notify:" + e.MODULE_NAME + ".shown"),
                "view:pressed": e.fireEvent.bind(e, "notify:" + e.MODULE_NAME + ".pressed"),
                "view:released": e.fireEvent.bind(e, "notify:" + e.MODULE_NAME + ".released"),
                "view:disable": e.disable.bind(e),
                "view:hide": e.hide.bind(e),
                "view:show": e.show.bind(e),
                "view:enable": e.enable.bind(e),
                "request:enableBasicGamePanel": e.enable,
                "request:disableBasicGamePanel": e.disable
            };
        t["request:" + e.MODULE_NAME + ".hide"] = e.hideRequested, t["request:" + e.MODULE_NAME + ".show"] = e.show, t["request:" + e.MODULE_NAME + ".enable"] = e.enable, t["request:" + e.MODULE_NAME + ".disable"] = e.disableRequested, t["request:" + e.MODULE_NAME + ".addDisplayType"] = e.addDisplayType, t["request:" + e.MODULE_NAME + ".removeDisplayType"] = e.removeDisplayType, t["request:" + e.MODULE_NAME + ".addProperty"] = e.addProperty, t["request:" + e.MODULE_NAME + ".removeProperty"] = e.removeProperty, e.on(t)
    },
    onUserInputStart: function(e) {
        this.view.userInputStart(e)
    },
    onUserInputMove: function(e) {
        this.view.userInputMove(e)
    },
    onUserInputHover: function(e) {
        this.view.userInputHover(e)
    },
    onUserInputEnd: function(e) {
        this.view.userInputEnd(e)
    },
    onClick: function() {
        this.fireEvent(this.ROUND_START_EVENT)
    },
    removeProperty: function(e, t) {
        var n = this;
        n.model.hasProperty(e) && (n.model.removeProperty(e, t), n.model.hasProperty(e) || n.updateAppearance(), n.model.readData("inIdleState") || n.model.hasProperty("visibleDuringRound") || n.hide(n.MODULE_NAME))
    },
    addDisplayType: function(e) {
        var t = !this.model.hasDisplayType(e);
        this.model.addDisplayType(e), t && this.updateAppearance()
    },
    removeDisplayType: function(e) {
        var t = this;
        t.model.hasDisplayType(e) && (t.model.removeDisplayType(e), t.model.hasDisplayType(e) || t.updateAppearance())
    },
    updateAppearance: function() {},
    hide: function(e) {
        this.addProperty("hidden", e)
    },
    hideRequested: function(e) {
        this.view.hideRequested(e)
    },
    show: function(e) {
        this.removeProperty("hidden", e)
    },
    enable: function(e) {
        this.removeProperty("disabled", e)
    },
    disable: function(e) {
        this.addProperty("disabled", e)
    },
    disableRequested: function(e) {
        this.view.disableRequested(e)
    },
    onEnteringIdleState: function() {
        var e = this;
        e.model.storeData("inIdleState", !0), e.show(e.MODULE_NAME)
    },
    onLeavingIdleState: function() {
        var e = this;
        e.model.storeData("inIdleState", !1), e.model.hasProperty("visibleDuringRound") || e.hide(e.MODULE_NAME)
    },
    onGameModeChanged: function(e) {
        var t = this;
        t.model.storeData("currentGameMode", e), "BASIC" === e ? (t.enable("notInBasicGame"), t.show("globalRequest"), t.view.show()) : (t.disable("notInBasicGame"), t.hide("globalRequest"), t.view.disableRequested("notInBasicGame"), t.view.hideRequested("globalRequest"), t.updateVisibility())
    }
}, Interface.RoundStartButtonController = Sys.extend(Core.Controller, Interface.RoundStartButtonController, "Interface.RoundStartButtonController");
Sys.ns("Interface"), Interface.RoundStartButtonModel = {
    DISPLAY_TYPES: {},
    PROPERTIES: {
        hidden: [],
        visibleDuringRound: [],
        visibleOnInput: []
    },
    constructor: function() {
        Interface.RoundStartButtonModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var t = Resources.readData("gameServerInitResponseObject"),
            e = t.gamestate ? t.gamestate : void 0,
            a = e ? e.current : void 0;
        this.data = {
            properties: this.PROPERTIES,
            displayTypes: this.DISPLAY_TYPES,
            currentGameMode: a ? a.toUpperCase() : void 0
        }
    },
    hasDisplayType: function(t) {
        return this.readData("displayTypes")[t]
    },
    addDisplayType: function(t) {
        this.readData("displayTypes")[t] = !0
    },
    removeDisplayType: function(t) {
        this.readData("displayTypes")[t] = !1
    }
}, Interface.RoundStartButtonModel = Sys.extend(Core.Model, Interface.RoundStartButtonModel, "Interface.RoundStartButtonModel");
Sys.ns("Interface"), Interface.RoundStartButtonBaseView = {
    BUTTON_ID: "roundStartButton",
    BASE_CSS: "interface-roundStartButton_base",
    PRESSED_CSS: "interface-roundStartButton_pressed",
    URI_BASE_CSS: "interface-roundStartButton",
    PORTRAIT_POSITION: {
        TOP: .5,
        LEFT: .5
    },
    LANDSCAPE_POSITION: {
        TOP: .5,
        LEFT: .5
    },
    PORTRAIT_SIZE: {
        ASPECT_RATIO: 1,
        HEIGHT: .2
    },
    LANDSCAPE_SIZE: {
        ASPECT_RATIO: 1,
        WIDTH: .2
    },
    RENDER_TARGET: "gameWrapper",
    constructor: function() {
        Interface.RoundStartButtonBaseView.superclass.constructor.apply(this, arguments)
    },
    setUpDOMStructure: function() {
        var e = this;
        e.container = new Sys.Element({
            tag: "div",
            id: e.BUTTON_ID,
            cls: e.BASE_CSS + " " + e.URI_BASE_CSS + "_default_uri",
            renderTo: e.RENDER_TARGET
        }), e.model.storeData("currentUri", e.URI_BASE_CSS + "_default_uri"), e.show(), Sys.isDefined(e.model.hasProperty) && !e.model.hasProperty("hidden") ? e.show() : e.hide()
    },
    userInputStart: function(e) {
        var t = this,
            n = t.isInputTarget(e);
        n ? t.hidden() || t.press() : t.shouldBeHiddenByUserInput(e) && t.hide(), t.model.storeData("wasInitialInputTarget", n)
    },
    shouldBeHiddenByUserInput: function(e) {
        return !this.model.hasProperty("visibleOnInput") && Sys.UserInputUtils.isCoordinateTarget(Game.stage.getGameContainer(), e)
    },
    userInputMove: function(e) {
        var t = this,
            n = t.isInputTarget(e);
        t.model.readData("wasInitialInputTarget") && !n && t.userInputEnd(e)
    },
    userInputHover: function(e) {},
    userInputEnd: function(e) {
        var t, n = this;
        n.model.readData("wasInitialInputTarget") ? (t = n.isInputTarget(e), n.release(t), t && n.fireEvent("view:clicked")) : n.model.hasProperty("hidden") || n.show(), n.model.storeData("wasInitialInputTarget", !1)
    },
    isInputTarget: function(e) {
        return Sys.UserInputUtils.isCoordinateTarget(this.container.el, e)
    },
    press: function() {
        this.container.addCls(this.PRESSED_CSS), this.fireEvent("view:pressed")
    },
    release: function(e) {
        this.container.removeCls(this.PRESSED_CSS), this.fireEvent("view:released", e)
    },
    hide: function() {
        this.hidden() || (this.container.el.style.display = "none", this.fireEvent("view:hidden"))
    },
    hidden: function() {
        return "none" === this.container.el.style.display
    },
    show: function() {
        this.hidden() && (this.container.el.style.display = "block", this.fireEvent("view:shown"))
    },
    enable: function() {
        this.container.el.style.opacity = 1
    },
    disable: function() {
        this.container.el.style.opacity = .5
    },
    setAppearance: function(e) {
        var t = this.URI_BASE_CSS + "_" + e + "_uri",
            n = this.container,
            i = this.model.readData("currentUri");
        n.replaceCSSClass(i, t, !0), this.model.storeData("currentUri", t)
    },
    disableRequested: function(e) {
        this.fireEvent("view:disable", e)
    },
    hideRequested: function(e) {
        Sys.isDefined(e) ? this.fireEvent("view:hide", e) : this.hide()
    },
    beforeLoaderClose: function() {}
}, Interface.RoundStartButtonBaseView = Sys.extend(Core.View, Interface.RoundStartButtonBaseView, "Interface.RoundStartButtonBaseView");
Sys.ns("Interface.Slots"), Interface.Slots.SpinButton = {
    constructor: function() {
        Interface.Slots.SpinButton.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return {
            fallback: ["orientation", "userInput", "properties", "trigger"],
            desktop: [{
                userInput: {
                    inputEvents: ["start", "end", "cancel", "move", "hover"]
                }
            }, "properties", "trigger"]
        }
    },
    getDefaultMVCClasses: function() {
        return {
            model: Interface.Slots.SpinButtonModel,
            view: Interface.Slots.SpinButtonBaseView,
            controller: Interface.Slots.SpinButtonController
        }
    }
}, Interface.Slots.SpinButton = Sys.extend(Interface.RoundStartButton, Interface.Slots.SpinButton, "Interface.Slots.SpinButton");
Sys.ns("Interface.Slots"), Interface.Slots.SpinButtonController = {
    ROUND_START_EVENT: "request:spin.startNewRound",
    AUTOPLAY_START_EVENT: "request:spinSettings.startAutoPlay",
    constructor: function() {
        Interface.Slots.SpinButtonController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        Interface.Slots.SpinButtonController.superclass.setupEvents.apply(this, arguments), this.on({
            "view:setSafeArea": this.fireEvent.bind(this, "request:fullscreen.setSafeArea"),
            "request:spinButton.startRound": this.startRound,
            "request:spinButton.showCounter": this.showCounter,
            "request:spinButton.hideCounter": this.hideCounter,
            "request:spinButton.updateCounter": this.updateCounter,
            "request:spinButton.pressed": this.onPressedRequest,
            "request:spinButton.released": this.onReleasedRequest,
            "request:spinButton.moveButton": this.onMoveButtonRequest,
            "notify:settingsManager.settingChanged": this.settingsChanged,
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "notify:stateHandler.enteringFreeSpinIntroState": this.onEnteringFreespinIntro,
            "notify:stateHandler.leavingFreeSpinIntroState": this.onLeavingFreespinIntro,
            "notify:stateHandler.enteringFreeSpinOutroState": this.onEnteringFreespinOutro,
            "notify:stateHandler.leavingFreeSpinOutroState": this.onLeavingFreespinOutro,
            "notify:stateHandler.leavingBeforeLoaderCloseState": this.onBeforeLoaderClose,
            "view:playSound": this.playSoundForView,
            "view:notify": this.onViewNotify
        }), Sys.isGcmEnabled && this.on({
            "notify:stateHandler.enteringspinTypeRespinRestoreState": this.disable,
            "notify:stateHandler.leavingspinTypeRespinRestoreState": this.enable
        })
    },
    initAnimations: function() {
        "function" == typeof this.view.initAnimations && this.view.initAnimations()
    },
    registerTriggers: function() {
        Services.trigger.registerTrigger("notify:spinButton.clicked", this, "Executed when the spin button is clicked"), Services.trigger.registerTrigger("notify:spinButton.up", this, "When the spin button returns to the up state."), Services.trigger.registerTrigger("notify:spinButton.hover", this, "Executed when the spin button is hovered"), Services.trigger.registerTrigger("notify:spinButton.down", this, "Executed when the spin button is down")
    },
    onMoveButtonRequest: function(e) {
        this.view.moveButtonPosition(e), this.fireEvent("request:quickSettingsMenu.movePosition", e)
    },
    playSoundForView: function(e) {
        this.fireEvent("request:audioPlayer.play", {
            name: e
        })
    },
    startRound: function() {
        this.fireEvent(this.ROUND_START_EVENT)
    },
    onPressedRequest: function() {
        this.model.readData("inIdleState") && this.view.onPressedRequest()
    },
    onReleasedRequest: function() {
        this.model.readData("inIdleState") && this.view.onReleasedRequest()
    },
    onLandscape: function() {
        var e = this;
        Mixins.orientation.controller.methods.onLandscape.apply(e, arguments), e.model.hasProperty("hidden") && (e.view.canInteractWhileHidden() ? e.startListeningToUserInput() : e.stopListeningToUserInput())
    },
    onPortrait: function() {
        var e = this;
        Mixins.orientation.controller.methods.onPortrait.apply(e, arguments), e.model.hasProperty("hidden") && (e.view.canInteractWhileHidden() ? e.startListeningToUserInput() : e.stopListeningToUserInput())
    },
    onEnteringIdleState: function() {
        var e = this;
        Interface.Slots.SpinButtonController.superclass.onEnteringIdleState.apply(e, arguments), e.model.hasProperty("disabledDuringRound") && e.enable(e.MODULE_NAME), e.view.disableSpinningAnimations()
    },
    onLeavingIdleState: function() {
        var e = this;
        Interface.Slots.SpinButtonController.superclass.onLeavingIdleState.apply(e, arguments), e.model.hasProperty("disabledDuringRound") && e.disable(e.MODULE_NAME), e.model.hasProperty("disabled") || e.view.enableSpinningAnimations()
    },
    onBeforeLoaderClose: function() {
        this.view.beforeLoaderClose(), this.updateAppearance(), this.view.setFullscreenSafeArea()
    },
    onClick: function() {
        var e = this,
            t = e.model;
        t.hasProperty("hidden") ? e.view.canInteractWhileHidden() && e.fireEvent("notify:spinButton.clickedWhileHidden") : (e.fireEvent("request:audioPlayer.play", {
            name: "spinButtonClick"
        }), e.fireEvent("notify:spinButton.clicked", {
            skip: t.readData("noStopOnSpin")
        }), t.readData("inIdleState") && (t.hasDisplayType("autoPlay") ? e.fireEvent(e.AUTOPLAY_START_EVENT) : e.fireEvent(e.ROUND_START_EVENT)))
    },
    onViewNotify: function(e) {
        this.fireEvent(e)
    },
    showCounter: function(e) {
        this.view.showCounter(), Sys.isDefined(e) && this.view.updateCounter(e)
    },
    hideCounter: function() {
        this.view.hideCounter()
    },
    updateCounter: function(e) {
        this.view.updateCounter(e)
    },
    updateAppearance: function() {
        var e = this,
            t = e.model,
            n = "default";
        t.hasDisplayType("autoPlay") ? n = "autoPlay" : t.hasDisplayType("autoPlayStop") ? n = "autoPlayStop" : t.hasDisplayType("quickSpin") && (n = "quickSpin"), e.view.setAppearance(n), e.updateVisibility()
    },
    updateVisibility: function() {
        var e = this,
            t = e.model.hasProperty("hidden"),
            n = e.model.hasProperty("disabled");
        t ? e.view.hide() : e.view.show(), n ? e.view.disable() : e.view.enable(), n || t && !e.view.canInteractWhileHidden() ? e.stopListeningToUserInput() : e.startListeningToUserInput()
    },
    settingsChanged: function(e, t) {
        var n = this;
        "leftHandMode" === e && (n.model.storeData("leftHandMode", t), n.view.setPosition())
    },
    onEnteringFreespinIntro: function() {
        this.hide(this.MODULE_NAME)
    },
    onLeavingFreespinIntro: function() {
        this.show(this.MODULE_NAME)
    },
    onEnteringFreespinOutro: function() {
        this.hide(this.MODULE_NAME)
    },
    onLeavingFreespinOutro: function() {
        this.show(this.MODULE_NAME)
    }
}, Interface.Slots.SpinButtonController = Sys.extend(Interface.RoundStartButtonController, Interface.Slots.SpinButtonController, "Interface.Slots.SpinButtonController");
Sys.ns("Interface.Slots"), Interface.Slots.SpinButtonModel = {
    DISPLAY_TYPES: {
        autoPlay: !1,
        autoPlayStop: !1,
        quickSpin: !1
    },
    constructor: function() {
        Interface.Slots.SpinButtonModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var t = Services.localStorageManager.hasData("leftHandMode") && "true" === Services.localStorageManager.readData("leftHandMode");
        Interface.Slots.SpinButtonModel.superclass.setupData.apply(this, arguments), this.storeData("leftHandMode", t)
    }
}, Interface.Slots.SpinButtonModel = Sys.extend(Interface.RoundStartButtonModel, Interface.Slots.SpinButtonModel, "Interface.Slots.SpinButtonModel");
Sys.ns("Interface.Slots"), Interface.Slots.SpinButtonBaseView = {
    BUTTON_ID: "spinButton",
    BASE_CSS: "interface-roundStartButton_base",
    URI_BASE_CSS: "interface-spinButton",
    COUNTER_BASE_CSS: "utils_center interface-spinButton_counter",
    BUTTON_POSITION: {
        PORTRAIT: {
            LEFT: {
                RIGHT: .5
            },
            RIGHT: {
                LEFT: .5
            }
        },
        LANDSCAPE: {
            LEFT: {
                RIGHT: .5
            },
            RIGHT: {
                LEFT: .5
            }
        }
    },
    constructor: function() {
        Interface.Slots.SpinButtonBaseView.superclass.constructor.apply(this, arguments)
    },
    setUpDOMStructure: function() {
        var t = this;
        t.updatePositionProperties(), Interface.Slots.SpinButtonBaseView.superclass.setUpDOMStructure.apply(t, arguments), t.counter = new Sys.Element({
            tag: "div",
            cls: t.COUNTER_BASE_CSS,
            style: "display:none;"
        }), t.container.add(t.counter)
    },
    setFullscreenSafeArea: function() {
        var t = this;
        t.fireEvent("view:setSafeArea", "spinButton", {
            element: t.container.getEl()
        })
    },
    showCounter: function() {
        this.counter.el.style.display = "block"
    },
    hideCounter: function() {
        this.counter.el.style.display = "none"
    },
    updateCounter: function(t) {
        this.counter.el.textContent = t
    },
    setStyle: function(t) {
        var e = this,
            n = e.counter,
            i = "LANDSCAPE" === t ? "PORTRAIT" : "LANDSCAPE";
        Mixins.orientation.view.methods.setStyle.call(e, t), n.removeCls(e["COUNTER_" + i + "_CSS"]), n.addCls(e["COUNTER_" + t + "_CSS"])
    },
    canInteractWhileHidden: function() {
        return !1
    },
    setPosition: function(t) {
        this.updatePositionProperties(), Mixins.orientation.view.methods.setPosition.call(this, t || this.currentOrientation)
    },
    updatePositionProperties: function() {
        var t, e = this;
        t = Resources.readData("queryData").enableDefaultSwedenButtons ? "RIGHT" : e.model.readData("leftHandMode") ? "LEFT" : "RIGHT", e.LANDSCAPE_POSITION = e.BUTTON_POSITION.LANDSCAPE[t], e.PORTRAIT_POSITION = e.BUTTON_POSITION.PORTRAIT[t]
    },
    enable: function() {
        this.model.hasProperty("hidden") || this.show()
    },
    disable: function() {
        this.hide()
    },
    enableSpinningAnimations: function() {},
    disableSpinningAnimations: function() {},
    onPressedRequest: function() {},
    onReleasedRequest: function() {},
    moveButtonPosition: function() {}
}, Interface.Slots.SpinButtonBaseView = Sys.extend(Interface.RoundStartButtonBaseView, Interface.Slots.SpinButtonBaseView, "Interface.Slots.SpinButtonBaseView");
Sys.ns("Interface.Slots"), Interface.Slots.SpinButtonMobileView = {
    BUTTON_POSITION: {
        PORTRAIT: {
            LEFT: {
                BELOW_GAME: !0,
                TOP: .4,
                LEFT: .5,
                MIN_TOP: 825
            },
            RIGHT: {
                BELOW_GAME: !0,
                TOP: .4,
                LEFT: .5,
                MIN_TOP: 825
            }
        },
        LANDSCAPE: {
            LEFT: {
                TOP: .5,
                RIGHT: .82
            },
            RIGHT: {
                TOP: .5,
                LEFT: .9
            }
        }
    },
    PORTRAIT_POSITION: {
        BELOW_GAME: !0,
        TOP: .4,
        LEFT: .5,
        MIN_TOP: 825
    },
    LANDSCAPE_POSITION: {
        TOP: .5,
        LEFT: .9
    },
    PORTRAIT_SIZE: {
        VERTICAL_OFFSET: "center",
        HORIZONTAL_OFFSET: "center",
        ASPECT_RATIO: 1,
        WIDTH: .296
    },
    LANDSCAPE_SIZE: {
        VERTICAL_OFFSET: "center",
        HORIZONTAL_OFFSET: "center",
        ASPECT_RATIO: 1,
        HEIGHT: .296
    },
    constructor: function() {
        var e;
        Interface.Slots.SpinButtonMobileView.superclass.constructor.apply(this, arguments), this.canInteract = !1, e = Resources.readData("config"), this.hideSpinButtonInMobilePortrait = Sys.isObj(e) && Boolean(e.hideSpinButtonInMobilePortrait)
    },
    shouldBeHiddenByUserInput: function(e) {
        return Interface.Slots.SpinButtonMobileView.superclass.shouldBeHiddenByUserInput.apply(this, arguments) && (Utils.Platform.isLandscape() || this.hideSpinButtonInMobilePortrait)
    },
    moveButtonPosition: function(e) {
        var t, i = this;
        Sys.isDefined(e) && (Sys.isDefined(e.orientation) && (t = "portrait" === e.orientation.toLowerCase() ? "PORTRAIT" : "LANDSCAPE", Sys.isDefined(e.vertical) && (i.BUTTON_POSITION[t].LEFT.TOP = i.BUTTON_POSITION[t].LEFT.TOP + e.vertical, i.BUTTON_POSITION[t].RIGHT.TOP = i.BUTTON_POSITION[t].RIGHT.TOP + e.vertical), Sys.isDefined(e.horizontal) && (i.BUTTON_POSITION[t].LEFT.RIGHT = i.BUTTON_POSITION[t].LEFT.RIGHT + -1 * e.horizontal, i.BUTTON_POSITION[t].RIGHT.LEFT = i.BUTTON_POSITION[t].RIGHT.LEFT + e.horizontal)), i.setPosition())
    },
    setStyle: function() {
        var e = this;
        Interface.Slots.SpinButtonMobileView.superclass.setStyle.apply(e, arguments), e.model.hasProperty("hidden") ? e.hide() : e.show()
    },
    show: function(e) {
        this.container.el.style.opacity = 1, Interface.Slots.SpinButtonMobileView.superclass.show.call(this, e)
    },
    hide: function(e) {
        var t = this;
        Utils.Platform.isPortrait() && !t.hideSpinButtonInMobilePortrait ? (t.container.el.style.opacity = "0.5", t.container.el.style.display = "block", t.canInteract = !0) : (t.canInteract = !1, t.container.el.style.opacity = 1, Interface.Slots.SpinButtonMobileView.superclass.hide.call(t, e))
    },
    disable: function() {
        var e = this;
        e.model.hasProperty("hidden") && "BASIC" === e.model.readData("currentGameMode") ? e.hide() : "BASIC" !== e.model.readData("currentGameMode") && (e.fireEvent("view:show", "globalRequest"), e.fireEvent("view:enable", "notInBasicGame"), e.fireEvent("view:enable", "freespinSplash"))
    },
    disableRequested: function() {
        this.disable()
    },
    hideRequested: function(e) {
        var t = this;
        "BASIC" === t.model.readData("currentGameMode") ? t.fireEvent("view:hide", e) : "BASIC" !== t.model.readData("currentGameMode") && (t.fireEvent("view:show", "globalRequest"), t.fireEvent("view:enable", "notInBasicGame"), t.fireEvent("view:enable", "freespinSplash"))
    },
    hidden: function() {
        var e = this,
            t = Utils.Platform.isPortrait() && e.hideSpinButtonInMobilePortrait;
        return "none" === e.container.el.style.display || t && "0.5" === e.container.el.style.opacity
    },
    canInteractWhileHidden: function() {
        return this.canInteract
    }
}, Interface.Slots.SpinButtonMobileView = Sys.extend(Interface.Slots.SpinButtonBaseView, Interface.Slots.SpinButtonMobileView, "Interface.Slots.SpinButtonMobileView");
Sys.ns("Interface.Slots"), Interface.Slots.SpinButtonTabletView = {
    BUTTON_POSITION: {
        PORTRAIT: {
            LEFT: {
                TOP: .5,
                RIGHT: .82
            },
            RIGHT: {
                TOP: .5,
                LEFT: .9
            }
        },
        LANDSCAPE: {
            LEFT: {
                TOP: .5,
                RIGHT: .82
            },
            RIGHT: {
                TOP: .5,
                LEFT: .9
            }
        }
    },
    PORTRAIT_POSITION: {
        TOP: .5,
        LEFT: .9
    },
    LANDSCAPE_POSITION: {
        TOP: .5,
        LEFT: .9
    },
    PORTRAIT_SIZE: {
        VERTICAL_OFFSET: "center",
        HORIZONTAL_OFFSET: "center",
        ASPECT_RATIO: 1,
        HEIGHT: .296
    },
    LANDSCAPE_SIZE: {
        VERTICAL_OFFSET: "center",
        HORIZONTAL_OFFSET: "center",
        ASPECT_RATIO: 1,
        HEIGHT: .222
    },
    constructor: function() {
        Interface.Slots.SpinButtonTabletView.superclass.constructor.apply(this, arguments)
    },
    disable: function() {
        var e = this;
        e.model.hasProperty("hidden") && "BASIC" === e.model.readData("currentGameMode") ? e.hide() : "BASIC" !== e.model.readData("currentGameMode") && (e.fireEvent("view:show", "globalRequest"), e.fireEvent("view:enable", "notInBasicGame"), e.fireEvent("view:enable", "freespinSplash"))
    },
    disableRequested: function() {
        this.disable()
    },
    hideRequested: function(e) {
        var t = this;
        "BASIC" === t.model.readData("currentGameMode") ? t.fireEvent("view:hide", e) : "BASIC" !== t.model.readData("currentGameMode") && (t.fireEvent("view:show", "globalRequest"), t.fireEvent("view:enable", "notInBasicGame"), t.fireEvent("view:enable", "freespinSplash"))
    }
}, Interface.Slots.SpinButtonTabletView = Sys.extend(Interface.Slots.SpinButtonBaseView, Interface.Slots.SpinButtonTabletView, "Interface.Slots.SpinButtonTabletView");
Sys.ns("Interface.Slots"), Interface.Slots.SpinButtonDesktopView = {
    SOUND_UP: "buttonUp",
    SOUND_DOWN: "buttonDown",
    SOUND_HOVER: "buttonHover",
    IMAGE_UP: "spinButtonIdle",
    IMAGE_DOWN: "spinButtonDown",
    IMAGE_OVER: "spinButtonOver",
    IMAGE_DISABLED: "spinButtonDisabled",
    BUTTON_POSITION: {
        x: 589,
        y: 597,
        width: 103,
        height: 105,
        centerX: 640,
        centerY: 649,
        radius: 51
    },
    constructor: function() {
        var t = this;
        Interface.Slots.SpinButtonDesktopView.superclass.constructor.apply(t, arguments), t.pressed = !1, t.isHighlighted = !1, t.permanentHighlight = !1
    },
    initAnimations: function() {
        var t = this,
            e = new Animation.List({}),
            i = new Animation.Item({
                top: t.BUTTON_POSITION.y,
                left: t.BUTTON_POSITION.x,
                width: t.BUTTON_POSITION.width,
                height: t.BUTTON_POSITION.height,
                depth: t.getButtonDepth(),
                image: t.IMAGE_UP
            });
        e.add(i), Game.stage.view.addToRenderLoop(e), t.buttonList = e, t.buttonItem = i
    },
    getButtonDepth: function() {
        return 40
    },
    beforeLoaderClose: function() {
        this.fireEvent("view:addProperty", "visibleDuringRound", this.MODULE_NAME)
    },
    setUpDOMStructure: function() {},
    press: function() {
        var t = this;
        t.fireEvent("view:playSound", t.SOUND_DOWN), t.fireEvent("view:notify", "notify:spinButton.down"), t.buttonItem.prop.image = t.IMAGE_DOWN
    },
    release: function() {
        this.buttonItem.prop.image = this.isHighlighted ? this.IMAGE_OVER : this.IMAGE_UP
    },
    enable: function() {
        this.playButtonSpecialEffects(), this.buttonItem.prop.image = this.isHighlighted ? this.IMAGE_OVER : this.IMAGE_UP
    },
    disable: function() {
        this.removeHighlight(), this.stopButtonSpecialEffects(), this.buttonItem.prop.image = this.IMAGE_DISABLED
    },
    disableRequested: function(t) {
        this.fireEvent("view:disable", t)
    },
    userInputStart: function(t) {
        var e = this.isCollision(t) && !this.pressed;
        e && this.press(), this.model.storeData("wasInitialInputTarget", e)
    },
    userInputMove: function(t) {
        this.model.readData("wasInitialInputTarget") && this.toggleHighlight(t, !0)
    },
    userInputHover: function(t) {
        this.pressed || this.toggleHighlight(t)
    },
    userInputEnd: function(t) {
        var e, i = this;
        i.model.readData("wasInitialInputTarget") && (e = i.isCollision(t), i.release(e), e && (i.model.readData("noStopOnSpin") || i.model.storeData("noStopOnSpin", !0), i.fireEvent("view:clicked"))), i.model.storeData("wasInitialInputTarget", !1)
    },
    enableSpinningAnimations: function() {
        this.addHighlight(!1, !0), this.permanentHighlight = !0
    },
    disableSpinningAnimations: function() {
        this.permanentHighlight = !1, this.isHoveredOver || this.removeHighlight()
    },
    shouldBeHiddenByUserInput: function() {},
    hide: function() {
        var t = this;
        !t.model.hasProperty("hidden") && t.model.hasProperty("visibleDuringRound") || (t.buttonList.stop(), t.fireEvent("view:hidden"))
    },
    hidden: function() {},
    show: function() {
        this.buttonList.play(), this.fireEvent("view:shown")
    },
    setAppearance: function(t) {},
    canInteractWhileHidden: function() {
        return !1
    },
    showCounter: function() {},
    updateCounter: function() {},
    hideCounter: function() {},
    onPressedRequest: function() {
        this.pressed = !0, this.press()
    },
    onReleasedRequest: function() {
        this.pressed = !1, this.release(!0), this.fireEvent("view:clicked")
    },
    toggleHighlight: function(t, e) {
        var i = this;
        i.isCollision(t) ? (i.isHoveredOver || (i.fireEvent("view:playSound", i.SOUND_HOVER), i.fireEvent("view:notify", "notify:spinButton.hover")), i.isHoveredOver = !0, i.addHighlight(e)) : (i.isHoveredOver && (i.fireEvent("view:playSound", i.SOUND_UP), i.fireEvent("view:notify", "notify:spinButton.up")), i.isHoveredOver = !1, i.removeHighlight(e))
    },
    isCollision: function(t) {
        var e = this,
            i = Sys.UserInputUtils.getCoordinatesRelativeToElement(t, Game.stage.getGameContainer()),
            n = Environment.determineResolution().windowToVirtualScale,
            o = e.BUTTON_POSITION,
            s = Math.abs(i.x * n - o.centerX),
            r = Math.abs(i.y * n - o.centerY);
        return Math.sqrt(s * s + r * r) <= o.radius
    },
    addHighlight: function(t, e) {
        var i = this;
        i.isHighlighted && !e || i.permanentHighlight || (i.isHighlighted = !0, i.buttonItem.prop.image = i.IMAGE_OVER, t && i.press())
    },
    removeHighlight: function(t) {
        var e = this;
        e.isHighlighted && !e.permanentHighlight && (e.isHighlighted = !1, e.buttonItem.prop.image = this.IMAGE_UP, t && e.playButtonSpecialEffects())
    },
    stopButtonSpecialEffects: function() {},
    playButtonSpecialEffects: function() {},
    setFullscreenSafeArea: function() {}
}, Interface.Slots.SpinButtonDesktopView = Sys.extend(Interface.RoundStartButtonBaseView, Interface.Slots.SpinButtonDesktopView, "Interface.Slots.SpinButtonDesktopView");
Sys.ns("Interface.Slots"), Interface.Slots.MaxBetButton = {
    constructor: function() {
        Interface.Slots.MaxBetButton.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["trigger"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Interface.Slots.MaxBetButtonModel,
            controller: Interface.Slots.MaxBetButtonController,
            view: Interface.Slots.MaxBetButtonBaseView
        }
    }
}, Interface.Slots.MaxBetButton = Sys.extend(Core.Module, Interface.Slots.MaxBetButton, "Interface.Slots.MaxBetButton");
Sys.ns("Interface.Slots"), Interface.Slots.MaxBetButtonModel = {
    constructor: function() {
        Interface.Slots.MaxBetButtonModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var t = Resources.readData("gameServerInitResponseObject").betlevel.all,
            e = Resources.readData("config"),
            a = Object.keys(e.winSituationsDisplay.betlines.numbers.configurations),
            s = e.winSituationsDisplay.winSituationMinimumDisplayTime,
            n = 0;
        Interface.Slots.MaxBetButtonModel.superclass.setupData.apply(this, arguments), Sys.each(t, function(t) {
            n = Math.max(t, n)
        }), this.storeData("maxBetLevel", n), this.storeData("betlines", a), this.storeData("winSituationMinimumDisplayTime", s)
    }
}, Interface.Slots.MaxBetButtonModel = Sys.extend(Core.Model, Interface.Slots.MaxBetButtonModel, "Interface.Slots.MaxBetButtonModel");
Sys.ns("Interface.Slots"), Interface.Slots.MaxBetButtonController = {
    ROUND_START_EVENT: "request:spin.startNewRound",
    constructor: function() {
        Interface.Slots.MaxBetButtonController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:stateHandler.leavingBeforeLoaderCloseState": this.disable.bind(this, "notInIdleState"),
            "notify:stateHandler.leavingIdleState": this.onLeavingIdleState,
            "notify:stateHandler.enteringIdleState": this.enable.bind(this, "notInIdleState"),
            "notify:gameModeChanged": this.onGameModeChanged,
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "notify:freeRounds.ended": this.refreshModelData,
            "notify:freeRounds.reInitResponseReceived": this.refreshModelData,
            "view:clicked": this.onClick,
            "request:enableBasicGamePanel": this.enable,
            "request:disableBasicGamePanel": this.disable,
            "request:maxBetButton.enable": this.enable,
            "request:maxBetButton.disable": this.disable
        })
    },
    registerTriggers: function() {
        Services.trigger.registerTrigger("notify:maxBetButton.startedRound", this, "When the max bet button is clicked and started a round.")
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    onClick: function() {
        var e, t = this,
            n = Services.settingsManager.getSetting("betLevel"),
            i = t.model.readData("maxBetLevel");
        n < i ? (t.fireEvent("request:settingsManager.storeData", "betLevel", i), e = t.model.readData("betlines"), t.fireEvent("request:winSituations.showDisplayBetline", e, "maxBetButton"), setTimeout(t.fireEvent.bind(t, "request:winSituations.hideDisplayBetline", "maxBetButton"), t.model.readData("winSituationMinimumDisplayTime"))) : t.startRound()
    },
    onGameModeChanged: function(e) {
        "BASIC" === e ? this.view.show("gameModeNotBasic") : this.view.hide("gameModeNotBasic")
    },
    onLeavingIdleState: function() {
        var e = this;
        e.disable("notInIdleState"), e.fireEvent("request:winSituations.hideDisplayBetline", "maxBetButton")
    },
    startRound: function() {
        var e = this;
        e.fireEvent("request:audioPlayer.play", {
            name: "spinButtonClick"
        }), e.fireEvent(e.ROUND_START_EVENT), e.fireEvent("notify:maxBetButton.startedRound")
    },
    enable: function(e) {
        this.view.enable(e)
    },
    disable: function(e) {
        this.view.disable(e)
    },
    refreshModelData: function() {
        this.model.setupData()
    }
}, Interface.Slots.MaxBetButtonController = Sys.extend(Core.Controller, Interface.Slots.MaxBetButtonController, "Interface.Slots.MaxBetButtonController");
Sys.ns("Interface.Slots"), Interface.Slots.MaxBetButtonBaseView = {
    KEYPAD_BUTTON_CONFIG: {
        dimensions: {
            x: 700,
            y: 613,
            width: 143,
            height: 72
        },
        buttonImages: {
            up: "maxBetButtonUp",
            down: "maxBetButtonDown",
            hover: "maxBetButtonOver",
            disabled: "maxBetButtonDisabled"
        },
        buttonLabel: {
            width: 133,
            height: 67,
            text: Language.Keys.btn_maxbet,
            breakOn: "<br>",
            font: "24px NetentStandardUI",
            lineHeight: 24,
            color: "#000000",
            alignment: "center"
        }
    },
    constructor: function() {
        Interface.Slots.MaxBetButtonBaseView.superclass.constructor.apply(this, arguments)
    },
    show: function(t) {
        this.keypadButton.show(t)
    },
    hide: function(t) {
        this.keypadButton.hide(t)
    },
    enable: function(t) {
        this.keypadButton.enable(t)
    },
    disable: function(t) {
        this.keypadButton.disable(t)
    },
    onButtonClick: function() {
        this.fireEvent("view:clicked")
    },
    initAnimations: function() {
        this.setUpKeypadButton()
    },
    setUpKeypadButton: function() {
        var t = this,
            e = Sys.applyProperties({
                clickCallback: t.onButtonClick.bind(t)
            }, t.KEYPAD_BUTTON_CONFIG);
        e.buttonLabel.depth = Layering.Game.Slots.Keypad.maxBet.label, Sys.isDefined(e.buttonLayoutParameters) ? e.buttonLayoutParameters.depth = Layering.Game.Slots.Keypad.maxBet.button : e.dimensions.depth = Layering.Game.Slots.Keypad.maxBet.button, t.keypadButton = new Interface.utils.CanvasButton(e)
    },
    shouldBeHiddenByUserInput: function() {
        return !1
    }
}, Interface.Slots.MaxBetButtonBaseView = Sys.extend(Core.View, Interface.Slots.MaxBetButtonBaseView, "Interface.Slots.MaxBetButtonBaseView");
Sys.ns("Core.Slots"), Core.Slots.SpinBaseController = {
    constructor: function() {
        Core.Slots.SpinBaseController.superclass.constructor.apply(this, arguments), this.stopper = 0
    },
    setupEvents: function() {
        var e = this,
            t = {
                "request:spin.child.storeServerResponse": e.handleServerResponse,
                "request:spin.child.wantStartSpin": e.startSpin,
                "request:spin.child.wantStopSpin": e.stopSpin,
                "request:spin.child.setSymbols": e.setSymbols,
                "request:spin.child.revertSpin": e.revertSpin
            };
        t["notify:stateHandler.entering" + e.MODULE_NAME + "RestoreState"] = e.onRestore, e.on(t)
    },
    handleServerResponse: function(e) {
        var t = this;
        t.model.storeServerResponse(e), "init" === e.clientaction && (t.model.initData(), t.model.readData("active") && t.fireEvent("request:spin.activateInitReelset", "basic", t.model.readData("defaultScene")))
    },
    onRestore: function() {
        this.requestRestoreStateDialog(), this.startSpin()
    },
    requestRestoreStateDialog: function() {
        var e = this;
        e.fireEvent("request:dialogWindow.showDialog", {
            title: Services.languageManager.getText(Language.Keys.restoredGameHeader),
            text: Services.languageManager.getText(Language.Keys.continuePlaying),
            buttons: [{
                scope: e,
                text: Services.languageManager.getText(Language.Keys.btn_continue),
                action: function() {
                    e.fireEvent("notify:dialogBoxClosed", {
                        name: "restoreState",
                        button: "continue"
                    }), e.fireEvent("notify:" + e.MODULE_NAME + "RestoreStateDialog.closed")
                }
            }]
        })
    },
    activateReelset: function() {
        var e = this,
            t = e.model.readData("requestedReelset"),
            n = e.model.readData("defaultScene");
        e.model.storeData("active", !0), e.fireEvent("request:spin.activateReelset", t, n)
    },
    startSpin: function() {
        var e = this,
            t = e.model,
            n = t.readData("requestedReelset"),
            s = t.readData("defaultScene");
        t.isState("spinning") || (e.fireEvent("request:settingsWindow.close"), t.readData("spinRequested") ? (t.storeData("active", !0), t.setState("spinning"), e.fireEvent("request:spin.startSpin", n, s)) : t.storeData("active", !1))
    },
    stopSpin: function() {
        var e = this,
            t = e.model.readData("serverResponse");
        e.model.readData("active") && (e.model.setState("stopped"), e.fireEvent("request:spin.stopSpin", t.reelInfo, t.nearWinList, t))
    },
    revertSpin: function() {
        this.model.readData("active") && this.model.setState("stopped")
    }
}, Core.Slots.SpinBaseController = Sys.extend(Core.Controller, Core.Slots.SpinBaseController, "Core.Slots.SpinBaseController");
Sys.ns("Core.Slots"), Core.Slots.SpinBaseModel = {
    DEFAULT_SCENE: "base",
    constructor: function() {
        Core.Slots.SpinBaseModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        Core.Slots.SpinBaseModel.superclass.setupData.apply(this, arguments), this.storeData("defaultScene", this.DEFAULT_SCENE)
    },
    storeServerResponse: function(e) {
        this.storeData("serverResponse", e)
    },
    initData: function() {
        var e = this,
            s = Resources.readData("config");
        e.storeData("layeringConfig", s.layering)
    }
}, Core.Slots.SpinBaseModel = Sys.extend(Core.Model, Core.Slots.SpinBaseModel, "Core.Slots.SpinBaseModel");
Sys.ns("Core"), Core.Slots.SpinTypeBasic = {
    constructor: function() {
        Core.Slots.SpinTypeBasic.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        var e = this.model;
        return {
            stopped: {
                queue: [function(t) {
                    e.readData("spinRequested") && t.stateHandler.pushState(t.states.idle)
                }]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.Slots.SpinTypeBasicModel,
            controller: Core.Slots.SpinBaseController
        }
    }
}, Core.Slots.SpinTypeBasic = Sys.extend(Core.Module, Core.Slots.SpinTypeBasic, "Core.Slots.SpinTypeBasic");
Sys.ns("Core.Slots"), Core.Slots.SpinTypeBasicModel = {
    constructor: function() {
        Core.Slots.SpinTypeBasicModel.superclass.constructor.apply(this, arguments)
    },
    storeServerResponse: function(e) {
        var s, t = this;
        t.storeData("serverResponse", e), "spin" === e.nextaction ? (t.storeData("spinRequested", !0), s = e.next ? e.next.rs : "basic", t.storeData("requestedReelset", s)) : t.storeData("spinRequested", !1)
    },
    initData: function() {
        var e = this,
            s = Resources.readData("gameServerInitResponse"),
            t = !1,
            o = !1;
        Core.Slots.SpinTypeBasicModel.superclass.initData.apply(e, arguments), "spin" === s.nextaction && (t = !0, o = !0), e.storeData("active", t), e.storeData("spinRequested", o)
    }
}, Core.Slots.SpinTypeBasicModel = Sys.extend(Core.Slots.SpinBaseModel, Core.Slots.SpinTypeBasicModel, "Core.Slots.SpinTypeBasicModel");
Sys.ns("Core"), Core.Slots.SpinTypeRespin = {
    constructor: function() {
        Core.Slots.SpinTypeRespin.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        var e = this.model,
            t = {
                respinRestore: {
                    state: {
                        name: this.MODULE_NAME + "Restore",
                        execute: function(e) {},
                        waitEvents: {}
                    }
                },
                stopped: {
                    queue: [function(t) {
                        e.readData("spinRequested") && (t.stateHandler.pushState(t.states.stopped), t.stateHandler.pushState(t.states.stopping), t.stateHandler.pushState(t.states.beforeStopping), t.stateHandler.pushState(t.states.spinning))
                    }]
                },
                beforeLoaderClose: {
                    queue: [function(t) {
                        e.readData("spinRequested") && (t.stateHandler.pushState(t.states.stopped), t.stateHandler.pushState(t.states.stopping), t.stateHandler.pushState(t.states.beforeStopping), t.stateHandler.pushState(t.states.spinning), e.readData("basicRestoreState") && t.stateHandler.pushState(t.states.respinRestore))
                    }]
                }
            };
        return t.respinRestore.state.waitEvents["notify:" + this.MODULE_NAME + "RestoreStateDialog.closed"] = !1, t
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.Slots.SpinTypeRespinModel,
            controller: Core.Slots.SpinBaseController
        }
    }
}, Core.Slots.SpinTypeRespin = Sys.extend(Core.Module, Core.Slots.SpinTypeRespin, "Core.Slots.SpinTypeRespin");
Sys.ns("Core.Slots"), Core.Slots.SpinTypeRespinModel = {
    constructor: function() {
        Core.Slots.SpinTypeRespinModel.superclass.constructor.apply(this, arguments)
    },
    storeServerResponse: function(e) {
        var s, t = this;
        t.storeData("serverResponse", e), "respin" === e.nextaction || "drop" === e.nextaction ? (t.storeData("spinRequested", !0), t.storeData("basicRestoreState", "basic" === e.currentGameState && !0 === e.restore), s = e.next ? e.next.rs : "respin", t.storeData("requestedReelset", s)) : t.storeData("spinRequested", !1)
    },
    initData: function() {
        this.storeData("active", "respin" === Resources.readData("gameServerInitResponseObject").nextaction), Core.Slots.SpinTypeRespinModel.superclass.initData.apply(this, arguments)
    }
}, Core.Slots.SpinTypeRespinModel = Sys.extend(Core.Slots.SpinBaseModel, Core.Slots.SpinTypeRespinModel, "Core.Slots.SpinTypeRespinModel");
Sys.ns("Core.Slots"), Core.Slots.SpinTypeFreespin = {
    constructor: function() {
        Core.Slots.SpinTypeFreespin.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        var e = this.model;
        return {
            stopped: {
                queue: [function(t) {
                    e.readData("spinRequested") && (t.stateHandler.pushState(t.states.stopped), t.stateHandler.pushState(t.states.stopping), t.stateHandler.pushState(t.states.beforeStopping), t.stateHandler.pushState(t.states.spinning))
                }]
            },
            beforeLoaderClose: {
                queue: [function(t) {
                    e.readData("spinRequested") && (t.stateHandler.pushState(t.states.stopped), t.stateHandler.pushState(t.states.stopping), t.stateHandler.pushState(t.states.beforeStopping), t.stateHandler.pushState(t.states.spinning))
                }]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.Slots.SpinTypeFreespinModel,
            controller: Core.Slots.SpinBaseController
        }
    }
}, Core.Slots.SpinTypeFreespin = Sys.extend(Core.Module, Core.Slots.SpinTypeFreespin, "Core.Slots.SpinTypeFreespin");
Sys.ns("Core.Slots"), Core.Slots.SpinTypeFreespinModel = {
    DEFAULT_NEXT_REELSET: "freespin",
    constructor: function() {
        Core.Slots.SpinTypeFreespinModel.superclass.constructor.apply(this, arguments)
    },
    storeServerResponse: function(e) {
        var s, t, r = this,
            i = e.freespins;
        r.storeData("serverResponse", e), r.isNextFreespin(e) ? (r.storeData("spinRequested", !0), "init" === e.clientaction && (t = i.left === i.initial && i.left === i.total, r.storeData("showRestoreStateDialog", !t)), s = e.next ? e.next.rs : r.DEFAULT_NEXT_REELSET, Services.storage.storeData("freespin.freespinsLeft", i.left), r.storeData("requestedReelset", s)) : (Sys.isObj(i) && Sys.isNumber(i.left) ? Services.storage.storeData("freespin.freespinsLeft", i.left) : Services.storage.storeData("freespin.freespinsLeft", null), r.storeData("spinRequested", !1))
    },
    isNextFreespin: function(e) {
        return "freespin" === e.nextaction
    },
    initData: function() {
        var e = this,
            s = Resources.readData("gameServerInitResponse"),
            t = !1,
            r = !1;
        Core.Slots.SpinTypeFreespinModel.superclass.initData.apply(e, arguments), e.isNextFreespin(s) && (t = !0, r = !0), e.storeData("active", t), e.storeData("spinRequested", r), Services.storage.storeData("freespin.freespinsLeft", null)
    }
}, Core.Slots.SpinTypeFreespinModel = Sys.extend(Core.Slots.SpinBaseModel, Core.Slots.SpinTypeFreespinModel, "Core.Slots.SpinTypeFreespinModel");
Sys.ns("Core.Slots"), Core.Slots.StandardWin = {
    constructor: function() {
        Core.Slots.StandardWin.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        var t = this.model;
        return {
            standardWinPresentation: {
                state: {
                    name: "StandardWinPresentation",
                    execute: function() {},
                    waitEvents: {
                        "notify:standardWin.presentationComplete": !1
                    }
                }
            },
            noWinPresentation: {
                state: {
                    name: "NoWinPresentation",
                    execute: function() {},
                    waitEvents: {
                        "notify:standardWin.presentationComplete": !1
                    }
                }
            },
            stopped: {
                queue: [function(e) {
                    t.readData("isStandardWin") ? e.stateHandler.pushState(e.states.standardWinPresentation) : t.readData("isNoWin") && e.stateHandler.pushState(e.states.noWinPresentation)
                }]
            }
        }
    },
    getMixinDependencies: function() {
        return ["userInput", "waitSequence", "trigger"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.Slots.StandardWinModel,
            view: Core.View,
            controller: Core.Slots.StandardWinController
        }
    }
}, Core.Slots.StandardWin = Sys.extend(Core.Module, Core.Slots.StandardWin, "Core.Slots.StandardWin");
Sys.ns("Core.Slots"), Core.Slots.StandardWinController = {
    constructor: function() {
        Core.Slots.StandardWinController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:stateHandler.enteringStandardWinPresentationState": this.startPresentation,
            "notify:stateHandler.enteringNoWinPresentationState": this.startNoWinPresentation,
            "notify:winBanner.countUpComplete": this.onShowingTotal,
            "notify:coinsField.countUpComplete": this.onShowingTotal,
            "notify:spinButton.clicked": this.handleUserInput,
            "notify:spinButton.clickedWhileHidden": this.handleUserInput,
            "request:abortPresentation": this.handleUserInput,
            "notify:winSituationsDisplay.showingAllWins": this.waitForWinSituationsDisplay,
            "notify:responseParser.responseParsed": this.onServerResponse
        })
    },
    onServerResponse: function(t) {
        this.model.processServerResponse(t)
    },
    registerTriggers: function() {
        Services.trigger.registerTrigger("notify:standardWin.countupAborted", this, "When the countup is aborted."), Services.trigger.registerTrigger("notify:standardWin.presentationComplete", this, "When the standard win presentation has completed."), Services.trigger.registerTrigger("notify:standardWin.startPresentation", this, "When the win presentation starts.")
    },
    startPresentation: function() {
        var t = this,
            n = t.model.readData("winClip"),
            e = t.model.readData("countUpDuration"),
            i = t.model.readData("totalWinDisplayDuration");
        t.fireEvent("request:settingsWindow.close"), t.startListeningToUserInput(), t.model.setState("countingUp"), t.initializeWaitSequence("request:winSituationsDisplay.showAllWins", {
            showDuration: e + i,
            "standardWin:countUpDuration": e,
            "standardWin:showTotalDuration": i
        }), "winBanner" === t.model.readData("countUpDisplay") ? t.fireEvent("request:winBanner.animate", e) : t.fireEvent("request:coinsField.countUp", e), n && t.fireEvent("request:audioPlayer.play", {
            name: n,
            id: "winClip"
        }), t.fireEvent("notify:standardWin.startPresentation", n)
    },
    startNoWinPresentation: function() {
        var t = this,
            n = t.model.readData("noWinDisplayDuration");
        t.fireEvent("request:coinsField.showWin"), t.fireEvent("request:cashField.showWin"), t.model.storeData("inNoWinPresentation", !0), t.noWinTimeout = setTimeout(t.abortNoWinPresentation.bind(t), n)
    },
    abortNoWinPresentation: function() {
        var t = this;
        t.model.readData("inNoWinPresentation") && (clearTimeout(t.noWinTimeout), t.endPresentation(), t.model.storeData("inNoWinPresentation", !1))
    },
    onUserInputStart: function(t) {
        Sys.UserInputUtils.isCoordinateTarget(Game.stage.getGameContainer(), t) && this.handleUserInput()
    },
    handleUserInput: function() {
        var t = this;
        t.model.readData("inNoWinPresentation") ? t.abortNoWinPresentation() : t.model.isState("countingUp") ? ("winBanner" === t.model.readData("countUpDisplay") ? t.fireEvent("request:winBanner.showTotal", {
            showUntilStopped: !0
        }) : t.fireEvent("request:coinsField.showWin"), t.fireEvent("request:audioPlayer.stop", "winClip"), t.onShowingTotal(), t.fireEvent("notify:standardWin.countupAborted")) : t.model.isState("showingTotal") && t.endPresentation(!0)
    },
    onShowingTotal: function() {
        var t = this;
        t.model.isState("countingUp") && (t.model.setState("showingTotal"), t.fireEvent("notify:standardWin.showingWinTotal"), t.fireEvent("request:coinsField.showWin"), t.fireEvent("request:cashField.showWin"), -1 === t.eventsToWaitFor.indexOf("notify:winSituationsDisplay.finishedShowingAllWins") && (t.showWinTimeout = setTimeout(t.endPresentation.bind(t, !1), t.model.readData("totalWinDisplayDuration"))))
    },
    endPresentation: function(t) {
        var n = this;
        (n.model.isState("showingTotal") || n.model.readData("inNoWinPresentation")) && (n.stopListeningToUserInput(), n.model.setState("complete"), clearTimeout(n.showWinTimeout), n.fireEvent("request:winSituationsDisplay.abort"), n.fireEvent("request:audioPlayer.stop", "winClip"), "winBanner" === n.model.readData("countUpDisplay") && n.fireEvent("request:winBanner.hide"), n.model.shouldToggleWins() && n.fireEvent("request:winSituationsDisplay.toggleWins"), n.fireEvent("notify:standardWin.presentationComplete", t))
    },
    waitForWinSituationsDisplay: function() {
        this.onWaitRequested("notify:winSituationsDisplay.finishedShowingAllWins")
    },
    onWaitIsComplete: function() {
        this.endPresentation(!1)
    }
}, Core.Slots.StandardWinController = Sys.extend(Core.Controller, Core.Slots.StandardWinController, "Core.Slots.StandardWinController");
Sys.ns("Core.Slots"), Core.Slots.StandardWinModel = {
    STANDARD_WIN_TYPES: ["smallWin", "mediumWin", "largeWin"],
    COUNT_UP_DURATIONS: {
        smallWin: 1e3,
        mediumWin: 2e3,
        largeWin: 3e3
    },
    NO_WIN_DISPLAY_DURATION: 500,
    NO_WIN_DISPLAY_DESKTOP_DURATION: 0,
    TOTAL_WIN_DISPLAY_DURATION: 3e3,
    constructor: function() {
        Core.Slots.StandardWinModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = this;
        e.storeData("inFreeSpins", !1), e.storeData("noWinDisplayDuration", e.NO_WIN_DISPLAY_DURATION), e.storeData("totalWinDisplayDuration", e.TOTAL_WIN_DISPLAY_DURATION), e.setupDesktopSpecificData()
    },
    processServerResponse: function(e) {
        var t, n, i, s = this,
            a = "freespin" === e.currentGameState ? "coinsField" : "winBanner",
            o = "freespin" === e.currentGameState || "freespin" === e.nextaction;
        Sys.isDefined(e.wins) && (t = e.wins.winType, n = s.STANDARD_WIN_TYPES.contains(t), i = !Sys.isDefined(t), s.storeData("isStandardWin", n), s.storeData("isNoWin", i), s.storeData("countUpDuration", s.COUNT_UP_DURATIONS[t]), s.storeWinSound(t)), s.storeData("countUpDisplay", a), s.storeData("togglePreventedByFreeSpins", o)
    },
    storeWinSound: function(e) {
        this.storeData("winClip", e)
    },
    shouldToggleWins: function() {
        var e = Services.settingsManager.getSetting("autoPlayNrSpins");
        return !(Sys.isDefined(e) && 0 !== e || this.readData("togglePreventedByFreeSpins"))
    },
    setupDesktopSpecificData: function() {
        Platform.isDesktopDevice && this.storeData("noWinDisplayDuration", this.NO_WIN_DISPLAY_DESKTOP_DURATION)
    }
}, Core.Slots.StandardWinModel = Sys.extend(Core.Model, Core.Slots.StandardWinModel, "Core.Slots.StandardWinModel");
Sys.ns("Core"), Core.AbstractCountUp = {
    constructor: function() {
        Core.AbstractCountUp.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.CountUpModel,
            view: Core.AbstractCountUpView,
            controller: Core.AbstractCountUpController
        }
    }
}, Core.AbstractCountUp = Sys.extend(Core.CountUp, Core.AbstractCountUp, "Core.AbstractCountUp");
Sys.ns("Core"), Core.AbstractCountUpView = {
    constructor: function() {
        Core.AbstractCountUpView.superclass.constructor.apply(this, arguments)
    },
    COUNT_UP_EASING_TYPE: "ease-out",
    SHOW_TOTAL_DURATION: 1e3,
    countUpCallback: function(t) {},
    setCountUpCallback: function(t) {
        this.countUpCallback = t
    },
    createCountUpItem: function() {
        var t = this;
        return new Animation.CanvasAnimationItem({
            top: 0,
            left: 0,
            width: 0,
            height: 0,
            depth: t.COUNT_UP_DEPTH,
            executeBefore: function() {
                var e, n, a, o = this.value;
                if (t.model.readData("lastValue") !== o && (t.countUpCallback(o), t.model.storeData("lastValue", o), Sys.isDefined(this.fireOnValue)))
                    for (e = this.fireOnValue.length, a = -1; ++a < e;) n = this.fireOnValue[a], !n.fired && o >= n.value && (n.scope.fireEvent(n.event, n.argument), n.fired = !0)
            },
            operations: {}
        })
    }
}, Core.AbstractCountUpView = Sys.extend(Core.CountUpView, Core.AbstractCountUpView, "Core.AbstractCountUpView");
Sys.ns("Core"), Core.AbstractCountUpController = {
    constructor: function() {
        Core.AbstractCountUpController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var t = {};
        Core.AbstractCountUpController.superclass.setupEvents.apply(this, arguments), t["request:" + this.MODULE_NAME + ".setCallback"] = this.view.setCountUpCallback.bind(this.view), this.on(t)
    }
}, Core.AbstractCountUpController = Sys.extend(Core.CountUpController, Core.AbstractCountUpController, "Core.AbstractCountUpController");
Sys.ns("Game"), Game.AmbienceManager = {
    constructor: function() {
        Game.AmbienceManager.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Game.AmbienceManagerModel,
            controller: Game.AmbienceManagerController
        }
    }
}, Game.AmbienceManager = Sys.extend(Core.Module, Game.AmbienceManager, "Game.AmbienceManager");
Sys.ns("Game"), Game.AmbienceManagerModel = {
    constructor: function() {
        Game.AmbienceManagerModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        this.storeData("activeAmbience", [{
            name: "ambienceGeneral",
            id: "ambienceGeneral",
            loop: !0
        }]), Services.storage.storeData("AmbienceManager.playing", !1)
    },
    getActiveAmbience: function() {
        return this.readData("activeAmbience")
    },
    setActiveAmbience: function(e) {
        this.storeData("activeAmbience", e)
    }
}, Game.AmbienceManagerModel = Sys.extend(Core.Model, Game.AmbienceManagerModel, "Game.AmbienceManagerModel");
Sys.ns("Game"), Game.AmbienceManagerController = {
    constructor: function() {
        Game.AmbienceManagerController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "notify:audioPlayer.soundLoaded": e.changeAmbienceEnableState.bind(e, !0),
            "request:ambienceManager.ambienceEnableState": e.changeAmbienceEnableState,
            "request:ambienceManager.ambienceChangeActive": e.setActiveAmbience,
            "request:ambienceManager.ambiencePauseSwitch": e.changePauseSwitch,
            "request:ambienceManager.ambienceStopActive": e.stopAmbience,
            "notify:stateHandler.leavingBeforeLoaderCloseState": e.onBeforeLoaderClose
        })
    },
    onBeforeLoaderClose: function() {
        this.model.isState("ambienceOn") || this.changeAmbienceEnableState(!1), this.changePauseSwitch(!1)
    },
    changeAmbienceEnableState: function(e) {
        var t = this;
        e ? t.model.isState("ambienceOn") || (t.model.setState("ambienceOn"), t.playActiveAmbience()) : (t.stopAmbience(), t.model.setState("ambienceOff"))
    },
    changePauseSwitch: function(e) {
        var t = this;
        e ? (t.model.storeData("paused", !0), t.model.isState("ambienceOn") && t.stopAmbience()) : t.model.readData("paused") && (t.model.storeData("paused", !1), t.model.isState("ambienceOn") && t.playActiveAmbience())
    },
    playAmbience: function(e) {
        var t = this;
        t.model.isState("ambienceOn") ? t.model.readData("paused") || Sys.each(e, function(e) {
            t.dispatchPlaySoundRequest(e)
        }) : t.model.setActiveAmbience(e)
    },
    playActiveAmbience: function() {
        this.playAmbience(this.model.getActiveAmbience())
    },
    stopAmbience: function() {
        var e = this,
            t = e.model.getActiveAmbience();
        e.model.isState("ambienceOn") && Sys.each(t, function(t) {
            e.dispatchStopSoundRequest(t)
        })
    },
    setActiveAmbience: function(e) {
        var t, n = this;
        t = Sys.isArray(e) ? e : [{
            name: e.name,
            id: e.id,
            loop: e.loop,
            buffer: e.buffer,
            syncWithId: e.syncWithId,
            fadeIn: e.fadeIn,
            fadeOut: e.fadeOut
        }], n.playAmbience(t), n.stopAmbience(), n.model.setActiveAmbience(t)
    },
    dispatchPlaySoundRequest: function(e) {
        this.model.isState("ambienceOn") && this.fireEvent("request:audioPlayer.play", e)
    },
    dispatchStopSoundRequest: function(e) {
        this.model.isState("ambienceOn") && this.fireEvent("request:audioPlayer.stop", e.id)
    }
}, Game.AmbienceManagerController = Sys.extend(Core.Controller, Game.AmbienceManagerController, "Game.AmbienceManagerController");
Sys.ns("Interface.utils"), Interface.utils.CSSAnimation = {
    constructor: function(e) {
        Interface.utils.CSSAnimation.superclass.constructor.apply(this, arguments), this.init(e)
    },
    run: function(e, t) {
        var n = this;
        Sys.isDefined(t) && n.setupEvent(e, "AnimationEnd", t), e.style[n.animationType] = n.name + " " + n.duration + "ms " + n.delay + "ms", Sys.isDefined(n.timingFunction) && (e.style[n.animationType + "TimingFunction"] = n.timingFunction), Sys.isDefined(n.iterationCount) && (e.style[n.animationType + "IterationCount"] = n.iterationCount), Sys.isDefined(n.fillMode.mode) && (e.style[n.fillMode.type] = n.fillMode.mode)
    },
    removeAnimation: function(e) {
        e.style[this.animationType] = "none"
    },
    init: function(e) {
        var t = this;
        t.name = e.name, t.duration = e.duration, t.delay = Sys.isDefined(e.delay) ? e.delay : 0, t.timingFunction = e.timingFunction, t.iterationCount = e.iterationCount, t.fillMode = {
            type: Sys.utils.getPrefixedCSSProperty("animationFillMode"),
            mode: e.fillMode
        }, t.setupAnimation(e), t.animationType = Sys.utils.getPrefixedCSSProperty("animation"), t.prefixes = ["webkit", "moz", "MS", "o", ""]
    },
    setupAnimation: function(e) {
        var t = this,
            n = this.getRuleString(e);
        t.style = document.head.appendChild(document.createElement("style")), t.insertRule(n)
    },
    insertRule: function(e) {
        CSSRule.WEBKIT_KEYFRAMES_RULE ? this.style.sheet.insertRule("@-webkit-keyframes" + e, 0) : CSSRule.KEYFRAMES_RULE && this.style.sheet.insertRule("@keyframes" + e, 0)
    },
    removeRule: function(e) {
        this.style.sheet.deleteRule(e)
    },
    getRuleString: function(e) {
        for (var t, n, i, s, o, a = Object.keys(e.frames), r = a.length, l = 0, u = " " + e.name + " {"; l < r;) {
            for (t = a[l], u += " " + t, n = Object.keys(e.frames[t]), s = n.length, o = 0, u += " {"; o < s;) i = n[o], u += i + " : " + e.frames[t][i] + ";", ++o;
            u += " }", ++l
        }
        return u += " }"
    },
    setupEvent: function(e, t, n) {
        var i, s, o = this,
            a = o.prefixes;
        for (i = -1, s = a.length; ++i < s;) a[i] || (t = t.toLowerCase()), e.addEventListener(a[i] + t, n, !1)
    },
    removeEvent: function(e, t, n) {
        var i, s, o = this,
            a = o.prefixes;
        for (i = -1, s = a.length; ++i < s;) a[i] || (t = t.toLowerCase()), e.removeEventListener(a[i] + t, n, !1)
    }
}, Interface.utils.CSSAnimation = Sys.extend(Sys.Observable, Interface.utils.CSSAnimation, "Interface.utils.CSSAnimation");
Sys.ns("Interface.utils"), Interface.utils.CardNavigation = {
    CSS: {
        ARROWS: "interface-cardNavigation_arrows clearfix trim",
        ARROWS_PREVIOUS: "interface-cardNavigation_arrows_previous",
        ARROWS_CLOSE: "interface-cardNavigation_arrows_close",
        ARROWS_NEXT: "interface-cardNavigation_arrows_next",
        INDICATORS: "interface-cardNavigation_indicators clearfix utils_horizontal_center trim",
        INDICATORS_CHILD: "interface-cardNavigation_indicator",
        INDICATORS_SELECTED: "interface-cardNavigation_selectedIndicator",
        DISABLED: "interface-cardNavigation_disabled"
    },
    constructor: function(e) {
        this.currentCard = 0, Interface.utils.CardNavigation.superclass.constructor.apply(this, arguments)
    },
    getArrows: function() {
        return this.arrowContainer
    },
    getIndicators: function() {
        return this.indicatorContainer
    },
    getContainer: function(e) {
        return "arrows" === e ? this.getArrows() : "indicators" === e ? this.getIndicators() : void 0
    },
    getCurrentCardIndex: function() {
        return this.currentCard
    },
    next: function() {
        var e = this,
            t = e.currentCard + 1,
            n = !1;
        t >= e.numCards && (t = 0, n = !0), e.selectCard(t, !1, n)
    },
    previous: function() {
        var e = this,
            t = e.currentCard - 1,
            n = !1;
        t < 0 && (t = e.numCards - 1, n = !0), e.selectCard(t, !1, n)
    },
    selectCard: function(e, t, n) {
        var r = this,
            a = r.indicatorChildren;
        e >= 0 && e < r.numCards && (a[r.currentCard].removeCls(r.CSS.INDICATORS_SELECTED), a[e].addCls(r.CSS.INDICATORS_SELECTED), !0 !== t && r.selectionCallback(e, r.currentCard, n), r.currentCard = e)
    },
    enable: function() {
        var e = this;
        e.enabled = !0, e.arrowContainer.removeCls(e.CSS.DISABLED), e.indicatorContainer.removeCls(e.CSS.DISABLED), e.performActionOnSubComponent("enable")
    },
    disable: function() {
        var e = this;
        e.enabled = !1, e.arrowContainer.removeCls(e.CSS.DISABLED), e.indicatorContainer.removeCls(e.CSS.DISABLED), e.performActionOnSubComponent("disable")
    },
    close: function() {
        this.hasCloseButton && this.closeCallback()
    },
    performActionOnSubComponent: function(e) {
        var t, n = this.subComponents,
            r = n.length;
        for (t = -1; ++t < r;) n[t][e]()
    },
    setupContainer: function(e) {
        var t = this,
            n = Sys.isDefined(e.selectedCard) ? e.selectedCard : 0;
        t.numCards = e.numCards, t.selectionCallback = e.selectionCallback, t.closeCallback = e.closeCallback, t.hasCloseButton = Sys.isDefined(e.closeCallback), t.subComponents = [], t.setupArrows(e.arrowLabels), t.setupIndicators(), t.selectCard(n, !0)
    },
    setupArrows: function(e) {
        var t = this,
            n = Sys.isObj(e);
        t.arrowContainer = new Sys.Element({
            id: t.id + "_arrows",
            tag: "ul",
            cls: t.CSS.ARROWS
        }), t.previousArrow = new Interface.utils.DOMButton({
            id: "paytablePrevious",
            tag: "li",
            baseCSS: t.CSS.ARROWS_PREVIOUS,
            textContent: n && Sys.isDefined(e.previous) ? e.previous : "",
            clickCallback: t.previous.bind(t)
        }), t.arrowContainer.add(t.previousArrow.getContainer()), t.subComponents.push(t.previousArrow), t.hasCloseButton && (t.closeArrow = new Interface.utils.DOMButton({
            id: "paytableClose",
            tag: "li",
            baseCSS: t.CSS.ARROWS_CLOSE,
            textContent: n && Sys.isDefined(e.close) ? e.close : "",
            clickCallback: t.close.bind(t)
        }), t.arrowContainer.add(t.closeArrow.getContainer()), t.subComponents.push(t.closeArrow)), t.nextArrow = new Interface.utils.DOMButton({
            id: "paytableNext",
            tag: "li",
            baseCSS: t.CSS.ARROWS_NEXT,
            textContent: n && Sys.isDefined(e.next) ? e.next : "",
            clickCallback: t.next.bind(t)
        }), t.arrowContainer.add(t.nextArrow.getContainer()), t.subComponents.push(t.nextArrow)
    },
    setupIndicators: function() {
        var e, t, n = this,
            r = new Sys.Element({
                id: n.id + "indicators",
                tag: "ul",
                cls: n.CSS.INDICATORS
            }),
            a = [];
        for (t = -1; ++t < n.numCards;) e = new Interface.utils.DOMButton({
            id: "paytableIndicator_" + t,
            tag: "li",
            baseCSS: n.CSS.INDICATORS_CHILD,
            clickCallback: n.selectCard.bind(n, t)
        }), a.push(r.add(e.getContainer())), n.subComponents.push(e);
        n.indicatorContainer = r, n.indicatorChildren = a
    }
}, Interface.utils.CardNavigation = Sys.extend(Interface.utils.UserInputBase, Interface.utils.CardNavigation, "Interface.utils.CardNavigation");
Sys.ns("Interface.utils"), Interface.utils.ToggleSwitch = {
    CSS: {
        base: "interface-toggleSwitch_base",
        disabled: "interface-toggleSwitch_disabled",
        label: "interface-toggleSwitch_label",
        button_wrapper: "interface-toggleSwitch_buttonWrapper",
        button_background: "interface-toggleSwitch_buttonBackground interface-toggleSwitch_buttonBackgroundSize",
        button_handle: "interface-toggleSwitch_buttonHandle interface-toggleSwitch_buttonHandleSize",
        loadAnimation: "interface-toggleSwitch_loadAnimation interface-smallSpinner_uri hidden"
    },
    constructor: function(t) {
        Interface.utils.ToggleSwitch.superclass.constructor.apply(this, arguments)
    },
    init: function(t) {
        var e = this,
            n = t.CSS || {};
        t.cls = "string" == typeof t.cls ? t.cls : "", Sys.isDefined(n) && (e.CSS = Sys.applyIf(n, e.CSS)), e.title = t.title, e.callback = t.callback, e.turnedOn = !1, e.listensToInput = !1 !== t.listensToInput, Interface.utils.ToggleSwitch.superclass.init.apply(e, arguments)
    },
    setupContainer: function(t) {
        var e = this;
        e.container = new Sys.Element({
            id: e.id,
            tag: "div",
            cls: t.cls + " " + e.CSS.base + " off"
        }), e.title && (e.label = e.container.add(new Sys.Element({
            id: e.id + "_title",
            tag: "div",
            cls: e.CSS.label,
            textContent: e.title
        }))), e.buttonWrapper = e.container.add(new Sys.Element({
            id: e.id + "_button_wrapper",
            tag: "div",
            cls: e.CSS.button_wrapper
        })), e.background = e.buttonWrapper.add(new Sys.Element({
            id: e.id + "_button_background",
            tag: "div",
            cls: e.CSS.button_background
        })), e.handle = e.background.add(new Sys.Element({
            id: e.id + "_button_handle",
            tag: "div",
            cls: e.CSS.button_handle
        })), e.loadAnimation = e.container.add(new Sys.Element({
            id: e.id + "_loadAnimation",
            tag: "div",
            cls: e.CSS.loadAnimation
        }))
    },
    setCSS: function(t) {
        var e = this,
            n = e.container,
            a = e.button,
            i = e.CSS;
        t.base && n.replaceCSSClass(i.base, t.base), !e.enabled && t.disabled && n.replaceCSSClass(i.disabled, t.disabled), t.label && e.label.replaceCSSClass(i.label, t.label), t.button_wrapper && a.replaceCSSClass(i.button_wrapper, t.button_wrapper), t.button_background && a.replaceCSSClass(i.button_background, t.button_background), t.button_handle && a.replaceCSSClass(i.button_handle, t.button_handle), e.CSS = Sys.applyIf(t, i)
    },
    toggle: function(t, e) {
        var n = this,
            a = n.turnedOn,
            i = Sys.isDefined(t) ? t : !a;
        n.isLocked() || i !== a && (i ? n.container.replaceCSSClass("off", "on") : n.container.replaceCSSClass("on", "off"), n.turnedOn = i, e || n.callback(i))
    },
    isOn: function() {
        return this.turnedOn
    },
    onUserInputStart: function(t) {
        this.wasInitialInputTarget = Sys.UserInputUtils.isCoordinateTarget(this.buttonWrapper.el, t) && this.enabled
    },
    onUserInputEnd: function(t) {
        var e = this;
        Sys.UserInputUtils.isCoordinateTarget(e.buttonWrapper.el, t) && e.wasInitialInputTarget && e.toggle(), e.wasInitialInputTarget = !1
    },
    startListeningToUserInput: function() {
        var t = this;
        t.listensToInput && t.on({
            "notify:userInputManager.userInputStarted": t.onUserInputStart,
            "notify:userInputManager.userInputEnded": t.onUserInputEnd
        })
    },
    stopListeningToUserInput: function() {
        this.listensToInput && (this.removeListener("notify:userInputManager.userInputStarted"), this.removeListener("notify:userInputManager.userInputEnded"))
    },
    displayLoadAnimation: function() {
        this.loadAnimation.removeCls("hidden"), this.buttonWrapper.addCls("hidden")
    },
    hideLoadAnimation: function() {
        this.loadAnimation.addCls("hidden"), this.buttonWrapper.removeCls("hidden")
    },
    setValue: function(t, e) {
        this.toggle(t, e)
    }
}, Interface.utils.ToggleSwitch = Sys.extend(Interface.utils.UserInputBase, Interface.utils.ToggleSwitch, "Interface.utils.ToggleSwitch");
Sys.ns("Interface.utils"), Interface.utils.Slider = {
    CSS: {
        base: "interface-slider_base",
        disabled: "interface-slider_disabled",
        label: "interface-slider_label",
        sliderWrapper: "interface-slider_sliderWrapper",
        background: "interface-slider_background",
        handle: "utils_center interface-slider_handle",
        fill: "interface-slider_fill",
        display: "utils_center interface-slider_display",
        verticalLine: "utils_center interface-slider_verticalLine"
    },
    constructor: function() {
        Interface.utils.Slider.superclass.constructor.apply(this, arguments)
    },
    init: function(e) {
        var i, t, a = this;
        if (Sys.isArray(e.values)) i = e.values;
        else
            for (i = [], t = e.minValue; t <= e.maxValue; t = Animation.utils.toNthDecimalPlace(t + e.valueStep, 5)) i.push(t);
        Sys.isDefined(e.useStepIndicator) || (e.useStepIndicator = !0), a.callback = e.callback, a.values = i, a.callbackOnlyOnEndEvent = !0 === e.callbackOnlyOnEndEvent, a.endCallback = "function" == typeof e.endCallback ? e.endCallback : function() {}, Interface.utils.Slider.superclass.init.apply(a, arguments), a.setStartValue(e), a.selectRenderFunction(), a.transform = Sys.utils.getPrefixedCSSProperty("transform")
    },
    setStartValue: function(e) {
        var i = e.startValue,
            t = this.values,
            a = Sys.isDefined(i) && -1 !== t.indexOf(i) ? i : t[0];
        this.setValue(a, !0)
    },
    setupContainer: function(e) {
        var i, t = this;
        t.container = new Sys.Element({
            id: t.id,
            tag: "div",
            cls: t.CSS.base,
            "data-input": !0
        }), t.sliderWrapper = t.container.add(new Sys.Element({
            id: t.id + "Slider",
            tag: "div",
            cls: t.CSS.sliderWrapper
        })), t.background = t.sliderWrapper.add(new Sys.Element({
            id: t.id + "SliderBackground",
            tag: "div",
            cls: t.CSS.background
        })), t.fill = t.background.add(new Sys.Element({
            id: t.id + "Fill",
            tag: "div",
            cls: t.CSS.fill
        })), e.showLabels && (t.showLabels = !0, i = t.values[0].toString(), t.minimumLabel = t.container.addAsFirst(new Sys.Element({
            id: t.id + "Minimum",
            tag: "div",
            cls: t.CSS.label + " " + t.CSS.label + "_left",
            textContent: i
        })), i = t.values[t.values.length - 1].toString(), t.maximumLabel = t.container.add(new Sys.Element({
            id: t.id + "Maximum",
            tag: "div",
            cls: t.CSS.label + " " + t.CSS.label + "_right",
            textContent: i
        }))), t.handle = t.sliderWrapper.add(new Sys.Element({
            id: t.id + "Handle",
            tag: "div",
            cls: t.CSS.handle
        })), !1 !== e.showDisplay && (t.display = t.sliderWrapper.add(new Sys.Element({
            id: t.id + "Display",
            tag: "div",
            cls: t.CSS.display
        })), t.showDisplay = !0)
    },
    onUserInputStart: function(e) {
        var i = this,
            t = Sys.UserInputUtils.isCoordinateTarget(i.container.el, e) && i.enabled;
        i.startValue = i.value, t && i.moveSliderToCoordinate(e, i.callbackOnlyOnEndEvent), this.wasInitialInputTarget = t
    },
    onUserInputMove: function(e) {
        var i = this;
        this.wasInitialInputTarget && (i.bigDisplayShowing || (i.showDisplay && i.display.addCls("interface-slider_bigDisplay"), i.bigDisplayShowing = !0), this.animationFunction.call(window, function() {
            i.moveSliderToCoordinate(e, i.callbackOnlyOnEndEvent)
        }))
    },
    onUserInputEnd: function() {
        var e, i = this;
        i.wasInitialInputTarget && (i.animationFunction(function() {
            e = i.calculatePercentageFromValue(i.value), i.moveSlider(e, !1, !0), i.showDisplay && i.display.removeCls("interface-slider_bigDisplay"), i.bigDisplayShowing && (i.bigDisplayShowing = !1)
        }), i.endCallback(i.value)), i.wasInitialInputTarget = !1
    },
    moveSliderToCoordinate: function(e, i) {
        var t = this.calculatePercentageFromCoordinate(e);
        this.moveSlider(t, i)
    },
    calculatePercentageFromCoordinate: function(e) {
        var i = Sys.UserInputUtils.getCoordinatesRelativeToElement(e, this.sliderWrapper.el).x,
            t = this.sliderWrapper.el.offsetWidth;
        return i < 0 ? 0 : i > t ? 1 : i / t
    },
    moveSlider: function(e, i, t) {
        var a = this,
            n = Animation.utils.toNthDecimalPlace(100 * e, 2) + "%",
            l = a.getValueFromPercentage(e),
            r = a.value;
        a.fill.el.style.width = n, a.handle.el.style.marginLeft = n, a.showDisplay && (a.display.el.style.marginLeft = n), (l !== r || t) && a.setValue(l, i)
    },
    getValueFromPercentage: function(e) {
        var i = this.values;
        return i[Math.round(e * (i.length - 1))]
    },
    setValue: function(e, i) {
        var t = this;
        t.value = e, t.showDisplay && (t.display.el.textContent = e), t.wasInitialInputTarget || t.moveSlider(t.calculatePercentageFromValue(e), i), i || t.callback(e)
    },
    calculatePercentageFromValue: function(e) {
        var i = this.values;
        return i.indexOf(e) * (1 / (i.length - 1))
    },
    getValue: function() {
        return this.value
    },
    selectRenderFunction: function() {
        var e = this;
        e.animationFunction = (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(i) {
            clearTimeout(e.renderTimeout), e.renderTimeout = setTimeout(i, Math.round(1e3 / 60))
        }).bind(window)
    }
}, Interface.utils.Slider = Sys.extend(Interface.utils.UserInputBase, Interface.utils.Slider, "Interface.utils.Slider");
Sys.ns("Interface.utils"), Interface.utils.VerticalSlider = {
    CSS: {
        base: "interface-verticalSlider_base",
        disabled: "interface-slider_disabled",
        label: "interface-slider_label",
        sliderWrapper: "interface-verticalSlider_sliderWrapper",
        background: "interface-verticalSlider_background interface-soundSettings_sliderBar_background_uri",
        handle: "interface-verticalSlider_handle interface-soundSettings_sliderHandle_uri",
        fill: "interface-verticalSlider_fill interface interface-soundSettings_sliderBar_fill_uri",
        display: "utils_center interface-verticalSlider_display",
        verticalLine: "utils_center interface-slider_verticalLine"
    },
    ASCENDING_GROWTH: !1,
    constructor: function() {
        Interface.utils.VerticalSlider.superclass.constructor.apply(this, arguments)
    },
    init: function(e) {
        var i = this,
            t = !0 === e.ascendingGrowth;
        i.ASCENDING_GROWTH = t, Interface.utils.VerticalSlider.superclass.init.apply(this, arguments), t && (i.fill.el.style.top = "auto", i.fill.el.style.bottom = 0)
    },
    calculatePercentageFromCoordinate: function(e) {
        var i, t = Sys.UserInputUtils.getCoordinatesRelativeToElement(e, this.sliderWrapper.el).y,
            l = this.sliderWrapper.el.offsetHeight;
        return i = t < 0 ? 0 : t > l ? 1 : t / l, this.ASCENDING_GROWTH && (i = 1 - i), i
    },
    moveSlider: function(e, i, t) {
        var l = this,
            r = Animation.utils.toNthDecimalPlace(100 * e, 2) + "%",
            a = l.getValueFromPercentage(e),
            n = l.value;
        l.fill.el.style.height = r, r = Animation.utils.toNthDecimalPlace(100 * (l.ASCENDING_GROWTH ? 1 - e : e), 2) + "%", l.handle.el.style.top = r, (a !== n || t) && l.setValue(a, i)
    }
}, Interface.utils.VerticalSlider = Sys.extend(Interface.utils.Slider, Interface.utils.VerticalSlider, "Interface.utils.VerticalSlider");
Sys.ns("Interface.utils"), Interface.utils.CanvasValueSelector = {
    FONT_LABEL: "10px Verdana",
    FILLSTYLE_LABEL: "rgba( 238, 239, 206, 1 )",
    POSITION_OFFSET_LABEL: {
        x: 0,
        y: -18
    },
    FONT_VALUE: "bold 12px Verdana",
    FILLSTYLE_VALUE: "rgba( 238, 239, 206, 1 )",
    POSITION_OFFSET_VALUE: {
        x: 0,
        y: 9
    },
    IMAGE_RIGHT_UP: "selectorPlusUp",
    IMAGE_RIGHT_OVER: "selectorPlusUp",
    IMAGE_RIGHT_CLICK: "selectorPlusUp",
    IMAGE_RIGHT_DISABLED: "selectorPlusDisabled",
    IMAGE_RIGHT_DOWN: "selectorPlusDown",
    IMAGE_RIGHT_HOVER: "selectorPlusOver",
    IMAGE_LEFT_UP: "selectorMinusUp",
    IMAGE_LEFT_OVER: "selectorMinusUp",
    IMAGE_LEFT_CLICK: "selectorMinusUp",
    IMAGE_LEFT_DISABLED: "selectorMinusDisabled",
    IMAGE_LEFT_DOWN: "selectorMinusDown",
    IMAGE_LEFT_HOVER: "selectorMinusOver",
    HANDLE_DIMENSIONS: {
        LEFT: {
            width: 44,
            height: 52
        },
        RIGHT: {
            width: 44,
            height: 52
        }
    },
    HANDLE_POSITION_OFFSET: {
        LEFT: {
            x: 0,
            y: 0
        },
        RIGHT: {
            x: 88,
            y: 0
        }
    },
    HANDLE_COLLISION_BOX: {
        LEFT: {
            xOffset: 0,
            yOffset: 0,
            width: 44,
            height: 52
        },
        RIGHT: {
            xOffset: 0,
            yOffset: 0,
            width: 44,
            height: 52
        }
    },
    BAR_BACKGROUND: "selectorBarBackground",
    BAR_BACKGROUND_DISABLED: "selectorBarBackgroundDisabled",
    BAR_FILL: "selectorBarFill",
    BAR_FILL_DISABLED: "selectorBarFillDisabled",
    BAR_DIMENSIONS: {
        background: {
            width: 57,
            height: 7
        },
        fill: {
            width: 53,
            height: 3
        }
    },
    BAR_POSITION_OFFSET: {
        background: {
            x: 37,
            y: 36
        },
        fill: {
            x: 39,
            y: 38
        }
    },
    SLIDER_BAR_INPUT_OFFSET: {
        start: {
            width: 0,
            height: 0
        },
        move: {
            width: 0,
            height: 0
        }
    },
    constructor: function() {
        Interface.utils.CanvasValueSelector.superclass.constructor.apply(this, arguments)
    },
    init: function(t) {
        var e = this;
        Interface.utils.CanvasValueSelector.superclass.init.call(e, t), e.currentIndex = 0, e.callback = t.callback, e.label = t.label, e.valueArray = t.values, e.valueNameArray = Sys.isDefined(t.valueNames) ? t.valueNames : e.valueArray, e.basePosition = {
            x: t.x,
            y: t.y
        }, e.setupConfiguration(t), e.setupLayering(t), e.setupFontStyle(t), e.initAnimations(), !0 === t.disabled ? e.disable("CanvasValueSelector") : e.enable("CanvasValueSelector")
    },
    destroy: function() {
        this.disable("CanvasValueSelector"), this.clearAnimationLists(), this.destroyButtons()
    },
    destroyButtons: function() {
        this.buttons.LEFT.destroy(), this.buttons.RIGHT.destroy(), delete this.buttons
    },
    setupConfiguration: function(t) {
        var e = this,
            i = {
                position: {
                    offsetLabel: t.positionOffsetLabel || e.POSITION_OFFSET_LABEL,
                    offsetValue: t.positionOffsetValue || e.POSITION_OFFSET_VALUE
                },
                rightButton: t.rightButtonImage || {},
                leftButton: t.leftButtonImage || {},
                handle: {
                    positionOffset: t.handlePositionOffset || e.HANDLE_POSITION_OFFSET,
                    dimensions: t.handleDimensions || e.HANDLE_DIMENSIONS,
                    collisionBox: t.handleCollisionBox || e.HANDLE_COLLISION_BOX
                },
                bar: {
                    background: t.barBackground || e.BAR_BACKGROUND,
                    backgroundDisabled: t.barBackgroundDisabled || e.BAR_BACKGROUND_DISABLED,
                    fill: t.barFill || e.BAR_FILL,
                    fillDisabled: t.barFillDisabled || e.BAR_FILL_DISABLED,
                    dimensions: t.barDimensions || e.BAR_DIMENSIONS,
                    positionOffset: t.barPositionOffset || e.BAR_POSITION_OFFSET
                }
            };
        e.setupPositionConfig(i.position), e.setupRightButtonConfig(i.rightButton), e.setupLeftButtonConfig(i.leftButton), e.setupHandleConfig(i.handle), e.setupBarConfig(i.bar)
    },
    setupPositionConfig: function(t) {
        var e = this;
        e.POSITION_OFFSET_LABEL = t.offsetLabel || e.POSITION_OFFSET_LABEL, e.POSITION_OFFSET_VALUE = t.offsetValue || e.POSITION_OFFSET_VALUE
    },
    setupRightButtonConfig: function(t) {
        var e = this;
        t && !Sys.isEmpty(t) && (e.IMAGE_RIGHT_UP = t.up || e.IMAGE_RIGHT_UP, e.IMAGE_RIGHT_DOWN = t.down || e.IMAGE_RIGHT_DOWN, e.IMAGE_RIGHT_HOVER = t.hover || e.IMAGE_RIGHT_HOVER, e.IMAGE_RIGHT_DISABLED = t.disabled || e.IMAGE_RIGHT_DISABLED)
    },
    setupLeftButtonConfig: function(t) {
        var e = this;
        t && !Sys.isEmpty(t) && (e.IMAGE_LEFT_UP = t.up || e.IMAGE_LEFT_UP, e.IMAGE_LEFT_DOWN = t.down || e.IMAGE_LEFT_DOWN, e.IMAGE_LEFT_HOVER = t.hover || e.IMAGE_LEFT_HOVER, e.IMAGE_LEFT_DISABLED = t.disabled || e.IMAGE_LEFT_DISABLED)
    },
    setupHandleConfig: function(t) {
        var e = this;
        e.HANDLE_POSITION_OFFSET = t.positionOffset || e.HANDLE_POSITION_OFFSET, e.HANDLE_DIMENSIONS = t.dimensions || e.HANDLE_DIMENSIONS, e.HANDLE_COLLISION_BOX = t.collisionBox || e.HANDLE_COLLISION_BOX
    },
    setupBarConfig: function(t) {
        var e = this;
        e.BAR_BACKGROUND = t.background || e.BAR_BACKGROUND, e.BAR_BACKGROUND_DISABLED = t.backgroundDisabled || e.BAR_BACKGROUND_DISABLED, e.BAR_FILL = t.fill || e.BAR_FILL, e.BAR_FILL_DISABLED = t.fillDisabled || e.BAR_FILL_DISABLED, e.BAR_DIMENSIONS = t.dimensions || e.BAR_DIMENSIONS, e.BAR_POSITION_OFFSET = t.positionOffset || e.BAR_POSITION_OFFSET
    },
    setupLayering: function(t) {
        var e = t.depth;
        this.layeringConfig = {
            background: e,
            barBackground: e + 1,
            value: e + 2,
            barFrame: e + 3,
            barFill: e + 4,
            buttons: e + 4,
            label: e + 4
        }
    },
    setupFontStyle: function(t) {
        var e = this;
        e.FILLSTYLE_LABEL = t.fillstyleLabel || e.FILLSTYLE_LABEL, e.FILLSTYLE_VALUE = t.fillstyleValue || e.FILLSTYLE_VALUE, e.FONT_LABEL = t.fontLabel || e.FONT_LABEL, e.FONT_VALUE = t.fontValue || e.FONT_VALUE
    },
    initAnimations: function() {
        var t = this;
        t.initAnimationLists(), t.initCanvasButtons(t.HANDLE_POSITION_OFFSET, t.HANDLE_DIMENSIONS, t.HANDLE_COLLISION_BOX), t.initBar(), t.initValueItem(), t.initLabelItem()
    },
    initAnimationLists: function() {
        var t, e, i, n = ["VALUE", "BAR", "LABEL"],
            a = {};
        for (t = -1, e = n.length; ++t < e;) i = new Animation.List({}), a[n[t]] = i, Game.stage.view.addToRenderLoop(i);
        this.animationLists = a
    },
    clearAnimationLists: function() {
        Sys.iterate(this.animationLists, function(t, e) {
            Game.stage.view.removeFromRenderLoop(e)
        })
    },
    initCanvasButtons: function(t, e, i) {
        var n = this;
        n.buttons = {
            LEFT: n.createCanvasButton(t.LEFT, e.LEFT, i.LEFT, "LEFT"),
            RIGHT: n.createCanvasButton(t.RIGHT, e.RIGHT, i.RIGHT, "RIGHT")
        }
    },
    initBar: function() {
        var t = this;
        t.bar = new Interface.utils.CanvasStepSlider({
            images: {
                background: {
                    enabled: t.BAR_BACKGROUND,
                    disabled: t.BAR_BACKGROUND_DISABLED
                },
                fill: {
                    enabled: t.BAR_FILL,
                    disabled: t.BAR_FILL_DISABLED
                }
            },
            dimensions: {
                background: {
                    x: t.basePosition.x + t.BAR_POSITION_OFFSET.background.x,
                    y: t.basePosition.y + t.BAR_POSITION_OFFSET.background.y,
                    width: t.BAR_DIMENSIONS.background.width,
                    height: t.BAR_DIMENSIONS.background.height
                },
                fill: {
                    x: t.basePosition.x + t.BAR_POSITION_OFFSET.fill.x,
                    y: t.basePosition.y + t.BAR_POSITION_OFFSET.fill.y,
                    width: t.BAR_DIMENSIONS.fill.width,
                    height: t.BAR_DIMENSIONS.fill.height
                }
            },
            depth: {
                background: t.layeringConfig.barBackground,
                fill: t.layeringConfig.barFill
            },
            sliderInputOffsets: t.SLIDER_BAR_INPUT_OFFSET,
            values: t.valueArray,
            callback: t.onBarChanged.bind(t)
        }), t.animationLists.BAR.add(t.bar.getContainer()), t.updateBar()
    },
    initValueItem: function() {
        var t = this,
            e = Animation.utils.text.createText(0, t.FONT_VALUE, 0, [{
                fillStyle: t.FILLSTYLE_VALUE,
                drawType: "fill"
            }]);
        t.valueItem = new Animation.Item({
            top: 0,
            left: 0,
            width: 0,
            height: 0,
            depth: t.layeringConfig.value,
            image: e,
            customProps: {
                ctx: e.getContext("2d")
            }
        }), t.animationLists.VALUE.add(t.valueItem), t.updateValueItem(t.valueArray[t.currentIndex])
    },
    initLabelItem: function() {
        var t = this,
            e = Animation.utils.text.createText(t.label, t.FONT_LABEL, 0, [{
                fillStyle: t.FILLSTYLE_LABEL,
                drawType: "fill"
            }]),
            i = t.HANDLE_DIMENSIONS.RIGHT.width + t.HANDLE_POSITION_OFFSET.RIGHT.x,
            n = t.POSITION_OFFSET_LABEL,
            a = t.basePosition.x + i / 2 - e.width / 2 + n.x,
            s = t.basePosition.y + n.y;
        t.labelItem = new Animation.Item({
            top: s,
            left: a,
            width: e.width,
            height: e.height,
            depth: t.layeringConfig.label,
            image: e
        }), t.animationLists.LABEL.add(t.labelItem)
    },
    createCanvasButton: function(t, e, i, n) {
        var a = this;
        return new Interface.utils.CanvasButton({
            buttonLayoutParameters: {
                x: a.basePosition.x + t.x,
                y: a.basePosition.y + t.y,
                width: e.width,
                height: e.height,
                depth: a.layeringConfig.buttons
            },
            dimensions: {
                x: a.basePosition.x + t.x + i.xOffset,
                y: a.basePosition.y + t.y + i.yOffset,
                width: i.width,
                height: i.height
            },
            buttonImages: {
                up: a["IMAGE_" + n + "_UP"],
                down: a["IMAGE_" + n + "_DOWN"],
                hover: a["IMAGE_" + n + "_HOVER"],
                disabled: a["IMAGE_" + n + "_DISABLED"]
            },
            clickCallback: a.click.bind(a, n)
        })
    },
    click: function(t) {
        var e = this,
            i = e.getValue(t);
        this.enabled && (e.updateValueItem(i), e.callback(i))
    },
    getValue: function(t) {
        var e = this;
        return e.currentIndex = "LEFT" === t ? e.currentIndex -= 1 : e.currentIndex += 1, e.currentIndex < 0 ? e.currentIndex = 0 : e.currentIndex > e.valueArray.length - 1 && (e.currentIndex = e.valueArray.length - 1), e.valueArray[e.currentIndex]
    },
    updateValueItem: function(t) {
        var e = this,
            i = e.valueItem.prop,
            n = i.customProps.ctx,
            a = e.valueNameArray[e.valueArray.indexOf(t)],
            s = Animation.utils.text.measureText(a, e.FONT_VALUE, 0, n),
            o = e.HANDLE_DIMENSIONS.RIGHT.width + e.HANDLE_POSITION_OFFSET.RIGHT.x,
            l = e.POSITION_OFFSET_VALUE;
        i.image.width = s.width, i.image.height = s.height, i.width = s.width, i.height = s.height, i.top = e.basePosition.y + l.y, i.left = e.basePosition.x + o / 2 - i.image.width / 2 + l.x, n.clearRect(0, 0, i.width, i.height), Animation.utils.text.performOperations(a, e.FONT_VALUE, 0, s.height / 2, [{
            fillStyle: e.FILLSTYLE_VALUE,
            drawType: "fill"
        }], n)
    },
    updateBar: function() {
        var t = this;
        t.bar.setValue(t.valueArray[t.currentIndex], !0)
    },
    onBarChanged: function(t) {
        this.update(t), this.callback(t)
    },
    enable: function(t) {
        var e = this;
        e.enabled = !0, Sys.isDefined(this.animationLists) && Sys.isDefined(e.buttons) && (e.enableLeftButton(t), e.enableRightButton(t), e.bar.enable(t))
    },
    disable: function(t) {
        var e = this;
        Sys.isDefined(e.animationLists) && Sys.isDefined(e.buttons) && (e.bar.disable(t), e.disableLeftButton(t), e.disableRightButton(t), e.enabled = !1)
    },
    enableLeftButton: function(t) {
        var e = this;
        Sys.isDefined(e.buttons) && e.buttons.LEFT.enable(t)
    },
    disableLeftButton: function(t) {
        var e = this;
        Sys.isDefined(e.buttons) && e.buttons.LEFT.disable(t)
    },
    enableRightButton: function(t) {
        var e = this;
        Sys.isDefined(e.buttons) && e.buttons.RIGHT.enable(t)
    },
    disableRightButton: function(t) {
        var e = this;
        Sys.isDefined(e.buttons) && e.buttons.RIGHT.disable(t)
    },
    hide: function(t) {
        var e = this;
        Sys.iterate(e.animationLists, function(t, e) {
            e.stop()
        }), e.buttons.LEFT.hide(t), e.buttons.RIGHT.hide(t)
    },
    show: function(t) {
        var e = this;
        Sys.iterate(e.animationLists, function(t, e) {
            e.play()
        }), e.buttons.LEFT.show(t), e.buttons.RIGHT.show(t)
    },
    update: function(t) {
        var e = this,
            i = this.valueArray,
            n = i.indexOf(t),
            a = "CanvasValueSelector";
        0 === n ? (e.disableLeftButton(a), e.enableRightButton(a)) : n === i.length - 1 ? (e.disableRightButton(a), e.enableLeftButton(a)) : (e.enableLeftButton(a), e.enableRightButton(a)), Sys.isDefined(i[n]) && (e.currentIndex = n, e.updateValueItem(i[n]), e.updateBar())
    }
}, Interface.utils.CanvasValueSelector = Sys.extend(Interface.utils.UserInputBase, Interface.utils.CanvasValueSelector, "Interface.utils.CanvasValueSelector");
Sys.ns("Interface"), Interface.AbstractButton = {
    STATES: ["UP", "DOWN", "HOVER", "CLICK"],
    SOUND_UP: "buttonUp",
    SOUND_DOWN: "buttonDown",
    SOUND_CLICK: "buttonClick",
    SOUND_HOVER: "buttonHover",
    ID: "button",
    DEFAULT_USER_INPUT_EVENTS: {
        started: "notify:userInputManager.userInputStarted",
        ended: "notify:userInputManager.userInputEnded",
        move: "notify:userInputManager.userInputMove",
        hover: "notify:userInputManager.userInputHover"
    },
    constructor: function(e) {
        Interface.AbstractButton.superclass.constructor.apply(this, arguments), this.init(e)
    },
    enable: function(e) {
        this.removeProperty("disabled", e), this.tryStartListeningToUserInput()
    },
    disable: function(e) {
        this.addProperty("disabled", e), this.stopListeningToUserInput()
    },
    isEnabled: function() {
        return !this.hasProperty("disabled")
    },
    show: function(e) {
        this.removeProperty("hidden", e), this.tryStartListeningToUserInput()
    },
    hide: function(e) {
        this.addProperty("hidden", e), this.stopListeningToUserInput()
    },
    isHidden: function() {
        return !this.hasProperty("hidden")
    },
    init: function(e) {
        var t = this;
        t.dimensions = e.dimensions, t.properties = {}, Sys.isDefined(e.id) && (t.ID = e.id), Sys.isDefined(e.upCallback) ? t.upCallback = e.upCallback : t.upCallback = function() {}, Sys.isDefined(e.downCallback) ? t.downCallback = e.downCallback : t.downCallback = function() {}, Sys.isDefined(e.overCallback) ? t.overCallback = e.overCallback : t.overCallback = function() {}, Sys.isDefined(e.clickCallback) ? t.clickCallback = e.clickCallback : t.clickCallback = function() {}, Sys.isDefined(e.hoverCallback) ? t.hoverCallback = e.hoverCallback : t.hoverCallback = function() {}, t.userInputEvents = t.DEFAULT_USER_INPUT_EVENTS, Sys.isDefined(e.exclusiveUserInput) && (t.userInputEvents = {
            started: "notify:userInputManager." + e.exclusiveUserInput + "ExclusiveStart",
            ended: "notify:userInputManager." + e.exclusiveUserInput + "ExclusiveEnd",
            move: "notify:userInputManager." + e.exclusiveUserInput + "ExclusiveMove",
            hover: "notify:userInputManager." + e.exclusiveUserInput + "ExclusiveKeyUp"
        }), Sys.isDefined(e.userInputEvents) && Sys.iterate(e.userInputEvents, function(e, n) {
            t.userInputEvents[e] = n
        }), t.startListeningToUserInput(), t.state = "up", Sys.isDefined(e.sounds) && t.setupSounds(e.sounds), Sys.isDefined(Services.trigger) && t.registerTriggers()
    },
    setupSounds: function(e) {
        var t, n, s, i = this,
            r = i.STATES;
        for (t = -1, n = r.length; ++t < n;) s = r[t].toLowerCase(), Sys.isDefined(e[s]) && (i["SOUND_" + i[r[t]]] = e.state)
    },
    registerTriggers: function() {
        var e = this.ID;
        Services.trigger.registerTrigger("notify:" + e + ".up", this, "When the button returns to the up state."), Services.trigger.registerTrigger("notify:" + e + ".hover", this, "When the button is hovered."), Services.trigger.registerTrigger("notify:" + e + ".over", this, "When the button hovered but wasn't the initial input target."), Services.trigger.registerTrigger("notify:" + e + ".down", this, "When the button is pressed down."), Services.trigger.registerTrigger("notify:" + e + ".click", this, "When the button is clicked.")
    },
    up: function() {
        var e = this;
        "up" !== e.state && (e.state = "up", e.upCallback(), e.fireEvent("request:audioPlayer.play", {
            name: e.SOUND_UP
        }), e.fireEvent("notify:" + e.ID + ".up"))
    },
    click: function() {
        var e = this;
        e.clickCallback(), e.fireEvent("request:audioPlayer.play", {
            name: e.SOUND_CLICK
        }), e.fireEvent("notify:" + e.ID + ".click")
    },
    over: function() {
        var e = this;
        "over" !== e.state && (e.overCallback(), e.state = "over", e.fireEvent("notify:" + e.ID + ".over"))
    },
    down: function() {
        var e = this;
        "down" !== e.state && (e.downCallback(), e.state = "down", e.fireEvent("request:audioPlayer.play", {
            name: e.SOUND_DOWN
        }), e.fireEvent("notify:" + e.ID + ".down"))
    },
    hover: function(e) {
        var t = this;
        "hover" !== t.state && (t.hoverCallback(), t.state = "hover", e || t.fireEvent("request:audioPlayer.play", {
            name: t.SOUND_HOVER
        }), t.fireEvent("notify:" + t.ID + ".hover", e))
    },
    userInputStart: function(e) {
        var t = this,
            n = t.isInputTarget(e);
        n && t.down(), t.active = n, t.wasInitialInputTarget = n
    },
    userInputHover: function(e) {
        var t = this;
        t.isInputTarget(e) ? t.hover() : "up" !== t.state && t.up()
    },
    userInputEnd: function(e) {
        var t = this;
        t.isInputTarget(e) && t.wasInitialInputTarget ? (t.wasInitialInputTarget = !1, Utils.Platform.isTouchSupported() && Platform.isDesktopDevice ? t.up() : t.hover(!0), t.click()) : t.active && t.up()
    },
    userInputMove: function(e) {
        var t = this;
        t.isInputTarget(e) ? (t.wasInitialInputTarget ? t.down() : t.over(), t.active = !0) : (t.wasInitialInputTarget || t.active) && t.up()
    },
    tryStartListeningToUserInput: function() {
        this.hasProperty("disabled") || this.hasProperty("hidden") || this.startListeningToUserInput()
    },
    startListeningToUserInput: function() {
        var e = this;
        Sys.isDefined(e.userInputEvents.started) && e.addListener(e.userInputEvents.started, e.userInputStart), Sys.isDefined(e.userInputEvents.started) && e.addListener(e.userInputEvents.ended, e.userInputEnd), Sys.isDefined(e.userInputEvents.move) && e.addListener(e.userInputEvents.move, e.userInputMove), Sys.isDefined(e.userInputEvents.hover) && e.addListener(e.userInputEvents.hover, e.userInputHover)
    },
    stopListeningToUserInput: function() {
        var e = this;
        Sys.isDefined(e.userInputEvents.started) && e.removeListener(e.userInputEvents.started), Sys.isDefined(e.userInputEvents.ended) && e.removeListener(e.userInputEvents.ended), Sys.isDefined(e.userInputEvents.move) && e.removeListener(e.userInputEvents.move), Sys.isDefined(e.userInputEvents.hover) && e.removeListener(e.userInputEvents.hover)
    },
    isInputTarget: function(e) {
        var t = this,
            n = Sys.UserInputUtils.getCoordinatesRelativeToElement(e, Game.stage.getGameContainer());
        return t.isDOMElement(t.dimensions) ? Sys.UserInputUtils.isCoordinateTarget(t.dimensions, e) : Sys.UserInputUtils.isUserInputInSegment(n, t.dimensions)
    },
    isDOMElement: function(e) {
        return 1 === e.nodeType
    },
    hasProperty: function(e) {
        var t = this.properties[e];
        return Sys.isDefined(t) && t.length > 0
    },
    addProperty: function(e, t) {
        var n = this.properties,
            s = !1;
        Sys.isDefined(n[e]) ? n[e].contains(t) || (s = 0 === n[e].length, n[e].push(t)) : (n[e] = [t], s = !0), s && this.update()
    },
    removeProperty: function(e, t) {
        var n = this.properties[e];
        Sys.isDefined(n) && n.contains(t) && (n.splice(n.indexOf(t), 1), 0 === n.length && this.update())
    },
    update: function() {}
}, Interface.AbstractButton = Sys.extend(Sys.Observable, Interface.AbstractButton, "Interface.AbstractButton");
Sys.ns("Interface.utils"), Interface.utils.AbstractUserInputBase = {
    constructor: function(t) {
        Interface.utils.AbstractUserInputBase.superclass.constructor.apply(this, arguments), this.init(t)
    },
    enable: function() {
        this.enabled = !0, this.startListeningToUserInput()
    },
    disable: function() {
        this.enabled = !1, this.stopListeningToUserInput()
    },
    isEnabled: function() {
        return this.enabled
    },
    init: function(t) {
        var n = this;
        n.id = t.id, n.listensToInput = !1 !== t.listensToInput, t.enabled ? n.enable() : n.disable()
    },
    onUserInputStart: function() {},
    onUserInputEnd: function() {},
    startListeningToUserInput: function() {
        this.listensToInput && this.on({
            "notify:userInputManager.userInputStarted": this.onUserInputStart,
            "notify:userInputManager.userInputEnded": this.onUserInputEnd
        })
    },
    stopListeningToUserInput: function() {
        this.listensToInput && (this.removeListener("notify:userInputManager.userInputStarted"), this.removeListener("notify:userInputManager.userInputEnded"))
    }
}, Interface.utils.AbstractUserInputBase = Sys.extend(Sys.Observable, Interface.utils.AbstractUserInputBase, "Interface.utils.AbstractUserInputBase");
Sys.ns("Interface.utils"), Interface.utils.AbstractSlider = {
    constructor: function(t) {
        var e = this;
        Interface.utils.AbstractControlList.superclass.constructor.apply(e, arguments), e.callback = t.callback, e.wasInitialInputTarget = !1, e.properties = {}, e.setUpContent(t)
    },
    setUpContent: function() {},
    enable: function(t) {
        this.removeProperty("disabled", t), this.tryStartListeningToUserInput()
    },
    disable: function(t) {
        this.addProperty("disabled", t), this.stopListeningToUserInput()
    },
    tryStartListeningToUserInput: function() {
        this.hasProperty("disabled") || this.hasProperty("hidden") || this.startListeningToUserInput()
    },
    startListeningToUserInput: function() {
        var t = this;
        t.on({
            "notify:userInputManager.userInputStarted": t.userInputStart,
            "notify:userInputManager.userInputEnded": t.userInputEnd,
            "notify:userInputManager.userInputMove": t.userInputMove
        })
    },
    stopListeningToUserInput: function() {
        var t = this;
        t.removeListener("notify:userInputManager.userInputStarted"), t.removeListener("notify:userInputManager.userInputEnded"), t.removeListener("notify:userInputManager.userInputMove")
    },
    hasProperty: function(t) {
        var e = this.properties[t];
        return Sys.isDefined(e) && e.length > 0
    },
    addProperty: function(t, e) {
        var n = this.properties,
            r = !1;
        Sys.isDefined(n[t]) ? n[t].contains(e) || (r = 0 === n[t].length, n[t].push(e)) : (n[t] = [e], r = !0), r && this.update()
    },
    removeProperty: function(t, e) {
        var n = this.properties[t];
        Sys.isDefined(n) && n.contains(e) && (n.splice(n.indexOf(e), 1), 0 === n.length && this.update())
    },
    userInputMove: function(t) {
        var e = this;
        e.wasInitialInputTarget && e.movedTo(t)
    },
    userInputEnd: function(t) {
        var e = this;
        e.wasInitialInputTarget && e.isInputTarget(t) && e.clickedAt(t)
    },
    userInputStart: function(t) {
        var e = this;
        e.wasInitialInputTarget = e.isInputTarget(t)
    },
    update: function() {},
    setValue: function() {},
    clickedAt: function() {},
    movedTo: function() {},
    isInputTarget: function() {}
}, Interface.utils.AbstractSlider = Sys.extend(Sys.Observable, Interface.utils.AbstractSlider, "Interface.utils.AbstractSlider");
Sys.ns("Interface.utils"), Interface.utils.AbstractOptionScroller = {
    constructor: function() {
        Interface.utils.AbstractOptionScroller.superclass.constructor.apply(this, arguments)
    },
    onUserInputStart: function(t) {
        this.initialInputTarget = this.getInputTarget(t)
    },
    onUserInputEnd: function(t) {
        var n = this,
            r = n.getInputTarget(t),
            i = n.initialInputTarget;
        Sys.isDefined(i) && r === i ? n.scroll(r) : Sys.isObj(r) && Sys.isObj(i) && r.value === i.value ? n.callback(r) : n.initialInputTarget = void 0
    },
    init: function(t) {
        Interface.utils.AbstractOptionScroller.superclass.init.apply(this, arguments), this.callback = t.callback
    },
    getInputTarget: function(t) {},
    scroll: function(t) {}
}, Interface.utils.AbstractOptionScroller = Sys.extend(Interface.utils.AbstractUserInputBase, Interface.utils.AbstractOptionScroller, "Interface.utils.AbstractOptionScroller");
Sys.ns("Interface.utils"), Interface.utils.AbstractInputField = {
    constructor: function() {
        Interface.utils.AbstractInputField.superclass.constructor.apply(this, arguments)
    },
    init: function(t) {
        Interface.utils.AbstractInputField.superclass.init.apply(this, arguments), this.callback = t.callback
    },
    onKeyUp: function(t) {
        var e, s = this;
        s.enabled && s.active && (e = s.getValue(t), s.setValue(e), s.callback(e))
    },
    getValue: function(t) {},
    setValue: function(t) {}
}, Interface.utils.AbstractInputField = Sys.extend(Interface.utils.AbstractUserInputBase, Interface.utils.AbstractInputField, "Interface.utils.AbstractInputField");
Sys.ns("Interface.utils"), Interface.utils.AbstractControlList = {
    constructor: function(t) {
        var n = this;
        Interface.utils.AbstractControlList.superclass.constructor.apply(n, arguments), n.callback = t.callback, n.model = new Core.Model({
            name: t.id + "ControlListModel"
        }), n.controls = {}, n.setUpContent(t)
    },
    setUpContent: function(t) {},
    getContainer: function() {},
    getControl: function(t) {
        return this.controls[t]
    }
}, Interface.utils.AbstractControlList = Sys.extend(Sys.Observable, Interface.utils.AbstractControlList, "Interface.utils.AbstractControlList");
Sys.ns("Interface.utils"), Interface.utils.AbstractCheckBoxWithInput = {
    constructor: function(t) {
        var e = this;
        Interface.utils.AbstractCheckBoxWithInput.superclass.constructor.apply(e, arguments), e.callback = t.callback, e.model = new Core.Model({
            name: t.id + "CheckBoxWithInputModel"
        }), e.setUpContent(t)
    },
    setUpContent: function() {},
    getContainer: function() {}
}, Interface.utils.AbstractCheckBoxWithInput = Sys.extend(Sys.Observable, Interface.utils.AbstractCheckBoxWithInput, "Interface.utils.AbstractCheckBoxWithInput");
Sys.ns("Interface.utils"), Interface.utils.CanvasButton = {
    constructor: function(t) {
        Interface.utils.CanvasButton.superclass.constructor.apply(this, arguments), this.setUpAnimations(t)
    },
    destroy: function() {
        this.disable("CanvasButton"), Game.stage.view.removeFromRenderLoop(this.animationList)
    },
    down: function() {
        Interface.utils.CanvasButton.superclass.down.apply(this, arguments), this.setActiveAnimation(this.downAnimation)
    },
    up: function() {
        Interface.utils.CanvasButton.superclass.up.apply(this, arguments), this.setActiveAnimation(this.upAnimation)
    },
    hover: function() {
        Interface.utils.CanvasButton.superclass.hover.apply(this, arguments), this.setActiveAnimation(this.hoverAnimation)
    },
    setActiveAnimation: function(t) {
        this.activeAnimation = t, this.update()
    },
    update: function() {
        var t = this;
        t.animationList.stop(), t.hasProperty("hidden") || (t.hasProperty("disabled") ? (t.textLabelAnimation.prop.ownOpacity = .32, t.animationList.play(t.disabledAnimation)) : (t.textLabelAnimation.prop.ownOpacity = 1, t.animationList.play(t.activeAnimation)), t.animationList.play(t.textLabelAnimation))
    },
    isInputTarget: function(t) {
        var n = this,
            e = Sys.UserInputUtils.getCoordinatesRelativeToElement(t, Game.stage.getGameContainer());
        return Sys.UserInputUtils.isUserInputInSegment(e, n.dimensions) && Sys.UserInputUtils.isCoordinateTarget(n.canvasElement, t)
    },
    init: function(t) {
        Interface.utils.CanvasButton.superclass.init.apply(this, arguments), this.canvasElement = t.canvasElement ? t.canvasElement : document.getElementById("canvasAnimationManager")
    },
    setUpAnimations: function(t) {
        var n, e, i = this,
            a = new Animation.List({}),
            s = t.buttonImages,
            o = t.buttonLabel;
        ["up", "down", "hover", "disabled"].forEach(function(o) {
            n = i.verifyImage(s[o]), e = new Animation.Item(i.createBaseConfig(n, t.buttonLayoutParameters)), i[o + "Animation"] = e, a.add(e)
        }), Sys.isDefined(o) ? i.textLabelAnimation = i.createTextLabel(o) : i.textLabelAnimation = new Animation.Item({}), a.add(i.textLabelAnimation), a.stop(), Game.stage.view.addToRenderLoop(a), i.animationList = a, i.setActiveAnimation(i.upAnimation)
    },
    verifyImage: function(t) {
        return 0 === t.indexOf("#") || 0 === t.indexOf("rgba") ? this.createButtonImage(t) : t
    },
    createTextLabel: function(t) {
        var n = this,
            e = t.text,
            i = t.offsetY || 0,
            a = t.offsetX || 0,
            s = 0,
            o = t.width,
            r = t.height,
            m = Animation.utils.getInMemoryCanvas(o, r),
            u = Services.languageManager.hasText(e) ? Services.languageManager.getText(e) : e;
        return "center" === t.alignment && (m.ctx.textAlign = t.alignment, s = o / 2), Animation.utils.text.wrapCanvasText(u, t.font, s, 0, o, t.lineHeight, [{
            fillStyle: t.color,
            drawType: "fill"
        }], m.ctx, !0, t.breakOn), new Animation.Item({
            width: o,
            height: r,
            left: n.dimensions.x + Math.round(Math.abs((o - n.dimensions.width) / 2)) + a,
            top: n.dimensions.y + Math.round(Math.abs((r - n.dimensions.height) / 2)) + i,
            depth: t.depth,
            image: m.canvas
        })
    },
    createBaseConfig: function(t, n) {
        var e = Sys.isDefined(n) ? n : this.dimensions;
        return {
            width: e.width,
            height: e.height,
            left: e.x,
            top: e.y,
            depth: e.depth,
            image: t
        }
    },
    createButtonImage: function(t) {
        var n, e = this,
            i = document.createElement("canvas");
        return i.width = e.dimensions.width, i.height = e.dimensions.height, n = i.getContext("2d"), n.fillStyle = t, n.fillRect(0, 0, e.dimensions.width, e.dimensions.height), i
    }
}, Interface.utils.CanvasButton = Sys.extend(Interface.AbstractButton, Interface.utils.CanvasButton, "Interface.utils.CanvasButton");
Sys.ns("Interface.utils"), Interface.utils.CanvasStepSlider = {
    DEFAULT_CANVAS_ELEMENT_ID: "canvasAnimationManager",
    constructor: function(e) {
        var t = this;
        t.canvasElement = Sys.isDefined(e.canvasElement) ? e.canvasElement : document.getElementById(t.DEFAULT_CANVAS_ELEMENT_ID), t.dimensions = e.dimensions, t.depth = e.depth, t.images = e.images, t.valueArray = e.values, t.sliderInputOffsets = e.sliderInputOffsets || {
            start: {
                width: 0,
                height: 0
            },
            move: {
                width: 0,
                height: 0
            },
            end: {
                width: 0,
                height: 0
            }
        }, Sys.isDefined(e.collisionDimensions) ? t.collisionDimensions = e.collisionDimensions : t.collisionDimensions = e.dimensions.background, t.stepWidth = t.dimensions.fill.width / t.valueArray.length, t.currentIndex = 0, Interface.utils.CanvasStepSlider.superclass.constructor.apply(t, arguments)
    },
    setUpAnimations: function() {
        var e = this;
        e.animationList = new Animation.List({}), e.backgroundAnimation = e.createItem(e.images.background.enabled, e.dimensions.background, e.depth.background), e.fillAnimation = e.createItem(e.images.fill.enabled, e.dimensions.fill, e.depth.fill), e.animationList.add(e.backgroundAnimation), e.animationList.add(e.fillAnimation), e.animationList.play(), e.update()
    },
    getContainer: function() {
        return this.animationList
    },
    createItem: function(e, t, i) {
        return new Animation.CanvasAnimationItem({
            width: t.width,
            height: t.height,
            top: t.y,
            left: t.x,
            depth: i,
            image: e
        })
    },
    setUpContent: function(e) {
        this.setUpAnimations(e)
    },
    localCoordinates: function(e) {
        return Sys.UserInputUtils.getCoordinatesRelativeToElement(e, Game.stage.getGameContainer())
    },
    relativeCoordinates: function(e) {
        var t = this,
            i = t.localCoordinates(e);
        return {
            x: i.x - t.collisionDimensions.x,
            y: i.y - t.collisionDimensions.y
        }
    },
    isInputTarget: function(e, t) {
        var i = this,
            n = i.localCoordinates(e),
            a = t || {
                width: 0,
                height: 0
            },
            s = {
                x: i.collisionDimensions.x - a.width / 2,
                y: i.collisionDimensions.y - a.height / 2,
                width: i.collisionDimensions.width + a.width,
                height: i.collisionDimensions.height + a.height
            };
        return Sys.UserInputUtils.isUserInputInSegment(n, s) && Sys.UserInputUtils.isCoordinateTarget(i.canvasElement, e)
    },
    userInputStart: function(e) {
        var t = this;
        t.wasInitialInputTarget = t.isInputTarget(e, t.sliderInputOffsets.start), t.on({
            "notify:userInputManager.userInputMove": t.userInputMove
        })
    },
    userInputMove: function(e) {
        var t = this;
        t.wasInitialInputTarget && (t.isInputTarget(e, t.sliderInputOffsets.move) ? t.movedTo(e) : t.removeListener("notify:userInputManager.userInputMove"))
    },
    userInputEnd: function(e) {
        var t = this;
        t.wasInitialInputTarget && t.isInputTarget(e, t.sliderInputOffsets.end) && t.clickedAt(e)
    },
    update: function() {
        var e = this;
        e.fillAnimation.prop.width = e.stepWidth + e.stepWidth * e.currentIndex, e.hasProperty("hidden") || (e.hasProperty("disabled") ? (e.backgroundAnimation.prop.image = e.images.background.disabled, e.fillAnimation.prop.image = e.images.fill.disabled) : (e.backgroundAnimation.prop.image = e.images.background.enabled, e.fillAnimation.prop.image = e.images.fill.enabled))
    },
    setValue: function(e, t) {
        var i = this,
            n = i.valueArray.indexOf(e);
        n >= 0 && Sys.isDefined(i.valueArray[n]) && (i.currentIndex = n, i.update(), t || i.sendValueUpdate())
    },
    getValue: function() {
        var e = this;
        return e.valueArray[e.currentIndex]
    },
    sendValueUpdate: function() {
        var e = this,
            t = e.getValue();
        e.callback(t)
    },
    updateFromCoordinates: function(e) {
        var t = this,
            i = Math.floor(e.x / t.stepWidth),
            n = t.valueArray.length - 1;
        i < 0 ? i = 0 : i > n && (i = n), i !== t.currentIndex && (t.currentIndex = i, t.update(), t.sendValueUpdate())
    },
    clickedAt: function(e) {
        var t = this,
            i = t.relativeCoordinates(e);
        t.updateFromCoordinates(i)
    },
    movedTo: function(e) {
        var t = this,
            i = t.relativeCoordinates(e);
        t.updateFromCoordinates(i)
    }
}, Interface.utils.CanvasStepSlider = Sys.extend(Interface.utils.AbstractSlider, Interface.utils.CanvasStepSlider, "Interface.utils.CanvasStepSlider");
Sys.ns("Interface.utils"), Interface.utils.DOMControlList = {
    constructor: function(t) {
        Interface.utils.DOMControlList.superclass.constructor.apply(this, arguments), this.callback = t.callback
    },
    setUpContent: function(t) {
        var e, n, i, s, o = this,
            a = t.controls;
        for (o.container = new Sys.Element({
                id: t.id,
                tag: "ul",
                cls: "",
                renderTo: "gameWrapper"
            }), e = 0; e < a.length; e++) n = a[e], s = o.container.add(new Sys.Element({
            id: t.id + "_" + n.id,
            tag: "li"
        })), Sys.isDefined(o.controls[n.id]) || (o.controls[n.id] = []), "checkbox" === n.type && (Sys.isDefined(n.withInput) ? (i = o.setupCheckBoxWithInput(n.id, n.label, n.withInput), o.controls[n.id].push(i), s.add(i.getContainer())) : (i = o.setupCheckBox(n.id, n.label), o.controls[n.id].push(i), s.add(i.getContainer())), o.model.storeData(n.id, !1))
    },
    setupCheckBoxWithInput: function(t, e, n) {
        var i = this;
        return new Interface.utils.DOMCheckBoxWithInput({
            id: t,
            label: i.getTranslatedText(e),
            inputConfig: n,
            callback: i.onControlChanged.bind(i)
        })
    },
    onControlChanged: function(t, e) {
        this.model.storeData(t, e), this.callback(t, e)
    },
    setupCheckBox: function(t, e) {
        var n = this;
        return new Interface.utils.DOMCheckBox({
            id: t,
            title: n.getTranslatedText(e),
            enabled: !0,
            callback: n.onControlChanged.bind(n, t)
        })
    },
    getContainer: function() {
        return this.container
    },
    update: function(t, e) {
        var n = this.controls[t];
        this.model.storeData(t, e), Sys.isDefined(n) && Sys.each(n, function(t) {
            t.setValue(e)
        })
    },
    hide: function(t) {
        var e = this.controls[t];
        Sys.isDefined(e) && Sys.each(e, function(t) {
            t.getContainer().el.parentElement.style.display = "none"
        })
    },
    show: function(t) {
        var e = this.controls[t];
        Sys.isDefined(e) && Sys.each(e, function(t) {
            t.getContainer().el.parentElement.style.display = ""
        })
    },
    disable: function(t) {
        var e = this.controls[t];
        Sys.isDefined(e) && Sys.each(e, function(t) {
            t.disable()
        })
    },
    enable: function(t) {
        var e = this.controls[t];
        Sys.isDefined(e) && Sys.each(e, function(t) {
            t.enable()
        })
    },
    getTranslatedText: function(t) {
        return Services.languageManager.hasText(t) ? Services.languageManager.getText(t) : t
    }
}, Interface.utils.DOMControlList = Sys.extend(Interface.utils.AbstractControlList, Interface.utils.DOMControlList, "Interface.utils.DOMControlList");
Sys.ns("Interface.utils"), Interface.utils.DOMCheckBoxWithInput = {
    DEFAULT_INPUT_TYPE: "money",
    DEFAULT_INPUT_FILTER: /[^\d]/g,
    DEFAULT_CLEAR_ON_FOCUS: !1,
    DEFAULT_CHECKBOX_VALUE: !1,
    DEFAULT_INPUT_VALUE: "",
    NOT_CHECKED_VALUE: !1,
    NOT_DEFINED_INPUT_VALUE: "",
    constructor: function(e) {
        var t = this;
        t.checkBox = void 0, t.input = void 0, Interface.utils.DOMCheckBoxWithInput.superclass.constructor.apply(t, arguments), t.setupEvents()
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "notify:userInputManager.userInputStarted": e.onUserInputStart,
            "notify:userInputManager.userInputEnded": e.onUserInputEnd
        })
    },
    setUpContent: function(e) {
        var t = this;
        t.id = e.id, t.checkBoxId = t.id + "CheckBox", t.inputId = t.id + "Input", t.container = new Sys.Element({
            id: t.id,
            tag: "div",
            cls: ""
        }), t.checkBox = t.setUpCheckBox(e.label), t.input = t.setUpInput(e.inputConfig), t.container.add(t.checkBox.getContainer()), t.container.add(t.input.getContainer())
    },
    getContainer: function() {
        return this.container
    },
    setValue: function(e) {
        var t, n, i = this;
        !1 === e ? (t = !1, n = "") : (t = !0, n = e), i.setCheckBoxValue(t), i.setInputValue(n)
    },
    getValue: function() {
        var e = this,
            t = e.model.readData(e.checkBoxId),
            n = e.model.readData(e.inputId);
        return t && n !== e.NOT_DEFINED_INPUT_VALUE ? n : e.NOT_CHECKED_VALUE
    },
    enable: function() {
        this.checkBox.enable(), this.input.enable()
    },
    disable: function() {
        this.checkBox.disable(), this.input.disable()
    },
    setUpCheckBox: function(e) {
        var t = this,
            n = t.checkBoxId;
        return t.model.storeData(n, t.DEFAULT_CHECKBOX_VALUE), new Interface.utils.DOMCheckBox({
            id: n,
            enabled: !0,
            title: e,
            listensToInput: !1,
            callback: t.onCheckBoxToggled.bind(t)
        })
    },
    setUpInput: function(e) {
        var t = this,
            n = t.inputId,
            i = Sys.isDefined(e.type) ? e.type : t.DEFAULT_INPUT_TYPE;
        return t.model.storeData(n, t.DEFAULT_INPUT_VALUE), new Interface.utils.DOMInputField({
            id: n,
            enabled: !0,
            listensToInput: !1,
            label: Sys.isDefined(e.label) ? e.label : "",
            callback: t.onInputFieldEdited.bind(t, i),
            clearOnFocus: Sys.isDefined(e.clearOnFocus) ? e.clearOnFocus : t.DEFAULT_CLEAR_ON_FOCUS,
            inputFilter: Sys.isDefined(e.inputFilter) ? e.inputFilter : t.DEFAULT_INPUT_FILTER,
            blurCallback: function() {
                t.model.readData(n).length <= 0 && t.setCheckBoxValue(!1)
            }
        })
    },
    onCheckBoxToggled: function(e) {
        var t = this,
            n = t.checkBoxId;
        t.model.storeData(n, e), e && t.input.setActive(!0), t.sendValueUpdate()
    },
    onInputFieldEdited: function(e, t) {
        var n, i = this,
            a = i.inputId;
        "" === t ? n = i.NOT_DEFINED_INPUT_VALUE : "money" === e ? (n = Math.floor(100 * Number(t)), n = isNaN(n) ? i.NOT_DEFINED_INPUT_VALUE : n) : n = t, n !== i.NOT_DEFINED_INPUT_VALUE && i.setCheckBoxValue(!0), i.model.storeData(a, n), i.sendValueUpdate(), i.setCheckBoxValue(i.model.readData(a) > 0)
    },
    sendValueUpdate: function() {
        var e = this,
            t = e.getValue();
        e.callback(e.id, t)
    },
    setCheckBoxValue: function(e) {
        var t = this;
        t.checkBox.setValue(e), t.model.storeData(t.checkBoxId, e)
    },
    setInputValue: function(e) {
        var t = this;
        t.input.setValue(e), t.model.storeData(t.inputId, e)
    },
    onUserInputStart: function(e) {
        this.initialInputTarget = this.getSelectedElement(e)
    },
    onUserInputEnd: function(e) {
        var t = this,
            n = this.getSelectedElement(e);
        t.initialInputTarget === n && (n instanceof Interface.utils.ToggleSwitch ? n.toggle() : n instanceof Interface.utils.DOMInputField && n.setActive(!0)), t.initialInputTarget = null
    },
    getSelectedElement: function(e) {
        var t = null;
        return [this.checkBox, this.input].forEach(function(n) {
            if (Sys.UserInputUtils.isCoordinateTarget(n.getContainer().el, e) && n.enabled) return void(t = n)
        }), t
    }
}, Interface.utils.DOMCheckBoxWithInput = Sys.extend(Interface.utils.AbstractCheckBoxWithInput, Interface.utils.DOMCheckBoxWithInput, "Interface.utils.DOMControlList");
Sys.ns("Interface.utils"), Interface.utils.DOMCheckBox = {
    CSS: {
        base: "interface-checkBox_base",
        disabled: "disabled",
        label: "interface-checkBox_label",
        button_wrapper: "interface-checkBox_box",
        button_background: "interface-checkBox_background",
        button_handle: "interface-checkBox_handle",
        loadAnimation: ""
    },
    constructor: function() {
        Interface.utils.DOMCheckBox.superclass.constructor.apply(this, arguments)
    }
}, Interface.utils.DOMCheckBox = Sys.extend(Interface.utils.ToggleSwitch, Interface.utils.DOMCheckBox, "Interface.utils.DOMCheckBox");
Sys.ns("Interface.utils"), Interface.utils.DOMInputField = {
    CSS: {
        base: "interface-inputField_base",
        label: "interface-inputField_label",
        input: "interface-inputField_input"
    },
    constructor: function() {
        Interface.utils.DOMInputField.superclass.constructor.apply(this, arguments)
    },
    onUserInputStart: function(e) {
        this.wasInitialInputTarget = Sys.UserInputUtils.isCoordinateTarget(this.container.el, e)
    },
    onUserInputEnd: function(e) {
        var t = this.wasInitialInputTarget && Sys.UserInputUtils.isCoordinateTarget(this.container.el, e);
        this.setActive(t)
    },
    enable: function() {
        Interface.utils.DOMInputField.superclass.enable.apply(this, arguments), this.container.removeCls("disabled"), this.input.el.disabled = !1
    },
    disable: function() {
        Interface.utils.DOMInputField.superclass.enable.apply(this, arguments), this.container.addCls("disabled"), this.input.el.disabled = !0
    },
    getContainer: function() {
        return this.container
    },
    init: function(e) {
        this.setUpDOMStructure(e), Interface.utils.DOMInputField.superclass.init.apply(this, arguments), this.clearOnFocus = e.clearOnFocus
    },
    setUpDOMStructure: function(e) {
        var t, n = this;
        t = Sys.isDefined(e.CSS) ? Sys.applyPropertiesIf(Sys.applyProperties({}, e.CSS), n.CSS) : n.CSS, n.container = new Sys.Element({
            id: e.id,
            tag: "div",
            cls: t.base
        }), Sys.isDefined(e.label) && (n.label = n.container.add(new Sys.Element({
            id: e.id + "_label",
            tag: "span",
            cls: t.label,
            textContent: e.label
        }))), n.input = n.container.add(new Sys.Element({
            id: e.id + "_input",
            tag: "input",
            cls: t.input
        })), n.id = Sys.isDefined(e.id) ? e.id : "DOMInputField", n.input.el.onkeyup = n.onKeyUp.bind(n, e.inputFilter), n.input.el.onfocus = n.onFocusChanged.bind(n, !0), n.input.el.onblur = n.onFocusChanged.bind(n, !1), Sys.isDefined(e.blurCallback) ? n.blurCallback = e.blurCallback : n.blurCallback = function() {}
    },
    setActive: function(e) {
        var t = this;
        t.active = e, e && t.enabled ? (t.container.addCls("active"), t.input.el.focus(), t.clearOnFocus && (t.input.el.value = "", t.onKeyUp())) : (t.container.removeCls("active"), t.input.el.blur())
    },
    getValue: function(e) {
        return e ? this.input.el.value.replace(e, "") : this.input.el.value
    },
    setValue: function(e) {
        var t = this;
        t.input.el.value !== e && (t.input.el.value = e)
    },
    onFocusChanged: function(e) {
        var t = this;
        e ? t.fireEvent("request:keyboardManager.addProperty", "disabled", t.id) : (t.fireEvent("request:keyboardManager.removeProperty", "disabled", t.id), t.blurCallback())
    }
}, Interface.utils.DOMInputField = Sys.extend(Interface.utils.AbstractInputField, Interface.utils.DOMInputField, "Interface.utils.DOMInputField");
Sys.ns("Interface.utils"), Interface.utils.DOMOptionScroller = {
    CSS: {
        base: "interface-DOMOptionScroller_base",
        buttonBase: "interface-DOMOptionScroller_buttonBase",
        buttonUp: "interface-DOMOptionScroller_buttonUp interface-DOMOptionScroller_buttonUp_uri",
        buttonDown: "interface-DOMOptionScroller_buttonDown interface-DOMOptionScroller_buttonDown_uri",
        valuesHolder: "interface-DOMOptionScroller_valuesHolder",
        value: "interface-DOMOptionScroller_value interface-DOMOptionScroller_value_uri",
        wrapper: "interface-DOMOptionScroller_valueWrapper"
    },
    PIXEL_FACTOR: .01,
    constructor: function() {
        Interface.utils.DOMOptionScroller.superclass.constructor.apply(this, arguments)
    },
    onUserInputStart: function() {},
    onUserInputEnd: function() {},
    enable: function() {
        Interface.utils.DOMOptionScroller.superclass.enable.apply(this, arguments), this.container.removeCls("disabled")
    },
    disable: function() {
        Interface.utils.DOMOptionScroller.superclass.enable.apply(this, arguments), this.container.addCls("disabled")
    },
    getContainer: function() {
        return this.container
    },
    init: function(e) {
        this.setUpDOMStructure(e), Interface.utils.DOMOptionScroller.superclass.init.apply(this, arguments)
    },
    setUpDOMStructure: function(e) {
        var t, l = this,
            n = Sys.applyIf(Sys.apply({}, e.CSS), l.CSS);
        l.id = e.id || "DOMOptionScroller", l.valueChilds = [], l.valueButtons = [], l.wrapperChilds = [], l.avg = 0, l.container = new Sys.Element({
            id: l.id,
            tag: "div",
            cls: n.base
        }), l.downButton = new Interface.utils.DOMButton({
            id: l.id + "_downButton",
            baseCSS: n.buttonBase + " " + n.buttonDown,
            clickCallback: function() {
                l.scroll("down")
            }
        }), l.downButton.disable("lowerBoundReached"), l.container.add(l.downButton.getContainer()), l.values = l.container.add(new Sys.Element({
            id: l.id + "_values",
            tag: "div",
            cls: n.valuesHolder
        })), l.valuesScroller = l.values.add(new Sys.Element({
            id: l.id + "_valuesScroller",
            tag: "div",
            style: "position:absolute; height:100%;white-space: nowrap;"
        })), l.valuesScroller.el.style[Sys.utils.getPrefixedCSSProperty("transition")] = "transform 100ms", Sys.each(e.values, function(r, o) {
            var i, a = !1;
            Sys.isDefined(e.replaceTextByIndex) && Sys.each(e.replaceTextByIndex, function(e) {
                o === e.index && (i = e.text, e.skip && (a = !0))
            }), a || (t = new Interface.utils.DOMButton({
                id: "value" + r,
                baseCSS: n.value,
                textContent: Sys.isDefined(i) ? i : r,
                clickCallback: function() {
                    l.callback(r)
                }
            }), l.valuesScroller.add(t.getContainer()), l.valueChilds.push(t.getContainer()), l.valueButtons.push(t))
        }), l.upButton = new Interface.utils.DOMButton({
            id: l.id + "_upButton",
            baseCSS: n.buttonBase + " " + n.buttonUp,
            clickCallback: function() {
                l.scroll("up")
            }
        }), l.container.add(l.upButton.getContainer()), l.calculateOffsetValues(), l.valueWidth = e.valueWidth, l.scrollOffsetModifier = e.scrollOffsetModifier, l.scrollOffset = l.scrollOffsetModifier * e.valueWidth, l.currentScrollOffset = 0, l.maxScrollOffset = 0, l.minScrollOffset = -((e.values.length - 1) * l.valueWidth - l.scrollOffset), l.minScrollOffset >= l.currentScrollOffset && l.upButton.disable("upperBoundReached")
    },
    calculateOffsetValues: function() {
        var e = this,
            t = 0;
        Sys.each(e.valueChilds, function(e) {
            e.el.clientWidth > 0 && (t += e.el.clientWidth)
        }), t > 0 && (e.scrollOffset = t / e.valueChilds.length * e.scrollOffsetModifier), e.totalValueWidth = t
    },
    scroll: function(e) {
        var t = this,
            l = "up" === e ? -1 : 1;
        Sys.isDefined(t.totalValueWidth) && 0 !== t.tot || t.calculateOffsetValues(), t.currentScrollOffset = Math.max(Math.min(t.currentScrollOffset + l * t.scrollOffset, t.maxScrollOffset), t.minScrollOffset), t.valuesScroller.el.style[Sys.utils.getPrefixedCSSProperty("transform")] = "translate3d(" + t.currentScrollOffset * t.PIXEL_FACTOR + "rem,0,0)", t.currentScrollOffset === t.minScrollOffset ? t.upButton.disable("upperBoundReached") : t.upButton.enable("upperBoundReached"), 0 === t.currentScrollOffset ? t.downButton.disable("lowerBoundReached") : t.downButton.enable("lowerBoundReached")
    }
}, Interface.utils.DOMOptionScroller = Sys.extend(Interface.utils.AbstractOptionScroller, Interface.utils.DOMOptionScroller, "Interface.utils.DOMOptionScroller");
Sys.ns("Interface.utils"), Interface.utils.DOMButton = {
    BASE_CSS: "DOMButton",
    textContent: "",
    container: void 0,
    renderTo: void 0,
    constructor: function() {
        Interface.utils.DOMButton.superclass.constructor.apply(this, arguments)
    },
    init: function(t) {
        var e = this;
        e.id = t.id, e.BASE_CSS = t.baseCSS || e.BASE_CSS, e.textContent = t.textContent || e.textContent, e.tagType = t.tag || "div", e.renderTo = t.renderTo, e.setupContainer(), Interface.utils.DOMButton.superclass.init.apply(e, arguments)
    },
    up: function() {
        Interface.utils.DOMButton.superclass.up.apply(this, arguments), this.update()
    },
    down: function() {
        Interface.utils.DOMButton.superclass.down.apply(this, arguments), this.update()
    },
    hover: function() {
        Interface.utils.DOMButton.superclass.hover.apply(this, arguments), this.update()
    },
    getContainer: function() {
        return this.container
    },
    setupContainer: function() {
        var t = this;
        t.container = new Sys.Element({
            id: t.id,
            tag: t.tagType,
            cls: t.BASE_CSS,
            textContent: t.textContent,
            renderTo: t.renderTo
        })
    },
    isInputTarget: function(t) {
        return Sys.UserInputUtils.isCoordinateTarget(this.container.el, t)
    },
    update: function() {
        var t = this,
            e = t.container;
        e.removeCSSClass("hidden"), e.removeCSSClass("disabled"), e.removeCSSClass("active"), e.removeCSSClass("hover"), e.removeCSSClass("down"), t.hasProperty("hidden") && e.addCSSClass("hidden"), t.hasProperty("disabled") ? e.addCSSClass("disabled") : t.hasProperty("active") ? e.addCSSClass("active") : "hover" === t.state ? e.addCSSClass("hover") : "down" === t.state && e.addCSSClass("down")
    }
}, Interface.utils.DOMButton = Sys.extend(Interface.AbstractButton, Interface.utils.DOMButton, "Interface.utils.DOMButton");
Sys.ns("Interface.utils"), Interface.utils.DOMScrollableContent = {
    constructor: function(e) {
        Interface.utils.DOMScrollableContent.superclass.constructor.apply(this, arguments)
    },
    setupContainer: function(e) {
        var l = this,
            t = e.snap;
        l.content = e.content, l.model = new Core.Model({}), l.container = new Sys.Element({
            id: l.id + "_container",
            tag: "div",
            cls: l.CSS.base
        }), l.container.add(l.content), l._scroller = new Scroller(l.onScroll.bind(l), {
            scrollingX: !1,
            snapping: Sys.isObj(t),
            speedMultiplier: 1.5 / Services.scaling.getScale(),
            scrollingComplete: l.onScrollComplete.bind(l, e.scrollCompleteCallback)
        }), Sys.isObj(t) && l._scroller.setSnapSize(t.width, t.height)
    },
    onScroll: function(e, l) {
        var t = this;
        t.content.el.style[Sys.utils.getPrefixedCSSProperty("transform")] = "translate3d(0," + -l + "px,0)", Sys.isDefined(t.scrollBar) && t.moveScrollIndicator(l)
    },
    onScrollComplete: function(e) {
        var l = this,
            t = l._scroller,
            o = t.getValues().top;
        l.model.isState("scrollingByProxy") || t.scrollTo(0, o, !1), Sys.isDefined(e) && e(o)
    },
    show: function() {
        var e = this;
        e.container.el.style.display = "block", e.updateScrollerDimensions(), e.isScrollBarVisible && e.showScrollBar()
    },
    hide: function() {
        this.container.el.style.display = "none", this.hideScrollBar()
    },
    enable: function() {
        Interface.utils.DOMScrollableContent.superclass.enable.apply(this, arguments), this.updateScrollerDimensions()
    },
    onUserInputStart: function(e) {
        var l = this,
            t = l.model;
        l.contentIsScrollable() && (Sys.isDefined(l.scrollBar) && Sys.UserInputUtils.isCoordinateTarget(l.scrollBar.el, e) ? (t.setState("scrollingByProxy"), l.onBarIndicatorMove(e)) : Sys.UserInputUtils.isCoordinateTarget(l.content.el, e) && (t.setState("scrolling"), l._scroller.doTouchStart([{
            pageX: e.x,
            pageY: e.y
        }], Date.now())), !t.isState("scrolling") && !t.isState("scrollingByProxy") || t.readData("hasSetDimensions") || (l.updateScrollerDimensions(), t.storeData("hasSetDimensions", !0)))
    },
    contentIsScrollable: function() {
        var e = this;
        return e.container.el.clientHeight < e.content.el.scrollHeight + 20
    },
    updateScrollerDimensions: function() {
        var e, l, t, o, r, n = this;
        e = n.container.el.clientHeight, l = n.content.el.scrollHeight, n._scroller.setDimensions(n.container.el.clientWidth, e + 20, n.content.el.scrollWidth, l + 60), o = n.container.el.getBoundingClientRect(), n._scroller.setPosition(o.left + n.container.clientLeft, o.top + n.container.clientTop), e > 0 && l > 0 && (r = e < l + 20), r ? (Sys.isDefined(n.scrollBar) || n.addScrollBar(), n.isScrollBarVisible = !0, n.showScrollBar(), t = n.scrollBar.el.clientHeight, n.scrollIndicatorHeight = n.scrollIndicator.el.clientHeight, n.maxScroll = n._scroller.getScrollMax().top, n.scrollBarHeight = t - n.scrollIndicatorHeight) : Sys.isDefined(n.scrollBar) && (n.isScrollBarVisible = !1, n.hideScrollBar())
    },
    onUserInputMove: function(e) {
        var l = this;
        l.contentIsScrollable() && (l.model.isState("scrolling") ? l._scroller.doTouchMove([{
            pageX: e.x,
            pageY: e.y
        }], Date.now()) : l.model.isState("scrollingByProxy") && l.onBarIndicatorMove(e))
    },
    onUserInputEnd: function() {
        var e = this,
            l = e.model,
            t = l.isState("scrolling") || l.isState("scrollingByProxy");
        l.setState("idle"), t && e._scroller.doTouchEnd(Date.now())
    },
    onUserInputScroll: function(e, l) {
        var t = this,
            o = t.model,
            r = Sys.UserInputUtils.isCoordinateTarget(t.content.el, e),
            n = Sys.isDefined(t.scrollBar) && Sys.UserInputUtils.isCoordinateTarget(t.scrollBar.el, e);
        (r || n) && t.contentIsScrollable() && (o.setState("scrollingByProxy"), t._scroller.scrollBy(0, l.deltaY || 30 * l.detail, !1), o.readData("hasSetDimensions") || (t.updateScrollerDimensions(), o.storeData("hasSetDimensions", !0)))
    },
    moveScrollIndicator: function(e) {
        var l = this,
            t = l.maxScroll,
            o = Math.round(l.scrollIndicatorHeight / 2);
        e < 0 ? e = 0 : e > t && (e = t), l.scrollIndicator.el.style.top = Math.round(l.scrollBarHeight * (e / t) + o) + "px"
    },
    onBarIndicatorMove: function(e) {
        var l, t = this,
            o = Sys.UserInputUtils.getCoordinatesRelativeToElement(e, t.scrollBar.el),
            r = o.y,
            n = t.scrollBarHeight;
        r < 0 ? r = 0 : r > n && (r = n), l = Math.round(t.maxScroll * (r / n)), t._scroller.scrollTo(0, l, !0)
    },
    addScrollBar: function() {
        var e = this;
        Sys.isDefined(e.container) && (e.maxScroll = 0, e.scrollBar = e.container.add(new Sys.Element({
            tag: "div",
            id: e.id + "_scrollbar",
            class: "interface-scrollableContent_scrollBar"
        })), e.scrollBarBackground = e.scrollBar.add(new Sys.Element({
            tag: "div",
            class: "interface-scrollableContent_scrollBarBackground utils_horizontal_center"
        })), e.scrollIndicator = e.scrollBar.add(new Sys.Element({
            tag: "div",
            class: "interface-scrollableContent_scrollBarHandle utils_center"
        })))
    },
    showScrollBar: function() {
        Sys.isDefined(this.scrollBar) && (this.scrollBar.el.style.display = "block")
    },
    hideScrollBar: function() {
        Sys.isDefined(this.scrollBar) && (this.scrollBar.el.style.display = "none")
    },
    startListeningToUserInput: function() {
        Interface.utils.DOMScrollableContent.superclass.startListeningToUserInput.apply(this, arguments), this.addListener("notify:userInputManager.userInputScroll", this.onUserInputScroll)
    },
    stopListeningToUserInput: function() {
        Interface.utils.DOMScrollableContent.superclass.stopListeningToUserInput.apply(this, arguments), this.removeListener("notify:userInputManager.userInputScroll")
    },
    scrollTo: function(e) {
        var l = this._scroller;
        l.scrollTo(0, e, !1), l.options.scrollingComplete(l.getValues().top)
    }
}, Interface.utils.DOMScrollableContent = Sys.extend(Interface.utils.UserInputBase, Interface.utils.DOMScrollableContent, "Interface.utils.DOMScrollableContent");
Sys.ns("Interface.utils"), Interface.utils.GroupTitle = {
    CSS: {
        base: "interface-groupTitle_base",
        disabled: "interface-groupTitle_disabled",
        label: "interface-groupTitle_label"
    },
    constructor: function(e) {
        Interface.utils.GroupTitle.superclass.constructor.apply(this, arguments)
    },
    init: function(e) {
        var t = this,
            l = e.CSS;
        Sys.isDefined(l) && (t.CSS = Sys.applyIf(l, t.CSS)), t.title = e.title, Interface.utils.GroupTitle.superclass.init.apply(t, arguments)
    },
    setupContainer: function(e) {
        var t = this;
        t.container = new Sys.Element({
            id: t.id,
            tag: "div",
            cls: e.cls + " " + t.CSS.base
        }), t.title && (t.label = t.container.add(new Sys.Element({
            id: t.id + "_title",
            tag: "div",
            cls: t.CSS.label,
            textContent: t.title
        })))
    },
    setCSS: function(e) {
        var t = this,
            l = t.container,
            a = t.CSS;
        e.base && l.replaceCSSClass(a.base, e.base), !t.enabled && e.disabled && l.replaceCSSClass(a.disabled, e.disabled), e.label && t.label.replaceCSSClass(a.label, e.label), t.CSS = Sys.applyIf(e, a)
    }
}, Interface.utils.GroupTitle = Sys.extend(Interface.utils.UserInputBase, Interface.utils.GroupTitle, "Interface.utils.GroupTitle");
Sys.ns("Interface"), Interface.SettingsSection = {
    constructor: function() {
        Interface.SettingsSection.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["userInput", "orientation"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.Model,
            view: Interface.SettingsSectionView,
            controller: Interface.SettingsSectionController
        }
    }
}, Interface.SettingsSection = Sys.extend(Core.Module, Interface.SettingsSection, "Interface.SettingsSection");
Sys.ns("Interface"), Interface.SettingsSectionController = {
    constructor: function() {
        Interface.SettingsSectionController.superclass.constructor.apply(this, arguments), this.setUpContent()
    },
    setupEvents: function() {
        var e = this,
            n = {
                "view:addToContainer": e.addViewToContainer,
                "view:removeFromContainer": e.removeViewFromContainer,
                "view:addToNavigator": e.addOptionToNavigator,
                "view:userAction": e.onUserAction,
                "view:disableSetting": e.disableSetting,
                "view:showRequest": e.onShowRequest,
                "view:hideRequest": e.onHideRequest,
                "notify:stateHandler.enteringIdleState": e.onEnteringIdleState,
                "notify:stateHandler.leavingIdleState": e.onLeavingIdleState,
                "request:enableBasicGamePanel": e.onEnableBasicGamePanel,
                "request:disableBasicGamePanel": e.onDisableBasicGamePanel,
                "notify:featureSplash.showing": e.onFeatureSplashShowing,
                "notify:featureSplash.closed": e.onFeatureSplashClosed
            };
        n["request:" + e.MODULE_NAME + ".show"] = e.onShowRequest, n["request:" + e.MODULE_NAME + ".hide"] = e.onHideRequest, n["request:" + e.MODULE_NAME + ".enable"] = e.enable, n["request:" + e.MODULE_NAME + ".disable"] = e.disable, e.on(n)
    },
    setUpContent: function() {
        this.view.setUpContent()
    },
    onShowRequest: function(e) {
        var n = this,
            t = n.model.readData("currentContainer");
        n.model.readData("showing") || (Sys.isDefined(t) ? n.fireEvent("request:" + t + ".openChild", n.MODULE_NAME, e) : n.show(e)), Services.storage.storeData(n.MODULE_NAME + ".showing", !0)
    },
    onHideRequest: function() {
        var e = this,
            n = e.model.readData("currentContainer");
        e.model.readData("showing") && (Sys.isDefined(n) ? e.fireEvent("request:" + n + ".closeChild", e.MODULE_NAME) : e.hide()), Services.storage.storeData(e.MODULE_NAME + ".showing", !1)
    },
    addViewToContainer: function(e, n) {
        var t = this,
            i = this.model.readData("currentContainer");
        i && t.removeViewFromContainer(i), t.model.storeData("currentContainer", e), t.addListener("notify:" + e + ".openedChild", t.containerOpenedChild), t.addListener("notify:" + e + ".closedChild", t.containerClosedChild), t.fireEvent("request:" + e + ".addChild", t.MODULE_NAME, n)
    },
    containerOpenedChild: function(e, n) {
        e === this.MODULE_NAME && this.show(n)
    },
    containerClosedChild: function(e) {
        e === this.MODULE_NAME && this.hide()
    },
    show: function(e) {
        var n = this;
        n.model.readData("showing") || (n.model.storeData("showing", !0), Services.storage.storeData(n.MODULE_NAME + ".showing", !0), n.fireEvent("notify:" + n.MODULE_NAME + ".shown"), n.view.show(e), n.startListeningToUserInput())
    },
    hide: function() {
        var e = this;
        e.model.readData("showing") && (e.model.storeData("showing", !1), Services.storage.storeData(e.MODULE_NAME + ".showing", !1), e.fireEvent("notify:" + e.MODULE_NAME + ".hidden"), e.stopListeningToUserInput(), e.view.hide())
    },
    removeViewFromContainer: function(e, n) {
        var t = this;
        t.removeListener("notify:" + e + ".openedChild"), t.removeListener("notify:" + e + ".closedChild"), t.fireEvent("request:" + e + ".removeChild", t.MODULE_NAME, n)
    },
    addOptionToNavigator: function(e, n) {
        this.fireEvent("request:" + e + ".addChild", this.MODULE_NAME, n)
    },
    onUserAction: function() {},
    onUserInputStart: function() {
        this.view.onUserInputStart.apply(this.view, arguments)
    },
    onUserInputMove: function() {
        this.view.onUserInputMove.apply(this.view, arguments)
    },
    onUserInputEnd: function() {
        this.view.onUserInputEnd.apply(this.view, arguments)
    },
    onUserInputScroll: function() {
        this.view.onUserInputScroll.apply(this.view, arguments)
    },
    enable: function(e) {
        this.model.storeData("disabled", !1), this.view.enable(e)
    },
    disable: function(e) {
        this.model.storeData("disabled", !0), this.view.disable(e)
    },
    onPortrait: function() {
        this.model.storeData("hasSetDimensions", !1), Mixins.orientation.controller.methods.onPortrait.apply(this, arguments)
    },
    onLandscape: function() {
        this.model.storeData("hasSetDimensions", !1), Mixins.orientation.controller.methods.onLandscape.apply(this, arguments)
    },
    onLeavingIdleState: function() {
        var e = this;
        Sys.isDefined(e.view.onLeavingIdleState) && e.view.onLeavingIdleState()
    },
    onEnteringIdleState: function() {
        var e = this;
        Sys.isDefined(e.view.onEnteringIdleState) && e.view.onEnteringIdleState()
    },
    onEnableBasicGamePanel: function(e) {
        var n = this;
        Sys.isDefined(n.view.onEnableBasicGamePanel) && n.view.onEnableBasicGamePanel(e)
    },
    onDisableBasicGamePanel: function(e) {
        var n = this;
        Sys.isDefined(n.view.onDisableBasicGamePanel) && n.view.onDisableBasicGamePanel(e)
    },
    onFeatureSplashShowing: function() {
        var e = this;
        Sys.isDefined(e.view.onFeatureSplashShowing) && e.view.onFeatureSplashShowing()
    },
    onFeatureSplashClosed: function() {
        var e = this;
        Sys.isDefined(e.view.onFeatureSplashClosed) && e.view.onFeatureSplashClosed()
    },
    disableSetting: function(e) {
        this.fireEvent("request:settingsManager.disableSetting", e)
    }
}, Interface.SettingsSectionController = Sys.extend(Core.Controller, Interface.SettingsSectionController, "Interface.SettingsSectionController");
Sys.ns("Interface"), Interface.SettingsSectionModel = {
    constructor: function() {
        Interface.SettingsSectionModel.superclass.constructor.apply(this, arguments)
    },
    initData: function(e) {
        var t = this,
            a = e.defaultValue,
            n = !Sys.isDefined(e.silent) || e.silent;
        e.settingsManager && (e.localStorage && !e.ignoreLocalStorageValue && Services.localStorageManager.hasData(e.key) && (a = Sys.utils.parseValue(Services.localStorageManager.readData(e.key))), Services.settingsManager.storeSetting(e.key, a, e.localStorage, n)), t.storeData(e.key, a)
    },
    setupData: function() {
        Services.storage.storeData(this.MODULE_NAME + ".showing", !1)
    }
}, Interface.SettingsSectionModel = Sys.extend(Core.Model, Interface.SettingsSectionModel, "Interface.SettingsSectionModel");
Sys.ns("Interface"), Interface.SettingsSectionView = {
    SCROLL_BAR_CSS: "interface-settingsSection_scrollBar",
    SCROLL_INDICATOR_CSS: "interface-settingsSection_scrollIndicator utils_center",
    DISABLE_BUTTON_DURING_SPIN: !0,
    ENABLED_ONLY_IN_BASIC_GAME: !1,
    DISABLE_BUTTON_DURING_FEATURE_SPLASH: !0,
    LANDSCAPE_HEIGHT: 0,
    PORTRAIT_HEIGHT: 0,
    constructor: function() {
        Interface.SettingsSectionView.superclass.constructor.apply(this, arguments)
    },
    setUpContent: function() {
        this.container = new Sys.Element({
            tag: "div"
        })
    },
    addContainerToSettings: function() {},
    addScrolling: function() {
        var t = this;
        Sys.isDefined(t.container) && Sys.isDefined(t.container.parent) && (t._wrapper = t.container.parent, t._scroller = new Scroller(t.onScroll.bind(t), {
            scrollingX: !1,
            speedMultiplier: 1.5 / Services.scaling.getScale()
        }))
    },
    onScroll: function(t, e) {
        var n = this;
        n.container.el.style[Sys.utils.getPrefixedCSSProperty("transform")] = "translate3d(0," + -e + "px,0)", Sys.isDefined(n.scrollBar) && n.moveScrollIndicator(e)
    },
    show: function() {
        var t = this;
        t.container.el.style.display = "block", t.updateScrollerDimensions(), t.isScrollBarVisible && t.showScrollBar(), t.model.readData("disabled") || t.callFunctionOnSubComponents("startListeningToUserInput")
    },
    hide: function() {
        this.container.el.style.display = "none", this.hideScrollBar(), this.callFunctionOnSubComponents("stopListeningToUserInput")
    },
    enable: function() {},
    disable: function() {},
    adaptToOrientation: function() {
        var t = this;
        Mixins.orientation.view.methods.adaptToOrientation.apply(this, arguments), clearTimeout(t.orientationAdaptationTimeout), t.orientationAdaptationTimeout = setTimeout(function() {
            t.updateScrollerDimensions()
        }, 50)
    },
    onUserInputStart: function(t) {
        var e = this,
            n = e.model;
        e.contentIsScrollable() && !e.userInputOnSubControl(t) && (Sys.isDefined(e.scrollBar) && Sys.UserInputUtils.isCoordinateTarget(e.scrollBar.el, t) ? (n.setState("scrollingByProxy"), e.onBarIndicatorMove(t)) : Sys.UserInputUtils.isCoordinateTarget(e.container.el, t) && (n.setState("scrolling"), e._scroller.doTouchStart([{
            pageX: t.x,
            pageY: t.y
        }], Date.now())), !n.isState("scrolling") && !n.isState("scrollingByProxy") || n.readData("hasSetDimensions") || (e.updateScrollerDimensions(), n.storeData("hasSetDimensions", !0)))
    },
    userInputOnSubControl: function(t) {
        var e = this,
            n = e.container.el.querySelectorAll("[data-input]"),
            i = !1;
        return Sys.each(n, function(e) {
            Sys.UserInputUtils.isCoordinateTarget(e, t) && (i = !0)
        }), i
    },
    contentIsScrollable: function() {
        var t = this;
        return t._wrapper.el.clientHeight + 40 < t.container.el.scrollHeight
    },
    updateScrollerDimensions: function() {
        var t = this;
        Platform.isChromeForIOS ? window.setTimeout(function() {
            t.setScrollerDimensions()
        }, 500) : t.setScrollerDimensions()
    },
    setScrollerDimensions: function() {
        var t, e, n, i, o, s = this,
            r = Utils.Platform.getOrientation();
        Sys.isDefined(s._wrapper) && (r === Utils.Platform.LANDSCAPE && 0 === this.LANDSCAPE_HEIGHT && (this.LANDSCAPE_HEIGHT = s._wrapper.el.clientHeight), r === Utils.Platform.PORTRAIT && 0 === this.PORTRAIT_HEIGHT && (this.PORTRAIT_HEIGHT = s._wrapper.el.clientHeight), t = r === Utils.Platform.LANDSCAPE ? this.LANDSCAPE_HEIGHT : this.PORTRAIT_HEIGHT, e = s.container.el.scrollHeight, s._scroller.setDimensions(s._wrapper.el.clientWidth, t + 20, s.container.el.scrollWidth, e + 40), i = s._wrapper.el.getBoundingClientRect(), s._scroller.setPosition(i.left + s._wrapper.clientLeft, i.top + s._wrapper.clientTop), t > 0 && e > 0 && (o = t + 40 < e), o ? (Sys.isDefined(s.scrollBar) || s.addScrollBar(), s.isScrollBarVisible = !0, s.showScrollBar(), n = s.scrollBar.el.clientHeight, s.scrollIndicatorHeight = s.scrollIndicator.el.clientHeight, s.maxScroll = s._scroller.getScrollMax().top, s.scrollBarHeight = n - s.scrollIndicatorHeight) : Sys.isDefined(s.scrollBar) && (s.isScrollBarVisible = !1, s.hideScrollBar()))
    },
    onUserInputMove: function(t) {
        var e = this;
        e.model.isState("scrolling") ? e._scroller.doTouchMove([{
            pageX: t.x,
            pageY: t.y
        }], Date.now()) : e.model.isState("scrollingByProxy") && e.onBarIndicatorMove(t)
    },
    onUserInputEnd: function() {
        this.model.isState("scrolling") && this._scroller.doTouchEnd(Date.now()), this.model.setState("idle")
    },
    onUserInputScroll: function(t, e) {
        var n = this,
            i = n.model,
            o = Sys.UserInputUtils.isCoordinateTarget(n.container.el, t),
            s = Sys.isDefined(n.scrollBar) && Sys.UserInputUtils.isCoordinateTarget(n.scrollBar.el, t);
        (o || s) && n.contentIsScrollable() && (i.setState("scrollingByProxy"), n._scroller.scrollBy(0, e.deltaY || 30 * e.detail, !1), i.readData("hasSetDimensions") || (n.updateScrollerDimensions(), i.storeData("hasSetDimensions", !0)))
    },
    callFunctionOnSubComponents: function(t, e) {
        var n = this;
        n.model.readData("disabled") || Sys.each(n.subComponents, function(n) {
            n && n[t].apply(n, e)
        })
    },
    moveScrollIndicator: function(t) {
        var e = this,
            n = e.maxScroll,
            i = Math.round(e.scrollIndicatorHeight / 2);
        t < 0 ? t = 0 : t > n && (t = n), e.scrollIndicator.el.style.top = Math.round(e.scrollBarHeight * (t / n) + i) + "px"
    },
    onBarIndicatorMove: function(t) {
        var e, n = this,
            i = Sys.UserInputUtils.getCoordinatesRelativeToElement(t, n.scrollBar.el),
            o = i.y,
            s = n.scrollBarHeight;
        o < 0 ? o = 0 : o > s && (o = s), e = Math.round(n.maxScroll * (o / s)), n._scroller.scrollTo(0, e, !0)
    },
    addScrollBar: function() {
        var t = this;
        Sys.isDefined(t._wrapper) && (t.maxScroll = 0, t.scrollBar = t._wrapper.add(new Sys.Element({
            tag: "div",
            id: t.MODULE_NAME + "_scrollbar",
            class: t.SCROLL_BAR_CSS
        })), t.scrollBarBackground = t.scrollBar.add(new Sys.Element({
            tag: "div",
            class: "interface-settingsSection_scrollBarBackground utils_horizontal_center"
        })), t.scrollIndicator = t.scrollBar.add(new Sys.Element({
            tag: "div",
            class: t.SCROLL_INDICATOR_CSS
        })))
    },
    showScrollBar: function() {
        Sys.isDefined(this.scrollBar) && (this.scrollBar.el.style.display = "block")
    },
    hideScrollBar: function() {
        Sys.isDefined(this.scrollBar) && (this.scrollBar.el.style.display = "none")
    },
    onEnteringIdleState: function() {
        var t = this;
        Sys.isDefined(t.menuButton) && t.DISABLE_BUTTON_DURING_SPIN && (t.menuButton.removeCls("disabled"), t.abstractButton.enable("notInIdleState"))
    },
    onLeavingIdleState: function() {
        var t = this;
        Sys.isDefined(t.menuButton) && t.DISABLE_BUTTON_DURING_SPIN && (t.menuButton.addCls("disabled"), t.abstractButton.disable("notInIdleState"))
    },
    onEnableBasicGamePanel: function(t) {
        var e = this;
        Sys.isDefined(e.menuButton) && e.ENABLED_ONLY_IN_BASIC_GAME && (e.abstractButton.enable(t), e.abstractButton.hasProperty("disabled") || e.abstractButton.hasProperty("hidden") || e.menuButton.removeCls("disabled"))
    },
    onDisableBasicGamePanel: function(t) {
        var e = this;
        Sys.isDefined(e.menuButton) && e.ENABLED_ONLY_IN_BASIC_GAME && (e.menuButton.addCls("disabled"), e.abstractButton.disable(t))
    },
    onFeatureSplashShowing: function() {
        var t = this;
        Sys.isDefined(t.menuButton) && t.DISABLE_BUTTON_DURING_FEATURE_SPLASH && (t.menuButton.addCls("disabled"), t.abstractButton.disable("featureSplashShowing"))
    },
    onFeatureSplashClosed: function() {
        var t = this;
        Sys.isDefined(t.menuButton) && t.DISABLE_BUTTON_DURING_FEATURE_SPLASH && (t.menuButton.removeCls("disabled"), t.abstractButton.enable("featureSplashShowing"))
    }
}, Interface.SettingsSectionView = Sys.extend(Core.View, Interface.SettingsSectionView, "Interface.SettingsSectionView");
Sys.ns("Interface"), Interface.StandAloneSettingsSectionView = {
    BASE_CSS: "interface-standAloneSettingsSection",
    BACKGROUND_CSS: {
        top: "interface-standAloneSettingsSection_backgroundTop interface-standAloneSettingsSectionTop_uri",
        title: "interface-standAloneSettingsSection_title",
        bottom: "interface-standAloneSettingsSection_backgroundBottom interface-standAloneSettingsSectionBottom_uri",
        arrow: "interface-standAloneSettingsSection_backgroundArrow interface-standAloneSettingsSectionArrow_uri",
        middle: "interface-standAloneSettingsSectionMiddle interface-standAloneSettingsSectionMiddle_uri"
    },
    ARROW_LEFT_VALUE: "0.00rem",
    DIVIDER_CSS: "interface-standAloneSettingsSection_divider interface-standAloneSettingsSectionDivider_uri",
    CLOSE_BUTTON_CSS: "interface-standAloneSettingsSection_closeButton",
    MENU_BUTTON_CSS: "interface-desktopSettingsMenu_button",
    CHECKBOX_CSS: {
        base: "interface-standAloneSettingsSectionContainer_checkBox",
        disabled: "interface-standAloneSettingsSectionContainer_checkBox_disabled",
        label: "interface-standAloneSettingsSectionContainer_checkBox_label",
        button_wrapper: "interface-standAloneSettingsSectionContainer_checkBox_wrapper",
        button_background: "interface-standAloneSettingsSectionContainer_checkBox_default",
        button_handle: "interface-standAloneSettingsSectionContainer_checkBox_checked"
    },
    RENDER_TARGET: "gameWrapper",
    TITLE: "Placeholder Header",
    ORDER: -1,
    constructor: function() {
        Interface.SettingsSectionView.superclass.constructor.apply(this, arguments)
    },
    getDivider: function() {
        return new Sys.Element({
            tag: "div",
            cls: this.DIVIDER_CSS
        })
    },
    setUpContent: function() {
        var e = this;
        e.wrapper = new Sys.Element({
            id: e.MODULE_NAME,
            tag: "div",
            cls: e.BASE_CSS,
            renderTo: e.RENDER_TARGET,
            style: "display:none;"
        }), e.container = new Sys.Element({
            id: e.MODULE_NAME,
            tag: "div",
            cls: e.BASE_CSS,
            renderTo: e.RENDER_TARGET,
            style: "display:none;"
        }), e.setupBackground(), e.setupCloseButton(), e.setUpMenuButton()
    },
    setupBackground: function() {
        var e = this,
            t = e.wrapper.add(new Sys.Element({
                id: "backgroundTop",
                tag: "div",
                cls: e.BACKGROUND_CSS.top
            })),
            n = e.wrapper.add(new Sys.Element({
                id: "backgroundMiddle",
                tag: "div",
                cls: e.BACKGROUND_CSS.middle
            })),
            i = e.wrapper.add(new Sys.Element({
                id: "backgroundBottom",
                tag: "div",
                cls: e.BACKGROUND_CSS.bottom
            }));
        t.add(new Sys.Element({
            id: "title",
            tag: "span",
            cls: e.BACKGROUND_CSS.title,
            textContent: e.getTitle()
        })), e.top = t, i.add(new Sys.Element({
            id: "backgroundArrow",
            tag: "div",
            cls: e.BACKGROUND_CSS.arrow,
            style: "left:" + e.ARROW_LEFT_VALUE + ";"
        })), e.container = n
    },
    getTitle: function() {
        return Services.languageManager.getText(this.TITLE)
    },
    setupCloseButton: function() {
        var e = this;
        e.closeButton = new Interface.utils.DOMButton({
            id: "closeButton",
            baseCSS: e.CLOSE_BUTTON_CSS,
            clickCallback: e.fireEvent.bind(e, "view:hideRequest"),
            hoverCallback: function() {
                e.top.addCls("hover")
            },
            upCallback: function() {
                e.top.removeCls("hover")
            }
        }), e.container.add(e.closeButton.getContainer())
    },
    setUpMenuButton: function() {
        var e = this;
        e.menuButton = new Interface.utils.DOMButton({
            id: e.MODULE_NAME + "SettingsButton",
            baseCSS: e.MENU_BUTTON_CSS,
            clickCallback: e.onButtonClick.bind(e)
        }), e.fireEvent("view:addToNavigator", "desktopSettingsMenu", {
            order: e.ORDER,
            element: e.menuButton.getContainer()
        })
    },
    onButtonClick: function() {
        var e = this.model.readData("showing") ? "hide" : "show";
        this.fireEvent("view:" + e + "Request")
    },
    show: function() {
        this.wrapper.el.style.display = "block", this.menuButton.addProperty("active", "sectionShowing")
    },
    hide: function() {
        this.wrapper.el.style.display = "none", this.menuButton.removeProperty("active", "sectionShowing")
    },
    enable: function(e) {
        this.menuButton.enable(e)
    },
    disable: function(e) {
        this.menuButton.disable(e)
    },
    onUserInputStart: function() {},
    onUserInputEnd: function() {},
    onEnteringIdleState: function() {
        var e = this;
        Sys.isDefined(e.menuButton) && e.DISABLE_BUTTON_DURING_SPIN && e.menuButton.enable("notInIdleState")
    },
    onLeavingIdleState: function() {
        var e = this;
        Sys.isDefined(e.menuButton) && e.DISABLE_BUTTON_DURING_SPIN && e.menuButton.disable("notInIdleState")
    },
    onEnableBasicGamePanel: function(e) {
        var t = this;
        Sys.isDefined(t.menuButton) && t.ENABLED_ONLY_IN_BASIC_GAME && t.menuButton.enable(e)
    },
    onDisableBasicGamePanel: function(e) {
        var t = this;
        Sys.isDefined(t.menuButton) && t.ENABLED_ONLY_IN_BASIC_GAME && t.menuButton.disable(e)
    },
    onFeatureSplashShowing: function() {
        var e = this;
        Sys.isDefined(e.menuButton) && e.DISABLE_BUTTON_DURING_FEATURE_SPLASH && e.menuButton.disable("featureSplashShowing")
    },
    onFeatureSplashClosed: function() {
        var e = this;
        Sys.isDefined(e.menuButton) && e.DISABLE_BUTTON_DURING_FEATURE_SPLASH && e.menuButton.enable("featureSplashShowing")
    }
}, Interface.StandAloneSettingsSectionView = Sys.extend(Interface.SettingsSectionView, Interface.StandAloneSettingsSectionView, "Interface.StandAloneSettingsSectionView");
Sys.ns("Game"), Game.Movie = {
    constructor: function() {
        Game.Movie.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            view: Game.MovieView,
            controller: Game.MovieController
        }
    }
}, Game.Movie = Sys.extend(Core.Module, Game.Movie, "Game.Movie");
Sys.ns("Game"), Game.MovieController = {
    constructor: function() {
        Game.MovieController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = {
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "view:animationComplete": this.close
        };
        e["notify:userInputManager." + this.MODULE_NAME + "ExclusiveEnd"] = this.onUserInputEnd, this.on(e)
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    onUserInputEnd: function(e) {
        this.view.inputTargetsButton(Sys.UserInputUtils.getCoordinatesRelativeToElement(e, Game.stage.getGameContainer())) && this.close()
    },
    show: function() {
        var e = this;
        e.fireEvent("request:userInputManager.activateExclusivity", e.MODULE_NAME), e.fireEvent("request:disableBasicGamePanel", e.MODULE_NAME), e.view.play()
    },
    close: function() {
        var e = this;
        e.fireEvent("request:userInputManager.deactivateExclusivity", e.MODULE_NAME), e.fireEvent("request:enableBasicGamePanel", e.MODULE_NAME), e.view.stop()
    }
}, Game.MovieController = Sys.extend(Core.Controller, Game.MovieController, "Game.MovieController");
Sys.ns("Game"), Game.MovieView = {
    SRC: "movie",
    DURATION: 1e4,
    MOVIE_BUTTON_CONTINUE: {
        fontSize: 30,
        fontFamily: "Arial",
        key: Language.Keys.skipIntro,
        uppercase: !1,
        centerX: 640,
        centerY: 640,
        width: 400,
        height: 80,
        maxWidth: 400,
        operations: [{
            fillStyle: "#FFFFFF",
            drawType: "fill"
        }]
    },
    constructor: function() {
        Game.MovieView.superclass.constructor.apply(this, arguments), this.scale = Environment.determineResolution().virtualToWindowScale
    },
    play: function() {
        var e = 0 === Services.settingsManager.getSetting("volume");
        return this.movieList.restore(), this.movieItem.toggleSound(e), this.movieList.play()
    },
    stop: function() {
        this.movieList.stop()
    },
    inputTargetsButton: function(e) {
        var t = this,
            i = t.MOVIE_BUTTON_CONTINUE,
            n = t.scaleValue(i.width),
            o = t.scaleValue(i.height),
            a = t.scaleValue(i.centerX) - n / 2,
            r = t.scaleValue(i.centerY) - o / 2;
        return e.x >= a && e.x <= a + n && e.y >= r && e.y <= r + o
    },
    initAnimations: function() {
        var e = this,
            t = new Animation.List({}),
            i = e.MOVIE_BUTTON_CONTINUE,
            n = e.getLayeringValues();
        e.movieItem = e.getMovieAnimation(n.video), e.continueButtonItem = e.getContinueButtonItem(i, n.button, Services.languageManager.getText(i.key)), e.blackScreenItem = new Animation.Item({
            fullScreen: !0,
            depth: n.video - 1,
            executeBefore: function(e) {
                e.fillRect(0, 0, this.width, this.height)
            },
            operations: {
                fade: [{
                    time: 0,
                    value: 1
                }, {
                    time: e.DURATION / 2,
                    value: 1,
                    goTo: 0
                }]
            }
        }), t.add(e.blackScreenItem), t.add(e.movieItem), t.add(e.continueButtonItem), Game.stage.view.addToRenderLoop(t), t.stop(), e.movieList = t
    },
    getMovieAnimation: function(e) {
        var t = this;
        return new Animation.VideoItem({
            src: t.SRC,
            fullScreen: !0,
            depth: e,
            callbacks: {
                canPlayThrough: t.fireEvent("view:introMovieBuffered")
            },
            operations: {
                fade: [{
                    time: 0,
                    value: 1
                }, {
                    time: t.DURATION,
                    value: 1,
                    fireEvent: {
                        event: "view:animationComplete",
                        scope: t
                    }
                }]
            }
        })
    },
    getContinueButtonItem: function(e, t, i) {
        var n = this.DURATION,
            o = document.createElement("canvas"),
            a = o.getContext("2d"),
            r = e.width,
            s = e.height,
            u = new Animation.CanvasAnimationItem({
                width: r,
                height: s,
                top: e.centerY - Math.round(s / 2),
                left: e.centerX - Math.round(r / 2),
                depth: t,
                image: o,
                customProps: {
                    context: a
                },
                operations: {
                    fade: [{
                        time: 0,
                        value: 1
                    }, {
                        time: n,
                        value: 1
                    }]
                }
            });
        return o.width = r, o.height = s, a.textAlign = "center", a.textBaseline = "middle", i = !0 === e.uppercase ? i.toUpperCase() : i, Animation.utils.text.performOperations(i, e.fontSize + "px " + e.fontFamily, Math.round(e.width / 2), Math.round(e.height / 2), e.operations, a), u
    },
    getLayeringValues: function() {
        return Layering.Game.Movie
    },
    scaleValue: function(e) {
        return Math.round(this.scale * e)
    }
}, Game.MovieView = Sys.extend(Core.View, Game.MovieView, "Game.MovieView");
Sys.ns("Game"), Game.IntroMovie = {
    constructor: function() {
        Game.IntroMovie.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        var e = this.model;
        return {
            showingIntroMovie: {
                state: {
                    name: "ShowingIntroMovie",
                    execute: function() {},
                    waitEvents: {
                        "notify:introMovie.closed": !1
                    }
                }
            },
            beforeLoaderClose: {
                queue: [function(o) {
                    e.shouldShowIntroMovie() && o.stateHandler.pushState(o.states.showingIntroMovie)
                }]
            },
            setupGame: {
                waitEvents: ["notify:introMovie.buffered"]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            model: Game.IntroMovieModel,
            controller: Game.IntroMovieController,
            view: Game.IntroMovieView
        }
    }
}, Game.IntroMovie = Sys.extend(Game.Movie, Game.IntroMovie, "Game.IntroMovie");
Sys.ns("Game"), Game.IntroMovieController = {
    constructor: function() {
        Game.IntroMovieController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        Game.IntroMovieController.superclass.setupEvents.apply(this, arguments), this.on({
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "notify:stateHandler.enteringShowingIntroMovieState": this.show,
            "notify:stateHandler.leavingShowingIntroMovieState": this.onLeavingIntroMovieState,
            "view:introMovieBuffered": this.onIntroMovieBuffered,
            "request:introMovie.close": this.close,
            "notify:moduleLoader.finishedLoadingModules": this.onModulesFinishedLoading
        })
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    close: function() {
        var e = this;
        Game.IntroMovieController.superclass.close.apply(e, arguments), e.fireEvent("request:ambienceManager.ambiencePauseSwitch", !1), e.fireEvent("request:stage.lower"), e.fireEvent("notify:introMovie.closed"), Services.storage.storeData("IntroMovie.showing", !1)
    },
    show: function() {
        if (this.model.readData("skipIntroMovie")) return void this.close();
        Game.IntroMovieController.superclass.show.apply(this, arguments), this.fireEvent("request:ambienceManager.ambiencePauseSwitch", !0), this.fireEvent("request:stage.elevate"), Services.storage.storeData("IntroMovie.showing", !0)
    },
    onUserInputEnd: function(e) {
        var t = Sys.UserInputUtils.getCoordinatesRelativeToElement(e, Game.stage.getGameContainer());
        this.view.inputTargetsButton(t) ? this.close() : this.view.inputPlayButton(t) && this.view.playManually()
    },
    onModulesFinishedLoading: function() {},
    onIntroMovieBuffered: function() {
        this.fireEvent("notify:introMovie.buffered")
    },
    onLeavingIntroMovieState: function() {
        this.view.stopBlackScreen()
    }
}, Game.IntroMovieController = Sys.extend(Game.MovieController, Game.IntroMovieController, "Game.IntroMovieController");
Sys.ns("Game"), Game.IntroMovieModel = {
    constructor: function() {
        Game.IntroMovieModel.superclass.constructor.apply(this, arguments)
    },
    shouldShowIntroMovie: function() {
        return this.readData("initNotRestore") && Services.settingsManager.getSetting("showIntroMovie")
    },
    setupData: function() {
        var e = Resources.readData("gameServerInitResponse"),
            o = Resources.readData("queryData");
        "boolean" == typeof o.skipIntro && o.skipIntro && this.storeData("skipIntroMovie", !0), this.storeData("initNotRestore", "init" === e.clientaction && !0 !== e.restore), Services.storage.storeData("IntroMovie.showing", !1)
    }
}, Game.IntroMovieModel = Sys.extend(Core.Model, Game.IntroMovieModel, "Game.IntroMovieModel");
Sys.ns("Game"), Game.IntroMovieView = {
    SRC: "introMovie",
    MOVIE_BUTTON_PLAY: {
        fontSize: 30,
        fontFamily: "Arial",
        key: Language.Keys.continue,
        uppercase: !1,
        centerX: 640,
        centerY: 490,
        width: 400,
        height: 80,
        maxWidth: 400,
        operations: [{
            fillStyle: "#FFFFFF",
            drawType: "fill"
        }]
    },
    constructor: function() {
        Game.IntroMovieView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var t = this,
            e = new Animation.List({}),
            n = new Animation.List({}),
            i = t.MOVIE_BUTTON_CONTINUE,
            o = t.MOVIE_BUTTON_PLAY,
            a = t.getLayeringValues();
        t.movieItem = t.getMovieAnimation(a.video), t.continueButtonItem = t.getContinueButtonItem(i, a.button, Services.languageManager.getText(i.key)), t.playIntroButtonItem = t.getContinueButtonItem(o, a.button, Services.languageManager.getText(o.key)), t.blackScreenItem = new Animation.Item({
            fullScreen: !0,
            depth: a.video - 1,
            executeBefore: function(t) {
                t.fillRect(0, 0, this.width, this.height)
            },
            operations: {
                fade: [{
                    time: 0,
                    value: 1
                }, {
                    time: 1,
                    value: 1,
                    goTo: 0
                }]
            }
        }), n.add(t.blackScreenItem), Game.stage.view.addToRenderLoop(n), t.model.shouldShowIntroMovie() || n.stop(), t.backdropList = n, e.add(t.movieItem), e.add(t.continueButtonItem), Game.stage.view.addToRenderLoop(e), e.stop(), t.movieList = e
    },
    getContinueButtonItem: function(t, e, n) {
        var i = document.createElement("canvas"),
            o = i.getContext("2d"),
            a = t.width,
            r = t.height,
            s = new Animation.CanvasAnimationItem({
                width: a,
                height: r,
                top: t.centerY - Math.round(r / 2),
                left: t.centerX - Math.round(a / 2),
                depth: e,
                image: i,
                customProps: {
                    context: o
                }
            });
        return i.width = a, i.height = r, o.textAlign = "center", o.textBaseline = "middle", n = !0 === t.uppercase ? n.toUpperCase() : n, Animation.utils.text.performOperations(n, t.fontSize + "px " + t.fontFamily, Math.round(t.width / 2), Math.round(t.height / 2), t.operations, o), s
    },
    getMovieAnimation: function(t) {
        var e = this;
        return new Animation.VideoItem({
            src: e.SRC,
            fullScreen: !0,
            depth: t,
            callbacks: {
                canPlayThrough: e.fireEvent("view:introMovieBuffered"),
                onEndedCallback: e.fireEvent.bind(e, "view:animationComplete")
            },
            loop: !1
        })
    },
    play: function() {
        var t = this,
            e = t.movieItem.play();
        t.continueButtonItem.play(), t.movieList.restore(), void 0 !== e ? e.then(function() {
            t.proceedWithNormalPlay()
        }, function(e) {
            t.addManualPlay()
        }) : t.proceedWithNormalPlay()
    },
    proceedWithNormalPlay: function() {
        this.movieList.restore(), this.playIntroButtonItem.stop()
    },
    addManualPlay: function() {
        this.movieList.add(this.playIntroButtonItem), this.playIntroButtonItem.play(), this.movieList.restore()
    },
    playManually: function() {
        this.movieItem.videoEl.play(), this.playIntroButtonItem.stop()
    },
    stop: function() {
        this.movieItem.stop(), this.continueButtonItem.stop(), this.playIntroButtonItem.stop()
    },
    inputPlayButton: function(t) {
        var e = this,
            n = e.MOVIE_BUTTON_PLAY,
            i = e.scaleValue(n.width),
            o = e.scaleValue(n.height),
            a = e.scaleValue(n.centerX) - i / 2,
            r = e.scaleValue(n.centerY) - o / 2;
        return t.x >= a && t.x <= a + i && t.y >= r && t.y <= r + o
    },
    stopBlackScreen: function() {
        this.blackScreenItem.stop()
    }
}, Game.IntroMovieView = Sys.extend(Game.MovieView, Game.IntroMovieView, "Game.IntroMovieView");
Sys.ns("Interface"), Interface.CashField = {
    constructor: function() {
        Interface.CashField.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return {
            fallback: ["orientation"]
        }
    },
    getDefaultMVCClasses: function() {
        return {
            model: Interface.CashFieldModel,
            controller: Interface.CashFieldController,
            view: Interface.CashFieldBaseView
        }
    }
}, Interface.CashField = Sys.extend(Core.Module, Interface.CashField, "Interface.CashField");
Sys.ns("Interface"), Interface.CashFieldModel = {
    constructor: function() {
        Interface.CashFieldModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = this;
        Resources.readData("gameServerInitResponse").playforfun ? e.storeData("funPlay", !0) : e.storeData("funPlay", !1)
    },
    processServerResponse: function(e) {
        var t = this;
        t.checkAndSetState(e), t.storeWins(e)
    },
    checkAndSetState: function(e) {
        var t = this;
        Sys.isDefined(e.freeRoundsLeft) ? t.isState("freerounds") || t.setState("freerounds") : "freespin" === e.nextaction && "init" !== e.clientaction ? t.isState("freespin") || t.setState("freespin") : "init" === e.clientaction && Sys.isDefined(e.freespins) ? t.isState("freespinRestore") || t.setState("freespinRestore") : "respin" === e.nextaction && "init" !== e.clientaction ? t.isState("respin") || t.setState("respin") : "respin" === e.clientaction && "spin" === e.nextaction ? t.isState("respinLast") || t.setState("respinLast") : "init" !== e.clientaction || "respin" !== e.nextaction || Sys.isDefined(e.freespins) ? "freespin" === e.clientaction || "freespin" === e.clientaction && "spin" === e.nextaction ? t.isState("freespinLast") || t.setState("freespinLast") : t.isState("basic") || t.setState("basic") : t.isState("respinRestore") || t.setState("respinRestore")
    },
    resetWins: function() {
        this.storeData("basicWinValues", {
            cents: 0,
            centsTotal: 0
        }), this.storeData("freespinWinValues", {
            totalWinCents: 0
        })
    },
    storeWins: function(e) {
        var t = this;
        Sys.isDefined(e.wins) && (t.storeData("basicWinValues", {
            cents: e.wins.cents || 0,
            centsTotal: e.wins.centsTotal || 0
        }), Services.storage.storeData("cashField.winInCents", e.wins.centsTotal)), Sys.isDefined(e.wins) && t.storeData("freespinWinValues", {
            totalWinCents: e.wins.centsTotal || 0
        }), Sys.isDefined(e.freeRoundsLeft) && (t.storeData("freeroundValues", {
            left: e.freeRoundsLeft,
            totalWin: e.freeRoundsWinTot
        }), t.storeData("basicWinValues", {
            cents: e.freeRoundsWinTot || 0,
            centsTotal: e.freeRoundsWinTot || 0
        }))
    },
    setBetValues: function(e) {
        this.storeData("betValues", e)
    },
    setBalanceValues: function(e) {
        this.storeData("balanceValues", e)
    }
}, Interface.CashFieldModel = Sys.extend(Core.Model, Interface.CashFieldModel, "Interface.CashFieldModel");
Sys.ns("Interface"), Interface.CashFieldController = {
    TOGGLE_SEQUENCE: [{
        action: "creditBetWin",
        displayDuration: 1e4
    }, {
        action: "funPlay",
        displayDuration: 3e3
    }],
    constructor: function() {
        Interface.CashFieldController.superclass.constructor.apply(this, arguments), this.dispatchAppendToRequest()
    },
    setupEvents: function() {
        this.on({
            "notify:stateHandler.enteringIdleState": this.updateAllAndStartToggling.bind(this, "idle"),
            "notify:stateHandler.enteringSpinningState": this.onSpinningState,
            "notify:stateHandler.enteringBeforeLoaderCloseState": this.updateAllAndStartToggling.bind(this, "beforeLoaderClose"),
            "notify:settingsWindow.open": this.onSettingsWindowOpened,
            "notify:settingsWindow.closed": this.startToggling,
            "notify:serverManager.serverErrorReceived": this.onServerErrorReceived,
            "notify:responseParser.gameConfigurationParsed": this.model.storeWins.bind(this.model),
            "notify:moneyManager.betChanged": this.onBetChanged,
            "notify:moneyManager.balanceChanged": this.onBalanceChanged,
            "notify:standardWin.presentationComplete": this.updateCreditAndWin.bind(this, "idle"),
            "request:cashField.showWin": this.updateCreditAndWin.bind(this, "winPresentation"),
            "request:cashField.showBasicCashValues": this.setSpecifiedStateAndToggle.bind(this, "basic"),
            "notify:freeRounds.ended": this.onFreeRoundsEnded,
            "notify:freeRounds.reInitResponseReceived": this.onFreeRoundsReInit,
            "notify:responseParser.responseParsed": this.onServerResponse
        })
    },
    onServerResponse: function(e) {
        this.model.processServerResponse(e)
    },
    dispatchAppendToRequest: function() {
        this.fireEvent("request:balanceDisplay.appendChild", this.view.getCashDisplayConfig())
    },
    onBetChanged: function(e) {
        var t = this;
        t.model.setBetValues(e), t.view.updateValue("bet", t.model.readData("betValues").playerBetFormatted)
    },
    onBalanceChanged: function(e) {
        this.model.setBalanceValues(e), this.view.updateValue("credit", e.playerBalanceFormatted), this.notifyBalanceChanged(e.playerBalanceCents)
    },
    onFreeRoundsEnded: function() {
        this.setSpecifiedStateAndToggle("basic")
    },
    setSpecifiedStateAndToggle: function(e) {
        "string" == typeof e && (this.model.setState(e), this.updateAllAndStartToggling(e))
    },
    onFreeRoundsReInit: function(e) {
        this.model.processServerResponse(e), this.updateAllAndStartToggling("freerounds")
    },
    onSpinningState: function() {
        this[this.model.getState() + "UpdateCreditValue"](), this.resetWinValue()
    },
    onServerErrorReceived: function() {
        var e = this,
            t = e.model.getState();
        e.model.resetWins(), e[t + "UpdateWinValues"](t)
    },
    updateCreditAndWin: function(e) {
        var t = this,
            n = t.model.getState(),
            i = Services.moneyManager.getBalanceCents();
        t[n + "UpdateCreditValue"](i), t[n + "UpdateWinValues"](e), t.notifyBalanceChanged(i)
    },
    notifyBalanceChanged: function(e) {
        this.fireEvent("notify:cashField.update", e)
    },
    updateAllAndStartToggling: function(e) {
        this.updateCreditAndWin(e), this.startToggling()
    },
    onFreespinOutro: function() {
        var e = this.model.getState();
        this[e + "UpdateCreditValue"](Services.moneyManager.getBalanceCents()), this[e + "UpdateWinValues"]("freespinOutro")
    },
    basicUpdateWinValues: function() {
        this.updateBasicWinValue(), this.view.showSubComponent("creditBetWin")
    },
    freespinUpdateWinValues: function() {
        this.updateFreespinWinValue()
    },
    freespinRestoreUpdateWinValues: function() {
        this.updateFreespinWinValue()
    },
    freespinLastUpdateWinValues: function() {
        this.updateFreespinWinValue()
    },
    respinUpdateWinValues: function() {
        this.updateRespinWinValue()
    },
    respinUpdateCreditValue: function() {},
    respinLastUpdateWinValues: function() {
        this.updateRespinWinValue()
    },
    respinLastUpdateCreditValue: function(e) {
        this.basicUpdateCreditValue(e)
    },
    freeroundsUpdateCreditValue: function() {
        this.view.showSubComponent("freeRounds")
    },
    freeroundsUpdateWinValues: function(e) {
        var t = this,
            n = t.model.readData("freeroundValues").left,
            i = t.model.readData("freeroundValues").totalWin;
        t.view.updateValue("freeRoundTotalWin", i), "winPresentation" !== e && t.view.updateValue("freeRoundLeft", n.toString()), this.view.showSubComponent("freeRounds")
    },
    freespinUpdateCreditValue: function() {},
    freespinRestoreUpdateCreditValue: function(e) {
        var t = this;
        Sys.isDefined(e) || (e = t.model.readData("balanceValues").playerBalanceFormatted), t.view.updateValue("credit", e), t.view.showSubComponent("creditBetWin")
    },
    respinRestoreUpdateCreditValue: function(e) {
        var t = this;
        Sys.isDefined(e) || (e = t.model.readData("balanceValues").playerBalanceFormatted), t.view.updateValue("credit", e), t.view.showSubComponent("creditBetWin")
    },
    respinRestoreUpdateWinValues: function() {
        this.updateRespinWinValue()
    },
    freespinLastUpdateCreditValue: function(e) {
        this.basicUpdateCreditValue(e)
    },
    basicUpdateCreditValue: function(e) {
        var t = this;
        Sys.isDefined(e) || (e = t.model.readData("balanceValues").playerBalanceFormatted), t.view.updateValue("credit", e), t.view.showSubComponent("creditBetWin")
    },
    updateBasicWinValue: function() {
        var e = this.model.readData("basicWinValues");
        e.cents && this.view.updateWinValue(e.cents)
    },
    updateFreespinWinValue: function() {
        var e = this.model.readData("freespinWinValues");
        e.totalWinCents && this.view.updateWinValue(e.totalWinCents)
    },
    updateRespinWinValue: function() {
        var e = this.model.readData("basicWinValues");
        e.centsTotal && this.view.updateWinValue(e.centsTotal)
    },
    resetWinValue: function() {
        (this.model.isState("basic") || this.model.isState("respinLast") || this.model.isState("freespinLast")) && this.view.updateWinValue(0)
    },
    onSettingsWindowOpened: function() {
        var e = this;
        clearTimeout(e.toggleTimeout), e.model.isState("freerounds") ? e.view.showSubComponent("freeRounds") : e.view.showSubComponent("creditBetWin", !0)
    },
    startToggling: function() {
        var e = this;
        !0 === e.model.readData("funPlay") && (clearTimeout(e.toggleTimeout), e.model.storeData("nextToggleIndex", 0), e.showNextInToggleSequence())
    },
    showNextInToggleSequence: function() {
        var e = this,
            t = e.TOGGLE_SEQUENCE,
            n = e.model.readData("nextToggleIndex"),
            i = t[n];
        e.model.storeData("nextToggleIndex", (n + 1) % t.length), e.view.showSubComponent(i.action, !0), e.toggleTimeout = setTimeout(e.showNextInToggleSequence.bind(e), i.displayDuration)
    }
}, Interface.CashFieldController = Sys.extend(Core.Controller, Interface.CashFieldController, "Interface.CashFieldController");
Sys.ns("Interface"), Interface.CashFieldBaseView = {
    CSS_CLASSES: {
        BASE: "interface-cashField_base",
        PORTRAIT: "interface-cashField_portrait",
        LANDSCAPE: "interface-cashField_landscape",
        SUB_COMPONENT: "interface-cashField_subComponent"
    },
    RESOLUTION: Environment.determineResolution().resolution,
    SCREEN_SIZE: Utils.Platform.getViewportOuterSize(),
    FIRST_CHILD: !1,
    constructor: function() {
        Interface.CashFieldBaseView.superclass.constructor.apply(this, arguments)
    },
    init: function() {
        var e = this;
        Interface.CashFieldBaseView.superclass.init.apply(e, arguments), e.displays = e.getDisplayConfig(), e.getLocalText = function(e) {
            return Services.languageManager.getText(e)
        }, e.getFormattedCentsValue = function(e, t) {
            return Services.moneyManager.formatMoneyCurrencySign(e, t)
        }, e.constructDOMElements()
    },
    showSubComponent: function(e, t) {
        var n = this,
            a = n.model.readData("currentlyShowingElement");
        (!n.model.readData("funPlay") && a !== n[e] || a !== n[e] && n.model.readData("funPlay") && t) && (Sys.isDefined(a) && n.hideElement(a), n.showElement(n[e]), n.model.storeData("currentlyShowingElement", n[e]))
    },
    hideElement: function(e) {
        e.el.style.visibility = "hidden"
    },
    showElement: function(e) {
        e.el.style.visibility = "visible"
    },
    getDisplayConfig: function() {
        var e = this;
        return {
            credit: {
                wrapper: e.creditWrapper,
                displayID: "credit",
                textID: Language.Keys.cashColonVar,
                display: {},
                stringValue: "",
                valueElement: {}
            },
            bet: {
                wrapper: e.betWrapper,
                displayID: "bet",
                textID: Language.Keys.betColonVar,
                display: {},
                stringValue: "",
                valueElement: {}
            },
            win: {
                wrapper: e.winWrapper,
                displayID: "win",
                textID: Language.Keys.winColonVar,
                display: {},
                stringValue: "",
                valueElement: {}
            },
            funPlay: {
                wrapper: e.funPlayWrapper,
                displayID: "funPlay",
                textID: Language.Keys.playingForFun,
                display: {}
            },
            freeRoundLeft: {
                wrapper: e.freeRoundLeftWrapper,
                displayID: "freeRoundLeft",
                textID: Language.Keys.freeRoundsLeftColon,
                display: {},
                stringValue: "",
                valueElement: {}
            },
            freeRoundTotalWin: {
                wrapper: e.freeRoundTotalWinWrapper,
                displayID: "freeRoundTotalWin",
                textID: Language.Keys.totalWinColonVar,
                display: {},
                stringValue: "",
                valueElement: {}
            }
        }
    },
    getCashDisplayConfig: function() {
        return this.cashDisplay
    },
    constructDOMElements: function() {
        var e = this,
            t = e.displays;
        e.cashDisplay = new Sys.Element({
            tag: "div",
            cls: e.CSS_CLASSES.BASE
        }), e.creditBetWin = new Sys.Element({
            tag: "div",
            cls: e.CSS_CLASSES.SUB_COMPONENT,
            style: "visibility:hidden;"
        }), e.freeRounds = new Sys.Element({
            tag: "div",
            cls: e.CSS_CLASSES.SUB_COMPONENT,
            style: "visibility:hidden;"
        }), e.funPlay = new Sys.Element({
            tag: "div",
            cls: e.CSS_CLASSES.SUB_COMPONENT,
            style: "visibility:hidden;"
        }), e.constructElement(t.credit), e.constructElement(t.bet), e.constructElement(t.win), e.constructElement(t.funPlay), e.constructElement(t.freeRoundLeft), e.constructElement(t.freeRoundTotalWin), e.creditBetWin.add(t.credit.wrapper), e.creditBetWin.add(t.bet.wrapper), e.creditBetWin.add(t.win.wrapper), e.updateWinValue(0), e.cashDisplay.add(e.creditBetWin), e.freeRounds.add(t.freeRoundLeft.wrapper), e.freeRounds.add(t.freeRoundTotalWin.wrapper), e.cashDisplay.add(e.freeRounds), e.funPlay.add(t.funPlay.wrapper), e.cashDisplay.add(e.funPlay)
    },
    constructTextElement: function(e, t, n) {
        var a, s, i = this,
            r = [];
        return e.contains("{0}") ? (s = i.getTextStringOrder(e), Sys.each(s, function(e) {
            "string" == typeof e ? (r.push(a = new Sys.Element({
                tag: "span",
                cls: "text"
            })), a.el.textContent = e) : Sys.isNumber(e) && (r.push(a = new Sys.Element({
                tag: "span",
                cls: "text value"
            })), a.el.textContent = t || "", n.valueElement = a)
        })) : (r.push(a = new Sys.Element({
            tag: "span",
            cls: "text"
        })), a.el.textContent = e), r
    },
    constructTextValueWrapper: function() {
        return new Sys.Element({
            tag: "div",
            cls: "wrapper",
            style: "margin-right:2%;margin-left:2%;"
        })
    },
    constructElement: function(e) {
        var t, n = this,
            a = n.debug ? n.worstCaseSpec[e.displayID].text : n.getLocalText(e.textID),
            s = n.debug ? n.worstCaseSpec[e.displayID].value : e.value,
            i = n.constructTextValueWrapper();
        e.wrapper = new Sys.Element({
            tag: "span"
        }), e.wrapper.addCls("inline"), e.wrapper.addCls("field"), e.wrapper.addCls(e.displayID), t = n.constructTextElement(a, s, e), Sys.each(t, function(e) {
            i.add(e)
        }), e.wrapper.add(i)
    },
    updateValue: function(e, t) {
        t = Sys.isNumber(t) ? this.getFormattedCentsValue(t) : t, this.displays[e].valueElement.el && (this.displays[e].valueElement.el.textContent = t)
    },
    updateWinValue: function(e) {
        var t = this;
        e >= 0 && (e = t.getFormattedCentsValue(e)), t.displays.win.valueElement.el && (t.displays.win.valueElement.el.textContent = e)
    },
    onPortrait: function() {
        var e = this,
            t = e.CSS_CLASSES,
            n = e.cashDisplay;
        n.addCls(t.PORTRAIT), n.removeCls(t.LANDSCAPE)
    },
    onLandscape: function() {
        var e = this,
            t = e.CSS_CLASSES,
            n = e.cashDisplay;
        n.addCls(t.LANDSCAPE), n.removeCls(t.PORTRAIT)
    },
    getTextStringOrder: function(e) {
        var t, n = [],
            a = /(\{\d+\})/g,
            s = e.split(a);
        return Sys.each(s, function(a) {
            a.match(/\{\d+\}/) ? (t = a.substring(1, a.length - 1), n.push(Sys.utils.toInt(t))) : e.length > 0 && n.push(a)
        }), n
    }
}, Interface.CashFieldBaseView = Sys.extend(Core.View, Interface.CashFieldBaseView, "Interface.CashFieldBaseView");
Sys.ns("Interface"), Interface.CashFieldMobileView = {
    CSS_CLASSES: {
        BASE: "interface-cashField_base interface-cashField_mobile",
        PORTRAIT: "interface-cashField_portrait_mobile",
        LANDSCAPE: "interface-cashField_landscape",
        SUB_COMPONENT: "interface-cashField_subComponent"
    },
    constructor: function() {
        Interface.CashFieldMobileView.superclass.constructor.apply(this, arguments)
    }
}, Interface.CashFieldMobileView = Sys.extend(Interface.CashFieldBaseView, Interface.CashFieldMobileView, "Interface.CashFieldMobileView");
Sys.ns("Interface"), Interface.CashFieldTabletView = {
    CSS_CLASSES: {
        BASE: "interface-cashField_base interface-cashField_tablet",
        PORTRAIT: "interface-cashField_portrait interface-cashField_portrait interface-cashField_tablet",
        LANDSCAPE: "interface-cashField_landscape interface-cashField_landscape interface-cashField_tablet",
        SUB_COMPONENT: "interface-cashField_subComponent"
    },
    constructor: function() {
        Interface.CashFieldTabletView.superclass.constructor.apply(this, arguments)
    }
}, Interface.CashFieldTabletView = Sys.extend(Interface.CashFieldBaseView, Interface.CashFieldTabletView, "Interface.CashFieldTabletView");
Sys.ns("Interface"), Interface.CashFieldDesktopView = {
    CSS_CLASSES: {
        BASE: "interface-cashField_base interface-cashField_desktop interface-cashField_desktop_uri",
        PORTRAIT: "",
        LANDSCAPE: "",
        SUB_COMPONENT: "interface-cashField_subComponent"
    },
    constructor: function() {
        Interface.CashFieldDesktopView.superclass.constructor.apply(this, arguments)
    }
}, Interface.CashFieldDesktopView = Sys.extend(Interface.CashFieldBaseView, Interface.CashFieldDesktopView, "Interface.CashFieldDesktopView");
Sys.ns("Interface.Slots"), Interface.Slots.CoinsField = {
    constructor: function() {
        Interface.Slots.CoinsField.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return {
            fallback: ["orientation"]
        }
    },
    getDefaultMVCClasses: function() {
        return {
            model: Interface.Slots.CoinsFieldModel,
            controller: Interface.Slots.CoinsFieldController,
            view: Interface.Slots.CoinsFieldBaseView
        }
    }
}, Interface.Slots.CoinsField = Sys.extend(Core.Module, Interface.Slots.CoinsField, "Interface.Slots.CoinsField");
Sys.ns("Interface.Slots"), Interface.Slots.CoinsFieldModel = {
    WIN_UP_TO: "[MAX COIN WIN]",
    constructor: function() {
        Interface.Slots.CoinsFieldModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        this.storeData("gameMode", "BASIC")
    },
    processServerResponse: function(e) {
        var t = this;
        Sys.isDefined(e.wins) && (Sys.isDefined(e.wins.coinsTotal) ? t.storeData("totalWin", e.wins.coinsTotal) : t.storeData("totalWin", ""), Sys.isDefined(e.wins.coins) ? t.storeData("win", e.wins.coins) : t.storeData("win", 0), Sys.isDefined(e.wins.freespins) ? t.storeData("additionalFreeSpins", e.wins.freespins) : t.storeData("additionalFreeSpins", 0)), Sys.isDefined(e.freespins) && Sys.isDefined(e.freespins.left) ? t.storeData("freeSpinsLeft", e.freespins.left) : t.storeData("freeSpinsLeft", 0)
    },
    setWinToTotalWin: function() {
        this.storeData("win", this.readData("totalWin"))
    },
    getBetText: function() {
        return Services.moneyManager.getBetCoins()
    },
    getBalanceText: function() {
        return Services.moneyManager.getBalanceCoins()
    },
    getWinText: function() {
        var e = this.readData("win");
        return 0 === e ? "" : e
    },
    getProgressiveWinText: function() {
        return this.readData("win")
    },
    getTotalWinText: function() {
        return this.readData("totalWin")
    },
    getTotalWinCountUpValues: function() {
        var e = this.readData("win"),
            t = this.readData("totalWin");
        return {
            from: t - e,
            to: t
        }
    },
    getFreeSpinsLeftText: function() {
        return this.readData("freeSpinsLeft")
    },
    getAdditionalFreeSpinsWonText: function() {
        return this.readData("additionalFreeSpins")
    },
    getWinUpToText: function() {
        return this.WIN_UP_TO
    }
}, Interface.Slots.CoinsFieldModel = Sys.extend(Core.Model, Interface.Slots.CoinsFieldModel, "Interface.Slots.CoinsFieldModel");
Sys.ns("Interface.Slots"), Interface.Slots.CoinsFieldController = {
    TOGGLE_SEQUENCE: [{
        action: "showWin",
        displayDuration: 3e3
    }, {
        action: "showBalanceAndBet",
        displayDuration: 3e3
    }, {
        action: "showWinUpTo",
        displayDuration: 3e3
    }, {
        action: "showBalanceAndBet",
        displayDuration: 3e3
    }],
    constructor: function() {
        Interface.Slots.CoinsFieldController.superclass.constructor.apply(this, arguments), this.view.setupView()
    },
    setupEvents: function() {
        this.on({
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "notify:stateHandler.enteringBeforeLoaderCloseState": this.onBeforeLoaderClose,
            "notify:stateHandler.enteringIdleState": this.onEnteringIdleState,
            "notify:stateHandler.enteringFreeSpinIntroState": this.onEnteringFreeSpinIntroState,
            "notify:stateHandler.enteringSpinningState": this.onEnteringSpinningState,
            "notify:moneyManager.betChanged": this.onInfoChanged,
            "notify:settingsWindow.open": this.onSettingsWindowOpened,
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:gameModeChanged": this.onGameModeChanged,
            "request:coinsField.showWin": this.onShowWinRequest,
            "request:coinsField.showNormalWin": this.onShowNormalWinRequest,
            "request:coinsField.showProgressiveWin": this.onShowProgressiveWinRequest,
            "request:coinsField.showFreeSpinsLeft": this.showFreeSpinsLeft,
            "request:coinsField.showAdditionalFreeSpinsWon": this.showAdditionalFreeSpinsWon,
            "request:coinsField.countUp": this.view.countUpProgressiveWin.bind(this.view),
            "view:appendToGameFooter": this.onAppendToGameFooter,
            "view:setCountUpCallback": this.onSetCountUpCallback,
            "view:startCountUp": this.onStartCountUp,
            "view:stopCountUp": this.onStopCountUp,
            "view:countUpComplete": this.onCountUpComplete
        })
    },
    onAppendToGameFooter: function(e) {
        this.fireEvent("request:balanceDisplay.appendChild", e)
    },
    onSetCountUpCallback: function(e) {
        this.fireEvent("request:coinsFieldCountUp.setCallback", e)
    },
    onStartCountUp: function(e) {
        this.fireEvent("request:coinsFieldCountUp.start", e)
    },
    onStopCountUp: function() {
        this.fireEvent("request:coinsFieldCountUp.stop")
    },
    onCountUpComplete: function() {
        this.fireEvent("notify:coinsField.countUpComplete")
    },
    initAnimations: function() {
        "function" == typeof this.view.initAnimations && this.view.initAnimations()
    },
    onServerResponse: function(e) {
        this.model.processServerResponse(e)
    },
    onBeforeLoaderClose: function() {
        this.showBalanceAndBet()
    },
    onEnteringIdleState: function() {
        var e = this;
        e.model.readData("showProgressiveWinDisplay") && (e.model.storeData("showProgressiveWinDisplay", !1), e.model.setWinToTotalWin()), e.model.readData("hasPlayedInitialRound") ? e.startToggling() : e.showBalanceAndBet()
    },
    onEnteringSpinningState: function() {
        var e = this;
        clearTimeout(e.toggleTimeout), e.model.storeData("hasPlayedInitialRound", !0), e.model.storeData("win", ""), e.model.readData("showProgressiveWinDisplay") ? e.showProgressiveWin() : e.showBalanceAndBet()
    },
    onEnteringFreeSpinIntroState: function() {
        this.view.onEnteringFreeSpinIntroState()
    },
    onInfoChanged: function() {
        this.view.showBalanceAndBet()
    },
    onSettingsWindowOpened: function() {
        clearTimeout(this.toggleTimeout), this.showBalanceAndBet()
    },
    onShowWinRequest: function() {
        this.model.readData("showProgressiveWinDisplay") ? this.showProgressiveWin() : this.showWin()
    },
    onShowNormalWinRequest: function() {
        var e = this.model;
        e.readData("showProgressiveWinDisplay") && (e.storeData("showProgressiveWinDisplay", !1), e.setWinToTotalWin()), this.showWin()
    },
    onShowProgressiveWinRequest: function(e) {
        this.model.storeData("showProgressiveWinDisplay", !0), this.showProgressiveWin(e)
    },
    showBalanceAndBet: function() {
        this.view.showBalanceAndBet()
    },
    showWin: function() {
        this.view.showWin()
    },
    showProgressiveWin: function(e) {
        e && this.model.storeData("win", ""), this.view.showProgressiveWin()
    },
    showFreeSpinsLeft: function() {
        this.view.showFreeSpinsLeft()
    },
    showAdditionalFreeSpinsWon: function() {
        this.view.showAdditionalFreeSpinsWon()
    },
    startToggling: function() {
        this.model.storeData("nextToggleIndex", 0), this.showNextInToggleSequence()
    },
    showNextInToggleSequence: function() {
        var e = this,
            n = e.TOGGLE_SEQUENCE,
            t = e.model.readData("nextToggleIndex"),
            o = n[t];
        e.model.storeData("nextToggleIndex", (t + 1) % n.length), e.view[o.action](), e.toggleTimeout = setTimeout(e.showNextInToggleSequence.bind(e), o.displayDuration)
    },
    onGameModeChanged: function(e) {
        this.model.storeData("gameMode", e), this.view.onGameModeChanged(e)
    }
}, Interface.Slots.CoinsFieldController = Sys.extend(Core.Controller, Interface.Slots.CoinsFieldController, "Interface.Slots.CoinsFieldController");
Sys.ns("Interface.Slots"), Interface.Slots.CoinsFieldBaseView = {
    BASE_CSS: "interface-coinsField_base",
    BACKGROUND_URI: "interface-coinsField_uri",
    PORTRAIT_CSS: "interface-coinsField_portrait",
    LANDSCAPE_CSS: "interface-coinsField_landscape",
    SUB_COMPONENT_CSS: "interface-coinsField_subComponent",
    constructor: function() {
        Interface.Slots.CoinsFieldBaseView.superclass.constructor.apply(this, arguments)
    },
    setupView: function() {
        var e = this,
            n = 0,
            i = "<span class='number'></span>",
            t = "<div class='number' style='display: inline-block; text-align: left; min-width: 3em;'></div>",
            a = "<span class='number'>" + e.model.getWinUpToText() + "</span>";
        e.container = new Sys.Element({
            id: "coinsField",
            tag: "div",
            cls: e.BASE_CSS + " " + e.BACKGROUND_URI
        }), e.betAndBalance = e.container.add(new Sys.Element({
            id: "coinsField_betAndBalance",
            tag: "div",
            cls: e.SUB_COMPONENT_CSS,
            style: "visibility:hidden; z-index:" + n++ + ";"
        })), e.balanceDisplay = e.betAndBalance.add(new Sys.Element({
            id: "coinsField_betAndBalance_balanceDisplay",
            tag: "span",
            innerHTML: Services.languageManager.getText(Language.Keys.coinsColonVar).replace("{0}", i),
            style: "margin-right:2%;"
        })), e.betDisplay = e.betAndBalance.add(new Sys.Element({
            id: "coinsField_betAndBalance_betDisplay",
            tag: "span",
            innerHTML: Services.languageManager.getText(Language.Keys.betColonVar).replace("{0}", i),
            style: "margin-left:2%;"
        })), e.balanceCoinsElement = e.balanceDisplay.el.getElementsByTagName("span")[0] || document.createElement("span"), e.betCoinsElement = e.betDisplay.el.getElementsByTagName("span")[0] || document.createElement("span"), e.win = e.container.add(new Sys.Element({
            id: "coinsField_win",
            tag: "div",
            cls: e.SUB_COMPONENT_CSS,
            innerHTML: Services.languageManager.getText(Language.Keys.winColonVar).replace("{0}", i),
            style: "visibility:hidden; z-index:" + n++ + ";"
        })), e.winCoinsElement = e.win.el.getElementsByTagName("span")[0] || document.createElement("span"), e.youWon = e.container.add(new Sys.Element({
            id: "coinsField_youWon",
            tag: "div",
            cls: e.SUB_COMPONENT_CSS,
            innerHTML: Services.languageManager.getText(Language.Keys.youWonCoins).replace("{0}", i),
            style: "visibility:hidden; z-index:" + n++ + ";"
        })), e.youWonCoinsElement = e.youWon.el.getElementsByTagName("span")[0] || document.createElement("span"), e.progressiveWin = e.container.add(new Sys.Element({
            id: "coinsField_progressiveWin",
            tag: "div",
            cls: e.SUB_COMPONENT_CSS,
            style: "visibility:hidden; z-index:" + n++ + ";"
        })), e.progressiveWinDisplay = e.progressiveWin.add(new Sys.Element({
            id: "coinsField_progressiveWin_winDisplay",
            tag: "span",
            innerHTML: Services.languageManager.getText(Language.Keys.winColonVar).replace("{0}", t),
            style: "margin-right:2%;"
        })), e.totalWinDisplay = e.progressiveWin.add(new Sys.Element({
            id: "coinsField_progressiveWin_totalWinDisplay",
            tag: "span",
            innerHTML: Services.languageManager.getText(Language.Keys.totalWinColonVar).replace("{0}", t),
            style: "margin-left:2%;"
        })), e.progressiveWinCoinsElement = e.progressiveWinDisplay.el.getElementsByTagName("div")[0] || document.createElement("div"), e.totalWinCoinsElement = e.totalWinDisplay.el.getElementsByTagName("div")[0] || document.createElement("div"), e.freeSpinsLeft = e.container.add(new Sys.Element({
            id: "coinsField_freeSpinsLeft",
            tag: "div",
            cls: e.SUB_COMPONENT_CSS,
            innerHTML: Services.languageManager.getText(Language.Keys.freeSpinsLeftColonVar).replace("{0}", i),
            style: "visibility:hidden; z-index:" + n++ + ";"
        })), e.freeSpinsLeftNumberElement = e.freeSpinsLeft.el.getElementsByTagName("span")[0] || document.createElement("span"), e.additionalFreeSpinsWon = e.container.add(new Sys.Element({
            id: "coinsField_additionalFreeSpinsWon",
            tag: "div",
            cls: e.SUB_COMPONENT_CSS,
            innerHTML: Services.languageManager.getText(Language.Keys.additonalFreeSpinsWon).replace("{0}", i),
            style: "visibility:hidden; z-index:" + n++ + ";"
        })), e.additionalFreeSpinsNumberElement = e.additionalFreeSpinsWon.el.getElementsByTagName("span")[0] || document.createElement("span"), e.winUpTo = e.container.add(new Sys.Element({
            id: "coinsField_winUpTo",
            tag: "div",
            cls: e.SUB_COMPONENT_CSS,
            innerHTML: Services.languageManager.getText(Language.Keys.winUpTo).replace("{0}", a),
            style: "visibility:hidden; z-index:" + n + ";"
        })), e.fireEvent("view:appendToGameFooter", e.container)
    },
    showBalanceAndBet: function() {
        var e = this;
        e.betCoinsElement.textContent = e.model.getBetText(), e.balanceCoinsElement.textContent = e.model.getBalanceText(), e.show(e.betAndBalance)
    },
    showWin: function() {
        var e = this,
            n = e.model.getWinText();
        n > 0 ? (e.youWonCoinsElement.textContent = n, e.show(e.youWon)) : (e.winCoinsElement.textContent = n, e.show(e.win))
    },
    showProgressiveWin: function() {
        var e = this;
        e.fireEvent("view:stopCountUp"), e.progressiveWinCoinsElement.textContent = e.model.getProgressiveWinText(), e.totalWinCoinsElement.textContent = e.model.getTotalWinText(), e.show(e.progressiveWin)
    },
    countUpCallback: function(e) {
        this.totalWinCoinsElement.textContent = e
    },
    countUpProgressiveWin: function(e) {
        var n = this,
            i = n.model.getTotalWinCountUpValues();
        n.model.readData("hasRegisteredCallback") || (n.fireEvent("view:setCountUpCallback", n.countUpCallback.bind(n)), n.model.storeData("hasRegisteredCallback", !0)), i.duration = e, i.fireEventsOnValue = [{
            value: i.to,
            event: "view:countUpComplete",
            scope: n
        }], n.progressiveWinCoinsElement.textContent = n.model.getProgressiveWinText(), n.fireEvent("view:startCountUp", i)
    },
    showFreeSpinsLeft: function() {
        var e = this;
        e.freeSpinsLeftNumberElement.textContent = e.model.getFreeSpinsLeftText(), e.show(e.freeSpinsLeft)
    },
    showAdditionalFreeSpinsWon: function() {
        var e = this;
        e.additionalFreeSpinsNumberElement.textContent = e.model.getAdditionalFreeSpinsWonText(), e.show(e.additionalFreeSpinsWon)
    },
    showWinUpTo: function() {
        this.show(this.winUpTo)
    },
    show: function(e) {
        var n = this,
            i = n.model.readData("currentlyShowingElement");
        i !== e && (Sys.isDefined(i) && n.hideElement(i), n.showElement(e), n.model.storeData("currentlyShowingElement", e))
    },
    hideElement: function(e) {
        e.el.style.visibility = "hidden"
    },
    showElement: function(e) {
        e.el.style.visibility = "visible"
    },
    onEnteringFreeSpinIntroState: function() {},
    onGameModeChanged: function() {}
}, Interface.Slots.CoinsFieldBaseView = Sys.extend(Core.View, Interface.Slots.CoinsFieldBaseView, "Interface.Slots.CoinsFieldBaseView");
Sys.ns("interface.Slots"), Interface.Slots.CoinsFieldMobileView = {
    BASE_CSS: "interface-coinsField_base interface-coinsField_mobile",
    PORTRAIT_CSS: "interface-coinsField_portrait_mobile",
    LANDSCAPE_CSS: "interface-coinsField_landscape_mobile",
    constructor: function() {
        Interface.Slots.CoinsFieldMobileView.superclass.constructor.apply(this, arguments)
    }
}, Interface.Slots.CoinsFieldMobileView = Sys.extend(Interface.Slots.CoinsFieldBaseView, Interface.Slots.CoinsFieldMobileView, "Interface.Slots.CoinsFieldMobileView");
Sys.ns("Interface.Slots"), Interface.Slots.CoinsFieldDesktopView = {
    GAME_MODES: ["BASIC", "FREESPIN"],
    BASIC_BET_LABEL: {
        font: "10px Verdana",
        fillstyle: "rgba( 255, 255, 255, 1 )",
        position: {
            x: 160,
            y: 615,
            width: 267,
            height: 133
        },
        alignment: {
            horizontal: "left",
            vertical: !1
        }
    },
    BASIC_BET_VALUE: {
        font: "10px Verdana",
        fillstyle: "rgba( 255, 255, 255, 1 )",
        position: {
            x: 160,
            y: 643,
            width: 267,
            height: 133
        },
        alignment: {
            horizontal: "left",
            vertical: !1
        }
    },
    BASIC_BALANCE_LABEL: {
        font: "10px Verdana",
        fillstyle: "rgba( 255, 255, 255, 1 )",
        position: {
            x: 1071,
            y: 615,
            width: 267,
            height: 133
        },
        alignment: {
            horizontal: "left",
            vertical: !1
        }
    },
    BASIC_BALANCE_VALUE: {
        font: "10px Verdana",
        fillstyle: "rgba( 255, 255, 255, 1 )",
        position: {
            x: 1071,
            y: 643,
            width: 267,
            height: 133
        },
        alignment: {
            horizontal: "left",
            vertical: !1
        }
    },
    BASIC_BACKGROUND: {
        image: "keypadBackground",
        position: {
            x: 7,
            y: 606,
            width: 1265,
            height: 84
        }
    },
    FREESPIN_BET_LABEL: {
        font: "10px Verdana",
        fillstyle: "rgba( 255, 255, 255, 1 )",
        position: {
            x: 25,
            y: 656,
            width: 100,
            height: 20
        },
        alignment: {
            horizontal: "right",
            vertical: !1
        }
    },
    FREESPIN_BET_VALUE: {
        font: "10px Verdana",
        fillstyle: "rgba( 255, 255, 255, 1 )",
        position: {
            x: 133,
            y: 656,
            width: 267,
            height: 20
        },
        alignment: {
            horizontal: "left",
            vertical: !1
        }
    },
    FREESPIN_BALANCE_LABEL: {
        font: "10px Verdana",
        fillstyle: "rgba( 255, 255, 255, 1 )",
        position: {
            x: 1e3,
            y: 656,
            width: 100,
            height: 20
        },
        alignment: {
            horizontal: "right",
            vertical: !1
        }
    },
    FREESPIN_BALANCE_VALUE: {
        font: "10px Verdana",
        fillstyle: "rgba( 255, 255, 255, 1 )",
        position: {
            x: 1107,
            y: 656,
            width: 267,
            height: 20
        },
        alignment: {
            horizontal: "left",
            vertical: !1
        }
    },
    FREESPIN_WIN_LABEL: {
        font: "15px Verdana",
        fillstyle: "rgba( 255, 255, 255, 1 )",
        position: {
            x: 530,
            y: 580,
            width: 120,
            height: 40
        },
        alignment: {
            horizontal: "right",
            vertical: !0
        }
    },
    FREESPIN_WIN_VALUE: {
        font: "22px Verdana",
        fillstyle: "rgba( 255, 255, 255, 1 )",
        position: {
            x: 663,
            y: 580,
            width: 150,
            height: 40
        },
        alignment: {
            horizontal: "left",
            vertical: !0
        }
    },
    FREESPIN_TOTAL_WIN_LABEL: {
        font: "15px Verdana",
        fillstyle: "rgba( 255, 255, 255, 1 )",
        position: {
            x: 530,
            y: 623,
            width: 120,
            height: 40
        },
        alignment: {
            horizontal: "right",
            vertical: !0
        }
    },
    FREESPIN_TOTAL_WIN_VALUE: {
        font: "22px Verdana",
        fillstyle: "rgba( 255, 255, 255, 1 )",
        position: {
            x: 663,
            y: 623,
            width: 150,
            height: 40
        },
        alignment: {
            horizontal: "left",
            vertical: !0
        }
    },
    FREESPIN_BACKGROUND: {
        image: "keypadFreeSpinBackground",
        position: {
            x: 429,
            y: 567,
            width: 421,
            height: 114
        }
    },
    constructor: function() {
        Interface.Slots.CoinsFieldDesktopView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var t = this;
        t.initBackground(), t.initTexts(), t.onGameModeChanged("BASIC")
    },
    initBackground: function() {
        var t, e, n, i, o = this,
            a = o.getKeypadLayering(),
            s = new Animation.List({}),
            r = {},
            l = o.GAME_MODES;
        for (e = -1, n = l.length; ++e < n;) t = l[e], i = o[t + "_BACKGROUND"].position, r[l[e]] = new Animation.Item({
            top: i.y,
            left: i.x,
            width: i.width,
            height: i.height,
            depth: a["background_" + t.toLowerCase()],
            image: o[t + "_BACKGROUND"].image
        }), s.add(r[l[e]]);
        Game.stage.view.addToRenderLoop(s), o.backgroundItems = r
    },
    getKeypadLayering: function() {
        return Layering.Game.Slots.Keypad
    },
    getMainTypes: function() {
        var t = this;
        return {
            BET: {
                LABEL: {
                    defaultMode: "FREESPIN",
                    content: function() {
                        return Services.languageManager.getText(Language.Keys.machinetext_bet)
                    }
                },
                VALUE: {
                    defaultMode: "FREESPIN",
                    content: function() {
                        return t.model.getBetText()
                    }
                }
            },
            BALANCE: {
                LABEL: {
                    defaultMode: "FREESPIN",
                    content: function() {
                        return Services.languageManager.getText(Language.Keys.machinetext_coins)
                    }
                },
                VALUE: {
                    defaultMode: "FREESPIN",
                    content: function() {
                        return t.model.getBalanceText()
                    }
                }
            },
            WIN: {
                LABEL: {
                    modes: ["FREESPIN"],
                    defaultMode: "FREESPIN",
                    content: function() {
                        return Services.languageManager.getText(Language.Keys.winColon_uc)
                    }
                },
                VALUE: {
                    modes: ["FREESPIN"],
                    defaultMode: "FREESPIN",
                    content: function() {
                        return t.model.getWinText()
                    }
                }
            },
            TOTAL_WIN: {
                LABEL: {
                    modes: ["FREESPIN"],
                    defaultMode: "FREESPIN",
                    content: function() {
                        return Services.languageManager.getText(Language.Keys.totalWinColon_uc)
                    }
                },
                VALUE: {
                    modes: ["FREESPIN"],
                    defaultMode: "FREESPIN",
                    content: function() {
                        return t.model.getTotalWinText()
                    }
                }
            }
        }
    },
    initTexts: function() {
        var t, e, n = this,
            i = new Animation.List({}),
            o = n.GAME_MODES,
            a = o.length,
            s = {};
        for (e = -1; ++e < a;) t = o[e], s[t] = n.getTextsForGameMode(t, i);
        n.textItems = s, n.updateTexts(), Game.stage.view.addToRenderLoop(i)
    },
    getTextsForGameMode: function(t, e) {
        var n, i, o = this,
            a = o.getKeypadLayering(),
            s = o.getMainTypes(),
            r = Object.keys(s),
            l = r.length,
            d = {};
        for (i = -1; ++i < l;) n = r[i], d[n] = o.createTextItems(n, s[n], a[n.toLowerCase()], e, t);
        return d
    },
    createTextItems: function(t, e, n, i, o) {
        var a, s, r, l, d, g, h, c, f, u, p = this,
            E = {},
            m = Object.keys(e),
            y = m.length;
        for (u = -1; ++u < y;) {
            if (g = m[u], a = e[g], s = !!Sys.isDefined(a.defaultMode) && a.defaultMode, r = o + "_" + t + "_" + g, l = s + "_" + t + "_" + g, h = Sys.isDefined(p[r]) ? p[r].position : p[l].position, d = p.getAlignment(r, l), Sys.isObj(a) && Sys.isArray(a.modes)) {
                if (!a.modes.contains(o)) continue;
                a = a.content
            }
            c = this.initTextItem(h.width, h.height, h.x, h.y, n, s, d), f = "function" == typeof a ? a : a.content, E[g] = {
                item: c,
                valueFunction: f
            }, i.add(c), c.stop()
        }
        return E
    },
    updateTexts: function() {
        var t, e = this,
            n = e.GAME_MODES,
            i = e.model.readData("gameMode"),
            o = n.length;
        if (Sys.isDefined(e.textItems))
            for (t = -1; ++t < o;) e.updateMainTypesTexts(e.textItems[n[t]], i, n[t] === i)
    },
    updateMainTypesTexts: function(t, e, n) {
        var i, o, a = Object.keys(t),
            s = a.length;
        for (o = -1; ++o < s;) i = a[o], this.updateSubTypeTexts(t[i], e, n, i)
    },
    updateSubTypeTexts: function(t, e, n, i) {
        var o, a, s, r, l, d, g, h, c, f, u = this,
            p = Object.keys(t),
            E = p.length;
        for (l = -1; ++l < E;) o = p[l], a = t[o], s = a.item, r = s.prop, d = e + "_" + i + "_" + o, g = r.customProps.defaultMainType + "_" + i + "_" + o, h = Sys.isDefined(u[d]) ? u[d].font : u[g].font, c = Sys.isDefined(u[d]) ? u[d].fillstyle : u[g].fillstyle, f = u.getAlignment(d, g), n ? (u.updateTextItem(s, a.valueFunction.call(u), h, c, f), s.prop.running || s.play()) : s.stop()
    },
    initTextItem: function(t, e, n, i, o, a, s) {
        var r = this,
            l = r.getInMemoryCanvas(t, e);
        return Sys.isDefined(s) && (l.ctx.textAlign = s.horizontal), new Animation.Item({
            top: i,
            left: n,
            width: t,
            height: e,
            depth: o,
            image: l.canvas,
            customProps: {
                inMemCanvas: l,
                defaultMainType: a,
                alignment: s
            }
        })
    },
    updateTextItem: function(t, e, n, i, o, a) {
        var s = t.prop,
            r = Sys.isDefined(o) ? o : {
                horizontal: "left",
                vertical: !1
            },
            l = "right" === r.horizontal ? s.width : 0,
            d = s.customProps.inMemCanvas,
            g = Animation.utils.text.measureText(e.toString(), n, 0, d.ctx).height / 2,
            h = Sys.isDefined(a) ? a : 20;
        d.ctx.clearRect(0, 0, d.canvas.width, d.canvas.height), Animation.utils.text.wrapCanvasText(e.toString(), n, l, g, s.width, h, [{
            fillStyle: i,
            drawType: "fill"
        }], d.ctx, r.vertical)
    },
    getInMemoryCanvas: function(t, e) {
        var n = document.createElement("canvas"),
            i = n.getContext("2d");
        return n.width = t, n.height = e, {
            canvas: n,
            ctx: i
        }
    },
    showBalanceAndBet: function() {
        this.updateTexts()
    },
    showWin: function() {
        this.updateTexts()
    },
    onGameModeChanged: function(t) {
        var e, n, i, o = this,
            a = o.backgroundItems,
            s = o.GAME_MODES;
        for (e = -1, i = s.length; ++e < i;) n = a[s[e]], s[e] === t ? n.play() : n.stop();
        this.updateTexts()
    },
    showProgressiveWin: function() {
        this.updateTexts()
    },
    getAlignment: function(t, e) {
        var n = this;
        return Sys.isDefined(n[t]) ? n[t].alignment : n[e].alignment
    },
    countUpCallback: function() {},
    countUpProgressiveWin: function() {
        this.fireEvent("view:countUpComplete")
    },
    showFreeSpinsLeft: function() {},
    showAdditionalFreeSpinsWon: function() {},
    showWinUpTo: function() {},
    show: function() {},
    hideElement: function() {},
    showElement: function() {},
    setupView: function() {}
}, Interface.Slots.CoinsFieldDesktopView = Sys.extend(Interface.Slots.CoinsFieldBaseView, Interface.Slots.CoinsFieldDesktopView, "Interface.Slots.CoinsFieldDesktopView");
Sys.ns("Interface"), Interface.SettingsWindow = {
    constructor: function() {
        Interface.SettingsWindow.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.SettingsWindowController,
            model: Interface.SettingsWindowModel,
            view: Interface.SettingsWindowBaseView
        }
    },
    getMixinDependencies: function() {
        return ["orientation"]
    }
}, Interface.SettingsWindow = Sys.extend(Core.Module, Interface.SettingsWindow, "Interface.SettingsWindow");
Sys.ns("Interface"), Interface.SettingsWindowController = {
    constructor: function() {
        Interface.SettingsWindowController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "view:opened": e.opened,
            "view:close": e.onCloseRequest,
            "view:closed": e.closed,
            "request:settingsWindow.open": e.onOpenRequest,
            "request:settingsWindow.close": e.onCloseRequest,
            "request:settingsWindow.openChild": e.onOpenChildRequest,
            "request:settingsWindow.closeChild": e.onCloseChildRequest,
            "request:settingsWindow.addChild": e.addChild,
            "request:settingsWindow.removeChild": e.removeChild,
            "request:settingsWindow.activateChild": e.activateChild,
            "request:settingsWindow.deactivateChild": e.deactivateChild,
            "notify:viewport.scaled": e.viewportScaled
        })
    },
    viewportScaled: function() {
        var e = this;
        Platform.isChromeForIOS && window.setTimeout(function() {
            e.view.adaptToOrientation(Utils.Platform.getOrientation())
        }, 500)
    },
    onOpenRequest: function() {
        var e = this;
        e.model.readData("open") || e.open(this.model.readData("currentlyShowingChild"))
    },
    onOpenChildRequest: function(e, t) {
        var i = this;
        i.model.isActiveChild(e) && (i.model.readData("open") ? i.openChild(e, t) : i.open(e, t))
    },
    onCloseRequest: function() {
        var e = this;
        e.model.readData("open") && e.close()
    },
    onCloseChildRequest: function(e) {
        var t = this;
        e === t.model.readData("currentlyShowingChild") && t.close()
    },
    open: function(e, t) {
        var i = this;
        i.model.storeData("open", !0), i.view.open(), Sys.isDefined(e) && i.openChild(e, t)
    },
    openChild: function(e, t) {
        var i = this,
            o = i.model.readData("currentlyShowingChild");
        o !== e && (i.model.storeData("currentlyShowingChild", e), i.closeChild(o)), i.fireEvent("notify:settingsWindow.openedChild", e, t), i.view.showChild(e)
    },
    close: function() {
        var e = this;
        e.model.storeData("open", !1), e.closeChild(e.model.readData("currentlyShowingChild")), e.view.close()
    },
    closeChild: function(e) {
        this.fireEvent("notify:settingsWindow.closedChild", e)
    },
    opened: function() {
        this.fireEvent("notify:settingsWindow.open")
    },
    closed: function() {
        this.fireEvent("notify:settingsWindow.closed")
    },
    addChild: function(e, t) {
        this.model.addChild(e, t), this.view.addChild(t)
    },
    removeChild: function(e) {
        this.view.removeChild(e), this.model.removeChild(e)
    },
    activateChild: function(e) {
        this.model.activateChild(e)
    },
    deactivateChild: function(e) {
        this.model.deactivateChild(e)
    }
}, Interface.SettingsWindowController = Sys.extend(Core.Controller, Interface.SettingsWindowController, "Interface.SettingsWindowController");
Sys.ns("Interface"), Interface.SettingsWindowModel = {
    constructor: function() {
        Interface.SettingsWindowModel.superclass.constructor.apply(this, arguments)
    },
    addChild: function(e, t) {
        var i = this.readData("children");
        Sys.isDefined(i[e]) || (i[e] = {
            active: !0,
            config: t
        })
    },
    removeChild: function(e) {
        delete this.readData("children")[e]
    },
    isActiveChild: function(e) {
        var t = this.readData("children")[e];
        return Sys.isDefined(t) && t.active
    },
    getChildConfig: function(e) {
        return this.readData("children")[e].config
    },
    activateChild: function(e) {
        var t = this.readData("children")[e];
        Sys.isDefined(t) || (t.active = !0)
    },
    deactivateChild: function(e) {
        var t = this.readData("children")[e];
        Sys.isDefined(t) || (t.active = !1)
    },
    setupData: function() {
        this.storeData("children", {}), this.storeData("open", !1)
    }
}, Interface.SettingsWindowModel = Sys.extend(Core.Model, Interface.SettingsWindowModel, "Interface.SettingsWindowModel");
Sys.ns("Interface"), Interface.SettingsWindowBaseView = {
    BASE_CSS: "interface-settingsWindow_base",
    PORTRAIT_CSS: "interface-settingsWindow_portrait",
    LANDSCAPE_CSS: "interface-settingsWindow_landscape",
    HEADER_CSS: "interface-settingsWindow_header interface-settingsSection_subSection_uri",
    CONTENT_CSS: "interface-settingsWindow_content",
    RENDER_TARGET: "gameWrapper",
    constructor: function() {
        Interface.SettingsWindowBaseView.superclass.constructor.apply(this, arguments)
    },
    open: function() {
        this.container.el.style.display = "block", this.fireEvent("view:opened")
    },
    close: function() {
        this.container.el.style.display = "none", this.fireEvent("view:closed")
    },
    adaptToOrientation: function(e) {
        this.setStyle(e)
    },
    addChild: function(e) {
        this.content.add(e.content)
    },
    removeChild: function(e) {
        this.content.remove(this.model.getChildConfig(e).content)
    },
    showChild: function(e) {
        Utils.Platform.isPortrait() && this.open(), this.setTitle(this.model.getChildConfig(e).title)
    },
    init: function() {
        var e = this;
        Interface.SettingsWindowBaseView.superclass.init.apply(e, arguments), e.closeAnimation = {}, e.openAnimation = {}, e.setupDOMStructure()
    },
    setupDOMStructure: function() {
        var e = this;
        e.container = new Sys.Element({
            id: "settingsWindow",
            tag: "div",
            cls: e.BASE_CSS,
            renderTo: e.RENDER_TARGET
        }), e.header = e.container.add(new Sys.Element({
            id: "settingsWindowHeader",
            tag: "div",
            cls: e.HEADER_CSS
        })), e.content = e.container.add(new Sys.Element({
            id: "settingsWindowContent",
            tag: "div",
            cls: e.CONTENT_CSS
        }))
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "model:childAdded": e.addChild,
            "model:childRemoved": e.removeChild,
            "model:showChild": e.showChild
        })
    },
    removeAnimations: function() {
        var e = this;
        Sys.isDefined(e.openAnimation.LANDSCAPE) && e.openAnimation.LANDSCAPE.removeAnimation(e.container.el), Sys.isDefined(e.openAnimation.PORTRAIT) && e.openAnimation.PORTRAIT.removeAnimation(e.container.el)
    },
    setTitle: function(e) {
        this.header.el.textContent = e
    }
}, Interface.SettingsWindowBaseView = Sys.extend(Core.View, Interface.SettingsWindowBaseView, "Interface.SettingsWindowBaseView");
Sys.ns("Interface"), Interface.SettingsWindowMobileView = {
    PORTRAIT_CSS: "interface-settingsWindow_portrait_mobile",
    LANDSCAPE_CSS: "interface-settingsWindow_landscape_mobile",
    constructor: function() {
        Interface.SettingsWindowMobileView.superclass.constructor.apply(this, arguments)
    },
    adaptToOrientation: function(e) {
        Interface.SettingsWindowMobileView.superclass.adaptToOrientation.call(this, e), this.setHeight(e)
    },
    setHeight: function(e) {
        Utils.Platform.isPortrait(e) ? this.container.el.style.height = Math.floor(Environment.determineResolution().resolution.height + Environment.getSpaceBelowGame()) + "px" : this.container.el.style.height = ""
    }
}, Interface.SettingsWindowMobileView = Sys.extend(Interface.SettingsWindowBaseView, Interface.SettingsWindowMobileView, "Interface.SettingsWindowMobileView");
Sys.ns("Interface"), Interface.SettingsWindowDesktopView = {
    BASE_CSS: "interface-settingsWindow_base",
    LANDSCAPE_CSS: "interface-settingsWindow_landscape_desktop",
    CLOSE_BUTTON_CSS: "interface-settingsWindow_desktop_closeButton interface-settingsWindow_closeButton_uri",
    constructor: function() {
        Interface.SettingsWindowDesktopView.superclass.constructor.apply(this, arguments)
    },
    setupDOMStructure: function() {
        var e = this;
        Interface.SettingsWindowDesktopView.superclass.setupDOMStructure.apply(e, arguments), e.closeButton = new Interface.utils.DOMButton({
            id: "settingsWindowCloseButton",
            baseCSS: e.CLOSE_BUTTON_CSS,
            clickCallback: e.fireEvent.bind(e, "view:close"),
            enabled: !1
        }), e.container.add(e.closeButton.getContainer())
    },
    open: function() {
        Interface.SettingsWindowDesktopView.superclass.open.apply(this, arguments), this.closeButton.enable("sectionClosed")
    },
    close: function() {
        Interface.SettingsWindowDesktopView.superclass.close.apply(this, arguments), this.closeButton.disable("sectionClosed")
    }
}, Interface.SettingsWindowDesktopView = Sys.extend(Interface.SettingsWindowBaseView, Interface.SettingsWindowDesktopView, "Interface.SettingsWindowDesktopView");
Sys.ns("Interface"), Interface.SettingsMenu = {
    constructor: function() {
        Interface.SettingsMenu.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.SettingsMenuController,
            model: Interface.SettingsMenuModel,
            view: Interface.SettingsMenuBaseView
        }
    },
    getMixinDependencies: function() {
        return ["userInput", "orientation"]
    }
}, Interface.SettingsMenu = Sys.extend(Core.Module, Interface.SettingsMenu, "Interface.SettingsMenu");
Sys.ns("Interface"), Interface.SettingsMenuController = {
    constructor: function() {
        Interface.SettingsMenuController.superclass.constructor.apply(this, arguments), this.deactivatedAtSpinStart = !0
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "request:settingsMenu.open": e.onOpenRequest,
            "request:settingsMenu.close": e.onCloseRequest,
            "request:settingsMenu.addChild": e.addChild,
            "request:settingsMenu.removeChild": e.removeChild,
            "request:settingsMenu.activateChild": e.activateChild,
            "request:settingsMenu.deactivateChild": e.deactivateChild,
            "notify:stateHandler.enteringIdleState": e.activateChildrenAfterSpin,
            "notify:stateHandler.leavingIdleState": e.deactivateChildrenDuringSpin,
            "notify:moduleLoader.finishedLoadingModules": e.onModulesFinishedLoading,
            "notify:stateHandler.leavingBeforeLoaderCloseState": e.onBeforeLoaderFinished,
            "view:contentChanged": e.onContentChangedInView,
            "view:contentClosed": e.onContentClosedInView
        })
    },
    onBeforeLoaderFinished: function() {
        var e = this;
        e.model.storeData("loaderFinished", !0), e.model.readData("determinedChildSize") || e.view.onBeforeLoaderFinished()
    },
    onModulesFinishedLoading: function() {
        !0 === this.model.readData("alwaysOpen") && this.open()
    },
    onOpenRequest: function(e) {
        var t = this,
            n = t.model.readData("open"),
            i = t.view.canOpenWithoutSelection(),
            o = t.model.readData("lastSelectedChild"),
            d = Sys.isDefined(o);
        d || (o = t.model.readData("defaultChild"), d = Sys.isDefined(o)), !n && (i || e && d) && (t.open(), e && d && t.select(o))
    },
    onCloseRequest: function() {
        var e = this;
        e.model.readData("open") && (e.close(), e.deselectCurrentChild())
    },
    open: function() {
        var e = this;
        e.startListeningToUserInput(), e.model.storeData("open", !0), e.view.open(), e.fireEvent("notify:settingsMenu.open")
    },
    close: function() {
        var e = this;
        e.stopListeningToUserInput(), e.view.close(), e.model.storeData("open", !1), e.fireEvent("notify:settingsMenu.closed")
    },
    select: function(e) {
        this.view.selectChildByName(e)
    },
    deselectCurrentChild: function() {
        this.view.deselectCurrentChild()
    },
    addChild: function(e, t) {
        var n = this;
        n.addListener("notify:" + e + ".shown", n.onChildOpened.bind(n, e)), n.addListener("notify:" + e + ".hidden", n.onChildClosed.bind(n, e)), n.model.addChild(e, t), n.view.addChild(e)
    },
    onChildOpened: function(e) {
        this.model.readData("open") || this.open(), this.select(e)
    },
    onChildClosed: function(e) {
        this.model.readData("currentlySelectedChild") === e && this.deselectCurrentChild()
    },
    removeChild: function(e) {
        var t = this;
        t.removeListener("notify:" + e + ".shown"), t.removeListener("notify:" + e + ".hidden"), t.view.removeChild(e), t.model.removeChild(e)
    },
    activateChild: function(e) {
        this.model.activateChild(e)
    },
    deactivateChild: function(e) {
        this.model.deactivateChild(e)
    },
    activateChildrenAfterSpin: function() {
        this.model.storeData("inIdleState", !0), this.deactivatedAtSpinStart && (this.deactivatedAtSpinStart = !1, this.toggleChildrenDuringSpin(!0))
    },
    deactivateChildrenDuringSpin: function() {
        this.model.storeData("inIdleState", !1), this.deactivatedAtSpinStart = !0, this.toggleChildrenDuringSpin(!1)
    },
    toggleChildrenDuringSpin: function(e) {
        var t, n = this.model.getChildrenDisabledDuringSpins(),
            i = n.length,
            o = e ? "activateChild" : "deactivateChild";
        for (t = -1; ++t < i;) n[t].active = e && n[t].active, this.view[o](n[t])
    },
    onPortrait: function() {
        this.view.onPortrait()
    },
    onLandscape: function() {
        this.view.onLandscape()
    },
    onUserInputStart: function(e) {
        this.model.readData("open") && this.view.onUserInputStart(e)
    },
    onUserInputMove: function(e) {
        this.model.readData("open") && this.view.onUserInputMove(e)
    },
    onUserInputEnd: function(e) {
        this.model.readData("open") && this.view.onUserInputEnd(e)
    },
    onContentChangedInView: function(e) {
        this.model.storeData("currentlySelectedChild", e), "string" == typeof e && this.fireEvent("request:" + e + ".show")
    },
    onContentClosedInView: function(e) {
        var t = this,
            n = t.model;
        n.storeData("lastSelectedChild", e), n.readData("currentlySelectedChild") === e && (n.storeData("currentlySelectedChild", void 0), t.view.canOpenWithoutSelection() || t.close()), "string" == typeof e && t.fireEvent("request:" + e + ".hide")
    }
}, Interface.SettingsMenuController = Sys.extend(Core.Controller, Interface.SettingsMenuController, "Interface.SettingsMenuController");
Sys.ns("Interface"), Interface.SettingsMenuModel = {
    constructor: function() {
        Interface.SettingsMenuModel.superclass.constructor.apply(this, arguments)
    },
    addChild: function(e, i) {
        var n = this,
            t = n.readData("children"),
            s = n.readData("disableDuringSpin"),
            a = Sys.isDefined(i) ? i : {};
        Sys.isDefined(t[e]) || (t[e] = {
            name: e,
            active: !1,
            order: a.order,
            accessibleDuringSpins: a.accessibleDuringSpins,
            toggleOnSelection: !0 === a.toggleOnSelection
        }, Sys.isDefined(a.isDefault) && a.isDefault && n.storeData("defaultChild", e), Sys.isDefined(a.accessibleDuringSpins) && a.accessibleDuringSpins || s.push(t[e]))
    },
    removeChild: function(e) {
        var i = this.readData("children"),
            n = i[e],
            t = this.readData("disableDuringSpin"),
            s = t.indexOf(n);
        Sys.isDefined(n) || (s >= 0 && t.splice(s, 1), delete i[e])
    },
    activateChild: function(e) {
        var i = this,
            n = i.readData("children")[e],
            t = i.getChildrenDisabledDuringSpins();
        Sys.isDefined(n) && (t.contains(n) && (n.accessibleDuringSpins = !0, t = t.splice(t.indexOf(n), 1), i.storeData("disableDuringSpin", t)), n.active = !0, i.fireEvent("model:childActivated", n))
    },
    deactivateChild: function(e) {
        var i = this,
            n = i.readData("children")[e],
            t = i.getChildrenDisabledDuringSpins();
        Sys.isDefined(n) && (t.contains(n) || (n.accessibleDuringSpins = !1, t.push(n), i.storeData("disableDuringSpin", t)), n.active = !1, i.fireEvent("model:childDeactivated", n))
    },
    getChildrenDisabledDuringSpins: function() {
        return this.readData("disableDuringSpin")
    },
    setupData: function() {
        var e = this;
        e.storeData("children", {}), e.storeData("disableDuringSpin", []), e.storeData("status", "closed"), Platform.isDesktopDevice && e.storeData("alwaysOpen", !0)
    }
}, Interface.SettingsMenuModel = Sys.extend(Core.Model, Interface.SettingsMenuModel, "Interface.SettingsMenuModel");
Sys.ns("Interface"), Interface.SettingsMenuBaseView = {
    BASE_CSS: "interface-settingsMenu_base",
    PORTRAIT_CSS: "interface-settingsMenu_portrait",
    LANDSCAPE_CSS: "interface-settingsMenu_landscape",
    CHILDREN_CSS: "interface-settingsMenu_children",
    CHILD_CSS: "interface-settingsMenu_child_base",
    RENDER_TARGET: "gameWrapper",
    START_INDEX: 2,
    CAN_OPEN_WITHOUT_SELECTION: !1,
    constructor: function() {
        Interface.SettingsMenuBaseView.superclass.constructor.apply(this, arguments)
    },
    open: function() {
        var e = this,
            t = e.childElements.getChildren().length,
            i = Utils.Platform.getOrientation();
        e.container.el.style.display = "block", t > 0 && 0 === e.totalChildWidth && e.adaptToOrientation(i)
    },
    canOpenWithoutSelection: function() {
        return this.CAN_OPEN_WITHOUT_SELECTION
    },
    close: function() {
        this.container.el.style.display = "none"
    },
    onUserInputStart: function(e) {
        var t = this,
            i = Sys.UserInputUtils.isCoordinateTarget(t.container.el, e);
        i && (t.distanceSinceUserInputStart = 0, t.prevX = e.x, t.scroller.doTouchStart([{
            pageX: e.x,
            pageY: e.y
        }], Date.now())), t.wasInitialInputTarget = i, i && !t.shouldScroll && t.onUserInputEnd(e)
    },
    onUserInputMove: function(e) {
        var t = this;
        t.wasInitialInputTarget && (t.distanceSinceUserInputStart += Math.abs(t.prevX - e.x), t.prevX = e.x, t.scroller.doTouchMove([{
            pageX: e.x,
            pageY: e.y
        }], Date.now()))
    },
    onUserInputEnd: function(e) {
        var t, i, n, l = this;
        l.wasInitialInputTarget && (l.scroller.doTouchEnd(Date.now()), l.distanceSinceUserInputStart < 10 && (n = Sys.UserInputUtils.getCoordinatesRelativeToElement(e, l.childElements.el).x, i = l.getIndexFromPosition(n), t = l.getChildFromElement(l.childElements.getChildren()[i]), Sys.isDefined(t) && t.name === l.model.readData("currentlySelectedChild") ? (t.toggleOnSelection && l.deselectCurrentChild(), l.snapToIndex(i)) : l.selectChild(t, i))), l.wasInitialInputTarget = !1
    },
    selectChildByName: function(e) {
        var t = this,
            i = t.model.readData("children")[e];
        e !== t.model.readData("currentlySelectedChild") && Sys.isDefined(i) && t.selectChild(i, t.getChildIndex(i))
    },
    deselectCurrentChild: function() {
        var e = this,
            t = e.model.readData("children"),
            i = t[e.model.readData("currentlySelectedChild")];
        Sys.isDefined(i) && e.deselectChild(i)
    },
    adaptToOrientation: function(e) {
        var t, i, n, l, d, a = this;
        a.setStyle(e), setTimeout(function() {
            t = a.model.readData("children"), i = t[a.model.readData("currentlySelectedChild")], n = a.getChildIndex(i), l = a.scrollerWrapper.el.clientWidth, a.determineChildSize(), Object.keys(t).length > 0 && 0 === a.totalChildWidth || (a.menuWidth = l, a.scroller.setPosition(Math.round(Math.abs(l - a.totalChildWidth)), 0), a.scroller.setDimensions(l, 10, a.totalChildWidth + l - a.childWidth, 10), a.totalChildWidth > l ? (d = n >= 0 ? n * a.childWidth : a.START_INDEX * a.childWidth, a.toggleFade(!0), a.padding = Math.round((l - a.childWidth) / 2), a.shouldScroll = !0, a.useScrollOffset = !0, a.childElements.el.style.left = 0, a.scroller.scrollTo(d, 0, !1)) : (a.toggleFade(!1), a.padding = 0, a.useScrollOffset = !1, a.scroller.scrollTo(0, 0, !1), a.childElements.el.style.left = Math.round((l - a.totalChildWidth) / 2) + "px", a.shouldScroll = !1))
        }, 0)
    },
    selectChild: function(e, t) {
        var i = this,
            n = i.model.readData("children")[i.model.readData("currentlySelectedChild")];
        e.element.addCls("selected"), i.snapToIndex(t), i.fireEvent("view:contentChanged", e.name), Sys.isDefined(n) && i.deselectChild(n)
    },
    deselectChild: function(e) {
        e.element.removeCls("selected"), this.fireEvent("view:contentClosed", e.name)
    },
    snapToIndex: function(e) {
        this.scroller.scrollTo(Math.round(e * this.childWidth), 0, !0)
    },
    getIndexFromPosition: function(e) {
        var t = Math.floor(e / this.childWidth),
            i = this.childElements.getChildren().length;
        return t < 0 ? t = 0 : t >= i && (t = i - 1), t
    },
    init: function() {
        var e = this;
        Interface.SettingsMenuBaseView.superclass.init.apply(e, arguments), e.childWidth = 0, e.totalChildWidth = 0, e.menuWidth = 0, e.distanceSinceUserInputStart = 0, e.closeAnimation = {}, e.openAnimation = {}, e.padding = 0, e.prevX = 0, e.x = 0, e.useScrollOffset = !1, e.shouldScroll = !0, e.setupDOMStructure()
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "model:childActivated": e.activateChild,
            "model:childDeactivated": e.deactivateChild
        })
    },
    toggleFade: function(e) {
        var t = e ? "block" : "none";
        this.leftFade.el.style.display = t, this.rightFade.el.style.display = t
    },
    determineChildSize: function() {
        var e, t, i = this,
            n = i.childElements.getChildren(),
            l = n.length;
        0 !== l && (t = Math.ceil(Math.ceil(n[0].getBoundingClientRect().width) * (1 / Services.scaling.getScale())), e = t * l, i.totalChildWidth !== e && (i.childElements.el.style.width = e + "px"), i.totalChildWidth = e, i.childWidth = t)
    },
    addChild: function(e) {
        var t = this,
            i = t.model.readData("children")[e],
            n = this.createChild(i.name),
            l = t.getNextClosestSibling(i);
        i.left = t.childWidth * i.order, i.element = n, Sys.isDefined(l) ? t.childElements.addBefore(n, l.element) : t.childElements.add(n), t.determineChildSize()
    },
    removeChild: function(e) {
        var t = this,
            i = t.model.readData("children")[e];
        Sys.isDefined(i) && (t.childElements.remove(i.element), t.determineChildSize())
    },
    activateChild: function(e) {
        e.element.removeCls("deactivated")
    },
    deactivateChild: function(e) {
        e.element.addCls("deactivated")
    },
    setupDOMStructure: function() {
        var e = this;
        e.container = new Sys.Element({
            tag: "div",
            cls: e.BASE_CSS,
            renderTo: e.RENDER_TARGET
        }), e.touchArea = e.container.add(new Sys.Element({
            tag: "div",
            cls: "interface-settingsMenu_touchArea"
        })), e.leftFade = e.container.add(new Sys.Element({
            tag: "div",
            cls: "interface-settingsMenu_leftFade interface-settingsMenu_fade_uri"
        })), e.rightFade = e.container.add(new Sys.Element({
            tag: "div",
            cls: "interface-settingsMenu_rightFade interface-settingsMenu_fade_uri"
        })), e.scrollerWrapper = e.container.add(new Sys.Element({
            tag: "div",
            cls: "interface-settingsMenu_scrollerWrapper"
        })), e.childElements = e.scrollerWrapper.add(new Sys.Element({
            tag: "ul",
            cls: e.CHILDREN_CSS
        })), e.scroller = new Scroller(e.scrollCallback.bind(e), {
            scrollingY: !1,
            speedMultiplier: 1.5 / Services.scaling.getScale()
        })
    },
    scrollCallback: function(e, t) {
        var i = this,
            n = i.useScrollOffset ? (i.menuWidth - i.childWidth) / 2 : 0;
        i.shouldScroll && (i.childElements.el.style[Sys.utils.getPrefixedCSSProperty("transform")] = "translate(" + Math.round(-e + n) + "px, " + -t + "px)", i.x = -e)
    },
    createChild: function(e) {
        var t = this,
            i = new Sys.Element({
                tag: "li",
                cls: t.CHILD_CSS
            });
        return i.add(new Sys.Element({
            tag: "div",
            cls: "interface-settingsMenu_child_image interface-settingsMenu_child_" + e + "_uri"
        })), i
    },
    onPortrait: function() {
        this.adaptToOrientation("PORTRAIT")
    },
    onLandscape: function() {
        this.adaptToOrientation("LANDSCAPE")
    },
    getChildIndex: function(e) {
        return Sys.isDefined(e) ? this.childElements.getChildren().indexOf(e.element.el) : -1
    },
    getChildFromElement: function(e) {
        var t, i = this.model.readData("children");
        return Sys.iterate(i, function(i, n) {
            if (n.element.el === e) return t = n, !1
        }), t
    },
    getNextClosestSibling: function(e) {
        var t, i = this.model.readData("children");
        return Sys.iterate(i, function(i, n) {
            n !== e && n.order > e.order && (!Sys.isDefined(t) || n.order < t.order) && (t = n)
        }), t
    },
    onBeforeLoaderFinished: function() {}
}, Interface.SettingsMenuBaseView = Sys.extend(Core.View, Interface.SettingsMenuBaseView, "Interface.SettingsMenuBaseView");
Sys.ns("Interface"), Interface.SettingsMenuMobileView = {
    PORTRAIT_CSS: "interface-settingsMenu_portrait_mobile",
    LANDSCAPE_CSS: "interface-settingsMenu_landscape_mobile",
    constructor: function() {
        Interface.SettingsMenuMobileView.superclass.constructor.apply(this, arguments)
    }
}, Interface.SettingsMenuMobileView = Sys.extend(Interface.SettingsMenuBaseView, Interface.SettingsMenuMobileView, "Interface.SettingsMenuMobileView");
Sys.ns("Interface"), Interface.DesktopSettingsMenu = {
    constructor: function() {
        Interface.DesktopSettingsMenu.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.DesktopSettingsMenuController,
            view: Interface.DesktopSettingsMenuView
        }
    }
}, Interface.DesktopSettingsMenu = Sys.extend(Core.Module, Interface.DesktopSettingsMenu, "Interface.DesktopSettingsMenu");
Sys.ns("Interface"), Interface.DesktopSettingsMenuController = {
    constructor: function() {
        Interface.DesktopSettingsMenuController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "request:desktopSettingsMenu.addChild": e.view.addChild.bind(e.view),
            "request:desktopSettingsMenu.removeChild": e.view.removeChild.bind(e.view)
        })
    }
}, Interface.DesktopSettingsMenuController = Sys.extend(Core.Controller, Interface.DesktopSettingsMenuController, "Interface.DesktopSettingsMenuController");
Sys.ns("Interface"), Interface.DesktopSettingsMenuView = {
    BASE_CSS: "interface-desktopSettingsMenu_base",
    CHILDREN_CSS: "interface-settingsMenu_children",
    CHILD_CSS: "interface-settingsMenu_child_desktop",
    RENDER_TARGET: "gameWrapper",
    constructor: function() {
        Interface.DesktopSettingsMenuView.superclass.constructor.apply(this, arguments)
    },
    init: function() {
        var e = this;
        Interface.DesktopSettingsMenuView.superclass.init.apply(e, arguments), e.childWidth = 0, e.setupDOMStructure(), e.children = {}
    },
    setupDOMStructure: function() {
        var e = this;
        e.container = new Sys.Element({
            tag: "div",
            cls: e.BASE_CSS,
            renderTo: e.RENDER_TARGET
        }), e.childElements = e.container.add(new Sys.Element({
            tag: "ul",
            cls: e.CHILDREN_CSS
        }))
    },
    addChild: function(e, t) {
        var n, i = this,
            s = i.createListItem(t.element);
        t.element = s, n = i.getNextClosestSibling(t), i.children[e] = t, Sys.isDefined(n) ? i.childElements.addBefore(s, n.element) : i.childElements.add(s)
    },
    createListItem: function(e) {
        var t = this,
            n = new Sys.Element({
                tag: "li",
                cls: t.CHILD_CSS
            });
        return n.add(e), n
    },
    getNextClosestSibling: function(e) {
        var t, n = this.children;
        return Sys.iterate(n, function(n, i) {
            i !== e && i.order > e.order && (!Sys.isDefined(t) || i.order < t.order) && (t = i)
        }), t
    },
    removeChild: function(e) {
        var t = this,
            n = t.children[e];
        Sys.isDefined(n) && t.childElements.remove(n.element)
    }
}, Interface.DesktopSettingsMenuView = Sys.extend(Core.View, Interface.DesktopSettingsMenuView, "Interface.DesktopSettingsMenuView");
Sys.ns("Interface"), Interface.SettingsButton = {
    constructor: function() {
        Interface.SettingsButton.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.SettingsButtonController,
            model: Interface.SettingsButtonModel,
            view: Interface.SettingsButtonBaseView
        }
    },
    getMixinDependencies: function() {
        return [{
            userInput: {
                listenToUserInput: !0
            }
        }, "orientation", "properties"]
    }
}, Interface.SettingsButton = Sys.extend(Core.Module, Interface.SettingsButton, "Interface.SettingsButton");
Sys.ns("Interface"), Interface.SettingsButtonController = {
    TOGGLE_DELAY: 500,
    constructor: function() {
        Interface.SettingsButtonController.superclass.constructor.apply(this, arguments), this.lastToggleOccured = 0
    },
    setupEvents: function() {
        this.on({
            "request:settingsButton.enable": this.enable,
            "request:settingsButton.disable": this.disable,
            "notify:stateHandler.enteringIdleState": this.enable.bind(this, "notInIdleState"),
            "notify:stateHandler.leavingIdleState": this.disable.bind(this, "notInIdleState"),
            "notify:settingsMenu.open": this.onSettingsMenuOpened,
            "notify:settingsMenu.closed": this.onSettingsMenuClosed
        })
    },
    enable: function(t) {
        this.model.removeProperty("disabledByOtherModule", t), this.model.hasProperty("disabledByOtherModule") || (this.view.enable(), this.model.storeData("disabled", !1))
    },
    disable: function(t) {
        this.model.hasProperty("disabledByOtherModule") || (this.view.disable(), this.model.storeData("disabled", !0), "open" === this.model.readData("status") && this.close()), this.model.addProperty("disabledByOtherModule", t)
    },
    open: function() {
        this.fireEvent("request:settingsMenu.open", !0), this.model.storeData("status", "open"), this.view.adaptToOrientation(Utils.Platform.getOrientation())
    },
    close: function() {
        this.fireEvent("request:settingsMenu.close"), this.model.storeData("status", "closed"), this.view.adaptToOrientation(Utils.Platform.getOrientation())
    },
    onSettingsMenuOpened: function() {
        this.model.storeData("status", "open"), this.view.adaptToOrientation(Utils.Platform.getOrientation())
    },
    onSettingsMenuClosed: function() {
        this.model.storeData("status", "closed"), this.view.adaptToOrientation(Utils.Platform.getOrientation())
    },
    onUserInputStart: function(t) {
        this.view.onUserInputStart(t)
    },
    onUserInputEnd: function(t) {
        var e = Date.now() - this.lastToggleOccured < this.TOGGLE_DELAY;
        this.model.readData("disabled") || e || !this.view.checkHit(t) || ("open" === this.model.readData("status") ? this.close() : this.open(), this.lastToggleOccured = Date.now())
    }
}, Interface.SettingsButtonController = Sys.extend(Core.Controller, Interface.SettingsButtonController, "Interface.SettingsButtonController");
Sys.ns("Interface"), Interface.SettingsButtonModel = {
    constructor: function() {
        Interface.SettingsButtonModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        this.storeData("status", "closed"), this.storeData("disabled", !0)
    }
}, Interface.SettingsButtonModel = Sys.extend(Core.Model, Interface.SettingsButtonModel, "Interface.SettingsButtonModel");
Sys.ns("Interface"), Interface.SettingsButtonBaseView = {
    BASE_BUTTON_CSS: "interface-settingsButton_baseButton",
    OPEN_URI: "interface-settingsButton_open_uri",
    CLOSED_URI: "interface-settingsButton_closed_uri",
    DISABLE_CSS: "interface-buttonDisable",
    PORTRAIT_CSS: "interface-settingsButton_portrait",
    LANDSCAPE_CSS: "interface-settingsButton_landscape",
    RENDER_TARGET: "gameWrapper",
    constructor: function() {
        Interface.SettingsButtonBaseView.superclass.constructor.apply(this, arguments)
    },
    adaptToOrientation: function(t) {
        this.setStyle(t)
    },
    enable: function() {
        this.container.removeCls(this.DISABLE_CSS)
    },
    disable: function() {
        this.container.addCls(this.DISABLE_CSS)
    },
    onUserInputStart: function(t) {
        this.wasInitialInputTarget = Sys.UserInputUtils.isCoordinateTarget(this.container.el, t)
    },
    checkHit: function(t) {
        var e = !1;
        return this.wasInitialInputTarget && (e = Sys.UserInputUtils.isCoordinateTarget(this.container.el, t)), this.wasInitialInputTarget = !1, e
    },
    init: function() {
        var t = this;
        Interface.SettingsWindowBaseView.superclass.init.apply(t, arguments), t.previousCSS = "", t.wasInitialInputTarget = !1, t.setupDOMStructure()
    },
    setStyle: function(t) {
        var e = this,
            n = e.model.readData("status").toUpperCase();
        Mixins.orientation.view.methods.setStyle.apply(e, arguments), "OPEN" === n ? e.container.replaceCSSClass(e.CLOSED_URI, e.OPEN_URI) : "CLOSED" === n && e.container.replaceCSSClass(e.OPEN_URI, e.CLOSED_URI)
    },
    setupDOMStructure: function() {
        var t = this;
        t.container = new Sys.Element({
            tag: "div",
            cls: t.BASE_BUTTON_CSS + " " + t.CLOSED_URI + " " + t.DISABLE_CSS,
            renderTo: t.RENDER_TARGET
        })
    }
}, Interface.SettingsButtonBaseView = Sys.extend(Core.View, Interface.SettingsButtonBaseView, "Interface.SettingsButtonBaseView");
Sys.ns("Interface"), Interface.SettingsButtonMobileView = {
    PORTRAIT_CSS: "interface-settingsButton_portrait_mobile",
    LANDSCAPE_CSS: "interface-settingsButton_landscape_mobile",
    BACKGROUND_CSS: "interface-settingsButton_background",
    constructor: function() {
        Interface.SettingsButtonMobileView.superclass.constructor.apply(this, arguments)
    },
    setStyle: function(t) {
        Interface.SettingsButtonMobileView.superclass.setStyle.apply(this, arguments), this.background.el.style.display = "PORTRAIT" === t ? "block" : "none"
    },
    setupDOMStructure: function() {
        var t = this;
        Interface.SettingsButtonMobileView.superclass.setupDOMStructure.apply(t, arguments), t.background = new Sys.Element({
            tag: "div",
            id: "settingsButtonBackground",
            class: t.BACKGROUND_CSS,
            renderTo: t.RENDER_TARGET
        })
    }
}, Interface.SettingsButtonMobileView = Sys.extend(Interface.SettingsButtonBaseView, Interface.SettingsButtonMobileView, "Interface.SettingsButtonMobileView");
Sys.ns("Interface"), Interface.BetSettings = {
    constructor: function() {
        Interface.BetSettings.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return {
            fallback: ["userInput"],
            desktop: ["userInput", "properties"]
        }
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.BetSettingsController,
            model: Interface.BetSettingsModel,
            view: Interface.BetSettingsBaseView
        }
    }
}, Interface.BetSettings = Sys.extend(Interface.SettingsSection, Interface.BetSettings, "Interface.BetSettings");
Sys.ns("Interface"), Interface.BetSettingsController = {
    constructor: function() {
        Interface.BetSettingsController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e;
        Interface.BetSettingsController.superclass.setupEvents.apply(this, arguments), this.on({
            "notify:moneyManager.betChanged": this.view.update.bind(this.view),
            "notify:settingsManager.settingChanged": this.onSettingChanged,
            "notify:stateHandler.enteringIdleState": this.enable.bind(this, "notInIdleState"),
            "notify:stateHandler.leavingIdleState": this.disable.bind(this, "notInIdleState"),
            "notify:gameModeChanged": this.onGameModeChanged,
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "notify:stateHandler.enteringspinTypeRespinRestoreState": this.disable.bind(this, "notInIdleState"),
            "request:betSettings.hideCashDisplay": this.view.hideCashDisplay.bind(this.view),
            "request:betSettings.showCashDisplay": this.view.showCashDisplay.bind(this.view),
            "request:enableBasicGamePanel": this.enable,
            "request:disableBasicGamePanel": this.disable,
            "request:betSettings.enable": this.enable,
            "request:betSettings.disable": this.disable,
            "notify:freeRounds.ended": this.onFreeRoundsEnded,
            "notify:freeRounds.reInitResponseReceived": this.onFreeRoundsReInit
        }), e = !this.model.readData("inFreerounds"), this.fireEvent("request:settingsManager.storeData", "betLevel", this.model.readData("betLevel"), e), this.fireEvent("request:settingsManager.storeData", "denomination", this.model.readData("denomination"), e)
    },
    initAnimations: function() {
        "function" == typeof this.view.initAnimations && this.view.initAnimations()
    },
    onFreeRoundsEnded: function() {
        this.model.setupData(), this.view.reInitSelectorBars(), this.view.showCashDisplay()
    },
    onFreeRoundsReInit: function() {
        this.model.setupData(), this.view.reInitSelectorBars()
    },
    onGameModeChanged: function(e) {
        var t = this;
        "BASIC" === e ? (t.view.showSelectors(), t.view.hideFreespinLabels()) : (t.view.hideSelectors(), t.view.showFreespinLabels())
    },
    onSettingChanged: function(e, t) {
        "betLevel" !== e && "denomination" !== e || this.model.storeData(e, t)
    },
    onUserAction: function(e, t) {
        var n, i = t;
        "betLevelChanged" === e ? n = "betLevel" : "coinValueChanged" === e && (n = "denomination", i = this.model.getDenomination(i)), Sys.isDefined(n) && this.fireEvent("request:settingsManager.storeData", n, i, !this.model.readData("inFreerounds"))
    },
    enable: function(e) {
        this.model.storeData("disabled", !1), this.view.enable(e)
    },
    disable: function(e) {
        this.model.storeData("disabled", !0), this.view.disable(e)
    }
}, Interface.BetSettingsController = Sys.extend(Interface.SettingsSectionController, Interface.BetSettingsController, "Interface.BetSettingsController");
Sys.ns("Interface"), Interface.BetSettingsModel = {
    constructor: function() {
        Interface.BetSettingsModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e, t, a, n, i, o = this,
            s = Services.localStorageManager.readData("ignoreInitialBet") || !1,
            r = Resources.readData("gameServerInitResponseObject"),
            l = r.betlevel.standard,
            u = r.denomination.standard,
            c = r.betlevel.all,
            g = r.denomination.all,
            d = [],
            f = !1;
        for (Interface.BetSettingsModel.superclass.setupData.apply(o, arguments), Sys.isArray(c) || (c = [c]), Sys.isArray(g) || (g = [g]), o.storeData("inFreerounds", Sys.utils.toInt(r.freeRoundsLeft) > 0), Sys.isArray(r.denomination.all) || (r.denomination.all = [r.denomination.all]), e = o.getCustomCoinValues(r.denomination.all), t = o.getInitialBetChanges(e, r.betlevel.all), !o.readData("inFreerounds") && e && t && (g = e, s || (f = !0, Services.localStorageManager.storeData("ignoreInitialBet", (!0).toString()))), n = 0; n < g.length; n++) d.push(o.getCoinValue(g[n]));
        Services.localStorageManager.hasData("betLevel") && (a = Number(Services.localStorageManager.readData("betLevel"))), Sys.isDefined(r.bet) && Sys.isDefined(r.bet.betlevel) ? l = r.bet.betlevel : f && t.defaultBetLevel ? l = t.defaultBetLevel : Sys.isNumber(a) && c.contains(a) && (l = a), Services.localStorageManager.hasData("denomination") && (a = Number(Services.localStorageManager.readData("denomination"))), Sys.isDefined(r.bet) && Sys.isDefined(r.bet.denomination) ? u = r.bet.denomination : f && t.defaultCoinValue ? u = t.defaultCoinValue : Sys.isNumber(a) && g.contains(a) && (u = a), i = [{
            key: "betLevels",
            defaultValue: c,
            settingsManager: !1,
            localStorage: !1
        }, {
            key: "updatableBetLevels",
            defaultValue: c.length > 1,
            settingsManager: !1,
            localStorage: !1
        }, {
            key: "coinValues",
            defaultValue: d,
            settingsManager: !1,
            localStorage: !1
        }, {
            key: "updatableCoinValues",
            defaultValue: d.length > 1,
            settingsManager: !1,
            localStorage: !1
        }, {
            key: "betLevel",
            defaultValue: l,
            settingsManager: !0,
            ignoreLocalStorageValue: !0,
            localStorage: !o.readData("inFreerounds"),
            silent: !1
        }, {
            key: "denomination",
            defaultValue: u,
            settingsManager: !0,
            ignoreLocalStorageValue: !0,
            localStorage: !o.readData("inFreerounds"),
            silent: !1
        }], i.forEach(o.initData, o)
    },
    getCustomCoinValues: function(e) {
        var t, a, n, i, o, s, r, l = this,
            u = Resources.readData("queryData"),
            c = [],
            g = null;
        if (Services.storage.storeData("betSettings.customCoinValues", null), t = Sys.isDefined(u["customConfiguration.coinValues"]) || Sys.isDefined(u["customConfiguration.coinValues.0"]), !Sys.isDefined(e) || !t) return null;
        if (a = u["customConfiguration.coinValues"], Sys.isDefined(u["customConfiguration.coinValues.0"]) && (s = Object.keys(u).filter(function(e) {
                return -1 !== e.indexOf("customConfiguration.coinValues")
            }), a = s.map(function(e) {
                return u[e]
            }).join()), i = l.decodeDataString(a), 0 === i.trim().length) return null;
        for (n = i.split(","), r = 0; r < n.length; r++) {
            if (o = parseInt(n[r], 10), -1 === e.indexOf(o)) return null;
            c.push(o)
        }
        return g = c.sort(function(e, t) {
            return e - t
        }), Services.storage.storeData("betSettings.customCoinValues", g), g
    },
    getInitialBetChanges: function(e, t) {
        var a = Resources.readData("queryData"),
            n = parseInt(a["customConfiguration.defaultBetLevel"], 10),
            i = parseInt(a["customConfiguration.defaultCoinValue"], 10);
        return Sys.isArray(e) && Sys.isArray(t) && -1 !== t.indexOf(n) && -1 !== e.indexOf(i) ? {
            defaultBetLevel: n,
            defaultCoinValue: i
        } : null
    },
    decodeDataString: function(e) {
        return e.match(/%/) ? decodeURIComponent(e) : e
    },
    storeData: function(e, t) {
        Interface.BetSettingsModel.superclass.storeData.call(this, e, t), "denomination" === e && Interface.BetSettingsModel.superclass.storeData.call(this, "coinValue", this.getCoinValue(t))
    },
    getDenomination: function(e) {
        return 100 * e
    },
    getCoinValue: function(e) {
        return e / 100
    }
}, Interface.BetSettingsModel = Sys.extend(Interface.SettingsSectionModel, Interface.BetSettingsModel, "Interface.BetSettingsModel");
Sys.ns("Interface"), Interface.BetSettingsBaseView = {
    BASE_CSS: "tab interface-betSettings_base",
    SECTION_CSS: "interface-settingsSection_subSection",
    PORTRAIT_CSS: "interface-betSettings_portrait",
    LANDSCAPE_CSS: "interface-betSettings_landscape",
    constructor: function() {
        Interface.BetSettingsBaseView.superclass.constructor.apply(this, arguments)
    },
    setUpContent: function() {
        var e = this,
            t = e.model;
        e.subComponents = [], e.container = new Sys.Element({
            id: "BetSettings",
            tag: "div",
            cls: e.BASE_CSS
        }), e.betDisplays = e.container.add(new Sys.Element({
            tag: "ul",
            class: "interface-betSettings_betDisplays"
        })), e.betInCashDisplay = e.betDisplays.add(new Sys.Element({
            tag: "li",
            class: "interface-betSettings_betDisplays_size interface-betSettings_displayText",
            textContent: Services.languageManager.getText(Language.Keys.betInCash)
        })), e.betInCashValue = e.betInCashDisplay.add(new Sys.Element({
            tag: "div",
            textContent: "0",
            class: "interface-betSettings_displayValue"
        })), e.betInCoinsDisplay = e.betDisplays.add(new Sys.Element({
            tag: "li",
            class: "interface-betSettings_betDisplays_size interface-betSettings_displayText",
            textContent: Services.languageManager.getText(Language.Keys.betInCoins)
        })), e.betInCoinsValue = e.betInCoinsDisplay.add(new Sys.Element({
            tag: "div",
            textContent: "0",
            class: "interface-betSettings_displayValue"
        })), e.settings = e.container.add(new Sys.Element({
            tag: "ul",
            class: "interface-settingsSection_dynamicSliderPosition_container"
        })), e.betLevelText = e.settings.add(new Sys.Element({
            tag: "li",
            class: "interface-settingsSection_dynamicSliderPosition_label",
            textContent: Services.languageManager.getText(Language.Keys.betLevel)
        })), t.readData("updatableBetLevels") || (e.betLevelText.el.style.opacity = .5), e.betLevelSlider = e.createBetLevelSlider(t.readData("betLevels")), e.betLevelSliderContainer = new Sys.Element({
            tag: "li",
            class: "interface-settingsSection_dynamicSliderPosition_slider"
        }), e.settings.add(e.betLevelSliderContainer).add(e.betLevelSlider.getContainer()), t.readData("updatableBetLevels") && e.subComponents.push(e.betLevelSlider), e.coinValueText = e.settings.add(new Sys.Element({
            tag: "li",
            class: "interface-settingsSection_dynamicSliderPosition_label",
            textContent: Services.languageManager.getText(Language.Keys.coinValue)
        })), t.readData("updatableCoinValues") || (e.coinValueText.el.style.opacity = .5), e.coinValueSlider = e.createCoinValueSlider(t.readData("coinValues")), e.coinValueSliderContainer = new Sys.Element({
            tag: "li",
            class: "interface-settingsSection_dynamicSliderPosition_slider"
        }), e.settings.add(e.coinValueSliderContainer).add(e.coinValueSlider.getContainer()), t.readData("updatableCoinValues") && e.subComponents.push(e.coinValueSlider), e.portraitInformation = e.container.add(new Sys.Element({
            tag: "ul",
            class: "interface-betSettings_portraitInfo"
        })), e.cashBalanceText = e.portraitInformation.add(new Sys.Element({
            tag: "li",
            class: "interface-betSettings_portraitInfo_label",
            textContent: Services.languageManager.getText(Language.Keys.cashColon)
        })), e.cashBalanceValue = e.portraitInformation.add(new Sys.Element({
            tag: "li",
            class: "interface-betSettings_portraitInfo_numbers"
        })), e.fireEvent("view:addToContainer", "settingsWindow", {
            title: Services.languageManager.getText(Language.Keys.betSettings_uc),
            content: e.container
        }), e.fireEvent("view:addToNavigator", "settingsMenu", {
            order: 3,
            isDefault: !0
        }), e.addScrolling(), e.model.readData("disabled") || e.enable(), e.update()
    },
    createBetLevelSlider: function(e) {
        var t = e;
        return this.model.readData("updatableBetLevels") || 1 !== t.length || (t = [e[0], ""]), new Interface.utils.Slider({
            id: "betSettingsBetLevelSlider",
            values: t,
            callback: this.onSliderValueChange.bind(this, "betLevelChanged"),
            showLabels: !0
        })
    },
    createCoinValueSlider: function(e) {
        var t = e;
        return this.model.readData("updatableCoinValues") || 1 !== t.length || (t = [e[0], ""]), new Interface.utils.Slider({
            id: "betSettingsCoinValueSlider",
            values: t,
            callback: this.onSliderValueChange.bind(this, "coinValueChanged"),
            showLabels: !0
        })
    },
    onSliderValueChange: function(e, t) {
        this.fireEvent("view:userAction", e, t)
    },
    enable: function() {
        var e = this;
        e.callFunctionOnSubComponents("enable"), e.cashBalanceValue.el.textContent = Services.moneyManager.formatMoneyCurrencySign(Services.moneyManager.getBalanceCents())
    },
    disable: function() {
        this.callFunctionOnSubComponents("disable")
    },
    show: function() {
        Interface.BetSettingsBaseView.superclass.show.apply(this, arguments), this.cashBalanceValue.el.textContent = Services.moneyManager.formatMoneyCurrencySign(Services.moneyManager.getBalanceCents())
    },
    hideCashDisplay: function() {
        this.portraitInformation.el.style.display = "none"
    },
    showCashDisplay: function() {
        this.portraitInformation.el.style.display = "block"
    },
    update: function() {
        var e = this,
            t = e.model,
            a = Services.moneyManager;
        t.readData("updatableBetLevels") && e.betLevelSlider.setValue(e.model.readData("betLevel"), !0), t.readData("updatableCoinValues") && e.coinValueSlider.setValue(e.model.readData("coinValue"), !0), e.betInCashValue.el.textContent = a.formatMoneyCurrencySign(a.getBetCents()), e.betInCoinsValue.el.textContent = a.getBetCoins(), e.cashBalanceValue.el.textContent = a.formatMoneyCurrencySign(a.getBalanceCents())
    },
    hideSelectors: function() {},
    showSelectors: function() {},
    showFreespinLabels: function() {},
    hideFreespinLabels: function() {},
    removeSelectorFromContainer: function(e, t) {
        t.remove(e.getContainer())
    },
    addSelectorToContainer: function(e, t) {
        t.add(e.getContainer())
    },
    reInitSelectorBars: function() {
        var e = this.model.readData("betLevels"),
            t = this.model.readData("coinValues");
        this.removeSelectorFromContainer(this.betLevelSlider, this.betLevelSliderContainer), this.removeSelectorFromContainer(this.coinValueSlider, this.coinValueSliderContainer), this.betLevelSlider = this.createBetLevelSlider(e), this.coinValueSlider = this.createCoinValueSlider(t), this.model.readData("updatableBetLevels") && (this.betLevelText.el.style.opacity = 1, Sys.contains(this.subComponents, this.betLevelSlider) || this.subComponents.push(this.betLevelSlider)), this.model.readData("updatableCoinValues") && (this.coinValueText.el.style.opacity = 1, Sys.contains(this.subComponents, this.coinValueSlider) || this.subComponents.push(this.coinValueSlider)), this.addSelectorToContainer(this.betLevelSlider, this.betLevelSliderContainer), this.addSelectorToContainer(this.coinValueSlider, this.coinValueSliderContainer), this.update(), this.model.readData("disabled") || this.enable()
    }
}, Interface.BetSettingsBaseView = Sys.extend(Interface.SettingsSectionView, Interface.BetSettingsBaseView, "Interface.BetSettingsBaseView");
Sys.ns("Interface"), Interface.BetSettingsDesktopView = {
    GAME_MODES: ["BASIC", "FREESPIN"],
    BASIC_BETLEVEL_LABEL: {
        font: "17px Verdana",
        fillstyle: "rgb(218,218,171)"
    },
    BASIC_BETLEVEL_VALUE: {
        font: "17px Verdana",
        fillstyle: "rgb(238,239,206)"
    },
    BASIC_COINVALUE_LABEL: {
        font: "17px Verdana",
        fillstyle: "rgb(218,218,171)"
    },
    BASIC_COINVALUE_VALUE: {
        font: "17px Verdana",
        fillstyle: "rgb(238,239,206)"
    },
    FREESPIN_BETLEVEL_LABEL: {
        font: "17px Verdana",
        fillstyle: "rgb(218,218,171)",
        position: {
            x: 210,
            y: 641,
            width: 100,
            height: 20
        },
        alignment: {
            horizontal: "right",
            vertical: !1
        }
    },
    FREESPIN_BETLEVEL_VALUE: {
        font: "17px Verdana",
        fillstyle: "rgb(238,239,206)",
        position: {
            x: 315,
            y: 641,
            width: 267,
            height: 20
        },
        alignment: {
            horizontal: "left",
            vertical: !1
        }
    },
    FREESPIN_COINVALUE_LABEL: {
        font: "17px Verdana",
        fillstyle: "rgb(218,218,171)",
        position: {
            x: 877,
            y: 641,
            width: 100,
            height: 20
        },
        alignment: {
            horizontal: "right",
            vertical: !1
        }
    },
    FREESPIN_COINVALUE_VALUE: {
        font: "17px Verdana",
        fillstyle: "rgb(238,239,206)",
        position: {
            x: 982,
            y: 641,
            width: 267,
            height: 20
        },
        alignment: {
            horizontal: "left",
            vertical: !1
        }
    },
    BETLEVEL_VALUE_SELECTOR_BASE_POSITION: {
        x: 264,
        y: 629
    },
    COINVALUE_VALUE_SELECTOR_BASE_POSITION: {
        x: 889,
        y: 629
    },
    VALUE_SELECTOR_POSITION_OFFSET_LABEL: {
        x: 0,
        y: -18
    },
    VALUE_SELECTOR_POSITION_OFFSET_VALUE: {
        x: 0,
        y: 9
    },
    VALUE_SELECTOR_RIGHT_BUTTON_IMAGE: void 0,
    VALUE_SELECTOR_LEFT_BUTTON_IMAGE: void 0,
    VALUE_SELECTOR_HANDLE_POSITION_OFFSET: void 0,
    VALUE_SELECTOR_HANDLE_DIMENSIONS: void 0,
    VALUE_SELECTOR_HANDLE_COLLISION_BOX: {
        LEFT: {
            xOffset: 7,
            yOffset: 7,
            width: 28,
            height: 37
        },
        RIGHT: {
            xOffset: 9,
            yOffset: 7,
            width: 28,
            height: 37
        }
    },
    VALUE_SELECTOR_BAR_BACKGROUND: void 0,
    VALUE_SELECTOR_BAR_BACKGROUND_DISABLED: void 0,
    VALUE_SELECTOR_BAR_FILL: void 0,
    VALUE_SELECTOR_BAR_FILL_DISABLED: void 0,
    VALUE_SELECTOR_BAR_DIMENSIONS: void 0,
    VALUE_SELECTOR_BAR_POSITIONS_OFFSET: void 0,
    constructor: function() {
        Interface.BetSettingsDesktopView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var e = this;
        e.betLevelLabel = Services.languageManager.getText(Language.Keys.level), e.coinValueLabel = Services.languageManager.getText(Language.Keys.machinetext_coinvalue), e.keyPadLayering = Layering.Game.Slots.Keypad, e.itemList = new Animation.List({}), e.enabled = !0, e.initSelectors(), e.initFreespinItems(), e.update()
    },
    updateValueItem: function(e, t, a) {
        var i, l = e.prop,
            E = l.customProps.inMemCanvas.ctx;
        E.clearRect(0, 0, l.width, l.height), i = Animation.utils.text.measureText(t, a.font, 0, E), Animation.utils.text.performOperations(t, a.font, 0, i.height / 2, [{
            fillStyle: a.fillstyle,
            drawType: "fill"
        }], E)
    },
    initSelectors: function() {
        var e, t = this,
            a = t.keyPadLayering;
        e = t.model.readData("coinValues").map(function(e) {
            return Sys.utils.numberToFixedDigits(e, 3)
        }), t.selectors = {
            betLevelSelector: new Interface.utils.CanvasValueSelector({
                id: "betLevelSelector",
                x: t.BETLEVEL_VALUE_SELECTOR_BASE_POSITION.x,
                y: t.BETLEVEL_VALUE_SELECTOR_BASE_POSITION.y,
                depth: a.betLevelSelector,
                values: t.model.readData("betLevels"),
                callback: t.onValueChange.bind(t, "betLevelChanged"),
                disabled: !t.model.readData("updatableBetLevels"),
                label: Services.languageManager.getText(Language.Keys.level),
                fontLabel: t.BASIC_BETLEVEL_LABEL.font,
                fontValue: t.BASIC_BETLEVEL_VALUE.font,
                fillstyleLabel: t.BASIC_BETLEVEL_LABEL.fillstyle,
                fillstyleValue: t.BASIC_BETLEVEL_VALUE.fillstyle,
                positionOffsetLabel: t.VALUE_SELECTOR_POSITION_OFFSET_LABEL,
                positionOffsetValue: t.VALUE_SELECTOR_POSITION_OFFSET_VALUE,
                rightButtonImage: t.VALUE_SELECTOR_RIGHT_BUTTON_IMAGE,
                leftButtonImage: t.VALUE_SELECTOR_LEFT_BUTTON_IMAGE,
                handlePositionOffset: t.VALUE_SELECTOR_HANDLE_POSITION_OFFSET,
                handleDimensions: t.VALUE_SELECTOR_HANDLE_DIMENSIONS,
                handleCollisionBox: t.VALUE_SELECTOR_HANDLE_COLLISION_BOX,
                barBackground: t.VALUE_SELECTOR_BAR_BACKGROUND,
                barBackgroundDisabled: t.VALUE_SELECTOR_BAR_BACKGROUND_DISABLED,
                barFill: t.VALUE_SELECTOR_BAR_FILL,
                barFillDisabled: t.VALUE_SELECTOR_BAR_FILL_DISABLED,
                barDimensions: t.VALUE_SELECTOR_BAR_DIMENSIONS,
                barPositionOffset: t.VALUE_SELECTOR_BAR_POSITIONS_OFFSET
            }),
            coinValueSelector: new Interface.utils.CanvasValueSelector({
                id: "coinValueSelector",
                x: t.COINVALUE_VALUE_SELECTOR_BASE_POSITION.x,
                y: t.COINVALUE_VALUE_SELECTOR_BASE_POSITION.y,
                depth: a.betLevelSelector,
                values: t.model.readData("coinValues"),
                valueNames: e,
                callback: t.onValueChange.bind(t, "coinValueChanged"),
                disabled: !t.model.readData("updatableCoinValues"),
                label: Services.languageManager.getText(Language.Keys.machinetext_coinvalue),
                fontLabel: t.BASIC_COINVALUE_LABEL.font,
                fontValue: t.BASIC_COINVALUE_VALUE.font,
                fillstyleLabel: t.BASIC_COINVALUE_LABEL.fillstyle,
                fillstyleValue: t.BASIC_COINVALUE_VALUE.fillstyle,
                positionOffsetLabel: t.VALUE_SELECTOR_POSITION_OFFSET_LABEL,
                positionOffsetValue: t.VALUE_SELECTOR_POSITION_OFFSET_VALUE,
                rightButtonImage: t.VALUE_SELECTOR_RIGHT_BUTTON_IMAGE,
                leftButtonImage: t.VALUE_SELECTOR_LEFT_BUTTON_IMAGE,
                handlePositionOffset: t.VALUE_SELECTOR_HANDLE_POSITION_OFFSET,
                handleDimensions: t.VALUE_SELECTOR_HANDLE_DIMENSIONS,
                handleCollisionBox: t.VALUE_SELECTOR_HANDLE_COLLISION_BOX,
                barBackground: t.VALUE_SELECTOR_BAR_BACKGROUND,
                barBackgroundDisabled: t.VALUE_SELECTOR_BAR_BACKGROUND_DISABLED,
                barFill: t.VALUE_SELECTOR_BAR_FILL,
                barFillDisabled: t.VALUE_SELECTOR_BAR_FILL_DISABLED,
                barDimensions: t.VALUE_SELECTOR_BAR_DIMENSIONS,
                barPositionOffset: t.VALUE_SELECTOR_BAR_POSITIONS_OFFSET
            })
        }
    },
    reInitSelectorBars: function() {
        Sys.iterate(this.selectors, function(e, t) {
            t.destroy()
        }), this.initSelectors(), this.update()
    },
    initFreespinItems: function() {
        var e = this;
        e.betLevelLabelItem = e.initTextItem(e.betLevelLabel, e.FREESPIN_BETLEVEL_LABEL, e.keyPadLayering.betLevelSelector), e.betLevelValueItem = e.initTextItem(e.model.readData("betLevel"), e.FREESPIN_BETLEVEL_VALUE, e.keyPadLayering.betLevelSelector), e.coinValueLabelItem = e.initTextItem(e.coinValueLabel, e.FREESPIN_COINVALUE_LABEL, e.keyPadLayering.betLevelSelector), e.coinValueValueItem = e.initTextItem(e.model.readData("coinValue"), e.FREESPIN_COINVALUE_VALUE, e.keyPadLayering.betLevelSelector), e.itemList.addItems([e.betLevelLabelItem, e.betLevelValueItem, e.coinValueLabelItem, e.coinValueValueItem]), Game.stage.view.addToRenderLoop(e.itemList), e.itemList.stop()
    },
    initTextItem: function(e, t, a) {
        var i, l = this,
            E = t.position,
            n = l.getInMemoryCanvas(E.width, E.height),
            L = "right" === t.alignment.horizontal ? t.position.width : 0;
        return Sys.isDefined(t.alignment) && (n.ctx.textAlign = t.alignment.horizontal), i = Animation.utils.text.measureText(e, t.font, 0, n.ctx), Animation.utils.text.performOperations(e, t.font, L, i.height / 2, [{
            fillStyle: t.fillstyle,
            drawType: "fill"
        }], n.ctx), new Animation.Item({
            top: E.y,
            left: E.x,
            width: E.width,
            height: E.height,
            depth: a,
            image: n.canvas,
            customProps: {
                inMemCanvas: n
            }
        })
    },
    getInMemoryCanvas: function(e, t) {
        var a = document.createElement("canvas"),
            i = a.getContext("2d");
        return a.width = e, a.height = t, {
            canvas: a,
            ctx: i
        }
    },
    onValueChange: function(e, t) {
        this.fireEvent("view:userAction", e, t)
    },
    setUpContent: function() {},
    onSliderValueChange: function(e, t) {},
    enable: function(e) {
        var t = this,
            a = t.model.readData("updatableBetLevels"),
            i = t.model.readData("updatableCoinValues");
        t.enabled = !0, Sys.iterate(t.selectors, function(l) {
            ("betLevelSelector" === l && a || "coinValueSelector" === l && i) && t.selectors[l].enable(e)
        }), t.update()
    },
    disable: function(e) {
        var t = this,
            a = t.model.readData("updatableBetLevels"),
            i = t.model.readData("updatableCoinValues");
        t.enabled = !1, Sys.iterate(t.selectors, function(l) {
            ("betLevelSelector" === l && a || "coinValueSelector" === l && i) && t.selectors[l].disable(e)
        })
    },
    hideSelectors: function() {
        this.disable("BetSettings"), Sys.iterate(this.selectors, function(e, t) {
            t.hide("BetSettings")
        })
    },
    showSelectors: function() {
        this.enable("BetSettings"), Sys.iterate(this.selectors, function(e, t) {
            t.show("BetSettings")
        })
    },
    showFreespinLabels: function() {
        this.itemList.play()
    },
    hideFreespinLabels: function() {
        this.itemList.stop()
    },
    update: function() {
        var e = this,
            t = e.model;
        Sys.isDefined(e.selectors) && this.enabled && (t.readData("updatableBetLevels") && (e.selectors.betLevelSelector.update(e.model.readData("betLevel")), e.updateValueItem(e.betLevelValueItem, e.model.readData("betLevel"), e.FREESPIN_BETLEVEL_VALUE)), t.readData("updatableCoinValues") && (e.selectors.coinValueSelector.update(e.model.readData("coinValue")), e.updateValueItem(e.coinValueValueItem, e.model.readData("coinValue"), e.FREESPIN_COINVALUE_VALUE))), Sys.isDefined(e.coinValueValueItem && e.betLevelValueItem) && (t.readData("updatableBetLevels") && e.updateValueItem(e.betLevelValueItem, e.model.readData("betLevel"), e.FREESPIN_BETLEVEL_VALUE), t.readData("updatableCoinValues") && e.updateValueItem(e.coinValueValueItem, e.model.readData("coinValue"), e.FREESPIN_COINVALUE_VALUE))
    },
    hideCashDisplay: function() {},
    showCashDisplay: function() {}
}, Interface.BetSettingsDesktopView = Sys.extend(Interface.BetSettingsBaseView, Interface.BetSettingsDesktopView, "Interface.BetSettingsDesktopView");
Sys.ns("Interface"), Interface.GameHistory = {
    constructor: function() {
        Interface.GameHistory.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.GameHistoryController,
            model: Interface.GameHistoryModel,
            view: Interface.GameHistoryBaseView
        }
    }
}, Interface.GameHistory = Sys.extend(Interface.SettingsSection, Interface.GameHistory, "Interface.GameHistory");
Sys.ns("Interface"), Interface.GameHistoryController = {
    constructor: function() {
        Interface.GameHistoryController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        Interface.GameSettingsController.superclass.setupEvents.apply(e, arguments), e.on({
            "request:gameHistory.open": e.openGameHistory,
            "view:gameHistory.open": e.openGameHistory
        })
    },
    onUserAction: function(e) {
        "goToHistory" === e && this.openGameHistory()
    },
    openGameHistory: function() {
        var e = Sys.utils.sanitizeURL(Resources.readData("historyUrl"));
        Platform.isDesktopDevice ? this.openWindow(e) : this.openLocation(e)
    },
    openLocation: function(e) {
        window.location.href = e
    },
    openWindow: function(e) {
        window.open(e, "gameHistory").focus()
    }
}, Interface.GameHistoryController = Sys.extend(Interface.SettingsSectionController, Interface.GameHistoryController, "Interface.GameHistoryController");
Sys.ns("Interface"), Interface.GameHistoryModel = {
    constructor: function() {
        Interface.GameHistoryModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = Resources.readData("gameServerInitResponse") || {};
        e.playforfun ? this.storeData("disabled", !0) : Sys.isDefined(e.historybutton) && !e.historybutton && this.storeData("removed", !0)
    }
}, Interface.GameHistoryModel = Sys.extend(Core.Model, Interface.GameHistoryModel, "Interface.GameHistoryModel");
Sys.ns("Interface"), Interface.GameHistoryBaseView = {
    BASE_CSS: "tab interface-gameHistory_base",
    PORTRAIT_CSS: "interface-gameHistory_portrait",
    LANDSCAPE_CSS: "interface-gameHistory_landscape",
    BUTTON_BASE_CSS: "button interface-gameHistory_button",
    BUTTON_DISABLED_CSS: "interface-gameHistory_buttonDisabled",
    BUTTON_PRESSED_CSS: "interface-gameHistory_buttonPressed",
    constructor: function() {
        Interface.GameHistoryBaseView.superclass.constructor.apply(this, arguments)
    },
    setUpContent: function() {
        var e = this;
        e.container = new Sys.Element({
            id: "gameHistory",
            tag: "div",
            cls: e.BASE_CSS
        }), e.text = e.container.add(new Sys.Element({
            id: "gameHistoryDisabledText",
            tag: "div",
            style: "margin-top: 10%;"
        })), e.text.el.textContent = Services.languageManager.getText(Language.Keys.newHistoryWindow), e.button = new Interface.utils.Button({
            id: "gameHistoryButton",
            CSS: {
                base: e.BUTTON_BASE_CSS,
                disabled: e.BUTTON_DISABLED_CSS
            }
        }), e.container.add(e.button.getContainer()), e.button.setText(Services.languageManager.getText(Language.Keys.gameHistory)), e.model.readData("disabled") && e.disable(), e.fireEvent("view:addToContainer", "settingsWindow", {
            title: Services.languageManager.getText(Language.Keys.gameHistory_uc),
            content: e.container
        }), e.model.readData("removed") || e.fireEvent("view:addToNavigator", "settingsMenu", {
            order: 5
        }), e.addScrolling(), e.model.readData("disabled") || e.enable(), e.hide()
    },
    enable: function() {
        this.text.el.textContent = Services.languageManager.getText(Language.Keys.newHistoryWindow), this.button.enable()
    },
    disable: function() {
        this.text.el.textContent = Services.languageManager.getText(Language.Keys.historyNotAvailable), this.button.disable()
    },
    onUserInputStart: function(e) {
        var t = this;
        !t.model.readData("disabled") && Sys.UserInputUtils.isCoordinateTarget(t.button.getContainer().getEl(), e) && (t.model.storeData("buttonPressed", !0), t.container.addCls(t.PRESSED_CSS))
    },
    onUserInputEnd: function(e) {
        var t = this,
            a = this.model.readData("buttonPressed");
        t.model.storeData("buttonPressed", !1), t.container.removeCls(this.PRESSED_CSS), a && Sys.UserInputUtils.isCoordinateTarget(t.button.getContainer().getEl(), e) && t.fireEvent("view:gameHistory.open")
    }
}, Interface.GameHistoryBaseView = Sys.extend(Interface.SettingsSectionView, Interface.GameHistoryBaseView, "Interface.GameHistoryBaseView");
Sys.ns("Interface"), Interface.GameRules = {
    constructor: function() {
        Interface.GameRules.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return [{
            userInput: {
                inputEvents: ["start", "end", "cancel", "move", "scroll"]
            }
        }, "orientation"]
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.GameRulesController,
            model: Interface.GameRulesModel,
            view: Interface.GameRulesBaseView
        }
    }
}, Interface.GameRules = Sys.extend(Interface.SettingsSection, Interface.GameRules, "Interface.GameRules");
Sys.ns("Interface"), Interface.GameRulesController = {
    constructor: function() {
        Interface.GameRulesController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e, t = this,
            s = t.model.readData("gameRulesURL");
        Interface.GameRulesController.superclass.setupEvents.apply(t, arguments), t.on({
            "notify:stateHandler.enteringspinTypeRespinRestoreState": t.view.disableButton.bind(t.view),
            "view:gameRules.open": t.openGameRulesURL,
            "notify:freeRounds.started": this.onFreeRoundsStarted,
            "notify:freeRounds.ended": this.onFreeRoundsEnded
        }), e = void 0 !== s && "" === s, (Sys.isGcmEnabled || e) && t.removeListener("view:addToNavigator")
    },
    show: function() {
        var e = this;
        e.model.readData("hasLoadedGameRules") || e.model.isState("fetchingGameRules") || "undefined" != typeof gameRulesURL || (e.model.setState("fetchingGameRules"), e.fetchGameRules()), Interface.GameRulesController.superclass.show.apply(e, arguments)
    },
    fetchGameRules: function() {
        var e = this;
        (new Sys.Deferred).when(Sys.utils.httpGet({
            url: e.model.readData("templateURL")
        }), Sys.utils.httpGet({
            url: e.model.readData("textURL")
        }), Sys.utils.httpGet({
            url: e.model.readData("manifestURL")
        })).fail(e.onRulesLoadingFailed, e).done(e.onRulesPartsFetched, e)
    },
    onRulesPartsFetched: function(e, t, s) {
        this.model.processGameRules(e, t, s), this.view.updateContent()
    },
    onRulesLoadingFailed: function() {
        console.error("Error while loading game rules")
    },
    openGameRulesURL: function() {
        var e = this.model.readData("gameRulesURL");
        Platform.isMobileDevice || Platform.isTabletDevice ? window.location.href = e : Platform.isDesktopDevice && window.open(e, "gameRules").focus()
    },
    onFreeRoundsStarted: function() {
        this.model.setupData()
    },
    onFreeRoundsEnded: function() {
        this.model.setupData()
    }
}, Interface.GameRulesController = Sys.extend(Interface.SettingsSectionController, Interface.GameRulesController, "Interface.GameRulesController");
Sys.ns("Interface"), Interface.GameRulesModel = {
    constructor: function() {
        Interface.GameRulesModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e, t, n, a = this,
            r = Resources.readData("config"),
            s = r.gameRules,
            i = r.gameRulesPath,
            o = Resources.readData("language"),
            l = Resources.readData("queryData"),
            c = l.gameId,
            m = l.jurisdictionCode,
            u = l.showRtp,
            f = ["CH"],
            d = !1;
        c = c.replace(/_sw$/, ""), Sys.isDefined(s) && (c = Platform.isDesktopDevice ? c.indexOf("netent_") > -1 ? "netent_" + s.desktop : s.desktop : c.indexOf("netent_") > -1 ? "netent_" + s.touch : s.touch), Interface.GameRulesModel.superclass.setupData.apply(this, arguments), n = "../META-INF/MANIFEST.MF", i ? (t = "../" + i + "META-INF/MANIFEST.MF", e = "../" + i + "templates/" + c + "." + o.lang + ".html", !1 === u && (e = "../" + i + "templates/" + c + ".nortp." + o.lang + ".html")) : (e = "../gamerules/template/" + c + ".template", t = "../gamerules/META-INF/MANIFEST.MF", a.storeData("textURL", "../gamerules/rules/" + o.lang + "/rulestext.xml")), a.storeData("templateURL", e), a.storeData("manifestURL", t), a.storeData("gameClientManifestURL", n), a.storeData("hasLoadedGameRules", !1), l.hasOwnProperty("gameRulesURL") && "undefined" !== l.gameRulesURL && a.storeData("gameRulesURL", l.gameRulesURL), d = void 0 !== m && f.some(function(e) {
            return e === m
        }), a.storeData("isGameRulesGenericInformationEnabled", d)
    },
    processGameRules: function(e, t, n) {
        var a, r, s = (Resources.readData("config") || {}).gameRulesPath;
        s ? r = this.alterImagePaths(e.responseText) : (a = this.parseTextsToObject(t.responseText), r = this.insertTextsInTemplate(e.responseText, a), r = this.removeNoncharacters(r), r = this.addTimestamp(r, n)), r = this.removeLinkTags(r), this.storeData("content", r), this.storeData("hasLoadedGameRules", !0), this.setState("idle")
    },
    fetchManifestData: function(e) {
        return Sys.utils.httpGet({
            url: e
        })
    },
    aggregateGenericInformation: function() {
        var e, t, n, a, r, s, i = this,
            o = Resources.readData("gameServerInitResponseObject"),
            l = new Sys.Deferred,
            c = i.readData("gameClientManifestURL");
        return t = i.calculateMinAndMaxBetCents(o), r = i.getGameServerVersion(o), n = Services.moneyManager.formatMoneyCurrencySign(t.minBet), a = Services.moneyManager.formatMoneyCurrencySign(t.maxBet), s = {
            minBet: n,
            maxBet: a,
            gameClientVersion: null,
            gameServerVersion: r
        }, e = i.fetchManifestData(c), e.done(function(e) {
            var t = e.responseText;
            s.gameClientVersion = i.getGameClientVersion(t), l.resolveWith([s])
        }, this).fail(function() {
            console.error("Failed to fetch manifest file"), l.resolveWith([s])
        }), l
    },
    isGenericInformationEnabled: function() {
        return this.readData("isGameRulesGenericInformationEnabled")
    },
    enableGenericInformation: function() {
        this.storeData("isGameRulesGenericInformationEnabled", !0)
    },
    disableGenericInformation: function() {
        this.storeData("isGameRulesGenericInformationEnabled", !1)
    },
    calculateMinAndMaxBetCents: function(e) {
        var t, n, a, r, s, i, o, l, c = Services.storage.readData("betSettings.customCoinValues");
        return t = null !== c, o = e.betlevel.all, n = "number" == typeof o ? o : o.slice(), a = Services.moneyManager.model.readData("betlineCoins"), l = e.denomination.all, r = "number" == typeof l ? t ? c : [l * a] : t ? c : l.map(function(e) {
            return e * a
        }), "number" == typeof o ? (s = n * r.slice().shift(), i = n * r.slice().pop()) : (s = n.slice().shift() * r.slice().shift(), i = n.slice().pop() * r.slice().pop()), {
            minBet: s,
            maxBet: i
        }
    },
    getGameClientVersion: function(e) {
        var t, n = "Implementation-Version:";
        return t = new RegExp(n + "\\s*\\d*\\.\\d*\\.\\d*\\-?\\d*"), (e.match(t) || [n])[0].split(n)[1].trim()
    },
    getGameServerVersion: function(e) {
        return e.gameServerVersion || null
    },
    alterImagePaths: function(e) {
        return e.replace(/src="..\/([\w\/.-]*)"/g, "src='../gamerules/$1'")
    },
    parseTextsToObject: function(e) {
        var t = {},
            n = /<ds.+name="([\w\d-]+)"[^>]*>(.+)<\/ds>/g,
            a = document.createElement("div");
        return e.replace(n, function(e, n, r) {
            a.innerHTML = r, t[n] = a.textContent
        }), t
    },
    insertTextsInTemplate: function(e, t) {
        return e.replace(/<#([\w\d-]+)#\/>/g, function(e, n) {
            return t[n] ? t[n] : Services.languageManager.hasText(n) ? Services.languageManager.getText(n) : "[rules string '" + n + "' not found]"
        })
    },
    removeLinkTags: function(e) {
        return e.replace(/<link.+>/g, "")
    },
    addTimestamp: function(e, t) {
        return e + "<p id='manifest_timestamp' style='margin-top:10px;'>" + this.parseDateFromManifest(t) + "</p>"
    },
    removeNoncharacters: function(e) {
        return decodeURIComponent(encodeURIComponent(e).replace(/%EF%BF%BF/g, ""))
    },
    parseDateFromManifest: function(e) {
        var t, n = this.checkIfRegExpMatch(e.response);
        return e.responseText.replace(n, function(e, n, a) {
            t = n + " " + a + " (UTC)"
        }), t
    },
    checkIfRegExpMatch: function(e) {
        var t, n;
        return t = /Git-CommitTime:\s([\d\-]+)[T\s]([\d:]+)/, n = /Subversion-(?:Commited)?Date: ([\d\-]+)T([\d:]+)/, t.test(e) ? t : n
    }
}, Interface.GameRulesModel = Sys.extend(Core.Model, Interface.GameRulesModel, "Interface.GameRulesModel");
Sys.ns("Interface"), Interface.GameRulesBaseView = {
    BASE_CSS: "tab interface-gameRules_base",
    PORTRAIT_CSS: "interface-gameRules_portrait",
    LANDSCAPE_CSS: "interface-gameRules_landscape",
    RULES_WRAPPER_CSS: "interface-gameRules_rulesWrapper",
    LOADER_CSS: "interface-gameRules_rulesLoader",
    LOADER_URI: "interface-smallSpinner_uri",
    BUTTON_BASE_CSS: "button interface-gameRules_button",
    RULES_URL_WRAPPER_CSS: "interface-gameRules_rulesURLWrapper",
    constructor: function() {
        Interface.GameRulesBaseView.superclass.constructor.apply(this, arguments)
    },
    setUpContent: function() {
        var e = this,
            a = e.model.readData("gameRulesURL");
        e.container = new Sys.Element({
            id: "gameRules",
            tag: "div",
            cls: e.BASE_CSS
        }), void 0 !== a && "" === a || (void 0 !== a && "" !== a ? e.setUpGameRulesURL() : (e.rulesWrapper = e.container.add(new Sys.Element({
            id: "gameRules_rules",
            tag: "div",
            cls: e.RULES_WRAPPER_CSS
        })), e.rulesLoader = new Sys.Element({
            tag: "div",
            cls: e.LOADER_CSS + " " + e.LOADER_URI
        })), e.fireEvent("view:addToContainer", "settingsWindow", {
            title: Services.languageManager.getText(Language.Keys.gameRules_uc),
            content: e.container
        }), e.fireEvent("view:addToNavigator", "settingsMenu", {
            order: 4
        }), e.addScrolling(), e.model.readData("disabled") || e.enable(), e.hide())
    },
    setUpGameRulesURL: function() {
        var e = this;
        e.rulesWrapper = e.container.add(new Sys.Element({
            id: "gameRules_rulesURLWrapper",
            tag: "div",
            cls: e.RULES_URL_WRAPPER_CSS
        })), e.button = new Interface.utils.Button({
            id: "gameRulesButton",
            CSS: {
                base: e.BUTTON_BASE_CSS
            },
            label: Services.languageManager.getText(Language.Keys.gameRules_uc),
            enabled: !0,
            clickCallback: function() {
                e.fireEvent("view:gameRules.open")
            }
        }), e.rulesWrapper.add(e.button.getContainer()), e.container.add(e.rulesWrapper)
    },
    updateContent: function() {
        var e = this;
        e.rulesWrapper.remove(e.rulesLoader), e.rulesWrapper.el.innerHTML = e.model.readData("content"), e.model.isGenericInformationEnabled() && e.model.aggregateGenericInformation().then(function(a) {
            var t = e.createGenericContent(a);
            e.rulesWrapper.el.appendChild(t), e.updateScrollerDimensions()
        }), e.updateScrollerDimensions()
    },
    createGenericContent: function(e) {
        var a, t, n, r, s, i = document.createElement("div");
        return Object.keys(e).forEach(function(l) {
            null !== e[l] && (a = document.createElement("p"), t = document.createElement("span"), n = document.createElement("span"), r = Services.languageManager.getText(Language.Keys[l]), s = e[l], t.innerText = r + " ", n.innerText = s, i.setAttribute("id", "generic_content"), a.appendChild(t), a.appendChild(n), i.appendChild(a))
        }), i
    },
    show: function() {
        var e = this.model.readData("gameRulesURL");
        Interface.GameRulesBaseView.superclass.show.apply(this, arguments), this.model.isState("fetchingGameRules") && void 0 === e && this.rulesWrapper.add(this.rulesLoader)
    },
    enable: function() {},
    disable: function() {},
    disableButton: function() {
        Sys.isDefined(this.abstractButton) && this.abstractButton.disable("notInIdleState")
    }
}, Interface.GameRulesBaseView = Sys.extend(Interface.SettingsSectionView, Interface.GameRulesBaseView, "Interface.GameRulesBaseView");
Sys.ns("Interface"), Interface.GameRulesDesktopView = {
    BUTTON_CSS: "interface-desktopSettingsMenu_button interface-gameRules_icon_uri",
    WRAPPER_CSS: "tab interface-settingsWindow_content",
    ENABLED_ONLY_IN_BASIC_GAME: !0,
    constructor: function() {
        Interface.GameRulesDesktopView.superclass.constructor.apply(this, arguments)
    },
    setUpContent: function() {
        var e = this;
        e.containerWrapper = new Sys.Element({
            id: "containerWrapper",
            tag: "div",
            cls: e.WRAPPER_CSS
        }), e.container = e.containerWrapper.add(new Sys.Element({
            id: "gameRules",
            tag: "div",
            cls: e.BASE_CSS
        })), e.rulesWrapper = e.container.add(new Sys.Element({
            id: "gameRules_rules",
            tag: "div",
            cls: e.RULES_WRAPPER_CSS
        })), e.rulesLoader = new Sys.Element({
            tag: "div",
            cls: e.LOADER_CSS + " " + e.LOADER_URI
        }), e.createButton(), e.fireEvent("view:addToContainer", "settingsWindow", {
            title: Services.languageManager.getText(Language.Keys.gameRules_uc),
            content: e.containerWrapper
        }), e.fireEvent("view:addToNavigator", "desktopSettingsMenu", {
            order: 4,
            element: e.menuButton
        }), e.addScrolling(), e.model.readData("disabled") || e.enable(), e.hide()
    },
    createButton: function() {
        var e, t = this,
            n = t.model.readData("gameRulesURL");
        t.menuButton = new Sys.Element({
            id: "gameRulesButton",
            tag: "div",
            cls: t.BUTTON_CSS
        }), t.abstractButton = new Interface.AbstractButton({
            dimensions: t.menuButton.el,
            clickCallback: function() {
                if (e = void 0 !== n && "" !== n) return void t.fireEvent("view:gameRules.open");
                t.model.readData("showing") ? t.fireEvent("view:hideRequest") : t.fireEvent("view:showRequest")
            },
            hoverCallback: function() {
                t.menuButton.addCls("hover")
            },
            upCallback: function() {
                t.menuButton.removeCls("hover")
            }
        })
    },
    hide: function() {
        this.containerWrapper.el.style.display = "none", Interface.GameRulesDesktopView.superclass.hide.apply(this, arguments)
    },
    show: function() {
        this.containerWrapper.el.style.display = "block", Interface.GameRulesDesktopView.superclass.show.apply(this, arguments)
    },
    disableButton: function() {
        this.abstractButton.disable("notInIdleState")
    }
}, Interface.GameRulesDesktopView = Sys.extend(Interface.GameRulesBaseView, Interface.GameRulesDesktopView, "Interface.GameRulesDesktopView");
Sys.ns("Interface"), Interface.Paytable = {
    constructor: function() {
        Interface.Paytable.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return {
            fallback: ["userInput", "orientation"],
            desktop: ["userInput"]
        }
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.PaytableController,
            model: Interface.PaytableModel,
            view: Interface.PaytableBaseView
        }
    }
}, Interface.Paytable = Sys.extend(Interface.SettingsSection, Interface.Paytable, "Interface.Paytable");
Sys.ns("Interface"), Interface.PaytableController = {
    constructor: function() {
        Interface.PaytableController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        Interface.PaytableController.superclass.setupEvents.apply(this, arguments), this.on({
            "request:paytable.forward": this.onForwardRequest,
            "request:paytable.backward": this.onBackwardRequest,
            "notify:responseParser.paytableResponseParsed": this.onPaytableResponse,
            "view:pageSwitch": this.fireEvent.bind(this, "notify:paytable.pageSwitched"),
            "notify:gameModeChanged": this.onGameModeChanged,
            "notify:animationManager.allImagesLoaded": this.initAnimations
        })
    },
    initAnimations: function() {
        "function" == typeof this.view.initAnimations && this.view.initAnimations()
    },
    setUpContent: function() {
        this.fireEvent("request:serverManager.sendAction", "paytable", "notify:responseParser.paytableResponseParsed")
    },
    onPaytableResponse: function(e) {
        this.model.processPaytableResponse(e), this.view.setUpContent()
    },
    onShowRequest: function(e) {
        var t = this;
        t.model.readData("showing") ? t.view.show(e) : Interface.PaytableController.superclass.onShowRequest.apply(t, arguments)
    },
    onForwardRequest: function() {
        this.model.readData("showing") && this.view.showNextPage()
    },
    onBackwardRequest: function() {
        this.model.readData("showing") && this.view.showPreviousPage()
    },
    onGameModeChanged: function(e) {
        Sys.isDefined(this.view.showButton) && Sys.isDefined(this.view.hideButton) && ("BASIC" === e ? this.view.showButton() : this.view.hideButton())
    }
}, Interface.PaytableController = Sys.extend(Interface.SettingsSectionController, Interface.PaytableController, "Interface.PaytableController");
Sys.ns("Interface"), Interface.PaytableModel = {
    constructor: function() {
        Interface.PaytableModel.superclass.constructor.apply(this, arguments)
    },
    setNumberOfPages: function(e) {
        Services.storage.storeData("paytable.numberOfPages", e)
    },
    setCurrentPage: function(e) {
        Services.storage.storeData("paytable.currentPage", e)
    },
    processPaytableResponse: function(e) {
        var t = this,
            a = e.pt,
            s = {};
        Sys.iterate(a, function(e, a) {
            t.parseGameMode(e, a, s)
        }), t.storeData("paytableInfo", s)
    },
    parseGameMode: function(e, t, a) {
        var s = this,
            n = {
                scatterWins: {},
                betlineWins: {}
            };
        Sys.iterate(t.comp, function(e, t) {
            s.parsePaytableComponent(e, t, n)
        }), a[t.id] = n
    },
    parsePaytableComponent: function(e, t, a) {
        var s, n = t.symbol,
            r = t.type + "Wins",
            o = t.n;
        "scatter" !== t.type && "betline" !== t.type || (Sys.isDefined(a[r][n]) || (a[r][n] = {
            freeSpins: [],
            betMultiplier: []
        }), s = a[r][n], s.freeSpins[o] = t.freespins, s.betMultiplier[o] = t.multi)
    },
    getCondensedInfo: function(e, t, a, s) {
        for (var n = this.readData("paytableInfo")[s || "basic"][a || "betlineWins"][e][t || "betMultiplier"], r = 1, o = 0, i = n[0], l = []; r < n.length; r++) n[r] !== i && (l.push({
            from: o,
            to: r - 1,
            value: i
        }), o = r, i = n[r]);
        return l.push({
            from: o,
            to: r - 1,
            value: i
        }), l
    },
    setupData: function() {
        var e = Game.stage.model.getCurrentReelGroupConfiguration();
        this.storeData("symbolWidth", e.symbolWidth), this.storeData("symbolHeight", e.symbolHeight), Services.storage.storeData("paytable.showing", !1)
    }
}, Interface.PaytableModel = Sys.extend(Core.Model, Interface.PaytableModel, "Interface.PaytableModel");
Sys.ns("Interface"), Interface.PaytableBaseView = {
    BASE_CSS: "tab interface-paytable_base",
    PORTRAIT_CSS: "interface-paytable_portrait",
    LANDSCAPE_CSS: "interface-paytable_landscape",
    SECTION_CSS: "interface-paytable_section interface-settingsSection_subSection",
    SECTION_SEPARATOR_URI: "interface-settingsSection_subSection_uri",
    HEADING_CSS: "interface-paytable_heading",
    SECTIONS: ["SymbolValues", "Betlines", "Disclaimer"],
    HIGH_WIN: {
        COLOR: "",
        SYMBOLS: []
    },
    MEDIUM_WIN: {
        COLOR: "",
        SYMBOLS: []
    },
    LOW_WIN: {
        COLOR: "",
        SYMBOLS: []
    },
    DISCLAIMER_STRINGS: [Language.Keys.paytable_highest, Language.Keys.paytable_betLineWinsLeftToRightOnly, Language.Keys.paytable_voidAllPays, Language.Keys.paytable_extraInfo],
    constructor: function() {
        Interface.PaytableBaseView.superclass.constructor.apply(this, arguments), this.setupContainer(), this.sectionElements = {}
    },
    setupContainer: function() {
        this.container = new Sys.Element({
            id: "paytable",
            tag: "div",
            cls: this.BASE_CSS
        })
    },
    setUpContent: function() {
        var e = this;
        e.model.setNumberOfPages(1), e.model.setCurrentPage(1), e.createSections(), e.fireEvent("view:addToContainer", "settingsWindow", {
            title: Services.languageManager.getText(Language.Keys.paytable_uc),
            content: e.container
        }), e.fireEvent("view:addToNavigator", "settingsMenu", {
            order: 3
        }), e.addScrolling(), e.model.readData("disabled") || e.enable(), e.hide()
    },
    showNextPage: function() {},
    showPreviousPage: function() {},
    createSections: function() {
        var e, t = this,
            a = t.SECTIONS,
            n = a.length;
        for (e = -1; ++e < n;) "function" == typeof t["create" + a[e]] && t["create" + a[e]]()
    },
    createSymbolValues: function() {
        var e = this,
            t = new Sys.Element({
                tag: "div",
                class: e.SECTION_CSS + " " + e.SECTION_SEPARATOR_URI
            });
        t.add(new Sys.Element({
            tag: "div",
            textContent: Services.languageManager.getText(Language.Keys.paytable_symbolPayout),
            class: e.HEADING_CSS + " utils_center_text"
        })), e.HIGH_WIN.SYMBOLS.length > 0 && t.add(e.createSymbolSubSection(e.HIGH_WIN.SYMBOLS, e.HIGH_WIN.COLOR)), e.MEDIUM_WIN.SYMBOLS.length > 0 && t.add(e.createSymbolSubSection(e.MEDIUM_WIN.SYMBOLS, e.MEDIUM_WIN.COLOR)), e.LOW_WIN.SYMBOLS.length > 0 && t.add(e.createSymbolSubSection(e.LOW_WIN.SYMBOLS, e.LOW_WIN.COLOR)), e.sectionElements.SymbolValues = t, e.container.add(t)
    },
    createSymbolSubSection: function(e, t) {
        var a, n, i = this,
            s = new Sys.Element({
                tag: "table",
                class: "interface-paytable_symbols"
            }),
            l = e.length;
        for (n = -1; ++n < l;) n % 2 == 0 && (a = s.add(new Sys.Element({
            tag: "tr"
        }))), i.appendSymbolContainer(a, e[n], t);
        return s
    },
    appendSymbolContainer: function(e, t, a, n, i, s) {
        var l, S, o, r = Resources.readData("animationImages"),
            c = this.model.readData("symbolHeight"),
            d = e.add(new Sys.Element({
                tag: "td",
                style: "min-height: " + c + "px; text-align: center;"
            })),
            g = this.model.getCondensedInfo(t, n, i, s).sort(function(e, t) {
                return t.from - e.from
            }),
            y = g.length;
        for (Sys.isDefined(r[t]) && d.el.appendChild(r[t]), l = e.add(new Sys.Element({
                tag: "td",
                style: "min-height: " + c + "px;"
            })).add(new Sys.Element({
                tag: "ul",
                class: "interface-paytable_symbolValues"
            })), o = -1; ++o < y;) S = g[o], Sys.isDefined(S.value) && (l.add(new Sys.Element({
            tag: "li",
            textContent: S.from,
            style: "width: 33%; color: " + a + ";"
        })), l.add(new Sys.Element({
            tag: "li",
            textContent: S.value,
            style: "width: 66%;"
        })))
    },
    createBetlines: function() {
        var e = this,
            t = Resources.readData("animationImages"),
            a = new Sys.Element({
                tag: "div",
                class: e.SECTION_CSS + " utils_center_text " + e.SECTION_SEPARATOR_URI
            });
        a.add(new Sys.Element({
            tag: "div",
            textContent: Services.languageManager.getText(Language.Keys.paytable_winningBetLinesHeading),
            class: e.HEADING_CSS
        })), Sys.isObj(t) && Sys.isDefined(t.betlines) && a.el.appendChild(t.betlines), e.sectionElements.Betlines = a, e.container.add(a)
    },
    createDisclaimer: function() {
        var e, t = this,
            a = new Sys.Element({
                tag: "div",
                class: t.SECTION_CSS + " utils_center_text " + t.SECTION_SEPARATOR_URI
            }),
            n = t.DISCLAIMER_STRINGS,
            i = n.length;
        for (e = -1; ++e < i;) a.add(new Sys.Element({
            tag: "div",
            textContent: Services.languageManager.getText(n[e])
        }));
        t.sectionElements.Disclaimer = a, t.container.add(a)
    }
}, Interface.PaytableBaseView = Sys.extend(Interface.SettingsSectionView, Interface.PaytableBaseView, "Interface.PaytableBaseView");
Sys.ns("Interface"), Interface.PaytableDesktopView = {
    BASE_CSS: "tab interface-paytableDesktop_base",
    KEYPAD_BUTTON_CONFIG: {
        dimensions: {
            x: 50,
            y: 623,
            width: 52,
            height: 52
        },
        buttonImages: {
            up: "paytableButtonUp",
            down: "paytableButtonDown",
            hover: "paytableButtonOver",
            disabled: "paytableButtonDisabled"
        }
    },
    constructor: function() {
        Interface.PaytableDesktopView.superclass.constructor.apply(this, arguments)
    },
    show: function(e) {
        var t = this,
            n = t.navigation.getCurrentCardIndex();
        Interface.PaytableDesktopView.superclass.show.apply(t, arguments), Sys.isNumber(e) && e > 0 && e <= t.SECTIONS.length && (n = e - 1), t.navigation.selectCard(n), t.navigation.enable(t.MODULE_NAME)
    },
    hide: function() {
        var e, t, n, a, i = this;
        for (Interface.PaytableDesktopView.superclass.hide.apply(i, arguments), e = i.SECTIONS, t = i.sectionElements, n = e.length, a = -1; ++a < n;) t[e[a]].el.style.display = "none";
        i.navigation.disable(i.MODULE_NAME)
    },
    showNextPage: function() {
        this.navigation.next()
    },
    showPreviousPage: function() {
        this.navigation.previous()
    },
    enable: function(e) {
        this.animationsReady && this.button.enable(e)
    },
    disable: function(e) {
        this.animationsReady && this.button.disable(e)
    },
    setUpContent: function() {
        var e = this;
        e.model.setNumberOfPages(e.SECTIONS.length), e.model.setCurrentPage(1), e.createSections(), e.createNavigation(), e.fireEvent("view:addToContainer", "settingsWindow", {
            title: Services.languageManager.getText(Language.Keys.paytable_uc),
            content: e.container
        }), e.addScrolling(), e.model.readData("disabled") || e.enable(), e.hide()
    },
    createNavigation: function() {
        var e = this;
        e.navigation = new Interface.utils.CardNavigation({
            id: "paytableNavigation",
            numCards: this.SECTIONS.length,
            selectionCallback: e.onCardSelection.bind(e),
            closeCallback: e.onCloseCallback.bind(e),
            arrowLabels: {
                next: "Next",
                previous: "Previous"
            }
        }), e.subComponents = [e.navigation], e.container.add(e.navigation.getArrows()), e.container.add(e.navigation.getIndicators())
    },
    onCardSelection: function(e, t, n) {
        var a, i = this;
        i.hideSection(t), i.showSection(e), i.model.setCurrentPage(e + 1), e !== t && (a = e > t ? "forward" : "backward", n && (a = e < t ? "forward" : "backward"), i.fireEvent("view:pageSwitch", a))
    },
    onCloseCallback: function() {
        this.fireEvent("view:hideRequest")
    },
    showSection: function(e) {
        this.sectionElements[this.SECTIONS[e]].el.style.display = "block"
    },
    hideSection: function(e) {
        this.sectionElements[this.SECTIONS[e]].el.style.display = "none"
    },
    showButton: function() {
        this.animationsReady && (this.button.show("buttonHideRequest"), this.hidden = !1)
    },
    hideButton: function() {
        this.animationsReady && (this.button.hide("buttonHideRequest"), this.hidden = !0)
    },
    enableButton: function() {
        this.hidden || this.button.enable("buttonDisableRequest")
    },
    disableButton: function() {
        this.hidden || this.button.disable("buttonDisableRequest")
    },
    initAnimations: function() {
        var e = this,
            t = Sys.applyProperties({
                clickCallback: e.onButtonClick.bind(e)
            }, e.KEYPAD_BUTTON_CONFIG);
        Sys.isDefined(t.buttonLabel) && (t.buttonLabel.depth = Layering.Game.Slots.Keypad.paytable.label), Sys.isDefined(t.buttonLayoutParameters) ? t.buttonLayoutParameters.depth = Layering.Game.Slots.Keypad.paytable.button : t.dimensions.depth = Layering.Game.Slots.Keypad.paytable.button, e.button = new Interface.utils.CanvasButton(t), e.button.id = "paytable", e.animationsReady = !0
    },
    onButtonClick: function() {
        this.model.readData("showing") ? this.fireEvent("view:hideRequest") : this.fireEvent("view:showRequest")
    },
    shouldBeHiddenByUserInput: function() {
        return !1
    },
    onDisableBasicGamePanel: function() {
        this.disable("disableBasicGamePanel")
    },
    onEnableBasicGamePanel: function() {
        this.enable("disableBasicGamePanel")
    },
    onScroll: function() {}
}, Interface.PaytableDesktopView = Sys.extend(Interface.PaytableBaseView, Interface.PaytableDesktopView, "Interface.PaytableDesktopView");
Sys.ns("Interface"), Interface.SpinSettingsBase = {
    constructor: function() {
        Interface.SpinSettingsBase.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.SpinSettingsBaseController,
            model: Interface.SpinSettingsBaseModel,
            view: Core.View
        }
    }
}, Interface.SpinSettingsBase = Sys.extend(Interface.SettingsSection, Interface.SpinSettingsBase, "Interface.SpinSettingsBase");
Sys.ns("Interface"), Interface.SpinSettingsBaseController = {
    constructor: function() {
        Interface.SpinSettingsBaseController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var t = this;
        Interface.SpinSettingsBaseController.superclass.setupEvents.apply(t, arguments), t.on({
            "request:spinSettings.showStopIfFreeSpinsWon": t.showStopIfFreeSpinsWon,
            "request:spinSettings.showStopIfAutoplayingBonusGameWon": t.showStopIfAutoplayingBonusGameWon,
            "request:spinSettings.startAutoPlay": t.onStartAutoPlay,
            "notify:settingsManager.settingChanged": t.onSettingChanged,
            "notify:settingsManager.settingEnabled": t.onSettingEnabled,
            "notify:settingsManager.settingDisabled": t.onSettingDisabled,
            "notify:settingsManager.settingLocked": t.onSettingLocked,
            "notify:settingsManager.unlockSetting": t.onSettingUnlocked,
            "notify:moneyManager.betChanged": t.onBetChanged,
            "notify:stateHandler.enteringSetupGameState": t.checkIfAutoplayDisabled
        })
    },
    onStartAutoPlay: function() {
        this.canStartAutoplay() ? this.fireEvent("request:autoPlayer.start") : this.showWarningDialog()
    },
    checkIfAutoplayDisabled: function() {
        var t = this,
            e = t.model.getAutoplaySpinsArray();
        1 === e.length && (e[0] < 5 || e[0] > 1e3) && (t.fireEvent("request:settingsManager.disableSetting", "autoPlayNrSpins"), t.fireEvent("request:settingsManager.storeData", "autoPlayNrSpins", 0), t.fireEvent("request:settingsManager.lockSetting", "autoPlayNrSpins", t.MODULE_NAME))
    },
    onSettingChanged: function(t, e) {
        var n = this;
        "autoPlayNrSpins" === t && (0 === e && (e = n.model.getAutoplaySpinsArray()[0]), n.model.storeData(t, e), n.view.update())
    },
    onBetChanged: function() {
        Services.settingsManager.getSetting("autoPlayNrSpins") > 0 && !this.canStartAutoplay() && this.showWarningDialog()
    },
    canStartAutoplay: function() {
        var t = Services.moneyManager.getBetCents(),
            e = this.model.readData("isRestrictedMode"),
            n = Services.settingsManager.getSetting("stopAutoplayIfBalanceDecreasedBy"),
            a = this.model.readData("freeRoundsActive"),
            i = t <= n;
        return !(e || n > 0) || (a || i)
    },
    onSettingDisabled: function(t) {
        this.view.removeSetting(t)
    },
    onSettingEnabled: function() {},
    onSettingLocked: function(t) {
        this.view.lockSetting(t)
    },
    onSettingUnlocked: function(t) {
        this.view.unlockSetting(t)
    },
    onUserAction: function(t, e) {
        this.model.storeData(t, e), "autoPlayNrSpins" === t && isNaN(Number(e)) && (e = 0), this.fireEvent("request:settingsManager.storeData", t, e)
    },
    showWarningDialog: function() {
        var t = this,
            e = Services.languageManager;
        Platform.isDesktopDevice ? t.fireEvent("request:dialogWindow.showDialog", {
            title: e.getText(Language.Keys.autoplay_setting_ifCashDecreasesBy),
            text: e.getText(Language.Keys.autoplay_setting_ifCashDecreasesByWarning),
            buttons: [{
                text: e.getText(Language.Keys.btn_ok),
                action: function() {
                    t.fireEvent("notify:dialogBoxClosed", {
                        name: "spinSettingsAutoplayWarning",
                        button: "ok"
                    })
                }
            }]
        }) : t.fireEvent("request:dialogWindow.showDialog", {
            title: e.getText(Language.Keys.autoplay_setting_ifCashDecreasesBy),
            text: e.getText(Language.Keys.autoplay_setting_ifCashDecreasesByWarningTouch),
            buttons: [{
                text: e.getText(Language.Keys.btn_close),
                action: function() {
                    t.fireEvent("notify:dialogBoxClosed", {
                        name: "spinSettingsAutoplayWarning",
                        button: "close"
                    }), t.fireEvent("request:autoPlayer.stop")
                }
            }, {
                text: e.getText(Language.Keys.btn_ok),
                action: function() {
                    t.fireEvent("notify:dialogBoxClosed", {
                        name: "spinSettingsAutoplayWarning",
                        button: "ok"
                    }), t.fireEvent("request:spinSettings.openAdvancedSettingKeyboard", "stopAutoplayIfBalanceDecreasedBy")
                }
            }]
        })
    },
    showStopIfFreeSpinsWon: function() {},
    showStopIfAutoplayingBonusGameWon: function() {}
}, Interface.SpinSettingsBaseController = Sys.extend(Interface.SettingsSectionController, Interface.SpinSettingsBaseController, "Interface.SpinSettingsBaseController");
Sys.ns("Interface"), Interface.SpinSettingsBaseModel = {
    AUTOPLAY_SPINS: [0, 10, 25, 50, 100, 250, 500, 750, 1e3],
    constructor: function() {
        Interface.SpinSettingsBaseModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e, t, a = this,
            n = Resources.readData("gameServerInitResponseObject").autoplay;
        void 0 !== n && (0 === n || a.validateSingleAutoPlayValue(n) || a.validateAutoplayArray(n)) ? (n = Array.isArray(n) ? n.slice() : [n], n.contains(0) || (n = [0].concat(n)), n.sort(function(e, t) {
            return e - t
        })) : n = a.AUTOPLAY_SPINS, e = [{
            key: "autoPlayNrSpins",
            defaultValue: n[0],
            settingsManager: !0,
            localStorage: !1
        }, {
            key: "autoplaySpinsArray",
            defaultValue: n,
            settingsManager: !1,
            localStorage: !1
        }], e.forEach(a.initData, a), Services.storage.storeData("spinSettings.autoplayRoundsAvailable", n.slice(1)), Interface.SpinSettingsBaseModel.superclass.setupData.apply(this, arguments), t = Resources.readData("gameServerInitResponse").autoplayLossLimitEnabled || !1, this.storeData("isRestrictedMode", t), this.storeData("dontSetupAutoplay", 1 === n.length && 0 === n[0])
    },
    validateAutoplayArray: function(e) {
        var t = e.length;
        return !!(Array.isArray(e) && t > 0 && t < 9) && !e.some(function(e) {
            var t = parseInt(e, 10);
            return t && !isNaN(t) && (t < 5 || t > 1e3)
        })
    },
    validateSingleAutoPlayValue: function(e) {
        var t = !0,
            a = Sys.utils.toInt(e);
        return (Array.isArray(e) || isNaN(a) || a < 5 || a > 1e3) && (t = !1), t
    },
    getAutoplaySpinsArray: function() {
        return this.readData("autoplaySpinsArray")
    },
    hasAutoplayCeased: function() {
        return this.readData("dontSetupAutoplay")
    }
}, Interface.SpinSettingsBaseModel = Sys.extend(Interface.SettingsSectionModel, Interface.SpinSettingsBaseModel, "Interface.SpinSettingsBaseModel");
Sys.ns("Interface"), Interface.SpinSettings = {
    constructor: function() {
        Interface.SpinSettings.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.SpinSettingsController,
            model: Interface.SpinSettingsModel,
            view: Interface.SpinSettingsView
        }
    }
}, Interface.SpinSettings = Sys.extend(Interface.SpinSettingsBase, Interface.SpinSettings, "Interface.SpinSettings");
Sys.ns("Interface"), Interface.SpinSettingsModel = {
    setupData: function() {
        var e = this,
            a = [{
                key: "stopAutoplayIfBalanceDecreasedBy",
                defaultValue: !1,
                settingsManager: !0,
                localStorage: !0
            }, {
                key: "leftHandMode",
                defaultValue: !1,
                settingsManager: !0,
                localStorage: !0
            }, {
                key: "quickSpin",
                defaultValue: !1,
                settingsManager: !0,
                localStorage: !0
            }, {
                key: "stopAutoplayIfFreeSpinWon",
                defaultValue: !1,
                settingsManager: !0,
                localStorage: !1
            }, {
                key: "stopAutoplayIfAutoplayingBonusGameWon",
                defaultValue: !1,
                settingsManager: !0,
                localStorage: !1
            }, {
                key: "stopAutoplayIfWinExceeds",
                defaultValue: !1,
                settingsManager: !0,
                localStorage: !1
            }];
        Interface.SpinSettingsModel.superclass.setupData.apply(this, arguments), a.forEach(e.initData, e)
    }
}, Interface.SpinSettingsModel = Sys.extend(Interface.SpinSettingsBaseModel, Interface.SpinSettingsModel, "Interface.SpinSettingsModel");
Sys.ns("Interface"), Interface.SpinSettingsController = {
    constructor: function() {
        Interface.SpinSettingsController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        Interface.SpinSettingsController.superclass.setupEvents.apply(e, arguments), e.on({
            "request:spinSettings.openAdvancedSettingKeyboard": e.openAdvancedSettingsKeyboard,
            "notify.dialogWindow.showingDialog": e.onShowingDialog,
            "view:autoPlaySliderEnd": e.userInteractionEnded,
            "notify:freeRounds.started": e.view.onFreeRoundsStateChange.bind(e.view, !0),
            "notify:freeRounds.ended": e.view.onFreeRoundsStateChange.bind(e.view, !1)
        })
    },
    userInteractionEnded: function(e) {
        var t = this;
        !0 === t.model.readData("isRestrictedMode") && e > 0 && (t.fireEvent("request:userInputManager.activateExclusivity", "spinSettings.addingValue"), t.addValueToLossLimit())
    },
    onBetChanged: function(e) {
        var t = this;
        Interface.SpinSettingsController.superclass.onBetChanged.apply(t, arguments), t.view.advancedSettings && t.view.advancedSettings.stopAutoplayIfBalanceDecreasedBy && t.view.advancedSettings.stopAutoplayIfBalanceDecreasedBy.setMinValue(e.playerBetCents > 0 ? e.playerBetCents : void 0)
    },
    onUserAction: function(e, t) {
        var n = this,
            a = n.model.readData("isRestrictedMode"),
            i = n.model.readData("freeRoundsActive") || !1;
        Interface.SpinSettingsController.superclass.onUserAction.apply(this, arguments), "leftHandMode" !== e && "quickSpin" !== e || Services.localStorageManager.storeData(e, t.toString()), "autoPlayNrSpins" === e && this.enableAdvancedSettings(t), !0 !== a || "stopAutoplayIfBalanceDecreasedBy" !== e || 0 !== t || i || Services.settingsManager.storeSetting("autoPlayNrSpins", 0)
    },
    enableAdvancedSettings: function(e) {
        var t = this,
            n = t.model.readData("isRestrictedMode"),
            a = t.model.readData("freeRoundsActive"),
            i = Services.settingsManager.getSetting("stopAutoplayIfBalanceDecreasedBy") || 0;
        e = Sys.isDefined(e) ? e : 0, e > 0 ? (t.view.showAdvancedSettings(), t.view.enableAdvancedSettings()) : (t.view.hideAdvancedSettings(), t.view.disableAdvancedSettings()), !0 !== n || a || 0 !== i || t.view.disableAdvancedSettings()
    },
    onSettingChanged: function(e, t) {
        var n = this,
            a = n.model.readData("isRestrictedMode"),
            i = n.model.readData("freeRoundsActive") || !1;
        Interface.SpinSettingsController.superclass.onSettingChanged.apply(n, arguments), "quickSpin" === e && (n.model.storeData(e, t), n.view.update()), !0 !== a || "stopAutoplayIfBalanceDecreasedBy" !== e || 0 !== t || i || Services.settingsManager.storeSetting("autoPlayNrSpins", 0)
    },
    showStopIfAutoplayingBonusGameWon: function() {
        this.view.showStopIfAutoplayingBonusGameWon()
    },
    openAdvancedSettingsKeyboard: function(e) {
        var t = this;
        t.fireEvent("request:settingsWindow.openChild", "spinSettings"), t.view.openAdvancedSetting(e)
    },
    addValueToLossLimit: function() {
        var e = this,
            t = Services.settingsManager.getSetting("stopAutoplayIfBalanceDecreasedBy"),
            n = e.model.readData("freeRoundsActive");
        t && 0 !== t || n ? (e.fireEvent("request:userInputManager.deactivateExclusivity", "spinSettings.addingValue"), e.view.enableAdvancedSettings()) : setTimeout(function() {
            e.fireEvent("request:userInputManager.deactivateExclusivity", "spinSettings.addingValue"), e.view.openAdvancedSetting("stopAutoplayIfBalanceDecreasedBy"), e.view.enableAdvancedSettings()
        }, 1e3)
    },
    onShowingDialog: function() {
        this.model.readData("showing") && this.fireEvent("request:keyboard.cancel")
    }
}, Interface.SpinSettingsController = Sys.extend(Interface.SpinSettingsBaseController, Interface.SpinSettingsController, "Interface.SpinSettingsController");
Sys.ns("Interface"), Interface.SpinSettingsView = {
    BASE_CSS: "tab interface-spinSettings_base",
    PORTRAIT_CSS: "interface-spinSettings_portrait",
    LANDSCAPE_CSS: "interface-spinSettings_landscape",
    SECTION_CSS: "interface-settingsSection_subSection",
    SECTION_SEPARATOR_URI: "interface-settingsSection_subSection_uri",
    AUTOPLAY_SETTINGS_CSS: "interface-spinSettings_autoPlayContainer",
    AUTO_PLAY_ADDVALUE: "ifCashDecreasesByAddValue",
    AUTOPLAYING_BONUS_GAME_LABEL: Language.Keys.autoplay_setting_ifFBonusIsStarted,
    FREEROUND_ACTIVE_CONTROLS: ["stopAutoplayIfFreeSpinWon", "stopIfAutoplayingBonusGameWon"],
    ADVANCED_AUTOPLAY_SETTINGS: {
        stopAutoplayTitle: {
            labelOCTKey: Language.Keys.autoplay_setting_stopAutoPlay,
            type: "settingGroupTitle"
        },
        stopAutoplayIfBalanceDecreasedBy: {
            labelOCTKey: Language.Keys.autoplay_setting_ifCashDecreasesBy,
            buttonTextOCTKey: Language.Keys.btn_addValue,
            infoOCTKey: Language.Keys.autoplay_setting_ifCashDecreasesByInfoTouch,
            type: "interactiveContainer",
            defaultValue: 0
        },
        stopAutoplayIfWinExceeds: {
            labelOCTKey: Language.Keys.autoplay_setting_ifWinExeeds,
            buttonTextOCTKey: Language.Keys.btn_addValue,
            type: "interactiveContainer",
            defaultValue: 0
        },
        stopAutoplayIfBalanceIncreasedBy: {
            labelOCTKey: Language.Keys.autoplay_setting_ifCashIncreasesBy,
            buttonTextOCTKey: Language.Keys.btn_addValue,
            type: "interactiveContainer",
            defaultValue: 0
        },
        stopAutoplayIfFreeSpinWon: {
            type: "ToggleSwitch",
            titleOCTKey: Language.Keys.stopIfFreeSpins,
            defaultValue: !1
        }
    },
    constructor: function() {
        Interface.SpinSettingsView.superclass.constructor.apply(this, arguments), this.lockedControllers = []
    },
    setUpContent: function() {
        var e, t = this;
        t.container = new Sys.Element({
            id: "spinSettings",
            tag: "div",
            cls: t.BASE_CSS
        }), t.autoplayContainer = t.container.add(new Sys.Element({
            id: "spinSettings_autoplaySettings",
            tag: "div",
            cls: t.SECTION_CSS + " " + t.AUTOPLAY_SETTINGS_CSS
        })), t.numberOfAutoPlaysSetting = t.autoplayContainer.add(new Sys.Element({
            id: "nrOfAutoplaySpins",
            tag: "ul",
            class: "interface-settingsSection_dynamicSliderPosition_container"
        })), t.nrOfSpinsText = t.numberOfAutoPlaysSetting.add(new Sys.Element({
            id: "nrAutoPlaySpinsLabel",
            tag: "li",
            class: "interface-settingsSection_dynamicSliderPosition_label",
            textContent: Services.languageManager.getText(Language.Keys.autoplay)
        })), t.nrAutoPlaySpins = new Interface.utils.Slider({
            id: "nrAutoPlaySpinsSlider",
            values: t.model.getAutoplaySpinsArray(),
            callback: t.onSettingsControllerChanged.bind(t, "autoPlayNrSpins"),
            endCallback: t.fireEvent.bind(t, "view:autoPlaySliderEnd"),
            showLabels: !0
        }), t.advancedAutoplaySettings = t.autoplayContainer.add(new Sys.Element({
            id: "advancedAutoplaySettings",
            tag: "div",
            cls: "interface-autoPlay_advancedSettings_container",
            transitionend: this.updateScrollerDimensions.bind(this)
        })), t.initAdvancedAutoplaySettings(), t.numberOfAutoPlaysSetting.add(new Sys.Element({
            id: "nrAutoPlaySpinsSliderWrapper",
            tag: "li",
            class: "interface-settingsSection_dynamicSliderPosition_slider"
        })).add(t.nrAutoPlaySpins.getContainer()), t.stopIfAutoplayingBonusGameWon = new Interface.utils.ToggleSwitch({
            id: "stopIfAutoplayingBonusGameWon",
            title: Services.languageManager.getText(t.AUTOPLAYING_BONUS_GAME_LABEL),
            callback: t.onSettingsControllerChanged.bind(t, "stopAutoplayIfAutoplayingBonusGameWon")
        }), e = t.stopIfAutoplayingBonusGameWon.getContainer(), t.stopIfAutoplayingBonusGameWonOriginalDisplay = e.el.style.display, e.el.style.display = "none", t.autoplayContainer.add(e), t.quickSpinContainer = t.container.add(new Sys.Element({
            id: "spinSettings_quickSpinSettings",
            tag: "div",
            cls: t.SECTION_CSS + " " + t.SECTION_SEPARATOR_URI
        })), t.quickSpin = new Interface.utils.ToggleSwitch({
            id: "quickSpinOnOff",
            title: Services.languageManager.getText(Language.Keys.setting_quickSpinGame),
            callback: t.onSettingsControllerChanged.bind(t, "quickSpin")
        }), t.quickSpinContainer.add(t.quickSpin.getContainer()), t.spinButtonPositionContainer = t.container.add(new Sys.Element({
            id: "spinSettings_spinButtonPositionSettings",
            tag: "div",
            cls: t.SECTION_CSS + " " + t.SECTION_SEPARATOR_URI
        })), t.swedenPlugin = !!Resources.readData("queryData") && Resources.readData("queryData").enableDefaultSwedenButtons, t.swedenPlugin || (t.spinButtonPosition = new Interface.utils.ToggleSwitch({
            id: "spinButtonPositionLeftRight",
            title: Services.languageManager.getText(Language.Keys.setting_leftHandMode),
            callback: t.onSettingsControllerChanged.bind(t, "leftHandMode")
        }), t.spinButtonPositionContainer.add(t.spinButtonPosition.getContainer())), t.addContainerToSettings(), t.subComponents = [t.quickSpin, t.nrAutoPlaySpins, t.spinButtonPosition], t.update(), t.addScrolling(), t.model.readData("disabled") || t.enable(), t.hide()
    },
    addContainerToSettings: function() {
        var e = this;
        e.fireEvent("view:addToContainer", "settingsWindow", {
            title: Services.languageManager.getText(Language.Keys.spinSettings_uc),
            content: e.container
        }), e.fireEvent("view:addToNavigator", "settingsMenu", {
            order: 2
        })
    },
    initAdvancedAutoplaySettings: function() {
        var e, t = this,
            n = t.advancedAutoplaySettings,
            a = Services.languageManager;
        t.advancedSettings = {}, Sys.iterate(t.ADVANCED_AUTOPLAY_SETTINGS, function(i, o) {
            e = "stopAutoplayIfBalanceDecreasedBy" === i ? Services.moneyManager.getBetCents() : void 0, "interactiveContainer" === o.type ? t.advancedSettings[i] = new Interface.utils.InteractiveContainer({
                title: a.getText(o.labelOCTKey),
                info: a.hasText(o.infoOCTKey) ? a.getText(o.infoOCTKey) : "",
                buttonText: a.hasText(o.buttonTextOCTKey) ? a.getText(o.buttonTextOCTKey) : "",
                id: "advancedSetting-" + i,
                cls: t.SECTION_CSS + " " + t.SECTION_SEPARATOR_URI,
                callback: t.onSettingsControllerChanged.bind(t, i),
                minValue: e
            }) : "ToggleSwitch" === o.type ? t.advancedSettings[i] = new Interface.utils.ToggleSwitch({
                title: a.getText(o.titleOCTKey),
                id: "advanceSetting-" + i,
                cls: t.SECTION_CSS + " " + t.SECTION_SEPARATOR_URI,
                callback: t.onSettingsControllerChanged.bind(t, i)
            }) : "settingGroupTitle" === o.type && (t.advancedSettings[i] = new Interface.utils.GroupTitle({
                title: a.getText(o.labelOCTKey),
                id: "advanceSetting-" + i,
                cls: t.SECTION_CSS,
                CSS: {
                    disabled: ""
                }
            })), n.add(t.advancedSettings[i].getContainer())
        })
    },
    showAdvancedSettings: function() {
        this.advancedAutoplaySettings.el.style["max-height"] = "16rem"
    },
    hideAdvancedSettings: function() {
        this.advancedAutoplaySettings.el.style["max-height"] = "0"
    },
    enableAdvancedSettings: function() {
        var e = this;
        Sys.iterate(e.advancedSettings, function(t, n) {
            var a = e.model.readData("freeRoundsActive");
            (!a || a && e.FREEROUND_ACTIVE_CONTROLS.contains(t)) && n.enable()
        })
    },
    disableAdvancedSettings: function() {
        var e = this;
        Sys.iterate(e.advancedSettings, function(e, t) {
            t.disable()
        })
    },
    openAdvancedSetting: function(e) {
        var t = this.advancedSettings[e];
        Sys.isDefined(t) ? t.click() : console.warn("SpinSettingsView.openAdvancedSetting: No " + e + " setting was found in the settings!")
    },
    onSettingsControllerChanged: function(e, t) {
        this.fireEvent("view:userAction", e, t)
    },
    enable: function() {
        var e = this;
        e.model.storeData("disabled", !1), e.callFunctionOnSubComponents("enable"), Sys.each(e.lockedControllers, function(e) {
            e.disable()
        }), e.nrAutoPlaySpins.getValue() !== e.model.getAutoplaySpinsArray()[0] && (e.stopIfAutoplayingBonusGameWon.enable(), e.enableAdvancedSettings())
    },
    disable: function() {
        var e = this;
        e.callFunctionOnSubComponents("disable"), e.stopIfAutoplayingBonusGameWon.disable(), e.disableAdvancedSettings(), e.spinButtonPosition.enable(), e.model.storeData("disabled", !0)
    },
    update: function() {
        var e = this,
            t = e.model.readData.bind(e.model),
            n = !t("disabled"),
            a = t("autoPlayNrSpins");
        e.nrAutoPlaySpins.setValue(a), e.advancedSettings.stopAutoplayIfFreeSpinWon.toggle(t("stopAutoplayIfFreeSpinWon")), e.stopIfAutoplayingBonusGameWon.toggle(t("stopAutoplayIfAutoplayingBonusGameWon")), e.quickSpin.toggle(t("quickSpin")), e.spinButtonPosition && e.spinButtonPosition.toggle(t("leftHandMode")), a === e.model.getAutoplaySpinsArray()[0] ? (e.stopIfAutoplayingBonusGameWon.toggle(!1), e.stopIfAutoplayingBonusGameWon.disable(), Sys.iterate(e.ADVANCED_AUTOPLAY_SETTINGS, function(t, n) {
            e.advancedSettings[t].setValue(n.defaultValue)
        })) : n && !e.stopIfAutoplayingBonusGameWon.isEnabled() && e.stopIfAutoplayingBonusGameWon.enable()
    },
    showStopIfAutoplayingBonusGameWon: function() {
        this.stopIfAutoplayingBonusGameWon.getContainer().el.style.display = this.stopIfAutoplayingBonusGameWonOriginalDisplay
    },
    removeSetting: function(e) {
        var t = this;
        "quickSpin" === e ? t.container.remove(t.quickSpinContainer) : "autoPlayNrSpins" === e && t.container.remove(t.autoplayContainer)
    },
    lockSetting: function(e) {
        var t, n = this;
        "autoPlayNrSpins" === e ? (t = n.nrAutoPlaySpins, n.nrOfSpinsText.el.style.opacity = "0.5") : "quickSpin" === e && (t = n.quickSpin), t && (t.disable(), n.lockedControllers.contains(t) || n.lockedControllers.push(t))
    },
    unlockSetting: function(e) {
        var t, n = this;
        "autoPlayNrSpins" === e ? (t = n.nrAutoPlaySpins, n.nrOfSpinsText.el.style.opacity = "") : "quickSpin" === e && (t = n.quickSpin), t && (n.model.readData("disabled") || t.enable(), n.lockedControllers.contains(t) && n.lockedControllers.splice(n.lockedControllers.indexOf(t), 1))
    },
    resetAutoPlay: function() {},
    reduceCounter: function() {},
    sortControls: function(e) {
        var t = this,
            n = e || [],
            a = t.advancedSettings.stopAutoplayIfBalanceDecreasedBy.container;
        t.model.readData("freeRoundsActive") ? n.forEach(function(e) {
            t.advancedAutoplaySettings.addBefore(e, a)
        }) : n.forEach(function(e) {
            t.advancedAutoplaySettings.add(e, a)
        })
    },
    toggleFreeRoundControls: function(e) {
        var t = this,
            n = e || [],
            a = [];
        Sys.iterate(t.advancedSettings, function(e, i) {
            n.contains(e) ? a.push(t.advancedAutoplaySettings.remove(i.container)) : t.model.readData("freeRoundsActive") ? i.disable() : i.enable()
        }), t.sortControls(a)
    },
    onFreeRoundsStateChange: function(e) {
        var t = this,
            n = t.FREEROUND_ACTIVE_CONTROLS;
        t.model.storeData("freeRoundsActive", e), t.toggleFreeRoundControls(n)
    }
}, Interface.SpinSettingsView = Sys.extend(Interface.SettingsSectionView, Interface.SpinSettingsView, "Interface.SpinSettingsView");
Sys.ns("Interface"), Interface.AutoplaySettings = {
    constructor: function() {
        Interface.AutoplaySettings.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["userInput"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Interface.AutoplaySettingsModel,
            view: Interface.AutoplaySettingsView,
            controller: Interface.AutoplaySettingsController
        }
    }
}, Interface.AutoplaySettings = Sys.extend(Interface.SpinSettingsBase, Interface.AutoplaySettings, "Interface.AutoplaySettings");
Sys.ns("Interface"), Interface.AutoplaySettingsController = {
    constructor: function() {
        Interface.AutoplaySettingsController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.model.hasAutoplayCeased() || (Interface.AutoplaySettingsController.superclass.setupEvents.apply(this, arguments), this.on({
            "notify:stateHandler.enteringIdleState": this.onEnteringIdleState,
            "notify:autoPlayer.reduceCounter": this.view.reduceCounter.bind(this.view),
            "notify:autoPlayer.starting": this.view.onAutoplayStarting.bind(this.view),
            "notify:freeRounds.started": this.view.onFreeRoundsStateChange.bind(this.view, !0),
            "notify:freeRounds.ended": this.view.onFreeRoundsStateChange.bind(this.view, !1),
            "request:autoplaySettings.close": this.onHideRequest,
            "request:closeOpenWindows": this.onHideRequest,
            "request:autoplaySettings.toggle": this.toggle,
            "request:enableBasicGamePanel": this.view.enableKeypadButton.bind(this.view),
            "request:disableBasicGamePanel": this.view.disableKeypadButton.bind(this.view),
            "notify:gameModeChanged": this.onGameModeChanged,
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "view:startAutoPlay": this.onStartAutoPlay,
            "view:stopAutoPlay": this.onStopAutoPlay,
            "view:autoPlayActive": this.onAutoPlayActive
        }))
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    onStartAutoPlay: function() {
        var t = this;
        t.canStartAutoplay() ? t.fireEvent("request:autoPlayer.start") : (t.resetAutoPlay(), t.showWarningDialog())
    },
    onEnteringIdleState: function() {
        var t = this;
        Interface.AutoplaySettingsController.superclass.onEnteringIdleState.apply(t, arguments), 0 === t.model.readData("autoPlayNrSpins") && (t.view.resetAutoPlay(), t.model.storeData("autoPlayActive", !1))
    },
    onShowRequest: function() {
        var t = this;
        t.model.readData("disabled") || (t.fireEvent("request:gameSettings.close"), Interface.AutoplaySettingsController.superclass.onShowRequest.apply(this, arguments))
    },
    onAutoPlayActive: function() {
        this.model.storeData("autoPlayActive", !0), this.view.update()
    },
    onStopAutoPlay: function() {
        this.fireEvent("request:autoPlayer.stop")
    },
    toggle: function() {
        this.model.readData("showing") ? this.onHideRequest() : this.onShowRequest()
    },
    onSettingDisabled: function(t) {
        this.view.hideSetting(t)
    },
    onSettingEnabled: function(t) {
        this.view.showSetting(t)
    },
    onSettingChanged: function(t, e) {
        Interface.AutoplaySettingsController.superclass.onSettingChanged.apply(this, arguments), this.view.advancedListChanged(t, e)
    },
    onSettingLocked: function(t) {
        "autoPlayNrSpins" === t && (this.onHideRequest(), this.disable("autoplayLocked"), this.view.disableKeypadButton("autoplayLocked"))
    },
    onSettingUnlocked: function(t) {
        "autoPlayNrSpins" === t && (this.enable("autoplayLocked"), this.view.enableKeypadButton("autoplayLocked"))
    },
    onGameModeChanged: function(t) {
        "BASIC" === t ? this.view.showKeypadButton("gameModeNotBasic") : this.view.hideKeypadButton("gameModeNotBasic")
    },
    showStopIfFreeSpinsWon: function() {
        this.fireEvent("request:settingsManager.enableSetting", "stopAutoplayIfFreeSpinWon")
    },
    showStopIfAutoplayingBonusGameWon: function() {
        this.fireEvent("request:settingsManager.enableSetting", "stopAutoplayIfAutoplayingBonusGameWon")
    },
    resetAutoPlay: function() {
        this.view.resetAutoPlay(), this.model.storeData("autoPlayActive", !1), this.fireEvent("request:settingsManager.storeData", "autoPlayNrSpins", 0)
    }
}, Interface.AutoplaySettingsController = Sys.extend(Interface.SpinSettingsBaseController, Interface.AutoplaySettingsController, "Interface.AutoplaySettingsController");
Sys.ns("Interface"), Interface.AutoplaySettingsView = {
    MENU_BUTTON_CSS: "interface-desktopSettingsMenu_button interface-autoplaySettings_icon_uri interface-autoplaySettings-menuButton",
    KEYPAD_BUTTON_CONFIG: {
        dimensions: {
            x: 437,
            y: 613,
            width: 143,
            height: 72
        },
        buttonImages: {
            up: "autoPlayButtonUp",
            down: "autoPlayButtonDown",
            hover: "autoPlayButtonOver",
            disabled: "autoPlayButtonDisabled"
        },
        buttonLabel: {
            width: 107,
            height: 54,
            text: Language.Keys.btn_autoplay,
            font: "24px NetentStandardUI",
            lineHeight: 24,
            alignment: "center",
            color: "#000000",
            breakOn: "<br>"
        }
    },
    ADVANCED_TOGGLE_CSS: {
        base: "interface-standAloneSettingsSectionToggle_base",
        disabled: "interface-standAloneSettingsSectionToggle_disabled",
        button_wrapper: "interface-standAloneSettingsSectionToggle_wrapper",
        label: "interface-standAloneSettingsSectionToggle_label interface-spinSettings_autoPlayAdvancedToggle_label",
        button_handle: "interface-standAloneSettingsSectionToggle_handle",
        button_background: "interface-standAloneSettingsSectionToggle_background",
        open: "advancedOpen",
        closed: "advancedClosed"
    },
    RESTRICTED_CONFIG_CONTROLS: [],
    FREEROUND_ACTIVE_CONTROLS: ["stopAutoplayOnAnyWin", "stopAutoplayIfFreeSpinWon", "stopIfAutoplayingBonusGameWon"],
    ADVANCED_CONFIG_CONTROLS: [{
        id: "stopAutoplayOnAnyWin",
        label: Language.Keys.autoplay_setting_onAnyWin,
        type: "checkbox"
    }, {
        id: "stopAutoplayIfFreeSpinWon",
        label: Language.Keys.autoplay_setting_ifFreeSpinsIsStarted,
        type: "checkbox",
        disabled: !0
    }, {
        id: "stopAutoplayIfAutoplayingBonusGameWon",
        label: Language.Keys.autoplay_setting_ifFBonusIsStarted,
        type: "checkbox",
        disabled: !0
    }, {
        id: "stopAutoplayIfWinExceeds",
        label: Language.Keys.autoplay_setting_ifWinExeeds,
        type: "checkbox",
        withInput: {
            label: void 0
        }
    }, {
        id: "stopAutoplayIfBalanceIncreasedBy",
        label: Language.Keys.autoplay_setting_ifCashIncreasesBy,
        type: "checkbox",
        withInput: {
            label: void 0
        }
    }, {
        id: "stopAutoplayIfBalanceDecreasedBy",
        label: Language.Keys.autoplay_setting_ifCashDecreasesBy,
        type: "checkbox",
        withInput: {
            label: void 0
        }
    }],
    ARROW_LEFT_VALUE: "0.54rem",
    RENDER_TARGET: "gameWrapper",
    DISABLE_BUTTON_DURING_SPIN: !1,
    ORDER: 3,
    TITLE: Language.Keys.autoplay,
    constructor: function() {
        Interface.AutoplaySettingsView.superclass.constructor.apply(this, arguments)
    },
    init: function() {
        var e, t = this;
        Interface.AutoplaySettingsView.superclass.init.apply(t, arguments), t.selectedAutoplayTarget = void 0, t.isActive = !1, t.keypadPendingDisable = [], !0 === t.model.readData("isRestrictedModeEnabled") && (e = Sys.find(t.ADVANCED_CONFIG_CONTROLS, function(e) {
            return "stopAutoplayIfBalanceDecreasedBy" === e.id
        }), t.RESTRICTED_CONFIG_CONTROLS.push(e), t.ADVANCED_CONFIG_CONTROLS.indexOf(e) >= 0 && t.ADVANCED_CONFIG_CONTROLS.splice(t.ADVANCED_CONFIG_CONTROLS.indexOf(e), 1))
    },
    setUpContent: function() {
        var e = this;
        e.model.hasAutoplayCeased() || (Interface.AutoplaySettingsView.superclass.setUpContent.apply(e, arguments), e.setupAutoPlayContainer(e.container))
    },
    initAnimations: function() {
        this.model.hasAutoplayCeased() || this.setUpKeypadButton()
    },
    setupAutoPlayContainer: function() {
        var e = this;
        e.autoplaySettingsWrapper = e.container.add(new Sys.Element({
            id: "autoplaySettings",
            tag: "div",
            cls: "interface-spinSettings_autoplaySettings_wrapper"
        })), !0 === e.model.readData("isRestrictedModeEnabled") && e.setupRestrictedAutoPlayContainer(), e.setupAdvancedAutoPlayContainer(), e.setUpAutoplaySpinsSelector(), e.setUpAutoplayStopControls()
    },
    toggleAdvancedSettings: function() {
        this.advancedSettingsWrapper.toggleClass("advancedSettingsOpen")
    },
    setupAdvancedAutoPlayContainer: function() {
        var e = this,
            t = new Sys.Element({
                id: "advancedAutoplaySettings",
                tag: "div",
                cls: "interface-spinSettings_autoplayAdvancedSettings_wrapper"
            }),
            a = Services.moneyManager.getCurrencyIsoName();
        e.ADVANCED_CONFIG_CONTROLS.forEach(function(e) {
            Sys.isDefined(e.withInput) && (e.withInput.label = a)
        }), e.advancedToggle = new Interface.utils.ToggleSwitch({
            id: "advancedAutoplaySettingsToggle",
            title: Services.languageManager.getText(Language.Keys.autoplay_advancedSettings),
            CSS: e.ADVANCED_TOGGLE_CSS,
            enabled: !0,
            callback: e.toggleAdvancedSettings.bind(e)
        }), t.add(e.advancedToggle.getContainer()), t.add(e.setupResetButton()), t.add(e.setupStopAutoPlaySection()), t.add(e.getDivider()), e.advancedSettingsWrapper = t, e.container.addAsFirst(t), e.ADVANCED_CONFIG_CONTROLS.forEach(function(t) {
            e.fireEvent("view:userAction", t.id, !1), Sys.isDefined(t.disabled) && (e.hideSetting(t.id), e.fireEvent("view:disableSetting", t.id))
        })
    },
    setupRestrictedAutoPlayContainer: function() {
        var e = this,
            t = new Sys.Element({
                id: "restrictedAutoplaySettings",
                tag: "div",
                cls: "interface-spinSettings_autoplayAdvancedSettings_wrapper"
            }),
            a = Services.moneyManager.getCurrencyIsoName();
        e.RESTRICTED_CONFIG_CONTROLS.forEach(function(e) {
            Sys.isDefined(e.withInput) && (e.withInput.label = a)
        }), e.restrictedWrapper = t.add(e.setupRestrictedStopAutoPlaySection()), t.add(e.getDivider()), e.container.addAsFirst(t), e.RESTRICTED_CONFIG_CONTROLS.forEach(function(t) {
            e.fireEvent("view:userAction", t.id, !1), Sys.isDefined(t.disabled) && (e.hideSetting(t.id), e.fireEvent("view:disableSetting", t.id))
        })
    },
    setupStopAutoPlaySection: function() {
        var e = this,
            t = new Sys.Element({
                id: "advancedSettings",
                tag: "div",
                cls: "interface-spinSettings_autoplayAdvancedSettings_settingsListWrapper"
            }),
            a = new Interface.utils.DOMControlList({
                id: "autoplaySettingsStoppedList",
                controls: e.ADVANCED_CONFIG_CONTROLS,
                callback: e.advancedListChanged.bind(e)
            });
        return t.add(new Sys.Element({
            id: "advancedSettingsListHeader",
            tag: "div",
            cls: "interface-spinSettings_autoplayAdvancedSettings_settingsListHeader",
            textContent: Services.languageManager.getText(Language.Keys.autoplay_stopAutoPlay)
        })), e.advancedList = a, t.add(a.getContainer()), t
    },
    setupRestrictedStopAutoPlaySection: function() {
        var e, t = this,
            a = new Sys.Element({
                id: "restrictedSettings",
                tag: "div"
            }),
            n = new Interface.utils.DOMControlList({
                id: "autoplaySettingsRestrictedStoppedList",
                controls: t.RESTRICTED_CONFIG_CONTROLS,
                callback: t.advancedListChanged.bind(t)
            });
        return t.restrictedAdvancedList = n, e = t.restrictedAdvancedList.getControl("stopAutoplayIfBalanceDecreasedBy")[0], e.checkBox.setValue(!0, !0), e.checkBox.lock("autoplay"), a.add(n.getContainer()), a.add(new Sys.Element({
            id: "restrictedSettings_info",
            tag: "div",
            cls: "interface-spinSettings_autoplayStopControls_info",
            textContent: Services.languageManager.getText(Language.Keys.autoplay_setting_ifCashDecreasesByInfo)
        })), a
    },
    advancedListChanged: function(e, t) {
        var a = this,
            n = !1;
        a.fireEvent("view:userAction", e, t), a.ADVANCED_CONFIG_CONTROLS.forEach(function(e) {
            !1 !== Services.settingsManager.getSetting(e.id) && (n = !0)
        }), a.RESTRICTED_CONFIG_CONTROLS.forEach(function(e) {
            !1 !== Services.settingsManager.getSetting(e.id) && (n = !0)
        }), n ? (a.advancedToggle.getContainer().addCls("sectionActive"), a.showResetButton()) : (a.advancedToggle.getContainer().removeCls("sectionActive"), a.hideResetButton())
    },
    setupResetButton: function() {
        var e = this;
        return e.resetButton = new Interface.utils.DOMButton({
            id: "autoplaySettingsReset",
            textContent: Services.languageManager.getText(Language.Keys.reset),
            clickCallback: e.resetSettings.bind(e),
            baseCSS: "interface-desktopControls_Button_small interface-interface-desktopControls_Button_small_uri interface-spinSettings_autoplayStopControls_resetButton"
        }), e.hideResetButton(), e.resetButton.getContainer()
    },
    showResetButton: function() {
        this.resetButton.show(this.MODULE_NAME)
    },
    hideResetButton: function() {
        this.resetButton.hide(this.MODULE_NAME)
    },
    hideSetting: function(e) {
        this.advancedList.hide(e)
    },
    showSetting: function(e) {
        this.advancedList.show(e)
    },
    resetSettings: function() {
        var e = this;
        e.ADVANCED_CONFIG_CONTROLS.forEach(function(t) {
            e.advancedList.update(t.id, !1), e.advancedListChanged(t.id, !1)
        }), e.RESTRICTED_CONFIG_CONTROLS.forEach(function(t) {
            e.restrictedAdvancedList.update(t.id, !1), e.advancedListChanged(t.id, !1)
        }), e.resetAutoPlay(), e.fireEvent("view:stopAutoPlay")
    },
    setUpAutoplaySpinsSelector: function() {
        var e = this,
            t = new Sys.Element({
                id: "autoplaySelectorWrapper",
                tag: "div",
                cls: "interface-spinSettings_autoplaySelector_wrapper"
            }),
            a = {
                id: "autoplaySelector",
                values: e.model.getAutoplaySpinsArray(),
                CSS: {
                    base: "interface-spinSettings_autoplaySelector_base",
                    buttonBase: "interface-spinSettings_autoplaySelector_buttonBase",
                    buttonUp: "interface-DOMOptionScroller_buttonUp_uri",
                    buttonDown: "interface-DOMOptionScroller_buttonDown_uri",
                    valuesHolder: "interface-spinSettings_autoplaySelector_valuesHolder",
                    value: "interface-spinSettings_autoplaySelector_value interface-DOMOptionScroller_value_uri interface-spinSettings_button",
                    wrapper: "interface-spinSettings_autoplaySelector_valueWrapper"
                },
                callback: function(t) {
                    e.fireEvent("view:userAction", "autoPlayNrSpins", Sys.utils.toInt(t)), e.disableAdvancedControls(), e.disableRestrictedControls(), e.fireEvent("view:startAutoPlay")
                },
                scrollOffsetModifier: 3,
                valueWidth: 50,
                replaceTextByIndex: [{
                    index: 0,
                    text: "[Off]",
                    skip: !0
                }]
            };
        t.add(new Sys.Element({
            id: "topLabel",
            tag: "div",
            cls: "interface-spinSettings_autoplaySelector_label",
            textContent: Services.languageManager.getText(Language.Keys.autoplay_numberSpins)
        })), e.selector = new Interface.utils.DOMOptionScroller(a), t.add(e.selector.getContainer()), t.add(new Sys.Element({
            id: "topLabel",
            tag: "div",
            cls: "interface-spinSettings_autoplaySelector_label",
            textContent: Services.languageManager.getText(Language.Keys.autoplay_panelStartText)
        })), e.autoplaySettingsWrapper.add(t)
    },
    onAutoplayStarting: function() {
        this.fireEvent("view:autoPlayActive")
    },
    selectorCallbackFunction: function(e) {
        var t = this;
        return e.element !== t.selectedAutoplayTarget && (Sys.isDefined(t.selectedAutoplayTarget) ? e !== t.selectedAutoplayTarget && (t.selectedAutoplayTarget.style.opacity = "1", e.element.style.opacity = "0.7", t.selectedAutoplayTarget = e.element, !0) : (e.element.style.opacity = "0.7", t.selectedAutoplayTarget = e.element, !0))
    },
    deSelectAutoPlayTarget: function() {
        Sys.isDefined(this.selectedAutoplayTarget) && (this.selectedAutoplayTarget.style.opacity = "1", this.selectedAutoplayTarget = void 0)
    },
    setUpAutoplayStopControls: function() {
        var e = this,
            t = new Sys.Element({
                id: "autoplayStopControls",
                tag: "div",
                cls: "interface-spinSettings_autoplayStopControls_wrapper"
            }),
            a = new Sys.Element({
                id: "autoplayStopControlsHeader",
                tag: "div",
                cls: "interface-spinSettings_autoplayStopControls_header",
                textContent: Services.languageManager.getText(Language.Keys.spinsLeftText, [Services.languageManager.getText(Language.Keys.autoSpins)])
            });
        e.spinsLeftCounter = new Sys.Element({
            id: "autoplayStopControlsSpinsCounter",
            tag: "div",
            cls: "interface-spinSettings_autoplaySelector_value interface-DOMOptionScroller_value_uri",
            textContent: "0"
        }), e.stopButton = new Interface.utils.DOMButton({
            id: "autoplayStopControlsStopButton",
            baseCSS: "interface-desktopControls_Button interface-spinSettings_autoplayStopControls_stopButton interface-interface-desktopControls_Button_uri",
            textContent: Services.languageManager.getText(Language.Keys.autoplay_stopText),
            clickCallback: e.fireEvent.bind(e, "view:stopAutoPlay")
        }), t.add(a), t.add(e.spinsLeftCounter), t.add(e.stopButton.getContainer()), e.container.add(t)
    },
    setUpKeypadButton: function() {
        var e = this,
            t = Sys.applyProperties({
                clickCallback: e.onButtonClick.bind(e)
            }, e.KEYPAD_BUTTON_CONFIG);
        t.buttonLabel.depth = Layering.Game.Slots.Keypad.autoPlay.label, Sys.isDefined(t.buttonLayoutParameters) ? t.buttonLayoutParameters.depth = Layering.Game.Slots.Keypad.autoPlay.button : t.dimensions.depth = Layering.Game.Slots.Keypad.autoPlay.button, e.keypadButton = new Interface.utils.CanvasButton(t), e.keypadPendingDisable.forEach(e.keypadButton.disable.bind(e.keypadButton)), delete e.keypadPendingDisable
    },
    update: function() {
        var e = this,
            t = e.model.readData("autoPlayNrSpins");
        e.model.readData("autoPlayActive") && t > 0 ? (e.spinsLeftCounter.el.textContent = t, e.container.addCls("autoplayActive"), e.menuButton.getContainer().el.textContent = t, e.menuButton.getContainer().addCls("autoplayActive"), e.menuButton.addProperty("active", "autoplayActive"), e.isActive = !0) : e.resetAutoPlay()
    },
    reduceCounter: function(e) {
        var t = this,
            a = 0 !== e ? e : "";
        t.spinsLeftCounter.el.textContent = a, t.menuButton.getContainer().el.textContent = a
    },
    resetAutoPlay: function() {
        var e = this;
        e.isActive && (e.container.removeCls("autoplayActive"), e.menuButton.removeProperty("active", "autoplayActive"), e.menuButton.getContainer().removeCls("autoplayActive"), e.menuButton.getContainer().el.textContent = "", e.isActive = !1, e.deSelectAutoPlayTarget()), e.enableRestrictedControls(), e.enableAdvancedControls()
    },
    enableKeypadButton: function(e) {
        var t, a = this;
        e || (e = "keypadDisabled"), Sys.isDefined(a.keypadButton) ? a.keypadButton.enable(e) : (t = a.keypadPendingDisable.indexOf(e)) >= 0 && a.keypadPendingDisable.splice(t, 1)
    },
    disableKeypadButton: function(e) {
        var t = this;
        e || (e = "keypadDisabled"), Sys.isDefined(t.keypadButton) ? t.keypadButton.disable(e) : t.keypadPendingDisable.contains(e) || t.keypadPendingDisable.push(e)
    },
    showKeypadButton: function(e) {
        Sys.isDefined(this.keypadButton) && this.keypadButton.show(e)
    },
    hideKeypadButton: function(e) {
        Sys.isDefined(this.keypadButton) && this.keypadButton.hide(e)
    },
    toggleFreeRoundControls: function(e) {
        var t = this,
            a = e || [];
        Sys.each(t.ADVANCED_CONFIG_CONTROLS, function(e) {
            a.contains(e.id) || (t.model.readData("freeRoundsActive") ? t.advancedList.disable(e.id) : t.advancedList.enable(e.id))
        })
    },
    onFreeRoundsStateChange: function(e) {
        var t = this,
            a = t.FREEROUND_ACTIVE_CONTROLS;
        t.model.storeData("freeRoundsActive", e), t.toggleFreeRoundControls(a), t.toggleRestrictedControls()
    },
    toggleRestrictedControls: function() {
        var e, t = this,
            a = t.model.readData("freeRoundsActive");
        t.model.readData("isRestrictedModeEnabled") && (e = t.restrictedAdvancedList.getControl("stopAutoplayIfBalanceDecreasedBy")[0], a ? (t.model.storeData("isRestrictedMode", !1), e.checkBox.unlock("autoplay"), e.checkBox.setValue(!1, !1), e.checkBox.lock("autoplay"), t.restrictedAdvancedList.disable("stopAutoplayIfBalanceDecreasedBy"), t.restrictedAdvancedList.hide("stopAutoplayIfBalanceDecreasedBy"), t.restrictedWrapper.addCSSClass("hide")) : (t.model.storeData("isRestrictedMode", !0), e.checkBox.unlock("autoplay"), e.checkBox.setValue(!0, !0), e.checkBox.lock("autoplay"), t.restrictedAdvancedList.enable("stopAutoplayIfBalanceDecreasedBy"), t.restrictedAdvancedList.show("stopAutoplayIfBalanceDecreasedBy"), t.restrictedWrapper.removeCSSClass("hide")))
    },
    disableAdvancedControls: function() {
        var e = this;
        e.ADVANCED_CONFIG_CONTROLS.forEach(function(t) {
            Sys.isDefined(t.withInput) && e.advancedList.disable(t.id)
        })
    },
    enableAdvancedControls: function() {
        var e = this;
        e.ADVANCED_CONFIG_CONTROLS.forEach(function(t) {
            var a = e.model.readData("freeRoundsActive"),
                n = !a && Sys.isDefined(t.withInput),
                i = a && t.withInput && e.FREEROUND_ACTIVE_CONTROLS.contains(t.id);
            (n || i) && e.advancedList.enable(t.id)
        })
    },
    disableRestrictedControls: function() {
        var e = this;
        e.RESTRICTED_CONFIG_CONTROLS.forEach(function(t) {
            e.restrictedAdvancedList.disable(t.id)
        })
    },
    enableRestrictedControls: function() {
        var e = this;
        e.model.readData("freeRoundsActive") || e.RESTRICTED_CONFIG_CONTROLS.forEach(function(t) {
            e.restrictedAdvancedList.enable(t.id)
        })
    }
}, Interface.AutoplaySettingsView = Sys.extend(Interface.StandAloneSettingsSectionView, Interface.AutoplaySettingsView, "Interface.AutoplaySettingsView");
Sys.ns("Interface"), Interface.AutoplaySettingsModel = {
    constructor: function() {
        Interface.AutoplaySettingsModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = this,
            t = [{
                key: "stopAutoplayOnAnyWin",
                defaultValue: !1,
                settingsManager: !0,
                localStorage: !1
            }, {
                key: "stopAutoplayIfBalanceIncreasedBy",
                defaultValue: !1,
                settingsManager: !0,
                localStorage: !1
            }, {
                key: "stopAutoplayIfWinExceeds",
                defaultValue: !1,
                settingsManager: !0,
                localStorage: !1
            }, {
                key: "stopAutoplayIfBalanceDecreasedBy",
                defaultValue: !1,
                settingsManager: !0,
                localStorage: !1
            }];
        Interface.AutoplaySettingsModel.superclass.setupData.apply(e, arguments), e.storeData("isRestrictedModeEnabled", e.readData("isRestrictedMode")), t.forEach(e.initData, e)
    }
}, Interface.AutoplaySettingsModel = Sys.extend(Interface.SpinSettingsBaseModel, Interface.AutoplaySettingsModel, "Interface.AutoplaySettingsModel");
Sys.ns("Interface"), Interface.GameSettings = {
    constructor: function() {
        Interface.GameSettings.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.GameSettingsController,
            model: Interface.GameSettingsModel,
            view: Interface.GameSettingsDesktopView
        }
    }
}, Interface.GameSettings = Sys.extend(Interface.SettingsSection, Interface.GameSettings, "Interface.GameSettings");
Sys.ns("Interface"), Interface.GameSettingsController = {
    LOCAL_STORAGE_SETTINGS: ["showFeatureSplash", "quickSpin", "showIntroMovie", "spacebarToSpin"],
    constructor: function() {
        Interface.GameSettingsController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "notify:settingsManager.settingChanged": e.view.update.bind(e.view),
            "notify:settingsManager.settingDisabled": e.view.hideSetting.bind(e.view),
            "notify:settingsManager.settingEnabled": e.view.showSetting.bind(e.view),
            "notify:settingsManager.settingLocked": e.view.disableSetting.bind(e.view),
            "notify:settingsManager.settingUnlocked": e.view.enableSetting.bind(e.view),
            "notify:stateHandler.leavingIdleState": e.hide,
            "request:gameSettings.close": e.onHideRequest,
            "request:closeOpenWindows": e.onHideRequest,
            "request:gameSettings.toggle": e.onToggle,
            "view:gameHistoryClicked": e.onGameHistoryClicked,
            "view:gameHistory.open": e.passAsRequestEvent
        }), Interface.GameSettingsController.superclass.setupEvents.apply(e, arguments)
    },
    onUserAction: function(e, t) {
        var n = this,
            s = !1;
        n.LOCAL_STORAGE_SETTINGS.contains(e) && (s = !0), this.fireEvent("request:settingsManager.storeData", e, t, s)
    },
    onShowRequest: function() {
        var e = this;
        e.fireEvent("request:autoplaySettings.close"), Interface.GameSettingsController.superclass.onShowRequest.apply(e, arguments)
    },
    onGameHistoryClicked: function() {
        this.model.readData("historyRemoved") || this.model.readData("historyDisabled") || Sys.utils.openURL(Resources.readData("historyUrl"), "gameHistory")
    },
    onToggle: function() {
        var e = this;
        e.model.readData("showing") ? e.hide() : e.show()
    },
    passAsRequestEvent: function() {
        this.fireEvent("request:gameHistory.open")
    }
}, Interface.GameSettingsController = Sys.extend(Interface.SettingsSectionController, Interface.GameSettingsController, "Interface.GameSettingsController");
Sys.ns("Interface"), Interface.GameSettingsModel = {
    constructor: function() {
        Interface.GameSettingsModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = this,
            t = [{
                key: "showFeatureSplash",
                defaultValue: !0,
                settingsManager: !0,
                localStorage: !0
            }, {
                key: "quickSpin",
                defaultValue: !1,
                settingsManager: !0,
                localStorage: !0
            }, {
                key: "showIntroMovie",
                defaultValue: !0,
                settingsManager: !0,
                localStorage: !0
            }, {
                key: "spacebarToSpin",
                defaultValue: !1,
                settingsManager: !0,
                localStorage: !0
            }],
            a = Resources.readData("gameServerInitResponse"),
            o = Resources.readData("queryData").skipIntro;
        t.forEach(e.initData, e), a.playforfun ? e.storeData("historyDisabled", !0) : void 0 === a.historybutton || a.historybutton || e.storeData("historyRemoved", !0), "boolean" == typeof o && e.storeData("introMovieRemoved", o || !1)
    }
}, Interface.GameSettingsModel = Sys.extend(Interface.SettingsSectionModel, Interface.GameSettingsModel, "Interface.GameSettingsModel");
Sys.ns("Interface"), Interface.GameSettingsDesktopView = {
    MENU_BUTTON_CSS: "interface-desktopSettingsMenu_button interface-gameSettings_icon_uri",
    DISABLE_BUTTON_DURING_SPIN: !1,
    SETTINGS_CONTROLS: [{
        id: "quickSpin",
        label: Language.Keys.setting_quickSpinGame,
        type: "checkbox"
    }, {
        id: "showFeatureSplash",
        label: Language.Keys.setting_introScreeGame,
        type: "checkbox"
    }, {
        id: "showIntroMovie",
        label: Language.Keys.setting_introGame,
        type: "checkbox"
    }, {
        id: "spacebarToSpin",
        label: Language.Keys.setting_spaceSpin,
        type: "checkbox"
    }],
    TITLE: Language.Keys.gameSettingsPanelLabel,
    ARROW_LEFT_VALUE: "0.05rem",
    ORDER: 1,
    constructor: function() {
        Interface.GameSettingsDesktopView.superclass.constructor.apply(this, arguments)
    },
    setUpContent: function() {
        var e = this;
        Interface.GameSettingsDesktopView.superclass.setUpContent.apply(e, arguments), e.model.readData("introMovieRemoved") && e.SETTINGS_CONTROLS.forEach(function(t, n) {
            "showIntroMovie" === t.id && e.SETTINGS_CONTROLS.splice(n, 1)
        }), e.settingsList = new Interface.utils.DOMControlList({
            id: "gameSettingsSettingsList",
            controls: e.SETTINGS_CONTROLS,
            callback: e.fireEvent.bind(e, "view:userAction")
        }), e.SETTINGS_CONTROLS.forEach(function(t) {
            e.settingsList.update(t.id, e.model.readData(t.id))
        }), e.container.add(e.settingsList.getContainer()), e.model.readData("historyRemoved") || e.model.readData("historyDisabled") || e.container.add(e.createGameHistoryButton())
    },
    update: function(e, t) {
        this.settingsList.update(e, t)
    },
    hideSetting: function(e) {
        this.settingsList.hide(e)
    },
    showSetting: function(e) {
        this.settingsList.show(e)
    },
    disableSetting: function(e) {
        this.settingsList.disable(e)
    },
    enableSetting: function(e) {
        this.settingsList.enable(e)
    },
    createGameHistoryButton: function() {
        var e = this;
        return e.historyButton = new Interface.utils.DOMButton({
            id: "gameHistoryButton",
            baseCSS: "interface-desktopControls_Button_small interface-desktopGameHistoryButton preventUserSelect interface-interface-desktopControls_Button_small_uri",
            clickCallback: e.openGameHistory.bind(e),
            textContent: Services.languageManager.getText(Language.Keys.gameHistory)
        }), e.historyButton.getContainer()
    },
    openGameHistory: function() {
        this.fireEvent("view:gameHistory.open")
    }
}, Interface.GameSettingsDesktopView = Sys.extend(Interface.StandAloneSettingsSectionView, Interface.GameSettingsDesktopView, "Interface.GameSettingsDesktopView");
Sys.ns("Interface"), Interface.SoundSettings = {
    constructor: function() {
        Interface.SoundSettings.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return {
            fallback: ["userInput", "orientation"],
            desktop: [{
                userInput: {
                    inputEvents: ["start", "end", "cancel", "move", "hover"],
                    listenToUserInput: !0
                }
            }]
        }
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.SoundSettingsController,
            model: Interface.SoundSettingsModel,
            view: Interface.SoundSettingsBaseView
        }
    }
}, Interface.SoundSettings = Sys.extend(Interface.SettingsSection, Interface.SoundSettings, "Interface.SoundSettings");
Sys.ns("Interface"), Interface.SoundSettingsController = {
    constructor: function() {
        Interface.SoundSettingsController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "request:soundSettings.enableVibrationSetting": e.onEnableVibrationSetting,
            "notify:settingsManager.settingChanged": e.onSettingChanged,
            "notify:audioPlayer.loadingSound": e.view.startSoundLoading.bind(e.view),
            "notify:audioPlayer.soundLoaded": e.view.soundLoadedStopLoader.bind(e.view),
            "notify:stateHandler.leavingBeforeLoaderCloseState": e.checkVolumeLevel,
            "view:toggleSound": e.toggleSound
        }), Interface.SoundSettingsController.superclass.setupEvents.apply(e, arguments)
    },
    onUserAction: function(e, t) {
        switch (e) {
            case "audioOn":
                Services.settingsManager.storeSetting("volume", t ? this.model.getPreviousVolume() : 0, !0);
                break;
            case "volume":
                Services.settingsManager.storeSetting("volume", t, !0);
                break;
            case "vibrationOn":
                Services.settingsManager.storeSetting("vibration", t, !0)
        }
    },
    onEnableVibrationSetting: function() {
        this.view.addVibrationToggle()
    },
    onUserInputHover: function(e) {
        this.view.onUserInputHover(e)
    },
    onSettingChanged: function(e, t) {
        "volume" === e ? (this.view.update(t), t > 0 && this.model.storeData("previousVolume", t)) : "vibration" === e && this.view.updateVibration(t)
    },
    checkVolumeLevel: function() {
        var e = Services.settingsManager.getSetting("volume");
        this.view.update(e)
    }
}, Interface.SoundSettingsController = Sys.extend(Interface.SettingsSectionController, Interface.SoundSettingsController, "Interface.SoundSettingsController");
Sys.ns("Interface"), Interface.SoundSettingsModel = {
    constructor: function() {
        Interface.SoundSettingsModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = this;
        e.initData({
            key: "volume",
            defaultValue: Platform.resourceBundle.preloadAudio ? 1 : 0,
            settingsManager: !0,
            localStorage: Platform.resourceBundle.preloadAudio
        }), e.initData({
            key: "vibration",
            defaultValue: !1,
            settingsManager: !0,
            localStorage: !0
        }), e.storeData("previousVolume", 1)
    },
    getPreviousVolume: function() {
        var e = this.readData("previousVolume");
        return Sys.isDefined(e) || (e = 1), e
    }
}, Interface.SoundSettingsModel = Sys.extend(Interface.SettingsSectionModel, Interface.SoundSettingsModel, "Interface.SoundSettingsModel");
Sys.ns("Interface"), Interface.SoundSettingsBaseView = {
    BASE_CSS: "tab interface-soundSettings_base",
    PORTRAIT_CSS: "interface-soundSettings_portrait",
    LANDSCAPE_CSS: "interface-soundSettings_landscape",
    SECTION_CSS: "utils_empty interface-settingsSection_subSection",
    LOAD_ANIMATION_CSS: "interface-smallSpinner_uri",
    constructor: function() {
        Interface.SoundSettingsBaseView.superclass.constructor.apply(this, arguments)
    },
    setUpContent: function() {
        var n = this;
        n.container = new Sys.Element({
            id: "userSettings",
            tag: "div",
            cls: n.BASE_CSS
        }), n.audioOnOffContainer = n.container.add(new Sys.Element({
            id: "soundSettings_soundSettings",
            tag: "div",
            cls: n.SECTION_CSS
        })), n.audioOnOff = new Interface.utils.ToggleSwitch({
            id: "audioOnOff",
            title: Services.languageManager.getText(Language.Keys.setting_gameSound),
            callback: n.onSettingsControllerChanged.bind(n, "audioOn")
        }), n.audioOnOffContainer.add(n.audioOnOff.getContainer()), n.fireEvent("view:addToContainer", "settingsWindow", {
            title: Services.languageManager.getText(Language.Keys.soundSettings_uc),
            content: n.container
        }), n.fireEvent("view:addToNavigator", "settingsMenu", {
            order: 1
        }), n.subComponents = [n.audioOnOff], n.addScrolling(), n.model.readData("disabled") || n.enable(), n.hide()
    },
    addVibrationToggle: function() {
        var n = this;
        n.vibrationOnOffContainer = n.container.add(new Sys.Element({
            id: "soundSettings_soundSettings",
            tag: "div",
            cls: n.SECTION_CSS
        })), n.vibrationOnOff = new Interface.utils.ToggleSwitch({
            id: "vibrationOnOff",
            title: Services.languageManager.getText(Language.Keys.setting_gameVibration),
            callback: n.onSettingsControllerChanged.bind(n, "vibrationOn")
        }), n.vibrationOnOffContainer.add(n.vibrationOnOff.getContainer()), n.subComponents.push(n.vibrationOnOff), n.vibrationOnOff.enable(), n.updateVibration(Services.settingsManager.getSetting("vibration"))
    },
    onSettingsControllerChanged: function(n, e) {
        this.fireEvent("view:userAction", n, e)
    },
    enable: function() {
        this.callFunctionOnSubComponents("enable")
    },
    disable: function() {
        this.callFunctionOnSubComponents("disable")
    },
    update: function(n) {
        this.audioOnOff.toggle(n > 0)
    },
    updateVibration: function(n) {
        this.vibrationOnOff.toggle(n)
    },
    startSoundLoading: function() {
        var n = this;
        n.audioOnOff.displayLoadAnimation(), n.disable(), n.update(Services.settingsManager.getSetting("volume"))
    },
    soundLoadedStopLoader: function() {
        this.enable(), this.update(Services.settingsManager.getSetting("volume")), this.audioOnOff.hideLoadAnimation()
    }
}, Interface.SoundSettingsBaseView = Sys.extend(Interface.SettingsSectionView, Interface.SoundSettingsBaseView, "Interface.SoundSettingsBaseView");
Sys.ns("Interface"), Interface.SoundSettingsDesktopView = {
    WRAPPER_CSS: "interface-soundSettingsDesktop_sliderWrapper",
    BASE_CSS: "interface-soundSettingsDesktop_sliderBase interface-standAloneSettingsSectionMiddle_uri",
    BUTTON_CSS: "interface-desktopSettingsMenu_button interface-soundSettings_audioOn_icon_uri",
    BUTTON_OFF_CSS: "interface-soundSettings_audioOff_icon_uri",
    LOAD_ANIMATION_CSS: "interface-soundSettingsDesktop_spinner interface-smallSpinner_uri hidden",
    CLOSE_ANIMATION_CSS: "interface-soundSettingsDesktop_closeTransition",
    constructor: function() {
        Interface.SoundSettingsDesktopView.superclass.constructor.apply(this, arguments)
    },
    addVibrationToggle: function() {},
    onUserInputStart: function(e) {},
    onUserInputMove: function() {},
    onUserInputEnd: function(e) {},
    onUserInputHover: function(e) {
        var n = this;
        Sys.UserInputUtils.isCoordinateTarget(n.container.el, e) || Sys.UserInputUtils.isCoordinateTarget(n.menuButton.el, e) ? (n.menuButton.addCls("hover"), n.open()) : (n.menuButton.removeCls("hover"), n.close())
    },
    show: function() {
        this.open()
    },
    hide: function() {
        this.close()
    },
    open: function() {
        var e = this;
        e.wrapper.removeCls(e.CLOSE_ANIMATION_CSS), e.isOpen = !0, e.model.readData("disabled") || e.volume.enable()
    },
    close: function() {
        var e = this;
        e.wrapper.addCls(e.CLOSE_ANIMATION_CSS), e.volume && e.volume.disable(), e.isOpen = !1
    },
    setUpContent: function() {
        var e = this;
        e.wrapper = new Sys.Element({
            id: "soundSettingsWrapper",
            tag: "div",
            cls: e.WRAPPER_CSS,
            renderTo: "gameWrapper"
        }), e.container = e.wrapper.add(new Sys.Element({
            id: "soundSettings",
            tag: "div",
            cls: e.BASE_CSS
        })), e.menuButton = new Sys.Element({
            id: "soundSettingsButton",
            tag: "div",
            cls: e.BUTTON_CSS
        }), e.abstractButton = new Interface.AbstractButton({
            dimensions: e.menuButton.el,
            clickCallback: e.toggle.bind(e)
        }), e.volume = new Interface.utils.VerticalSlider({
            id: "soundVolumeSlider",
            minValue: 0,
            maxValue: 1,
            valueStep: .05,
            startValue: Services.settingsManager.getSetting("volume"),
            callback: e.fireEvent.bind(e, "view:userAction", "volume"),
            ascendingGrowth: !0,
            showDisplay: !1,
            callbackOnlyOnEndEvent: !1
        }), e.loadAnimation = e.container.add(new Sys.Element({
            id: "soundSettings_loadAnimation",
            tag: "div",
            cls: e.LOAD_ANIMATION_CSS
        })), e.container.add(e.volume.getContainer()), e.fireEvent("view:addToNavigator", "desktopSettingsMenu", {
            order: 1,
            element: e.menuButton
        }), e.update(Services.settingsManager.getSetting("volume")), e.hide()
    },
    toggle: function() {
        this.fireEvent("view:userAction", "audioOn", 0 === Services.settingsManager.getSetting("volume"))
    },
    enable: function() {
        var e = this;
        e.abstractButton.enable("sectionDisabled"), e.volume.enable()
    },
    disable: function() {
        var e = this;
        e.abstractButton.disable("sectionDisabled"), e.volume.disable()
    },
    startSoundLoading: function() {
        this.disable(), this.loadAnimation.el.style.display = "block"
    },
    soundLoadedStopLoader: function() {
        this.enable(), this.loadAnimation.el.style.display = "none"
    },
    update: function(e) {
        var n = this;
        n.volume.enabled || n.enable(), n.menuButton.removeCls(n.BUTTON_OFF_CSS), e > 0 || n.menuButton.addCls(n.BUTTON_OFF_CSS), n.volume.moveSlider(e)
    },
    removeSetting: function() {}
}, Interface.SoundSettingsDesktopView = Sys.extend(Core.View, Interface.SoundSettingsDesktopView, "Interface.SoundSettingsDesktopView");
Sys.ns("Core"), Core.Trigger = {
    constructor: function() {
        Core.Trigger.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.TriggerModel,
            controller: Core.TriggerController
        }
    }
}, Core.Trigger = Sys.extend(Core.Module, Core.Trigger, "Core.Trigger"), Resources.storeData("triggerScripts", {});
Sys.ns("Core"), Core.TriggerController = {
    constructor: function() {
        Core.TriggerController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:platform.visibilityChanged": this.onPageVisibilityChanged,
            "notify:moduleLoader.finishedLoadingModules": this.onFinishedLoadingModules,
            "notify:audioPlayer.soundPlayable": this.onSoundReady
        })
    },
    onFinishedLoadingModules: function() {
        var e = Resources.readData("config") || {};
        Utils.Platform.isWebAudioAPISupported() && e.enableWADE && this.fireEvent("request:audioPlayer.disableEventInteractions"), this.fireEvent("notify:trigger.ready")
    },
    onSoundReady: function() {
        this.model.storeData("audioReady", !0)
    },
    onPageVisibilityChanged: function(e) {},
    registerTrigger: function(e, i, r) {
        var t = this;
        this.addListener(e, function() {
            t.executeTrigger.apply(t, [e].concat(Array.prototype.slice.call(arguments)))
        }), this.model.registerTrigger(e, i, r)
    },
    executeTrigger: function(e) {
        var i, r, t, o, n = this.model.getScriptsLinkedToTrigger(e),
            s = Array.prototype.slice.call(arguments, 1);
        if (Utils.Platform.isWebAudioAPISupported() && this.model.readData("audioReady"))
            for (t = 0, o = n.length; t < o; t++) r = n[t], i = this.determineExecutionEnvironment(e, r.type), r.script.apply(i.scope, s)
    },
    listTriggers: function() {
        return Object.keys(this.model.getTriggers())
    },
    listLinkedTriggers: function() {
        return this.model.getLinkedTriggers()
    },
    getTriggerDescription: function(e) {
        return this.model.getTriggerDescription(e)
    },
    getScript: function(e) {
        return Resources.readData("triggerScripts")[e].script.toString()
    },
    getScriptsLinkedToTrigger: function(e) {
        return this.model.getScriptsLinkedToTrigger(e)
    },
    getScriptNamesLinkedToTrigger: function(e) {
        return this.model.getScriptNamesLinkedToTrigger(e)
    },
    linkScriptToTrigger: function(e, i) {
        this.model.linkScriptToTrigger(e, i)
    },
    unlinkScriptAndTrigger: function(e, i) {
        this.model.unlinkScriptAndTrigger(e, i)
    },
    determineExecutionEnvironment: function(e, i) {
        var r = {
            args: []
        };
        switch (i) {
            case "audio":
                r.scope = Audio.Engine;
                break;
            case "animation":
                r.scope = {};
                break;
            default:
                r.scope = [this.model.getTriggerScope(e)]
        }
        return r
    }
}, Core.TriggerController = Sys.extend(Core.Controller, Core.TriggerController, "Core.TriggerController");
Sys.ns("Core"), Core.TriggerModel = {
    constructor: function() {
        Core.TriggerModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        this.storeData("triggers", {}), this.storeData("scriptLookup", this.initializeScriptLookup())
    },
    initializeScriptLookup: function() {
        var r, t, e, i, s = Resources.readData("triggerScripts") || {},
            o = Object.keys(s),
            n = o.length,
            a = {};
        for (e = -1; ++e < n;)
            for (r = o[e], t = s[r], i = -1; ++i < t.usedOn.length;) Sys.isDefined(a[t.usedOn[i]]) || (a[t.usedOn[i]] = []), a[t.usedOn[i]].push(r);
        return a
    },
    registerTrigger: function(r, t, e) {
        this.readData("triggers")[r] = {
            description: e,
            defaultScope: t
        }
    },
    getTriggers: function() {
        return this.readData("triggers")
    },
    hasTrigger: function(r) {
        return this.readData("triggers").hasOwnProperty(r)
    },
    getLinkedTriggers: function() {
        return Object.keys(this.readData("scriptLookup"))
    },
    getTriggerDescription: function(r) {
        var t = this.readData("triggers")[r];
        return Sys.isObj(t) ? t.description : null
    },
    getTriggerScope: function(r) {
        var t = this.readData("triggers")[r];
        return Sys.isObj(t) ? t.defaultScope : null
    },
    getScriptNamesLinkedToTrigger: function(r) {
        return this.readData("scriptLookup")[r] || []
    },
    getScriptsLinkedToTrigger: function(r) {
        var t = Resources.readData("triggerScripts");
        return this.getScriptNamesLinkedToTrigger(r).map(function(r) {
            return t[r]
        })
    },
    linkScriptToTrigger: function(r, t) {
        var e = this.readData("scriptLookup");
        Sys.isArray(e[t]) || (e[t] = []), e[t].contains(r) || e[t].push(r), this.storeData("scriptLookup", e)
    },
    unlinkScriptAndTrigger: function(r, t) {
        var e, i = this.readData("scriptLookup"),
            s = i[t];
        Sys.isArray(s) && (e = s.indexOf(r)) >= 0 && s.splice(e, 1), this.storeData("scriptLookup", i)
    }
}, Core.TriggerModel = Sys.extend(Core.Model, Core.TriggerModel, "Core.TriggerModel");
Sys.ns("Core"), Core.SlowRequestAnimation = {
    constructor: function() {
        Core.SlowRequestAnimation.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.SlowRequestAnimationModel,
            view: Core.SlowRequestAnimationView,
            controller: Core.SlowRequestAnimationController
        }
    },
    getMixinDependencies: function() {
        return ["orientation"]
    }
}, Core.SlowRequestAnimation = Sys.extend(Core.Module, Core.SlowRequestAnimation, "Core.SlowRequestAnimation");
Sys.ns("Core"), Core.SlowRequestAnimationModel = {
    constructor: function() {
        Core.SlowRequestAnimationModel.superclass.constructor.apply(this, arguments), this.initModel()
    },
    initModel: function() {
        var t = this;
        t.storeData("timeConfig", {
            between: 300,
            slowConnectionTime: 1e4,
            slowDialogTime: 3e4
        }), t.storeData("activeStack", []), t.storeData("requestConfig", t.getRequestConfig()), t.storeData("dialogShowing", !1), t.setState("idle")
    },
    updateActiveStack: function(t) {
        var e = this,
            o = this.readData("activeStack"),
            i = o.indexOf(t);
        return i > -1 && (o.splice(i, 1), e.storeData("activeStack", o)), o
    },
    pushActive: function(t) {
        var e = this,
            o = e.readData("activeStack");
        o.push(t), e.storeData("activeStack", o)
    },
    getRequestConfig: function() {
        return ["spin", "drop", "freespin", "respin", "freespininit", "initbonus", "bonusaction"]
    },
    removeSlowTimeout: function() {
        var t = this.readData("slowTimeout");
        t && (clearTimeout(t), this.removeData("slowTimeout"))
    },
    removeDialogTimeout: function() {
        var t = this.readData("dialogTimeout");
        t && (this.storeData("dialogShowing", !1), clearTimeout(t), this.removeData("dialogTimeout"))
    },
    getSlowConnectionTimeout: function() {
        return this.readData("slowTimeout")
    },
    getDialogTimeout: function() {
        return this.readData("dialogTimeout")
    },
    storeDialogTimeout: function(t) {
        var e = this,
            o = e.readData("dialogTimeout");
        o ? (clearTimeout(o), e.storeData("dialogTimeout", t)) : e.storeData("dialogTimeout", t)
    },
    storeSlowConnectionTimeout: function(t) {
        var e = this,
            o = e.readData("slowTimeout");
        o ? (clearTimeout(o), e.storeData("slowTimeout", t)) : e.storeData("slowTimeout", t)
    }
}, Core.SlowRequestAnimationModel = Sys.extend(Core.Model, Core.SlowRequestAnimationModel, "Core.SlowRequestAnimationModel");
Sys.ns("Core"), Core.SlowRequestAnimationController = {
    constructor: function() {
        Core.SlowRequestAnimationController.superclass.constructor.apply(this, arguments), this.initController()
    },
    initController: function() {
        var e = this;
        e.on({
            "view:showDialog": e.onShowDialog,
            "view:dialogContinue": e.onDialogContinueOption,
            "view:setSafeArea": e.fireEvent.bind(e, "request:fullscreen.setSafeArea"),
            "view:dialogBoxClosed": e.onDialogBoxClosed,
            "notify:stateHandler.leavingBeforeLoaderCloseState": e.onLoaderClose,
            "notify:serverManager.actionRequestSent": e.onServerRequest,
            "notify:serverManager.actionRequestError": e.tryToHideAnimation,
            "notify:serverManager.slowRequest": e.onSlowResponse,
            "notify:responseParser.responseParsed": e.onServerResponse,
            "request:slowRequestAnimation.show": e.showSpinnerAnimation,
            "request:slowRequestAnimation.hide": e.hideSpinnerAnimation
        })
    },
    onLoaderClose: function() {
        this.view.initView()
    },
    onShowDialog: function(e) {
        var i = this;
        i.fireEvent("request:dialogWindow.showDialog", e), i.model.storeData("dialogShowing", !0)
    },
    animationRequested: function() {
        var e = this;
        e.model.isState("active") && (e.view.display({
            modal: !1
        }), e.model.setState("running"))
    },
    showSpinnerAnimation: function() {
        this.fireEvent("request:userInputManager.activateExclusivity", "slowRequestAnimation"), this.view.addOverlay(), this.view.showSpinner()
    },
    hideSpinnerAnimation: function() {
        this.fireEvent("request:userInputManager.deactivateExclusivity", "slowRequestAnimation"), this.view.removeOverlay(), this.view.hideSpinner()
    },
    onServerRequest: function(e) {
        var i = this;
        i.model.readData("requestConfig").contains(e) && i.model.isState("idle") && (i.model.setState("active"), i.model.pushActive(e))
    },
    onSlowResponse: function() {
        this.animationRequested()
    },
    onServerResponse: function(e) {
        Sys.isDefined(e) && Sys.isDefined(e.clientaction) && this.tryToHideAnimation(e.clientaction)
    },
    tryToHideAnimation: function(e) {
        var i, o = this,
            n = o.model;
        (n.isState("running") || n.isState("active")) && (i = n.updateActiveStack(e), i.length > 0 || (o.model.readData("dialogShowing") && o.fireEvent("request:dialogWindow.closeCurrentDialog"), o.view.hideWrapper(), o.view.resetSlowMessage(), o.view.resetDialogMessage(!1), n.setState("idle")))
    },
    onDialogContinueOption: function() {
        this.view.resetDialogMessage(!0)
    },
    onDialogBoxClosed: function(e) {
        this.fireEvent("notify:dialogBoxClosed", e)
    }
}, Core.SlowRequestAnimationController = Sys.extend(Core.Controller, Core.SlowRequestAnimationController, "Core.SlowRequestAnimationController");
Sys.ns("Core.Slots"), Core.SlowRequestAnimationView = {
    BASE_CSS: "interface-slowRequestAnimation _base",
    PORTRAIT_CSS: "interface-slowRequestAnimation _portrait",
    LANDSCAPE_CSS: "interface-slowRequestAnimation _landscape",
    PIXEL_FACTOR: .01,
    constructor: function() {
        Core.SlowRequestAnimationView.superclass.constructor.apply(this, arguments)
    },
    initView: function() {
        var e = this;
        e.hasOverlay = !1, e.setupElements()
    },
    removeOverlay: function() {
        var e = this,
            t = e.getLayoutConfig().background,
            i = e.getLayoutConfig().animation;
        e.background.el.style.top = t.top * e.PIXEL_FACTOR + "rem", e.background.el.style.left = t.left * e.PIXEL_FACTOR + "rem", e.background.el.style.width = t.width * e.PIXEL_FACTOR + "rem", e.background.el.style.height = t.height * e.PIXEL_FACTOR + "rem", e.background.el.style.borderRadius = "0", e.background.el.style.zIndex = 340, e.animation.el.style.top = i.top * e.PIXEL_FACTOR + "rem", e.animation.el.style.left = i.left * e.PIXEL_FACTOR + "rem", e.hasOverlay = !1
    },
    addOverlay: function() {
        var e = this,
            t = e.getLayoutConfig().overlayConfig.background,
            i = e.getLayoutConfig().overlayConfig.animation;
        e.background.el.style.top = t.top * e.PIXEL_FACTOR + "rem", e.background.el.style.left = t.left * e.PIXEL_FACTOR + "rem", e.background.el.style.width = t.width * e.PIXEL_FACTOR + "rem", e.background.el.style.height = t.height * e.PIXEL_FACTOR + "rem", e.background.el.style.borderRadius = "0", e.background.el.style.zIndex = 340, e.animation.el.style.top = i.top * e.PIXEL_FACTOR + "rem", e.animation.el.style.left = i.left * e.PIXEL_FACTOR + "rem", e.hasOverlay = !0
    },
    onPortrait: function() {
        var e = this;
        Mixins.orientation.view.methods.onPortrait.call(e), e.hasOverlay && e.addOverlay()
    },
    onLandscape: function() {
        var e = this;
        Mixins.orientation.view.methods.onLandscape.call(e), e.hasOverlay && e.addOverlay()
    },
    getLayoutConfig: function() {
        var e = {
                width: 960,
                height: 540
            },
            t = Environment.determineResolution().virtualResolution.height;
        return {
            overlayConfig: {
                background: {
                    top: 0 - Environment.getSpaceAboveGame(),
                    left: 0,
                    width: e.width,
                    height: t / Services.scaling.getScale() + Environment.getSpaceBelowGame()
                },
                animation: {
                    top: (t - 310) / 2 + Environment.getSpaceAboveGame(),
                    left: e.width / 2 - 105
                }
            },
            wrapper: {
                top: 0,
                left: 0
            },
            background: {
                top: e.height / 2 - 90,
                left: e.width / 2 - 105,
                width: 210,
                height: 180
            },
            animation: {
                top: e.height / 2 - 90,
                left: e.width / 2 - 188,
                width: 210,
                height: 180
            },
            textArea: {
                top: 130,
                left: 0,
                width: 0,
                height: 80
            },
            guiArea: {
                top: 410,
                left: 0,
                width: 0,
                height: 100
            }
        }
    },
    setupBackgroundArea: function(e) {
        var t = this,
            i = e || t.getLayoutConfig();
        return new Sys.Element({
            tag: "div",
            id: "slowRequestAnimation",
            cls: "slowRequestAnimation background",
            style: "top:" + i.background.top * t.PIXEL_FACTOR + "rem;left:" + i.background.left * t.PIXEL_FACTOR + "rem;width:" + i.background.width * t.PIXEL_FACTOR + "rem;height:" + i.background.height * t.PIXEL_FACTOR + "rem;"
        })
    },
    getDialogConfig: function() {
        var e = this;
        return {
            slowDialog: {
                title: Services.languageManager.getText(Language.Keys.connectionQualityPoor),
                text: Services.languageManager.getText(Language.Keys.slowConnection),
                buttons: [{
                    text: Services.languageManager.getText(Language.Keys.btn_casino),
                    action: function() {
                        e.fireEvent("view:dialogBoxClosed", {
                            name: "slowRequestAnimation",
                            button: "home"
                        }), Sys.utils.goToLobby("9")
                    }
                }, {
                    text: Services.languageManager.getText(Language.Keys.btn_continue),
                    action: function() {
                        e.fireEvent("view:dialogBoxClosed", {
                            name: "slowRequestAnimation",
                            button: "continue"
                        }), e.fireEvent("view:dialogContinue")
                    }
                }]
            }
        }
    },
    setupAnimationArea: function(e) {
        var t = this,
            i = e || this.getLayoutConfig();
        return new Sys.Element({
            tag: "div",
            cls: "slowRequestAnimation loadAnimation animation slowRequestAnimation_uri",
            style: "width:" + i.animation.width * t.PIXEL_FACTOR + "rem;height:" + i.animation.height * t.PIXEL_FACTOR + "rem;"
        })
    },
    setupTextArea: function(e) {
        var t, i = this,
            n = e || this.getLayoutConfig();
        return i.textSpan = new Sys.Element({
            tag: "span",
            textContent: Services.languageManager.getText(Language.Keys.slowConnection)
        }), t = new Sys.Element({
            tag: "div",
            cls: "slowRequestAnimation text hide",
            style: "left:" + n.textArea.left * i.PIXEL_FACTOR + "rem;width:100%;min-height:" + n.textArea.height * i.PIXEL_FACTOR + "rem;"
        }), t.add(i.textSpan), t
    },
    setupElements: function() {
        var e = this,
            t = e.getLayoutConfig();
        e.wrapper = new Sys.Element({
            tag: "div",
            id: "slowRequestAnimation",
            cls: "slowRequestAnimation wrapper hide",
            style: "top:" + t.wrapper.top * e.PIXEL_FACTOR + "rem;left:" + t.wrapper.left * e.PIXEL_FACTOR + "rem;width: 100%;height: 100%;",
            renderTo: "gameWrapper"
        }), e.background = e.setupBackgroundArea(t), e.animation = e.setupAnimationArea(t), e.textArea = e.setupTextArea(t), e.background.add(e.animation), e.wrapper.add(e.background), e.wrapper.add(e.textArea), e.container = e.wrapper, e.fireEvent("view:setSafeArea", "slowRequestAnimation", {
            element: e.container.getEl()
        })
    },
    setupRequestDialogTimeout: function() {
        var e, t = this,
            i = t.model.readData("timeConfig").slowDialogTime;
        e = setTimeout(function() {
            t.requestSlowDialog()
        }, i), t.model.storeDialogTimeout(e)
    },
    requestSlowDialog: function() {
        var e = this,
            t = e.getDialogConfig().slowDialog;
        e.model.isState("running") && (e.hideSpinner(), e.hideText(), e.fireEvent("view:showDialog", t))
    },
    onShowSlowConnection: function() {
        this.showText()
    },
    display: function(e) {
        var t, i, n = this;
        return e.modal && n.wrapper.addCls("modal"), n.wrapper.removeCls("hide"), e.modal || (i = n.model.readData("timeConfig").slowConnectionTime, t = setTimeout(function() {
            n.onShowSlowConnection(), n.setupRequestDialogTimeout()
        }, i), n.model.storeSlowConnectionTimeout(t)), !0
    },
    resetSlowMessage: function() {
        var e = this;
        e.model.getSlowConnectionTimeout() && (e.model.removeSlowTimeout(), e.hideText())
    },
    resetDialogMessage: function(e) {
        var t = this;
        t.model.getDialogTimeout() && (t.model.removeDialogTimeout(), e && t.model.isState("running") && (t.showSpinner(), t.showText(), t.setupRequestDialogTimeout()))
    },
    showSpinner: function() {
        this.wrapper.removeCls("hide")
    },
    hideSpinner: function() {
        this.hideWrapper()
    },
    hideWrapper: function() {
        this.wrapper.addCls("hide")
    },
    hideText: function() {
        this.textArea.addCls("hide")
    },
    showText: function() {
        this.textArea.removeCls("hide")
    }
}, Core.SlowRequestAnimationView = Sys.extend(Core.View, Core.SlowRequestAnimationView, "Core.SlowRequestAnimationView");
Sys.ns("Core"), Core.SlowRequestAnimationDesktopView = {
    constructor: function() {
        Core.SlowRequestAnimationDesktopView.superclass.constructor.apply(this, arguments)
    },
    setupRequestDialogTimeout: function() {}
}, Core.SlowRequestAnimationDesktopView = Sys.extend(Core.SlowRequestAnimationView, Core.SlowRequestAnimationDesktopView, "Core.SlowRequestAnimationDesktopView");
Sys.ns("Interface"), Interface.HomeButton = {
    constructor: function() {
        Interface.HomeButton.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["orientation", {
            userInput: {
                listenToUserInput: !0
            }
        }]
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.HomeButtonController,
            model: Core.Model,
            view: Interface.HomeButtonBaseView
        }
    }
}, Interface.HomeButton = Sys.extend(Core.Module, Interface.HomeButton, "Interface.HomeButton");
Sys.ns("Interface"), Interface.HomeButtonController = {
    constructor: function() {
        Interface.HomeButtonController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        Interface.HomeButtonController.superclass.setupEvents.apply(this, arguments), e.on({
            "view:setSafeArea": e.fireEvent.bind(e, "request:fullscreen.setSafeArea"),
            "notify:stateHandler.leavingBeforeLoaderCloseState": e.onLoaderClose,
            "notify:settingsMenu.open": e.view.hide.bind(e.view),
            "notify:settingsMenu.closed": e.view.show.bind(e.view),
            "request:homeButton.hidePermanently": e.hidePermanently
        })
    },
    onLoaderClose: function() {
        var e = this;
        e.view.show(), e.view.setFullscreenSafeArea()
    },
    hidePermanently: function() {
        this.model.storeData("hiddenPermanently", !0), this.view.hide()
    },
    onUserInputStart: function(e) {
        this.view.isInputTarget(e) && this.model.storeData("activeInputTarget", !0)
    },
    onUserInputEnd: function(e) {
        var t = this,
            n = Resources.readData("lobbyUrl");
        t.model.readData("activeInputTarget") && t.view.isInputTarget(e) && (Sys.isDefined(n) && "" !== n && t.fireEvent("request:slowRequestAnimation.show"), Sys.utils.goToLobby("0")), t.model.storeData("activeInputTarget", !1)
    }
}, Interface.HomeButtonController = Sys.extend(Core.Controller, Interface.HomeButtonController, "Interface.HomeButtonController");
Sys.ns("Interface"), Interface.HomeButtonBaseView = {
    BASE_BUTTON_CSS: "interface-homeButton_baseButton",
    PORTRAIT_CSS: "interface-homeButton_portraitBase",
    LANDSCAPE_CSS: "interface-homeButton_landscapeBase",
    URI_BUTTON: "interface-homeButton_button_uri",
    RENDER_TARGET: "gameWrapper",
    constructor: function() {
        Interface.HomeButtonBaseView.superclass.constructor.apply(this, arguments)
    },
    adaptToOrientation: function(e) {
        this.setStyle(e)
    },
    init: function() {
        var e = this;
        Interface.HomeButtonBaseView.superclass.init.apply(e, arguments), e.container = new Sys.Element({
            id: "homeButton",
            tag: "div",
            cls: e.BASE_BUTTON_CSS,
            renderTo: e.RENDER_TARGET,
            style: "display: none;"
        })
    },
    setFullscreenSafeArea: function() {
        var e = this;
        e.fireEvent("view:setSafeArea", "homeButton", {
            element: e.container.getEl()
        })
    },
    show: function() {
        var e = this,
            t = e.container;
        e.model.readData("hiddenPermanently") || (t.el.style.display = "block", t.hasCls(e.URI_BUTTON) || t.addCls(e.URI_BUTTON))
    },
    hide: function() {
        this.container.el.style.display = "none"
    },
    isInputTarget: function(e) {
        return Sys.UserInputUtils.isCoordinateTarget(this.container.el, e)
    },
    setStyle: function(e) {
        var t = this,
            n = e + "_CSS",
            a = "LANDSCAPE" === e ? "PORTRAIT_CSS" : "LANDSCAPE_CSS";
        Sys.isDefined(t[n]) && (t.container.removeCls(t[a]), t.container.addCls(t[n]))
    }
}, Interface.HomeButtonBaseView = Sys.extend(Core.View, Interface.HomeButtonBaseView, "Interface.HomeButtonBaseView");
Sys.ns("Interface"), Interface.HomeButtonMobileView = {
    PORTRAIT_CSS: "interface-homeButton_portraitBase_mobile",
    LANDSCAPE_CSS: "interface-homeButton_landscapeBase_mobile",
    constructor: function() {
        Interface.HomeButtonMobileView.superclass.constructor.apply(this, arguments)
    }
}, Interface.HomeButtonMobileView = Sys.extend(Interface.HomeButtonBaseView, Interface.HomeButtonMobileView, "Interface.HomeButtonMobileView");
Sys.ns("Interface"), Interface.SoundOnOffButton = {
    constructor: function() {
        Interface.SoundOnOffButton.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["orientation", {
            userInput: {
                listenToUserInput: !0
            }
        }, {
            properties: {
                updateOnStartup: !0
            }
        }]
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.SoundOnOffButtonController,
            model: Core.Model,
            view: Interface.SoundOnOffButtonBaseView
        }
    }
}, Interface.SoundOnOffButton = Sys.extend(Core.Module, Interface.SoundOnOffButton, "Interface.SoundOnOffButton");
Sys.ns("Interface"), Interface.SoundOnOffButtonController = {
    constructor: function() {
        Interface.SoundOnOffButtonController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var n = this;
        n.on({
            "notify:audioPlayer.loadingSound": n.loadingSound,
            "notify:audioPlayer.soundLoaded": n.soundFinishedLoading,
            "notify:settingsMenu.open": n.onSettingsMenuOpened,
            "notify:settingsMenu.closed": n.onSettingsMenuClosed,
            "notify:settingsManager.settingChanged": n.onSettingChanged
        })
    },
    loadingSound: function() {
        this.model.storeData("soundIsLoading", !0), this.addProperty("soundLoading", this.MODULE_NAME)
    },
    soundFinishedLoading: function() {
        this.model.storeData("soundIsLoading", !1), this.removeProperty("soundLoading", this.MODULE_NAME)
    },
    onSettingsMenuOpened: function() {
        this.addProperty("hidden", "settingsMenuOpen")
    },
    onSettingsMenuClosed: function() {
        this.removeProperty("hidden", "settingsMenuOpen")
    },
    onUserInputStart: function(n) {
        this.model.readData("soundIsLoading") || this.model.storeData("isInputTarget", this.view.isTarget(n))
    },
    onUserInputEnd: function(n) {
        this.model.readData("soundIsLoading") || this.view.isTarget(n) && this.model.readData("isInputTarget") && Services.settingsManager.storeSetting("volume", Services.settingsManager.getSetting("volume") > 0 ? 0 : 1)
    },
    onSettingChanged: function(n) {
        "volume" === n && this.updateAppearance()
    },
    updateAppearance: function() {
        this.view.update()
    }
}, Interface.SoundOnOffButtonController = Sys.extend(Core.Controller, Interface.SoundOnOffButtonController, "Interface.SoundOnOffButtonController");
Sys.ns("Interface"), Interface.SoundOnOffButtonBaseView = {
    BASE_BUTTON_CSS: "interface-soundOnOffButton_baseButton",
    PORTRAIT_CSS: "interface-soundOnOffButton_portrait",
    LANDSCAPE_CSS: "interface-soundOnOffButton_landscape",
    ON_URI: "interface-soundOnOffButton_on_uri",
    OFF_URI: "interface-soundOnOffButton_off_uri",
    LOADING_URI: "interface-smallSpinner_uri",
    RENDER_TARGET: "gameWrapper",
    constructor: function() {
        Interface.SoundOnOffButtonBaseView.superclass.constructor.apply(this, arguments)
    },
    adaptToOrientation: function(n) {
        this.setStyle(n)
    },
    init: function() {
        var n = this;
        Interface.SoundOnOffButtonBaseView.superclass.init.apply(n, arguments), n.container = new Sys.Element({
            id: "soundOnOffButton",
            tag: "div",
            cls: n.BASE_BUTTON_CSS,
            renderTo: n.RENDER_TARGET
        })
    },
    isTarget: function(n) {
        return Sys.UserInputUtils.isCoordinateTarget(this.container.el, n)
    },
    setStyle: function(n) {
        var e = this,
            t = n + "_CSS",
            s = "LANDSCAPE" === n ? "PORTRAIT_CSS" : "LANDSCAPE_CSS";
        Sys.isDefined(e[t]) && (e.container.removeCls(e[s]), e.container.addCls(e[t]))
    },
    update: function() {
        var n = this,
            e = n.model,
            t = n.container;
        e.hasProperty("hidden") ? t.el.style.display = "none" : t.el.style.display = "block", t.removeCSSClass(n.ON_URI), t.removeCSSClass(n.OFF_URI), t.removeCSSClass(n.LOADING_URI), e.hasProperty("soundLoading") ? t.addCSSClass(n.LOADING_URI) : Services.settingsManager.getSetting("volume") > 0 ? t.addCSSClass(n.ON_URI) : t.addCSSClass(n.OFF_URI)
    }
}, Interface.SoundOnOffButtonBaseView = Sys.extend(Core.View, Interface.SoundOnOffButtonBaseView, "Interface.SoundOnOffButtonBaseView");
Sys.ns("Interface"), Interface.SoundOnOffButtonMobileView = {
    PORTRAIT_CSS: "interface-soundOnOffButton_portrait_mobile",
    LANDSCAPE_CSS: "interface-soundOnOffButton_landscape_mobile",
    constructor: function() {
        Interface.SoundOnOffButtonMobileView.superclass.constructor.apply(this, arguments)
    }
}, Interface.SoundOnOffButtonMobileView = Sys.extend(Interface.SoundOnOffButtonBaseView, Interface.SoundOnOffButtonMobileView, "Interface.SoundOnOffButtonMobileView");
Sys.ns("Interface"), Interface.AutoPlayButton = {
    constructor: function() {
        Interface.AutoPlayButton.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return {
            fallback: ["orientation", "userInput", "properties"],
            desktop: [{
                userInput: {
                    inputEvents: ["start", "end", "cancel", "move", "hover"]
                }
            }, "properties"]
        }
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.AutoPlayButtonController,
            model: Interface.AutoPlayButtonModel,
            view: Interface.AutoPlayButtonBaseView
        }
    }
}, Interface.AutoPlayButton = Sys.extend(Core.Module, Interface.AutoPlayButton, "Interface.AutoPlayButton");
Sys.ns("Interface"), Interface.AutoPlayButtonController = {
    constructor: function() {
        Interface.AutoPlayButtonController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.model.hasAutoplayCeased() || (Interface.AutoPlayButtonController.superclass.setupEvents.apply(this, arguments), this.on({
            "notify:stateHandler.leavingBeforeLoaderCloseState": this.onBeforeLoaderClose,
            "notify:stateHandler.leavingIdleState": this.hide,
            "notify:stateHandler.enteringIdleState": this.show,
            "notify:settingsManager.settingChanged": this.onSettingChanged,
            "notify:settingsManager.settingDisabled": this.settingDisabled,
            "notify:settingsManager.settingLocked": this.settingLocked,
            "notify:freeRounds.ended": this.onFreeRoundsEnded,
            "notify:freeRounds.reInitResponseReceived": this.onReInitResponse,
            "view:settingChangedLocally": this.onSettingChangedLocally,
            "notify:animationManager.allImagesLoaded": this.initAnimations
        }))
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    onSettingChanged: function(e, t) {
        var n = this,
            i = n.model.readData("isFreerounds");
        "autoPlayNrSpins" === e && (this.view.changeSetting(e, t), 0 !== t && this.model.readData("restrictedModeEnabled") && !i && this.fireEvent("request:spinSettings.show"))
    },
    onSettingChangedLocally: function(e, t) {
        this.fireEvent("request:settingsManager.storeData", e, t)
    },
    settingDisabled: function(e) {
        "autoPlayNrSpins" === e && this.view.disable()
    },
    settingLocked: function(e) {
        "autoPlayNrSpins" === e && this.view.locked()
    },
    onBeforeLoaderClose: function() {
        var e = this;
        e.view.dispatchAddToContainerRequest() ? e.view.show() : e.fireEvent("request:quickSettingsMenu.removeAndDisableSetting", "autoPlay")
    },
    onFreeRoundsEnded: function() {
        this.model.readData("restrictedModeEnabled") && (this.model.storeData("isFreerounds", !1), this.checkAndSetAvailability())
    },
    onReInitResponse: function(e) {
        var t;
        this.model.readData("restrictedModeEnabled") && (t = e.freeRoundsLeft, this.model.storeData("isFreerounds", t && t > 0), this.checkAndSetAvailability())
    },
    checkAndSetAvailability: function() {
        this.model.readData("isFreerounds") ? (this.view.dispatchAddToContainerRequest(), this.view.enable(), this.fireEvent("request:quickSettingsMenu.addAndEnableSetting", "autoPlay")) : (this.view.disable(), this.fireEvent("request:quickSettingsMenu.removeAndDisableSetting", "autoPlay"))
    }
}, Interface.AutoPlayButtonController = Sys.extend(Interface.SettingsSectionController, Interface.AutoPlayButtonController, "Interface.AutoPlayButtonController");
Sys.ns("Interface"), Interface.AutoPlayButtonModel = {
    DEFAULT_NUMBER_OF_ROUNDS: 50,
    constructor: function() {
        Interface.AutoPlayButtonModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e, t, a, o = this,
            r = Resources.readData("gameServerInitResponseObject"),
            s = r.autoplay,
            n = o.DEFAULT_NUMBER_OF_ROUNDS,
            l = r.freeRoundsLeft;
        if (o.storeData("isFreerounds", void 0 !== l && l > 0), void 0 !== s && (o.validateSingleAutoPlayValue(s) || o.validateAutoplayArray(s)))
            if (Array.isArray(s))
                for (e = s[0], a = 1; a < s.length; a++)((t = Math.abs(n - e) - Math.abs(n - s[a])) > 0 || 0 === t && s[a] > e) && (e = s[a]);
            else e = s;
        else e = n;
        o.storeData("roundsToTrigger", e), Interface.AutoPlayButtonModel.superclass.setupData.apply(this, arguments), o.storeData("restrictedModeEnabled", o.readData("isRestrictedMode")), o.readData("isRestrictedMode") && o.storeData("isRemovedAndDisabled", !0)
    },
    initData: function() {}
}, Interface.AutoPlayButtonModel = Sys.extend(Interface.SpinSettingsBaseModel, Interface.AutoPlayButtonModel, "Interface.AutoPlayButtonModel");
Sys.ns("Interface"), Interface.AutoPlayButtonBaseView = {
    BASE_CSS: "interface-autoPlayButton_baseContainer",
    PORTRAIT_CSS: "interface-autoPlayButton_portraitBase",
    LANDSCAPE_CSS: "interface-autoPlayButton_landscapeBase",
    PRESSED_CSS: "interface-autoPlayButton_pressedBase",
    TOGGLE_BASE_CSS: "interface-autoPlayToggle_base",
    TOGGLE_BUTTON_WRAPPER_CSS: "interface-autoPlayToggle_buttonWrapper",
    TOGGLE_BUTTON_BACKGROUND_CSS: "",
    TOGGLE_BUTTON_HANDLE_CSS: "",
    NUMBER_DISPLAY_CSS: "interface-autoPlayButton_numberDisplay",
    TARGET_CONTAINER: "quickSettingsMenu",
    constructor: function() {
        Interface.AutoPlayButtonBaseView.superclass.constructor.apply(this, arguments)
    },
    changeSetting: function(t, e) {
        var n = this,
            i = !0;
        "autoPlayNrSpins" === t && (0 === e && (i = !1, n.showNumberDisplay()), i !== n.button.isOn() && (n.sliderShown = i, n.button.toggle(i, !0), !0 === i && n.hideNumberDisplay()))
    },
    setUpContent: function() {
        var t = this;
        t.model.hasAutoplayCeased() || (t.container = new Sys.Element({
            id: "autoPlayButton",
            tag: "div",
            cls: t.BASE_CSS,
            style: "visibility:hidden;"
        }), t.button = new Interface.utils.ToggleSwitch({
            id: "autoplayQuickSettingsButton",
            CSS: {
                base: t.TOGGLE_BASE_CSS,
                button_wrapper: t.TOGGLE_BUTTON_WRAPPER_CSS,
                button_background: t.TOGGLE_BUTTON_BACKGROUND_CSS,
                button_handle: t.TOGGLE_BUTTON_HANDLE_CSS
            },
            enabled: !0,
            callback: t.onSwitchToggled.bind(t)
        }), t.numberDisplay = new Sys.Element({
            tag: "div",
            class: t.NUMBER_DISPLAY_CSS,
            textContent: t.model.readData("roundsToTrigger")
        }), t.container.add(t.button.getContainer()), t.container.add(t.numberDisplay))
    },
    dispatchAddToContainerRequest: function() {
        var t = this,
            e = t.model.readData("isFreerounds");
        return !(t.model.readData("restrictedModeEnabled") && !e) && (t.fireEvent("view:addToContainer", t.TARGET_CONTAINER, {
            content: t.container
        }), !0)
    },
    onSwitchToggled: function(t) {
        var e = this;
        t ? (e.fireEvent("view:settingChangedLocally", "autoPlayNrSpins", e.model.readData("roundsToTrigger")), e.hideNumberDisplay()) : (e.fireEvent("view:settingChangedLocally", "autoPlayNrSpins", 0), e.showNumberDisplay())
    },
    show: function() {
        var t = this;
        t.container.el.style.visibility = "visible", t.button.enable()
    },
    hide: function() {
        var t = this;
        t.container.el.style.visibility = "hidden", t.button.disable()
    },
    press: function() {
        this.button.addCls(this.PRESSED_CSS)
    },
    release: function() {
        this.button.removeCls(this.PRESSED_CSS)
    },
    disable: function() {
        this.fireEvent("view:removeFromContainer", this.TARGET_CONTAINER, {
            content: this.container
        })
    },
    enable: function() {
        var t = this;
        t.fireEvent("view:addToContainer", t.TARGET_CONTAINER, {
            content: t.container
        })
    },
    locked: function() {
        this.disable()
    },
    showNumberDisplay: function() {
        this.numberDisplay.el.style.display = "block"
    },
    hideNumberDisplay: function() {
        this.numberDisplay.el.style.display = "none"
    },
    onUserInputStart: function(t) {
        this.wasInitialTarget = Sys.UserInputUtils.isCoordinateTarget(this.numberDisplay.el, t)
    },
    onUserInputMove: function() {},
    onUserInputEnd: function(t) {
        this.wasInitialTarget && Sys.UserInputUtils.isCoordinateTarget(this.numberDisplay.el, t) && this.button.toggle()
    },
    hideButton: function() {},
    showButton: function() {},
    initAnimations: function() {}
}, Interface.AutoPlayButtonBaseView = Sys.extend(Core.View, Interface.AutoPlayButtonBaseView, "Interface.AutoPlayButtonBaseView");
Sys.ns("Interface"), Interface.QuickSpinButton = {
    constructor: function() {
        Interface.QuickSpinButton.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["orientation"]
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.QuickSpinButtonController,
            model: Interface.QuickSpinButtonModel,
            view: Interface.QuickSpinButtonBaseView
        }
    }
}, Interface.QuickSpinButton = Sys.extend(Core.Module, Interface.QuickSpinButton, "Interface.QuickSpinButton");
Sys.ns("Interface"), Interface.QuickSpinButtonController = {
    constructor: function() {
        Interface.QuickSpinButtonController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        Interface.QuickSpinButtonController.superclass.setupEvents.apply(e, arguments), e.on({
            "notify:stateHandler.leavingBeforeLoaderCloseState": e.onBeforeLoaderClose,
            "notify:stateHandler.leavingIdleState": e.view.hide.bind(e.view),
            "notify:stateHandler.enteringIdleState": e.view.show.bind(e.view),
            "notify:settingsManager.settingChanged": e.onSettingChanged,
            "notify:settingsManager.settingDisabled": e.settingDisabled,
            "view:settingChangedLocally": e.onSettingChangedLocally
        })
    },
    onSettingChanged: function(e, t) {
        "quickSpin" === e && this.view.changeSetting(e, t)
    },
    onSettingChangedLocally: function(e, t) {
        this.fireEvent("request:settingsManager.storeData", e, t)
    },
    settingDisabled: function(e) {
        var t = this;
        "quickSpin" === e && (t.model.storeData("isRemovedAndDisabled", !0), t.view.disable())
    },
    onBeforeLoaderClose: function() {
        var e = this;
        e.view.dispatchAddToContainerRequest() ? e.view.show() : e.fireEvent("request:quickSettingsMenu.removeAndDisableSetting", "quickSpin")
    }
}, Interface.QuickSpinButtonController = Sys.extend(Interface.SettingsSectionController, Interface.QuickSpinButtonController, "Interface.QuickSpinButtonController");
Sys.ns("Interface"), Interface.QuickSpinButtonModel = {
    constructor: function() {
        Interface.QuickSpinButtonModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = Services.localStorageManager.hasData("quickSpin") && "true" === Services.localStorageManager.readData("quickSpin");
        this.storeData("quickSpin", e), Services.settingsManager.storeSetting("quickSpin", e, !1, !1)
    }
}, Interface.QuickSpinButtonModel = Sys.extend(Core.Model, Interface.QuickSpinButtonModel, "Interface.QuickSpinButtonModel");
Sys.ns("Interface"), Interface.QuickSpinButtonBaseView = {
    BASE_CSS: "interface-quickSpinButton_baseContainer",
    PORTRAIT_CSS: "interface-quickSpinButton_portraitBase",
    LANDSCAPE_CSS: "interface-quickSpinButton_landscapeBase",
    PRESSED_CSS: "interface-quickSpinButton_pressedBase",
    TOGGLE_BASE_CSS: "interface-quickSpinToggle_base",
    TOGGLE_BUTTON_WRAPPER_CSS: "interface-quickSpinToggle_buttonWrapper",
    TOGGLE_BUTTON_BACKGROUND_CSS: "",
    TOGGLE_BUTTON_HANDLE_CSS: "",
    TARGET_CONTAINER: "quickSettingsMenu",
    constructor: function() {
        Interface.QuickSpinButtonBaseView.superclass.constructor.apply(this, arguments)
    },
    changeSetting: function(t, n) {
        "quickSpin" === t && n !== this.button.isOn() && this.button.toggle(n, !0)
    },
    setUpContent: function() {
        var t = this;
        t.container = new Sys.Element({
            id: "quickSpinButton",
            tag: "div",
            cls: t.BASE_CSS,
            renderTo: t.RENDER_TARGET,
            style: "visibility:hidden;"
        }), t.button = new Interface.utils.ToggleSwitch({
            id: "quickSpinQuickSettingsButton",
            CSS: {
                base: t.TOGGLE_BASE_CSS,
                button_wrapper: t.TOGGLE_BUTTON_WRAPPER_CSS,
                button_background: t.TOGGLE_BUTTON_BACKGROUND_CSS,
                button_handle: t.TOGGLE_BUTTON_HANDLE_CSS
            },
            enabled: !0,
            callback: t.onSwitchToggled.bind(t, "quickSpin")
        }), t.container.add(t.button.getContainer()), t.button.toggle(t.model.readData("quickSpin"))
    },
    dispatchAddToContainerRequest: function() {
        var t = this;
        return !t.model.readData("isRemovedAndDisabled") && (t.fireEvent("view:addToContainer", t.TARGET_CONTAINER, {
            content: t.container
        }), !0)
    },
    onSwitchToggled: function(t, n) {
        this.fireEvent("view:settingChangedLocally", t, n)
    },
    show: function() {
        this.button.enable(), this.container.el.style.visibility = "visible"
    },
    hide: function() {
        this.container.el.style.visibility = "hidden", this.button.disable()
    },
    disable: function() {
        var t = this;
        t.fireEvent("view:removeFromContainer", t.TARGET_CONTAINER, {
            content: t.container
        })
    },
    press: function() {
        this.button.addCls(this.PRESSED_CSS)
    },
    release: function() {
        this.button.removeCls(this.PRESSED_CSS)
    }
}, Interface.QuickSpinButtonBaseView = Sys.extend(Core.View, Interface.QuickSpinButtonBaseView, "Interface.QuickSpinButtonBaseView");
Sys.ns("Game.Slots"), Game.Slots.QuickStopper = {
    constructor: function() {
        Game.Slots.QuickStopper.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["userInput", "trigger"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Game.Slots.QuickStopperModel,
            view: Game.Slots.QuickStopperView,
            controller: Game.Slots.QuickStopperController
        }
    }
}, Game.Slots.QuickStopper = Sys.extend(Core.Module, Game.Slots.QuickStopper, "Game.Slots.QuickStopper");
Sys.ns("Game.Slots.Slots"), Game.Slots.QuickStopperController = {
    constructor: function() {
        Game.Slots.QuickStopperController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "request:quickStopper.disableInMode": this.disableInMode,
            "request:quickStopper.enableInMode": this.enableInMode,
            "request:quickStopper.quickStop": this.performQuickStop,
            "notify:spin.spinAnimationStarted": this.spinStarted,
            "notify:spin.spinAnimationComplete": this.spinStopped,
            "notify:spinButton.clicked": this.performQuickStop,
            "notify:spinButton.clickedWhileHidden": this.performQuickStop,
            "notify:scaling.gameSizeChanged": this.onGameSizeChanged,
            "notify:animationManager.allImagesLoaded": this.initAnimations
        })
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    onGameSizeChanged: function() {
        "function" == typeof this.view.refresh && this.view.refresh()
    },
    registerTriggers: function() {
        Services.trigger.registerTrigger("notify:quickStopper.quickStop", this, "When a quick stop is performed.")
    },
    onUserInputStart: function(t) {
        Sys.UserInputUtils.isCoordinateTarget(Game.stage.getGameContainer(), t) && this.performQuickStop()
    },
    spinStarted: function() {
        this.startListeningToUserInput(), this.model.setState("spinning")
    },
    spinStopped: function() {
        var t = this;
        t.stopListeningToUserInput(), t.model.setState("stopped"), t.fireEvent("request:spinButton.enable", t.MODULE_NAME)
    },
    disableInMode: function(t) {
        this.model.setDisabledMode(t)
    },
    enableInMode: function(t) {
        this.model.removeDisabledMode(t)
    },
    performQuickStop: function() {
        var t = this;
        t.model.canQuickStop() && (t.model.setState("quickStop"), t.fireEvent("notify:quickStopper.quickStop"), t.fireEvent("request:audioPlayer.play", {
            name: "quickStop"
        }), t.fireEvent("request:spinButton.disable", t.MODULE_NAME))
    }
}, Game.Slots.QuickStopperController = Sys.extend(Core.Controller, Game.Slots.QuickStopperController, "Game.Slots.QuickStopperController");
Sys.ns("Game.Slots.Slots"), Game.Slots.QuickStopperModel = {
    constructor: function() {
        Game.Slots.QuickStopperModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        this.storeLayout(), this.storeData("disabledInModes", [])
    },
    canQuickStop: function() {
        return this.isState("spinning") && !this.isInDisabledMode()
    },
    storeLayout: function() {
        var e = Game.stage.model.getCurrentReelGroupConfiguration() || {},
            t = e.symbolWidth * e.symbolCols + e.reelSpacing * (e.symbolCols - 1);
        return this.storeData("layout", {
            width: t,
            height: e.visibleLength,
            top: e.reelAreaTop,
            left: e.reelAreaLeft,
            depth: Layering.Game.Slots.QuickStop.flash
        })
    },
    isInDisabledMode: function() {
        return this.readData("disabledInModes").length > 0
    },
    setDisabledMode: function(e) {
        var t = this,
            o = t.readData("disabledInModes"); - 1 === o.indexOf(e) && (o.push(e), t.storeData("disabledInModes", o))
    },
    removeDisabledMode: function(e) {
        var t = this,
            o = t.readData("disabledInModes"),
            s = o.indexOf(e);
        s > -1 && (o.splice(s, 1), t.storeData("disabledInModes", o))
    }
}, Game.Slots.QuickStopperModel = Sys.extend(Core.Model, Game.Slots.QuickStopperModel, "Game.Slots.QuickStopperModel");
Sys.ns("Game.Slots"), Game.Slots.QuickStopperView = {
    constructor: function() {
        Game.Slots.QuickStopperView.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "model:quickStop": this.quickStop
        })
    },
    initAnimations: function() {
        var t = this,
            i = t.model.readData("layout");
        t.animationList = new Animation.CanvasAnimationList, t.item = new Animation.CanvasAnimationItem({
            top: i.top,
            left: i.left,
            width: i.width,
            height: i.height,
            depth: i.depth,
            executeBefore: function(t) {
                t.fillStyle = "#FFFFFF", t.fillRect(this.pivot.x, this.pivot.y, this.width, this.height)
            },
            operations: {
                fade: [{
                    time: 0,
                    value: 0
                }, {
                    time: 100,
                    value: .2
                }, {
                    time: 200,
                    value: 0
                }]
            }
        }), t.animationList.add(t.item), Game.stage.view.addToRenderLoop(t.animationList), t.animationList.stop()
    },
    refresh: function() {
        var t, i = this.item;
        Animation.utils.isAnimationItem(i) && (t = this.model.storeLayout(), i.setLeft(t.left), i.setTop(t.top), i.setWidth(t.width), i.setHeight(t.height))
    },
    quickStop: function() {
        this.animationList.restore(), this.animationList.play()
    }
}, Game.Slots.QuickStopperView = Sys.extend(Core.View, Game.Slots.QuickStopperView, "Game.Slots.QuickStopperView");
Sys.ns("Interface"), Interface.BalanceDisplay = {
    constructor: function() {
        Interface.BalanceDisplay.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["orientation"]
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.BalanceDisplayController,
            view: Interface.BalanceDisplayBaseView
        }
    }
}, Interface.BalanceDisplay = Sys.extend(Core.Module, Interface.BalanceDisplay, "Interface.BalanceDisplay");
Sys.ns("Interface"), Interface.BalanceDisplayModel = {
    constructor: function() {
        Interface.BalanceDisplayModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {}
}, Interface.BalanceDisplayModel = Sys.extend(Core.Model, Interface.BalanceDisplayModel, "Interface.BalanceDisplayModel");
Sys.ns("Interface"), Interface.BalanceDisplayController = {
    constructor: function() {
        Interface.BalanceDisplayController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "request:balanceDisplay.appendChild": this.appendChild,
            "request:balanceDisplay.addClass": this.view.addClass.bind(this.view),
            "request:balanceDisplay.removeClass": this.view.removeClass.bind(this.view),
            "notify:stateHandler.leavingBeforeLoaderCloseState": this.handleBeforeLoaderClose
        })
    },
    handleBeforeLoaderClose: function() {
        Sys.isGcmEnabled && this.fireEvent("notify:loader.closed")
    },
    appendChild: function(e) {
        this.view.addChild(e)
    }
}, Interface.BalanceDisplayController = Sys.extend(Core.Controller, Interface.BalanceDisplayController, "Interface.BalanceDisplayController");
Sys.ns("Interface"), Interface.BalanceDisplayBaseView = {
    BASE_CSS: "interface-balanceDisplay_base",
    PORTRAIT_CSS: "interface-balanceDisplay_portrait",
    LANDSCAPE_CSS: "interface-balanceDisplay_landscape",
    RENDER_TARGET: "gameWrapper",
    constructor: function() {
        Interface.BalanceDisplayBaseView.superclass.constructor.apply(this, arguments)
    },
    adaptToOrientation: function(e) {
        this.setStyle(e)
    },
    init: function() {
        this.constructDOMElement()
    },
    constructDOMElement: function() {
        var e = this;
        e.container = new Sys.Element({
            id: "gameFooter",
            tag: "div",
            cls: e.BASE_CSS,
            renderTo: e.RENDER_TARGET
        })
    },
    addClass: function(e) {
        this.container.addCls(e)
    },
    removeClass: function(e) {
        this.container.removeCls(e)
    },
    addChild: function(e) {
        this.container.add(e)
    }
}, Interface.BalanceDisplayBaseView = Sys.extend(Core.View, Interface.BalanceDisplayBaseView, "Interface.BalanceDisplayBaseView");
Sys.ns("interface"), Interface.BalanceDisplayMobileView = {
    PORTRAIT_CSS: "interface-balanceDisplay_portrait_mobile",
    LANDSCAPE_CSS: "interface-balanceDisplay_landscape_mobile",
    constructor: function() {
        Interface.BalanceDisplayMobileView.superclass.constructor.apply(this, arguments)
    }
}, Interface.BalanceDisplayMobileView = Sys.extend(Interface.BalanceDisplayBaseView, Interface.BalanceDisplayMobileView, "Interface.BalanceDisplayMobileView");
Sys.ns("Interface"), Interface.BalanceDisplayDesktopView = {
    LANDSCAPE_CSS: "interface-balanceDisplay_landscape_desktop",
    constructor: function() {
        Interface.BalanceDisplayDesktopView.superclass.constructor.apply(this, arguments)
    }
}, Interface.BalanceDisplayDesktopView = Sys.extend(Interface.BalanceDisplayBaseView, Interface.BalanceDisplayDesktopView, "Interface.BalanceDisplayDesktopView");
Sys.ns("Interface"), Interface.SystemClock = {
    constructor: function() {
        Interface.SystemClock.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["orientation"]
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.SystemClockController,
            model: Interface.SystemClockModel,
            view: Interface.SystemClockBaseView
        }
    }
}, Interface.SystemClock = Sys.extend(Core.Module, Interface.SystemClock, "Interface.SystemClock");
Sys.ns("Interface"), Interface.SystemClockController = {
    constructor: function() {
        Interface.SystemClockController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "request:systemClock.enableInMode": e.view.show.bind(e.view),
            "request:systemClock.show": e.view.show.bind(e.view),
            "request:systemClock.hide": e.view.show.bind(e.hide)
        })
    }
}, Interface.SystemClockController = Sys.extend(Core.Controller, Interface.SystemClockController, "Interface.SystemClockController");
Sys.ns("Interface"), Interface.SystemClockModel = {
    constructor: function() {
        Interface.SystemClockModel.superclass.constructor.apply(this, arguments)
    },
    getTime: function() {
        var e = new Date;
        return {
            hours: e.getHours(),
            minutes: e.getMinutes()
        }
    }
}, Interface.SystemClockModel = Sys.extend(Core.Model, Interface.SystemClockModel, "Interface.SystemClockModel");
Sys.ns("Interface"), Interface.SystemClockBaseView = {
    BASE_CSS: "interface-systemClock_base",
    PORTRAIT_POSITION: {
        ABOVE_GAME: !0,
        TOP: .05,
        LEFT: .5
    },
    LANDSCAPE_POSITION: {
        BOTTOM: 0,
        LEFT: .055
    },
    RENDER_TARGET: "gameWrapper",
    constructor: function() {
        Interface.SystemClockBaseView.superclass.constructor.apply(this, arguments)
    },
    init: function() {
        var e = this;
        Interface.SystemClockBaseView.superclass.init.apply(e, arguments), e.container = new Sys.Element({
            id: "systemClock",
            tag: "div",
            cls: e.BASE_CSS,
            renderTo: e.RENDER_TARGET,
            style: "display:none;"
        }), e.hours = document.createElement("span"), e.container.el.appendChild(e.hours), e.colon = document.createElement("span"), e.colon.textContent = ":", e.container.el.appendChild(e.colon), e.minutes = document.createElement("span"), e.container.el.appendChild(e.minutes), e.showColon = !0
    },
    updateTime: function() {
        var e = this,
            t = e.model.getTime(),
            n = t.hours,
            o = t.minutes;
        n < 10 && (n = "0" + n), o < 10 && (o = "0" + o), e.hours.textContent = n, e.minutes.textContent = o, e.colon.style.visibility = e.showColon ? "visible" : "hidden", e.showColon = !e.showColon, e.ticker = setTimeout(function() {
            e.updateTime()
        }, 1e3)
    },
    show: function() {
        this.container.el.style.display = "block", this.updateTime()
    },
    hide: function() {
        this.container.el.style.display = "none", clearTimeout(this.ticker)
    }
}, Interface.SystemClockBaseView = Sys.extend(Core.View, Interface.SystemClockBaseView, "Interface.SystemClockBaseView");
Sys.ns("Interface"), Interface.SystemClockTabletView = {
    PORTRAIT_POSITION: {
        BOTTOM: 0,
        LEFT: .055
    },
    constructor: function() {
        Interface.SystemClockTabletView.superclass.constructor.apply(this, arguments)
    }
}, Interface.SystemClockTabletView = Sys.extend(Interface.SystemClockBaseView, Interface.SystemClockTabletView, "Interface.SystemClockTabletView");
Sys.ns("Interface"), Interface.SystemClockDesktopView = {
    PORTRAIT_POSITION: void 0,
    LANDSCAPE_POSITION: void 0,
    constructor: function() {
        Interface.SystemClockDesktopView.superclass.constructor.apply(this, arguments)
    }
}, Interface.SystemClockDesktopView = Sys.extend(Interface.SystemClockBaseView, Interface.SystemClockDesktopView, "Interface.SystemClockDesktopView");
Sys.ns("Interface"), Interface.NetEntLogo = {
    constructor: function() {
        Interface.NetEntLogo.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["orientation"]
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.NetEntLogoController,
            view: Interface.NetEntLogoBaseView
        }
    }
}, Interface.NetEntLogo = Sys.extend(Core.Module, Interface.NetEntLogo, "Interface.NetEntLogo");
Sys.ns("Interface"), Interface.NetEntLogoController = {
    constructor: function() {
        Interface.NetEntLogoController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var t = this;
        t.on({
            "request:netEntLogo.show": this.onShow,
            "request:netEntLogo.hide": this.onHide,
            "notify:viewport.scaled": t.viewportScaled
        })
    },
    viewportScaled: function() {
        var t = this;
        Platform.isChromeForIOS && window.setTimeout(function() {
            t.view.adaptToOrientation(Utils.Platform.getOrientation())
        }, 500)
    },
    onShow: function() {
        this.view.show()
    },
    onHide: function() {
        this.view.hide()
    }
}, Interface.NetEntLogoController = Sys.extend(Core.Controller, Interface.NetEntLogoController, "Interface.NetEntLogoController");
Sys.ns("Interface"), Interface.NetEntLogoBaseView = {
    BASE_CSS: "interface-netEntLogo_base interface-netEntLogo_uri",
    PORTRAIT_POSITION: {
        BELOW_GAME: !0,
        BOTTOM: .01,
        LEFT: .5
    },
    LANDSCAPE_POSITION: {
        BOTTOM: 0,
        RIGHT: .04
    },
    RENDER_TARGET: "gameWrapper",
    constructor: function() {
        Interface.NetEntLogoBaseView.superclass.constructor.apply(this, arguments), this.container = new Sys.Element({
            id: "netEntLogo",
            tag: "div",
            cls: this.BASE_CSS,
            renderTo: this.RENDER_TARGET
        })
    },
    show: function() {
        this.container.getEl().style.display = "block"
    },
    hide: function() {
        this.container.getEl().style.display = "none"
    }
}, Interface.NetEntLogoBaseView = Sys.extend(Core.View, Interface.NetEntLogoBaseView, "Interface.NetEntLogoBaseView");
Sys.ns("Interface"), Interface.QuickSettingsMenu = {
    constructor: function() {
        Interface.QuickSettingsMenu.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Interface.QuickSettingsMenuController,
            model: Interface.QuickSettingsMenuModel,
            view: Interface.QuickSettingsMenuBaseView
        }
    },
    getMixinDependencies: function() {
        return [{
            userInput: {
                listenToUserInput: !0
            }
        }, "orientation", "properties"]
    }
}, Interface.QuickSettingsMenu = Sys.extend(Core.Module, Interface.QuickSettingsMenu, "Interface.QuickSettingsMenu");
Sys.ns("Interface"), Interface.QuickSettingsMenuController = {
    constructor: function() {
        Interface.QuickSettingsMenuController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.eventToUseWhenActive = {
            "notify:stateHandler.leavingBeforeLoaderCloseState": e.onLeavingBeforeLoaderCloseState,
            "notify:stateHandler.enteringIdleState": e.onEnteringIdleState.bind(e, !0),
            "notify:stateHandler.leavingIdleState": e.onLeavingIdleState,
            "notify:spinButton.shown": e.show,
            "notify:spinButton.hidden": e.hide,
            "notify:spinButton.pressed": e.onSpinButtonPress,
            "notify:spinButton.released": e.onSpinButtonRelease.bind(e, !0),
            "notify:settingsManager.settingChanged": e.onSettingsChanged
        }, e.on({
            "request:quickSettingsMenu.addChild": e.addChild,
            "request:quickSettingsMenu.removeChild": e.removeChild,
            "request:quickSettingsMenu.externalActivate": e.onExternalActivate,
            "request:quickSettingsMenu.externalDeactivate": e.onExternalDeactivate,
            "request:quickSettingsMenu.movePosition": e.onMovePositionRequest,
            "request:quickSettingsMenu.removeAndDisableSetting": e.onRemoveAndDisableSetting,
            "request:quickSettingsMenu.addAndEnableSetting": e.onAddAndEnableSetting,
            "notify:autoPlayer.starting": e.onExternalDeactivate.bind(e, "autoplay"),
            "notify:autoPlayer.stopped": e.onExternalActivate.bind(e, "autoplay")
        }), e.on(e.eventToUseWhenActive)
    },
    onMovePositionRequest: function(e) {
        this.view.moveSettingPosition(e)
    },
    onLeavingBeforeLoaderCloseState: function() {
        this.model.storeData("activated", !1), this.view.deactivate()
    },
    disableMenu: function() {
        var e, t = this,
            n = t.eventToUseWhenActive,
            i = Object.keys(n),
            a = i.length;
        for (e = -1; ++e < a;) t.removeListener(i[e]);
        t.model.storeData("activated", !1), t.hide()
    },
    enableMenu: function() {
        var e = this;
        e.model.readData("activated") || (e.on(e.eventToUseWhenActive), e.model.storeData("activated", !0), e.show())
    },
    getChildCount: function() {
        return Object.keys(this.view.children).length
    },
    addChild: function(e, t) {
        var n = this;
        n.view.addChild(e, t), n.getChildCount() > 0 && n.enableMenu()
    },
    removeChild: function(e, t) {
        var n, i = this,
            a = i.getChildCount();
        i.view.removeChild(e, t), n = i.getChildCount(), a !== n && n <= 0 && i.disableMenu()
    },
    onExternalDeactivate: function(e) {
        this.addProperty("externalDeactivated", e), this.hide()
    },
    onExternalActivate: function(e) {
        var t = this;
        t.removeProperty("externalDeactivated", e), "open" !== t.model.readData("status") && t.show(!0)
    },
    onSpinButtonPress: function() {
        this.model.readData("activated") && this.hide()
    },
    onSpinButtonRelease: function(e) {
        this.model.readData("activated") && this.show(e)
    },
    onEnteringIdleState: function(e) {
        if (0 === this.getChildCount()) return void this.disableMenu();
        this.model.storeData("activated", !0), this.show(e)
    },
    onLeavingIdleState: function() {
        this.model.storeData("activated", !1), this.hide()
    },
    hide: function() {
        var e = this;
        e.model.storeData("hidden", !0), e.view.deactivate(), "open" === e.model.readData("status") && (e.view.close(), e.model.storeData("status", "close"), e.fireEvent("request:spinButton.removeProperty", "visibleOnInput", e.MODULE_NAME))
    },
    show: function(e) {
        var t = this;
        t.model.hasProperty("externalDeactivated") || (t.model.storeData("hidden", !1), t.model.readData("activated") && t.view.activate(e))
    },
    onUserInputStart: function(e) {
        this.view.isInputTarget(e) && this.model.readData("activated") && this.model.storeData("activeInputTarget", !0)
    },
    onUserInputMove: function(e) {},
    onUserInputEnd: function(e) {
        var t = this;
        "open" !== t.model.readData("status") || !t.view.isInputTarget(e) && t.view.isContainer(e) ? t.view.isInputTarget(e) && t.model.readData("activeInputTarget") && (t.view.open(), t.model.storeData("status", "open"), t.fireEvent("notify:quickSettingsMenu." + t.model.readState), t.fireEvent("request:spinButton.addProperty", "visibleOnInput", t.MODULE_NAME)) : (t.view.close(), t.model.storeData("status", "close"), t.fireEvent("request:spinButton.removeProperty", "visibleOnInput", t.MODULE_NAME)), t.model.storeData("activeInputTarget", !1)
    },
    onSettingsChanged: function(e, t) {
        "leftHandMode" === e && this.view.positionMenu(t)
    },
    onRemoveAndDisableSetting: function(e) {
        this.view.removeAndDisableSetting(e)
    },
    onAddAndEnableSetting: function(e) {
        this.view.addAndEnableSetting(e)
    }
}, Interface.QuickSettingsMenuController = Sys.extend(Core.Controller, Interface.QuickSettingsMenuController, "Interface.QuickSettingsMenuController");
Sys.ns("Interface"), Interface.QuickSettingsMenuModel = {
    PROPERTIES: {
        externalDeactivated: []
    },
    constructor: function() {
        Interface.QuickSettingsMenuModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = this,
            t = Services.localStorageManager.hasData("leftHandMode") && "true" === Services.localStorageManager.readData("leftHandMode"),
            a = Resources.readData("gameServerInitResponseObject").autoplay;
        e.storeData("children", {}), e.storeData("disableDuringSpin", []), e.storeData("status", "close"), e.storeData("leftHandMode", t), e.storeData("preventDrawAutoplay", 0 === a)
    }
}, Interface.QuickSettingsMenuModel = Sys.extend(Core.Model, Interface.QuickSettingsMenuModel, "Interface.QuickSettingsMenuModel");
Sys.ns("Interface"), Interface.QuickSettingsMenuBaseView = {
    BASE_CSS: "interface-quickSettingsMenu_base",
    PORTRAIT_CSS: "interface-quickSettingsMenu_portrait",
    LANDSCAPE_CSS: "interface-quickSettingsMenu_landscape",
    LANDSCAPE_BG_URI: "interface-quickSettingsMenu_sliderBg_landscape_uri",
    PORTRAIT_BG_URI: "interface-quickSettingsMenu_sliderBg_portrait_uri",
    LANDSCAPE_FRONT_CSS: "interface-quickSettingsMenu_front_landscape",
    PORTRAIT_FRONT_CSS: "interface-quickSettingsMenu_front_portrait",
    LANDSCAPE_BACK_CSS: "interface-quickSettingsMenu_back_landscape",
    PORTRAIT_BACK_CSS: "interface-quickSettingsMenu_back_portrait",
    SLIDER_BUTTON_URI: "interface-quickSettingsMenu_sliderButton_uri",
    ICON_BASE_CSS: "interface-quickSettingsMenu_icon_base",
    LANDSCAPE_ICON_CSS: "interface-quickSettingsMenu_icon_landscape",
    PORTRAIT_ICON_CSS: "interface-quickSettingsMenu_icon_portrait",
    ICON_CLOSE_CSS: "interface-quickSettingsMenu_icon_close",
    ICON_OPEN_CSS: "interface-quickSettingsMenu_icon_open",
    ICON_URI: "interface-quickSettingsMenu_icon_uri",
    BASE_SLIDE_CSS: "interface-quickSettingsMenu_portraitSlide",
    LANDSCAPE_AUTOPLAY_SLIDE_CSS: "interface-quickSettingsMenu_autoPlaySlide_landscape",
    PORTRAIT_AUTOPLAY_SLIDE_CSS: "interface-quickSettingsMenu_autoPlaySlide_portrait",
    AUTOPLAY_SLIDE_CLOSE: "interface-quickSettingsMenu_autoPlaySlide_close",
    AUTOPLAY_SLIDE_OPEN: "interface-quickSettingsMenu_autoPlaySlide_open",
    LANDSCAPE_QUICKSPIN_SLIDE_CSS: "interface-quickSettingsMenu_quickSpinSlide_landscape",
    PORTRAIT_QUICKSPIN_SLIDE_CSS: "interface-quickSettingsMenu_quickSpinSlide_portrait",
    QUICKSPIN_SLIDE_CLOSE: "interface-quickSettingsMenu_quickSpinSlide_close",
    QUICKSPIN_SLIDE_OPEN: "interface-quickSettingsMenu_quickSpinSlide_open",
    BASE_CHILDREN_CSS: "interface-quickSettingsMenu_children_base",
    LANDSCAPE_CHILDREN_CSS: "interface-quickSettingsMenu_children_landscape_base",
    PORTRAIT_CHILDREN_CSS: "interface-quickSettingsMenu_children_portrait_base",
    CHILD_CSS: "interface-quickSettingsMenu_child_base",
    PORTRAIT_CHILD_CSS: "interface-quickSettingsMenu_child_portrait",
    LANDSCAPE_CHILD_CSS: "interface-quickSettingsMenu_child_landscape",
    HANDLE_CSS: "interface-quickSettingsMenu_handle",
    LANDSCAPE_HANDLE_CSS: {
        open: "interface-quickSettingsMenu_handle_open_landscape",
        close: "interface-quickSettingsMenu_handle_close_landscape"
    },
    PORTRAIT_HANDLE_CSS: {
        open: "interface-quickSettingsMenu_handle_portrait",
        close: "interface-quickSettingsMenu_handle_portrait"
    },
    MENU_LEFT_SIDE_CSS: "interface-quickSettingsMenu_left",
    HANDLE_LEFT_SIDE_CSS: "interface-quickSettingsMenu_handle_left",
    PORTRAIT_POSITION: {
        BELOW_GAME: !0,
        TOP: .4,
        MIN_TOP: 825,
        LEFT: .3994
    },
    PORTRAIT_SIZE: {
        HEIGHT: .55,
        WIDTH: .28
    },
    LANDSCAPE_CLOSEDSIZE: "0.00rem",
    LANDSCAPE_FRONTSTARTPOS: "-0.64rem",
    LANDSCAPE_FRONTENDPOS: "-0.24rem",
    LANDSAPE_BACKSTARTPOS: "0.00rem",
    LANDSCAPE_BACKENDPOS: "0.50rem",
    LANDSCAPE_OPENSIZE: "2.70rem",
    RENDER_TARGET: "gameWrapper",
    PIXEL_FACTOR: .01,
    constructor: function() {
        Interface.QuickSettingsMenuBaseView.superclass.constructor.apply(this, arguments)
    },
    moveSettingPosition: function(e) {
        var t = this;
        Sys.isDefined(e) && "string" == typeof e.orientation && "portrait" === e.orientation.toLowerCase() && (Sys.isDefined(e.vertical) && (t.PORTRAIT_POSITION.TOP = t.PORTRAIT_POSITION.TOP + e.vertical), Utils.Platform.isLandscape() ? t.onLandscape() : t.onPortrait())
    },
    open: function(e) {
        var t = this;
        t["open" + Utils.Platform.getOrientation()](e), t.icon.replaceCSSClass(t.ICON_CLOSE_CSS, t.ICON_OPEN_CSS)
    },
    openLANDSCAPE: function(e) {
        var t = this,
            n = t.model.readData("status"),
            i = e || t.getNewStatus(n),
            a = t.LANDSCAPE_HANDLE_CSS,
            S = t.animations.LANDSCAPE;
        t.back.el.style.display = "block", t.childrenContainer.el.style.display = "block", n !== i && t.handle.replaceCSSClass(a[n], a[i]), Sys.iterate(t.children, function(e) {
            S.openChild.run(t.children[e].el)
        }), S.open.run(t.container.el), S.openFront.run(t.front.el), S.openBack.run(t.back.el)
    },
    openPORTRAIT: function() {
        var e = this;
        e.childrenContainer.el.style.display = "none", e.front.el.style.left = "", Sys.iterate(e.children, function(t) {
            e.children[t].el.style.opacity = 1
        }), e.autoPlaySlide.replaceCSSClass(e.AUTOPLAY_SLIDE_CLOSE, e.AUTOPLAY_SLIDE_OPEN), e.quickSpinSlide.replaceCSSClass(e.QUICKSPIN_SLIDE_CLOSE, e.QUICKSPIN_SLIDE_OPEN)
    },
    getNewStatus: function(e) {
        return Utils.Platform.getOrientation() === this.currentOrientation ? "close" === e ? "open" : "close" : e
    },
    close: function() {
        var e = this,
            t = Utils.Platform.getOrientation();
        e["close" + t](t), e.icon.replaceCSSClass(e.ICON_OPEN_CSS, e.ICON_CLOSE_CSS)
    },
    closeLANDSCAPE: function() {
        var e = this,
            t = e.model.readData("status"),
            n = "close" === t ? "open" : "close",
            i = e.animations.LANDSCAPE;
        e.handle.replaceCSSClass(e.LANDSCAPE_HANDLE_CSS[t], e.LANDSCAPE_HANDLE_CSS[n]), Sys.iterate(e.children, function(t) {
            i.closeChild.run(e.children[t].el)
        }), i.close.run(e.container.el), i.closeFront.run(e.front.el), i.closeBack.run(e.back.el)
    },
    closePORTRAIT: function() {
        var e = this;
        e.autoPlaySlide.replaceCSSClass(e.AUTOPLAY_SLIDE_OPEN, e.AUTOPLAY_SLIDE_CLOSE), e.quickSpinSlide.replaceCSSClass(e.QUICKSPIN_SLIDE_OPEN, e.QUICKSPIN_SLIDE_CLOSE)
    },
    activate: function(e) {
        var t = this,
            n = Utils.Platform.getOrientation();
        t.model.readData("hidden") || (t.model.readData("animationReady") || t.setupAnimations(), t.container.el.style.display = "block", t.childrenContainer.el.style.display = "none", t.back.el.style.display = "none", t.handle.el.style.display = "block", e && t.animations[n].activate.run(t.container.el))
    },
    deactivate: function() {
        var e = this,
            t = Sys.utils.getPrefixedCSSProperty("animation");
        e.childrenContainer.el.style.display = "none", e.handle.el.style.display = "none", e.container.el.style.display = "none", e.container.el.style[t] = "none", e.front.el.style[t] = "none"
    },
    isInputTarget: function(e) {
        return Sys.UserInputUtils.isCoordinateTarget(this.handle.el, e)
    },
    isContainer: function(e) {
        return Sys.UserInputUtils.isCoordinateTarget(this.container.el, e)
    },
    init: function() {
        var e = this;
        Interface.QuickSettingsMenuBaseView.superclass.init.apply(e, arguments), e.setupDOMStructure(), e.children = {}
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "model:childAdded": e.addChild,
            "model:childRemoved": e.removeChild,
            "model:childActivated": e.activateChild,
            "model:childDeactivated": e.deactivateChild
        })
    },
    addChild: function(e, t) {
        var n = this,
            i = Utils.Platform.getOrientation(),
            a = t.content;
        a.addCls(n.CHILD_CSS), a.addCls(n[i + "_CHILD_CSS"]), n.append(e, a, i), n.children[e] = a
    },
    append: function(e, t, n) {
        var i = this;
        "LANDSCAPE" === n ? i.childrenContainer.add(t) : "autoPlayButton" === e ? i.autoPlaySlide.add(t) : "quickSpinButton" === e && i.quickSpinSlide.add(t)
    },
    removeChild: function(e, t) {
        var n = this;
        "LANDSCAPE" === Utils.Platform.getOrientation() && Sys.isObj(t) ? n.childrenContainer.remove(t.content) : "autoPlayButton" === e && Sys.isObj(t) ? n.autoPlaySlide.remove(t.content) : "quickSpinButton" === e && n.quickSpinSlide.remove(t.content), delete n.children[e]
    },
    onPortrait: function() {
        var e = this,
            t = e.model.readData("status"),
            n = Sys.utils.getPrefixedCSSProperty("animation"),
            i = Sys.isDefined(e.animations) && e.model.readData("activated");
        Utils.Platform.getOrientation() !== this.currentOrientation && (e.adaptToOrientation("PORTRAIT"), i && (e.container.el.style[n] = "none", setTimeout(function() {
            e.animations.PORTRAIT.activate.run(e.container.el)
        }, 0)), Sys.iterate(e.children, function(t) {
            e.children[t].el.style[n] = "none"
        }), e[t + "PORTRAIT"](), e.currentOrientation = "PORTRAIT"), e.front.el.style.left = "", e.setPosition("PORTRAIT"), e.container.el.style.top = (Sys.utils.toInt(e.container.el.style.top) + 70) * e.PIXEL_FACTOR + "rem", e.setHandlePostion()
    },
    onLandscape: function() {
        var e = this,
            t = e.model.readData("status"),
            n = Sys.utils.getPrefixedCSSProperty("animation"),
            i = e.getNewStatus(t),
            a = Sys.isDefined(e.animations) && e.model.readData("activated");
        Utils.Platform.getOrientation() !== this.currentOrientation && (e.adaptToOrientation("LANDSCAPE"), a && (e.container.el.style[n] = "none", setTimeout(function() {
            "close" === t ? (e.animations.LANDSCAPE.activate.run(e.container.el), e.back.el.style.display = "none") : (e.childrenContainer.el.style.display = "block", e.open(i)), e.animations.LANDSCAPE[t + "Front"].run(e.front.el), e.animations.LANDSCAPE[t + "Back"].run(e.back.el)
        }, 0)), this.currentOrientation = "LANDSCAPE")
    },
    adaptToOrientation: function(e) {
        var t = this,
            n = "LANDSCAPE" === e ? "PORTRAIT" : "LANDSCAPE",
            i = t.model.readData("status");
        t.setStyle(e), t.resetPosition(), Sys.iterate(t.updateOnOrientation, function(i, a) {
            t[i].replaceCSSClass(t[n + a], t[e + a])
        }), t.handle.replaceCSSClass(t[n + "_HANDLE_CSS"][i], t[e + "_HANDLE_CSS"][i]), t.moveChildren(t[n + "_CHILD_CSS"], t[e + "_CHILD_CSS"], e), !0 === t.model.readData("activated") ? t.activate() : t.deactivate()
    },
    setHandlePostion: function() {
        var e = this,
            t = e.handle.el.style,
            n = e.container.el.style;
        t.top = n.top, t.bottom = n.bottom, t.left = n.left, t.right = n.right
    },
    moveChildren: function(e, t, n) {
        var i = this;
        Sys.iterate(i.children, function(a) {
            i.children[a].replaceCSSClass(e, t), "LANDSCAPE" === n ? i.childrenContainer.add(i.children[a]) : "autoPlayButton" === a ? i.autoPlaySlide.add(i.children[a]) : "quickSpinButton" === a && i.quickSpinSlide.add(i.children[a])
        })
    },
    resetPosition: function() {
        var e, t = this,
            n = t.container.el.style,
            i = t.handle.el.style,
            a = t.front.el.style,
            S = Sys.utils.getPrefixedCSSProperty("animation"),
            o = ["top", "left", "bottom", "right", "width", "height", "opacity"];
        for (n[S] = "none", a[S] = "none", e = -1; ++e < o.length;) n[o[e]] = "", i[o[e]] = ""
    },
    setupDOMStructure: function() {
        var e = this,
            t = Utils.Platform.getOrientation(),
            n = Resources.readData("queryData").enableDefaultSwedenButtons;
        e.container = new Sys.Element({
            tag: "div",
            cls: e.BASE_CSS + " " + e.LANDSCAPE_BG_URI,
            renderTo: e.RENDER_TARGET
        }), e.handle = new Sys.Element({
            tag: "div",
            cls: e.HANDLE_CSS + " " + e[t + "_HANDLE_CSS"].close,
            renderTo: e.RENDER_TARGET
        }), e.front = new Sys.Element({
            tag: "div",
            cls: e[t + "_FRONT_CSS"] + " " + e.SLIDER_BUTTON_URI
        }), e.back = new Sys.Element({
            tag: "div",
            cls: e[t + "_BACK_CSS"] + " " + e.LANDSCAPE_BG_URI
        }), e.icon = new Sys.Element({
            tag: "div",
            cls: e.ICON_BASE_CSS + " " + e[t + "_ICON_CSS"] + " " + e.ICON_CLOSE_CSS + " " + e.ICON_URI
        }), e.childrenContainer = new Sys.Element({
            tag: "div",
            cls: e.BASE_CHILDREN_CSS + " " + e[t + "_CHILDREN_CSS"]
        }), e.autoPlaySlide = new Sys.Element({
            tag: "div",
            cls: e.BASE_SLIDE_CSS + " " + e[t + "_AUTOPLAY_SLIDE_CSS"] + " " + e.AUTOPLAY_SLIDE_CLOSE + " " + e.PORTRAIT_BG_URI
        }), e.quickSpinSlide = new Sys.Element({
            tag: "div",
            cls: e.BASE_SLIDE_CSS + " " + e[t + "_QUICKSPIN_SLIDE_CSS"] + " " + e.QUICKSPIN_SLIDE_CLOSE + " " + e.PORTRAIT_BG_URI
        }), e.updateOnOrientation = {
            front: "_FRONT_CSS",
            back: "_BACK_CSS",
            icon: "_ICON_CSS",
            autoPlaySlide: "_AUTOPLAY_SLIDE_CSS",
            quickSpinSlide: "_QUICKSPIN_SLIDE_CSS",
            childrenContainer: "_CHILDREN_CSS"
        }, e.container.add(e.front), e.front.add(e.icon), e.container.add(e.back), e.container.add(e.childrenContainer), e.model.readData("preventDrawAutoplay") || e.container.add(e.autoPlaySlide), e.container.add(e.quickSpinSlide), n ? e.positionMenu(!1) : e.positionMenu(e.model.readData("leftHandMode"))
    },
    setupAnimations: function() {
        var e = this;
        e.animations = {}, e.setupLandscapeAnimations(), e.setupPortraitAnimation(), e.model.storeData("animationReady", !0)
    },
    setupLandscapeAnimations: function() {
        var e = this,
            t = e.LANDSCAPE_CLOSEDSIZE,
            n = e.LANDSCAPE_FRONTSTARTPOS,
            i = e.LANDSCAPE_FRONTENDPOS,
            a = e.LANDSAPE_BACKSTARTPOS,
            S = e.LANDSCAPE_BACKENDPOS,
            o = e.LANDSCAPE_OPENSIZE,
            r = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_openFrontLandscape",
                frames: {
                    "0%": {
                        left: n
                    },
                    "100%": {
                        left: i
                    }
                },
                duration: 50,
                delay: 4,
                fillMode: "both"
            }),
            s = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_closeFrontLandscape",
                frames: {
                    "0%": {
                        left: i
                    },
                    "100%": {
                        left: n
                    }
                },
                duration: 124,
                delay: 126,
                fillMode: "both"
            }),
            l = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_openBackLandscape",
                frames: {
                    "0%": {
                        width: a
                    },
                    "100%": {
                        width: S
                    }
                },
                duration: 5,
                delay: 45,
                fillMode: "both"
            }),
            c = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_closeBackLandscape",
                frames: {
                    "0%": {
                        width: S
                    },
                    "100%": {
                        width: a
                    }
                },
                duration: 20,
                delay: 109,
                fillMode: "both"
            }),
            d = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_openAnimationLandscape",
                frames: {
                    "0%": {
                        width: t
                    },
                    "100%": {
                        width: o
                    }
                },
                duration: 250,
                fillMode: "both"
            }),
            _ = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_closeAnimationLandscape",
                frames: {
                    "0%": {
                        width: o
                    },
                    "100%": {
                        width: t
                    }
                },
                duration: 250,
                fillMode: "both"
            }),
            u = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_activateLandscape",
                frames: {
                    "0%": {
                        width: "0.00rem"
                    },
                    "100%": {
                        width: t
                    }
                },
                duration: 100,
                fillMode: "both"
            }),
            C = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_itemInLandscape",
                frames: {
                    "0%": {
                        opacity: 0,
                        visibility: "visible"
                    },
                    "100%": {
                        opacity: 1
                    }
                },
                duration: 150,
                delay: 200,
                fillMode: "both"
            }),
            A = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_itemOutLandscape",
                frames: {
                    "0%": {
                        opacity: 1
                    },
                    "100%": {
                        opacity: 0,
                        visibility: "hidden"
                    }
                },
                duration: 50,
                fillMode: "both"
            });
        e.animations.LANDSCAPE = {
            open: d,
            close: _,
            openChild: C,
            closeChild: A,
            activate: u,
            openFront: r,
            closeFront: s,
            openBack: l,
            closeBack: c
        }
    },
    setupPortraitAnimation: function() {
        var e = this,
            t = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_activatePortrait",
                frames: {
                    "0%": {
                        height: "0.00rem"
                    },
                    "100%": {
                        height: "1.60rem"
                    }
                },
                duration: 200,
                fillMode: "both"
            });
        e.animations.PORTRAIT = {
            activate: t
        }
    },
    positionMenu: function(e) {
        var t = this,
            n = t.handle,
            i = t.container;
        e ? (n.addCSSClass(t.HANDLE_LEFT_SIDE_CSS), i.addCSSClass(t.MENU_LEFT_SIDE_CSS)) : (n.removeCSSClass(t.HANDLE_LEFT_SIDE_CSS), i.removeCSSClass(t.MENU_LEFT_SIDE_CSS))
    },
    removeSettingSlide: function(e) {
        this.container.remove(e)
    },
    removeAndDisableSetting: function(e) {
        var t = this;
        e += "Slide", t.hasOwnProperty(e) && t.removeSettingSlide(t[e])
    },
    addSettingSlide: function(e) {
        this.container.add(e)
    },
    addAndEnableSetting: function(e) {
        e += "Slide", this.hasOwnProperty(e) && this.addSettingSlide(this[e])
    }
}, Interface.QuickSettingsMenuBaseView = Sys.extend(Core.View, Interface.QuickSettingsMenuBaseView, "Interface.QuickSettingsMenuBaseView");
Sys.ns("Interface"), Interface.QuickSettingsMenuTabletView = {
    BASE_CSS: "interface-quickSettingsMenu_base",
    PORTRAIT_CSS: "interface-quickSettingsMenu_landscape",
    LANDSCAPE_CSS: "interface-quickSettingsMenu_landscape_tablet",
    LANDSCAPE_BG_URI: "interface-quickSettingsMenu_sliderBg_landscape_uri",
    PORTRAIT_BG_URI: "interface-quickSettingsMenu_sliderBg_landscape_uri",
    LANDSCAPE_FRONT_CSS: "interface-quickSettingsMenu_front_landscape_tablet",
    PORTRAIT_FRONT_CSS: "interface-quickSettingsMenu_front_landscape",
    LANDSCAPE_BACK_CSS: "interface-quickSettingsMenu_back_landscape",
    PORTRAIT_BACK_CSS: "interface-quickSettingsMenu_back_landscape",
    HANDLE_CSS: "interface-quickSettingsMenu_handle",
    SLIDER_BUTTON_URI: "interface-quickSettingsMenu_sliderButton_uri",
    ICON_BASE_CSS: "interface-quickSettingsMenu_icon_base",
    LANDSCAPE_ICON_CSS: "interface-quickSettingsMenu_icon_landscape",
    PORTRAIT_ICON_CSS: "interface-quickSettingsMenu_icon_landscape",
    ICON_CLOSE_CSS: "interface-quickSettingsMenu_icon_close",
    ICON_OPEN_CSS: "interface-quickSettingsMenu_icon_open",
    ICON_URI: "interface-quickSettingsMenu_icon_uri",
    BASE_SLIDE_CSS: "interface-quickSettingsMenu_portraitSlide",
    LANDSCAPE_AUTOPLAY_SLIDE_CSS: "interface-quickSettingsMenu_autoPlaySlide_landscape",
    PORTRAIT_AUTOPLAY_SLIDE_CSS: "interface-quickSettingsMenu_autoPlaySlide_landscape",
    AUTOPLAY_SLIDE_CLOSE: "interface-quickSettingsMenu_autoPlaySlide_close",
    AUTOPLAY_SLIDE_OPEN: "interface-quickSettingsMenu_autoPlaySlide_open",
    LANDSCAPE_QUICKSPIN_SLIDE_CSS: "interface-quickSettingsMenu_quickSpinSlide_landscape",
    PORTRAIT_QUICKSPIN_SLIDE_CSS: "interface-quickSettingsMenu_quickSpinSlide_landscape",
    QUICKSPIN_SLIDE_CLOSE: "interface-quickSettingsMenu_quickSpinSlide_close",
    QUICKSPIN_SLIDE_OPEN: "interface-quickSettingsMenu_quickSpinSlide_open",
    BASE_CHILDREN_CSS: "interface-quickSettingsMenu_children_base",
    LANDSCAPE_CHILDREN_CSS: "interface-quickSettingsMenu_children_landscape_base",
    PORTRAIT_CHILDREN_CSS: "interface-quickSettingsMenu_children_landscape_base",
    CHILD_CSS: "interface-quickSettingsMenu_child_base",
    PORTRAIT_CHILD_CSS: "interface-quickSettingsMenu_child_landscape",
    LANDSCAPE_CHILD_CSS: "interface-quickSettingsMenu_child_landscape",
    LANDSCAPE_HANDLE_CSS: {
        open: "interface-quickSettingsMenu_handle_open_landscape_tablet",
        close: "interface-quickSettingsMenu_handle_close_landscape"
    },
    PORTRAIT_HANDLE_CSS: {
        open: "interface-quickSettingsMenu_handle_open_landscape",
        close: "interface-quickSettingsMenu_handle_close_landscape"
    },
    LANDSCAPE_FRONTSTARTPOS: "-1.06rem",
    LANDSAPE_BACKSTARTPOS: "-0.40rem",
    moveChildren: function() {},
    append: function(e, n) {
        this.childrenContainer.add(n)
    },
    updateStyle: function() {
        this.resetPosition()
    },
    setHandlePostion: function() {},
    openPORTRAIT: function() {
        var e = this,
            n = e.model.readData("status"),
            t = e.getNewStatus(n);
        e.back.el.style.display = "block", e.childrenContainer.el.style.display = "block", Sys.iterate(e.children, function(n) {
            e.animations.PORTRAIT.openChild.run(e.children[n].el)
        }), e.handle.replaceCSSClass(e.PORTRAIT_HANDLE_CSS[n], e.PORTRAIT_HANDLE_CSS[t]), e.animations.PORTRAIT.open.run(e.container.el), e.animations.PORTRAIT.openFront.run(e.front.el), e.animations.PORTRAIT.openBack.run(e.back.el)
    },
    closePORTRAIT: function(e) {
        var n = this,
            t = n.model.readData("status"),
            i = "close" === t ? "open" : "close";
        Sys.iterate(n.children, function(e) {
            n.animations.PORTRAIT.closeChild.run(n.children[e].el)
        }), n.handle.replaceCSSClass(n.PORTRAIT_HANDLE_CSS[t], n.PORTRAIT_HANDLE_CSS[i]), n.animations[e].close.run(n.container.el), n.animations[e].closeFront.run(n.front.el), n.animations[e].closeBack.run(n.back.el)
    },
    onPortrait: function() {
        var e = this,
            n = e.model.readData("status"),
            t = Sys.utils.getPrefixedCSSProperty("animation"),
            i = Sys.isDefined(e.animations) && e.model.readData("activated");
        Utils.Platform.getOrientation() !== this.currentOrientation && (e.adaptToOrientation("PORTRAIT"), i && (e.container.el.style[t] = "none", "close" === n ? (e.animations.PORTRAIT.activate.run(e.container.el), e.back.el.style.display = "none") : (e.childrenContainer.el.style.display = "block", e.open()), e.animations.PORTRAIT[n + "Front"].run(e.front.el), e.animations.PORTRAIT[n + "Back"].run(e.back.el)), e.currentOrientation = "PORTRAIT")
    },
    setupPortraitAnimation: function() {
        var e = this,
            n = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_openFrontPortrait",
                frames: {
                    "0%": {
                        left: "-0.64rem"
                    },
                    "100%": {
                        left: "-0.24rem"
                    }
                },
                duration: 50,
                delay: 4,
                fillMode: "both"
            }),
            t = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_closeFrontPortrait",
                frames: {
                    "0%": {
                        left: "-0.24rem"
                    },
                    "100%": {
                        left: "-0.64rem"
                    }
                },
                duration: 124,
                delay: 126,
                fillMode: "both"
            }),
            i = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_openBackPortrait",
                frames: {
                    "0%": {
                        width: "0.00rem"
                    },
                    "100%": {
                        width: "0.50rem"
                    }
                },
                duration: 5,
                delay: 40,
                fillMode: "both"
            }),
            a = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_closeBackPortrait",
                frames: {
                    "0%": {
                        width: "0.50rem"
                    },
                    "100%": {
                        width: "0.00rem"
                    }
                },
                duration: 20,
                delay: 111,
                fillMode: "both"
            }),
            c = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_openAnimationPortrait",
                frames: {
                    "0%": {
                        width: "0.00rem"
                    },
                    "100%": {
                        width: "2.70rem"
                    }
                },
                duration: 250,
                fillMode: "both"
            }),
            S = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_closeAnimationPortrait",
                frames: {
                    "0%": {
                        width: "2.70rem"
                    },
                    "100%": {
                        width: "0.00rem"
                    }
                },
                duration: 250,
                fillMode: "both"
            }),
            r = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_activatePortrait",
                frames: {
                    "0%": {
                        width: "0.00rem"
                    },
                    "100%": {
                        width: "0.00rem"
                    }
                },
                duration: 100,
                fillMode: "both"
            }),
            s = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_itemInPortrait",
                frames: {
                    "0%": {
                        opacity: 0
                    },
                    "100%": {
                        opacity: 1
                    }
                },
                duration: 100,
                delay: 125,
                fillMode: "both"
            }),
            o = new Interface.utils.CSSAnimation({
                name: "interface-quickSettingsMenu_itemOutLPortrait",
                frames: {
                    "0%": {
                        opacity: 1
                    },
                    "100%": {
                        opacity: 0
                    }
                },
                duration: 50,
                fillMode: "both"
            });
        e.animations.PORTRAIT = {
            open: c,
            close: S,
            openChild: s,
            closeChild: o,
            activate: r,
            openFront: n,
            closeFront: t,
            openBack: i,
            closeBack: a
        }
    }
}, Interface.QuickSettingsMenuTabletView = Sys.extend(Interface.QuickSettingsMenuBaseView, Interface.QuickSettingsMenuTabletView, "Interface.QuickSettingsMenuTabletView");
Sys.ns("Animation"), Animation.BufferedReelModel = function(t) {
    Sys.applyProperties(this, t), this.slotLength = this.symbolLength + this.symbolSpacing, this.visibleSymbolsCount = Math.ceil(this.visibleWindowLength / this.slotLength) + 1, this.symbolSpacing < 0 ? (this.leadingSymbolsCount = Math.ceil(this.symbolLength / this.slotLength), this.visibleSymbolsCount += this.leadingSymbolsCount) : this.leadingSymbolsCount = 0, this.symbolBufferMaxLength = this.calculateSymbolBufferSize(), this.recalculateStartDuration(), this.reset()
}, Animation.BufferedReelModel.prototype = {
    calculateSymbolBufferSize: function() {
        var t, e = 0;
        for (t = 0; t < this.endBounceSupportPointOffsets.length; t++) e = Math.max(e, Math.abs(this.endBounceSupportPointOffsets[t]));
        return this.startBounceSupportPointOffset < 0 ? e = Math.max(e, Math.abs(this.startBounceSupportPointOffset)) : this.startBounceSupportPointOffset > this.visibleWindowLength && (e = Math.max(e, this.startBounceSupportPointOffset - this.visibleWindowLength)), this.visibleSymbolsCount + Math.ceil(e / this.slotLength)
    },
    refresh: function(t) {
        Sys.applyProperties(this, t), this.slotLength = this.symbolLength + this.symbolSpacing, this.visibleSymbolsCount = Math.ceil(this.visibleWindowLength / this.slotLength) + 1, this.symbolSpacing < 0 ? (this.leadingSymbolsCount = Math.ceil(this.symbolLength / this.slotLength), this.visibleSymbolsCount += this.leadingSymbolsCount) : this.leadingSymbolsCount = 0, this.windowToBufferOffset = this.symbolLength, "stopping" === this.getState() && (this.targetOffset = this.getDistanceToStopPosition(), this.stopDuration = Math.round(this.timeToMoveOneSlot * (this.targetOffset / this.slotLength)), this.usedDuration = 0)
    },
    reset: function() {
        this.symbolBuffer = [], this.targetOffset = 0, this.usedDuration = 0, this.stopDuration = 0, this.startedStoppingAt = null, this.spinStartedAt = 0, this.currentBounce = this.endBounceSupportPointOffsets.length, this.hasCompletedSpin = !0, this.hasCompletedBounce = !0, this.outcomeVisibleOnReel = !0, this.state = "stopping", this.moveToInitialPosition()
    },
    moveToInitialPosition: function() {
        this.windowToBufferOffset = 0, this.moveDistance(this.symbolBufferMaxLength * this.slotLength + this.outcomeOffset)
    },
    setInitialOutcome: function(t) {
        this.moveDistance(this.symbolBufferMaxLength * this.slotLength), this.nextOutcomeSymbols = t, this.outcomeSymbolsInserted = 0, this.moveDistance(this.numberOfOutcomeSymbols * this.slotLength), this.moveDistance(this.getDistanceToStopPosition())
    },
    updateOutcome: function(t, e) {
        var i = this.getFirstOutcomeSymbolIndex() + t;
        t >= 0 && t < this.numberOfOutcomeSymbols && !isNaN(i) && i >= 0 && (this.symbolBuffer[i].symbol = e)
    },
    setBufferOffset: function(t) {
        var e = Math.round((t - this.windowToBufferOffset) / this.slotLength);
        e > 0 && this.addSymbolsToBuffer(e, !0), this.windowToBufferOffset = t
    },
    getFirstOutcomeSymbolIndex: function() {
        var t, e = !1;
        for (t = -1; ++t <= this.symbolBuffer.length;)
            if (this.symbolBuffer[t] && this.symbolBuffer[t].isOutcomeSymbol) e = !0;
            else if (e) return t - this.numberOfOutcomeSymbols;
        return NaN
    },
    storeSpinOutcome: function(t) {
        this.nextOutcomeSymbols = t
    },
    start: function(t) {
        this.spinStartedAt = Date.now() + (t || 0), this.startedStoppingAt = null, this.usedDuration = 0, this.targetOffset = this.visibleWindowLength + this.slotLength * this.leadingSymbolsCount, this.state = "starting", this.reelStarted = !1, this.hasCompletedSpin = !1, this.hasCompletedBounce = !1, this.hasBeenToldToStop = !1, Sys.isObj(this.reelStartSpinParameters) && (this.state = "windingUp", this.spinningSpeed = this.slotLength / this.timeToMoveOneSlot, this.windDownAcceleration = this.spinningSpeed / this.reelStartSpinParameters.windDownDuration)
    },
    stop: function() {
        this.hasBeenToldToStop = !0
    },
    getDistanceToStopPosition: function() {
        var t = this.getFirstOutcomeSymbolIndex() * this.slotLength,
            e = Sys.Math.absoluteDifference(t, this.windowToBufferOffset);
        return t > this.windowToBufferOffset && (e *= -1), e + this.outcomeOffset
    },
    move: function(t) {
        Date.now() >= this.spinStartedAt && (this.reelStarted || (this.reelStarted = !0, this.reelStartCallback()), this.moveDistance(this.getDistance(t)))
    },
    moveDistance: function(t) {
        var e, i;
        this.windowToBufferOffset -= t, this.windowToBufferOffset < this.slotLength * this.leadingSymbolsCount && (e = Math.ceil(Math.abs(this.windowToBufferOffset) / this.slotLength), i = this.addSymbolsToBuffer(e, "stopping" === this.state), this.windowToBufferOffset += e * this.slotLength, this.containsOutcome(i) && "spinning" === this.state && this.handleOutcomeEnteredReelEvent())
    },
    presentOutcome: function() {
        var t;
        for (this.hasCompletedSpin = !0, this.state = "presenting", t = this.getDistanceToStopPosition(); isNaN(t);) this.moveDistance(this.slotLength), t = this.getDistanceToStopPosition();
        this.moveDistance(t), this.state = "stopping"
    },
    addSymbolsToBuffer: function(t, e) {
        var i = this.symbolRetrievalFunction(t, e);
        return this.symbolBuffer = i.concat(this.symbolBuffer.splice(0, this.symbolBufferMaxLength - t)), i
    },
    containsOutcome: function(t) {
        var e;
        for (e = -1; ++e < t.length;)
            if (t[e].isOutcomeSymbol) return !0;
        return !1
    },
    handleOutcomeEnteredReelEvent: function() {
        this.startedStoppingAt = Date.now(), this.usedDuration = 0, this.currentBounce = 0, this.state = "stopping", this.targetOffset = this.getDistanceToStopPosition(), this.stopDuration = Math.round(this.timeToMoveOneSlot * (this.targetOffset / this.slotLength)), Sys.isNumber(this.reelStopVelocityFactor) && (this.reelStopVelocityFactor = this.reelStopVelocityFactor < .1 ? .1 : this.reelStopVelocityFactor, this.targetOffset += this.endBounceSupportPointOffsets[0], this.stopVelocity = this.reelStopVelocityFactor * this.spinningSpeed, this.stopDeceleration = this.calculateAcceleration(this.stopVelocity, this.spinningSpeed, this.targetOffset), this.currentStopDistance = 0, this.currentVelocity = this.spinningSpeed, this.stopDuration = Math.round((this.stopVelocity - this.spinningSpeed) / this.stopDeceleration)), this.outcomeVisibleOnReel = !1
    },
    calculateAcceleration: function(t, e, i) {
        return (t * t - e * e) / (2 * i)
    },
    calculateDistance: function(t, e, i) {
        return t * i + .5 * e * i * i
    },
    getDistance: function(t) {
        switch (this.state) {
            case "windingUp":
                return this.getWindingUpDistance(t);
            case "windingDown":
                return this.getWindingDownDistance(t);
            case "starting":
                return this.getStartingDistance(t);
            case "stopping":
                return this.getStoppingDistance(t);
            default:
                return this.getSpinningDistance(t)
        }
    },
    getWindingUpDistance: function(t) {
        var e = this.reelStartSpinParameters,
            i = this.getInterpolatedDistance(e.windUpDistance, e.windUpDistance, this.usedDuration, t, e.windUpDuration);
        return this.usedDuration += t, 1 === i.progressAfterTime && (this.state = "windingDown", this.usedDuration = 0, this.currentVelocity = 0), i.distance
    },
    getWindingDownDistance: function(t) {
        var e = this.calculateDistance(this.currentVelocity, this.windDownAcceleration, t);
        return this.currentVelocity = this.currentVelocity + this.windDownAcceleration * t, this.currentVelocity >= this.spinningSpeed && (this.state = "spinning", this.reelStartCompleteCallback()), e
    },
    getStartingDistance: function(t) {
        var e = this.getInterpolatedDistance(this.targetOffset, this.startBounceSupportPointOffset, this.usedDuration, t, this.startDuration);
        return this.usedDuration += t, 1 === e.progressAfterTime && (this.state = "spinning", this.reelStartCompleteCallback()), e.distance
    },
    getStoppingDistance: function(t) {
        var e, i, s = Sys.clone(this.endBounceSupportPointOffsets),
            n = Sys.clone(this.endBounceDurations),
            o = Sys.utils.initArray(s.length, 0);
        return Sys.isNumber(this.reelStopVelocityFactor) && (o[0] = -1 * s[0], s[0] = o[0] / 2, n[0] = n[0] / 2), this.hasCompletedSpin ? this.currentBounce < s.length && !this.hasCompletedBounce ? (e = this.getInterpolatedDistance(o[this.currentBounce], s[this.currentBounce], this.usedDuration, t, n[this.currentBounce]), i = e.distance, this.usedDuration += t, 1 === e.progressAfterTime && (this.currentBounce++, this.usedDuration = 0), i) : (this.hasCompletedBounce || (this.hasCompletedBounce = !0, this.reelStoppedCallback()), 0) : (Sys.isNumber(this.reelStopVelocityFactor) ? (i = this.calculateDistance(this.currentVelocity, this.stopDeceleration, t), this.usedDuration += t, this.currentStopDistance + i > this.targetOffset && (i = this.targetOffset - this.currentStopDistance > 0 ? this.targetOffset - this.currentStopDistance : 0), this.currentVelocity = this.currentVelocity + this.stopDeceleration * t, this.currentStopDistance += i, this.currentVelocity <= this.stopVelocity && this.currentStopDistance === this.targetOffset && (this.hasCompletedSpin = !0, this.usedDuration = 0, this.reelBounceStartCallback())) : (e = this.getInterpolatedDistance(this.targetOffset, this.targetOffset / 2, this.usedDuration, t, this.stopDuration), i = e.distance, this.usedDuration += t, 1 === e.progressAfterTime && (this.hasCompletedSpin = !0, this.usedDuration = 0, this.reelBounceStartCallback())), i)
    },
    getInterpolatedDistance: function(t, e, i, s, n) {
        var o = Math.min(1, i / n),
            h = Animation.utils.getInterpolationValue(0, t, o, {
                type: "bezier",
                support: e
            }),
            r = Math.min(1, (i + s) / n);
        return {
            distance: Animation.utils.getInterpolationValue(0, t, r, {
                type: "bezier",
                support: e
            }) - h,
            progressAfterTime: r
        }
    },
    getSpinningDistance: function(t) {
        var e = t / this.timeToMoveOneSlot;
        return Math.round(e * this.slotLength)
    },
    getSymbolsToRender: function() {
        var t, e, i, s, n = [],
            o = Math.floor(this.windowToBufferOffset / this.slotLength) - this.leadingSymbolsCount;
        for (o = Math.max(0, o), t = Math.min(this.visibleSymbolsCount, this.symbolBuffer.length - o), e = -1; ++e < t;) i = o + e, s = this.symbolBuffer[i], s.position = i * this.slotLength - Math.round(this.windowToBufferOffset), n.push(s), this.outcomeVisibleOnReel || (this.reelStartedStoppingCallback(), this.outcomeVisibleOnReel = !0);
        return n
    },
    getState: function() {
        return this.state
    },
    getStartTime: function() {
        return this.spinStartedAt
    },
    getStartedStoppingTime: function() {
        return this.startedStoppingAt
    },
    getStopDuration: function() {
        return this.stopDuration
    },
    isStopping: function() {
        return this.hasBeenToldToStop
    },
    isSpinning: function() {
        return "spinning" === this.state
    },
    setTimeToMoveOneSlot: function(t) {
        this.timeToMoveOneSlot = t, this.recalculateStartDuration()
    },
    recalculateStartDuration: function() {
        Sys.isObj(this.reelStartSpinParameters) || (this.startDuration = this.timeToMoveOneSlot * ((this.visibleWindowLength + 2 * Math.abs(this.startBounceSupportPointOffset)) / this.slotLength))
    },
    setReelStartSpinParameters: function(t) {
        this.reelStartSpinParameters = t
    },
    setEndBounceSupportPointOffsets: function(t) {
        this.endBounceSupportPointOffsets = t
    },
    setEndBounceDurations: function(t) {
        this.endBounceDurations = t
    }
};
Sys.ns("Integration"), Integration.PluginMenu = {
    constructor: function() {
        Integration.PluginMenu.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["orientation"]
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Integration.PluginMenuController,
            view: Integration.PluginMenuBaseView,
            model: Integration.PluginMenuModel
        }
    }
}, Integration.PluginMenu = Sys.extend(Core.Module, Integration.PluginMenu, "Integration.PluginMenu");
Sys.ns("Integration"), Integration.PluginMenuController = {
    constructor: function() {
        Integration.PluginMenuController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this,
            t = {
                "notify:stateHandler.enteringBeforeLoaderCloseState": e.onBeforeLoaderClose,
                "notify:settingsMenu.open": e.view.hideButton.bind(e.view),
                "notify:settingsMenu.closed": e.onSettingsMenuClosed,
                "notify:scaling.gameSizeChanged": e.onGameSizeChanged,
                "request:pluginMenu.init": e.initParams,
                "request:pluginMenu.activate": e.activate,
                "request:pluginMenu.deactivate": e.deactivate,
                "request:pluginMenu.notification": e.onNotification,
                "request:pluginMenu.changeMenuHeight": e.onChangeMenuHeight,
                "request:pluginMenu.enable": e.view.enableButton.bind(e.view, "PLUGIN_MENU"),
                "request:pluginMenu.disable": e.view.disableButton.bind(e.view, "PLUGIN_MENU"),
                "notify:stateHandler.enteringIdleState": e.view.enableButton.bind(e.view, "IDLE_STATE"),
                "notify:stateHandler.leavingIdleState": e.view.disableButton.bind(e.view, "IDLE_STATE"),
                "notify.fullscreen.enteringFullscreen": e.onEnteringFullscreen,
                "notify.fullscreen.leavingFullscreen": e.onLeavingFullscreen,
                "view:buttonClicked": e.onButtonClicked
            };
        t["notify:userInputManager." + e.MODULE_NAME + "ExclusiveStart"] = e.onUserInputStart, t["notify:userInputManager." + e.MODULE_NAME + "ExclusiveEnd"] = e.onUserInputEnd, e.on(t)
    },
    initParams: function(e, t, n) {
        var i = this;
        "" !== e && "default" !== e && (i.view.buttonImageExternalUrl = e), i.setMenuHeight(t), n && i.model.storeData("transparent", !0), i.model.storeData("pluginMenuInitialized", !0), i.model.storeData("pluginMenuButtonRequestedByPlugin", !0)
    },
    setMenuHeight: function(e) {
        var t = this,
            n = t.view.getMaxHeight();
        return !!Sys.isDefined(e) && (Sys.isObj(e) ? (t.model.storeData("manualSetHeight", e), n = "PORTRAIT" === t.model.readData("currentOrientation") ? e.portrait : e.landscape) : Sys.isNumber(e) && e > 0 && (t.model.storeData("manualSetHeight", e), n = e), t.view.height = n, !0)
    },
    onBeforeLoaderClose: function() {
        this.view.setupContent(), this.view.disableButton("IDLE_STATE")
    },
    onChangeMenuHeight: function(e) {
        var t = this;
        t.setMenuHeight(e) && t.view.refresh()
    },
    onButtonClicked: function() {
        var e = this;
        !1 === e.model.readData("pluginMenuActivated") ? e.activate() : e.deactivate()
    },
    activate: function() {
        var e = this;
        e.fireEvent("request:userInputManager.activateExclusivity", e.MODULE_NAME), e.fireEvent("request:quickSettingsMenu.externalDeactivate", e.MODULE_NAME), e.fireEvent("request:spinButton.hide", e.MODULE_NAME), e.view.activatePluginMenu(), e.model.storeData("pluginMenuActivated", !0), Resources.storeData("pluginMenuOpen", !0), e.fireEvent("notify:pluginMenu.activated")
    },
    deactivate: function() {
        var e = this;
        e.fireEvent("request:userInputManager.deactivateExclusivity", e.MODULE_NAME), e.fireEvent("request:quickSettingsMenu.externalActivate", e.MODULE_NAME), e.fireEvent("request:spinButton.show", e.MODULE_NAME), e.view.deactivatePluginMenu(), e.model.storeData("pluginMenuActivated", !1), Resources.storeData("pluginMenuOpen", !1), e.fireEvent("notify:pluginMenu.deactivated")
    },
    onEnteringFullscreen: function() {
        this.model.storeData("disableUserInteraction", !1)
    },
    onLeavingFullscreen: function() {
        this.model.storeData("disableUserInteraction", !0)
    },
    onUserInputStart: function(e) {
        var t, n = this;
        n.model.readData("disableUserInteraction") || (t = !Sys.UserInputUtils.isCoordinateTarget(n.view.pluginIframe, e), n.model.storeData("clickedOutsideIframe", t))
    },
    onUserInputEnd: function(e) {
        var t, n = this;
        n.model.readData("disableUserInteraction") || (t = !Sys.UserInputUtils.isCoordinateTarget(n.view.pluginIframe, e), n.model.readData("clickedOutsideIframe") && t && n.deactivate())
    },
    onNotification: function(e) {
        this.view.changeToNotificationImage(e)
    },
    onGameSizeChanged: function() {
        var e = this;
        "function" == typeof e.view.refresh && (e.model.storeData("gameSizeChangedTriggered", !0), e.view.refresh())
    },
    onSettingsMenuClosed: function() {
        !0 === this.model.readData("pluginMenuInitialized") && this.view.showButton()
    }
}, Integration.PluginMenuController = Sys.extend(Core.Controller, Integration.PluginMenuController, "Integration.PluginMenuController");
Sys.ns("Integration"), Integration.PluginMenuBaseView = {
    HEIGHT: 0,
    PORTRAIT_TOP_OFFSET: 0,
    BUTTON_EXTERNAL_IMAGE_URL: "",
    BUTTON_DEFAULT_IMAGE_CSS: "integration-pluginMenu_button_uri",
    BUTTON_DEFAULT_NOTIFICATION_IMAGE_CSS: "integration-pluginMenu_button_notification_uri",
    BASE_BUTTON_CSS: "integration-pluginMenuButton_baseButton",
    PORTRAIT_CSS: "integration-pluginMenuButton_portraitBase",
    LANDSCAPE_CSS: "integration-pluginMenuButton_landscapeBase",
    DARK_OVERLAY_BASE_CSS: "integration-pluginMenuDarkOverlay_baseOverlay",
    DARK_OVERLAY_PORTRAIT_CSS: "integration-pluginMenuDarkOverlay_portraitBase",
    DARK_OVERLAY_LANDSCAPE_CSS: "integration-pluginMenuDarkOverlay_landscapeBase",
    SWEDEN_BUTTONS_LANDSCAPE_HEIGHT: 53,
    RENDER_TARGET: "gameWrapper",
    constructor: function() {
        var e = this;
        Integration.PluginMenuBaseView.superclass.constructor.apply(e, arguments), e.height = e.HEIGHT, e.portraitTopOffset = e.PORTRAIT_TOP_OFFSET, e.buttonImageExternalUrl = e.BUTTON_EXTERNAL_IMAGE_URL, e.enableSwedenPlugin = !!Resources.readData("queryData") && Resources.readData("queryData").enableDefaultSwedenButtons, e.addScrollHandler()
    },
    setupContent: function() {
        var e = this;
        e.createDarkOverlay(), e.createMenuButton(), e.pluginIframe = document.getElementById("netEntExtendPlugin"), 0 !== e.height && (document.getElementById("gameWrapper").classList.add("pluginMenu"), e.showButton()), e.model.storeData("pluginMenuInitialized", !0)
    },
    addScrollHandler: function() {
        var e = this;
        document.addEventListener("scroll", function() {
            !e.model.readData("disableUserInteraction") && e.model.readData("pluginMenuActive") && window.scrollY > 0 && (window.scrollTo(0, 0), document.body.scrollTop = 0)
        })
    },
    createDarkOverlay: function() {
        var e = this;
        e.darkOverlay = new Sys.Element({
            tag: "div",
            id: "pluginMenuDarkOverlay",
            cls: e.DARK_OVERLAY_BASE_CSS,
            style: "display:none",
            renderTo: e.RENDER_TARGET
        })
    },
    createMenuButton: function() {
        var e = this;
        e.menuButton = new Interface.utils.DOMButton({
            id: "pluginMenuButton",
            baseCSS: e.BASE_BUTTON_CSS + " " + e.BUTTON_DEFAULT_IMAGE_CSS,
            renderTo: e.RENDER_TARGET,
            clickCallback: e.onButtonClick.bind(e)
        }), e.hideButton(), e.menuButtonSysElement = e.menuButton.getContainer(), "" !== e.buttonImageExternalUrl && (e.menuButtonSysElement.el.style["background-image"] = "url(" + e.buttonImageExternalUrl + ")")
    },
    onButtonClick: function() {
        this.fireEvent("view:buttonClicked"), this.changeToNormalImage()
    },
    activatePluginMenu: function() {
        var e = this;
        e.adjustHeight(), e.adjustTopOffset(), e.darkOverlay.el.style.display = "block", e.pluginIframe.height = e.height, e.pluginIframe.style.top = e.portraitTopOffset + "px", e.model.storeData("pluginMenuActive", !0), e.refresh()
    },
    deactivatePluginMenu: function() {
        this.pluginIframe.blur(), this.darkOverlay.el.style.display = "none", this.pluginIframe.height = 0, this.pluginIframe.style.top = 0, this.model.removeData("pluginMenuActive")
    },
    setStyle: function(e) {
        var t = this,
            n = e + "_CSS",
            a = "LANDSCAPE" === e ? "PORTRAIT_CSS" : "LANDSCAPE_CSS",
            i = "DARK_OVERLAY_" + e + "_CSS",
            r = "DARK_OVERLAY_" + e == "LANDSCAPE" ? "PORTRAIT_CSS" : "LANDSCAPE_CSS";
        Sys.isDefined(t.menuButtonSysElement) && Sys.isDefined(t[n]) && (t.menuButtonSysElement.removeCls(t[a]), t.menuButtonSysElement.addCls(t[n])), Sys.isDefined(t.darkOverlay) && Sys.isDefined(t[i]) && (t.darkOverlay.removeCls(t[r]), t.darkOverlay.addCls(t[i]))
    },
    showButton: function() {
        Resources.readData("pluginURL") && this.model.readData("pluginMenuButtonRequestedByPlugin") && 0 !== this.height && this.menuButton.show(this.MODULE_NAME)
    },
    hideButton: function() {
        this.menuButton.hide(this.MODULE_NAME)
    },
    enableButton: function(e) {
        this.menuButton.enable(e || this.MODULE_NAME)
    },
    disableButton: function(e) {
        this.menuButton.disable(e || this.MODULE_NAME)
    },
    adaptToOrientation: function(e) {
        var t = this,
            n = t.model;
        n.storeData("currentOrientation", e), t.setStyle(e), n.readData("gameSizeChangedTriggered") || t.refresh()
    },
    refresh: function() {
        var e = this;
        e.model.readData("pluginMenuInitialized") && (e.model.readData("transparent") && e.setIframeTransparent(), e.adjustHeight(), e.adjustTopOffset(), Sys.isDefined(e.model.readData("pluginMenuActive")) && (e.pluginIframe.height = e.height, "PORTRAIT" === e.model.readData("currentOrientation") ? e.pluginIframe.style.top = e.portraitTopOffset + "px" : this.enableSwedenPlugin && "LANDSCAPE" === e.model.readData("currentOrientation") ? e.pluginIframe.style.top = e.SWEDEN_BUTTONS_LANDSCAPE_HEIGHT + "px" : e.pluginIframe.style.top = "0"))
    },
    setIframeTransparent: function() {
        this.pluginIframe.style.backgroundColor = "transparent"
    },
    adjustHeight: function() {
        var e = this,
            t = e.getMaxHeight(),
            n = e.model.readData("manualSetHeight"),
            a = e.model.readData("currentOrientation");
        Sys.isObj(n) ? t = Math.min("PORTRAIT" === a ? n.portrait : n.landscape, t) : Sys.isNumber(n) && n < t && n > 0 && (t = Math.min(n, t)), e.model.storeData("maxHeight", t), e.height = t
    },
    adjustTopOffset: function() {
        var e = this,
            t = e.getPortraitTopOffset();
        e.model.storeData("portraitTopOffset", t), e.portraitTopOffset = t
    },
    changeToNotificationImage: function(e) {
        var t = this;
        "" !== e && "default" !== e ? t.menuButtonSysElement.el.style["background-image"] = "url(" + e + ")" : (t.menuButtonSysElement.removeCls(t.BUTTON_DEFAULT_IMAGE_CSS), t.menuButtonSysElement.addCls(t.BUTTON_DEFAULT_NOTIFICATION_IMAGE_CSS))
    },
    changeToNormalImage: function() {
        var e = this;
        "" !== e.buttonImageExternalUrl ? e.menuButtonSysElement.el.style["background-image"] = "url(" + e.buttonImageExternalUrl + ")" : (e.menuButtonSysElement.removeCls(e.BUTTON_DEFAULT_NOTIFICATION_IMAGE_CSS), e.menuButtonSysElement.addCls(e.BUTTON_DEFAULT_IMAGE_CSS))
    },
    getMaxHeight: function() {
        var e, t = this;
        return t.adjustTopOffset(), e = "PORTRAIT" === t.model.readData("currentOrientation") ? t.portraitTopOffset : document.getElementById("gameFooter").offsetHeight, this.enableSwedenPlugin && "LANDSCAPE" === t.model.readData("currentOrientation") && (e = document.getElementById("gameFooter").offsetHeight + t.SWEDEN_BUTTONS_LANDSCAPE_HEIGHT), Sys.utils.toInt(Environment.determineResolution().resolution.height + Environment.getSpaceBelowGame() - e)
    },
    getPortraitTopOffset: function() {
        var e = document.getElementById("settingsButtonBackground");
        return (e ? e.offsetTop : 0) + (e ? e.offsetHeight : 0)
    }
}, Integration.PluginMenuBaseView = Sys.extend(Core.View, Integration.PluginMenuBaseView, "Integration.PluginMenuBaseView");
Sys.ns("Integration"), Integration.PluginMenuMobileView = {
    PORTRAIT_CSS: "integration-pluginMenuButton_portraitBase_mobile",
    LANDSCAPE_CSS: "integration-pluginMenuButton_landscapeBase_mobile",
    DARK_OVERLAY_PORTRAIT_CSS: "integration-pluginMenuDarkOverlay_portraitBase_mobile",
    DARK_OVERLAY_LANDSCAPE_CSS: "integration-pluginMenuDarkOverlay_landscapeBase_mobile",
    constructor: function() {
        Integration.PluginMenuMobileView.superclass.constructor.apply(this, arguments)
    }
}, Integration.PluginMenuMobileView = Sys.extend(Integration.PluginMenuBaseView, Integration.PluginMenuMobileView, "Integration.PluginMenuMobileView");
Sys.ns("Integration"), Integration.PluginMenuModel = {
    constructor: function() {
        Integration.PluginMenuModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var n = this;
        n.storeData("pluginMenuActivated", !1), n.storeData("pluginMenuInitialized", !1), n.storeData("pluginMenuButtonRequestedByPlugin", !1)
    }
}, Integration.PluginMenuModel = Sys.extend(Core.Model, Integration.PluginMenuModel, "Integration.PluginMenuModel");
Sys.ns("Core"), Core.Fullscreen = {
    ENABLED: !0,
    constructor: function(e) {
        this.ENABLED = "boolean" == typeof e.enabled ? e.enabled : this.ENABLED, Core.Fullscreen.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        var e, r = Platform.isMQQBrowser,
            l = Platform.isHuaweiP8LiteDevice,
            o = Platform.isHuaweiP9Device,
            s = Platform.isHuaweiP9LiteDevice;
        return !Utils.Platform.isFullScreenAPISupported() || r && (l || o || s) ? Platform.isIOSDevice && Platform.isMobileDevice && Platform.isSafariBrowser && !Platform.isIOS13Device && (e = Core.FullscreenFallbackView) : e = Core.FullscreenView, Utils.Platform.inIframe() || !this.ENABLED || void 0 === e ? {
            controller: Core.Controller
        } : {
            controller: Core.FullscreenController,
            model: Core.FullscreenModel,
            view: e
        }
    }
}, Core.Fullscreen = Sys.extend(Core.Module, Core.Fullscreen, "Core.Fullscreen");
Sys.ns("Core"), Core.FullscreenController = {
    setupEvents: function() {
        Utils.Platform.isFullScreenAPISupported() ? this.on({
            "notify:userInputManager.userInputEnded": this.onUserInputEnded,
            "request:fullscreen.request": this.onRequestFullScreen,
            "request:fullscreen.exit": this.onExitFullScreen,
            "request:fullscreen.setSafeArea": this.onSetSafeArea,
            "request:fullscreen.removeSafeArea": this.onRemoveSafeArea
        }) : Utils.Platform.isStandAlone() || (this.on({
            "notify:loader.closed": this.onLoaderClosed,
            "notify:platform.resized": this.onResize,
            "notify:pluginMenu.deactivated": this.onResize
        }), this.view.enable())
    },
    onLoaderClosed: function() {
        this.view.isFullscreen() || this.model.readData("overlayEnabled") || this.showOverlay()
    },
    onResize: function() {
        this.view.isFullscreen() ? this.hideOverlay() : this.model.readData("overlayEnabled") || Resources.readData("pluginMenuOpen") || this.showOverlay(), window.scrollTo(0, 0)
    },
    showOverlay: function() {
        this.view.showOverlay(), this.fireEvent("request:userInputManager.allowPropagation"), this.fireEvent("request:userInputManager.activateExclusivity", "fullscreen"), this.model.storeData("overlayEnabled", !0)
    },
    hideOverlay: function() {
        this.view.hideOverlay(), this.fireEvent("request:userInputManager.disAllowPropagation"), this.fireEvent("request:userInputManager.deactivateExclusivity", "fullscreen"), this.model.storeData("overlayEnabled", !1)
    },
    onRequestFullScreen: function() {
        this.view.request()
    },
    onExitFullScreen: function() {
        this.view.exit()
    },
    onUserInputEnded: function(e) {
        this.view.isFullscreen() || this.model.isInSafeArea(e) || this.view.request()
    },
    onSetSafeArea: function(e, t) {
        this.model.setSafeArea(e, t)
    },
    onRemoveSafeArea: function(e) {
        this.model.removeSafeArea(e)
    }
}, Core.FullscreenController = Sys.extend(Core.Controller, Core.FullscreenController, "Core.FullscreenController");
Sys.ns("Core"), Core.FullscreenModel = {
    constructor: function() {
        Core.FullscreenModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        this.storeData("safeAreas", {}), this.storeData("overlayEnabled", !1)
    },
    setSafeArea: function(e, t) {
        var r = this.readData("safeAreas");
        r[e] = t, this.storeData("safeAreas", r)
    },
    removeSafeArea: function(e) {
        var t = this.readData("safeAreas");
        t[e] && (t[e] = null, this.storeData("safeAreas", t))
    },
    isElement: function(e, t) {
        var r = e.element;
        return r && Sys.UserInputUtils.isCoordinateTarget(r, t)
    },
    isClickedWithinCircle: function(e, t) {
        var r = t.x,
            s = t.y;
        return !e.height && Math.sqrt(Math.pow(r - e.x, 2) + Math.pow(s - e.y, 2)) < e.width
    },
    isClickedWithinRectangle: function(e, t) {
        var r = t.x,
            s = t.y;
        return r >= e.x && r <= e.x + e.width && s >= e.y && s <= e.y + e.height
    },
    isInSafeArea: function(e) {
        var t, r, s, a = this.readData("safeAreas"),
            i = Object.keys(a);
        if (e)
            for (r = 0, s = i.length; r < s; r++)
                if (t = a[i[r]], this.isElement(t, e) || this.isClickedWithinCircle(t, e) || this.isClickedWithinRectangle(t, e)) return !0;
        return !1
    }
}, Core.FullscreenModel = Sys.extend(Core.Model, Core.FullscreenModel, "Core.FullscreenModel");
Sys.ns("Core"), Core.FullscreenView = {
    EMULATED: !1,
    FULLSCREEN_MAP: [{
        fullscreenEnabled: "fullscreenEnabled",
        fullscreenElement: "fullscreenElement",
        onfullscreenchange: "onfullscreenchange",
        onfullscreenerror: "onfullscreenerror",
        exitFullscreen: "exitFullscreen",
        requestFullscreen: "requestFullscreen"
    }, {
        fullscreenEnabled: "webkitFullscreenEnabled",
        fullscreenElement: "webkitFullscreenElement",
        onfullscreenchange: "onwebkitfullscreenchange",
        onfullscreenerror: "onwebkitfullscreenerror",
        exitFullscreen: "webkitExitFullscreen",
        requestFullscreen: "webkitRequestFullscreen"
    }, {
        fullscreenEnabled: "mozFullScreenEnabled",
        fullscreenElement: "mozFullScreenElement",
        onfullscreenchange: "onmozfullscreenchange",
        onfullscreenerror: "onmozfullscreenerror",
        exitFullscreen: "mozCancelFullScreen",
        requestFullscreen: "mozRequestFullScreen"
    }, {
        fullscreenEnabled: "msFullscreenEnabled",
        fullscreenElement: "msFullscreenElement",
        onfullscreenchange: "MSFullscreenChange",
        onfullscreenerror: "MSFullscreenError",
        exitFullscreen: "msExitFullscreen",
        requestFullscreen: "msRequestFullscreen"
    }],
    constructor: function() {
        Core.FullscreenView.superclass.constructor.apply(this, arguments), this.FULLSCREEN_MAP.some(function(e) {
            return e.requestFullscreen in document.documentElement && (this.API = e, !0)
        }, this)
    },
    request: function() {
        this.EMULATED || document.documentElement[this.API.requestFullscreen]()
    },
    exit: function() {
        document[this.API.exitFullscreen]()
    },
    isFullscreen: function() {
        return Boolean(document[this.API.fullscreenElement])
    }
}, Core.FullscreenView = Sys.extend(Core.View, Core.FullscreenView, "Core.FullscreenView");
Sys.ns("Core"), Core.FullscreenFallbackView = {
    constructor: function(e) {
        Core.FullscreenFallbackView.superclass.constructor.apply(this, arguments), this.initialized = !1
    },
    enable: function() {
        this.initialized || (this.background = Sys.utils.createElement("div", ["fullscreen-background"]), this.instructions = this.createInstructionElement(), this.overlay = Sys.utils.createElement("div", ["fullscreen-overlay"]), document.body.appendChild(this.background), document.body.appendChild(this.instructions), document.body.appendChild(this.overlay), this.initialized = !0, this.hideOverlay()), this.isFullscreen || this.showOverlay()
    },
    disable: function() {
        this.overlay && (document.body.removeChild(this.background), document.body.removeChild(this.instructions), document.body.removeChild(this.overlay))
    },
    showOverlay: function() {
        this.overlay && !Resources.readData("pluginMenuOpen") && (this.background.dataset.active = !0, this.overlay.dataset.active = !0, this.instructions.dataset.active = !0)
    },
    hideOverlay: function() {
        this.overlay && (this.background.dataset.active = !1, this.overlay.dataset.active = !1, this.instructions.dataset.active = !1)
    },
    isFullscreen: function() {
        var e = Utils.Platform.getDeviceSize(),
            t = Utils.Platform.isLandscape() ? e.width : e.height;
        return t === window.innerHeight || window.innerHeight / t >= .9
    },
    createInstructionElement: function() {
        var e = Sys.utils.createElement("div", ["fullscreen-instructions"]),
            t = document.createElementNS("http://www.w3.org/2000/svg", "svg"),
            i = document.createElementNS("http://www.w3.org/2000/svg", "path");
        return t.classList.add("fullscreen-instructions-swipe"), t.setAttribute("viewBox", "0 0 24 24"), i.setAttribute("d", "M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z"), t.appendChild(i), e.appendChild(t), e
    }
}, Core.FullscreenFallbackView = Sys.extend(Core.View, Core.FullscreenFallbackView, "Core.FullscreenFallbackView");
Sys.ns("Game"), Game.BonusProgramWidget = {
    constructor: function() {
        Game.BonusProgramWidget.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["orientation"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Game.BonusProgramWidgetModel,
            controller: Game.BonusProgramWidgetController,
            view: Game.BonusProgramWidgetView
        }
    },
    getStateChanges: function() {
        var e = this.model,
            o = e.readData("widgetUrl"),
            t = e.readData("nextAction");
        return {
            beforeLoaderClose: {
                queue: [function(r) {
                    e.bonusProgramWidgetEnabled() && o && "spin" === t && r.stateHandler.pushState(r.states.bonusProgramWidget)
                }]
            },
            checkForAdditionalFreeRounds: {
                waitEvents: ["notify:bonusProgramWidget.closed"]
            },
            bonusProgramWidget: {
                state: {
                    name: "BonusProgramWidget",
                    execute: function() {},
                    waitEvents: {
                        "notify:bonusProgramWidget.closed": !1,
                        "notify:responseParser.gameConfigurationParsed": !1
                    }
                }
            }
        }
    }
}, Game.BonusProgramWidget = Sys.extend(Core.Module, Game.BonusProgramWidget, "Game.BonusProgramWidget");
Sys.ns("Game"), Game.BonusProgramWidgetModel = {
    constructor: function() {
        Game.BonusProgramWidgetModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        var e = Resources.readData("gameServerInitResponse") || {};
        this.storeData("widgetUrl", "../../"), this.storeData("slowServerRequestTimeLimit", 5e3), this.setBonusProgramData(e)
    },
    setBonusProgramData: function(e) {
        this.storeData("bonusProgramWidgetEnabled", Boolean(e.freeRoundWidgetEnabled)), this.storeData("bonusProgramWidgetGameId", e.freeRoundWidgetGameId), this.storeData("bonusProgramWidgetSections", e.freeRoundWidgetSections), this.storeData("nextAction", e.nextaction)
    },
    bonusProgramWidgetEnabled: function() {
        return Boolean(this.readData("bonusProgramWidgetEnabled"))
    }
}, Game.BonusProgramWidgetModel = Sys.extend(Core.Model, Game.BonusProgramWidgetModel, "Game.BonusProgramWidgetModel");
Sys.ns("Game"), Game.BonusProgramWidgetController = {
    constructor: function() {
        Game.BonusProgramWidgetController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:stateHandler.enteringBonusProgramWidgetState": this.initBonusProgramWidget,
            "notify:scaling.gameSizeChanged": this.onGameSizeChanged,
            "notify:bonusProgramWidget.notification": this.notificationHandler,
            "notify:bonusProgramWidget.close": this.closeBonusProgramWidget,
            "notify:responseParser.gameConfigurationParsed": this.checkForAdditionalFreeRounds,
            "notify:responseParser.bonusProgramWidgetValuesParsed": this.onBonusProgramWidgetValuesParsed,
            "notify:bonusProgramWidget.reInit": this.reInit,
            "notify:settingsManager.settingChanged": this.onSettingChanged,
            "view:orientationChanged": this.notifyOrientation,
            "notify:viewport.scaled": this.viewportScaled
        })
    },
    viewportScaled: function() {
        var e = this;
        Platform.isChromeForIOS && window.setTimeout(function() {
            e.view.refresh(), e.notifyOrientation(Utils.Platform.getOrientation()), e.onGameSizeChanged()
        }, 500)
    },
    initBonusProgramWidget: function() {
        var e, t = this,
            n = this.model.readData("widgetUrl"),
            i = this.model.readData("bonusProgramWidgetGameId"),
            o = Resources.readData("queryData").gameId,
            a = this.model.readData("slowServerRequestTimeLimit");
        this.view.initViewData(), -1 !== i.indexOf("##") && (e = i.split("##")[1], i = i.split("##")[0], this.model.storeData("bonusProgramWidgetTheme", e)), this.fetchWidgetVariants(n, i, a, function(a) {
            var s;
            if (!a) return void t.closeBonusProgramWidget();
            s = t.parseVariantsResponse(a, n, i, e, o), t.startBonusProgramWidget(s)
        })
    },
    fetchWidgetVariants: function(e, t, n, i) {
        var o = this.getWidgetLocationByWidgetID(t),
            a = Sys.utils.httpGet({
                url: e + o + "/variants.json"
            }),
            s = setTimeout(function() {
                i(!1)
            }, n);
        a.done(function(e) {
            i(e)
        }).fail(function(e) {
            i(!1)
        }).always(function() {
            clearTimeout(s)
        })
    },
    getWidgetLocationByWidgetID: function(e) {
        return "default_w" === e || "game_branded_w" === e ? "free_rounds_widget" : e
    },
    parseVariantsResponse: function(e, t, n, i, o) {
        var a, s;
        try {
            return a = JSON.parse(e.response), s = i ? a[i] : a[o], t + this.getWidgetLocationByWidgetID(n) + (s || a.default)
        } catch (e) {
            return !1
        }
    },
    startBonusProgramWidget: function(e) {
        e ? (this.view.loadIframePage(e), this.disableSettingsButton(), Resources.storeData("bonusProgramWidgetActive", !0)) : this.closeBonusProgramWidget()
    },
    reInit: function(e) {
        this.model.setBonusProgramData(e), this.model.bonusProgramWidgetEnabled() && this.initBonusProgramWidget()
    },
    sendMessage: function(e, t, n) {
        var i = document.getElementById("bonusProgramWidgetIframe");
        i && i.contentWindow.postMessage({
            moduleId: "bonusProgramWidget",
            action: e,
            data: t || null,
            dataRoute: n || null
        }, "*")
    },
    notificationHandler: function(e) {
        var t, n, i;
        switch (e.action) {
            case "widgetReady":
                this.notifyOrientation(Utils.Platform.getOrientation()), t = Resources.readData("language"), i = Resources.readData("queryData"), n = t.lang || t.defaultLang, this.notifyLanguage(n), this.sendMessage("soundSettingChange", Services.settingsManager.getSetting("volume")), this.sendMessage("defaultValues", {
                    operatorId: i.operatorId,
                    gameId: i.gameId,
                    theme: this.model.readData("bonusProgramWidgetTheme")
                });
                break;
            case "getTextStrings":
                this.getTextStrings(e.data, e.dataRoute);
                break;
            case "roundStarted":
                this.roundStarted();
                break;
            case "resumeNormalGameplay":
                this.resumeNormalGameplay();
                break;
            case "playFreeRoundsNow":
                this.playFreeRoundsNow();
                break;
            case "getSectionValues":
                this.sendMessage("populateSectionValues", this.model.readData("bonusProgramWidgetSections"));
                break;
            default:
                this.sendMessage("actionNotSupported")
        }
    },
    getTextStrings: function(e, t) {
        var n, i = {};
        Sys.iterate(e, function(e, t) {
            (n = Sys.isArray(t) && t.length > 0 ? Services.languageManager.getText(e, t) : Services.languageManager.getText(e)) && (i[e] = n)
        }), this.sendMessage("populateTextStrings", i, t)
    },
    roundStarted: function() {
        this.requestWidgetAction()
    },
    requestWidgetAction: function() {
        this.fireEvent("request:serverManager.sendAction", "widgetspin", "notify:responseParser.bonusProgramWidgetValuesParsed")
    },
    checkForAdditionalFreeRounds: function(e) {
        e.freeRoundWidgetEnabled || this.fireEvent("notify:bonusProgramWidget.closed")
    },
    onBonusProgramWidgetValuesParsed: function(e) {
        this.sendMessage("processRoundOutcome", {
            indexToShow: e.indexToShow
        })
    },
    resumeNormalGameplay: function() {
        this.closeBonusProgramWidget()
    },
    playFreeRoundsNow: function() {
        this.closeBonusProgramWidget(), this.fireEvent("request:freeRounds.requestGameConfiguration")
    },
    closeBonusProgramWidget: function() {
        this.view.closeIframePage(), this.fireEvent("notify:bonusProgramWidget.closed"), this.enableSettingsButton()
    },
    enableSettingsButton: function() {
        this.fireEvent("request:settingsButton.enable")
    },
    disableSettingsButton: function() {
        this.fireEvent("request:settingsButton.disable")
    },
    notifyOrientation: function(e) {
        this.sendMessage("updateOrientation", {
            orientation: e
        })
    },
    notifyLanguage: function(e) {
        this.sendMessage("updateLanguage", {
            lang: e
        })
    },
    onGameSizeChanged: function() {
        "function" == typeof this.view.refresh && (this.model.storeData("gameSizeChangedTriggered", !0), this.view.refresh(), this.notifyOrientation(Utils.Platform.getOrientation()))
    },
    onSettingChanged: function(e, t) {
        "volume" === e && this.sendMessage("soundSettingChange", t)
    }
}, Game.BonusProgramWidgetController = Sys.extend(Core.Controller, Game.BonusProgramWidgetController, "Game.BonusProgramWidgetController");
Sys.ns("Game"), Game.BonusProgramWidgetView = {
    PARENT_CONTAINER_ID: "viewport",
    viewElements: {},
    bonusProgramWidgetIframeId: "bonusProgramWidgetIframe",
    constructor: function() {
        Game.BonusProgramWidgetView.superclass.constructor.apply(this, arguments)
    },
    initViewData: function() {
        var e, t, i;
        t = document.createElement("div"), i = document.createElement("div"), t.appendChild(i), e = document.getElementById(this.PARENT_CONTAINER_ID), t.setAttribute("id", "bonusProgramWidgetContainer"), i.setAttribute("id", "bonusProgramWidgetOverlay"), e.appendChild(t), this.viewElements = {
            mainContainer: t,
            overlay: i
        }, this.refresh()
    },
    adaptToOrientation: function(e) {
        this.model.readData("gameSizeChangedTriggered") || (this.fireEvent("view:orientationChanged", e), this.refresh())
    },
    refresh: function() {
        void 0 !== this.viewElements.mainContainer && "mobile" === Environment.getCurrentPlatform() && this.setIframeContainerHeight(), this.viewElements.iframe && (this.viewElements.iframe.style.width = "100%", this.viewElements.iframe.style.height = "100%")
    },
    setIframeContainerHeight: function() {
        var e = Sys.utils.toInt(Environment.determineResolution().resolution.height + (Platform.isTabletDevice ? 0 : Environment.getSpaceBelowGame()));
        this.viewElements.mainContainer.style.height = e + "px"
    },
    loadIframePage: function(e) {
        this.removeIframeInstance(), this.createIframeInstance(e)
    },
    createIframeInstance: function(e) {
        var t = document.createElement("iframe");
        t.setAttribute("id", this.bonusProgramWidgetIframeId), t.setAttribute("scrolling", "no"), t.setAttribute("allowtransparency", "true"), t.setAttribute("src", e), t.setAttribute("style", "width: 100%; height: 100%"), t.onload = this.refresh.bind(this), this.viewElements.mainContainer.appendChild(t), this.viewElements.iframe = t
    },
    removeIframeInstance: function() {
        var e = document.getElementById(this.bonusProgramWidgetIframeId);
        e && (e.parentNode.removeChild(e), this.viewElements.iframe = null)
    },
    closeIframePage: function() {
        var e = this.viewElements.mainContainer;
        e.parentNode.removeChild(e)
    }
}, Game.BonusProgramWidgetView = Sys.extend(Core.View, Game.BonusProgramWidgetView, "Game.BonusProgramWidgetView");
! function(e) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = e();
    else if ("function" == typeof define && define.amd) define([], e);
    else {
        var n;
        n = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, n.StereoPannerNode = e()
    }
}(function() {
    return function() {
        function e(n, t, o) {
            function r(i, c) {
                if (!t[i]) {
                    if (!n[i]) {
                        var l = "function" == typeof require && require;
                        if (!c && l) return l(i, !0);
                        if (a) return a(i, !0);
                        var u = new Error("Cannot find module '" + i + "'");
                        throw u.code = "MODULE_NOT_FOUND", u
                    }
                    var f = t[i] = {
                        exports: {}
                    };
                    n[i][0].call(f.exports, function(e) {
                        return r(n[i][1][e] || e)
                    }, f, f.exports, e, n, t, o)
                }
                return t[i].exports
            }
            for (var a = "function" == typeof require && require, i = 0; i < o.length; i++) r(o[i]);
            return r
        }
        return e
    }()({
        1: [function(e, n, t) {
            (function(e) {
                var t = e.AudioContext || e.webkitAudioContext,
                    o = e.OfflineAudioContext || e.webkitOfflineAudioContext,
                    r = e.BaseAudioContext || o && Object.getPrototypeOf(o);
                n.exports = "function" == typeof r && r.prototype ? r : t
            }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {}],
        2: [function(e, n, t) {
            function o(e, n) {
                n = n || {};
                var t = e.createChannelSplitter(2),
                    o = e.createWaveShaper(),
                    r = e.createWaveShaper(),
                    u = e.createGain(),
                    f = e.createWaveShaper(),
                    d = e.createWaveShaper(),
                    p = e.createGain(),
                    h = e.createGain(),
                    s = e.createChannelMerger(2),
                    b = "number" == typeof n.pan ? n.pan : 0;
                return t.channelCount = 2, t.channelCountMode = "explicit", t.channelInterpretation = "speakers", t.connect(p, 0), t.connect(h, 1), t.connect(o, 1), t.connect(r, 1), o.channelCount = 1, o.channelCountMode = "explicit", o.channelInterpretation = "discrete", o.curve = l, o.connect(u), r.channelCount = 1, r.channelCountMode = "explicit", r.channelInterpretation = "discrete", r.curve = c, r.connect(u.gain), u.channelCount = 1, u.channelCountMode = "explicit", u.channelInterpretation = "discrete", u.gain.value = b, u.connect(f), u.connect(d), f.channelCount = 1, f.channelCountMode = "explicit", f.channelInterpretation = "discrete", f.curve = a, f.connect(p.gain), d.channelCount = 1, d.channelCountMode = "explicit", d.channelInterpretation = "discrete", d.curve = i, d.connect(h.gain), p.channelCount = 1, p.channelCountMode = "explicit", p.channelInterpretation = "discrete", p.gain.value = 0, p.connect(s, 0, 0), h.channelCount = 1, h.channelCountMode = "explicit", h.channelInterpretation = "discrete", h.gain.value = 0, h.connect(s, 0, 1), s.channelCount = 1, s.channelCountMode = "explicit", s.channelInterpretation = "discrete", Object.defineProperties(t, {
                    pan: {
                        value: u.gain,
                        enumerable: !0,
                        writable: !1,
                        configurable: !0
                    },
                    connect: {
                        value: AudioNode.prototype.connect.bind(s),
                        enumerable: !1,
                        writable: !1,
                        configurable: !0
                    },
                    disconnect: {
                        value: AudioNode.prototype.disconnect.bind(s),
                        enumerable: !1,
                        writable: !1,
                        configurable: !0
                    }
                }), t
            }
            for (var r = e("base-audio-context"), a = new Float32Array(4096), i = new Float32Array(4096), c = new Float32Array([0, 0]), l = new Float32Array([1, 1]), u = 0; u < 4096; u++) a[u] = Math.cos(u / 4096 * Math.PI * .5), i[u] = Math.sin(u / 4096 * Math.PI * .5);
            o.polyfill = function() {
                !r || "createStereoPanner" in r.prototype || o.install()
            }, o.install = function() {
                Object.defineProperty(r.prototype, "createStereoPanner", {
                    value: function() {
                        return new o(this)
                    },
                    enumerable: !1,
                    writable: !1,
                    configurable: !0
                })
            }, "function" == typeof Symbol && "symbol" == typeof Symbol.hasInstance && Object.defineProperty(o, Symbol.hasInstance, {
                value: function(e) {
                    return e instanceof AudioNode && e.pan instanceof AudioParam
                }
            }), n.exports = o
        }, {
            "base-audio-context": 1
        }]
    }, {}, [2])(2)
});
! function(t, e) {
    "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.ecas = e() : t.ecas = e()
}(this, function() {
    return function(t) {
        function e(o) {
            if (n[o]) return n[o].exports;
            var i = n[o] = {
                i: o,
                l: !1,
                exports: {}
            };
            return t[o].call(i.exports, i, i.exports, e), i.l = !0, i.exports
        }
        var n = {};
        return e.m = t, e.c = n, e.i = function(t) {
            return t
        }, e.d = function(t, n, o) {
            e.o(t, n) || Object.defineProperty(t, n, {
                configurable: !1,
                enumerable: !0,
                get: o
            })
        }, e.n = function(t) {
            var n = t && t.__esModule ? function() {
                return t.default
            } : function() {
                return t
            };
            return e.d(n, "a", n), n
        }, e.o = function(t, e) {
            return Object.prototype.hasOwnProperty.call(t, e)
        }, e.p = "", e(e.s = 11)
    }([function(t, e, n) {
        var o, i;
        o = [n, e], void 0 !== (i = function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                function t() {}
                return t.getPreferredCodec = function() {
                    var t = "undefined" != typeof Audio ? new Audio : null;
                    return null === t || "function" != typeof t.canPlayType ? null : t.canPlayType('audio/ogg; codecs="vorbis"') ? ".ogg" : t.canPlayType('audio/webm; codecs="vorbis"') ? ".webm" : t.canPlayType("audio/x-mp4;") || t.canPlayType("audio/mp4;") || t.canPlayType("audio/aac;") ? ".mp4" : null
                }, t.getContext = function() {
                    var t = null;
                    if (!t) {
                        var e = window.AudioContext || window.webkitAudioContext || !1;
                        e ? t = new e : console.warn("Web Audio API is not supported.")
                    }
                    return t
                }, t.envelopePosToAbsolute = function(t) {
                    var e = 0;
                    return t.map(function(t) {
                        return e += t.pos, {
                            pos: e,
                            val: t.val
                        }
                    })
                }, t.envelopePosToRelative = function(t) {
                    var e = 0;
                    return t.map(function(t) {
                        var n = t.pos,
                            o = n - e;
                        return e = n, {
                            pos: o,
                            val: t.val
                        }
                    })
                }, t.pitchToPlaybackRate = function(t) {
                    return (t < -1200 || t > 2400) && (console.warn("Pitch outside allowed range (-1200 to 2400), was: " + t + ", clamping."), t = Math.min(2400, Math.max(-1200, t))), Math.pow(2, t / 1200)
                }, t.stringFractionToNumber = function(t) {
                    if (this.isNumeric(t) || !t) return this.defaultNumber(t, 0);
                    var e = t.split("/").map(function(t) {
                        return parseInt(t, 10)
                    });
                    return e && 2 === e.length ? e[0] / e[1] : (console.warn("Can only convert fraction in format 'n/n'. Got:" + t), null)
                }, t.getQuantizeNumber = function(t) {
                    if (!t) return null;
                    var e, n = [8, 4, 2, 1, .5, .25, .125, .0625];
                    return e = this.isNumeric(t) ? this.isString(t) ? parseFloat(t) : t : this.stringFractionToNumber(t), 1 !== n.filter(function(t) {
                        return t === e
                    }).length ? void console.warn('Invalid quantize value. Value has to be whole bars or fraction of whole note. I.e: 1, 0.25 or "1/4"') : e || 1
                }, t.stringToTimeSignature = function(t) {
                    if (!t) return null;
                    var e = t ? t.split("/") : null;
                    return e && 2 === e.length ? {
                        meter: parseInt(e[0], 10),
                        unit: parseInt(e[1], 10)
                    } : void console.warn("Invalid time signature. Please enter a string such as '4/4', '3/4' or '6/8'.")
                }, t.isString = function(t) {
                    return this._is(t, "String")
                }, t.isNumber = function(t) {
                    return this._is(t, "Number")
                }, t.isEventMappings = function(t) {
                    return t && t.hasOwnProperty("events")
                }, t.isSoundConfig = function(t) {
                    return t && t.hasOwnProperty("settings") && t.hasOwnProperty("groups")
                }, t.isNumeric = function(t) {
                    return (this._is(t, "Number") || this._is(t, "String")) && !isNaN(parseFloat(t)) && isFinite(t.toString().replace(/^-/, ""))
                }, t.isArray = function(t) {
                    return this._is(t, "Array")
                }, t.isEnvelope = function(t) {
                    return t && t.hasOwnProperty("id") && t.hasOwnProperty("param") && t.hasOwnProperty("data")
                }, t.isPattern = function(t) {
                    return t && t.hasOwnProperty("id") && t.hasOwnProperty("pattern")
                }, t.loadScript = function(t, e) {
                    var n = document.getElementsByTagName("head")[0],
                        o = function(t, e) {
                            var o = document.createElement("script");
                            o.type = "application/javascript", o.src = t, o.onreadystatechange = o.onload = function() {
                                return e(e)
                            }, o.onerror = function() {
                                console.warn("Error loading script '" + t + "'"), e(e)
                            }, n.appendChild(o)
                        };
                    if (this.isString(t)) o(t, e);
                    else {
                        var i = 0,
                            a = function(n) {
                                var a = t[i];
                                if (!a) return void e();
                                i++, o(a, n)
                            };
                        a(a)
                    }
                }, t.defaultNumber = function(t, e, n, o) {
                    if (void 0 === e && (e = 0), void 0 === o && (o = 0), this.isArray(t)) null === (t = this.randomizeValues(t)) && console.warn("Unable to default to number value. Value is an array, but does not seem to be random ranges.");
                    else if (this.isNumeric(t)) t = parseFloat(t.toString());
                    else if (this.isBarBeatTick(t)) {
                        if (!n) return void console.warn("You need to provide tempo information for conversion of bar.beat.tick notation to time.");
                        t = this._barBeatTickToSeconds(t, n, o)
                    } else this.isNumeric(t) || (t = e);
                    return t
                }, t.defaultValue = function(t, e) {
                    return (void 0 === t || null === t || this.isString(t) && "" === t) && (t = e), t
                }, t.randomizeValues = function(t) {
                    var e, n, o = this,
                        i = !0,
                        a = /^-?\d*\.?\d+\,\-?\d*\.?\d+$/,
                        r = /^-?\d*\.?\d+$/;
                    if (this.isNumber(t) || !Array.isArray(t)) return e = t;
                    if (t.length > 0) {
                        if (n = t.map(function(e) {
                                if (r.test(e)) return e;
                                if (o.isArray(e)) return o._getRandomValue(parseFloat(e[0]), parseFloat(e[1]));
                                if (a.test(e)) {
                                    var n = e.split(",");
                                    return o._getRandomValue(parseFloat(n[0]), parseFloat(n[1]))
                                }
                                i = !1, console.warn("Invalid random value format: " + t)
                            }), i) return e = this.randomShuffle(n)[0], parseFloat(e)
                    } else console.warn("Invalid random value: empty array");
                    return null
                }, t.topoSort = function(t) {
                    var e = {},
                        n = [],
                        i = {};
                    t.forEach(function(t) {
                        var n = t[0],
                            i = n.toString(),
                            a = e[i];
                        a || (a = e[i] = new o(n)), t.forEach(function(t) {
                            if (t && t !== n) {
                                var i = t.toString();
                                e[i] || (e[i] = new o(t)), a.afters.push(t)
                            }
                        })
                    });
                    var a = Object.keys(e),
                        r = function(t, o) {
                            var a = e[t],
                                u = a.id;
                            if (!i[t]) {
                                var s = Array.isArray(o) ? o : [];
                                s.push(u), i[t] = !0, a.afters.forEach(function(t) {
                                    if (s.indexOf(t) >= 0) throw new Error("Circular chain found: " + u + " must be before " + t + " due to a direct order specification, but " + t + " must be before " + u + " based on other specifications.");
                                    r(t.toString(), s.map(function(t) {
                                        return t
                                    }))
                                }), n.unshift(u)
                            }
                        };
                    return a.forEach(r), n.reverse()
                }, t.randomShuffle = function(t) {
                    return t.map(function(t) {
                        return [Math.random(), t]
                    }).sort().map(function(t) {
                        return t[1]
                    })
                }, t.sumVolume = function(t, e) {
                    return this.defaultNumber(t, 1) * this.defaultNumber(e, 1)
                }, t.sumPan = function(t, e) {
                    var n = Math.max(-1, Math.min(this.defaultNumber(t), 1)),
                        o = Math.max(-1, Math.min(this.defaultNumber(e), 1));
                    return o + (1 - Math.abs(o)) * n
                }, t.sumPitch = function(t, e) {
                    return this.defaultNumber(t) + this.defaultNumber(e)
                }, t.sumPos = function(t, e) {
                    return this.defaultNumber(t) + this.defaultNumber(e)
                }, t.cloneObject = function(t) {
                    if (t instanceof Object && t) return JSON.parse(JSON.stringify(t));
                    console.warn("invalid object " + t + " to clone")
                }, t.filterUnique = function(t, e) {
                    if (null === t || void 0 === t) return null;
                    var n = [],
                        o = [];
                    return t.forEach(function(t) {
                        var i = "";
                        e.forEach(function(e) {
                            t.hasOwnProperty(e) && (i += t[e])
                        }), -1 === o.indexOf(i) && n.push(t), o.push(i)
                    }), n
                }, t.isBarBeatTick = function(t) {
                    var e = /^[\d]{1,2}\.[\d]{1,2}\.[\d]{1,3}$/;
                    return null !== (this.isString(t) ? t.match(e) : null)
                }, t._getRandomValue = function(t, e) {
                    return (Math.random() * (e - t) + t).toFixed(1)
                }, t._is = function(t, e) {
                    return Object.prototype.toString.call(t) === "[object " + e + "]"
                }, t._barBeatTickToSeconds = function(t, e, n) {
                    if (!e || !e.tempo) return console.warn("Unable to convert bar.beat.tick to time, since no tempo is configured. Please add tempo in soundconfig settings."), 0;
                    e.timeSignature = e.timeSignature || {
                        meter: 4,
                        unit: 4
                    }, e.triggerQuantize = e.triggerQuantize || 1;
                    var o, i = t.split("."),
                        a = parseInt(i[0], 10),
                        r = parseInt(i[1], 10),
                        u = parseInt(i[2], 10),
                        s = 1 / e.timeSignature.unit * 4,
                        d = 60 / (e.tempo / s),
                        l = d * e.timeSignature.meter,
                        c = d / this.TICKS_PER_BEAT;
                    return o = e.triggerQuantize >= 1 ? d * (e.timeSignature.meter * e.triggerQuantize) : d / (1 / e.timeSignature.unit) * e.triggerQuantize, a * l + r * d + u * c + (o - (n % o || o))
                }, t.TICKS_PER_BEAT = 32, t
            }();
            e.default = n;
            var o = function() {
                function t(t) {
                    this.id = t, this.afters = []
                }
                return t
            }()
        }.apply(e, o)) && (t.exports = i)
    }, function(t, e, n) {
        var o, i;
        o = [n, e], void 0 !== (i = function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                function t() {}
                return t.setTimeout = function(t, e, n) {
                    for (var o = this, i = [], a = 3; a < arguments.length; a++) i[a - 3] = arguments[a];
                    if (null === n || void 0 === n || "" === n) window.setTimeout(t, 1e3 * e, i);
                    else {
                        var r = this.dateProvider()(),
                            u = [],
                            s = this._map[n];
                        s && (u = u.concat(s.callbacks), window.clearTimeout(s.id)), u.push({
                            args: i,
                            callback: t
                        });
                        var d = window.setTimeout(function() {
                            return o.onDone(n)
                        }, 1e3 * e);
                        this._map[n] = {
                            id: d,
                            remaining: e,
                            start: r,
                            callbacks: u,
                            caller: n
                        }
                    }
                }, t.pause = function(t) {
                    if (this._map[t]) {
                        var e = this._map[t],
                            n = this.dateProvider()();
                        window.clearTimeout(e.id), e.remaining -= n - e.start
                    }
                }, t.pauseMatching = function(e) {
                    Object.keys(this._map).forEach(function(n) {
                        var o = n.match(e);
                        o && o.forEach(function(e) {
                            e === n && t.pause(e)
                        })
                    })
                }, t.resume = function(t) {
                    if (this._map[t]) {
                        var e = this._map[t],
                            n = this.dateProvider()();
                        e.start = n;
                        var o = window.setTimeout(this.onDone.bind(this, t, e.callbacks), 1e3 * e.remaining);
                        e.id = o
                    }
                }, t.resumeMatching = function(e) {
                    Object.keys(this._map).forEach(function(n) {
                        var o = n.match(e);
                        o && o.forEach(function(e) {
                            e === n && t.resume(e)
                        })
                    })
                }, t.clearTimeout = function(t) {
                    this._map[t] && (window.clearTimeout(this._map[t].id), delete this._map[t])
                }, t.clearMatching = function(e) {
                    Object.keys(this._map).forEach(function(n) {
                        var o = n.match(e);
                        o && o.forEach(function(e) {
                            e === n && t.clearTimeout(e)
                        })
                    })
                }, t.hasTimeout = function(t) {
                    return null !== this._map[t] && void 0 !== this._map[t]
                }, t.onDone = function(t) {
                    if (this._map[t]) {
                        var e = this._map[t];
                        delete this._map[t], e.callbacks.forEach(function(t) {
                            t.callback.call(t.args)
                        }), window.clearTimeout(e.id)
                    }
                }, t.dateProvider = function() {
                    return function() {
                        return Date.now() / 1e3
                    }
                }, t._map = {}, t
            }();
            e.default = n
        }.apply(e, o)) && (t.exports = i)
    }, function(t, e, n) {
        var o, i;
        o = [n, e], void 0 !== (i = function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                function t(t, e, n, o, i) {
                    void 0 === t && (t = "time"), void 0 === e && (e = -100), void 0 === n && (n = -30), void 0 === o && (o = 2048), void 0 === i && (i = .8), this.mode = t, this.minDb = e, this.maxDb = n, this.fftSize = o, this.smoothingTimeConstant = i
                }
                return t
            }();
            e.default = n
        }.apply(e, o)) && (t.exports = i)
    }, function(t, e, n) {
        var o, i;
        o = [n, e], void 0 !== (i = function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                function t() {
                    this.latencyLookahead = .03, this.forceLegacyAudio = !1, this.scriptPath = "./scripts/", this.tempoConfig = {
                        timeSignature: {
                            meter: 4,
                            unit: 4
                        },
                        triggerQuantize: 1
                    }, this.dispatcherCallback = function() {}
                }
                return t
            }();
            e.default = n
        }.apply(e, o)) && (t.exports = i)
    }, function(t, e, n) {
        var o, i;
        o = [n, e, n(0)], void 0 !== (i = function(t, e, n) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var o = function() {
                function t(t) {
                    this._config = t, this._invalidItem = []
                }
                return t.prototype.validate = function() {
                    return this.validateSettings(), this.validateGroups(), this.validateBusses(), this.validateSounds(), this.validatePatterns(), this.validatePools(), this.getInvalidItemList()
                }, t.prototype.validateSounds = function() {
                    var t = this,
                        e = {};
                    this._config.sounds && (this._config.sounds = this._config.sounds.filter(function(n) {
                        var o = !0;
                        if (t._isValidSoundItem(n) || (o = !1, t.addInvalidItem("Invalid sound: '" + n.id + "' sound belongs to invalid group '" + n.group + "' which is not defined")), e[n.id] && (o = !1, t.addInvalidItem("Invalid sound: duplicate '" + n.id + "' sound")), n.type && "element" !== n.type && "buffer" !== n.type && t.addInvalidItem("Invalid sound:'" + n.id + "' sound has invalid type '" + n.type + "'"), e[n.id] && (o = !1, t.addInvalidItem("Invalid sound: duplicate '" + n.id + "' sound")), e[n.id] = !0, o) return n
                    }))
                }, t.prototype.validateGroups = function() {
                    var t = this;
                    this._config.groups = this._config.groups.filter(function(e) {
                        return t._isValidGroupItem(e) ? e : (t.addInvalidItem("Invalid Group: '" + e.id + "' group belongs to invalid buss '" + e.buss + "' which is not defined"), !1)
                    })
                }, t.prototype.validatePatterns = function() {
                    var t = this,
                        e = !0;
                    if (this._config.patterns) {
                        var o = [];
                        this._config.patterns.forEach(function(n) {
                            n.pattern.forEach(function(i) {
                                i.pattern ? (o.push([n.id, i.pattern]), i.pattern === n.id && (e = !1, t.addInvalidItem("Invalid Pattern configuration, cyclic dependency discovered: Pattern cannot play itself"))) : i.pool && o.push([n.id, i.pool])
                            }), t._config.pools && t._config.pools.forEach(function(t) {
                                t.items.forEach(function(e) {
                                    "pattern" !== e.type && "pool" !== e.type || o.push([t.id, e.target])
                                })
                            })
                        });
                        try {
                            n.default.topoSort(o)
                        } catch (t) {
                            e = !1, this.addInvalidItem("Invalid Pattern configuration, cyclic dependency discovered: " + t)
                        }
                        this._config.patterns = this._config.patterns.filter(function(n) {
                            if (e = !0, n.pattern.forEach(function(o) {
                                    o.sound && !t._isSoundDefined(o.sound) ? (e = !1, t.addInvalidItem("Invalid Pattern: " + n.id + " Pattern defined with sound '" + o.sound + "' but sound not configured in sounds")) : o.envelope && !t._isEnvelopeDefined(o.envelope) ? (e = !1, t.addInvalidItem("Invalid Pattern: " + n.id + " Pattern defined with envelope '" + o.envelope + "' but envelope not configured in envelopePresets")) : o.pattern && !t._isPatternDefined(o.pattern) && (e = !1, t.addInvalidItem("Invalid Pattern: " + n.id + " Pattern defined with pattern '" + o.pattern + "' but pattern not configured in patterns"))
                                }), e) return n
                        })
                    }
                }, t.prototype.validatePools = function() {
                    var t = this,
                        e = !0;
                    if (this._config.pools) {
                        var o = [];
                        this._config.pools.forEach(function(n) {
                            n.items.forEach(function(i) {
                                "pool" === i.type && (o.push([i.target, n.id]), i.target === n.id && (e = !1, t.addInvalidItem("Invalid Pool configuration, cyclic dependency discovered: Pool cannot play itself")))
                            })
                        });
                        try {
                            n.default.topoSort(o)
                        } catch (t) {
                            e = !1, this.addInvalidItem("Invalid Pool configuration, cyclic dependency discovered: " + t)
                        }
                        this._config.pools = this._config.pools.filter(function(n) {
                            if (e = !0, n.items.forEach(function(o) {
                                    "sound" !== o.type && o.type || t._isSoundDefined(o.target) || (e = !1, t.addInvalidItem("Invalid Pool: " + n.id + " Pool defined with sound '" + o.target + "' but sound not configured in sounds"))
                                }), "sequential" !== n.type && "random" !== n.type && (e = !1, t.addInvalidItem("Invalid Pool: " + n.id + " Pool defined with type " + n.type + " which is not valid type")), n.priority) {
                                n.priority.length && n.priority.length !== n.items.length && (e = !1, t.addInvalidItem("Invalid Pool: " + n.id + " Pool defined with the priority " + n.priority.length + " and sounds " + n.items.length + " array size is mismatched"));
                                var o = !0;
                                n.priority.map(function(t) {
                                    if (t < 1) return o = !1, null
                                }), n.priority.length && !o && (e = !1, t.addInvalidItem("Invalid Pool: " + n.id + " Pool defined with the invalid priority value " + JSON.stringify(n.priority)))
                            }
                            if (e) return n
                        })
                    }
                }, t.prototype.validateBusses = function() {
                    var t = this,
                        e = !0;
                    return this._config.busses && this._config.busses.forEach(function(n) {
                        var o = t._config.busses.filter(function(t) {
                            return (n.destination === t.id || "master" === n.destination || !n.destination) && n.destination !== n.id
                        });
                        o && o.length > 0 ? e = !0 : t.addInvalidItem("Invalid buss target: " + n.id + " defined with the invalid destination " + n.destination)
                    }), e
                }, t.prototype.validateSettings = function() {
                    var t = this;
                    this._config.settings.formatPresets && this._config.settings.formatPresets.forEach(function(e) {
                        e.presets.forEach(function(e) {
                            e.formats.forEach(function(n) {
                                (n.bitrate < 16 || n.bitrate > 320) && t.addInvalidItem("Invalid Settings: in " + e.id + " object '" + n.format + "' contains invalid bitrate " + n.bitrate)
                            })
                        })
                    })
                }, t.prototype.addInvalidItem = function(t) {
                    this._invalidItem.push(t)
                }, t.prototype.getInvalidItemList = function() {
                    return this._invalidItem
                }, t.prototype._isSoundDefined = function(t) {
                    var e = !1;
                    return this._config.sounds.forEach(function(n) {
                        if (n.id === t) return void(e = !0)
                    }), this._config.synthesis && this._config.synthesis.forEach(function(n) {
                        if (n.id === t) return void(e = !0)
                    }), e
                }, t.prototype._isEnvelopeDefined = function(t) {
                    if (n.default.isEnvelope(t)) return !0;
                    if (n.default.isString(t)) {
                        var e = !1;
                        return this._config.envelopePresets.forEach(function(n) {
                            if (n.id === t) return void(e = !0)
                        }), e
                    }
                    return !1
                }, t.prototype._isPatternDefined = function(t) {
                    var e = !1;
                    return this._config.patterns.forEach(function(n) {
                        if (n.id === t) return void(e = !0)
                    }), e
                }, t.prototype._isValidGroupItem = function(t) {
                    var e = !1;
                    return this._config.busses.forEach(function(n) {
                        if (t.buss === n.id) return void(e = !0)
                    }), e
                }, t.prototype._isValidSoundItem = function(t) {
                    var e = !1;
                    return this._config.groups.forEach(function(n) {
                        if (t.group === n.id) return void(e = !0)
                    }), e
                }, t
            }();
            e.default = o
        }.apply(e, o)) && (t.exports = i)
    }, function(t, e, n) {
        var o, i;
        o = [n, e], void 0 !== (i = function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                function t(t, e, n, o) {
                    void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === n && (n = 0), void 0 === o && (o = !0), this.startTime = t, this.duration = e, this.startPos = n, this.relative = o
                }
                return t
            }();
            e.default = n
        }.apply(e, o)) && (t.exports = i)
    }, function(t, e, n) {
        var o, i;
        o = [n, e, n(0), n(1), n(12)], void 0 !== (i = function(t, e, n, o, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var a = function() {
                function t(t) {
                    this._unlocked = !0, t.audioContext || (t.audioContext = this.getContext()), this._ecasContext = t, this._context = t.audioContext, this._config = t.soundConfig, this._isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream, this._isIOS && (this._unlocked = !1, window.addEventListener("touchstart", this._unlock.bind(this))), this._soundConnections = {}, this._elementSoundSources = {}, this._buffers = {}, this._busses = {}, this._bussConnections = {}, this._endedCallbacks = {}, this._soundContexts = {}, this._envelopes = {}, this._durations = {}, this._pannerNode3d = new i.default(t.audioContext), this._setupBusses(this._config.busses)
                }
                return t.prototype.getSoundDuration = function(t) {
                    if (!t) return 0;
                    var e = this._durations[t];
                    if (n.default.isNumber(e)) return e;
                    var o, i = this._config.sounds ? this._config.sounds.reduce(function(e, n) {
                        return n.id === t ? n : e
                    }, {
                        id: null,
                        group: null
                    }) : null;
                    if (i && i.id ? o = i.type : this._config.synthesis && (this._config.synthesis.reduce(function(e, n) {
                            return n.id === t ? n : e
                        }, {}), o = "synthesized"), "element" === o) {
                        var a = this._elementSoundSources[t],
                            r = a.element;
                        if (!r) return console.warn("failed to read duration for sound '" + t + "'"), 0;
                        e = r.duration
                    } else if ("synthesized" === o) e = 0;
                    else {
                        var u = this._buffers[t];
                        e = u.duration
                    }
                    return this._durations[t] = e, e
                }, t.prototype.now = function() {
                    return this._context.currentTime
                }, t.prototype.playSound = function(t, e) {
                    e.parentId = n.default.defaultValue(e.parentId, t), e.playbackRate = n.default.defaultNumber(e.playbackRate, 1);
                    var i = n.default.defaultNumber(e.startTime),
                        a = e.currentTime || n.default.defaultNumber(e.startPos),
                        r = n.default.defaultNumber(e.delay);
                    e.duration = n.default.defaultNumber(e.duration);
                    var u = e.duration ? e.duration : Number.POSITIVE_INFINITY,
                        s = this.getSoundDuration(t) / e.playbackRate - a,
                        d = e.loop ? void 0 : Math.min(u || Number.POSITIVE_INFINITY, s);
                    if (e.currentTime = a, e.delay = r || 0, !e.loop && !e.scheduled && u >= s) {
                        var l = this.now() + s,
                            c = s - this._ecasContext.latencyLookahead;
                        o.default.setTimeout(this.stopSound.bind(this, t, e.parentId, l), c, t + "_" + e.parentId + "_stop")
                    }
                    if (e.paused = !1, "element" === e.type) {
                        var f = (this._config.sounds && this._config.sounds.reduce(function(e, n) {
                            return e.id === t ? e : n
                        }, {
                            id: null,
                            group: null
                        }), this._elementSoundSources[t]);
                        f && f.index >= 0 && this.removeSound(f, e.bussId), e.soundSource = f;
                        var p = f.element;
                        if (!p) return void console.warn("Unable to play sound with id '" + t + "'.");
                        p.loop = e.loop, p.currentTime = e.currentTime, d < 0 ? console.warn("Duration cannot be negative. Was " + d + " when playing sound '" + t + "'.") : (o.default.setTimeout(function() {
                            p.defaultPlaybackRate = e.playbackRate, p.play(), p.playbackRate = e.playbackRate
                        }, i - this.now(), t + "_" + e.parentId + "_play"), this._elementSoundSources[t] = f)
                    } else if ("synthesized" === e.type) {
                        if (!window[t]) return void console.warn("Cannot play script '" + t + "'. Script not loaded. Ensure module is loaded in your project.");
                        var h = new window[t](e.args);
                        if (!h || "number" != typeof h.bufferSize || "function" != typeof h.process) return void console.warn("Cannot play script '" + t + "'. Script is loaded and script is present but missing 'bufferSize' or 'process' properties. Ensure your script is valid.");
                        var m = this._context.createScriptProcessor(h.bufferSize);
                        m.onaudioprocess = h.process.bind(h), this.connectSound(m, t, e, function(t) {
                            e.soundSource = {
                                index: t,
                                source: m
                            }, e.loop = !0
                        })
                    } else {
                        var _ = this._buffers[t];
                        if (_) {
                            var v = e.soundSource.source;
                            !v || v.buffer ? e.soundSource.source = v = this._ecasContext.audioContext.createBufferSource() : v.buffer = _, v.loop = e.loop;
                            try {
                                var g = Math.max(e.currentTime * e.playbackRate, 0);
                                d > 0 ? v.start(i, g, d) : (d < 0 && console.warn("Duration cannot be negative. Was " + d + " when playing sound '" + t + "'."), v.start(i, g)), v.playbackRate.value = e.playbackRate
                            } catch (t) {
                                console.warn(t)
                            }
                        } else console.warn("Failed to get buffer data for sound '" + t + "'. Has sound loaded and decoded properly?")
                    }
                }, t.prototype.pauseSound = function(t, e) {
                    var i = this;
                    e = e || t;
                    var a = this._findAndGetContexts(t, e);
                    a && a.length && a.forEach(function(a) {
                        if (a && !a.paused) {
                            a.startTime = n.default.defaultNumber(a.startTime), a.currentTime = n.default.defaultNumber(a.currentTime);
                            var r = (a.currentTime + (i.now() - a.startTime)) % (i.getSoundDuration(t) / a.playbackRate);
                            a.currentTime = r, a.paused = !0, a.playing = !1, i._stopSoundSource(t, e, a.type, a.soundSource), o.default.clearTimeout(a.id + "_" + a.parentId), a.loop || o.default.clearTimeout(a.id + "_" + a.parentId + "_stop")
                        }
                    })
                }, t.prototype.resumeSound = function(t, e) {
                    var o = this;
                    e = n.default.defaultValue(e, t);
                    var i = this._findAndGetContexts(t, e);
                    i && i.forEach(function(e) {
                        e && e.paused ? (e.startTime = o.now(), o.connectSound(null, t, e, function() {
                            o.playSound(t, e)
                        })) : console.warn("Unable to resume sound with sound Id " + t + " becasue sound was not paused")
                    })
                }, t.prototype.stopSound = function(t, e, n) {
                    var o = this;
                    void 0 === n && (n = 0), e = e || t;
                    var i = this._findAndGetContexts(t, e);
                    i && i.forEach(function(e) {
                        o._onCompleteSound(t, e, n)
                    })
                }, t.prototype.removeSound = function(t, e) {
                    this._bussConnections[e].inputs.splice(t.index, 1), t.source && t.source.disconnect()
                }, t.prototype.playEnvelope = function(t, e) {
                    var i = this,
                        a = JSON.parse(JSON.stringify(e));
                    a.onEnded = e.onEnded, a.targetType = a.targetType ? a.targetType : "buss", a.parentId = a.parentId ? a.parentId : t;
                    var r = this.getAudioParam(t, a.param, a.targetType, a.parentId);
                    if (null === r) return void console.warn("Could not play envelope with target '" + t + "' and context:" + JSON.stringify(e));
                    var u = r.value;
                    a.instance = r;
                    var s = 0;
                    a.startTime = a.startTime ? a.startTime : this.now(), this._envelopes[t] || (this._envelopes[t] = []), this._envelopes[t].push(a), a.paused || (a.envdata = this._envelopes[t].reduce(function(t, e) {
                        return e.parentId === a.parentId ? e : t
                    }).envdata, "pitch" === a.param && a.envdata.map(function(t) {
                        t.val = n.default.pitchToPlaybackRate(t.val)
                    }));
                    var d = 0;
                    a.envdata.forEach(function(t) {
                        var e = 0;
                        t.pos = n.default.isNumeric(t.pos) ? t.pos : n.default.randomizeValues(t.pos), null === t.val && (t.val = u), n.default.isNumeric(t.pos) && (t.pos - i.now() <= 0 ? (e = a.startTime, r.setValueAtTime(t.val, e)) : (s += t.pos, e = a.startTime + s / 1e3, r.linearRampToValueAtTime(t.val, e))), d = t.val
                    });
                    var l = (s + 50) / 1e3;
                    o.default.setTimeout(function() {
                        r.cancelScheduledValues(0), r.value = d, a.onEnded && a.onEnded(), i._envelopes[t] = i._envelopes[t].filter(function(t) {
                            return a.parentId !== t.parentId
                        })
                    }, l, t + "_" + a.parentId)
                }, t.prototype.connectAnalyser = function(t, e) {
                    void 0 === e && (e = "master");
                    var n = this._busses[e];
                    n ? n.gain.connect(t) : console.warn("Cannot analyse buss with id '" + e + "'. Buss not found!")
                }, t.prototype.setBussVolume = function(t, e) {
                    var n = this._busses[t];
                    if (!n) return void console.warn("attempting to set volume for buss '" + t + "', but buss not configured");
                    n.gain.gain.cancelScheduledValues(0), n.gain.gain.value = Math.max(e, 0)
                }, t.prototype.positionBuss = function(t, e) {
                    var n = this._busses[t];
                    if (!n) return void console.warn("attempting to set pan for buss '" + t + "', but buss not configured");
                    var o = n.pan,
                        i = Math.min(1, Math.max(e, -1));
                    this._isIOS ? this._pannerNode3d.setPannerPosition(o, i) : o.pan.value = i
                }, t.prototype.setupSound = function(t, e, n) {
                    "element" !== t.type ? this._setupBuffer(t, e, n) : this._setupElement(t, this._config.settings.loadPath + this._ecasContext.assetPackage + "/" + t.id + this._ecasContext.fileExtension, function(t) {
                        return n(null !== t)
                    })
                }, t.prototype.getAudioParam = function(t, e, n, o) {
                    var i, a;
                    if ("buss" === n) a = this._busses[t];
                    else {
                        var r = this._soundConnections[t + "_" + o];
                        if (!r) return null;
                        a = r.reduce(function(e, n) {
                            return n.context.id === t ? n : e
                        })
                    }
                    switch (e) {
                        case "volume":
                            i = a.gain.gain;
                            break;
                        case "pan":
                            i = a.pan.pan;
                            break;
                        case "pitch":
                            i = this._findAndGetContexts(t, o).pop().soundSource.source.playbackRate;
                            break;
                        default:
                            console.warn('getAudioParam needs either "volume", "pan" or "pitch" as param type')
                    }
                    return i
                }, t.prototype.getBuss = function(t) {
                    return this._busses[t]
                }, t.prototype.getContext = function() {
                    return this._context || n.default.getContext()
                }, t.prototype.stopAll = function() {
                    var t = this;
                    Object.keys(this._soundContexts).forEach(function(e) {
                        var n = t._soundContexts[e];
                        n && n.forEach(function(e) {
                            t.stopSound(e.id, e.parentId)
                        })
                    })
                }, t.prototype.destroy = function() {
                    var t = this;
                    this.stopAll(), Object.keys(this._busses).forEach(function(e) {
                        t._busses[e].gain.disconnect(), t._busses[e].pan.disconnect()
                    }), this._context = null
                }, t.prototype.connectSound = function(t, e, o, i) {
                    var a = this;
                    void 0 === i && (i = function() {});
                    var r = function() {
                        var r = a._context.createGain();
                        o.pan = n.default.isNumeric(o.pan) ? o.pan : 0;
                        var u = a._createPanNode(o.pan);
                        t.disconnect(), t.connect(u), u.connect(r);
                        var s = a._bussConnections[o.bussId].inputs,
                            d = s.length;
                        s.push({
                            index: d,
                            node: r,
                            used: !0
                        }), r.connect(a._busses[o.bussId].pan), o.volume = n.default.isNumeric(o.volume) ? o.volume : 1, r.gain.value = Math.max(o.volume, 0);
                        var l = e + "_" + o.parentId;
                        a._soundConnections[l] = n.default.defaultValue(a._soundConnections[l], []), a._soundConnections[l].push({
                            context: o,
                            pan: u,
                            gain: r,
                            source: t
                        }), a._soundContexts[e] = n.default.defaultValue(a._soundContexts[e], []), o.parentId = n.default.defaultValue(o.parentId, e), o.paused || a._soundContexts[e].push(o);
                        var c = Object.keys(a._soundContexts).length;
                        o.soundSource = {
                            source: t,
                            index: c
                        }, i(d)
                    };
                    if (t) r();
                    else if ("element" === o.type) {
                        var u = this._config.sounds ? this._config.sounds.reduce(function(t, n) {
                                return t.id === e ? t : n
                            }, {
                                id: null,
                                group: null
                            }) : null,
                            s = this._config.settings.loadPath + this._ecasContext.assetPackage + "/" + e + this._ecasContext.fileExtension;
                        this._setupElement(u, s, function(e) {
                            t = e, r()
                        })
                    } else if ("synthesised" === o.type) {
                        var d = window[e] ? new window[e](o.args) : null;
                        if (!d || "number" != typeof d.bufferSize || "function" != typeof d.process) return void console.warn("Cannot play script '" + e + "'. Script is loaded and script is present but missing 'bufferSize' or 'process' properties. Ensure your script is valid.");
                        var l = this._context.createScriptProcessor(d.bufferSize);
                        l.onaudioprocess = d.process.bind(d), t = l, r()
                    } else t = this._context.createBufferSource(), r()
                }, t.prototype._onCompleteSound = function(t, e, n) {
                    this._stopSoundSource(t, e.parentId, e.type, e.soundSource, n), o.default.clearTimeout(e.id + "_" + e.parentId), e.loop || o.default.clearTimeout(e.id + "_" + e.parentId + "_stop"), this._soundContexts[t] = this._soundContexts[t].filter(function(t) {
                        return t.parentId !== e.parentId
                    }), setTimeout(function() {
                        e.onEnded && e.onEnded()
                    }, 1e3 * (n - this.now()))
                }, t.prototype._stopSoundSource = function(t, e, o, i, a) {
                    var r = this;
                    if (void 0 === a && (a = 0), "element" === o) {
                        var u = i.element;
                        u && (u.currentTime = 0, u.pause(), u.parentNode && u.parentNode.removeChild(u))
                    } else if (i && i.source) {
                        var s = i.source;
                        if (s && s.buffer && s.stop) {
                            a = n.default.isNumeric(a) ? a : 0;
                            try {
                                s.stop(a), i.source.disconnect(), i.source = null,
                                    function() {
                                        var n = r._soundConnections[t + "_" + e];
                                        n && (n.forEach(function(t) {
                                            t.pan.disconnect(), t.gain.disconnect(), t.source.disconnect()
                                        }), delete r._soundConnections[t + "_" + e])
                                    }()
                            } catch (t) {}
                        }
                    }
                }, t.prototype._findAndGetContexts = function(t, e) {
                    var n = this._soundContexts[t];
                    return n ? n.filter(function(t) {
                        return t.parentId === e
                    }) : null
                }, t.prototype._setupBusses = function(t) {
                    var e = this,
                        o = function(t) {
                            var o = e._context.createGain(),
                                i = e._createPanNode(),
                                a = e._context.createBufferSource();
                            a.buffer = e._context.createBuffer(2, 10, e._context.sampleRate), a.connect(i), a.loop = !0, a.start(), i.connect(o), t.pan || (t.pan = 0), e._isIOS ? e._pannerNode3d.setPannerPosition(i, t.pan) : i.pan.value = t.pan, "master" === t.id ? o.connect(e._context.destination) : (t.destination = t.destination || "master", o.connect(e._busses[t.destination].pan)), t.volume = n.default.defaultValue(t.volume, 1), o.gain.value = t.volume, e._busses[t.id] = {
                                gain: o,
                                pan: i
                            }, e._bussConnections[t.id] = {
                                inputs: [],
                                outputs: [{
                                    index: 0,
                                    node: e._context.destination,
                                    used: !0
                                }]
                            }
                        },
                        i = this._config.settings.master ? this._config.settings.master : {
                            id: "master"
                        };
                    t.unshift(i);
                    var a = t.map(function(t) {
                        return [t.id, "master" !== t.id ? t.destination || "master" : null]
                    });
                    n.default.topoSort(a).map(function(e) {
                        return t.reduce(function(t, n) {
                            return t.id === e ? t : n
                        })
                    }).forEach(o)
                }, t.prototype._setupElement = function(t, e, n) {
                    var o = this,
                        i = document.createElement("audio");
                    i.setAttribute("src", e), i.load();
                    var a = function() {
                        var e = o._createElement(i, t.id);
                        i.removeEventListener("canplay", a), o._elementSoundSources[t.id] = {
                            source: e,
                            element: i,
                            index: -1
                        }, n(e)
                    };
                    i.addEventListener("canplay", a), i.onerror = function() {
                        console.warn("Sound '" + t.id + "' failed to load. HTMLMediaElement code" + i.error.code), n(null)
                    }
                }, t.prototype._setupBuffer = function(t, e, n) {
                    var o = this;
                    if (this._ecasContext.bufferedSounds) {
                        var i = this._ecasContext.bufferedSounds.filter(function(e) {
                            return e.id === t.id
                        })[0];
                        i ? this._decodeSound(i.buffer, t, e, n) : n(!1)
                    } else {
                        var a = new XMLHttpRequest;
                        a.addEventListener("error", function() {
                            console.warn("Sound '" + t.id + "' failed to load."), n(!1)
                        }), a.addEventListener("load", function() {
                            o._decodeSound(a.response, t, e, n)
                        }), a.open("GET", e, !0), a.responseType = "arraybuffer", a.send()
                    }
                }, t.prototype._decodeSound = function(t, e, n, o) {
                    var i = this;
                    this._context.decodeAudioData(t, function(t) {
                        i._buffers[e.id] = t, o(!0)
                    }, function() {
                        console.warn("Failed to decode sound '" + e.id + "' at path '" + n + "'"), o(!1)
                    })
                }, t.prototype._createElement = function(t, e) {
                    var n, o = t;
                    try {
                        n = this._context.createMediaElementSource(o)
                    } catch (t) {
                        n = this._elementSoundSources[e].source
                    }
                    return n
                }, t.prototype._createPanNode = function(t) {
                    if (void 0 === t && (t = 0), this._isIOS) return this._pannerNode3d.create3dPanner(t);
                    var e = this._context.createStereoPanner();
                    return e.pan.value = t, e
                }, t.prototype._unlock = function() {
                    var t = this;
                    if (!this._unlocked) {
                        var e = this._context.createBuffer(1, 1, 22050),
                            n = this._context.createBufferSource();
                        n.buffer = e, n.connect(this._context.destination), n.start(0), setTimeout(function() {
                            n.playbackState !== n.PLAYING_STATE && n.playbackState !== n.FINISHED_STATE || (t._unlocked = !0)
                        }, 0)
                    }
                }, t
            }();
            e.default = a
        }.apply(e, o)) && (t.exports = i)
    }, function(t, e, n) {
        var o, i;
        o = [n, e, n(0), n(1)], void 0 !== (i = function(t, e, n, o) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var i = function() {
                function t(t) {
                    this._ecasContext = t, this._soundSources = {}, this._soundIndexes = {}, this._audioElements = {}, this._soundContexts = {}, this._virtualBusses = {}, this._envelopes = {}, this._setupBusses(t.soundConfig.busses)
                }
                return t.prototype.getSoundDuration = function(t, e) {}, t.prototype.playSound = function(t, e) {
                    e.parentId = n.default.defaultValue(e.parentId, t);
                    var i = this._soundSources[t];
                    this._soundContexts[t] = n.default.defaultValue(this._soundContexts[t], []), this._soundIndexes[t] = n.default.defaultValue(this._soundIndexes[t], 0), e.currentTime = n.default.defaultNumber(e.currentTime);
                    var a;
                    i.index >= 0 && this.removeSound(i, e.bussId), i = {
                        index: this._soundIndexes[t],
                        source: i.source
                    }, this._soundIndexes[t]++;
                    var r = this._audioElements[t];
                    if (r) {
                        a = r.duration, e.duration = a;
                        var u = e.duration - e.currentTime;
                        e.loop || o.default.setTimeout(this._onCompleteSound.bind(this, t, e.parentId, e.onEnded), u, e.id + "_" + e.parentId), this._soundSources[t] = i, e.paused = !1, e.soundSource = i, void 0 === e.playing && (e.playing = !0, this._soundContexts[t].push(e)), r.loop = e.loop, e.currentTime > 0 && (r.currentTime = e.currentTime), e.volume = n.default.defaultNumber(e.volume, 1), r.volume = e.volume * this._getGraphVolume(t, e.parentId), r.play()
                    } else console.warn("Unable to play sound with id '" + t + "'.")
                }, t.prototype.pauseSound = function(t, e) {
                    var i = this;
                    e = n.default.defaultValue(e, t);
                    var a = this._findAndGetContext(t, e);
                    a && a.length && a.forEach(function(e) {
                        if (e && !e.paused) {
                            e.startTime = n.default.defaultNumber(e.startTime), e.duration = n.default.defaultNumber(e.duration);
                            var a = (e.currentTime + (i.now() - e.startTime)) % e.duration;
                            e.currentTime = a, e.paused = !0, e.playing = !1, i._stopSoundSource(t, e.type, e.soundSource), o.default.clearTimeout(e.id + "_" + e.parentId)
                        }
                    })
                }, t.prototype.resumeSound = function(t, e) {
                    var o = this;
                    e = n.default.defaultValue(e, t);
                    var i = this._findAndGetContext(t, e);
                    i && i.length && i.forEach(function(e) {
                        e && e.paused && (e.startTime = o.now(), o.playSound(t, e))
                    })
                }, t.prototype.stopSound = function(t, e) {
                    var i = this;
                    e = n.default.defaultValue(e, t);
                    var a = this._findAndGetContext(t, e);
                    a && a.length && a.forEach(function(n) {
                        i._stopSoundSource(t, n.type, n.soundSource), o.default.clearTimeout(n.id + "_" + n.parentId), i._soundContexts[t] = i._soundContexts[t].filter(function(t) {
                            return t.parentId !== e
                        }), n.onEnded && n.onEnded()
                    })
                }, t.prototype.removeSound = function(t, e) {
                    t.source && t.source.disconnect()
                }, t.prototype.playEnvelope = function(t, e, i) {
                    var a = this,
                        r = JSON.parse(JSON.stringify(e));
                    r.onEnded = e.onEnded,
                        r.targetType = n.default.defaultValue(r.targetType, "buss"), r.parentId = n.default.defaultValue(r.parentId, t), r.startTime = n.default.defaultValue(r.startTime, this.now()), this._envelopes[t] || (this._envelopes[t] = []), this._envelopes[t].push(r), r.paused || (r.envdata = this._envelopes[t].reduce(function(t, e) {
                            return e.parentId === r.parentId ? e : t
                        }).envdata, r.paused = !1);
                    var u = function(t, e, n, o, i, a, r) {
                            var u = 0,
                                s = 0,
                                d = 30 * i / 1e3,
                                l = function(t, e, n, o) {
                                    return t /= o, e + n * t
                                },
                                c = function() {
                                    u++, u >= d ? (window.clearInterval(s), t[e] = o, r && r()) : t[e] = l(u, n, o - n, d), a()
                                };
                            s = window.setInterval(c, 1e3 / 30)
                        },
                        s = r.envdata,
                        d = "buss" === r.targetType,
                        l = d ? this._virtualBusses[t] : this._findAndGetContext(t, t)[0],
                        c = d ? "gain" : "volume",
                        f = function(e) {
                            var n = s[e],
                                o = s[e + 1];
                            if (o) {
                                var i = o.pos,
                                    p = function() {
                                        d ? a._updateBussVolume(t) : a._updateSoundVolume(t, r.parentId)
                                    };
                                u(l, c, n.val, o.val, i, p, function() {
                                    return f(e + 1)
                                })
                            }
                        };
                    f(0), o.default.setTimeout(function() {
                        r.onEnded && r.onEnded(), a._envelopes[t] = a._envelopes[t].filter(function(t) {
                            return r.parentId !== t.parentId
                        })
                    }, n.default.defaultNumber(r.envdata[r.envdata.length - 1].pos) / 1e3, t + "_" + r.parentId + "_envelope_play")
                }, t.prototype.connectAnalyser = function(t, e) {}, t.prototype.setBussVolume = function(t, e) {
                    if ("master" === t) {
                        var n = this._virtualBusses;
                        for (var o in n) n.hasOwnProperty(o) && (n[o].gain = e)
                    } else {
                        var i = this._virtualBusses[t];
                        if (!i) return void console.warn("Attempting to set volume for buss '" + t + "', but buss not configured");
                        i.gain = e
                    }
                    this._updateElementsVolume()
                }, t.prototype.positionBuss = function(t, e) {}, t.prototype.setupSound = function(t, e, n) {
                    var o = this,
                        i = this._audioElements[t.id] = new Audio(e);
                    i.addEventListener("loadeddata", function() {
                        o._soundSources[t.id] = {
                            index: -1,
                            source: null
                        }, n(!0)
                    }), i.addEventListener("error", function() {
                        console.warn("Sound '" + t.id + "' failed to load. HTMLMediaElement code " + i.error.code), n(!1)
                    })
                }, t.prototype.connectSound = function(t, e, n, o) {
                    void 0 === o && (o = function() {}), o(0)
                }, t.prototype.getAudioParam = function(t, e, n, o) {
                    return null
                }, t.prototype.getBuss = function(t) {
                    return null
                }, t.prototype.getContext = function() {
                    return null
                }, t.prototype.now = function() {
                    return 1e3 * Date.now()
                }, t.prototype.stopAll = function() {
                    var t = this;
                    Object.keys(this._soundContexts).forEach(function(e) {
                        var n = t._soundContexts[e];
                        n && n.forEach(function(e) {
                            t.stopSound(e.id, e.parentId)
                        })
                    })
                }, t.prototype.destroy = function() {
                    this.stopAll(), this._virtualBusses = null
                }, t.prototype._onCompleteSound = function(t, e, n) {
                    var o = this;
                    this._soundContexts[t].some(function(n) {
                        if (n.parentId === e) return o._stopSoundSource(t, n.type, n.soundSource), o._soundContexts[t].shift(), !0
                    }), n && n()
                }, t.prototype._stopSoundSource = function(t, e, n) {
                    var o = this._audioElements[t];
                    o && (o.currentTime = 0, o.pause())
                }, t.prototype._findAndGetContext = function(t, e) {
                    var n = this._soundContexts[t];
                    return n ? n.filter(function(t) {
                        return t.parentId === e
                    }) : null
                }, t.prototype._setupBusses = function(t) {
                    var e = this,
                        o = function(t) {
                            t.volume = n.default.defaultValue(t.volume, 1), e._virtualBusses[t.id] = {
                                gain: t.volume
                            }
                        };
                    o({
                        id: "master"
                    }), t.forEach(o)
                }, t.prototype._getGraphVolume = function(t, e) {
                    for (var n = this._findAndGetContext(t, e)[0], o = this._virtualBusses[n.bussId], i = 1; o;) i *= o.gain, o = this._virtualBusses[o.output];
                    return i
                }, t.prototype._updateBussVolume = function(t) {
                    var e = this._virtualBusses[t];
                    this.setBussVolume(t, e.gain)
                }, t.prototype._updateSoundVolume = function(t, e) {
                    e = n.default.defaultValue(e, t);
                    var o = this._findAndGetContext(t, e)[0];
                    o && (o.volume = n.default.defaultNumber(o.volume, 1), this._setSoundVolume(t, o.volume, e))
                }, t.prototype._setSoundVolume = function(t, e, o) {
                    o = n.default.defaultValue(o, t);
                    var i = this._findAndGetContext(t, o)[0];
                    i && (i.volume = e, this._updateElementsVolume())
                }, t.prototype._updateElementsVolume = function() {
                    var t = this;
                    this._ecasContext.soundConfig.sounds.forEach(function(e) {
                        var o = t._soundContexts[e.id];
                        if (o) {
                            var i = t._audioElements[e.id];
                            o.forEach(function(o) {
                                o.volume = n.default.defaultNumber(o.volume, 1);
                                try {
                                    i.volume = o.volume * t._getGraphVolume(e.id, o.parentId)
                                } catch (t) {
                                    console.warn(t)
                                }
                            })
                        }
                    })
                }, t
            }();
            e.default = i
        }.apply(e, o)) && (t.exports = i)
    }, function(t, e, n) {
        var o, i;
        o = [n, e, n(0), n(10), n(1)], void 0 !== (i = function(t, e, n, o, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var a = function() {
                function t(t, e) {
                    this._mixer = t.mixer, this._context = t, this._patterns = {}, this._patternItemsCompleted = {}, this._eventQueue = [], this._playingSoundsPerGroup = {}, this._playingSoundsPerSound = {}, this._playingSoundsPerPool = {}, this._playingPoolItems = {}, this._playingPatternItems = {}, this._playingPools = {}, this._pausedPools = {}, this._pausedPatterns = {}, this._playingPatternArgs = {}, this._playingPoolArgs = {}, this._triggerLimitPerGroup = {}, this._scheduledContexts = {}, this._triggerLimitPerSound = {}, this._scheduledGrouplimitFades = {}, this._poolStopTimeouts = {}, this._config = this._context.soundConfig, this._extension = this._context.fileExtension, this._initCallback = e, this._audioScheduler = new o.default(this._mixer.now.bind(this._mixer), this._context.latencyLookahead), this._setupConfiguration(), setInterval(this._onUpdate.bind(this), this._context.latencyLookahead)
                }
                return t.prototype.playSound = function(t, e, o, a, r) {
                    var u = this;
                    o = o || t, e = n.default.defaultValue(e, {}), void 0 === a && (a = !0);
                    var s = this._mixer.now(),
                        d = n.default.defaultNumber(e.volume, 1),
                        l = n.default.defaultNumber(e.pan),
                        c = n.default.defaultValue(e.loop, !1),
                        f = n.default.defaultNumber(e.pitch),
                        p = n.default.defaultValue(e.args, null),
                        h = n.default.isBarBeatTick(e.duration) || n.default.isBarBeatTick(e.startPos) || n.default.isBarBeatTick(e.startTime);
                    if (!this._context.tempoConfig.tempo && h) return void console.warn("Trying to use bar.beat.tick notation, but tempo is not set. Please configure tempo in soundconfig settings.");
                    var m = n.default.defaultNumber(e.duration, 0, this._context.tempoConfig, 0),
                        _ = n.default.defaultNumber(e.startPos, 0, this._context.tempoConfig, 0),
                        v = n.default.defaultNumber(e.startTime, 0, this._context.tempoConfig, s);
                    a && (v += s);
                    var g = Math.max(v - s, 0) || 0;
                    if (g >= this._context.latencyLookahead) return void i.default.setTimeout(function() {
                        e.startTime = v, u.playSound(t, e, o, !1)
                    }, g - this._context.latencyLookahead, t + "_sound_start");
                    var y = this._sounds[t];
                    if (!y) return void console.warn("Unable to play sound with id '" + t + "'.");
                    var b = y.group,
                        P = this._groups[y.group].buss,
                        x = void 0 === y.type ? "undefined" : y.type,
                        S = n.default.pitchToPlaybackRate(f),
                        T = (this._mixer.getSoundDuration.bind(this._mixer)(t) - _) / S,
                        I = c ? m : Math.min(m || Number.POSITIVE_INFINITY, T);
                    I && (I < T || c) && this.stopSound(t, {
                        delay: m + g
                    }, o);
                    var w = {
                            id: t,
                            bussId: P,
                            volume: d,
                            pan: l,
                            paused: !1,
                            loop: c,
                            type: x,
                            startTime: v,
                            duration: m,
                            startPos: _,
                            currentTime: 0,
                            parentId: o,
                            onEnded: function() {
                                e.onEnded && e.onEnded()
                            },
                            delay: g,
                            pitch: f,
                            playbackRate: S,
                            args: p,
                            scheduled: r
                        },
                        E = this._groups[b],
                        C = this._playingSoundsPerGroup[b];
                    if (C)
                        if (C.length === E.limit) {
                            var N = C[0];
                            N.id === w.id && (C.shift(), this.stopSound(N.id, null, N.parentId))
                        } else this._playingSoundsPerSound && this._playingSoundsPerSound[t] && this._playingSoundsPerSound[t].length >= E.limit && (this._playingSoundsPerSound[t] = [], this.stopSound(t, null, o));
                    this._mixer.connectSound(null, t, w, function() {
                        u._scheduledContexts[t + o] = w, u._audioScheduler.scheduleSound(w, function(a, r) {
                            if (u._scheduledContexts[t + o] = null, E.triggerLimit) {
                                var d = u._triggerLimitPerGroup[b];
                                d || (d = 0);
                                var l = u._mixer.now() - d,
                                    c = E.triggerLimit / 1e3 - l;
                                if (l < 0) return;
                                if (c > 0) return;
                                u._triggerLimitPerGroup[b] = s + g
                            }
                            if (y.triggerLimit) {
                                var f = u._triggerLimitPerSound[t];
                                f || (f = 0);
                                var l = s - f,
                                    c = y.triggerLimit / 1e3 - l;
                                if (l < 0) return;
                                if (c > 0) return;
                                u._triggerLimitPerSound[t] = s + g
                            }
                            var p = u._playingSoundsPerSound[t];
                            p || (p = [], u._playingSoundsPerSound[t] = []), p.push(w);
                            var h = u._playingSoundsPerGroup[b];
                            h || (h = [], u._playingSoundsPerGroup[b] = []), h.push(w);
                            var m = h.length > E.limit,
                                _ = n.default.isNumeric(w.volume) ? w.volume : n.default.randomizeValues(w.volume);
                            m && (w.volume = 0), E.crossfade || (E.crossfade = 10);
                            var P = function() {
                                setTimeout(function() {
                                    r.delay > 0 && u._context.dispatcherCallback(a, r)
                                }, v - u._mixer.now()), u._mixer.playSound.bind(u._mixer)(a, r)
                            };
                            if (m) {
                                var x = h.shift();
                                if (w.volume = _, x.id !== w.id) {
                                    P();
                                    var S = function(t) {
                                            var e = [];
                                            e.push({
                                                pos: 0,
                                                val: 0
                                            }), e.push({
                                                pos: t,
                                                val: _
                                            }), u._mixer.playEnvelope(x.id, {
                                                parentId: x.parentId,
                                                param: "volume",
                                                envdata: [{
                                                    pos: 0,
                                                    val: null
                                                }, {
                                                    pos: t,
                                                    val: 0
                                                }],
                                                targetType: "sound"
                                            }), u._mixer.playEnvelope(w.id, {
                                                parentId: w.parentId,
                                                param: "volume",
                                                envdata: e,
                                                targetType: "sound"
                                            })
                                        },
                                        T = u._mixer.now(),
                                        I = u._scheduledGrouplimitFades[E.id] || T,
                                        C = I - T;
                                    C > 0 ? i.default.setTimeout(function() {
                                        return S(100)
                                    }, C + 5, x.id + "_" + x.parentId) : (S(E.crossfade), setTimeout(function() {
                                        u.stopSound(x.id, null, x.parentId)
                                    }, E.crossfade)), u._scheduledGrouplimitFades[E.id] = T + E.crossfade / 1e3
                                }
                            } else if (e.fade && (null === e.fade.end && (e.fade.end = r.volume), null === e.fade.start && (e.fade.start = r.volume), r.volume = e.fade.start), P(), e.fade) {
                                var N = n.default.defaultNumber(e.fade.duration, 0, u._context.tempoConfig),
                                    V = n.default.defaultNumber(e.fade.start, 0),
                                    k = n.default.defaultNumber(e.fade.end, 0);
                                u.playEnvelope(t, {
                                    type: "sound",
                                    param: "volume",
                                    startTime: 0,
                                    envelopePoints: [{
                                        pos: 0,
                                        val: V
                                    }, {
                                        pos: N,
                                        val: k
                                    }]
                                })
                            }
                            u._playingSoundsPerGroup[b] = h, u._playingSoundsPerSound[t] = p
                        })
                    })
                }, t.prototype.playPool = function(t, e, o) {
                    var a = this;
                    void 0 === e && (e = {}), o = o || t;
                    var r = this._mixer.now(),
                        u = n.default.defaultNumber(e.startTime, 0, this._context.tempoConfig, r);
                    if (this._playingPools[t + o]++, u > 0) return void i.default.setTimeout(function() {
                        e.startTime = 0, a.playPool(t, e, o)
                    }, u, t + o + "_pool_play_" + this._playingPools[t + o]);
                    this._poolCounter[t + o] = n.default.defaultValue(this._poolCounter[t + o], {
                        counter: 0,
                        poolItems: []
                    });
                    var s = e.startItem;
                    if ("number" != typeof s || this.setPoolIndex(t, s)) {
                        var d = this._getItemFromPool(t, e.reset);
                        if (!d) return void console.warn("Unable to play pool '" + t + "'.");
                        var l = n.default.defaultNumber(e.startPos, 0, this._context.tempoConfig, 0);
                        d.type = n.default.defaultValue(d.type, "sound");
                        var c = n.default.defaultNumber(e.duration, 0, this._context.tempoConfig, 0),
                            f = n.default.isNumeric(d.duration) ? d.duration / 1e3 : n.default.defaultNumber(d.duration, 0, this._context.tempoConfig, 0),
                            p = n.default.isNumeric(d.delay) ? d.delay / 1e3 : n.default.defaultNumber(d.delay, 0, this._context.tempoConfig, r),
                            h = n.default.isNumeric(d.startPos) ? d.startPos / 1e3 : n.default.defaultNumber(d.startPos, 0, this._context.tempoConfig, 0),
                            m = Math.min(c || Number.MAX_VALUE, f || Number.MAX_VALUE);
                        m = m === Number.MAX_VALUE ? 0 : m, (m += u) > 0 && i.default.setTimeout(function() {
                            a.stopPool(t)
                        }, m, t + o + "_pool_stop");
                        var _ = this._pools[t],
                            v = n.default.sumPos(p, u),
                            g = n.default.sumPos(h, l),
                            y = n.default.sumVolume(d.volume, n.default.defaultNumber(e.volume, 1)),
                            b = n.default.sumPan(d.pan, e.pan),
                            P = m ? Math.min(m, f) : f,
                            x = n.default.sumPitch(d.pitch, e.pitch),
                            S = function(e) {
                                a._playingPoolItems[t + o] && (a._playingPoolItems[t + o] = a._playingPoolItems[t + o].filter(function(t) {
                                    return t.target !== e
                                })), a._playingPools[t + o]--
                            };
                        if ("sound" === d.type) {
                            e = e || {};
                            var T = {
                                    volume: y,
                                    pan: b,
                                    loop: d.loop || e.loop,
                                    pitch: x,
                                    onEnded: function() {
                                        a._poolCounter[t + o] && 0 == --a._poolCounter[t + o].counter && (a._poolCounter[t + o].poolItems.forEach(function(t) {
                                            t.onEnded && t.onEnded()
                                        }), a._poolCounter[t + o].poolItems = []), i.default.clearTimeout(d.target + "_" + t), S(d.target)
                                    },
                                    startTime: v,
                                    startPos: g,
                                    duration: P
                                },
                                I = this._playingSoundsPerPool[t];
                            if (I || (I = []), I.length >= _.limit) {
                                var w = I.shift();
                                this.stopSound(w, null, t)
                            }
                            I.push(d.target), this._poolCounter[t + o].counter++, this._poolCounter[t + o].poolItems.push(e), this.playSound(d.target, T, t), this._playingSoundsPerPool[t] = I
                        } else if ("pool" === d.type) {
                            var E = {
                                volume: y,
                                pan: b,
                                loop: d.loop || e.loop,
                                startTime: v,
                                startPos: g,
                                pitch: x,
                                onEnded: function() {
                                    S(d.target)
                                },
                                duration: P
                            };
                            this.playPool(d.target, E, t)
                        } else if ("pattern" === d.type) {
                            var C = {
                                startTime: v,
                                startPos: g,
                                onEnded: function() {
                                    S(d.target)
                                },
                                duration: P
                            };
                            this.playPattern(d.target, C, t)
                        }
                        this._playingPoolItems[t + o] = n.default.defaultValue(this._playingPoolItems[t + o], []), this._playingPoolItems[t + o].push(d), this._playingPoolArgs[t + o] = e
                    }
                }, t.prototype.resetPool = function(t) {
                    if (!this._pools || !this._pools[t]) return void console.warn("Unable to reset pool with id '" + t + "'.");
                    this._poolPointer[t] = 0
                }, t.prototype.playEnvelope = function(t, e, o) {
                    var a = this,
                        r = n.default.defaultValue(e.type, "buss"),
                        u = this._getEnvelopeData(e.envelopePoints).map(function(t) {
                            return n.default.isBarBeatTick(t.pos) && (t.pos = Math.round(1e3 * n.default.defaultNumber(t.pos, 0, a._context.tempoConfig, 0))), t
                        }),
                        s = this._mixer.now(),
                        d = n.default.defaultNumber(e.startTime, 0, this._context.tempoConfig, s);
                    d > s + this._context.latencyLookahead ? i.default.setTimeout(function() {
                        a._mixer.playEnvelope(t, {
                            param: e.param,
                            envdata: u,
                            targetType: r,
                            onEnded: e.onEnded,
                            startTime: d,
                            parentId: o
                        })
                    }, d - s + this._context.latencyLookahead, o + "_scheduled_envelope_" + t) : this._mixer.playEnvelope(t, {
                        param: e.param,
                        envdata: u,
                        targetType: r,
                        onEnded: e.onEnded,
                        startTime: d,
                        parentId: o
                    })
                }, t.prototype.stopSound = function(t, e, o) {
                    var a = this;
                    e = n.default.defaultValue(e, {}), o = o || t;
                    var r = n.default.defaultNumber(e.delay, 0, this._context.tempoConfig, this._mixer.now()),
                        u = this._mixer.now() + r;
                    i.default.clearTimeout(t + "_sound_start"), i.default.hasTimeout(t + "_sound_start") && !r && i.default.resume(t + "_sound_start");
                    var s = function() {
                        if (e.fade) {
                            var i = n.default.defaultNumber(e.fade.duration, 0, a._context.tempoConfig),
                                r = n.default.defaultNumber(e.fade.start, 0),
                                s = n.default.defaultNumber(e.fade.end, 0);
                            a.playEnvelope(t, {
                                type: "Sound",
                                param: "volume",
                                startTime: 0,
                                envelopePoints: [{
                                    pos: 0,
                                    val: r
                                }, {
                                    pos: i,
                                    val: s
                                }],
                                onEnded: function() {
                                    a._mixer.stopSound(t, o, u + i)
                                }
                            })
                        } else a._mixer.stopSound(t, o, u)
                    };
                    if (r > 0) i.default.setTimeout(s, r - this._context.latencyLookahead, t + "_" + o + "_stop");
                    else {
                        var d = this._scheduledContexts[t + o];
                        d ? this._audioScheduler.cancelScheduledSound(d) : s()
                    }
                    this._eventQueue.filter(function(e) {
                        return e.id === t && e.parentId === o
                    }), this._purgePlayingSound(t, o)
                }, t.prototype.stopPool = function(t, e, o) {
                    var a = this;
                    void 0 === e && (e = 0), o = o || t;
                    var r = this._mixer.now();
                    if ((e = n.default.defaultNumber(e, 0, this._context.tempoConfig, r)) >= this._context.latencyLookahead) return void i.default.setTimeout(function() {
                        var n = a._mixer.now() - r,
                            i = e - n;
                        a.stopPool(t, i, o)
                    }, e - this._context.latencyLookahead, t + "_stop_pool");
                    var u = this._playingPoolItems[t + o],
                        s = function() {
                            u ? u.forEach(function(e) {
                                "sound" !== e.type && e.type ? "pool" === e.type ? a.stopPool(e.target, 0, t) : "pattern" === e.type && a.stopPattern(e.target, 0, t) : a.stopSound(e.target, null, t)
                            }) : console.warn("Unable to stop pool '" + t + "'"), delete a._playingPoolItems[t + o], delete a._playingPoolArgs[t + o];
                            for (var e = a._playingPools[t + o], n = void 0; n < e; n++) i.default.clearTimeout(t + "_pool_play_" + n);
                            a._playingPools[t + o] = 0, i.default.clearTimeout(t + "_pool_stop")
                        };
                    delete this._poolCounter[t + o], e = n.default.randomizeValues(e), e ? i.default.setTimeout(s, e) : s()
                }, t.prototype.pauseSound = function(t, e, o) {
                    var a = this;
                    i.default.pause(t + "_sound_start"), o = o || t;
                    var r = this._mixer.now();
                    if ((e = n.default.defaultNumber(e, 0, this._context.tempoConfig, r)) >= this._context.latencyLookahead) return void i.default.setTimeout(function() {
                        var n = a._mixer.now() - r,
                            i = e - n;
                        a.pauseSound(t, i, o)
                    }, e - this._context.latencyLookahead, t + "_sound_pause");
                    this._eventQueue = this._eventQueue.filter(function(e) {
                        return e.id !== t && e.parentId !== o
                    }), e ? i.default.setTimeout(function() {
                        a._mixer.pauseSound(t, o)
                    }, e, t) : this._mixer.pauseSound(t, o)
                }, t.prototype.pausePool = function(t, e, o) {
                    var a = this;
                    o = o || t;
                    var r = this._playingPoolItems[t + o];
                    if (!r) return void console.warn("Unable to pause pool '" + t + "'");
                    var u = this._mixer.now();
                    if ((e = n.default.defaultNumber(e, 0, this._context.tempoConfig, u)) >= this._context.latencyLookahead) return void i.default.setTimeout(function() {
                        var n = a._mixer.now() - u,
                            i = e - n;
                        a.pausePool(t, i, o)
                    }, e - this._context.latencyLookahead, t + "_pool_pause");
                    for (var s = function(e) {
                            switch (e.type) {
                                case "pattern":
                                    a.pausePattern(e.target, 0, o);
                                    break;
                                case "pool":
                                    a.pausePool(e.target, 0, o);
                                    break;
                                case "sound":
                                default:
                                    a.pauseSound(e.target, 0, t)
                            }
                        }, d = this._playingPools[t + o], l = void 0; l < d; l++) i.default.pause(t + o + "_pool_play_" + l);
                    e ? i.default.setTimeout(function() {
                        r.forEach(s), a._pausedPools[t + o] = !0
                    }, e) : (r.forEach(s), this._pausedPools[t + o] = !0)
                }, t.prototype.resumeSound = function(t, e, o) {
                    var a = this;
                    o = n.default.defaultValue(o, t);
                    var r = this._mixer.now();
                    if ((e = n.default.defaultNumber(e, 0, this._context.tempoConfig, r)) >= this._context.latencyLookahead) return void i.default.setTimeout(function() {
                        var n = a._mixer.now() - r,
                            i = e - n;
                        a.resumeSound(t, i, o)
                    }, e - this._context.latencyLookahead, t + "_sound_resume");
                    i.default.hasTimeout(t + "_sound_start") && !e ? i.default.resume(t + "_sound_start") : n.default.isNumber(e) && e > 0 ? i.default.setTimeout(function() {
                        a._mixer.resumeSound(t, o)
                    }, e) : this._mixer.resumeSound(t, o)
                }, t.prototype.resumePool = function(t, e, o) {
                    var a = this;
                    o = o || t;
                    var r = this._mixer.now();
                    if ((e = n.default.defaultNumber(e, 0, this._context.tempoConfig, r)) >= this._context.latencyLookahead) return void i.default.setTimeout(function() {
                        var n = a._mixer.now() - r,
                            i = e - n;
                        a.resumePool(t, i, o)
                    }, e - this._context.latencyLookahead, t + "_pool_resume");
                    var u = n.default.filterUnique(this._playingPoolItems[t + o], ["target", "type"]),
                        s = function() {
                            if (u)
                                if (a._pausedPools[t + o]) {
                                    u.forEach(function(e) {
                                        switch (e.type) {
                                            case "pattern":
                                                a.resumePattern(e.target, 0, t);
                                                break;
                                            case "pool":
                                                a.resumePool(e.target, 0, t);
                                                break;
                                            case "sound":
                                            default:
                                                a.resumeSound(e.target, 0, t)
                                        }
                                    }), delete a._pausedPools[t + o];
                                    for (var e = a._playingPools[t + o], n = void 0; n < e; n++) i.default.resume(t + "_pool_play_" + n)
                                } else a.stopPool(t), a.playPool(t, a._playingPoolArgs[t + o]);
                            else console.warn("Unable to resume pool '" + t + "'")
                        };
                    e = n.default.randomizeValues(e), e ? i.default.setTimeout(s, e) : s()
                }, t.prototype.playPattern = function(t, e, o, a) {
                    var r = this;
                    void 0 === e && (e = {}), void 0 === a && (a = !0), o = o || t, e = n.default.defaultValue(e, {});
                    var u = this._mixer.now(),
                        s = n.default.cloneObject(this._context.tempoConfig),
                        d = this._config.patterns.filter(function(e) {
                            return e.id === t
                        })[0];
                    if (this._patternItemsCompleted[t + o] = 0, !d) return console.warn("Unable to play pattern with id '" + t + "'."), null;
                    s.tempo = d.tempo || s.tempo, s.triggerQuantize = n.default.getQuantizeNumber(d.triggerQuantize) || s.triggerQuantize, s.timeSignature = n.default.stringToTimeSignature(d.timeSignature) || s.timeSignature;
                    var l = this._calculateMsPerBeat(s),
                        c = n.default.defaultNumber(e.startTime, 0, s, u);
                    a && (c += u);
                    var f = c - u;
                    if (c >= u + this._context.latencyLookahead) return void i.default.setTimeout(function() {
                        e.startTime = c, r.playPattern(t, e, o, !1)
                    }, c - (u + this._context.latencyLookahead), t + "_pattern_play");
                    var p = n.default.defaultNumber(e.startPos, 0, s, 0),
                        h = n.default.defaultNumber(e.duration, 0, s, 0);
                    h = Math.max(h, 0);
                    var m = d.pattern.length,
                        _ = s.triggerQuantize >= 1 ? s.triggerQuantize * s.timeSignature.meter : s.triggerQuantize,
                        v = l * _,
                        g = u,
                        y = !1,
                        b = d.pattern.sort(function(t) {
                            return t.sound ? -1 : 1
                        }),
                        P = function() {
                            var n = r._patternItemsCompleted[t + o];
                            n || (n = 0), n++, r._patternItemsCompleted[t + o] = n, n === m && (r.stopPattern(t, 0, o), e.onEnded && e.onEnded())
                        },
                        x = 0,
                        S = 0,
                        T = !1,
                        I = !0;
                    b.forEach(function(e, i) {
                        e.parentId = o, r._playingPatternItems[t + o] = n.default.defaultValue(r._playingPatternItems[t + o], []), r._playingPatternItems[t + o].push(e);
                        var a = n.default.isNumeric(e.startPos) ? e.startPos / 1e3 : e.startPos,
                            l = n.default.isNumeric(e.duration) ? e.duration / 1e3 : e.duration,
                            c = n.default.isNumeric(e.delay) ? e.delay / 1e3 : e.delay,
                            h = n.default.defaultNumber(l, 0, s, 0),
                            m = r._mixer.getSoundDuration(e.sound),
                            _ = 0 === h ? e.sound ? m : 0 : h,
                            g = Math.round(Math.max(_ / v, 1)),
                            b = e.loop && d.sync ? g * v : m;
                        S = Math.max(S, e.loop && d.sync ? b : 0);
                        var w = n.default.sumPos(n.default.defaultNumber(a, 0, s, 0), p);
                        w === b && (w = 0), w >= m && b && e.loop && (w %= b);
                        var E = n.default.sumPos(n.default.defaultNumber(c, 0, s, u), f);
                        if (h = Math.max(h, 0), _ = e.loop && !d.sync ? h : _ + E - w, x = Math.max(x, _), e.sound)
                            if (e.loop ? T = !0 : I = !1, d.sync) {
                                var C = {
                                    startTime: E + u,
                                    volume: e.volume,
                                    pan: e.pan,
                                    loop: !1,
                                    startPos: w,
                                    duration: h,
                                    pitch: e.pitch,
                                    args: e.args,
                                    onEnded: _ === Number.MAX_VALUE || e.loop ? null : P
                                };
                                r._scheduleItem.call(r, e, t, i, C, b)
                            } else {
                                var C = {
                                    startTime: E + u,
                                    volume: e.volume,
                                    pan: e.pan,
                                    loop: e.loop,
                                    startPos: w,
                                    duration: h,
                                    pitch: e.pitch,
                                    args: e.args,
                                    onEnded: _ === Number.MAX_VALUE || e.loop ? null : P
                                };
                                y = y || e.loop, C.startTime <= u ? r.playSound(e.sound, C, t, !1) : r._scheduleItem.call(r, e, t, i, C)
                            }
                        else if (e.envelope) {
                            var N = void 0;
                            if (n.default.isString(e.envelope)) {
                                var V = r._config.envelopePresets;
                                N = V.reduce(function(t, n) {
                                    return n.id === e.envelope ? n : t
                                })
                            } else n.default.isEnvelope(e.envelope) && (N = e.envelope);
                            var k = {
                                startTime: E + u,
                                param: N.param,
                                envelopePoints: N.data,
                                onEnded: P
                            };
                            k.type = e.soundId ? "sound" : "buss";
                            var A = e.bussId || e.soundId;
                            if (A)
                                if (k.startTime <= u) {
                                    var M = e.bussId || e.soundId;
                                    r.playEnvelope(M, k)
                                } else r._scheduleItem.call(r, e, t, i, k);
                            else {
                                var O = !1;
                                d.pattern.forEach(function(n) {
                                    if (n.sound) {
                                        var o = JSON.parse(JSON.stringify(k));
                                        o.onEnded = O ? null : P, o.type = "sound", e.soundId = n.sound, r._scheduleItem(e, t, i, o), O = !0
                                    }
                                })
                            }
                        } else if (e.pattern) {
                            var L = {
                                startTime: E,
                                onEnded: P,
                                startPos: w,
                                duration: h
                            };
                            r._scheduleItem.call(r, e, t, i, L)
                        } else if (e.pool) {
                            var B = n.default.defaultNumber(e.duration) / 1e3,
                                z = {
                                    volume: e.volume,
                                    pan: e.pan,
                                    loop: e.loop,
                                    startTime: E,
                                    duration: B,
                                    startPos: w,
                                    onEnded: P
                                };
                            r._scheduleItem.call(r, e, t, i, z)
                        }
                    });
                    var w = Math.min(x > 0 ? x : Number.MAX_VALUE, h || Number.MAX_VALUE);
                    !I && T && (w = h > 0 ? h : 0), T && h > x && (w = h), (0 === S || h > 0) && (g += w + f, this._patterns[t + o] = {
                        pattern: d,
                        endTime: g,
                        onEnded: e.onEnded
                    }, this._playingPatternArgs[t + o] = e, w > 0 && w !== Number.MAX_VALUE && i.default.setTimeout(function() {
                        r.stopPattern(t, 0, o)
                    }, w + f, t + "_scheduled_" + o + "_pattern"))
                }, t.prototype.pausePattern = function(t, e, o) {
                    var a = this;
                    void 0 === e && (e = 0), void 0 === o && (o = null), o = o || t;
                    var r = this._mixer.now();
                    if ((e = n.default.defaultNumber(e, 0, this._context.tempoConfig, r)) >= this._context.latencyLookahead) return void i.default.setTimeout(function() {
                        var n = a._mixer.now() - r,
                            i = e - n;
                        a.pausePattern(t, i, o)
                    }, e - this._context.latencyLookahead, t + "_pattern_pause");
                    var u = function() {
                        if (i.default.pause(t + "_pattern_play"), !a._playingPatternItems[t + o]) return console.warn("Unable to pause pattern with id '" + t + "' and parentId '" + o + "'."), null;
                        i.default.pause(t + "_" + o + "_pattern"), i.default.pauseMatching(new RegExp(t + "_scheduled_(.)+")), a._playingPatternItems[t + o].forEach(function(e) {
                            e.sound ? a.pauseSound(e.sound, 0, t) : e.pattern ? a.pausePattern(e.pattern, 0, t) : e.pool ? a.pausePool(e.pool, 0, t) : e.envelope
                        }), a._pausedPatterns[t + o] = !0
                    };
                    e = n.default.randomizeValues(e), e ? i.default.setTimeout(u, e, t + "_" + o + "_pattern_pause") : u()
                }, t.prototype.resumePattern = function(t, e, o) {
                    var a = this;
                    void 0 === e && (e = 0), o = o || t;
                    var r = this._mixer.now();
                    if ((e = n.default.defaultNumber(e, 0, this._context.tempoConfig, r)) >= this._context.latencyLookahead) return void i.default.setTimeout(function() {
                        var n = a._mixer.now() - r,
                            i = e - n;
                        a.resumePattern(t, i, o)
                    }, e - this._context.latencyLookahead, t + "_pattern_resume");
                    var u = "Unable to resume pattern with id '" + t + "'.";
                    if (this._pausedPatterns[t + o]) {
                        var s = this._patterns[t + o];
                        if (!s || !s.pattern || !this._playingPatternItems[t + o]) return console.warn(u), null;
                        i.default.resume(t + "_" + o + "_pattern"), i.default.resume(t + "_pattern_play"), i.default.resumeMatching(new RegExp(t + "_scheduled_(.)+")), this._playingPatternItems[t + o].forEach(function(n) {
                            n.sound ? a.resumeSound(n.sound, e, t) : n.pool ? a.resumePool(n.pool, e, t) : n.pattern ? a.resumePattern(n.pattern, e, t) : n.envelope
                        }), delete this._pausedPatterns[t + o]
                    } else if (this._patterns[t + o]) {
                        var d = this._playingPatternArgs[t + o];
                        this.stopPattern(t), d.startTime = e, this.playPattern(t, d)
                    } else console.warn(u)
                }, t.prototype.stopPattern = function(t, e, o) {
                    var a = this;
                    void 0 === e && (e = 0), o = o || t;
                    var r = this._mixer.now();
                    if ((e = n.default.defaultNumber(e, 0, this._context.tempoConfig, r)) >= this._context.latencyLookahead) return void i.default.setTimeout(function() {
                        var n = a._mixer.now() - r,
                            i = e - n;
                        a.stopPattern(t, i, o)
                    }, e - this._context.latencyLookahead, t + "_pattern_stop");
                    var u = this._patterns[t + o],
                        s = this._playingPatternItems[t + o];
                    if (!s) return console.warn("Unable to stop pattern with id '" + t + "' and parentId '" + o + "'."), null;
                    i.default.clearTimeout(t + "_" + o + "_pattern"), i.default.clearTimeout(t + "_pattern_play"), i.default.clearMatching(new RegExp(t + "_scheduled_(.)+")), s.forEach(function(n) {
                        var o;
                        n.sound ? (o = n.sound, a.stopSound(n.sound, {
                            delay: e
                        }, t)) : n.pattern ? (o = n.pattern, a.stopPattern(n.pattern, e, t)) : n.pool ? (o = n.pool, a.stopPool(n.pool, e, t)) : n.envelope, a._eventQueue = a._eventQueue.filter(function(e) {
                            return e.parentId !== t && e.id !== o
                        })
                    });
                    var d = u ? u.onEnded : null;
                    d && d(), delete this._patterns[t + o], delete this._playingPatternItems[t + o], delete this._playingPatternArgs[t + o]
                }, t.prototype.stopAll = function() {
                    this._mixer.stopAll()
                }, t.prototype.setPoolIndex = function(t, e) {
                    var n = e - 1;
                    return e > this._poolQueue[t].length || e < 1 ? (console.warn("Sound Item outbound exception with pool Id '" + t + "'"), !1) : (this._poolPointer[t] = n, !0)
                }, t.prototype.updateTempoConfig = function(t) {
                    this._context.tempoConfig = t, this._msPerBeat = this._calculateMsPerBeat(t), this._tickSize = this._calculateTickSize(this._msPerBeat)
                }, t.prototype._calculateTickSize = function(t) {
                    return t / n.default.TICKS_PER_BEAT
                }, t.prototype._calculateMsPerBeat = function(t) {
                    return 60 / (t.tempo / (1 / t.timeSignature.unit * 4))
                }, t.prototype._purgePlayingSound = function(t, e) {
                    var n = this._playingSoundsPerGroup[this._sounds[t].group];
                    n && (this._playingSoundsPerGroup[this._sounds[t].group] = n.filter(function(n) {
                        return !(n.id === t && n.parentId === e)
                    }), this._playingSoundsPerPool[e] && this._playingSoundsPerPool[e].pop())
                }, t.prototype._getEnvelopeData = function(t) {
                    var e;
                    if (n.default.isString(t)) {
                        var o = this._config.envelopePresets.filter(function(e) {
                            return e.id === t
                        })[0];
                        o ? e = o.data : console.warn("Cannot find envelopePreset '" + t + "'")
                    } else e = t;
                    return e
                }, t.prototype._getItemFromPool = function(t, e) {
                    if (!this._pools || !this._pools[t]) return console.warn("Unable to play pool with id '" + t + "'."), null;
                    var o = this._poolQueue[t].length,
                        i = this._pools[t].type;
                    (e || this._poolPointer[t] >= o) && (this._poolPointer[t] = 0, "random" === i && (this._poolQueue[t] = n.default.randomShuffle(this._poolQueue[t])));
                    var a = this._poolQueue[t][this._poolPointer[t]];
                    return this._poolPointer[t]++, a.pan = a.pan || 0, a
                }, t.prototype._setupGroups = function(t) {
                    var e = this;
                    this._groups = {}, t.forEach(function(t) {
                        e._groups[t.id] = t
                    })
                }, t.prototype._setupSounds = function(t) {
                    var e = this;
                    if (this._sounds = {}, !t || 0 === t.length) return void(this._initCallback && (this._context.sequencer = this, this._initCallback(this)));
                    var n = 0,
                        o = function(o) {
                            if (!o) return void e._initCallback(null);
                            ++n === t.length && (e._context.sequencer = e, e._initCallback && e._initCallback(e))
                        };
                    t.forEach(function(t) {
                        e._processSound(t, o)
                    })
                }, t.prototype._processSound = function(t, e) {
                    this._sounds[t.id] = t;
                    var n = this._config.settings.loadPath;
                    n += this._context.assetPackage + "/", n += t.id + this._extension, this._mixer.setupSound(t, n, e)
                }, t.prototype._setupPools = function(t) {
                    var e = this;
                    if (this._pools = {}, this._poolQueue = {}, this._poolPointer = {}, this._poolCounter = {}, t) {
                        if (0 === t.length) return void(this._initCallback && this._initCallback(this));
                        t.forEach(function(t) {
                            var o = t.id;
                            e._pools[o] = t;
                            var i = t.type,
                                a = [];
                            t.items.forEach(function(e, n) {
                                if (t.priority)
                                    for (var o = t.priority[n], i = 0; i < o; i++) a.push(e);
                                else a.push(e)
                            }), e._poolQueue[t.id] = "random" === i ? n.default.randomShuffle(a) : a, e._poolPointer[t.id] = 0
                        })
                    }
                }, t.prototype._setupSynthesis = function(t) {
                    var e = this;
                    this._sounds = this._sounds || {}, t && t.forEach(function(t) {
                        e._sounds[t.id] = {
                            id: t.id,
                            group: t.group,
                            type: "synthesized"
                        }
                    })
                }, t.prototype._setupConfiguration = function() {
                    this.updateTempoConfig(this._context.tempoConfig), this._setupGroups(this._config.groups), this._setupPools(this._config.pools), this._setupSounds(this._config.sounds), this._setupSynthesis(this._config.synthesis)
                }, t.prototype._scheduleItem = function(t, e, o, i, a) {
                    var r = this;
                    void 0 === a && (a = 0);
                    var u = null,
                        s = null,
                        d = this._mixer.now();
                    if (e = e || t.parentId, t.sound) u = t.sound, s = function(t) {
                        i.startTime = t, r.playSound(u, i, e, !1, a > 0)
                    };
                    else if (t.pattern) u = t.pattern, s = function(e) {
                        i.startTime = e, r.playPattern(u, i, t.parentId)
                    };
                    else if (t.pool) u = t.pool, s = function(e) {
                        i.startTime = e, r.playPool(u, i, t.parentId)
                    };
                    else {
                        if (!t.envelope) return void console.warn("Attempting to schedule unknown pattern item type. Item: " + JSON.stringify(t));
                        u = t.envelope;
                        var l = t.bussId || t.soundId;
                        s = function(t) {
                            i.startTime = t, r.playEnvelope(l, i, e)
                        }
                    }
                    var c = n.default.defaultNumber(i.startTime, 0, this._context.tempoConfig, d);
                    if (0 === c) s.call(this, c);
                    else {
                        var f = {
                            eventMethod: s,
                            loopLength: a,
                            startTime: c,
                            id: u,
                            parentId: e
                        };
                        this._eventQueue.push(f)
                    }
                }, t.prototype._onUpdate = function() {
                    var t = this,
                        e = this._mixer.now(),
                        n = [];
                    this._eventQueue = this._eventQueue.filter(function(o) {
                        var i = o.loopLength > 0,
                            a = e + t._context.latencyLookahead;
                        return !(o.startTime <= a) || (n.push({
                            method: o.eventMethod,
                            startTime: o.startTime
                        }), i && (o.startTime += o.loopLength), i)
                    }), n.forEach(function(e) {
                        return e.method.call(t, e.startTime)
                    })
                }, t
            }();
            e.default = a
        }.apply(e, o)) && (t.exports = i)
    }, function(t, e, n) {
        var o, i;
        o = [n, e], void 0 !== (i = function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                function t(t, e) {
                    void 0 === t && (t = .6), this._volumes = [], this._overInfos = [], this._averaging = .95, this._overLevel = .71, this._overLag = 750, this._id = Date.now(), this._callback = e, this._averaging = t, this._init()
                }
                return t.prototype.create = function(t) {
                    return this._processor = t.createScriptProcessor(512), this._processor.onaudioprocess = this._volumeAudioProcess.bind(this), this._processor.connect(t.destination), this._processor
                }, t.prototype.destroy = function() {
                    this._processor.disconnect(), this._processor.onaudioprocess = null, this._processor = null, this._volumes = [], this._overInfos = []
                }, t.prototype._init = function() {
                    this._volumes = [0, 0], this._overInfos = [{
                        over: !1,
                        lastOver: 0
                    }, {
                        over: !1,
                        lastOver: 0
                    }]
                }, t.prototype._volumeAudioProcess = function(t) {
                    var e = this,
                        n = e._volumes[0],
                        o = e._volumes[1];
                    e._volumes[0] = 0, e._volumes[1] = 0;
                    var i = function(t, n) {
                        var o = t.getChannelData(n),
                            i = o.length;
                        e._overInfos[n].lastOver + e._overLag < window.performance.now() && (e._overInfos[n].over = !1);
                        var a = o.reduce(function(t, e) {
                                return t + e * e
                            }),
                            r = Math.sqrt(a / i);
                        r >= e._overLevel && (e._overInfos[n].over = !0, e._overInfos[n].lastOver = window.performance.now()), e._averaging > 0 ? e._volumes[n] = Math.max(r, e._volumes[n] * e._averaging) : e._volumes[n] = r
                    };
                    i(t.inputBuffer, 0), i(t.inputBuffer, 1);
                    var a = e._volumes[0],
                        r = e._volumes[1];
                    (n !== a || o !== r) && a >= 0 && r >= 0 && e._callback({
                        volume: {
                            left: a,
                            right: r
                        },
                        clipping: {
                            left: e._overInfos[0].over,
                            right: e._overInfos[1].over
                        }
                    })
                }, t
            }();
            e.default = n
        }.apply(e, o)) && (t.exports = i)
    }, function(t, e, n) {
        var o, i;
        o = [n, e, n(0)], void 0 !== (i = function(t, e, n) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var o = function() {
                function t(t, e) {
                    void 0 === e && (e = .03), this._scheduled = [], this._timeProvider = t, this._interval = e, this._intervalId = window.setInterval(this._update.bind(this), 1e3 * e)
                }
                return t.prototype.scheduleSound = function(t, e) {
                    this._scheduled.push({
                        context: t,
                        callback: e
                    }), this._update()
                }, t.prototype.cancelScheduledSound = function(t) {
                    this._scheduled = this._scheduled.filter(function(e) {
                        return !(e.context.id === t.id && e.context.parentId === t.parentId)
                    })
                }, t.prototype._update = function() {
                    var t = this,
                        e = this._timeProvider();
                    this._scheduled = this._scheduled.filter(function(o) {
                        var i = o.context;
                        return i.startTime = n.default.isNumber(i.startTime) ? i.startTime : 0, !(i.startTime - e <= t._interval && (o.callback(i.id, i), 1))
                    })
                }, t
            }();
            e.default = o
        }.apply(e, o)) && (t.exports = i)
    }, function(t, e, n) {
        var o, i;
        o = [n, e, n(5), n(2), n(0), n(9), n(6), n(7), n(8), n(3), n(4), n(1)], void 0 !== (i = function(t, e, n, o, i, a, r, u, s, d, l, c) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.TriggerConfig = n.default, e.AnalyserConfig = o.default;
            var f = function() {
                function t(t, e, n, o) {
                    var i = this;
                    this._context = o || new d.default, this._loadEventMappings(e, function(e) {
                        e ? i._loadSoundConfig(t, n) : n && n(null)
                    })
                }
                return t.prototype.triggerEvent = function(t, e) {
                    var n = this,
                        o = function(t) {
                            return t.args.map(function(t) {
                                var n, o = function(t, n, o) {
                                    if (t.hasOwnProperty("eventParam")) {
                                        var a = t.eventParam,
                                            r = e[a];
                                        if (i.default.isNumeric(r) && (r = i.default.defaultNumber(r)), t.hasOwnProperty("translation")) {
                                            var u = t.translation;
                                            if (i.default.isArray(u)) {
                                                var s = u.reduce(function(t, e) {
                                                    return e.actual === r ? e : t
                                                });
                                                o ? n[o] = i.default.randomizeValues(s.target) : n = i.default.randomizeValues(s.target)
                                            } else if (u.hasOwnProperty("min") && u.hasOwnProperty("max")) {
                                                var d = i.default.randomizeValues(u.min.actual),
                                                    l = i.default.randomizeValues(u.min.target),
                                                    c = i.default.randomizeValues(u.max.actual) - d,
                                                    f = i.default.randomizeValues(u.max.target) - l,
                                                    p = (r - d) / c,
                                                    h = f * p + l;
                                                o ? n[o] = h : n = h
                                            } else console.warn("Invalid event param translation:" + JSON.stringify(t))
                                        } else o ? n[o] = r : n = r
                                    } else n[o] = t;
                                    return n
                                };
                                return "object" == typeof t ? (n = {}, t.hasOwnProperty("eventParam") ? n = o(t) : Object.keys(t).forEach(function(e) {
                                    o(t[e], n, e)
                                })) : n = t, n
                            })
                        };
                    if (this._events && this._events[t]) {
                        var a = i.default.cloneObject(this._events[t]);
                        a && a.actions.forEach(function(i) {
                            if (i.args[1])
                                for (var a in i.args[1]) i.args[1].hasOwnProperty(a) && i.args[1][a].hasOwnProperty("eventParam") && !e && console.warn("You have configured args but didn't pass params. " + JSON.stringify(i.args));
                            var r = e ? o(i) : i.args.reduce(function(t, e) {
                                return t.concat(e)
                            }, []);
                            try {
                                n[i.type].apply(n, r)
                            } catch (e) {
                                console.warn("Failed to perform action '" + i.type + "' for event '" + t + "'. Error:" + e)
                            }
                        })
                    }
                }, t.prototype.playSound = function(t, e) {
                    e = i.default.defaultValue(e, {}), e.volume = i.default.defaultNumber(e.volume, 1), e.pan = i.default.defaultNumber(e.pan), e.loop = i.default.defaultValue(e.loop, !1), e.pitch = i.default.defaultNumber(e.pitch), e.args = i.default.defaultValue(e.args, null), e.onEnded = i.default.defaultValue(e.onEnded, null), i.default.isNumeric(e.startTime) && (e.startTime = i.default.defaultNumber(e.startTime) / 1e3), i.default.isNumeric(e.duration) && (e.duration = i.default.defaultNumber(e.duration) / 1e3), i.default.isNumeric(e.startPos) && (e.startPos = i.default.defaultNumber(e.startPos) / 1e3), this._sequencer.playSound(t, e)
                }, t.prototype.playPool = function(t, e) {
                    e = i.default.defaultValue(e, {}), e.volume = i.default.defaultNumber(e.volume, 1), e.pan = i.default.defaultNumber(e.pan), e.loop = i.default.defaultValue(e.loop, !1), e.pitch = i.default.defaultNumber(e.pitch), e.startItem = i.default.defaultNumber(e.startItem, null), e.onEnded = i.default.defaultValue(e.onEnded, null), i.default.isNumeric(e.startTime) && (e.startTime = i.default.defaultNumber(e.startTime) / 1e3), i.default.isNumeric(e.duration) && (e.duration = i.default.defaultNumber(e.duration) / 1e3), i.default.isNumeric(e.startPos) && (e.startPos = i.default.defaultNumber(e.startPos) / 1e3), this._sequencer.playPool.bind(this._sequencer)(t, e)
                }, t.prototype.resetPool = function(t) {
                    this._sequencer.resetPool.bind(this._sequencer)(t)
                }, t.prototype.playPattern = function(t, e) {
                    e = i.default.defaultValue(e, {}), e.onEnded = i.default.defaultValue(e.onEnded, function() {}), i.default.isNumeric(e.startTime) && (e.startTime = i.default.defaultNumber(e.startTime) / 1e3), i.default.isNumeric(e.duration) && (e.duration = i.default.defaultNumber(e.duration) / 1e3), i.default.isNumeric(e.startPos) && (e.startPos = i.default.defaultNumber(e.startPos) / 1e3);
                    var n = this._config.patterns.reduce(function(e, n) {
                        return n.id === t ? n : e
                    });
                    n.timeSignature && this.setTimeSignature(n.timeSignature), n.tempo && this.setTempo(n.tempo), this._sequencer.playPattern(t, e)
                }, t.prototype.playEnvelope = function(t, e) {
                    e = i.default.defaultValue(e, {}), e.startTime = i.default.isNumeric(e.startTime) ? e.startTime / 1e3 : e.startTime, e.type = e.type || "buss", this._sequencer.playEnvelope(t, e, t)
                }, t.prototype.pauseSound = function(t, e) {
                    e = i.default.defaultValue(e, {}), i.default.isNumeric(e.delay) && (e.delay = i.default.defaultNumber(e.delay) / 1e3), this._sequencer.pauseSound(t, e.delay)
                }, t.prototype.pausePool = function(t, e) {
                    e = i.default.defaultValue(e, {}), i.default.isNumeric(e.delay) && (e.delay = i.default.defaultNumber(e.delay) / 1e3), this._sequencer.pausePool(t, e.delay)
                }, t.prototype.resumeSound = function(t, e) {
                    e = i.default.defaultValue(e, {}), i.default.isNumeric(e.delay) && (e.delay = i.default.defaultNumber(e.delay) / 1e3), this._sequencer.resumeSound(t, e.delay)
                }, t.prototype.resumePool = function(t, e) {
                    e = i.default.defaultValue(e, {}), i.default.isNumeric(e.delay) && (e.delay = i.default.defaultNumber(e.delay) / 1e3), this._sequencer.resumePool(t, e.delay)
                }, t.prototype.pausePattern = function(t, e) {
                    e = i.default.defaultValue(e, {}), i.default.isNumeric(e.delay) && (e.delay = i.default.defaultNumber(e.delay) / 1e3), this._sequencer.pausePattern(t, e.delay)
                }, t.prototype.resumePattern = function(t, e) {
                    e = i.default.defaultValue(e, {}), i.default.isNumeric(e.delay) && (e.delay = i.default.defaultNumber(e.delay) / 1e3), this._sequencer.resumePattern(t, e.delay)
                }, t.prototype.stopSound = function(t, e) {
                    e = i.default.defaultValue(e, {}), i.default.isNumeric(e.delay) && (e.delay = i.default.defaultNumber(e.delay) / 1e3), this._sequencer.stopSound(t, e)
                }, t.prototype.stopPool = function(t, e) {
                    e = i.default.defaultValue(e, {}), i.default.isNumeric(e.delay) && (e.delay = i.default.defaultNumber(e.delay) / 1e3), this._sequencer.stopPool(t, e.delay)
                }, t.prototype.stopPattern = function(t, e) {
                    e = i.default.defaultValue(e, {}), i.default.isNumeric(e.delay) && (e.delay = i.default.defaultNumber(e.delay) / 1e3), this._sequencer.stopPattern(t, e.delay)
                }, t.prototype.analyseBuss = function(t) {
                    if (t = i.default.defaultValue(t, {}), t.callback = i.default.defaultValue(t.callback, function() {}), t.buss = i.default.defaultValue(t.buss, "master"), t.config = i.default.defaultValue(t.config, new o.default), this._webAudioEnabled) {
                        var e = t.config ? t.config.smoothingTimeConstant : .95;
                        this._bussMeters || (this._bussMeters = {});
                        var n = new a.default(e, function(e) {
                            t.callback(t.buss, e)
                        });
                        this._bussMeters[t.buss] = n;
                        var r = n.create(this._context.audioContext);
                        this._mixer.connectAnalyser(r, t.buss)
                    }
                }, t.prototype.removeAnalyser = function(t) {
                    t = i.default.defaultValue(t, "master"), this._bussMeters[t].destroy()
                }, t.prototype.setMasterVolume = function(t) {
                    this.setBussVolume("master", t)
                }, t.prototype.setBussVolume = function(t, e) {
                    t = i.default.defaultValue(t, "master"), e = i.default.defaultNumber(e, 1), this._mixer.setBussVolume(t, e)
                }, t.prototype.positionBuss = function(t, e) {
                    e = i.default.defaultValue(e, {}), t = i.default.defaultValue(t, "master"), e.position = i.default.defaultNumber(e.position), this._mixer.positionBuss(t, e.position)
                }, t.prototype.webaudioEnabled = function() {
                    return this._webAudioEnabled
                }, t.prototype.setTempo = function(t) {
                    this._context.tempoConfig = this._context.tempoConfig || {
                        triggerQuantize: 1,
                        timeSignature: {
                            meter: 4,
                            unit: 4
                        }
                    }, this._context.tempoConfig.tempo = t, this._sequencer.updateTempoConfig(this._context.tempoConfig)
                }, t.prototype.setTriggerQuantize = function(t) {
                    this._context.tempoConfig = this._context.tempoConfig || {
                        timeSignature: {
                            meter: 4,
                            unit: 4
                        }
                    }, this._context.tempoConfig.triggerQuantize = i.default.getQuantizeNumber(t), this._sequencer.updateTempoConfig(this._context.tempoConfig)
                }, t.prototype.setTimeSignature = function(t) {
                    this._context.tempoConfig.timeSignature = i.default.stringToTimeSignature(t), this._sequencer.updateTempoConfig(this._context.tempoConfig)
                }, t.prototype.getBuss = function(t) {
                    return this._mixer.getBuss(t)
                }, t.prototype.stopAll = function() {
                    this._sequencer.stopAll()
                }, t.prototype.destroy = function() {
                    var t = this;
                    this._events = null, this._extension = null, this._config = null, this._bussMeters && Object.keys(this._bussMeters).forEach(function(e) {
                        t.removeAnalyser(e)
                    }), this._mixer.destroy()
                }, t.prototype.now = function() {
                    return this._mixer.now()
                }, t.prototype._init = function(t, e) {
                    var n = this;
                    this._context.soundConfig = this._config = t, this._context.latencyLookahead = this._context.latencyLookahead || .03;
                    var o = new l.default(this._config),
                        a = o.validate();
                    if (a && a.length > 0) return a.map(function(t) {
                        console.warn(t)
                    }), console.warn("Unable to start sound engine due to invalid configuration."), void e(null);
                    if (this._context.fileExtension ? this._extension = this._context.fileExtension : this._extension = i.default.getPreferredCodec(), null === this._extension) return console.warn("Browser does not support playback of any available format"), void(e && e(null));
                    if (this._context.fileExtension = this._extension, this._context.scriptPath = t.settings.scriptPath, this._context.assetPackage || (t.settings && t.settings.formatPresets ? this._context.assetPackage = t.settings.formatPresets[0].package : this._context.assetPackage = "autotest"), t.settings && t.settings.formatPresets) {
                        var d = t.settings.formatPresets.concat([{
                            package: ".",
                            presets: []
                        }]).filter(function(t) {
                            return t.package === n._context.assetPackage
                        });
                        if (!(d && d.length > 0)) {
                            var f = t.settings.formatPresets.map(function(t) {
                                return t.package
                            });
                            return console.error("Trying to load package '" + this._context.assetPackage + "', but no such package configured. Valid packages are: '" + f.join("', '") + "'"), void e(null)
                        }
                    }
                    this._context.tempoConfig = this._context.tempoConfig || {
                        triggerQuantize: 1,
                        timeSignature: {
                            meter: 4,
                            unit: 4
                        }
                    }, this._mixer = this._context.mixer;
                    var p = this._context.audioContext || i.default.getContext();
                    this._webAudioEnabled = null !== p && !this._context.forceLegacyAudio, this._context.audioContext = this._webAudioEnabled ? p : null;
                    var h = function() {
                        n._mixer || (n._mixer = n._webAudioEnabled ? new r.default(n._context) : new u.default(n._context), n._context.mixer = n._mixer), c.default.dateProvider = function() {
                            return n._mixer.now.bind(n._mixer)
                        }, n._sequencer = n._context.sequencer, n._sequencer ? e && e(n) : new s.default(n._context, function(o) {
                            o || console.warn("Failed to initialize sequencer. Perhaps you are missing a sound?"), n._context.sequencer = n._sequencer = o, t.settings && t.settings.tempo && n.setTempo(t.settings.tempo), t.settings && t.settings.triggerQuantize && n.setTriggerQuantize(t.settings.triggerQuantize), t.settings && t.settings.timeSignature && n.setTimeSignature(t.settings.timeSignature), e && e(o ? n : null)
                        })
                    };
                    if (t.synthesis) {
                        var m = t.synthesis.map(function(e) {
                            return t.settings.scriptPath + e.id + ".js"
                        });
                        i.default.loadScript(m, h)
                    } else h()
                }, t.prototype._loadSoundConfig = function(t, e) {
                    var n = this;
                    if (this._context.soundConfig) this._config = this._context.soundConfig, this._init(this._config, e);
                    else if (i.default.isSoundConfig(t)) this._config = t, this._init(this._config, e);
                    else {
                        if (!i.default.isString(t)) throw new Error("ECAS constructor requires a valid sound config object or an URL to JSON config");
                        this._loadConfig(t, function(t) {
                            if ("error" === t) return void e(null);
                            n._init(JSON.parse(t), e)
                        })
                    }
                }, t.prototype._loadEventMappings = function(t, e) {
                    var n = this;
                    t ? i.default.isEventMappings(t) ? (this._mapEvents(t), e(!0)) : i.default.isString(t) && this._loadConfig(t, function(t) {
                        "error" === t ? e(!1) : (n._mapEvents(JSON.parse(t)), e(!0))
                    }) : e(!0)
                }, t.prototype._loadConfig = function(t, e) {
                    var n = new XMLHttpRequest;
                    n.overrideMimeType("application/json"), n.open("GET", t, !0), n.onreadystatechange = function() {
                        n.readyState === XMLHttpRequest.DONE && (200 === n.status ? e(n.responseText) : 404 === n.status && e("error"))
                    }, n.send(null)
                }, t.prototype._mapEvents = function(t) {
                    var e = this;
                    this._events = {}, t.events.forEach(function(t) {
                        e._events[t.id] = t
                    })
                }, t
            }();
            e.ECAS = f, e.default = f
        }.apply(e, o)) && (t.exports = i)
    }, function(t, e, n) {
        var o, i;
        o = [n, e], void 0 !== (i = function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                function t(t) {
                    var e = window.innerWidth,
                        n = window.innerHeight;
                    this.audioCtx = t, this.xPos = Math.floor(e / 2), this.yPos = Math.floor(n / 2), this.zPos = 295
                }
                return t.prototype.create3dPanner = function(t) {
                    var e = this.audioCtx.createPanner();
                    e.panningModel = "equalpower", e.distanceModel = "linear", e.refDistance = 1, e.maxDistance = 1e4, e.rolloffFactor = 1, e.coneInnerAngle = 360, e.coneOuterAngle = 0, e.coneOuterGain = 0, e.orientationX ? (e.orientationX.setValueAtTime(1, this.audioCtx.currentTime), e.orientationY.setValueAtTime(0, this.audioCtx.currentTime), e.orientationZ.setValueAtTime(0, this.audioCtx.currentTime)) : e.setOrientation(1, 0, 0);
                    var n = this.audioCtx.listener;
                    return n.forwardX ? (n.forwardX.setValueAtTime(0, this.audioCtx.currentTime), n.forwardY.setValueAtTime(0, this.audioCtx.currentTime), n.forwardZ.setValueAtTime(-1, this.audioCtx.currentTime), n.upX.setValueAtTime(0, this.audioCtx.currentTime), n.upY.setValueAtTime(1, this.audioCtx.currentTime), n.upZ.setValueAtTime(0, this.audioCtx.currentTime)) : n.setOrientation(0, 0, -1, 0, 1, 0), n.positionX ? (n.positionX.setValueAtTime(this.xPos, this.audioCtx.currentTime), n.positionY.setValueAtTime(this.yPos, this.audioCtx.currentTime), n.positionZ.setValueAtTime(300, this.audioCtx.currentTime)) : n.setPosition(this.xPos, this.yPos, 300), this.setPannerPosition(e, t), e
                }, t.prototype.setPannerPosition = function(t, e) {
                    void 0 === e && (e = 0);
                    var n = 10 * e;
                    n = this.xPos + Number(n), t.setPosition(n, this.yPos, this.zPos)
                }, t
            }();
            e.default = n
        }.apply(e, o)) && (t.exports = i)
    }])
});
! function(e) {
    function t(r) {
        if (n[r]) return n[r].exports;
        var i = n[r] = {
            i: r,
            l: !1,
            exports: {}
        };
        return e[r].call(i.exports, i, i.exports, t), i.l = !0, i.exports
    }
    var n = {};
    t.m = e, t.c = n, t.d = function(e, n, r) {
        t.o(e, n) || Object.defineProperty(e, n, {
            configurable: !1,
            enumerable: !0,
            get: r
        })
    }, t.r = function(e) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }, t.n = function(e) {
        var n = e && e.__esModule ? function() {
            return e.default
        } : function() {
            return e
        };
        return t.d(n, "a", n), n
    }, t.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, t.p = "", t(t.s = 9)
}([function(e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = n(5);
    Object.keys(r).forEach(function(e) {
        "default" !== e && "__esModule" !== e && Object.defineProperty(t, e, {
            enumerable: !0,
            get: function() {
                return r[e]
            }
        })
    });
    var i = n(4);
    Object.keys(i).forEach(function(e) {
        "default" !== e && "__esModule" !== e && Object.defineProperty(t, e, {
            enumerable: !0,
            get: function() {
                return i[e]
            }
        })
    })
}, function(e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = n(8);
    Object.keys(r).forEach(function(e) {
        "default" !== e && "__esModule" !== e && Object.defineProperty(t, e, {
            enumerable: !0,
            get: function() {
                return r[e]
            }
        })
    });
    var i = n(2);
    Object.keys(i).forEach(function(e) {
        "default" !== e && "__esModule" !== e && Object.defineProperty(t, e, {
            enumerable: !0,
            get: function() {
                return i[e]
            }
        })
    })
}, function(e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.StateMap = void 0;
    var r = function() {
            return function(e, t) {
                if (Array.isArray(e)) return e;
                if (Symbol.iterator in Object(e)) return function(e, t) {
                    var n = [],
                        r = !0,
                        i = !1,
                        o = void 0;
                    try {
                        for (var a, u = e[Symbol.iterator](); !(r = (a = u.next()).done) && (n.push(a.value), !t || n.length !== t); r = !0);
                    } catch (e) {
                        i = !0, o = e
                    } finally {
                        try {
                            !r && u.return && u.return()
                        } finally {
                            if (i) throw o
                        }
                    }
                    return n
                }(e, t);
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }
        }(),
        i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, n, r) {
                return n && e(t.prototype, n), r && e(t, r), t
            }
        }(),
        o = n(0),
        a = Symbol("_currentState"),
        u = Symbol("_states"),
        s = Symbol("_changesState"),
        c = Symbol("_getEventFromState");
    t.StateMap = function() {
        function e() {
            ! function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }(this, e), this[a] = null, this[u] = new Map
        }
        return i(e, [{
            key: "addState",
            value: function(e) {
                var t = e.state,
                    n = e.activatesOn,
                    r = void 0 === n ? [] : n,
                    i = e.deactivatesOn,
                    o = void 0 === i ? [] : i,
                    a = e.parent,
                    s = void 0 === a ? null : a,
                    c = e.events,
                    l = void 0 === c ? {} : c,
                    f = s ? s + ":" + t : t;
                if (this[u].has(f)) throw new Error("Cannot add the state since it already exist on the same level.");
                var d = {
                    name: f,
                    children: new Set,
                    parent: null,
                    activatesOn: r,
                    deactivatesOn: o,
                    events: l
                };
                if (s) {
                    if (!this[u].has(s)) throw new Error("Could not add the state since the parent provided does not exist.");
                    this[u].get(s).children.add(f), d.parent = s
                }
                this[u].set(f, d)
            }
        }, {
            key: "triggerStateChange",
            value: function(e, t) {
                if (!o.Utils.isString(e)) throw new Error("Could not trigger a state change since the event was not a string.");
                if (t && !o.Utils.isArray(t)) throw new Error("Could not trigger a state change since the event arguments was provided but not as an array.");
                var n = this[u].get(this[a]);
                if (n && this[s](n.deactivatesOn, e, t)) n.parent ? this[a] = n.parent : this[a] = null;
                else if (n && n.children.size > 0) {
                    var i = !0,
                        c = !1,
                        l = void 0;
                    try {
                        for (var f, d = n.children[Symbol.iterator](); !(i = (f = d.next()).done); i = !0) {
                            var v = f.value,
                                y = this[u].get(v);
                            if (this[s](y.activatesOn, e, t)) {
                                this[a] = v;
                                break
                            }
                        }
                    } catch (e) {
                        c = !0, l = e
                    } finally {
                        try {
                            !i && d.return && d.return()
                        } finally {
                            if (c) throw l
                        }
                    }
                }
                if (!this[a]) {
                    var h = !0,
                        p = !1,
                        b = void 0;
                    try {
                        for (var g, m = this[u][Symbol.iterator](); !(h = (g = m.next()).done); h = !0) {
                            var w = g.value,
                                O = r(w, 2),
                                _ = O[0],
                                S = O[1];
                            if (this[s](S.activatesOn, e, t)) {
                                this[a] = _;
                                break
                            }
                        }
                    } catch (e) {
                        p = !0, b = e
                    } finally {
                        try {
                            !h && m.return && m.return()
                        } finally {
                            if (p) throw b
                        }
                    }
                }
            }
        }, {
            key: "getAudioEvent",
            value: function(e) {
                var t = this[u].get(this[a]);
                return t ? this[c](t, e) : null
            }
        }, {
            key: c,
            value: function(e, t) {
                return e.events[t] || (e.parent ? this[c](this[u].get(e.parent), t) : null)
            }
        }, {
            key: s,
            value: function(e, t) {
                var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [];
                return e.filter(function(e) {
                    return o.Utils.isObject(e) ? e.event === t && e.values.every(function(e) {
                        return n.includes(e)
                    }) : e === t
                }).length > 0
            }
        }]), e
    }()
}, function(e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.Observable = void 0;
    var r = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, n, r) {
                return n && e(t.prototype, n), r && e(t, r), t
            }
        }(),
        i = n(0),
        o = Symbol("_listeners");
    t.Observable = function() {
        function e() {
            ! function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }(this, e), this[o] = new Map
        }
        return r(e, [{
            key: "on",
            value: function(e, t) {
                if (!i.Utils.isString(e)) throw new Error("Could not add the event listener since the event was not a string.");
                if (!i.Utils.isFunction(t)) throw new Error("Could not add the event listener since the listener was not a function.");
                this[o].has(e) || this[o].set(e, []), this[o].get(e).push(t)
            }
        }, {
            key: "off",
            value: function(e, t) {
                if (!i.Utils.isString(e)) throw new Error("Could not add the event listener since the event was not a string.");
                if (!i.Utils.isFunction(t)) throw new Error("Could not add the event listener since the listener was not a function.");
                if (this[o].has(e)) {
                    var n = this[o].get(e).filter(function(e) {
                        return e !== t
                    });
                    if (n.length !== this[o].get(e).length) return this[o].set(e, n), !0
                }
                return !1
            }
        }, {
            key: "emit",
            value: function(e) {
                for (var t = arguments.length, n = Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++) n[r - 1] = arguments[r];
                this[o].has(e) && this[o].get(e).forEach(function(e) {
                    return e.apply(null, n)
                })
            }
        }]), e
    }()
}, function(e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
            return typeof e
        } : function(e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
        },
        i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, n, r) {
                return n && e(t.prototype, n), r && e(t, r), t
            }
        }();
    t.Utils = function() {
        function e() {
            ! function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }(this, e)
        }
        return i(e, null, [{
            key: "isObject",
            value: function(e) {
                var t = void 0 === e ? "undefined" : r(e);
                return "function" === t || "object" === t && Boolean(e)
            }
        }, {
            key: "isArray",
            value: function(e) {
                return Array.isArray(e)
            }
        }, {
            key: "isDefined",
            value: function(e) {
                return void 0 !== e
            }
        }, {
            key: "isNumber",
            value: function(t) {
                return !e.isArray(t) && !isNaN(t) && "number" == typeof t
            }
        }, {
            key: "isFunction",
            value: function(e) {
                return "[object Function]" === Object.prototype.toString.call(e)
            }
        }, {
            key: "isString",
            value: function(e) {
                return "[object String]" === Object.prototype.toString.call(e)
            }
        }, {
            key: "get",
            value: function(t, n) {
                return e.isObject(t) ? e.isArray(n) ? e.get(t[n[0]], n.slice(1)) : null : e.isDefined(t) ? t : null
            }
        }]), e
    }()
}, function(e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.HTTP = void 0;
    var r = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, n, r) {
                return n && e(t.prototype, n), r && e(t, r), t
            }
        }(),
        i = n(0);
    t.HTTP = function() {
        function e() {
            ! function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }(this, e)
        }
        return r(e, null, [{
            key: "get",
            value: function(e, t) {
                return new Promise(function(n, r) {
                    var o = new XMLHttpRequest;
                    o.onload = function() {
                        var e = this.response,
                            t = this.status;
                        t >= 200 && t < 300 || 304 === t ? n(e) : r({
                            status: this.status,
                            response: e
                        })
                    }, o.onerror = function() {
                        r({
                            status: this.status,
                            response: null
                        })
                    }, o.open("GET", e), i.Utils.isDefined(t) && (o.responseType = t), o.send()
                })
            }
        }]), e
    }()
}, function(e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.AudioLoader = void 0;
    var r = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, n, r) {
                return n && e(t.prototype, n), r && e(t, r), t
            }
        }(),
        i = n(0);
    t.AudioLoader = function() {
        function e() {
            ! function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }(this, e)
        }
        return r(e, null, [{
            key: "load",
            value: function(e) {
                return new Promise(function(t) {
                    var n = [],
                        r = e.map(function(e) {
                            var t = e.id,
                                r = e.url;
                            return i.HTTP.get(r, "arraybuffer").then(function(e) {
                                n.push({
                                    buffer: e,
                                    id: t
                                })
                            })
                        });
                    Promise.all(r).then(function() {
                        t(n)
                    })
                })
            }
        }]), e
    }()
}, function(e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = n(6);
    Object.keys(r).forEach(function(e) {
        "default" !== e && "__esModule" !== e && Object.defineProperty(t, e, {
            enumerable: !0,
            get: function() {
                return r[e]
            }
        })
    });
    var i = n(3);
    Object.keys(i).forEach(function(e) {
        "default" !== e && "__esModule" !== e && Object.defineProperty(t, e, {
            enumerable: !0,
            get: function() {
                return i[e]
            }
        })
    })
}, function(e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.EventMapper = void 0;
    var r = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, n, r) {
                return n && e(t.prototype, n), r && e(t, r), t
            }
        }(),
        i = n(1),
        o = n(7),
        a = n(0),
        u = Symbol("_audioContext"),
        s = Symbol("_ECAS"),
        c = Symbol("_engine"),
        l = Symbol("_engineInitialized"),
        f = Symbol("_mappedEvents"),
        d = Symbol("_stateMap"),
        v = Symbol("_createAudioContext"),
        y = Symbol("_getFilesFromConfig"),
        h = Symbol("_playGeneratedSound"),
        p = Symbol("_setupEcas"),
        b = Symbol("_setupStateMapping"),
        g = Symbol("_triggerAudioEvent");
    t.EventMapper = function(e) {
        function t(e) {
            var n = e.ecas,
                r = e.gameMapping;
            ! function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }(this, t);
            var o = function(e, t) {
                if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !t || "object" != typeof t && "function" != typeof t ? e : t
            }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
            if (!a.Utils.isDefined(n)) throw new Error("Could not instantiate the event mapper since the class reference to ecas was not provided.");
            o[u] = o[v](), o[s] = n, o[c] = null, o[l] = !1, o[d] = new i.StateMap;
            var y = o[b](r);
            return o[f] = new Set(y), o
        }
        return function(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
        }(t, o.Observable), r(t, [{
            key: "initialize",
            value: function(e) {
                var t = this,
                    n = e.audioConfig,
                    r = e.eventMapping,
                    i = e.fileFormat,
                    a = e.sourceFolder;
                if (!this.isReady()) {
                    this[u] && ("suspended" === this[u].state && this[u].resume(), this[h](this[u]));
                    var s = this[y](n, i, a);
                    this.emit("loadingSounds"), o.AudioLoader.load(s).then(function(e) {
                        t[p](n, r, e)
                    }).catch(function() {
                        throw new Error("Failed to load audio")
                    })
                }
            }
        }, {
            key: "getAudioContext",
            value: function() {
                return this[u]
            }
        }, {
            key: "setVolume",
            value: function(e) {
                if (this.isReady() && a.Utils.isNumber(e)) {
                    var t = Math.max(Math.min(e, 1), 0);
                    this[c].setBussVolume("master", t)
                }
            }
        }, {
            key: "proxyEvent",
            value: function(e) {
                this[d].triggerStateChange(e);
                var t = this[d].getAudioEvent(e);
                if (t) {
                    for (var n = arguments.length, r = Array(n > 1 ? n - 1 : 0), i = 1; i < n; i++) r[i - 1] = arguments[i];
                    this[g](t, r)
                }
            }
        }, {
            key: "getMappedEvents",
            value: function() {
                return [].concat(function(e) {
                    if (Array.isArray(e)) {
                        for (var t = 0, n = Array(e.length); t < e.length; t++) n[t] = e[t];
                        return n
                    }
                    return Array.from(e)
                }(this[f]))
            }
        }, {
            key: "determineFileFormat",
            value: function() {
                var e = void 0 !== window.Audio ? new window.Audio : null;
                if (e && "function" == typeof e.canPlayType) {
                    if (e.canPlayType('audio/ogg; codecs="vorbis"')) return "ogg";
                    if (e.canPlayType('audio/webm; codecs="vorbis"')) return "webm";
                    if (e.canPlayType("audio/x-mp4;") || e.canPlayType("audio/mp4;") || e.canPlayType("audio/aac;")) return "mp4"
                }
                return null
            }
        }, {
            key: "isReady",
            value: function() {
                return null !== this[c] && this[l]
            }
        }, {
            key: y,
            value: function(e, t, n) {
                var r = e.sounds;
                if (!a.Utils.isArray(r)) throw new Error("Could not retrieve the files from the config since the sounds was not provided.");
                var i = n.replace(/\/$/, "");
                return r.map(function(e) {
                    var n = e.id;
                    return {
                        url: i + "/" + n + "." + t,
                        id: n
                    }
                })
            }
        }, {
            key: p,
            value: function(e, t, n) {
                var r = this;
                this[c] = new this[s](e, t, function() {
                    r[l] = !0, r.emit("ready")
                }, {
                    bufferedSounds: n,
                    audioContext: this[u],
                    dispatcherCallback: function(e, t) {
                        r.emit("soundPlayed", e, t)
                    }
                })
            }
        }, {
            key: b,
            value: function(e) {
                var t = this,
                    n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null,
                    r = [];
                return Object.keys(e).forEach(function(i) {
                    var o = e[i],
                        u = o.activatesOn,
                        s = void 0 === u ? [] : u,
                        c = o.deactivatesOn,
                        l = void 0 === c ? [] : c,
                        f = o.children,
                        v = void 0 === f ? {} : f,
                        y = o.events,
                        h = void 0 === y ? {} : y;
                    t[d].addState({
                        state: i,
                        activatesOn: s,
                        deactivatesOn: l,
                        events: h,
                        parent: n
                    }), r = (r = (r = r.concat(s.map(function(e) {
                        return a.Utils.isObject(e) ? e.event : e
                    }))).concat(l.map(function(e) {
                        return a.Utils.isObject(e) ? e.event : e
                    }))).concat(Object.keys(h)), v && (r = r.concat(t[b](v, i)))
                }), r
            }
        }, {
            key: g,
            value: function(e, t) {
                var n = e;
                this.isReady() && (a.Utils.isObject(e) && (n = a.Utils.get(e, t)), n && this[c].triggerEvent(n, t))
            }
        }, {
            key: v,
            value: function() {
                var e = window.AudioContext || window.webkitAudioContext;
                return e ? new e : null
            }
        }, {
            key: h,
            value: function(e) {
                if (!e) throw new Error("Could not play a generated sound since the context was not provided properly");
                var t = e.createBuffer(1, 1, 22050),
                    n = e.createBufferSource();
                n.buffer = t, n.connect(e.destination), n.start(0)
            }
        }]), t
    }()
}, function(e, t, n) {
    "use strict";
    var r = n(1);
    window.ECASEventMapper = r.EventMapper
}]);
window.Game || (window.Game = {}), window.Game.OriginEcas = {
    constructor: function() {
        window.Game.OriginEcas.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            setupGame: {
                waitEvents: ["notify:audio.ready"]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            controller: window.Game.OriginEcasController
        }
    }
}, window.Game.OriginEcas = window.Sys.extend(window.Core.Module, window.Game.OriginEcas, "Game.OriginEcas");
window.Game || (window.Game = {}), window.Game.OriginEcasController = {
    LEGACY_SOUNDS: [],
    constructor: function() {
        window.Game.OriginEcasController.superclass.constructor.apply(this, arguments);
        var e = new window.ECASEventMapper({
                ecas: window.ecas.ECAS,
                gameMapping: window.Resources.readData("eventToAudioEventMapping")
            }),
            t = new window.Sys.Observable;
        (e.getMappedEvents() || []).forEach(function(n) {
            t.addListener(n, e.proxyEvent.bind(e, n))
        }), this._adapter = e
    },
    setupEvents: function() {
        this.on({
            "notify:stateHandler.enteringSetupGameState": this._onSetupGameState,
            "notify:settingsManager.settingChanged": this._onSettingChanged,
            pageVisibilityChanged_event: this._onPageVisibilityChanged
        })
    },
    _onSetupGameState: function() {
        var e = this._adapter.getAudioContext();
        if (window.Platform.resourceBundle.preloadAudio)
            if (e && "suspended" === e.state) {
                var t = window.Services.settingsManager.getSetting("volume");
                e.onstatechange = this._onContextStateChange.bind(this, e, t), window.Services.settingsManager.storeSetting("volume", 0), this.fireEvent("notify:audio.ready")
            } else this._setupAudio();
        else this.fireEvent("notify:audio.ready")
    },
    _onContextStateChange: function(e, t) {
        "running" === e.state && (window.Services.settingsManager.storeSetting("volume", t), e.onstatechange = null)
    },
    _onSettingChanged: function(e, t) {
        if ("volume" === e && 0 !== t && !this._adapter.isReady()) {
            var n = this._adapter.getAudioContext();
            n && (n.onstatechange = null), this._setupAudio(), this.removeListener("notify:settingsManager.settingChanged")
        }
    },
    _onPageVisibilityChanged: function(e) {
        if (e) this._adapter.setVolume(0);
        else {
            var t = window.Services.settingsManager.getSetting("volume") || 0;
            this._adapter.setVolume(t)
        }
    },
    _setupAudio: function() {
        var e = this,
            t = this._adapter,
            n = window.Resources.readData("ecasAudioConfig"),
            i = window.Resources.readData("eventMappings"),
            o = window.Platform.isDesktopDevice && window.Platform.isIEBrowser && this.LEGACY_SOUNDS.length > 0;
        t.on("loadingSounds", function() {
            e.fireEvent("notify:audio.loadingSound"), e.fireEvent("notify:audioPlayer.loadingSound")
        }), t.on("ready", function() {
            t.setVolume(window.Services.settingsManager.getSetting("volume") || 0), e.fireEvent("notify:audio.ready"), e.fireEvent("notify:audio.soundLoaded"), e.fireEvent("notify:audioPlayer.soundLoaded")
        }), o && (n.sounds = this.LEGACY_SOUNDS, n.pools = [], i.events = i.legacyEvents), t.initialize({
            audioConfig: n,
            eventMapping: i,
            fileFormat: this._getFileFormat(),
            sourceFolder: this._getSourceFolder()
        })
    },
    _getSourceFolder: function() {
        var e = window.Resources.readData("ecasAudioConfig"),
            t = e.settings.loadPath.replace(/\/$/, "");
        return t = t + "/" + this._getAssetPackage(window.Platform.resourceBundle.IDENTIFIER), t.replace(/\/$/, "")
    },
    _getAssetPackage: function(e) {
        var t = "Desktop";
        switch (e) {
            case "Android":
            case "androidLow":
            case "mobile":
            case "mobileLow":
                t = "mobile";
                break;
            default:
                t = "Desktop"
        }
        return t
    },
    _getFileFormat: function() {
        return this._adapter.determineFileFormat() || "ogg"
    }
}, window.Game.OriginEcasController = window.Sys.extend(window.Core.Controller, window.Game.OriginEcasController, "Game.OriginEcasController");
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
        };
        return function(e, n) {
            function r() {
                this.constructor = e
            }
            t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
        }
    }(),
    pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t(t, e, n) {
                if (null == t) throw new Error("name cannot be null.");
                if (null == e) throw new Error("timelines cannot be null.");
                this.name = t, this.timelines = e, this.duration = n
            }
            return t.prototype.apply = function(t, e, n, r, i, a, o, s) {
                if (null == t) throw new Error("skeleton cannot be null.");
                r && 0 != this.duration && (n %= this.duration, e > 0 && (e %= this.duration));
                for (var l = this.timelines, h = 0, u = l.length; h < u; h++) l[h].apply(t, e, n, i, a, o, s)
            }, t.binarySearch = function(t, e, n) {
                void 0 === n && (n = 1);
                var r = 0,
                    i = t.length / n - 2;
                if (0 == i) return n;
                for (var a = i >>> 1;;) {
                    if (t[(a + 1) * n] <= e ? r = a + 1 : i = a, r == i) return (r + 1) * n;
                    a = r + i >>> 1
                }
            }, t.linearSearch = function(t, e, n) {
                for (var r = 0, i = t.length - n; r <= i; r += n)
                    if (t[r] > e) return r;
                return -1
            }, t
        }();
        t.Animation = e;
        var n;
        ! function(t) {
            t[t.setup = 0] = "setup", t[t.current = 1] = "current", t[t.currentLayered = 2] = "currentLayered"
        }(n = t.MixPose || (t.MixPose = {}));
        var r;
        ! function(t) {
            t[t.in = 0] = "in", t[t.out = 1] = "out"
        }(r = t.MixDirection || (t.MixDirection = {}));
        var i;
        ! function(t) {
            t[t.rotate = 0] = "rotate", t[t.translate = 1] = "translate", t[t.scale = 2] = "scale", t[t.shear = 3] = "shear", t[t.attachment = 4] = "attachment", t[t.color = 5] = "color", t[t.deform = 6] = "deform", t[t.event = 7] = "event", t[t.drawOrder = 8] = "drawOrder", t[t.ikConstraint = 9] = "ikConstraint", t[t.transformConstraint = 10] = "transformConstraint", t[t.pathConstraintPosition = 11] = "pathConstraintPosition", t[t.pathConstraintSpacing = 12] = "pathConstraintSpacing", t[t.pathConstraintMix = 13] = "pathConstraintMix", t[t.twoColor = 14] = "twoColor"
        }(i = t.TimelineType || (t.TimelineType = {}));
        var a = function() {
            function e(n) {
                if (n <= 0) throw new Error("frameCount must be > 0: " + n);
                this.curves = t.Utils.newFloatArray((n - 1) * e.BEZIER_SIZE)
            }
            return e.prototype.getFrameCount = function() {
                return this.curves.length / e.BEZIER_SIZE + 1
            }, e.prototype.setLinear = function(t) {
                this.curves[t * e.BEZIER_SIZE] = e.LINEAR
            }, e.prototype.setStepped = function(t) {
                this.curves[t * e.BEZIER_SIZE] = e.STEPPED
            }, e.prototype.getCurveType = function(t) {
                var n = t * e.BEZIER_SIZE;
                if (n == this.curves.length) return e.LINEAR;
                var r = this.curves[n];
                return r == e.LINEAR ? e.LINEAR : r == e.STEPPED ? e.STEPPED : e.BEZIER
            }, e.prototype.setCurve = function(t, n, r, i, a) {
                var o = .03 * (2 * -n + i),
                    s = .03 * (2 * -r + a),
                    l = .006 * (3 * (n - i) + 1),
                    h = .006 * (3 * (r - a) + 1),
                    u = 2 * o + l,
                    c = 2 * s + h,
                    p = .3 * n + o + .16666667 * l,
                    f = .3 * r + s + .16666667 * h,
                    d = t * e.BEZIER_SIZE,
                    m = this.curves;
                m[d++] = e.BEZIER;
                for (var g = p, v = f, x = d + e.BEZIER_SIZE - 1; d < x; d += 2) m[d] = g, m[d + 1] = v, p += u, f += c, u += l, c += h, g += p, v += f
            }, e.prototype.getCurvePercent = function(n, r) {
                r = t.MathUtils.clamp(r, 0, 1);
                var i = this.curves,
                    a = n * e.BEZIER_SIZE,
                    o = i[a];
                if (o == e.LINEAR) return r;
                if (o == e.STEPPED) return 0;
                a++;
                for (var s = 0, l = a, h = a + e.BEZIER_SIZE - 1; a < h; a += 2)
                    if ((s = i[a]) >= r) {
                        var u = void 0,
                            c = void 0;
                        return a == l ? (u = 0, c = 0) : (u = i[a - 2], c = i[a - 1]), c + (i[a + 1] - c) * (r - u) / (s - u)
                    } var p = i[a - 1];
                return p + (1 - p) * (r - s) / (1 - s)
            }, e.LINEAR = 0, e.STEPPED = 1, e.BEZIER = 2, e.BEZIER_SIZE = 19, e
        }();
        t.CurveTimeline = a;
        var o = function(r) {
            function a(e) {
                var n = r.call(this, e) || this;
                return n.frames = t.Utils.newFloatArray(e << 1), n
            }
            return __extends(a, r), a.prototype.getPropertyId = function() {
                return (i.rotate << 24) + this.boneIndex
            }, a.prototype.setFrame = function(t, e, n) {
                t <<= 1, this.frames[t] = e, this.frames[t + a.ROTATION] = n
            }, a.prototype.apply = function(t, r, i, o, s, l, h) {
                var u = this.frames,
                    c = t.bones[this.boneIndex];
                if (i < u[0]) switch (l) {
                    case n.setup:
                        return void(c.rotation = c.data.rotation);
                    case n.current:
                        var p = c.data.rotation - c.rotation;
                        p -= 360 * (16384 - (16384.499999999996 - p / 360 | 0)), c.rotation += p * s
                } else if (i >= u[u.length - a.ENTRIES])
                    if (l == n.setup) c.rotation = c.data.rotation + u[u.length + a.PREV_ROTATION] * s;
                    else {
                        var f = c.data.rotation + u[u.length + a.PREV_ROTATION] - c.rotation;
                        f -= 360 * (16384 - (16384.499999999996 - f / 360 | 0)), c.rotation += f * s
                    }
                else {
                    var d = e.binarySearch(u, i, a.ENTRIES),
                        m = u[d + a.PREV_ROTATION],
                        g = u[d],
                        v = this.getCurvePercent((d >> 1) - 1, 1 - (i - g) / (u[d + a.PREV_TIME] - g)),
                        x = u[d + a.ROTATION] - m;
                    x -= 360 * (16384 - (16384.499999999996 - x / 360 | 0)), x = m + x * v, l == n.setup ? (x -= 360 * (16384 - (16384.499999999996 - x / 360 | 0)), c.rotation = c.data.rotation + x * s) : (x = c.data.rotation + x - c.rotation, x -= 360 * (16384 - (16384.499999999996 - x / 360 | 0)), c.rotation += x * s)
                }
            }, a.ENTRIES = 2, a.PREV_TIME = -2, a.PREV_ROTATION = -1, a.ROTATION = 1, a
        }(a);
        t.RotateTimeline = o;
        var s = function(r) {
            function a(e) {
                var n = r.call(this, e) || this;
                return n.frames = t.Utils.newFloatArray(e * a.ENTRIES), n
            }
            return __extends(a, r), a.prototype.getPropertyId = function() {
                return (i.translate << 24) + this.boneIndex
            }, a.prototype.setFrame = function(t, e, n, r) {
                t *= a.ENTRIES, this.frames[t] = e, this.frames[t + a.X] = n, this.frames[t + a.Y] = r
            }, a.prototype.apply = function(t, r, i, o, s, l, h) {
                var u = this.frames,
                    c = t.bones[this.boneIndex];
                if (i < u[0]) switch (l) {
                    case n.setup:
                        return c.x = c.data.x, void(c.y = c.data.y);
                    case n.current:
                        c.x += (c.data.x - c.x) * s, c.y += (c.data.y - c.y) * s
                } else {
                    var p = 0,
                        f = 0;
                    if (i >= u[u.length - a.ENTRIES]) p = u[u.length + a.PREV_X], f = u[u.length + a.PREV_Y];
                    else {
                        var d = e.binarySearch(u, i, a.ENTRIES);
                        p = u[d + a.PREV_X], f = u[d + a.PREV_Y];
                        var m = u[d],
                            g = this.getCurvePercent(d / a.ENTRIES - 1, 1 - (i - m) / (u[d + a.PREV_TIME] - m));
                        p += (u[d + a.X] - p) * g, f += (u[d + a.Y] - f) * g
                    }
                    l == n.setup ? (c.x = c.data.x + p * s, c.y = c.data.y + f * s) : (c.x += (c.data.x + p - c.x) * s, c.y += (c.data.y + f - c.y) * s)
                }
            }, a.ENTRIES = 3, a.PREV_TIME = -3, a.PREV_X = -2, a.PREV_Y = -1, a.X = 1, a.Y = 2, a
        }(a);
        t.TranslateTimeline = s;
        var l = function(a) {
            function o(t) {
                return a.call(this, t) || this
            }
            return __extends(o, a), o.prototype.getPropertyId = function() {
                return (i.scale << 24) + this.boneIndex
            }, o.prototype.apply = function(i, a, s, l, h, u, c) {
                var p = this.frames,
                    f = i.bones[this.boneIndex];
                if (s < p[0]) switch (u) {
                    case n.setup:
                        return f.scaleX = f.data.scaleX, void(f.scaleY = f.data.scaleY);
                    case n.current:
                        f.scaleX += (f.data.scaleX - f.scaleX) * h, f.scaleY += (f.data.scaleY - f.scaleY) * h
                } else {
                    var d = 0,
                        m = 0;
                    if (s >= p[p.length - o.ENTRIES]) d = p[p.length + o.PREV_X] * f.data.scaleX, m = p[p.length + o.PREV_Y] * f.data.scaleY;
                    else {
                        var g = e.binarySearch(p, s, o.ENTRIES);
                        d = p[g + o.PREV_X], m = p[g + o.PREV_Y];
                        var v = p[g],
                            x = this.getCurvePercent(g / o.ENTRIES - 1, 1 - (s - v) / (p[g + o.PREV_TIME] - v));
                        d = (d + (p[g + o.X] - d) * x) * f.data.scaleX, m = (m + (p[g + o.Y] - m) * x) * f.data.scaleY
                    }
                    if (1 == h) f.scaleX = d, f.scaleY = m;
                    else {
                        var y = 0,
                            M = 0;
                        u == n.setup ? (y = f.data.scaleX, M = f.data.scaleY) : (y = f.scaleX, M = f.scaleY), c == r.out ? (d = Math.abs(d) * t.MathUtils.signum(y), m = Math.abs(m) * t.MathUtils.signum(M)) : (y = Math.abs(y) * t.MathUtils.signum(d), M = Math.abs(M) * t.MathUtils.signum(m)), f.scaleX = y + (d - y) * h, f.scaleY = M + (m - M) * h
                    }
                }
            }, o
        }(s);
        t.ScaleTimeline = l;
        var h = function(t) {
            function r(e) {
                return t.call(this, e) || this
            }
            return __extends(r, t), r.prototype.getPropertyId = function() {
                return (i.shear << 24) + this.boneIndex
            }, r.prototype.apply = function(t, i, a, o, s, l, h) {
                var u = this.frames,
                    c = t.bones[this.boneIndex];
                if (a < u[0]) switch (l) {
                    case n.setup:
                        return c.shearX = c.data.shearX, void(c.shearY = c.data.shearY);
                    case n.current:
                        c.shearX += (c.data.shearX - c.shearX) * s, c.shearY += (c.data.shearY - c.shearY) * s
                } else {
                    var p = 0,
                        f = 0;
                    if (a >= u[u.length - r.ENTRIES]) p = u[u.length + r.PREV_X], f = u[u.length + r.PREV_Y];
                    else {
                        var d = e.binarySearch(u, a, r.ENTRIES);
                        p = u[d + r.PREV_X], f = u[d + r.PREV_Y];
                        var m = u[d],
                            g = this.getCurvePercent(d / r.ENTRIES - 1, 1 - (a - m) / (u[d + r.PREV_TIME] - m));
                        p += (u[d + r.X] - p) * g, f += (u[d + r.Y] - f) * g
                    }
                    l == n.setup ? (c.shearX = c.data.shearX + p * s, c.shearY = c.data.shearY + f * s) : (c.shearX += (c.data.shearX + p - c.shearX) * s, c.shearY += (c.data.shearY + f - c.shearY) * s)
                }
            }, r
        }(s);
        t.ShearTimeline = h;
        var u = function(r) {
            function a(e) {
                var n = r.call(this, e) || this;
                return n.frames = t.Utils.newFloatArray(e * a.ENTRIES), n
            }
            return __extends(a, r), a.prototype.getPropertyId = function() {
                return (i.color << 24) + this.slotIndex
            }, a.prototype.setFrame = function(t, e, n, r, i, o) {
                t *= a.ENTRIES, this.frames[t] = e, this.frames[t + a.R] = n, this.frames[t + a.G] = r, this.frames[t + a.B] = i, this.frames[t + a.A] = o
            }, a.prototype.apply = function(t, r, i, o, s, l, h) {
                var u = t.slots[this.slotIndex],
                    c = this.frames;
                if (i < c[0]) switch (l) {
                    case n.setup:
                        return void u.color.setFromColor(u.data.color);
                    case n.current:
                        var p = u.color,
                            f = u.data.color;
                        p.add((f.r - p.r) * s, (f.g - p.g) * s, (f.b - p.b) * s, (f.a - p.a) * s)
                } else {
                    var d = 0,
                        m = 0,
                        g = 0,
                        v = 0;
                    if (i >= c[c.length - a.ENTRIES]) {
                        var x = c.length;
                        d = c[x + a.PREV_R], m = c[x + a.PREV_G], g = c[x + a.PREV_B], v = c[x + a.PREV_A]
                    } else {
                        var y = e.binarySearch(c, i, a.ENTRIES);
                        d = c[y + a.PREV_R], m = c[y + a.PREV_G], g = c[y + a.PREV_B], v = c[y + a.PREV_A];
                        var M = c[y],
                            w = this.getCurvePercent(y / a.ENTRIES - 1, 1 - (i - M) / (c[y + a.PREV_TIME] - M));
                        d += (c[y + a.R] - d) * w, m += (c[y + a.G] - m) * w, g += (c[y + a.B] - g) * w, v += (c[y + a.A] - v) * w
                    }
                    if (1 == s) u.color.set(d, m, g, v);
                    else {
                        var p = u.color;
                        l == n.setup && p.setFromColor(u.data.color), p.add((d - p.r) * s, (m - p.g) * s, (g - p.b) * s, (v - p.a) * s)
                    }
                }
            }, a.ENTRIES = 5, a.PREV_TIME = -5, a.PREV_R = -4, a.PREV_G = -3, a.PREV_B = -2, a.PREV_A = -1, a.R = 1, a.G = 2, a.B = 3, a.A = 4, a
        }(a);
        t.ColorTimeline = u;
        var c = function(r) {
            function a(e) {
                var n = r.call(this, e) || this;
                return n.frames = t.Utils.newFloatArray(e * a.ENTRIES), n
            }
            return __extends(a, r), a.prototype.getPropertyId = function() {
                return (i.twoColor << 24) + this.slotIndex
            }, a.prototype.setFrame = function(t, e, n, r, i, o, s, l, h) {
                t *= a.ENTRIES, this.frames[t] = e, this.frames[t + a.R] = n, this.frames[t + a.G] = r, this.frames[t + a.B] = i, this.frames[t + a.A] = o, this.frames[t + a.R2] = s, this.frames[t + a.G2] = l, this.frames[t + a.B2] = h
            }, a.prototype.apply = function(t, r, i, o, s, l, h) {
                var u = t.slots[this.slotIndex],
                    c = this.frames;
                if (i < c[0]) switch (l) {
                    case n.setup:
                        return u.color.setFromColor(u.data.color), void u.darkColor.setFromColor(u.data.darkColor);
                    case n.current:
                        var p = u.color,
                            f = u.darkColor,
                            d = u.data.color,
                            m = u.data.darkColor;
                        p.add((d.r - p.r) * s, (d.g - p.g) * s, (d.b - p.b) * s, (d.a - p.a) * s), f.add((m.r - f.r) * s, (m.g - f.g) * s, (m.b - f.b) * s, 0)
                } else {
                    var g = 0,
                        v = 0,
                        x = 0,
                        y = 0,
                        M = 0,
                        w = 0,
                        E = 0;
                    if (i >= c[c.length - a.ENTRIES]) {
                        var T = c.length;
                        g = c[T + a.PREV_R], v = c[T + a.PREV_G], x = c[T + a.PREV_B], y = c[T + a.PREV_A], M = c[T + a.PREV_R2], w = c[T + a.PREV_G2], E = c[T + a.PREV_B2]
                    } else {
                        var b = e.binarySearch(c, i, a.ENTRIES);
                        g = c[b + a.PREV_R], v = c[b + a.PREV_G], x = c[b + a.PREV_B], y = c[b + a.PREV_A], M = c[b + a.PREV_R2], w = c[b + a.PREV_G2], E = c[b + a.PREV_B2];
                        var A = c[b],
                            I = this.getCurvePercent(b / a.ENTRIES - 1, 1 - (i - A) / (c[b + a.PREV_TIME] - A));
                        g += (c[b + a.R] - g) * I, v += (c[b + a.G] - v) * I, x += (c[b + a.B] - x) * I, y += (c[b + a.A] - y) * I, M += (c[b + a.R2] - M) * I, w += (c[b + a.G2] - w) * I, E += (c[b + a.B2] - E) * I
                    }
                    if (1 == s) u.color.set(g, v, x, y), u.darkColor.set(M, w, E, 1);
                    else {
                        var p = u.color,
                            f = u.darkColor;
                        l == n.setup && (p.setFromColor(u.data.color), f.setFromColor(u.data.darkColor)), p.add((g - p.r) * s, (v - p.g) * s, (x - p.b) * s, (y - p.a) * s), f.add((M - f.r) * s, (w - f.g) * s, (E - f.b) * s, 0)
                    }
                }
            }, a.ENTRIES = 8, a.PREV_TIME = -8, a.PREV_R = -7, a.PREV_G = -6, a.PREV_B = -5, a.PREV_A = -4, a.PREV_R2 = -3, a.PREV_G2 = -2, a.PREV_B2 = -1, a.R = 1, a.G = 2, a.B = 3, a.A = 4, a.R2 = 5, a.G2 = 6, a.B2 = 7, a
        }(a);
        t.TwoColorTimeline = c;
        var p = function() {
            function a(e) {
                this.frames = t.Utils.newFloatArray(e), this.attachmentNames = new Array(e)
            }
            return a.prototype.getPropertyId = function() {
                return (i.attachment << 24) + this.slotIndex
            }, a.prototype.getFrameCount = function() {
                return this.frames.length
            }, a.prototype.setFrame = function(t, e, n) {
                this.frames[t] = e, this.attachmentNames[t] = n
            }, a.prototype.apply = function(t, i, a, o, s, l, h) {
                var u = t.slots[this.slotIndex];
                if (h == r.out && l == n.setup) {
                    var c = u.data.attachmentName;
                    return void u.setAttachment(null == c ? null : t.getAttachment(this.slotIndex, c))
                }
                var p = this.frames;
                if (a < p[0]) {
                    if (l == n.setup) {
                        var f = u.data.attachmentName;
                        u.setAttachment(null == f ? null : t.getAttachment(this.slotIndex, f))
                    }
                } else {
                    var d = 0;
                    d = a >= p[p.length - 1] ? p.length - 1 : e.binarySearch(p, a, 1) - 1;
                    var m = this.attachmentNames[d];
                    t.slots[this.slotIndex].setAttachment(null == m ? null : t.getAttachment(this.slotIndex, m))
                }
            }, a
        }();
        t.AttachmentTimeline = p;
        var f = null,
            d = function(r) {
                function a(e) {
                    var n = r.call(this, e) || this;
                    return n.frames = t.Utils.newFloatArray(e), n.frameVertices = new Array(e), null == f && (f = t.Utils.newFloatArray(64)), n
                }
                return __extends(a, r), a.prototype.getPropertyId = function() {
                    return (i.deform << 27) + +this.attachment.id + this.slotIndex
                }, a.prototype.setFrame = function(t, e, n) {
                    this.frames[t] = e, this.frameVertices[t] = n
                }, a.prototype.apply = function(r, i, a, o, s, l, h) {
                    var u = r.slots[this.slotIndex],
                        c = u.getAttachment();
                    if (c instanceof t.VertexAttachment && c.applyDeform(this.attachment)) {
                        var p = u.attachmentVertices,
                            d = this.frameVertices,
                            m = d[0].length,
                            g = t.Utils.setArraySize(p, m),
                            v = this.frames;
                        if (a < v[0]) {
                            var x = c;
                            switch (l) {
                                case n.setup:
                                    var y = void 0;
                                    return null == x.bones ? y = x.vertices : (y = f, y.length < m && (f = y = t.Utils.newFloatArray(m))), void t.Utils.arrayCopy(y, 0, g, 0, m);
                                case n.current:
                                    if (1 == s) break;
                                    if (null == x.bones)
                                        for (var M = x.vertices, w = 0; w < m; w++) g[w] += (M[w] - g[w]) * s;
                                    else {
                                        s = 1 - s;
                                        for (var E = 0; E < m; E++) g[E] *= s
                                    }
                            }
                        } else if (a >= v[v.length - 1]) {
                            var T = d[v.length - 1];
                            if (1 == s) t.Utils.arrayCopy(T, 0, g, 0, m);
                            else if (l == n.setup) {
                                var x = c;
                                if (null == x.bones)
                                    for (var M = x.vertices, b = 0; b < m; b++) {
                                        var A = M[b];
                                        g[b] = A + (T[b] - A) * s
                                    } else
                                        for (var I = 0; I < m; I++) g[I] = T[I] * s
                            } else
                                for (var S = 0; S < m; S++) g[S] += (T[S] - g[S]) * s
                        } else {
                            var R = e.binarySearch(v, a),
                                P = d[R - 1],
                                C = d[R],
                                _ = v[R],
                                V = this.getCurvePercent(R - 1, 1 - (a - _) / (v[R - 1] - _));
                            if (1 == s)
                                for (var k = 0; k < m; k++) {
                                    var N = P[k];
                                    g[k] = N + (C[k] - N) * V
                                } else if (l == n.setup) {
                                    var x = c;
                                    if (null == x.bones)
                                        for (var M = x.vertices, D = 0; D < m; D++) {
                                            var N = P[D],
                                                A = M[D];
                                            g[D] = A + (N + (C[D] - N) * V - A) * s
                                        } else
                                            for (var X = 0; X < m; X++) {
                                                var N = P[X];
                                                g[X] = (N + (C[X] - N) * V) * s
                                            }
                                } else
                                    for (var U = 0; U < m; U++) {
                                        var N = P[U];
                                        g[U] += (N + (C[U] - N) * V - g[U]) * s
                                    }
                        }
                    }
                }, a
            }(a);
        t.DeformTimeline = d;
        var m = function() {
            function n(e) {
                this.frames = t.Utils.newFloatArray(e), this.events = new Array(e)
            }
            return n.prototype.getPropertyId = function() {
                return i.event << 24
            }, n.prototype.getFrameCount = function() {
                return this.frames.length
            }, n.prototype.setFrame = function(t, e) {
                this.frames[t] = e.time, this.events[t] = e
            }, n.prototype.apply = function(t, n, r, i, a, o, s) {
                if (null != i) {
                    var l = this.frames,
                        h = this.frames.length;
                    if (n > r) this.apply(t, n, Number.MAX_VALUE, i, a, o, s), n = -1;
                    else if (n >= l[h - 1]) return;
                    if (!(r < l[0])) {
                        var u = 0;
                        if (n < l[0]) u = 0;
                        else {
                            u = e.binarySearch(l, n);
                            for (var c = l[u]; u > 0 && l[u - 1] == c;) u--
                        }
                        for (; u < h && r >= l[u]; u++) i.push(this.events[u])
                    }
                }
            }, n
        }();
        t.EventTimeline = m;
        var g = function() {
            function a(e) {
                this.frames = t.Utils.newFloatArray(e), this.drawOrders = new Array(e)
            }
            return a.prototype.getPropertyId = function() {
                return i.drawOrder << 24
            }, a.prototype.getFrameCount = function() {
                return this.frames.length
            }, a.prototype.setFrame = function(t, e, n) {
                this.frames[t] = e, this.drawOrders[t] = n
            }, a.prototype.apply = function(i, a, o, s, l, h, u) {
                var c = i.drawOrder,
                    p = i.slots;
                if (u == r.out && h == n.setup) return void t.Utils.arrayCopy(i.slots, 0, i.drawOrder, 0, i.slots.length);
                var f = this.frames;
                if (o < f[0]) return void(h == n.setup && t.Utils.arrayCopy(i.slots, 0, i.drawOrder, 0, i.slots.length));
                var d = 0;
                d = o >= f[f.length - 1] ? f.length - 1 : e.binarySearch(f, o) - 1;
                var m = this.drawOrders[d];
                if (null == m) t.Utils.arrayCopy(p, 0, c, 0, p.length);
                else
                    for (var g = 0, v = m.length; g < v; g++) c[g] = p[m[g]]
            }, a
        }();
        t.DrawOrderTimeline = g;
        var v = function(a) {
            function o(e) {
                var n = a.call(this, e) || this;
                return n.frames = t.Utils.newFloatArray(e * o.ENTRIES), n
            }
            return __extends(o, a), o.prototype.getPropertyId = function() {
                return (i.ikConstraint << 24) + this.ikConstraintIndex
            }, o.prototype.setFrame = function(t, e, n, r) {
                t *= o.ENTRIES, this.frames[t] = e, this.frames[t + o.MIX] = n, this.frames[t + o.BEND_DIRECTION] = r
            }, o.prototype.apply = function(t, i, a, s, l, h, u) {
                var c = this.frames,
                    p = t.ikConstraints[this.ikConstraintIndex];
                if (a < c[0]) switch (h) {
                    case n.setup:
                        return p.mix = p.data.mix, void(p.bendDirection = p.data.bendDirection);
                    case n.current:
                        p.mix += (p.data.mix - p.mix) * l, p.bendDirection = p.data.bendDirection
                } else {
                    if (a >= c[c.length - o.ENTRIES]) return void(h == n.setup ? (p.mix = p.data.mix + (c[c.length + o.PREV_MIX] - p.data.mix) * l, p.bendDirection = u == r.out ? p.data.bendDirection : c[c.length + o.PREV_BEND_DIRECTION]) : (p.mix += (c[c.length + o.PREV_MIX] - p.mix) * l, u == r.in && (p.bendDirection = c[c.length + o.PREV_BEND_DIRECTION])));
                    var f = e.binarySearch(c, a, o.ENTRIES),
                        d = c[f + o.PREV_MIX],
                        m = c[f],
                        g = this.getCurvePercent(f / o.ENTRIES - 1, 1 - (a - m) / (c[f + o.PREV_TIME] - m));
                    h == n.setup ? (p.mix = p.data.mix + (d + (c[f + o.MIX] - d) * g - p.data.mix) * l, p.bendDirection = u == r.out ? p.data.bendDirection : c[f + o.PREV_BEND_DIRECTION]) : (p.mix += (d + (c[f + o.MIX] - d) * g - p.mix) * l, u == r.in && (p.bendDirection = c[f + o.PREV_BEND_DIRECTION]))
                }
            }, o.ENTRIES = 3, o.PREV_TIME = -3, o.PREV_MIX = -2, o.PREV_BEND_DIRECTION = -1, o.MIX = 1, o.BEND_DIRECTION = 2, o
        }(a);
        t.IkConstraintTimeline = v;
        var x = function(r) {
            function a(e) {
                var n = r.call(this, e) || this;
                return n.frames = t.Utils.newFloatArray(e * a.ENTRIES), n
            }
            return __extends(a, r), a.prototype.getPropertyId = function() {
                return (i.transformConstraint << 24) + this.transformConstraintIndex
            }, a.prototype.setFrame = function(t, e, n, r, i, o) {
                t *= a.ENTRIES, this.frames[t] = e, this.frames[t + a.ROTATE] = n, this.frames[t + a.TRANSLATE] = r, this.frames[t + a.SCALE] = i, this.frames[t + a.SHEAR] = o
            }, a.prototype.apply = function(t, r, i, o, s, l, h) {
                var u = this.frames,
                    c = t.transformConstraints[this.transformConstraintIndex];
                if (i < u[0]) {
                    var p = c.data;
                    switch (l) {
                        case n.setup:
                            return c.rotateMix = p.rotateMix, c.translateMix = p.translateMix, c.scaleMix = p.scaleMix, void(c.shearMix = p.shearMix);
                        case n.current:
                            c.rotateMix += (p.rotateMix - c.rotateMix) * s, c.translateMix += (p.translateMix - c.translateMix) * s, c.scaleMix += (p.scaleMix - c.scaleMix) * s, c.shearMix += (p.shearMix - c.shearMix) * s
                    }
                } else {
                    var f = 0,
                        d = 0,
                        m = 0,
                        g = 0;
                    if (i >= u[u.length - a.ENTRIES]) {
                        var v = u.length;
                        f = u[v + a.PREV_ROTATE], d = u[v + a.PREV_TRANSLATE], m = u[v + a.PREV_SCALE], g = u[v + a.PREV_SHEAR]
                    } else {
                        var x = e.binarySearch(u, i, a.ENTRIES);
                        f = u[x + a.PREV_ROTATE], d = u[x + a.PREV_TRANSLATE], m = u[x + a.PREV_SCALE], g = u[x + a.PREV_SHEAR];
                        var y = u[x],
                            M = this.getCurvePercent(x / a.ENTRIES - 1, 1 - (i - y) / (u[x + a.PREV_TIME] - y));
                        f += (u[x + a.ROTATE] - f) * M, d += (u[x + a.TRANSLATE] - d) * M, m += (u[x + a.SCALE] - m) * M, g += (u[x + a.SHEAR] - g) * M
                    }
                    if (l == n.setup) {
                        var p = c.data;
                        c.rotateMix = p.rotateMix + (f - p.rotateMix) * s, c.translateMix = p.translateMix + (d - p.translateMix) * s, c.scaleMix = p.scaleMix + (m - p.scaleMix) * s, c.shearMix = p.shearMix + (g - p.shearMix) * s
                    } else c.rotateMix += (f - c.rotateMix) * s, c.translateMix += (d - c.translateMix) * s, c.scaleMix += (m - c.scaleMix) * s, c.shearMix += (g - c.shearMix) * s
                }
            }, a.ENTRIES = 5, a.PREV_TIME = -5, a.PREV_ROTATE = -4, a.PREV_TRANSLATE = -3, a.PREV_SCALE = -2, a.PREV_SHEAR = -1, a.ROTATE = 1, a.TRANSLATE = 2, a.SCALE = 3, a.SHEAR = 4, a
        }(a);
        t.TransformConstraintTimeline = x;
        var y = function(r) {
            function a(e) {
                var n = r.call(this, e) || this;
                return n.frames = t.Utils.newFloatArray(e * a.ENTRIES), n
            }
            return __extends(a, r), a.prototype.getPropertyId = function() {
                return (i.pathConstraintPosition << 24) + this.pathConstraintIndex
            }, a.prototype.setFrame = function(t, e, n) {
                t *= a.ENTRIES, this.frames[t] = e, this.frames[t + a.VALUE] = n
            }, a.prototype.apply = function(t, r, i, o, s, l, h) {
                var u = this.frames,
                    c = t.pathConstraints[this.pathConstraintIndex];
                if (i < u[0]) switch (l) {
                    case n.setup:
                        return void(c.position = c.data.position);
                    case n.current:
                        c.position += (c.data.position - c.position) * s
                } else {
                    var p = 0;
                    if (i >= u[u.length - a.ENTRIES]) p = u[u.length + a.PREV_VALUE];
                    else {
                        var f = e.binarySearch(u, i, a.ENTRIES);
                        p = u[f + a.PREV_VALUE];
                        var d = u[f],
                            m = this.getCurvePercent(f / a.ENTRIES - 1, 1 - (i - d) / (u[f + a.PREV_TIME] - d));
                        p += (u[f + a.VALUE] - p) * m
                    }
                    l == n.setup ? c.position = c.data.position + (p - c.data.position) * s : c.position += (p - c.position) * s
                }
            }, a.ENTRIES = 2, a.PREV_TIME = -2, a.PREV_VALUE = -1, a.VALUE = 1, a
        }(a);
        t.PathConstraintPositionTimeline = y;
        var M = function(t) {
            function r(e) {
                return t.call(this, e) || this
            }
            return __extends(r, t), r.prototype.getPropertyId = function() {
                return (i.pathConstraintSpacing << 24) + this.pathConstraintIndex
            }, r.prototype.apply = function(t, i, a, o, s, l, h) {
                var u = this.frames,
                    c = t.pathConstraints[this.pathConstraintIndex];
                if (a < u[0]) switch (l) {
                    case n.setup:
                        return void(c.spacing = c.data.spacing);
                    case n.current:
                        c.spacing += (c.data.spacing - c.spacing) * s
                } else {
                    var p = 0;
                    if (a >= u[u.length - r.ENTRIES]) p = u[u.length + r.PREV_VALUE];
                    else {
                        var f = e.binarySearch(u, a, r.ENTRIES);
                        p = u[f + r.PREV_VALUE];
                        var d = u[f],
                            m = this.getCurvePercent(f / r.ENTRIES - 1, 1 - (a - d) / (u[f + r.PREV_TIME] - d));
                        p += (u[f + r.VALUE] - p) * m
                    }
                    l == n.setup ? c.spacing = c.data.spacing + (p - c.data.spacing) * s : c.spacing += (p - c.spacing) * s
                }
            }, r
        }(y);
        t.PathConstraintSpacingTimeline = M;
        var w = function(r) {
            function a(e) {
                var n = r.call(this, e) || this;
                return n.frames = t.Utils.newFloatArray(e * a.ENTRIES), n
            }
            return __extends(a, r), a.prototype.getPropertyId = function() {
                return (i.pathConstraintMix << 24) + this.pathConstraintIndex
            }, a.prototype.setFrame = function(t, e, n, r) {
                t *= a.ENTRIES, this.frames[t] = e, this.frames[t + a.ROTATE] = n, this.frames[t + a.TRANSLATE] = r
            }, a.prototype.apply = function(t, r, i, o, s, l, h) {
                var u = this.frames,
                    c = t.pathConstraints[this.pathConstraintIndex];
                if (i < u[0]) switch (l) {
                    case n.setup:
                        return c.rotateMix = c.data.rotateMix, void(c.translateMix = c.data.translateMix);
                    case n.current:
                        c.rotateMix += (c.data.rotateMix - c.rotateMix) * s, c.translateMix += (c.data.translateMix - c.translateMix) * s
                } else {
                    var p = 0,
                        f = 0;
                    if (i >= u[u.length - a.ENTRIES]) p = u[u.length + a.PREV_ROTATE], f = u[u.length + a.PREV_TRANSLATE];
                    else {
                        var d = e.binarySearch(u, i, a.ENTRIES);
                        p = u[d + a.PREV_ROTATE], f = u[d + a.PREV_TRANSLATE];
                        var m = u[d],
                            g = this.getCurvePercent(d / a.ENTRIES - 1, 1 - (i - m) / (u[d + a.PREV_TIME] - m));
                        p += (u[d + a.ROTATE] - p) * g, f += (u[d + a.TRANSLATE] - f) * g
                    }
                    l == n.setup ? (c.rotateMix = c.data.rotateMix + (p - c.data.rotateMix) * s, c.translateMix = c.data.translateMix + (f - c.data.translateMix) * s) : (c.rotateMix += (p - c.rotateMix) * s, c.translateMix += (f - c.translateMix) * s)
                }
            }, a.ENTRIES = 3, a.PREV_TIME = -3, a.PREV_ROTATE = -2, a.PREV_TRANSLATE = -1, a.ROTATE = 1, a.TRANSLATE = 2, a
        }(a);
        t.PathConstraintMixTimeline = w
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(e) {
                this.tracks = new Array, this.events = new Array, this.listeners = new Array, this.queue = new r(this), this.propertyIDs = new t.IntSet, this.mixingTo = new Array, this.animationsChanged = !1, this.timeScale = 1, this.trackEntryPool = new t.Pool(function() {
                    return new n
                }), this.data = e
            }
            return e.prototype.update = function(t) {
                t *= this.timeScale;
                for (var e = this.tracks, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (null != i) {
                        i.animationLast = i.nextAnimationLast, i.trackLast = i.nextTrackLast;
                        var a = t * i.timeScale;
                        if (i.delay > 0) {
                            if (i.delay -= a, i.delay > 0) continue;
                            a = -i.delay, i.delay = 0
                        }
                        var o = i.next;
                        if (null != o) {
                            var s = i.trackLast - o.delay;
                            if (s >= 0) {
                                for (o.delay = 0, o.trackTime = s + t * o.timeScale, i.trackTime += a, this.setCurrent(n, o, !0); null != o.mixingFrom;) o.mixTime += a, o = o.mixingFrom;
                                continue
                            }
                        } else if (i.trackLast >= i.trackEnd && null == i.mixingFrom) {
                            e[n] = null, this.queue.end(i), this.disposeNext(i);
                            continue
                        }
                        if (null != i.mixingFrom && this.updateMixingFrom(i, t)) {
                            var l = i.mixingFrom;
                            for (i.mixingFrom = null; null != l;) this.queue.end(l), l = l.mixingFrom
                        }
                        i.trackTime += a
                    }
                }
                this.queue.drain()
            }, e.prototype.updateMixingFrom = function(t, e) {
                var n = t.mixingFrom;
                if (null == n) return !0;
                var r = this.updateMixingFrom(n, e);
                return t.mixTime > 0 && (t.mixTime >= t.mixDuration || 0 == t.timeScale) ? (0 == n.totalAlpha && (t.mixingFrom = n.mixingFrom, t.interruptAlpha = n.interruptAlpha, this.queue.end(n)), r) : (n.animationLast = n.nextAnimationLast, n.trackLast = n.nextTrackLast, n.trackTime += e * n.timeScale, t.mixTime += e * t.timeScale, !1)
            }, e.prototype.apply = function(n) {
                if (null == n) throw new Error("skeleton cannot be null.");
                this.animationsChanged && this._animationsChanged();
                for (var r = this.events, i = this.tracks, a = !1, o = 0, s = i.length; o < s; o++) {
                    var l = i[o];
                    if (!(null == l || l.delay > 0)) {
                        a = !0;
                        var h = 0 == o ? t.MixPose.current : t.MixPose.currentLayered,
                            u = l.alpha;
                        null != l.mixingFrom ? u *= this.applyMixingFrom(l, n, h) : l.trackTime >= l.trackEnd && null == l.next && (u = 0);
                        var c = l.animationLast,
                            p = l.getAnimationTime(),
                            f = l.animation.timelines.length,
                            d = l.animation.timelines;
                        if (1 == u)
                            for (var m = 0; m < f; m++) d[m].apply(n, c, p, r, 1, t.MixPose.setup, t.MixDirection.in);
                        else {
                            var g = l.timelineData,
                                v = 0 == l.timelinesRotation.length;
                            v && t.Utils.setArraySize(l.timelinesRotation, f << 1, null);
                            for (var x = l.timelinesRotation, m = 0; m < f; m++) {
                                var y = d[m],
                                    M = g[m] >= e.FIRST ? t.MixPose.setup : h;
                                y instanceof t.RotateTimeline ? this.applyRotateTimeline(y, n, p, u, M, x, m << 1, v) : y.apply(n, c, p, r, u, M, t.MixDirection.in)
                            }
                        }
                        this.queueEvents(l, p), r.length = 0, l.nextAnimationLast = p, l.nextTrackLast = l.trackTime
                    }
                }
                return this.queue.drain(), a
            }, e.prototype.applyMixingFrom = function(n, r, i) {
                var a = n.mixingFrom;
                null != a.mixingFrom && this.applyMixingFrom(a, r, i);
                var o = 0;
                0 == n.mixDuration ? o = 1 : (o = n.mixTime / n.mixDuration) > 1 && (o = 1);
                var s = o < a.eventThreshold ? this.events : null,
                    l = o < a.attachmentThreshold,
                    h = o < a.drawOrderThreshold,
                    u = a.animationLast,
                    c = a.getAnimationTime(),
                    p = a.animation.timelines.length,
                    f = a.animation.timelines,
                    d = a.timelineData,
                    m = a.timelineDipMix,
                    g = 0 == a.timelinesRotation.length;
                g && t.Utils.setArraySize(a.timelinesRotation, p << 1, null);
                var v, x = a.timelinesRotation,
                    y = a.alpha * n.interruptAlpha,
                    M = y * (1 - o),
                    w = 0;
                a.totalAlpha = 0;
                for (var E = 0; E < p; E++) {
                    var T = f[E];
                    switch (d[E]) {
                        case e.SUBSEQUENT:
                            if (!l && T instanceof t.AttachmentTimeline) continue;
                            if (!h && T instanceof t.DrawOrderTimeline) continue;
                            v = i, w = M;
                            break;
                        case e.FIRST:
                            v = t.MixPose.setup, w = M;
                            break;
                        case e.DIP:
                            v = t.MixPose.setup, w = y;
                            break;
                        default:
                            v = t.MixPose.setup, w = y;
                            var b = m[E];
                            w *= Math.max(0, 1 - b.mixTime / b.mixDuration)
                    }
                    a.totalAlpha += w, T instanceof t.RotateTimeline ? this.applyRotateTimeline(T, r, c, w, v, x, E << 1, g) : T.apply(r, u, c, s, w, v, t.MixDirection.out)
                }
                return n.mixDuration > 0 && this.queueEvents(a, c), this.events.length = 0, a.nextAnimationLast = c, a.nextTrackLast = a.trackTime, o
            }, e.prototype.applyRotateTimeline = function(e, n, r, i, a, o, s, l) {
                if (l && (o[s] = 0), 1 == i) return void e.apply(n, 0, r, null, 1, a, t.MixDirection.in);
                var h = e,
                    u = h.frames,
                    c = n.bones[h.boneIndex];
                if (r < u[0]) return void(a == t.MixPose.setup && (c.rotation = c.data.rotation));
                var p = 0;
                if (r >= u[u.length - t.RotateTimeline.ENTRIES]) p = c.data.rotation + u[u.length + t.RotateTimeline.PREV_ROTATION];
                else {
                    var f = t.Animation.binarySearch(u, r, t.RotateTimeline.ENTRIES),
                        d = u[f + t.RotateTimeline.PREV_ROTATION],
                        m = u[f],
                        g = h.getCurvePercent((f >> 1) - 1, 1 - (r - m) / (u[f + t.RotateTimeline.PREV_TIME] - m));
                    p = u[f + t.RotateTimeline.ROTATION] - d, p -= 360 * (16384 - (16384.499999999996 - p / 360 | 0)), p = d + p * g + c.data.rotation, p -= 360 * (16384 - (16384.499999999996 - p / 360 | 0))
                }
                var v = a == t.MixPose.setup ? c.data.rotation : c.rotation,
                    x = 0,
                    y = p - v;
                if (0 == y) x = o[s];
                else {
                    y -= 360 * (16384 - (16384.499999999996 - y / 360 | 0));
                    var M = 0,
                        w = 0;
                    l ? (M = 0, w = y) : (M = o[s], w = o[s + 1]);
                    var E = y > 0,
                        T = M >= 0;
                    t.MathUtils.signum(w) != t.MathUtils.signum(y) && Math.abs(w) <= 90 && (Math.abs(M) > 180 && (M += 360 * t.MathUtils.signum(M)), T = E), x = y + M - M % 360, T != E && (x += 360 * t.MathUtils.signum(M)), o[s] = x
                }
                o[s + 1] = y, v += x * i, c.rotation = v - 360 * (16384 - (16384.499999999996 - v / 360 | 0))
            }, e.prototype.queueEvents = function(t, e) {
                for (var n = t.animationStart, r = t.animationEnd, i = r - n, a = t.trackLast % i, o = this.events, s = 0, l = o.length; s < l; s++) {
                    var h = o[s];
                    if (h.time < a) break;
                    h.time > r || this.queue.event(t, h)
                }
                for ((t.loop ? a > t.trackTime % i : e >= r && t.animationLast < r) && this.queue.complete(t); s < l; s++) {
                    o[s].time < n || this.queue.event(t, o[s])
                }
            }, e.prototype.clearTracks = function() {
                var t = this.queue.drainDisabled;
                this.queue.drainDisabled = !0;
                for (var e = 0, n = this.tracks.length; e < n; e++) this.clearTrack(e);
                this.tracks.length = 0, this.queue.drainDisabled = t, this.queue.drain()
            }, e.prototype.clearTrack = function(t) {
                if (!(t >= this.tracks.length)) {
                    var e = this.tracks[t];
                    if (null != e) {
                        this.queue.end(e), this.disposeNext(e);
                        for (var n = e;;) {
                            var r = n.mixingFrom;
                            if (null == r) break;
                            this.queue.end(r), n.mixingFrom = null, n = r
                        }
                        this.tracks[e.trackIndex] = null, this.queue.drain()
                    }
                }
            }, e.prototype.setCurrent = function(t, e, n) {
                var r = this.expandToIndex(t);
                this.tracks[t] = e, null != r && (n && this.queue.interrupt(r), e.mixingFrom = r, e.mixTime = 0, null != r.mixingFrom && r.mixDuration > 0 && (e.interruptAlpha *= Math.min(1, r.mixTime / r.mixDuration)), r.timelinesRotation.length = 0), this.queue.start(e)
            }, e.prototype.setAnimation = function(t, e, n) {
                var r = this.data.skeletonData.findAnimation(e);
                if (null == r) throw new Error("Animation not found: " + e);
                return this.setAnimationWith(t, r, n)
            }, e.prototype.setAnimationWith = function(t, e, n) {
                if (null == e) throw new Error("animation cannot be null.");
                var r = !0,
                    i = this.expandToIndex(t);
                null != i && (-1 == i.nextTrackLast ? (this.tracks[t] = i.mixingFrom, this.queue.interrupt(i), this.queue.end(i), this.disposeNext(i), i = i.mixingFrom, r = !1) : this.disposeNext(i));
                var a = this.trackEntry(t, e, n, i);
                return this.setCurrent(t, a, r), this.queue.drain(), a
            }, e.prototype.addAnimation = function(t, e, n, r) {
                var i = this.data.skeletonData.findAnimation(e);
                if (null == i) throw new Error("Animation not found: " + e);
                return this.addAnimationWith(t, i, n, r)
            }, e.prototype.addAnimationWith = function(t, e, n, r) {
                if (null == e) throw new Error("animation cannot be null.");
                var i = this.expandToIndex(t);
                if (null != i)
                    for (; null != i.next;) i = i.next;
                var a = this.trackEntry(t, e, n, i);
                if (null == i) this.setCurrent(t, a, !0), this.queue.drain();
                else if (i.next = a, r <= 0) {
                    var o = i.animationEnd - i.animationStart;
                    0 != o ? r += o * (1 + (i.trackTime / o | 0)) - this.data.getMix(i.animation, e) : r = 0
                }
                return a.delay = r, a
            }, e.prototype.setEmptyAnimation = function(t, n) {
                var r = this.setAnimationWith(t, e.emptyAnimation, !1);
                return r.mixDuration = n, r.trackEnd = n, r
            }, e.prototype.addEmptyAnimation = function(t, n, r) {
                r <= 0 && (r -= n);
                var i = this.addAnimationWith(t, e.emptyAnimation, !1, r);
                return i.mixDuration = n, i.trackEnd = n, i
            }, e.prototype.setEmptyAnimations = function(t) {
                var e = this.queue.drainDisabled;
                this.queue.drainDisabled = !0;
                for (var n = 0, r = this.tracks.length; n < r; n++) {
                    var i = this.tracks[n];
                    null != i && this.setEmptyAnimation(i.trackIndex, t)
                }
                this.queue.drainDisabled = e, this.queue.drain()
            }, e.prototype.expandToIndex = function(e) {
                return e < this.tracks.length ? this.tracks[e] : (t.Utils.ensureArrayCapacity(this.tracks, e - this.tracks.length + 1, null), this.tracks.length = e + 1, null)
            }, e.prototype.trackEntry = function(t, e, n, r) {
                var i = this.trackEntryPool.obtain();
                return i.trackIndex = t, i.animation = e, i.loop = n, i.eventThreshold = 0, i.attachmentThreshold = 0, i.drawOrderThreshold = 0, i.animationStart = 0, i.animationEnd = e.duration, i.animationLast = -1, i.nextAnimationLast = -1, i.delay = 0, i.trackTime = 0, i.trackLast = -1, i.nextTrackLast = -1, i.trackEnd = Number.MAX_VALUE, i.timeScale = 1, i.alpha = 1, i.interruptAlpha = 1, i.mixTime = 0, i.mixDuration = null == r ? 0 : this.data.getMix(r.animation, e), i
            }, e.prototype.disposeNext = function(t) {
                for (var e = t.next; null != e;) this.queue.dispose(e), e = e.next;
                t.next = null
            }, e.prototype._animationsChanged = function() {
                this.animationsChanged = !1;
                var t = this.propertyIDs;
                t.clear();
                for (var e = this.mixingTo, n = 0, r = this.tracks.length; n < r; n++) {
                    var i = this.tracks[n];
                    null != i && i.setTimelineData(null, e, t)
                }
            }, e.prototype.getCurrent = function(t) {
                return t >= this.tracks.length ? null : this.tracks[t]
            }, e.prototype.addListener = function(t) {
                if (null == t) throw new Error("listener cannot be null.");
                this.listeners.push(t)
            }, e.prototype.removeListener = function(t) {
                var e = this.listeners.indexOf(t);
                e >= 0 && this.listeners.splice(e, 1)
            }, e.prototype.clearListeners = function() {
                this.listeners.length = 0
            }, e.prototype.clearListenerNotifications = function() {
                this.queue.clear()
            }, e.prototype.setAnimationByName = function(t, n, r) {
                e.deprecatedWarning1 || (e.deprecatedWarning1 = !0, console.warn("Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")), this.setAnimation(t, n, r)
            }, e.prototype.addAnimationByName = function(t, n, r, i) {
                e.deprecatedWarning2 || (e.deprecatedWarning2 = !0, console.warn("Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")), this.addAnimation(t, n, r, i)
            }, e.prototype.hasAnimation = function(t) {
                return null !== this.data.skeletonData.findAnimation(t)
            }, e.prototype.hasAnimationByName = function(t) {
                return e.deprecatedWarning3 || (e.deprecatedWarning3 = !0, console.warn("Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")), this.hasAnimation(t)
            }, e.emptyAnimation = new t.Animation("<empty>", [], 0), e.SUBSEQUENT = 0, e.FIRST = 1, e.DIP = 2, e.DIP_MIX = 3, e.deprecatedWarning1 = !1, e.deprecatedWarning2 = !1, e.deprecatedWarning3 = !1, e
        }();
        t.AnimationState = e;
        var n = function() {
            function n() {
                this.timelineData = new Array, this.timelineDipMix = new Array, this.timelinesRotation = new Array
            }
            return n.prototype.reset = function() {
                this.next = null, this.mixingFrom = null, this.animation = null, this.listener = null, this.timelineData.length = 0, this.timelineDipMix.length = 0, this.timelinesRotation.length = 0
            }, n.prototype.setTimelineData = function(n, r, i) {
                null != n && r.push(n);
                var a = null != this.mixingFrom ? this.mixingFrom.setTimelineData(this, r, i) : this;
                null != n && r.pop();
                var o = r,
                    s = r.length - 1,
                    l = this.animation.timelines,
                    h = this.animation.timelines.length,
                    u = t.Utils.setArraySize(this.timelineData, h);
                this.timelineDipMix.length = 0;
                var c = t.Utils.setArraySize(this.timelineDipMix, h);
                t: for (var p = 0; p < h; p++) {
                    var f = l[p].getPropertyId();
                    if (i.add(f))
                        if (null != n && n.hasTimeline(f)) {
                            for (var d = s; d >= 0; d--) {
                                var m = o[d];
                                if (!m.hasTimeline(f) && m.mixDuration > 0) {
                                    u[p] = e.DIP_MIX, c[p] = m;
                                    continue t
                                }
                            }
                            u[p] = e.DIP
                        } else u[p] = e.FIRST;
                    else u[p] = e.SUBSEQUENT
                }
                return a
            }, n.prototype.hasTimeline = function(t) {
                for (var e = this.animation.timelines, n = 0, r = e.length; n < r; n++)
                    if (e[n].getPropertyId() == t) return !0;
                return !1
            }, n.prototype.getAnimationTime = function() {
                if (this.loop) {
                    var t = this.animationEnd - this.animationStart;
                    return 0 == t ? this.animationStart : this.trackTime % t + this.animationStart
                }
                return Math.min(this.trackTime + this.animationStart, this.animationEnd)
            }, n.prototype.setAnimationLast = function(t) {
                this.animationLast = t, this.nextAnimationLast = t
            }, n.prototype.isComplete = function() {
                return this.trackTime >= this.animationEnd - this.animationStart
            }, n.prototype.resetRotationDirections = function() {
                this.timelinesRotation.length = 0
            }, Object.defineProperty(n.prototype, "time", {
                get: function() {
                    return n.deprecatedWarning1 || (n.deprecatedWarning1 = !0, console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")), this.trackTime
                },
                set: function(t) {
                    n.deprecatedWarning1 || (n.deprecatedWarning1 = !0, console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")), this.trackTime = t
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(n.prototype, "endTime", {
                get: function() {
                    return n.deprecatedWarning2 || (n.deprecatedWarning2 = !0, console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")), this.trackTime
                },
                set: function(t) {
                    n.deprecatedWarning2 || (n.deprecatedWarning2 = !0, console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")), this.trackTime = t
                },
                enumerable: !0,
                configurable: !0
            }), n.prototype.loopsCount = function() {
                return Math.floor(this.trackTime / this.trackEnd)
            }, n.deprecatedWarning1 = !1, n.deprecatedWarning2 = !1, n
        }();
        t.TrackEntry = n;
        var r = function() {
            function e(t) {
                this.objects = [], this.drainDisabled = !1, this.animState = t
            }
            return e.prototype.start = function(t) {
                this.objects.push(i.start), this.objects.push(t), this.animState.animationsChanged = !0
            }, e.prototype.interrupt = function(t) {
                this.objects.push(i.interrupt), this.objects.push(t)
            }, e.prototype.end = function(t) {
                this.objects.push(i.end), this.objects.push(t), this.animState.animationsChanged = !0
            }, e.prototype.dispose = function(t) {
                this.objects.push(i.dispose), this.objects.push(t)
            }, e.prototype.complete = function(t) {
                this.objects.push(i.complete), this.objects.push(t)
            }, e.prototype.event = function(t, e) {
                this.objects.push(i.event), this.objects.push(t), this.objects.push(e)
            }, e.prototype.deprecateStuff = function() {
                return e.deprecatedWarning1 || (e.deprecatedWarning1 = !0, console.warn("Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")), !0
            }, e.prototype.drain = function() {
                if (!this.drainDisabled) {
                    this.drainDisabled = !0;
                    for (var e = this.objects, n = this.animState.listeners, r = 0; r < e.length; r += 2) {
                        var a = e[r],
                            o = e[r + 1];
                        switch (a) {
                            case i.start:
                                null != o.listener && o.listener.start && o.listener.start(o);
                                for (var s = 0; s < n.length; s++) n[s].start && n[s].start(o);
                                o.onStart && this.deprecateStuff() && o.onStart(o.trackIndex), this.animState.onStart && this.deprecateStuff() && this.deprecateStuff && this.animState.onStart(o.trackIndex);
                                break;
                            case i.interrupt:
                                null != o.listener && o.listener.interrupt && o.listener.interrupt(o);
                                for (var s = 0; s < n.length; s++) n[s].interrupt && n[s].interrupt(o);
                                break;
                            case i.end:
                                null != o.listener && o.listener.end && o.listener.end(o);
                                for (var s = 0; s < n.length; s++) n[s].end && n[s].end(o);
                                o.onEnd && this.deprecateStuff() && o.onEnd(o.trackIndex), this.animState.onEnd && this.deprecateStuff() && this.animState.onEnd(o.trackIndex);
                            case i.dispose:
                                null != o.listener && o.listener.dispose && o.listener.dispose(o);
                                for (var s = 0; s < n.length; s++) n[s].dispose && n[s].dispose(o);
                                this.animState.trackEntryPool.free(o);
                                break;
                            case i.complete:
                                null != o.listener && o.listener.complete && o.listener.complete(o);
                                for (var s = 0; s < n.length; s++) n[s].complete && n[s].complete(o);
                                var l = t.MathUtils.toInt(o.loopsCount());
                                o.onComplete && this.deprecateStuff() && o.onComplete(o.trackIndex, l), this.animState.onComplete && this.deprecateStuff() && this.animState.onComplete(o.trackIndex, l);
                                break;
                            case i.event:
                                var h = e[2 + r++];
                                null != o.listener && o.listener.event && o.listener.event(o, h);
                                for (var s = 0; s < n.length; s++) n[s].event && n[s].event(o, h);
                                o.onEvent && this.deprecateStuff() && o.onEvent(o.trackIndex, h), this.animState.onEvent && this.deprecateStuff() && this.animState.onEvent(o.trackIndex, h)
                        }
                    }
                    this.clear(), this.drainDisabled = !1
                }
            }, e.prototype.clear = function() {
                this.objects.length = 0
            }, e.deprecatedWarning1 = !1, e
        }();
        t.EventQueue = r;
        var i;
        ! function(t) {
            t[t.start = 0] = "start", t[t.interrupt = 1] = "interrupt", t[t.end = 2] = "end", t[t.dispose = 3] = "dispose", t[t.complete = 4] = "complete", t[t.event = 5] = "event"
        }(i = t.EventType || (t.EventType = {}));
        var a = function() {
            function t() {}
            return t.prototype.start = function(t) {}, t.prototype.interrupt = function(t) {}, t.prototype.end = function(t) {}, t.prototype.dispose = function(t) {}, t.prototype.complete = function(t) {}, t.prototype.event = function(t, e) {}, t
        }();
        t.AnimationStateAdapter2 = a
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t(t) {
                if (this.animationToMixTime = {}, this.defaultMix = 0, null == t) throw new Error("skeletonData cannot be null.");
                this.skeletonData = t
            }
            return t.prototype.setMix = function(t, e, n) {
                var r = this.skeletonData.findAnimation(t);
                if (null == r) throw new Error("Animation not found: " + t);
                var i = this.skeletonData.findAnimation(e);
                if (null == i) throw new Error("Animation not found: " + e);
                this.setMixWith(r, i, n)
            }, t.prototype.setMixByName = function(e, n, r) {
                t.deprecatedWarning1 || (t.deprecatedWarning1 = !0, console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")), this.setMix(e, n, r)
            }, t.prototype.setMixWith = function(t, e, n) {
                if (null == t) throw new Error("from cannot be null.");
                if (null == e) throw new Error("to cannot be null.");
                var r = t.name + e.name;
                this.animationToMixTime[r] = n
            }, t.prototype.getMix = function(t, e) {
                var n = t.name + e.name,
                    r = this.animationToMixTime[n];
                return void 0 === r ? this.defaultMix : r
            }, t.deprecatedWarning1 = !1, t
        }();
        t.AnimationStateData = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(t) {
                this.atlas = t
            }
            return e.prototype.newRegionAttachment = function(e, n, r) {
                var i = this.atlas.findRegion(r);
                if (null == i) throw new Error("Region not found in atlas: " + r + " (region attachment: " + n + ")");
                var a = new t.RegionAttachment(n);
                return a.region = i, a
            }, e.prototype.newMeshAttachment = function(e, n, r) {
                var i = this.atlas.findRegion(r);
                if (null == i) throw new Error("Region not found in atlas: " + r + " (mesh attachment: " + n + ")");
                var a = new t.MeshAttachment(n);
                return a.region = i, a
            }, e.prototype.newBoundingBoxAttachment = function(e, n) {
                return new t.BoundingBoxAttachment(n)
            }, e.prototype.newPathAttachment = function(e, n) {
                return new t.PathAttachment(n)
            }, e.prototype.newPointAttachment = function(e, n) {
                return new t.PointAttachment(n)
            }, e.prototype.newClippingAttachment = function(e, n) {
                return new t.ClippingAttachment(n)
            }, e
        }();
        t.AtlasAttachmentLoader = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        ! function(t) {
            t[t.Normal = 0] = "Normal", t[t.Additive = 1] = "Additive", t[t.Multiply = 2] = "Multiply", t[t.Screen = 3] = "Screen"
        }(t.BlendMode || (t.BlendMode = {}))
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(t, e, n) {
                if (this.matrix = new PIXI.Matrix, this.children = new Array, this.x = 0, this.y = 0, this.rotation = 0, this.scaleX = 0, this.scaleY = 0, this.shearX = 0, this.shearY = 0, this.ax = 0, this.ay = 0, this.arotation = 0, this.ascaleX = 0, this.ascaleY = 0, this.ashearX = 0, this.ashearY = 0, this.appliedValid = !1, this.sorted = !1, null == t) throw new Error("data cannot be null.");
                if (null == e) throw new Error("skeleton cannot be null.");
                this.data = t, this.skeleton = e, this.parent = n, this.setToSetupPose()
            }
            return Object.defineProperty(e.prototype, "worldX", {
                get: function() {
                    return this.matrix.tx
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "worldY", {
                get: function() {
                    return this.matrix.ty
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.update = function() {
                this.updateWorldTransformWith(this.x, this.y, this.rotation, this.scaleX, this.scaleY, this.shearX, this.shearY)
            }, e.prototype.updateWorldTransform = function() {
                this.updateWorldTransformWith(this.x, this.y, this.rotation, this.scaleX, this.scaleY, this.shearX, this.shearY)
            }, e.prototype.updateWorldTransformWith = function(n, r, i, a, o, s, l) {
                this.ax = n, this.ay = r, this.arotation = i, this.ascaleX = a, this.ascaleY = o, this.ashearX = s, this.ashearY = l, this.appliedValid = !0;
                var h = this.parent,
                    u = this.matrix;
                if (null == h) {
                    var c = i + 90 + l,
                        p = t.MathUtils.cosDeg(i + s) * a,
                        f = t.MathUtils.cosDeg(c) * o,
                        d = t.MathUtils.sinDeg(i + s) * a,
                        m = t.MathUtils.sinDeg(c) * o,
                        g = this.skeleton;
                    return g.flipX && (n = -n, p = -p, f = -f), g.flipY !== e.yDown && (r = -r, d = -d, m = -m), u.a = p, u.c = f, u.b = d, u.d = m, u.tx = n + g.x, void(u.ty = r + g.y)
                }
                var v = h.matrix.a,
                    x = h.matrix.c,
                    y = h.matrix.b,
                    M = h.matrix.d;
                switch (u.tx = v * n + x * r + h.matrix.tx, u.ty = y * n + M * r + h.matrix.ty, this.data.transformMode) {
                    case t.TransformMode.Normal:
                        var c = i + 90 + l,
                            p = t.MathUtils.cosDeg(i + s) * a,
                            f = t.MathUtils.cosDeg(c) * o,
                            d = t.MathUtils.sinDeg(i + s) * a,
                            m = t.MathUtils.sinDeg(c) * o;
                        return u.a = v * p + x * d, u.c = v * f + x * m, u.b = y * p + M * d, void(u.d = y * f + M * m);
                    case t.TransformMode.OnlyTranslation:
                        var c = i + 90 + l;
                        u.a = t.MathUtils.cosDeg(i + s) * a, u.c = t.MathUtils.cosDeg(c) * o, u.b = t.MathUtils.sinDeg(i + s) * a, u.d = t.MathUtils.sinDeg(c) * o;
                        break;
                    case t.TransformMode.NoRotationOrReflection:
                        var w = v * v + y * y,
                            E = 0;
                        w > 1e-4 ? (w = Math.abs(v * M - x * y) / w, x = y * w, M = v * w, E = Math.atan2(y, v) * t.MathUtils.radDeg) : (v = 0, y = 0, E = 90 - Math.atan2(M, x) * t.MathUtils.radDeg);
                        var T = i + s - E,
                            b = i + l - E + 90,
                            p = t.MathUtils.cosDeg(T) * a,
                            f = t.MathUtils.cosDeg(b) * o,
                            d = t.MathUtils.sinDeg(T) * a,
                            m = t.MathUtils.sinDeg(b) * o;
                        u.a = v * p - x * d, u.c = v * f - x * m, u.b = y * p + M * d, u.d = y * f + M * m;
                        break;
                    case t.TransformMode.NoScale:
                    case t.TransformMode.NoScaleOrReflection:
                        var A = t.MathUtils.cosDeg(i),
                            I = t.MathUtils.sinDeg(i),
                            S = v * A + x * I,
                            R = y * A + M * I,
                            w = Math.sqrt(S * S + R * R);
                        w > 1e-5 && (w = 1 / w), S *= w, R *= w, w = Math.sqrt(S * S + R * R);
                        var P = Math.PI / 2 + Math.atan2(R, S),
                            C = Math.cos(P) * w,
                            _ = Math.sin(P) * w,
                            p = t.MathUtils.cosDeg(s) * a,
                            f = t.MathUtils.cosDeg(90 + l) * o,
                            d = t.MathUtils.sinDeg(s) * a,
                            m = t.MathUtils.sinDeg(90 + l) * o;
                        return u.a = S * p + C * d, u.c = S * f + C * m, u.b = R * p + _ * d, u.d = R * f + _ * m, void((this.data.transformMode != t.TransformMode.NoScaleOrReflection ? v * M - x * y < 0 : this.skeleton.flipX != this.skeleton.flipY != e.yDown) && (u.c = -u.c, u.d = -u.d))
                }
                this.skeleton.flipX && (u.a = -u.a, u.c = -u.c), this.skeleton.flipY != e.yDown && (u.b = -u.b, u.d = -u.d)
            }, e.prototype.setToSetupPose = function() {
                var t = this.data;
                this.x = t.x, this.y = t.y, this.rotation = t.rotation, this.scaleX = t.scaleX, this.scaleY = t.scaleY, this.shearX = t.shearX, this.shearY = t.shearY
            }, e.prototype.getWorldRotationX = function() {
                return Math.atan2(this.matrix.b, this.matrix.a) * t.MathUtils.radDeg
            }, e.prototype.getWorldRotationY = function() {
                return Math.atan2(this.matrix.d, this.matrix.c) * t.MathUtils.radDeg
            }, e.prototype.getWorldScaleX = function() {
                var t = this.matrix;
                return Math.sqrt(t.a * t.a + t.c * t.c)
            }, e.prototype.getWorldScaleY = function() {
                var t = this.matrix;
                return Math.sqrt(t.b * t.b + t.d * t.d)
            }, e.prototype.updateAppliedTransform = function() {
                this.appliedValid = !0;
                var e = this.parent,
                    n = this.matrix;
                if (null == e) return this.ax = n.tx, this.ay = n.ty, this.arotation = Math.atan2(n.b, n.a) * t.MathUtils.radDeg, this.ascaleX = Math.sqrt(n.a * n.a + n.b * n.b), this.ascaleY = Math.sqrt(n.c * n.c + n.d * n.d), this.ashearX = 0, void(this.ashearY = Math.atan2(n.a * n.c + n.b * n.d, n.a * n.d - n.b * n.c) * t.MathUtils.radDeg);
                var r = e.matrix,
                    i = 1 / (r.a * r.d - r.b * r.c),
                    a = n.tx - r.tx,
                    o = n.ty - r.ty;
                this.ax = a * r.d * i - o * r.c * i, this.ay = o * r.a * i - a * r.b * i;
                var s = i * r.d,
                    l = i * r.a,
                    h = i * r.c,
                    u = i * r.b,
                    c = s * n.a - h * n.b,
                    p = s * n.c - h * n.d,
                    f = l * n.b - u * n.a,
                    d = l * n.d - u * n.c;
                if (this.ashearX = 0, this.ascaleX = Math.sqrt(c * c + f * f), this.ascaleX > 1e-4) {
                    var m = c * d - p * f;
                    this.ascaleY = m / this.ascaleX, this.ashearY = Math.atan2(c * p + f * d, m) * t.MathUtils.radDeg, this.arotation = Math.atan2(f, c) * t.MathUtils.radDeg
                } else this.ascaleX = 0, this.ascaleY = Math.sqrt(p * p + d * d), this.ashearY = 0, this.arotation = 90 - Math.atan2(d, p) * t.MathUtils.radDeg
            }, e.prototype.worldToLocal = function(t) {
                var e = this.matrix,
                    n = e.a,
                    r = e.c,
                    i = e.b,
                    a = e.d,
                    o = 1 / (n * a - r * i),
                    s = t.x - e.tx,
                    l = t.y - e.ty;
                return t.x = s * a * o - l * r * o, t.y = l * n * o - s * i * o, t
            }, e.prototype.localToWorld = function(t) {
                var e = this.matrix,
                    n = t.x,
                    r = t.y;
                return t.x = n * e.a + r * e.c + e.tx, t.y = n * e.b + r * e.d + e.ty, t
            }, e.prototype.worldToLocalRotation = function(e) {
                var n = t.MathUtils.sinDeg(e),
                    r = t.MathUtils.cosDeg(e),
                    i = this.matrix;
                return Math.atan2(i.a * n - i.b * r, i.d * r - i.c * n) * t.MathUtils.radDeg
            }, e.prototype.localToWorldRotation = function(e) {
                var n = t.MathUtils.sinDeg(e),
                    r = t.MathUtils.cosDeg(e),
                    i = this.matrix;
                return Math.atan2(r * i.b + n * i.d, r * i.a + n * i.c) * t.MathUtils.radDeg
            }, e.prototype.rotateWorld = function(e) {
                var n = this.matrix,
                    r = n.a,
                    i = n.c,
                    a = n.b,
                    o = n.d,
                    s = t.MathUtils.cosDeg(e),
                    l = t.MathUtils.sinDeg(e);
                n.a = s * r - l * a, n.c = s * i - l * o, n.b = l * r + s * a, n.d = l * i + s * o, this.appliedValid = !1
            }, e.yDown = !1, e
        }();
        t.Bone = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t(t, e, r) {
                if (this.x = 0, this.y = 0, this.rotation = 0, this.scaleX = 1, this.scaleY = 1, this.shearX = 0, this.shearY = 0, this.transformMode = n.Normal, t < 0) throw new Error("index must be >= 0.");
                if (null == e) throw new Error("name cannot be null.");
                this.index = t, this.name = e, this.parent = r
            }
            return t
        }();
        t.BoneData = e;
        var n;
        ! function(t) {
            t[t.Normal = 0] = "Normal", t[t.OnlyTranslation = 1] = "OnlyTranslation", t[t.NoRotationOrReflection = 2] = "NoRotationOrReflection", t[t.NoScale = 3] = "NoScale", t[t.NoScaleOrReflection = 4] = "NoScaleOrReflection"
        }(n = t.TransformMode || (t.TransformMode = {}))
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t(t, e) {
                if (null == e) throw new Error("data cannot be null.");
                this.time = t, this.data = e
            }
            return t
        }();
        t.Event = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t(t) {
                this.name = t
            }
            return t
        }();
        t.EventData = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(t, e) {
                if (this.mix = 1, this.bendDirection = 0, null == t) throw new Error("data cannot be null.");
                if (null == e) throw new Error("skeleton cannot be null.");
                this.data = t, this.mix = t.mix, this.bendDirection = t.bendDirection, this.bones = new Array;
                for (var n = 0; n < t.bones.length; n++) this.bones.push(e.findBone(t.bones[n].name));
                this.target = e.findBone(t.target.name)
            }
            return e.prototype.getOrder = function() {
                return this.data.order
            }, e.prototype.apply = function() {
                this.update()
            }, e.prototype.update = function() {
                var t = this.target,
                    e = this.bones;
                switch (e.length) {
                    case 1:
                        this.apply1(e[0], t.worldX, t.worldY, this.mix);
                        break;
                    case 2:
                        this.apply2(e[0], e[1], t.worldX, t.worldY, this.bendDirection, this.mix)
                }
            }, e.prototype.apply1 = function(e, n, r, i) {
                e.appliedValid || e.updateAppliedTransform();
                var a = e.parent.matrix,
                    o = 1 / (a.a * a.d - a.b * a.c),
                    s = n - a.tx,
                    l = r - a.ty,
                    h = (s * a.d - l * a.c) * o - e.ax,
                    u = (l * a.a - s * a.b) * o - e.ay,
                    c = Math.atan2(u, h) * t.MathUtils.radDeg - e.ashearX - e.arotation;
                e.ascaleX < 0 && (c += 180), c > 180 ? c -= 360 : c < -180 && (c += 360), e.updateWorldTransformWith(e.ax, e.ay, e.arotation + c * i, e.ascaleX, e.ascaleY, e.ashearX, e.ashearY)
            }, e.prototype.apply2 = function(e, n, r, i, a, o) {
                if (0 == o) return void n.updateWorldTransform();
                e.appliedValid || e.updateAppliedTransform(), n.appliedValid || n.updateAppliedTransform();
                var s = e.ax,
                    l = e.ay,
                    h = e.ascaleX,
                    u = e.ascaleY,
                    c = n.ascaleX,
                    p = e.matrix,
                    f = 0,
                    d = 0,
                    m = 0;
                h < 0 ? (h = -h, f = 180, m = -1) : (f = 0, m = 1), u < 0 && (u = -u, m = -m), c < 0 ? (c = -c, d = 180) : d = 0;
                var g = n.ax,
                    v = 0,
                    x = 0,
                    y = 0,
                    M = p.a,
                    w = p.c,
                    E = p.b,
                    T = p.d,
                    b = Math.abs(h - u) <= 1e-4;
                b ? (v = n.ay, x = M * g + w * v + p.tx, y = E * g + T * v + p.ty) : (v = 0, x = M * g + p.tx, y = E * g + p.ty);
                var A = e.parent.matrix;
                M = A.a, w = A.c, E = A.b, T = A.d;
                var I = 1 / (M * T - w * E),
                    S = r - A.tx,
                    R = i - A.ty,
                    P = (S * T - R * w) * I - s,
                    C = (R * M - S * E) * I - l;
                S = x - A.tx, R = y - A.ty;
                var _ = (S * T - R * w) * I - s,
                    V = (R * M - S * E) * I - l,
                    k = Math.sqrt(_ * _ + V * V),
                    N = n.data.length * c,
                    D = 0,
                    X = 0;
                t: if (b) {
                    N *= h;
                    var U = (P * P + C * C - k * k - N * N) / (2 * k * N);
                    U < -1 ? U = -1 : U > 1 && (U = 1), X = Math.acos(U) * a, M = k + N * U, w = N * Math.sin(X), D = Math.atan2(C * M - P * w, P * M + C * w)
                } else {
                    M = h * N, w = u * N;
                    var O = M * M,
                        Y = w * w,
                        F = P * P + C * C,
                        L = Math.atan2(C, P);
                    E = Y * k * k + O * F - O * Y;
                    var B = -2 * Y * k,
                        W = Y - O;
                    if ((T = B * B - 4 * W * E) >= 0) {
                        var q = Math.sqrt(T);
                        B < 0 && (q = -q), q = -(B + q) / 2;
                        var j = q / W,
                            G = E / q,
                            z = Math.abs(j) < Math.abs(G) ? j : G;
                        if (z * z <= F) {
                            R = Math.sqrt(F - z * z) * a, D = L - Math.atan2(R, z), X = Math.atan2(R / u, (z - k) / h);
                            break t
                        }
                    }
                    var Z = t.MathUtils.PI,
                        H = k - M,
                        J = H * H,
                        Q = 0,
                        K = 0,
                        $ = k + M,
                        tt = $ * $,
                        et = 0;
                    E = -M * k / (O - Y), E >= -1 && E <= 1 && (E = Math.acos(E), S = M * Math.cos(E) + k, R = w * Math.sin(E), T = S * S + R * R, T < J && (Z = E, J = T, H = S, Q = R), T > tt && (K = E, tt = T, $ = S, et = R)), F <= (J + tt) / 2 ? (D = L - Math.atan2(Q * a, H), X = Z * a) : (D = L - Math.atan2(et * a, $), X = K * a)
                }
                var nt = Math.atan2(v, g) * m,
                    rt = e.arotation;
                D = (D - nt) * t.MathUtils.radDeg + f - rt, D > 180 ? D -= 360 : D < -180 && (D += 360), e.updateWorldTransformWith(s, l, rt + D * o, e.ascaleX, e.ascaleY, 0, 0), rt = n.arotation, X = ((X + nt) * t.MathUtils.radDeg - n.ashearX) * m + d - rt, X > 180 ? X -= 360 : X < -180 && (X += 360), n.updateWorldTransformWith(g, v, rt + X * o, n.ascaleX, n.ascaleY, n.ashearX, n.ashearY)
            }, e
        }();
        t.IkConstraint = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t(t) {
                this.order = 0, this.bones = new Array, this.bendDirection = 1, this.mix = 1, this.name = t
            }
            return t
        }();
        t.IkConstraintData = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(t, e) {
                if (this.position = 0, this.spacing = 0, this.rotateMix = 0, this.translateMix = 0, this.spaces = new Array, this.positions = new Array, this.world = new Array, this.curves = new Array, this.lengths = new Array, this.segments = new Array, null == t) throw new Error("data cannot be null.");
                if (null == e) throw new Error("skeleton cannot be null.");
                this.data = t, this.bones = new Array;
                for (var n = 0, r = t.bones.length; n < r; n++) this.bones.push(e.findBone(t.bones[n].name));
                this.target = e.findSlot(t.target.name), this.position = t.position, this.spacing = t.spacing, this.rotateMix = t.rotateMix, this.translateMix = t.translateMix
            }
            return e.prototype.apply = function() {
                this.update()
            }, e.prototype.update = function() {
                var e = this.target.getAttachment();
                if (e instanceof t.PathAttachment) {
                    var n = this.rotateMix,
                        r = this.translateMix,
                        i = r > 0,
                        a = n > 0;
                    if (i || a) {
                        var o = this.data,
                            s = o.spacingMode,
                            l = s == t.SpacingMode.Length,
                            h = o.rotateMode,
                            u = h == t.RotateMode.Tangent,
                            c = h == t.RotateMode.ChainScale,
                            p = this.bones.length,
                            f = u ? p : p + 1,
                            d = this.bones,
                            m = t.Utils.setArraySize(this.spaces, f),
                            g = null,
                            v = this.spacing;
                        if (c || l) {
                            c && (g = t.Utils.setArraySize(this.lengths, p));
                            for (var x = 0, y = f - 1; x < y;) {
                                var M = d[x],
                                    w = M.data.length,
                                    E = w * M.matrix.a,
                                    T = w * M.matrix.b,
                                    b = Math.sqrt(E * E + T * T);
                                c && (g[x] = b), m[++x] = (l ? w + v : v) * b / w
                            }
                        } else
                            for (var x = 1; x < f; x++) m[x] = v;
                        var A = this.computeWorldPositions(e, f, u, o.positionMode == t.PositionMode.Percent, s == t.SpacingMode.Percent),
                            I = A[0],
                            S = A[1],
                            R = o.offsetRotation,
                            P = !1;
                        if (0 == R) P = h == t.RotateMode.Chain;
                        else {
                            P = !1;
                            var C = this.target.bone.matrix;
                            R *= C.a * C.d - C.b * C.c > 0 ? t.MathUtils.degRad : -t.MathUtils.degRad
                        }
                        for (var x = 0, C = 3; x < p; x++, C += 3) {
                            var M = d[x],
                                _ = M.matrix;
                            _.tx += (I - _.tx) * r, _.ty += (S - _.ty) * r;
                            var E = A[C],
                                T = A[C + 1],
                                V = E - I,
                                k = T - S;
                            if (c) {
                                var N = g[x];
                                if (0 != N) {
                                    var D = (Math.sqrt(V * V + k * k) / N - 1) * n + 1;
                                    _.a *= D, _.b *= D
                                }
                            }
                            if (I = E, S = T, a) {
                                var X = _.a,
                                    U = _.c,
                                    O = _.b,
                                    Y = _.d,
                                    F = 0,
                                    L = 0,
                                    B = 0;
                                if (F = u ? A[C - 1] : 0 == m[x + 1] ? A[C + 2] : Math.atan2(k, V), F -= Math.atan2(O, X), P) {
                                    L = Math.cos(F), B = Math.sin(F);
                                    var W = M.data.length;
                                    I += (W * (L * X - B * O) - V) * n, S += (W * (B * X + L * O) - k) * n
                                } else F += R;
                                F > t.MathUtils.PI ? F -= t.MathUtils.PI2 : F < -t.MathUtils.PI && (F += t.MathUtils.PI2), F *= n, L = Math.cos(F), B = Math.sin(F), _.a = L * X - B * O, _.c = L * U - B * Y, _.b = B * X + L * O, _.d = B * U + L * Y
                            }
                            M.appliedValid = !1
                        }
                    }
                }
            }, e.prototype.computeWorldPositions = function(n, r, i, a, o) {
                var s = this.target,
                    l = this.position,
                    h = this.spaces,
                    u = t.Utils.setArraySize(this.positions, 3 * r + 2),
                    c = null,
                    p = n.closed,
                    f = n.worldVerticesLength,
                    d = f / 6,
                    m = e.NONE;
                if (!n.constantSpeed) {
                    var g = n.lengths;
                    d -= p ? 1 : 2;
                    var v = g[d];
                    if (a && (l *= v), o)
                        for (var x = 0; x < r; x++) h[x] *= v;
                    c = t.Utils.setArraySize(this.world, 8);
                    for (var x = 0, y = 0, M = 0; x < r; x++, y += 3) {
                        var w = h[x];
                        l += w;
                        var E = l;
                        if (p) E %= v, E < 0 && (E += v), M = 0;
                        else {
                            if (E < 0) {
                                m != e.BEFORE && (m = e.BEFORE, n.computeWorldVertices(s, 2, 4, c, 0, 2)), this.addBeforePosition(E, c, 0, u, y);
                                continue
                            }
                            if (E > v) {
                                m != e.AFTER && (m = e.AFTER, n.computeWorldVertices(s, f - 6, 4, c, 0, 2)), this.addAfterPosition(E - v, c, 0, u, y);
                                continue
                            }
                        }
                        for (;; M++) {
                            var T = g[M];
                            if (!(E > T)) {
                                if (0 == M) E /= T;
                                else {
                                    var b = g[M - 1];
                                    E = (E - b) / (T - b)
                                }
                                break
                            }
                        }
                        M != m && (m = M, p && M == d ? (n.computeWorldVertices(s, f - 4, 4, c, 0, 2), n.computeWorldVertices(s, 0, 4, c, 4, 2)) : n.computeWorldVertices(s, 6 * M + 2, 8, c, 0, 2)), this.addCurvePosition(E, c[0], c[1], c[2], c[3], c[4], c[5], c[6], c[7], u, y, i || x > 0 && 0 == w)
                    }
                    return u
                }
                p ? (f += 2, c = t.Utils.setArraySize(this.world, f), n.computeWorldVertices(s, 2, f - 4, c, 0, 2), n.computeWorldVertices(s, 0, 2, c, f - 4, 2), c[f - 2] = c[0], c[f - 1] = c[1]) : (d--, f -= 4, c = t.Utils.setArraySize(this.world, f), n.computeWorldVertices(s, 2, f, c, 0, 2));
                for (var A = t.Utils.setArraySize(this.curves, d), I = 0, S = c[0], R = c[1], P = 0, C = 0, _ = 0, V = 0, k = 0, N = 0, D = 0, X = 0, U = 0, O = 0, Y = 0, F = 0, L = 0, B = 0, x = 0, W = 2; x < d; x++, W += 6) P = c[W], C = c[W + 1], _ = c[W + 2], V = c[W + 3], k = c[W + 4], N = c[W + 5], D = .1875 * (S - 2 * P + _), X = .1875 * (R - 2 * C + V), U = .09375 * (3 * (P - _) - S + k), O = .09375 * (3 * (C - V) - R + N), Y = 2 * D + U, F = 2 * X + O, L = .75 * (P - S) + D + .16666667 * U, B = .75 * (C - R) + X + .16666667 * O, I += Math.sqrt(L * L + B * B), L += Y, B += F, Y += U, F += O, I += Math.sqrt(L * L + B * B), L += Y, B += F, I += Math.sqrt(L * L + B * B), L += Y + U, B += F + O, I += Math.sqrt(L * L + B * B), A[x] = I, S = k, R = N;
                if (a && (l *= I), o)
                    for (var x = 0; x < r; x++) h[x] *= I;
                for (var q = this.segments, j = 0, x = 0, y = 0, M = 0, G = 0; x < r; x++, y += 3) {
                    var w = h[x];
                    l += w;
                    var E = l;
                    if (p) E %= I, E < 0 && (E += I), M = 0;
                    else {
                        if (E < 0) {
                            this.addBeforePosition(E, c, 0, u, y);
                            continue
                        }
                        if (E > I) {
                            this.addAfterPosition(E - I, c, f - 4, u, y);
                            continue
                        }
                    }
                    for (;; M++) {
                        var z = A[M];
                        if (!(E > z)) {
                            if (0 == M) E /= z;
                            else {
                                var b = A[M - 1];
                                E = (E - b) / (z - b)
                            }
                            break
                        }
                    }
                    if (M != m) {
                        m = M;
                        var Z = 6 * M;
                        for (S = c[Z], R = c[Z + 1], P = c[Z + 2], C = c[Z + 3], _ = c[Z + 4], V = c[Z + 5], k = c[Z + 6], N = c[Z + 7], D = .03 * (S - 2 * P + _), X = .03 * (R - 2 * C + V), U = .006 * (3 * (P - _) - S + k), O = .006 * (3 * (C - V) - R + N), Y = 2 * D + U, F = 2 * X + O, L = .3 * (P - S) + D + .16666667 * U, B = .3 * (C - R) + X + .16666667 * O, j = Math.sqrt(L * L + B * B), q[0] = j, Z = 1; Z < 8; Z++) L += Y, B += F, Y += U, F += O, j += Math.sqrt(L * L + B * B), q[Z] = j;
                        L += Y, B += F, j += Math.sqrt(L * L + B * B), q[8] = j, L += Y + U, B += F + O, j += Math.sqrt(L * L + B * B), q[9] = j, G = 0
                    }
                    for (E *= j;; G++) {
                        var H = q[G];
                        if (!(E > H)) {
                            if (0 == G) E /= H;
                            else {
                                var b = q[G - 1];
                                E = G + (E - b) / (H - b)
                            }
                            break
                        }
                    }
                    this.addCurvePosition(.1 * E, S, R, P, C, _, V, k, N, u, y, i || x > 0 && 0 == w)
                }
                return u
            }, e.prototype.addBeforePosition = function(t, e, n, r, i) {
                var a = e[n],
                    o = e[n + 1],
                    s = e[n + 2] - a,
                    l = e[n + 3] - o,
                    h = Math.atan2(l, s);
                r[i] = a + t * Math.cos(h), r[i + 1] = o + t * Math.sin(h), r[i + 2] = h
            }, e.prototype.addAfterPosition = function(t, e, n, r, i) {
                var a = e[n + 2],
                    o = e[n + 3],
                    s = a - e[n],
                    l = o - e[n + 1],
                    h = Math.atan2(l, s);
                r[i] = a + t * Math.cos(h), r[i + 1] = o + t * Math.sin(h), r[i + 2] = h
            }, e.prototype.addCurvePosition = function(t, e, n, r, i, a, o, s, l, h, u, c) {
                (0 == t || isNaN(t)) && (t = 1e-4);
                var p = t * t,
                    f = p * t,
                    d = 1 - t,
                    m = d * d,
                    g = m * d,
                    v = d * t,
                    x = 3 * v,
                    y = d * x,
                    M = x * t,
                    w = e * g + r * y + a * M + s * f,
                    E = n * g + i * y + o * M + l * f;
                h[u] = w, h[u + 1] = E, c && (h[u + 2] = Math.atan2(E - (n * m + i * v * 2 + o * p), w - (e * m + r * v * 2 + a * p)))
            }, e.prototype.getOrder = function() {
                return this.data.order
            }, e.NONE = -1, e.BEFORE = -2, e.AFTER = -3, e
        }();
        t.PathConstraint = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t(t) {
                this.order = 0, this.bones = new Array, this.name = t
            }
            return t
        }();
        t.PathConstraintData = e;
        ! function(t) {
            t[t.Fixed = 0] = "Fixed", t[t.Percent = 1] = "Percent"
        }(t.PositionMode || (t.PositionMode = {}));
        ! function(t) {
            t[t.Length = 0] = "Length", t[t.Fixed = 1] = "Fixed", t[t.Percent = 2] = "Percent"
        }(t.SpacingMode || (t.SpacingMode = {}));
        ! function(t) {
            t[t.Tangent = 0] = "Tangent", t[t.Chain = 1] = "Chain", t[t.ChainScale = 2] = "ChainScale"
        }(t.RotateMode || (t.RotateMode = {}))
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(e) {
                if (this._updateCache = new Array, this.updateCacheReset = new Array, this.time = 0, this.flipX = !1, this.flipY = !1, this.x = 0, this.y = 0, null == e) throw new Error("data cannot be null.");
                this.data = e, this.bones = new Array;
                for (var n = 0; n < e.bones.length; n++) {
                    var r = e.bones[n],
                        i = void 0;
                    if (null == r.parent) i = new t.Bone(r, this, null);
                    else {
                        var a = this.bones[r.parent.index];
                        i = new t.Bone(r, this, a), a.children.push(i)
                    }
                    this.bones.push(i)
                }
                this.slots = new Array, this.drawOrder = new Array;
                for (var n = 0; n < e.slots.length; n++) {
                    var o = e.slots[n],
                        i = this.bones[o.boneData.index],
                        s = new t.Slot(o, i);
                    this.slots.push(s), this.drawOrder.push(s)
                }
                this.ikConstraints = new Array;
                for (var n = 0; n < e.ikConstraints.length; n++) {
                    var l = e.ikConstraints[n];
                    this.ikConstraints.push(new t.IkConstraint(l, this))
                }
                this.transformConstraints = new Array;
                for (var n = 0; n < e.transformConstraints.length; n++) {
                    var h = e.transformConstraints[n];
                    this.transformConstraints.push(new t.TransformConstraint(h, this))
                }
                this.pathConstraints = new Array;
                for (var n = 0; n < e.pathConstraints.length; n++) {
                    var u = e.pathConstraints[n];
                    this.pathConstraints.push(new t.PathConstraint(u, this))
                }
                this.color = new t.Color(1, 1, 1, 1), this.updateCache()
            }
            return e.prototype.updateCache = function() {
                this._updateCache.length = 0, this.updateCacheReset.length = 0;
                for (var t = this.bones, e = 0, n = t.length; e < n; e++) t[e].sorted = !1;
                var r = this.ikConstraints,
                    i = this.transformConstraints,
                    a = this.pathConstraints,
                    o = r.length,
                    s = i.length,
                    l = a.length,
                    h = o + s + l;
                t: for (var e = 0; e < h; e++) {
                    for (var u = 0; u < o; u++) {
                        var c = r[u];
                        if (c.data.order == e) {
                            this.sortIkConstraint(c);
                            continue t
                        }
                    }
                    for (var u = 0; u < s; u++) {
                        var c = i[u];
                        if (c.data.order == e) {
                            this.sortTransformConstraint(c);
                            continue t
                        }
                    }
                    for (var u = 0; u < l; u++) {
                        var c = a[u];
                        if (c.data.order == e) {
                            this.sortPathConstraint(c);
                            continue t
                        }
                    }
                }
                for (var e = 0, n = t.length; e < n; e++) this.sortBone(t[e])
            }, e.prototype.sortIkConstraint = function(t) {
                var e = t.target;
                this.sortBone(e);
                var n = t.bones,
                    r = n[0];
                if (this.sortBone(r), n.length > 1) {
                    var i = n[n.length - 1];
                    this._updateCache.indexOf(i) > -1 || this.updateCacheReset.push(i)
                }
                this._updateCache.push(t), this.sortReset(r.children), n[n.length - 1].sorted = !0
            }, e.prototype.sortPathConstraint = function(e) {
                var n = e.target,
                    r = n.data.index,
                    i = n.bone;
                null != this.skin && this.sortPathConstraintAttachment(this.skin, r, i), null != this.data.defaultSkin && this.data.defaultSkin != this.skin && this.sortPathConstraintAttachment(this.data.defaultSkin, r, i);
                for (var a = 0, o = this.data.skins.length; a < o; a++) this.sortPathConstraintAttachment(this.data.skins[a], r, i);
                var s = n.getAttachment();
                s instanceof t.PathAttachment && this.sortPathConstraintAttachmentWith(s, i);
                for (var l = e.bones, h = l.length, a = 0; a < h; a++) this.sortBone(l[a]);
                this._updateCache.push(e);
                for (var a = 0; a < h; a++) this.sortReset(l[a].children);
                for (var a = 0; a < h; a++) l[a].sorted = !0
            }, e.prototype.sortTransformConstraint = function(t) {
                this.sortBone(t.target);
                var e = t.bones,
                    n = e.length;
                if (t.data.local)
                    for (var r = 0; r < n; r++) {
                        var i = e[r];
                        this.sortBone(i.parent), this._updateCache.indexOf(i) > -1 || this.updateCacheReset.push(i)
                    } else
                        for (var r = 0; r < n; r++) this.sortBone(e[r]);
                this._updateCache.push(t);
                for (var a = 0; a < n; a++) this.sortReset(e[a].children);
                for (var a = 0; a < n; a++) e[a].sorted = !0
            }, e.prototype.sortPathConstraintAttachment = function(t, e, n) {
                var r = t.attachments[e];
                if (r)
                    for (var i in r) this.sortPathConstraintAttachmentWith(r[i], n)
            }, e.prototype.sortPathConstraintAttachmentWith = function(e, n) {
                if (e instanceof t.PathAttachment) {
                    var r = e.bones;
                    if (null == r) this.sortBone(n);
                    else
                        for (var i = this.bones, a = 0; a < r.length;)
                            for (var o = r[a++], s = a + o; a < s; a++) {
                                var l = r[a];
                                this.sortBone(i[l])
                            }
                }
            }, e.prototype.sortBone = function(t) {
                if (!t.sorted) {
                    var e = t.parent;
                    null != e && this.sortBone(e), t.sorted = !0, this._updateCache.push(t)
                }
            }, e.prototype.sortReset = function(t) {
                for (var e = 0, n = t.length; e < n; e++) {
                    var r = t[e];
                    r.sorted && this.sortReset(r.children), r.sorted = !1
                }
            }, e.prototype.updateWorldTransform = function() {
                for (var t = this.updateCacheReset, e = 0, n = t.length; e < n; e++) {
                    var r = t[e];
                    r.ax = r.x, r.ay = r.y, r.arotation = r.rotation, r.ascaleX = r.scaleX, r.ascaleY = r.scaleY, r.ashearX = r.shearX, r.ashearY = r.shearY, r.appliedValid = !0
                }
                for (var i = this._updateCache, e = 0, n = i.length; e < n; e++) i[e].update()
            }, e.prototype.setToSetupPose = function() {
                this.setBonesToSetupPose(), this.setSlotsToSetupPose()
            }, e.prototype.setBonesToSetupPose = function() {
                for (var t = this.bones, e = 0, n = t.length; e < n; e++) t[e].setToSetupPose();
                for (var r = this.ikConstraints, e = 0, n = r.length; e < n; e++) {
                    var i = r[e];
                    i.bendDirection = i.data.bendDirection, i.mix = i.data.mix
                }
                for (var a = this.transformConstraints, e = 0, n = a.length; e < n; e++) {
                    var i = a[e],
                        o = i.data;
                    i.rotateMix = o.rotateMix, i.translateMix = o.translateMix, i.scaleMix = o.scaleMix, i.shearMix = o.shearMix
                }
                for (var s = this.pathConstraints, e = 0, n = s.length; e < n; e++) {
                    var i = s[e],
                        o = i.data;
                    i.position = o.position, i.spacing = o.spacing, i.rotateMix = o.rotateMix, i.translateMix = o.translateMix
                }
            }, e.prototype.setSlotsToSetupPose = function() {
                var e = this.slots;
                t.Utils.arrayCopy(e, 0, this.drawOrder, 0, e.length);
                for (var n = 0, r = e.length; n < r; n++) e[n].setToSetupPose()
            }, e.prototype.getRootBone = function() {
                return 0 == this.bones.length ? null : this.bones[0]
            }, e.prototype.findBone = function(t) {
                if (null == t) throw new Error("boneName cannot be null.");
                for (var e = this.bones, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.data.name == t) return i
                }
                return null
            }, e.prototype.findBoneIndex = function(t) {
                if (null == t) throw new Error("boneName cannot be null.");
                for (var e = this.bones, n = 0, r = e.length; n < r; n++)
                    if (e[n].data.name == t) return n;
                return -1
            }, e.prototype.findSlot = function(t) {
                if (null == t) throw new Error("slotName cannot be null.");
                for (var e = this.slots, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.data.name == t) return i
                }
                return null
            }, e.prototype.findSlotIndex = function(t) {
                if (null == t) throw new Error("slotName cannot be null.");
                for (var e = this.slots, n = 0, r = e.length; n < r; n++)
                    if (e[n].data.name == t) return n;
                return -1
            }, e.prototype.setSkinByName = function(t) {
                var e = this.data.findSkin(t);
                if (null == e) throw new Error("Skin not found: " + t);
                this.setSkin(e)
            }, e.prototype.setSkin = function(t) {
                if (null != t)
                    if (null != this.skin) t.attachAll(this, this.skin);
                    else
                        for (var e = this.slots, n = 0, r = e.length; n < r; n++) {
                            var i = e[n],
                                a = i.data.attachmentName;
                            if (null != a) {
                                var o = t.getAttachment(n, a);
                                null != o && i.setAttachment(o)
                            }
                        }
                this.skin = t
            }, e.prototype.getAttachmentByName = function(t, e) {
                return this.getAttachment(this.data.findSlotIndex(t), e)
            }, e.prototype.getAttachment = function(t, e) {
                if (null == e) throw new Error("attachmentName cannot be null.");
                if (null != this.skin) {
                    var n = this.skin.getAttachment(t, e);
                    if (null != n) return n
                }
                return null != this.data.defaultSkin ? this.data.defaultSkin.getAttachment(t, e) : null
            }, e.prototype.setAttachment = function(t, e) {
                if (null == t) throw new Error("slotName cannot be null.");
                for (var n = this.slots, r = 0, i = n.length; r < i; r++) {
                    var a = n[r];
                    if (a.data.name == t) {
                        var o = null;
                        if (null != e && null == (o = this.getAttachment(r, e))) throw new Error("Attachment not found: " + e + ", for slot: " + t);
                        return void a.setAttachment(o)
                    }
                }
                throw new Error("Slot not found: " + t)
            }, e.prototype.findIkConstraint = function(t) {
                if (null == t) throw new Error("constraintName cannot be null.");
                for (var e = this.ikConstraints, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.data.name == t) return i
                }
                return null
            }, e.prototype.findTransformConstraint = function(t) {
                if (null == t) throw new Error("constraintName cannot be null.");
                for (var e = this.transformConstraints, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.data.name == t) return i
                }
                return null
            }, e.prototype.findPathConstraint = function(t) {
                if (null == t) throw new Error("constraintName cannot be null.");
                for (var e = this.pathConstraints, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.data.name == t) return i
                }
                return null
            }, e.prototype.getBounds = function(e, n, r) {
                if (null == e) throw new Error("offset cannot be null.");
                if (null == n) throw new Error("size cannot be null.");
                for (var i = this.drawOrder, a = Number.POSITIVE_INFINITY, o = Number.POSITIVE_INFINITY, s = Number.NEGATIVE_INFINITY, l = Number.NEGATIVE_INFINITY, h = 0, u = i.length; h < u; h++) {
                    var c = i[h],
                        p = 0,
                        f = null,
                        d = c.getAttachment();
                    if (d instanceof t.RegionAttachment) p = 8, f = t.Utils.setArraySize(r, p, 0), d.computeWorldVertices(c.bone, f, 0, 2);
                    else if (d instanceof t.MeshAttachment) {
                        var m = d;
                        p = m.worldVerticesLength, f = t.Utils.setArraySize(r, p, 0), m.computeWorldVertices(c, 0, p, f, 0, 2)
                    }
                    if (null != f)
                        for (var g = 0, v = f.length; g < v; g += 2) {
                            var x = f[g],
                                y = f[g + 1];
                            a = Math.min(a, x), o = Math.min(o, y), s = Math.max(s, x), l = Math.max(l, y)
                        }
                }
                e.set(a, o), n.set(s - a, l - o)
            }, e.prototype.update = function(t) {
                this.time += t
            }, e
        }();
        t.Skeleton = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e() {
                this.minX = 0, this.minY = 0, this.maxX = 0, this.maxY = 0, this.boundingBoxes = new Array, this.polygons = new Array, this.polygonPool = new t.Pool(function() {
                    return t.Utils.newFloatArray(16)
                })
            }
            return e.prototype.update = function(e, n) {
                if (null == e) throw new Error("skeleton cannot be null.");
                var r = this.boundingBoxes,
                    i = this.polygons,
                    a = this.polygonPool,
                    o = e.slots,
                    s = o.length;
                r.length = 0, a.freeAll(i), i.length = 0;
                for (var l = 0; l < s; l++) {
                    var h = o[l],
                        u = h.getAttachment();
                    if (u instanceof t.BoundingBoxAttachment) {
                        var c = u;
                        r.push(c);
                        var p = a.obtain();
                        p.length != c.worldVerticesLength && (p = t.Utils.newFloatArray(c.worldVerticesLength)), i.push(p), c.computeWorldVertices(h, 0, c.worldVerticesLength, p, 0, 2)
                    }
                }
                n ? this.aabbCompute() : (this.minX = Number.POSITIVE_INFINITY, this.minY = Number.POSITIVE_INFINITY,
                    this.maxX = Number.NEGATIVE_INFINITY, this.maxY = Number.NEGATIVE_INFINITY)
            }, e.prototype.aabbCompute = function() {
                for (var t = Number.POSITIVE_INFINITY, e = Number.POSITIVE_INFINITY, n = Number.NEGATIVE_INFINITY, r = Number.NEGATIVE_INFINITY, i = this.polygons, a = 0, o = i.length; a < o; a++)
                    for (var s = i[a], l = s, h = 0, u = s.length; h < u; h += 2) {
                        var c = l[h],
                            p = l[h + 1];
                        t = Math.min(t, c), e = Math.min(e, p), n = Math.max(n, c), r = Math.max(r, p)
                    }
                this.minX = t, this.minY = e, this.maxX = n, this.maxY = r
            }, e.prototype.aabbContainsPoint = function(t, e) {
                return t >= this.minX && t <= this.maxX && e >= this.minY && e <= this.maxY
            }, e.prototype.aabbIntersectsSegment = function(t, e, n, r) {
                var i = this.minX,
                    a = this.minY,
                    o = this.maxX,
                    s = this.maxY;
                if (t <= i && n <= i || e <= a && r <= a || t >= o && n >= o || e >= s && r >= s) return !1;
                var l = (r - e) / (n - t),
                    h = l * (i - t) + e;
                if (h > a && h < s) return !0;
                if ((h = l * (o - t) + e) > a && h < s) return !0;
                var u = (a - e) / l + t;
                return u > i && u < o || (u = (s - e) / l + t) > i && u < o
            }, e.prototype.aabbIntersectsSkeleton = function(t) {
                return this.minX < t.maxX && this.maxX > t.minX && this.minY < t.maxY && this.maxY > t.minY
            }, e.prototype.containsPoint = function(t, e) {
                for (var n = this.polygons, r = 0, i = n.length; r < i; r++)
                    if (this.containsPointPolygon(n[r], t, e)) return this.boundingBoxes[r];
                return null
            }, e.prototype.containsPointPolygon = function(t, e, n) {
                for (var r = t, i = t.length, a = i - 2, o = !1, s = 0; s < i; s += 2) {
                    var l = r[s + 1],
                        h = r[a + 1];
                    if (l < n && h >= n || h < n && l >= n) {
                        var u = r[s];
                        u + (n - l) / (h - l) * (r[a] - u) < e && (o = !o)
                    }
                    a = s
                }
                return o
            }, e.prototype.intersectsSegment = function(t, e, n, r) {
                for (var i = this.polygons, a = 0, o = i.length; a < o; a++)
                    if (this.intersectsSegmentPolygon(i[a], t, e, n, r)) return this.boundingBoxes[a];
                return null
            }, e.prototype.intersectsSegmentPolygon = function(t, e, n, r, i) {
                for (var a = t, o = t.length, s = e - r, l = n - i, h = e * i - n * r, u = a[o - 2], c = a[o - 1], p = 0; p < o; p += 2) {
                    var f = a[p],
                        d = a[p + 1],
                        m = u * d - c * f,
                        g = u - f,
                        v = c - d,
                        x = s * v - l * g,
                        y = (h * g - s * m) / x;
                    if ((y >= u && y <= f || y >= f && y <= u) && (y >= e && y <= r || y >= r && y <= e)) {
                        var M = (h * v - l * m) / x;
                        if ((M >= c && M <= d || M >= d && M <= c) && (M >= n && M <= i || M >= i && M <= n)) return !0
                    }
                    u = f, c = d
                }
                return !1
            }, e.prototype.getPolygon = function(t) {
                if (null == t) throw new Error("boundingBox cannot be null.");
                var e = this.boundingBoxes.indexOf(t);
                return -1 == e ? null : this.polygons[e]
            }, e.prototype.getWidth = function() {
                return this.maxX - this.minX
            }, e.prototype.getHeight = function() {
                return this.maxY - this.minY
            }, e
        }();
        t.SkeletonBounds = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e() {
                this.triangulator = new t.Triangulator, this.clippingPolygon = new Array, this.clipOutput = new Array, this.clippedVertices = new Array, this.clippedTriangles = new Array, this.scratch = new Array
            }
            return e.prototype.clipStart = function(n, r) {
                if (null != this.clipAttachment) return 0;
                this.clipAttachment = r;
                var i = r.worldVerticesLength,
                    a = t.Utils.setArraySize(this.clippingPolygon, i);
                r.computeWorldVertices(n, 0, i, a, 0, 2);
                var o = this.clippingPolygon;
                e.makeClockwise(o);
                for (var s = this.clippingPolygons = this.triangulator.decompose(o, this.triangulator.triangulate(o)), l = 0, h = s.length; l < h; l++) {
                    var u = s[l];
                    e.makeClockwise(u), u.push(u[0]), u.push(u[1])
                }
                return s.length
            }, e.prototype.clipEndWithSlot = function(t) {
                null != this.clipAttachment && this.clipAttachment.endSlot == t.data && this.clipEnd()
            }, e.prototype.clipEnd = function() {
                null != this.clipAttachment && (this.clipAttachment = null, this.clippingPolygons = null, this.clippedVertices.length = 0, this.clippedTriangles.length = 0, this.clippingPolygon.length = 0)
            }, e.prototype.isClipping = function() {
                return null != this.clipAttachment
            }, e.prototype.clipTriangles = function(e, n, r, i, a, o, s, l) {
                var h = this.clipOutput,
                    u = this.clippedVertices,
                    c = this.clippedTriangles,
                    p = this.clippingPolygons,
                    f = this.clippingPolygons.length,
                    d = l ? 12 : 8,
                    m = 0;
                u.length = 0, c.length = 0;
                t: for (var g = 0; g < i; g += 3) {
                    var v = r[g] << 1,
                        x = e[v],
                        y = e[v + 1],
                        M = a[v],
                        w = a[v + 1];
                    v = r[g + 1] << 1;
                    var E = e[v],
                        T = e[v + 1],
                        b = a[v],
                        A = a[v + 1];
                    v = r[g + 2] << 1;
                    for (var I = e[v], S = e[v + 1], R = a[v], P = a[v + 1], C = 0; C < f; C++) {
                        var _ = u.length;
                        if (!this.clip(x, y, E, T, I, S, p[C], h)) {
                            var V = t.Utils.setArraySize(u, _ + 3 * d);
                            V[_] = x, V[_ + 1] = y, V[_ + 2] = o.r, V[_ + 3] = o.g, V[_ + 4] = o.b, V[_ + 5] = o.a, l ? (V[_ + 6] = M, V[_ + 7] = w, V[_ + 8] = s.r, V[_ + 9] = s.g, V[_ + 10] = s.b, V[_ + 11] = s.a, V[_ + 12] = E, V[_ + 13] = T, V[_ + 14] = o.r, V[_ + 15] = o.g, V[_ + 16] = o.b, V[_ + 17] = o.a, V[_ + 18] = b, V[_ + 19] = A, V[_ + 20] = s.r, V[_ + 21] = s.g, V[_ + 22] = s.b, V[_ + 23] = s.a, V[_ + 24] = I, V[_ + 25] = S, V[_ + 26] = o.r, V[_ + 27] = o.g, V[_ + 28] = o.b, V[_ + 29] = o.a, V[_ + 30] = R, V[_ + 31] = P, V[_ + 32] = s.r, V[_ + 33] = s.g, V[_ + 34] = s.b, V[_ + 35] = s.a) : (V[_ + 6] = M, V[_ + 7] = w, V[_ + 8] = E, V[_ + 9] = T, V[_ + 10] = o.r, V[_ + 11] = o.g, V[_ + 12] = o.b, V[_ + 13] = o.a, V[_ + 14] = b, V[_ + 15] = A, V[_ + 16] = I, V[_ + 17] = S, V[_ + 18] = o.r, V[_ + 19] = o.g, V[_ + 20] = o.b, V[_ + 21] = o.a, V[_ + 22] = R, V[_ + 23] = P), _ = c.length;
                            var k = t.Utils.setArraySize(c, _ + 3);
                            k[_] = m, k[_ + 1] = m + 1, k[_ + 2] = m + 2, m += 3;
                            continue t
                        }
                        var N = h.length;
                        if (0 != N) {
                            for (var D = T - S, X = I - E, U = x - I, O = S - y, Y = 1 / (D * U + X * (y - S)), F = N >> 1, L = this.clipOutput, V = t.Utils.setArraySize(u, _ + F * d), B = 0; B < N; B += 2) {
                                var W = L[B],
                                    q = L[B + 1];
                                V[_] = W, V[_ + 1] = q, V[_ + 2] = o.r, V[_ + 3] = o.g, V[_ + 4] = o.b, V[_ + 5] = o.a;
                                var j = W - I,
                                    G = q - S,
                                    z = (D * j + X * G) * Y,
                                    Z = (O * j + U * G) * Y,
                                    H = 1 - z - Z;
                                V[_ + 6] = M * z + b * Z + R * H, V[_ + 7] = w * z + A * Z + P * H, l && (V[_ + 8] = s.r, V[_ + 9] = s.g, V[_ + 10] = s.b, V[_ + 11] = s.a), _ += d
                            }
                            _ = c.length;
                            var k = t.Utils.setArraySize(c, _ + 3 * (F - 2));
                            F--;
                            for (var B = 1; B < F; B++) k[_] = m, k[_ + 1] = m + B, k[_ + 2] = m + B + 1, _ += 3;
                            m += F + 1
                        }
                    }
                }
            }, e.prototype.clip = function(t, e, n, r, i, a, o, s) {
                var l = s,
                    h = !1,
                    u = null;
                o.length % 4 >= 2 ? (u = s, s = this.scratch) : u = this.scratch, u.length = 0, u.push(t), u.push(e), u.push(n), u.push(r), u.push(i), u.push(a), u.push(t), u.push(e), s.length = 0;
                for (var c = o, p = o.length - 4, f = 0;; f += 2) {
                    for (var d = c[f], m = c[f + 1], g = c[f + 2], v = c[f + 3], x = d - g, y = m - v, M = u, w = u.length - 2, E = s.length, T = 0; T < w; T += 2) {
                        var b = M[T],
                            A = M[T + 1],
                            I = M[T + 2],
                            S = M[T + 3],
                            R = x * (S - v) - y * (I - g) > 0;
                        if (x * (A - v) - y * (b - g) > 0) {
                            if (R) {
                                s.push(I), s.push(S);
                                continue
                            }
                            var P = S - A,
                                C = I - b,
                                _ = (C * (m - A) - P * (d - b)) / (P * (g - d) - C * (v - m));
                            s.push(d + (g - d) * _), s.push(m + (v - m) * _)
                        } else if (R) {
                            var P = S - A,
                                C = I - b,
                                _ = (C * (m - A) - P * (d - b)) / (P * (g - d) - C * (v - m));
                            s.push(d + (g - d) * _), s.push(m + (v - m) * _), s.push(I), s.push(S)
                        }
                        h = !0
                    }
                    if (E == s.length) return l.length = 0, !0;
                    if (s.push(s[0]), s.push(s[1]), f == p) break;
                    var V = s;
                    s = u, s.length = 0, u = V
                }
                if (l != s) {
                    l.length = 0;
                    for (var f = 0, k = s.length - 2; f < k; f++) l[f] = s[f]
                } else l.length = l.length - 2;
                return h
            }, e.makeClockwise = function(t) {
                for (var e = t, n = t.length, r = e[n - 2] * e[1] - e[0] * e[n - 1], i = 0, a = 0, o = 0, s = 0, l = 0, h = n - 3; l < h; l += 2) i = e[l], a = e[l + 1], o = e[l + 2], s = e[l + 3], r += i * s - o * a;
                if (!(r < 0))
                    for (var l = 0, u = n - 2, h = n >> 1; l < h; l += 2) {
                        var c = e[l],
                            p = e[l + 1],
                            f = u - l;
                        e[l] = e[f], e[l + 1] = e[f + 1], e[f] = c, e[f + 1] = p
                    }
            }, e
        }();
        t.SkeletonClipping = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t() {
                this.bones = new Array, this.slots = new Array, this.skins = new Array, this.events = new Array, this.animations = new Array, this.ikConstraints = new Array, this.transformConstraints = new Array, this.pathConstraints = new Array, this.fps = 0
            }
            return t.prototype.findBone = function(t) {
                if (null == t) throw new Error("boneName cannot be null.");
                for (var e = this.bones, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.name == t) return i
                }
                return null
            }, t.prototype.findBoneIndex = function(t) {
                if (null == t) throw new Error("boneName cannot be null.");
                for (var e = this.bones, n = 0, r = e.length; n < r; n++)
                    if (e[n].name == t) return n;
                return -1
            }, t.prototype.findSlot = function(t) {
                if (null == t) throw new Error("slotName cannot be null.");
                for (var e = this.slots, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.name == t) return i
                }
                return null
            }, t.prototype.findSlotIndex = function(t) {
                if (null == t) throw new Error("slotName cannot be null.");
                for (var e = this.slots, n = 0, r = e.length; n < r; n++)
                    if (e[n].name == t) return n;
                return -1
            }, t.prototype.findSkin = function(t) {
                if (null == t) throw new Error("skinName cannot be null.");
                for (var e = this.skins, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.name == t) return i
                }
                return null
            }, t.prototype.findEvent = function(t) {
                if (null == t) throw new Error("eventDataName cannot be null.");
                for (var e = this.events, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.name == t) return i
                }
                return null
            }, t.prototype.findAnimation = function(t) {
                if (null == t) throw new Error("animationName cannot be null.");
                for (var e = this.animations, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.name == t) return i
                }
                return null
            }, t.prototype.findIkConstraint = function(t) {
                if (null == t) throw new Error("constraintName cannot be null.");
                for (var e = this.ikConstraints, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.name == t) return i
                }
                return null
            }, t.prototype.findTransformConstraint = function(t) {
                if (null == t) throw new Error("constraintName cannot be null.");
                for (var e = this.transformConstraints, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.name == t) return i
                }
                return null
            }, t.prototype.findPathConstraint = function(t) {
                if (null == t) throw new Error("constraintName cannot be null.");
                for (var e = this.pathConstraints, n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    if (i.name == t) return i
                }
                return null
            }, t.prototype.findPathConstraintIndex = function(t) {
                if (null == t) throw new Error("pathConstraintName cannot be null.");
                for (var e = this.pathConstraints, n = 0, r = e.length; n < r; n++)
                    if (e[n].name == t) return n;
                return -1
            }, t
        }();
        t.SkeletonData = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(t) {
                this.scale = 1, this.linkedMeshes = new Array, this.attachmentLoader = t
            }
            return e.prototype.readSkeletonData = function(n) {
                var r = this.scale,
                    i = new t.SkeletonData,
                    a = "string" == typeof n ? JSON.parse(n) : n,
                    o = a.skeleton;
                if (null != o && (i.hash = o.hash, i.version = o.spine, i.width = o.width, i.height = o.height, i.fps = o.fps, i.imagesPath = o.images), a.bones)
                    for (var s = 0; s < a.bones.length; s++) {
                        var l = a.bones[s],
                            h = null,
                            u = this.getValue(l, "parent", null);
                        if (null != u && null == (h = i.findBone(u))) throw new Error("Parent bone not found: " + u);
                        var c = new t.BoneData(i.bones.length, l.name, h);
                        c.length = this.getValue(l, "length", 0) * r, c.x = this.getValue(l, "x", 0) * r, c.y = this.getValue(l, "y", 0) * r, c.rotation = this.getValue(l, "rotation", 0), c.scaleX = this.getValue(l, "scaleX", 1), c.scaleY = this.getValue(l, "scaleY", 1), c.shearX = this.getValue(l, "shearX", 0), c.shearY = this.getValue(l, "shearY", 0), c.transformMode = e.transformModeFromString(this.getValue(l, "transform", "normal")), i.bones.push(c)
                    }
                if (a.slots)
                    for (var s = 0; s < a.slots.length; s++) {
                        var p = a.slots[s],
                            f = p.name,
                            d = p.bone,
                            m = i.findBone(d);
                        if (null == m) throw new Error("Slot bone not found: " + d);
                        var c = new t.SlotData(i.slots.length, f, m),
                            g = this.getValue(p, "color", null);
                        null != g && c.color.setFromString(g);
                        var v = this.getValue(p, "dark", null);
                        null != v && (c.darkColor = new t.Color(1, 1, 1, 1), c.darkColor.setFromString(v)), c.attachmentName = this.getValue(p, "attachment", null), c.blendMode = e.blendModeFromString(this.getValue(p, "blend", "normal")), i.slots.push(c)
                    }
                if (a.ik)
                    for (var s = 0; s < a.ik.length; s++) {
                        var x = a.ik[s],
                            c = new t.IkConstraintData(x.name);
                        c.order = this.getValue(x, "order", 0);
                        for (var y = 0; y < x.bones.length; y++) {
                            var d = x.bones[y],
                                M = i.findBone(d);
                            if (null == M) throw new Error("IK bone not found: " + d);
                            c.bones.push(M)
                        }
                        var w = x.target;
                        if (c.target = i.findBone(w), null == c.target) throw new Error("IK target bone not found: " + w);
                        c.bendDirection = this.getValue(x, "bendPositive", !0) ? 1 : -1, c.mix = this.getValue(x, "mix", 1), i.ikConstraints.push(c)
                    }
                if (a.transform)
                    for (var s = 0; s < a.transform.length; s++) {
                        var x = a.transform[s],
                            c = new t.TransformConstraintData(x.name);
                        c.order = this.getValue(x, "order", 0);
                        for (var y = 0; y < x.bones.length; y++) {
                            var d = x.bones[y],
                                M = i.findBone(d);
                            if (null == M) throw new Error("Transform constraint bone not found: " + d);
                            c.bones.push(M)
                        }
                        var w = x.target;
                        if (c.target = i.findBone(w), null == c.target) throw new Error("Transform constraint target bone not found: " + w);
                        c.local = this.getValue(x, "local", !1), c.relative = this.getValue(x, "relative", !1), c.offsetRotation = this.getValue(x, "rotation", 0), c.offsetX = this.getValue(x, "x", 0) * r, c.offsetY = this.getValue(x, "y", 0) * r, c.offsetScaleX = this.getValue(x, "scaleX", 0), c.offsetScaleY = this.getValue(x, "scaleY", 0), c.offsetShearY = this.getValue(x, "shearY", 0), c.rotateMix = this.getValue(x, "rotateMix", 1), c.translateMix = this.getValue(x, "translateMix", 1), c.scaleMix = this.getValue(x, "scaleMix", 1), c.shearMix = this.getValue(x, "shearMix", 1), i.transformConstraints.push(c)
                    }
                if (a.path)
                    for (var s = 0; s < a.path.length; s++) {
                        var x = a.path[s],
                            c = new t.PathConstraintData(x.name);
                        c.order = this.getValue(x, "order", 0);
                        for (var y = 0; y < x.bones.length; y++) {
                            var d = x.bones[y],
                                M = i.findBone(d);
                            if (null == M) throw new Error("Transform constraint bone not found: " + d);
                            c.bones.push(M)
                        }
                        var w = x.target;
                        if (c.target = i.findSlot(w), null == c.target) throw new Error("Path target slot not found: " + w);
                        c.positionMode = e.positionModeFromString(this.getValue(x, "positionMode", "percent")), c.spacingMode = e.spacingModeFromString(this.getValue(x, "spacingMode", "length")), c.rotateMode = e.rotateModeFromString(this.getValue(x, "rotateMode", "tangent")), c.offsetRotation = this.getValue(x, "rotation", 0), c.position = this.getValue(x, "position", 0), c.positionMode == t.PositionMode.Fixed && (c.position *= r), c.spacing = this.getValue(x, "spacing", 0), c.spacingMode != t.SpacingMode.Length && c.spacingMode != t.SpacingMode.Fixed || (c.spacing *= r), c.rotateMix = this.getValue(x, "rotateMix", 1), c.translateMix = this.getValue(x, "translateMix", 1), i.pathConstraints.push(c)
                    }
                if (a.skins)
                    for (var E in a.skins) {
                        var T = a.skins[E],
                            b = new t.Skin(E);
                        for (var f in T) {
                            var A = i.findSlotIndex(f);
                            if (-1 == A) throw new Error("Slot not found: " + f);
                            var p = T[f];
                            for (var I in p) {
                                var S = this.readAttachment(p[I], b, A, I, i);
                                null != S && b.addAttachment(A, I, S)
                            }
                        }
                        i.skins.push(b), "default" == b.name && (i.defaultSkin = b)
                    }
                for (var s = 0, R = this.linkedMeshes.length; s < R; s++) {
                    var P = this.linkedMeshes[s],
                        b = null == P.skin ? i.defaultSkin : i.findSkin(P.skin);
                    if (null == b) throw new Error("Skin not found: " + P.skin);
                    var C = b.getAttachment(P.slotIndex, P.parent);
                    if (null == C) throw new Error("Parent mesh not found: " + P.parent);
                    P.mesh.setParentMesh(C)
                }
                if (this.linkedMeshes.length = 0, a.events)
                    for (var _ in a.events) {
                        var V = a.events[_],
                            c = new t.EventData(_);
                        c.intValue = this.getValue(V, "int", 0), c.floatValue = this.getValue(V, "float", 0), c.stringValue = this.getValue(V, "string", ""), c.audio = this.getValue(V, "audio", null), i.events.push(c)
                    }
                if (a.animations)
                    for (var k in a.animations) {
                        var N = a.animations[k];
                        this.readAnimation(N, k, i)
                    }
                return i
            }, e.prototype.readAttachment = function(e, r, i, a, o) {
                var s = this.scale;
                switch (a = this.getValue(e, "name", a), this.getValue(e, "type", "region")) {
                    case "region":
                        var l = this.getValue(e, "path", a),
                            h = this.attachmentLoader.newRegionAttachment(r, a, l);
                        if (null == h) return null;
                        h.path = l, h.x = this.getValue(e, "x", 0) * s, h.y = this.getValue(e, "y", 0) * s, h.scaleX = this.getValue(e, "scaleX", 1), h.scaleY = this.getValue(e, "scaleY", 1), h.rotation = this.getValue(e, "rotation", 0), h.width = e.width * s, h.height = e.height * s;
                        var u = this.getValue(e, "color", null);
                        return null != u && h.color.setFromString(u), h;
                    case "boundingbox":
                        var c = this.attachmentLoader.newBoundingBoxAttachment(r, a);
                        if (null == c) return null;
                        this.readVertices(e, c, e.vertexCount << 1);
                        var u = this.getValue(e, "color", null);
                        return null != u && c.color.setFromString(u), c;
                    case "mesh":
                    case "linkedmesh":
                        var l = this.getValue(e, "path", a),
                            p = this.attachmentLoader.newMeshAttachment(r, a, l);
                        if (null == p) return null;
                        p.path = l;
                        var u = this.getValue(e, "color", null);
                        null != u && p.color.setFromString(u);
                        var f = this.getValue(e, "parent", null);
                        if (null != f) return p.inheritDeform = this.getValue(e, "deform", !0), this.linkedMeshes.push(new n(p, this.getValue(e, "skin", null), i, f)), p;
                        var d = e.uvs;
                        return this.readVertices(e, p, d.length), p.triangles = e.triangles, p.regionUVs = d, p.hullLength = 2 * this.getValue(e, "hull", 0), p;
                    case "path":
                        var l = this.attachmentLoader.newPathAttachment(r, a);
                        if (null == l) return null;
                        l.closed = this.getValue(e, "closed", !1), l.constantSpeed = this.getValue(e, "constantSpeed", !0);
                        var m = e.vertexCount;
                        this.readVertices(e, l, m << 1);
                        for (var g = t.Utils.newArray(m / 3, 0), v = 0; v < e.lengths.length; v++) g[v] = e.lengths[v] * s;
                        l.lengths = g;
                        var u = this.getValue(e, "color", null);
                        return null != u && l.color.setFromString(u), l;
                    case "point":
                        var x = this.attachmentLoader.newPointAttachment(r, a);
                        if (null == x) return null;
                        x.x = this.getValue(e, "x", 0) * s, x.y = this.getValue(e, "y", 0) * s, x.rotation = this.getValue(e, "rotation", 0);
                        var u = this.getValue(e, "color", null);
                        return null != u && x.color.setFromString(u), x;
                    case "clipping":
                        var y = this.attachmentLoader.newClippingAttachment(r, a);
                        if (null == y) return null;
                        var M = this.getValue(e, "end", null);
                        if (null != M) {
                            var w = o.findSlot(M);
                            if (null == w) throw new Error("Clipping end slot not found: " + M);
                            y.endSlot = w
                        }
                        var m = e.vertexCount;
                        this.readVertices(e, y, m << 1);
                        var u = this.getValue(e, "color", null);
                        return null != u && y.color.setFromString(u), y
                }
                return null
            }, e.prototype.readVertices = function(e, n, r) {
                var i = this.scale;
                n.worldVerticesLength = r;
                var a = e.vertices;
                if (r == a.length) {
                    var o = t.Utils.toFloatArray(a);
                    if (1 != i)
                        for (var s = 0, l = a.length; s < l; s++) o[s] *= i;
                    return void(n.vertices = o)
                }
                for (var h = new Array, u = new Array, s = 0, l = a.length; s < l;) {
                    var c = a[s++];
                    u.push(c);
                    for (var p = s + 4 * c; s < p; s += 4) u.push(a[s]), h.push(a[s + 1] * i), h.push(a[s + 2] * i), h.push(a[s + 3])
                }
                n.bones = u, n.vertices = t.Utils.toFloatArray(h)
            }, e.prototype.readAnimation = function(e, n, r) {
                var i = this.scale,
                    a = new Array,
                    o = 0;
                if (e.slots)
                    for (var s in e.slots) {
                        var l = e.slots[s],
                            h = r.findSlotIndex(s);
                        if (-1 == h) throw new Error("Slot not found: " + s);
                        for (var u in l) {
                            var c = l[u];
                            if ("attachment" == u) {
                                var p = new t.AttachmentTimeline(c.length);
                                p.slotIndex = h;
                                for (var f = 0, d = 0; d < c.length; d++) {
                                    var m = c[d];
                                    p.setFrame(f++, m.time, m.name)
                                }
                                a.push(p), o = Math.max(o, p.frames[p.getFrameCount() - 1])
                            } else if ("color" == u) {
                                var p = new t.ColorTimeline(c.length);
                                p.slotIndex = h;
                                for (var f = 0, d = 0; d < c.length; d++) {
                                    var m = c[d],
                                        g = new t.Color;
                                    g.setFromString(m.color || "ffffffff"), p.setFrame(f, m.time, g.r, g.g, g.b, g.a), this.readCurve(m, p, f), f++
                                }
                                a.push(p), o = Math.max(o, p.frames[(p.getFrameCount() - 1) * t.ColorTimeline.ENTRIES])
                            } else {
                                if ("twoColor" != u) throw new Error("Invalid timeline type for a slot: " + u + " (" + s + ")");
                                var p = new t.TwoColorTimeline(c.length);
                                p.slotIndex = h;
                                for (var f = 0, d = 0; d < c.length; d++) {
                                    var m = c[d],
                                        v = new t.Color,
                                        x = new t.Color;
                                    v.setFromString(m.light), x.setFromString(m.dark), p.setFrame(f, m.time, v.r, v.g, v.b, v.a, x.r, x.g, x.b), this.readCurve(m, p, f), f++
                                }
                                a.push(p), o = Math.max(o, p.frames[(p.getFrameCount() - 1) * t.TwoColorTimeline.ENTRIES])
                            }
                        }
                    }
                if (e.bones)
                    for (var y in e.bones) {
                        var M = e.bones[y],
                            w = r.findBoneIndex(y);
                        if (-1 == w) throw new Error("Bone not found: " + y);
                        for (var u in M) {
                            var c = M[u];
                            if ("rotate" === u) {
                                var p = new t.RotateTimeline(c.length);
                                p.boneIndex = w;
                                for (var f = 0, d = 0; d < c.length; d++) {
                                    var m = c[d];
                                    p.setFrame(f, m.time, m.angle), this.readCurve(m, p, f), f++
                                }
                                a.push(p), o = Math.max(o, p.frames[(p.getFrameCount() - 1) * t.RotateTimeline.ENTRIES])
                            } else {
                                if ("translate" !== u && "scale" !== u && "shear" !== u) throw new Error("Invalid timeline type for a bone: " + u + " (" + y + ")");
                                var p = null,
                                    E = 1;
                                "scale" === u ? p = new t.ScaleTimeline(c.length) : "shear" === u ? p = new t.ShearTimeline(c.length) : (p = new t.TranslateTimeline(c.length), E = i), p.boneIndex = w;
                                for (var f = 0, d = 0; d < c.length; d++) {
                                    var m = c[d],
                                        T = this.getValue(m, "x", 0),
                                        b = this.getValue(m, "y", 0);
                                    p.setFrame(f, m.time, T * E, b * E), this.readCurve(m, p, f), f++
                                }
                                a.push(p), o = Math.max(o, p.frames[(p.getFrameCount() - 1) * t.TranslateTimeline.ENTRIES])
                            }
                        }
                    }
                if (e.ik)
                    for (var A in e.ik) {
                        var I = e.ik[A],
                            S = r.findIkConstraint(A),
                            p = new t.IkConstraintTimeline(I.length);
                        p.ikConstraintIndex = r.ikConstraints.indexOf(S);
                        for (var f = 0, d = 0; d < I.length; d++) {
                            var m = I[d];
                            p.setFrame(f, m.time, this.getValue(m, "mix", 1), this.getValue(m, "bendPositive", !0) ? 1 : -1), this.readCurve(m, p, f), f++
                        }
                        a.push(p), o = Math.max(o, p.frames[(p.getFrameCount() - 1) * t.IkConstraintTimeline.ENTRIES])
                    }
                if (e.transform)
                    for (var A in e.transform) {
                        var I = e.transform[A],
                            S = r.findTransformConstraint(A),
                            p = new t.TransformConstraintTimeline(I.length);
                        p.transformConstraintIndex = r.transformConstraints.indexOf(S);
                        for (var f = 0, d = 0; d < I.length; d++) {
                            var m = I[d];
                            p.setFrame(f, m.time, this.getValue(m, "rotateMix", 1), this.getValue(m, "translateMix", 1), this.getValue(m, "scaleMix", 1), this.getValue(m, "shearMix", 1)), this.readCurve(m, p, f), f++
                        }
                        a.push(p), o = Math.max(o, p.frames[(p.getFrameCount() - 1) * t.TransformConstraintTimeline.ENTRIES])
                    }
                if (e.paths)
                    for (var A in e.paths) {
                        var I = e.paths[A],
                            R = r.findPathConstraintIndex(A);
                        if (-1 == R) throw new Error("Path constraint not found: " + A);
                        var P = r.pathConstraints[R];
                        for (var u in I) {
                            var c = I[u];
                            if ("position" === u || "spacing" === u) {
                                var p = null,
                                    E = 1;
                                "spacing" === u ? (p = new t.PathConstraintSpacingTimeline(c.length), P.spacingMode != t.SpacingMode.Length && P.spacingMode != t.SpacingMode.Fixed || (E = i)) : (p = new t.PathConstraintPositionTimeline(c.length), P.positionMode == t.PositionMode.Fixed && (E = i)), p.pathConstraintIndex = R;
                                for (var f = 0, d = 0; d < c.length; d++) {
                                    var m = c[d];
                                    p.setFrame(f, m.time, this.getValue(m, u, 0) * E), this.readCurve(m, p, f), f++
                                }
                                a.push(p), o = Math.max(o, p.frames[(p.getFrameCount() - 1) * t.PathConstraintPositionTimeline.ENTRIES])
                            } else if ("mix" === u) {
                                var p = new t.PathConstraintMixTimeline(c.length);
                                p.pathConstraintIndex = R;
                                for (var f = 0, d = 0; d < c.length; d++) {
                                    var m = c[d];
                                    p.setFrame(f, m.time, this.getValue(m, "rotateMix", 1), this.getValue(m, "translateMix", 1)), this.readCurve(m, p, f), f++
                                }
                                a.push(p), o = Math.max(o, p.frames[(p.getFrameCount() - 1) * t.PathConstraintMixTimeline.ENTRIES])
                            }
                        }
                    }
                if (e.deform)
                    for (var C in e.deform) {
                        var _ = e.deform[C],
                            V = r.findSkin(C);
                        if (null == V) throw new Error("Skin not found: " + C);
                        for (var s in _) {
                            var l = _[s],
                                h = r.findSlotIndex(s);
                            if (-1 == h) throw new Error("Slot not found: " + l.name);
                            for (var u in l) {
                                var c = l[u],
                                    k = V.getAttachment(h, u);
                                if (null == k) throw new Error("Deform attachment not found: " + c.name);
                                var N = null != k.bones,
                                    D = k.vertices,
                                    X = N ? D.length / 3 * 2 : D.length,
                                    p = new t.DeformTimeline(c.length);
                                p.slotIndex = h, p.attachment = k;
                                for (var f = 0, U = 0; U < c.length; U++) {
                                    var m = c[U],
                                        O = void 0,
                                        Y = this.getValue(m, "vertices", null);
                                    if (null == Y) O = N ? t.Utils.newFloatArray(X) : D;
                                    else {
                                        O = t.Utils.newFloatArray(X);
                                        var F = this.getValue(m, "offset", 0);
                                        if (t.Utils.arrayCopy(Y, 0, O, F, Y.length), 1 != i)
                                            for (var d = F, L = d + Y.length; d < L; d++) O[d] *= i;
                                        if (!N)
                                            for (var d = 0; d < X; d++) O[d] += D[d]
                                    }
                                    p.setFrame(f, m.time, O), this.readCurve(m, p, f), f++
                                }
                                a.push(p), o = Math.max(o, p.frames[p.getFrameCount() - 1])
                            }
                        }
                    }
                var B = e.drawOrder;
                if (null == B && (B = e.draworder), null != B) {
                    for (var p = new t.DrawOrderTimeline(B.length), W = r.slots.length, f = 0, U = 0; U < B.length; U++) {
                        var q = B[U],
                            j = null,
                            G = this.getValue(q, "offsets", null);
                        if (null != G) {
                            j = t.Utils.newArray(W, -1);
                            for (var z = t.Utils.newArray(W - G.length, 0), Z = 0, H = 0, d = 0; d < G.length; d++) {
                                var J = G[d],
                                    h = r.findSlotIndex(J.slot);
                                if (-1 == h) throw new Error("Slot not found: " + J.slot);
                                for (; Z != h;) z[H++] = Z++;
                                j[Z + J.offset] = Z++
                            }
                            for (; Z < W;) z[H++] = Z++;
                            for (var d = W - 1; d >= 0; d--) - 1 == j[d] && (j[d] = z[--H])
                        }
                        p.setFrame(f++, q.time, j)
                    }
                    a.push(p), o = Math.max(o, p.frames[p.getFrameCount() - 1])
                }
                if (e.events) {
                    for (var p = new t.EventTimeline(e.events.length), f = 0, d = 0; d < e.events.length; d++) {
                        var Q = e.events[d],
                            K = r.findEvent(Q.name);
                        if (null == K) throw new Error("Event not found: " + Q.name);
                        var $ = new t.Event(t.Utils.toSinglePrecision(Q.time), K);
                        $.intValue = this.getValue(Q, "int", K.intValue), $.floatValue = this.getValue(Q, "float", K.floatValue), $.stringValue = this.getValue(Q, "string", K.stringValue), p.setFrame(f++, $)
                    }
                    a.push(p), o = Math.max(o, p.frames[p.getFrameCount() - 1])
                }
                if (isNaN(o)) throw new Error("Error while parsing animation, duration is NaN");
                r.animations.push(new t.Animation(n, a, o))
            }, e.prototype.readCurve = function(t, e, n) {
                if (t.curve)
                    if ("stepped" === t.curve) e.setStepped(n);
                    else if ("[object Array]" === Object.prototype.toString.call(t.curve)) {
                    var r = t.curve;
                    e.setCurve(n, r[0], r[1], r[2], r[3])
                }
            }, e.prototype.getValue = function(t, e, n) {
                return void 0 !== t[e] ? t[e] : n
            }, e.blendModeFromString = function(e) {
                if ("normal" == (e = e.toLowerCase())) return t.BlendMode.Normal;
                if ("additive" == e) return t.BlendMode.Additive;
                if ("multiply" == e) return t.BlendMode.Multiply;
                if ("screen" == e) return t.BlendMode.Screen;
                throw new Error("Unknown blend mode: " + e)
            }, e.positionModeFromString = function(e) {
                if ("fixed" == (e = e.toLowerCase())) return t.PositionMode.Fixed;
                if ("percent" == e) return t.PositionMode.Percent;
                throw new Error("Unknown position mode: " + e)
            }, e.spacingModeFromString = function(e) {
                if ("length" == (e = e.toLowerCase())) return t.SpacingMode.Length;
                if ("fixed" == e) return t.SpacingMode.Fixed;
                if ("percent" == e) return t.SpacingMode.Percent;
                throw new Error("Unknown position mode: " + e)
            }, e.rotateModeFromString = function(e) {
                if ("tangent" == (e = e.toLowerCase())) return t.RotateMode.Tangent;
                if ("chain" == e) return t.RotateMode.Chain;
                if ("chainscale" == e) return t.RotateMode.ChainScale;
                throw new Error("Unknown rotate mode: " + e)
            }, e.transformModeFromString = function(e) {
                if ("normal" == (e = e.toLowerCase())) return t.TransformMode.Normal;
                if ("onlytranslation" == e) return t.TransformMode.OnlyTranslation;
                if ("norotationorreflection" == e) return t.TransformMode.NoRotationOrReflection;
                if ("noscale" == e) return t.TransformMode.NoScale;
                if ("noscaleorreflection" == e) return t.TransformMode.NoScaleOrReflection;
                throw new Error("Unknown transform mode: " + e)
            }, e
        }();
        t.SkeletonJson = e;
        var n = function() {
            function t(t, e, n, r) {
                this.mesh = t, this.skin = e, this.slotIndex = n, this.parent = r
            }
            return t
        }()
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t(t) {
                if (this.attachments = new Array, null == t) throw new Error("name cannot be null.");
                this.name = t
            }
            return t.prototype.addAttachment = function(t, e, n) {
                if (null == n) throw new Error("attachment cannot be null.");
                var r = this.attachments;
                t >= r.length && (r.length = t + 1), r[t] || (r[t] = {}), r[t][e] = n
            }, t.prototype.getAttachment = function(t, e) {
                var n = this.attachments[t];
                return n ? n[e] : null
            }, t.prototype.attachAll = function(t, e) {
                for (var n = 0, r = 0; r < t.slots.length; r++) {
                    var i = t.slots[r],
                        a = i.getAttachment();
                    if (a && n < e.attachments.length) {
                        var o = e.attachments[n];
                        for (var s in o) {
                            if (a == o[s]) {
                                var l = this.getAttachment(n, name);
                                null != l && i.setAttachment(l);
                                break
                            }
                        }
                    }
                    n++
                }
            }, t
        }();
        t.Skin = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(e, n) {
                if (this.attachmentVertices = new Array, null == e) throw new Error("data cannot be null.");
                if (null == n) throw new Error("bone cannot be null.");
                this.data = e, this.bone = n, this.color = new t.Color, this.darkColor = null == e.darkColor ? null : new t.Color, this.setToSetupPose(), this.blendMode = this.data.blendMode
            }
            return e.prototype.getAttachment = function() {
                return this.attachment
            }, e.prototype.setAttachment = function(t) {
                this.attachment != t && (this.attachment = t, this.attachmentTime = this.bone.skeleton.time, this.attachmentVertices.length = 0)
            }, e.prototype.setAttachmentTime = function(t) {
                this.attachmentTime = this.bone.skeleton.time - t
            }, e.prototype.getAttachmentTime = function() {
                return this.bone.skeleton.time - this.attachmentTime
            }, e.prototype.setToSetupPose = function() {
                this.color.setFromColor(this.data.color), null != this.darkColor && this.darkColor.setFromColor(this.data.darkColor), null == this.data.attachmentName ? this.attachment = null : (this.attachment = null, this.setAttachment(this.bone.skeleton.getAttachment(this.data.index, this.data.attachmentName)))
            }, e
        }();
        t.Slot = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(e, n, r) {
                if (this.color = new t.Color(1, 1, 1, 1), e < 0) throw new Error("index must be >= 0.");
                if (null == n) throw new Error("name cannot be null.");
                if (null == r) throw new Error("boneData cannot be null.");
                this.index = e, this.name = n, this.boneData = r
            }
            return e
        }();
        t.SlotData = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t(t) {
                this._image = t
            }
            return t.prototype.getImage = function() {
                return this._image
            }, t.filterFromString = function(t) {
                switch (t.toLowerCase()) {
                    case "nearest":
                        return n.Nearest;
                    case "linear":
                        return n.Linear;
                    case "mipmap":
                        return n.MipMap;
                    case "mipmapnearestnearest":
                        return n.MipMapNearestNearest;
                    case "mipmaplinearnearest":
                        return n.MipMapLinearNearest;
                    case "mipmapnearestlinear":
                        return n.MipMapNearestLinear;
                    case "mipmaplinearlinear":
                        return n.MipMapLinearLinear;
                    default:
                        throw new Error("Unknown texture filter " + t)
                }
            }, t.wrapFromString = function(t) {
                switch (t.toLowerCase()) {
                    case "mirroredtepeat":
                        return r.MirroredRepeat;
                    case "clamptoedge":
                        return r.ClampToEdge;
                    case "repeat":
                        return r.Repeat;
                    default:
                        throw new Error("Unknown texture wrap " + t)
                }
            }, t
        }();
        t.Texture = e;
        var n;
        ! function(t) {
            t[t.Nearest = 9728] = "Nearest", t[t.Linear = 9729] = "Linear", t[t.MipMap = 9987] = "MipMap", t[t.MipMapNearestNearest = 9984] = "MipMapNearestNearest", t[t.MipMapLinearNearest = 9985] = "MipMapLinearNearest", t[t.MipMapNearestLinear = 9986] = "MipMapNearestLinear", t[t.MipMapLinearLinear = 9987] = "MipMapLinearLinear"
        }(n = t.TextureFilter || (t.TextureFilter = {}));
        var r;
        ! function(t) {
            t[t.MirroredRepeat = 33648] = "MirroredRepeat", t[t.ClampToEdge = 33071] = "ClampToEdge", t[t.Repeat = 10497] = "Repeat"
        }(r = t.TextureWrap || (t.TextureWrap = {}));
        var i = function() {
            function t() {
                this.size = null
            }
            return Object.defineProperty(t.prototype, "width", {
                get: function() {
                    var t = this.texture;
                    return "3" == PIXI.VERSION[0] ? t.crop.width : t.trim ? t.trim.width : t.orig.width
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "height", {
                get: function() {
                    var t = this.texture;
                    return "3" == PIXI.VERSION[0] ? t.crop.height : t.trim ? t.trim.height : t.orig.height
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "u", {
                get: function() {
                    return this.texture._uvs.x0
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "v", {
                get: function() {
                    return this.texture._uvs.y0
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "u2", {
                get: function() {
                    return this.texture._uvs.x2
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "v2", {
                get: function() {
                    return this.texture._uvs.y2
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "offsetX", {
                get: function() {
                    var t = this.texture;
                    return t.trim ? t.trim.x : 0
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "offsetY", {
                get: function() {
                    return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."), this.spineOffsetY
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "pixiOffsetY", {
                get: function() {
                    var t = this.texture;
                    return t.trim ? t.trim.y : 0
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "spineOffsetY", {
                get: function() {
                    var t = this.texture;
                    return this.originalHeight - this.height - (t.trim ? t.trim.y : 0)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "originalWidth", {
                get: function() {
                    var t = this.texture;
                    return "3" == PIXI.VERSION[0] ? t.trim ? t.trim.width : t.crop.width : t.orig.width
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "originalHeight", {
                get: function() {
                    var t = this.texture;
                    return "3" == PIXI.VERSION[0] ? t.trim ? t.trim.height : t.crop.height : t.orig.height
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "x", {
                get: function() {
                    return this.texture.frame.x
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "y", {
                get: function() {
                    return this.texture.frame.y
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "rotate", {
                get: function() {
                    return 0 !== this.texture.rotate
                },
                enumerable: !0,
                configurable: !0
            }), t
        }();
        t.TextureRegion = i
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(t, e, n) {
                this.pages = new Array, this.regions = new Array, t && this.addSpineAtlas(t, e, n)
            }
            return e.prototype.addTexture = function(e, n) {
                for (var a = this.pages, o = null, s = 0; s < a.length; s++)
                    if (a[s].baseTexture === n.baseTexture) {
                        o = a[s];
                        break
                    } if (null === o) {
                    o = new r, o.name = "texturePage";
                    var l = n.baseTexture;
                    o.width = l.realWidth, o.height = l.realHeight, o.baseTexture = l, o.minFilter = o.magFilter = t.TextureFilter.Nearest, o.uWrap = t.TextureWrap.ClampToEdge, o.vWrap = t.TextureWrap.ClampToEdge, a.push(o)
                }
                var h = new i;
                return h.name = e, h.page = o, h.texture = n, h.index = -1, this.regions.push(h), h
            }, e.prototype.addTextureHash = function(t, e) {
                for (var n in t) t.hasOwnProperty(n) && this.addTexture(e && -1 !== n.indexOf(".") ? n.substr(0, n.lastIndexOf(".")) : n, t[n])
            }, e.prototype.addSpineAtlas = function(t, e, n) {
                return this.load(t, e, n)
            }, e.prototype.load = function(e, a, o) {
                var s = this;
                if (null == a) throw new Error("textureLoader cannot be null.");
                var l = new n(e),
                    h = new Array(4),
                    u = null,
                    c = function() {
                        for (;;) {
                            var e = l.readLine();
                            if (null == e) return o && o(s);
                            if (e = e.trim(), 0 == e.length) u = null;
                            else {
                                if (!u) {
                                    u = new r, u.name = e, 2 == l.readTuple(h) && (u.width = parseInt(h[0]), u.height = parseInt(h[1]), l.readTuple(h)), l.readTuple(h), u.minFilter = t.Texture.filterFromString(h[0]), u.magFilter = t.Texture.filterFromString(h[1]);
                                    var n = l.readValue();
                                    u.uWrap = t.TextureWrap.ClampToEdge, u.vWrap = t.TextureWrap.ClampToEdge, "x" == n ? u.uWrap = t.TextureWrap.Repeat : "y" == n ? u.vWrap = t.TextureWrap.Repeat : "xy" == n && (u.uWrap = u.vWrap = t.TextureWrap.Repeat), a(e, function(t) {
                                        u.baseTexture = t, t.hasLoaded || (t.width = u.width, t.height = u.height), s.pages.push(u), u.setFilters(), u.width && u.height || (u.width = t.realWidth, u.height = t.realHeight,
                                            u.width && u.height || console.log("ERROR spine atlas page " + u.name + ": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")), c()
                                    }), s.pages.push(u);
                                    break
                                }
                                var p = new i;
                                p.name = e, p.page = u;
                                var f = "true" == l.readValue() ? 6 : 0;
                                l.readTuple(h);
                                var d = parseInt(h[0]),
                                    m = parseInt(h[1]);
                                l.readTuple(h);
                                var g = parseInt(h[0]),
                                    v = parseInt(h[1]),
                                    x = u.baseTexture.resolution;
                                d /= x, m /= x, g /= x, v /= x;
                                var y = new PIXI.Rectangle(d, m, f ? v : g, f ? g : v);
                                4 == l.readTuple(h) && 4 == l.readTuple(h) && l.readTuple(h);
                                var M = parseInt(h[0]) / x,
                                    w = parseInt(h[1]) / x;
                                l.readTuple(h);
                                var E = parseInt(h[0]) / x,
                                    T = parseInt(h[1]) / x,
                                    b = new PIXI.Rectangle(0, 0, M, w),
                                    A = new PIXI.Rectangle(E, w - v - T, g, v);
                                if ("3" != PIXI.VERSION[0]) p.texture = new PIXI.Texture(p.page.baseTexture, y, b, A, f);
                                else {
                                    var I = new PIXI.Rectangle(d, m, g, v),
                                        S = I.clone();
                                    A.width = M, A.height = w, p.texture = new PIXI.Texture(p.page.baseTexture, I, S, A, f)
                                }
                                p.index = parseInt(l.readValue()), p.texture._updateUvs(), s.regions.push(p)
                            }
                        }
                    };
                c()
            }, e.prototype.findRegion = function(t) {
                for (var e = 0; e < this.regions.length; e++)
                    if (this.regions[e].name == t) return this.regions[e];
                return null
            }, e.prototype.dispose = function() {
                for (var t = 0; t < this.pages.length; t++) this.pages[t].baseTexture.dispose()
            }, e
        }();
        t.TextureAtlas = e;
        var n = function() {
                function t(t) {
                    this.index = 0, this.lines = t.split(/\r\n|\r|\n/)
                }
                return t.prototype.readLine = function() {
                    return this.index >= this.lines.length ? null : this.lines[this.index++]
                }, t.prototype.readValue = function() {
                    var t = this.readLine(),
                        e = t.indexOf(":");
                    if (-1 == e) throw new Error("Invalid line: " + t);
                    return t.substring(e + 1).trim()
                }, t.prototype.readTuple = function(t) {
                    var e = this.readLine(),
                        n = e.indexOf(":");
                    if (-1 == n) throw new Error("Invalid line: " + e);
                    for (var r = 0, i = n + 1; r < 3; r++) {
                        var a = e.indexOf(",", i);
                        if (-1 == a) break;
                        t[r] = e.substr(i, a - i).trim(), i = a + 1
                    }
                    return t[r] = e.substring(i).trim(), r + 1
                }, t
            }(),
            r = function() {
                function e() {}
                return e.prototype.setFilters = function() {
                    var e = this.baseTexture,
                        n = this.minFilter;
                    n == t.TextureFilter.Linear ? e.scaleMode = PIXI.SCALE_MODES.LINEAR : this.minFilter == t.TextureFilter.Nearest ? e.scaleMode = PIXI.SCALE_MODES.NEAREST : (e.mipmap = !0, n == t.TextureFilter.MipMapNearestNearest ? e.scaleMode = PIXI.SCALE_MODES.NEAREST : e.scaleMode = PIXI.SCALE_MODES.LINEAR)
                }, e
            }();
        t.TextureAtlasPage = r;
        var i = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return __extends(e, t), e
        }(t.TextureRegion);
        t.TextureAtlasRegion = i
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(e, n) {
                if (this.rotateMix = 0, this.translateMix = 0, this.scaleMix = 0, this.shearMix = 0, this.temp = new t.Vector2, null == e) throw new Error("data cannot be null.");
                if (null == n) throw new Error("skeleton cannot be null.");
                this.data = e, this.rotateMix = e.rotateMix, this.translateMix = e.translateMix, this.scaleMix = e.scaleMix, this.shearMix = e.shearMix, this.bones = new Array;
                for (var r = 0; r < e.bones.length; r++) this.bones.push(n.findBone(e.bones[r].name));
                this.target = n.findBone(e.target.name)
            }
            return e.prototype.apply = function() {
                this.update()
            }, e.prototype.update = function() {
                this.data.local ? this.data.relative ? this.applyRelativeLocal() : this.applyAbsoluteLocal() : this.data.relative ? this.applyRelativeWorld() : this.applyAbsoluteWorld()
            }, e.prototype.applyAbsoluteWorld = function() {
                for (var e = this.rotateMix, n = this.translateMix, r = this.scaleMix, i = this.shearMix, a = this.target, o = a.matrix, s = o.a, l = o.c, h = o.b, u = o.d, c = s * u - l * h > 0 ? t.MathUtils.degRad : -t.MathUtils.degRad, p = this.data.offsetRotation * c, f = this.data.offsetShearY * c, d = this.bones, m = 0, g = d.length; m < g; m++) {
                    var v = d[m],
                        x = !1,
                        y = v.matrix;
                    if (0 != e) {
                        var M = y.a,
                            w = y.c,
                            E = y.b,
                            T = y.d,
                            b = Math.atan2(h, s) - Math.atan2(E, M) + p;
                        b > t.MathUtils.PI ? b -= t.MathUtils.PI2 : b < -t.MathUtils.PI && (b += t.MathUtils.PI2), b *= e;
                        var A = Math.cos(b),
                            I = Math.sin(b);
                        y.a = A * M - I * E, y.c = A * w - I * T, y.b = I * M + A * E, y.d = I * w + A * T, x = !0
                    }
                    if (0 != n) {
                        var S = this.temp;
                        a.localToWorld(S.set(this.data.offsetX, this.data.offsetY)), y.tx += (S.x - y.tx) * n, y.ty += (S.y - y.ty) * n, x = !0
                    }
                    if (r > 0) {
                        var R = Math.sqrt(y.a * y.a + y.b * y.b),
                            P = Math.sqrt(s * s + h * h);
                        R > 1e-5 && (R = (R + (P - R + this.data.offsetScaleX) * r) / R), y.a *= R, y.b *= R, R = Math.sqrt(y.c * y.c + y.d * y.d), P = Math.sqrt(l * l + u * u), R > 1e-5 && (R = (R + (P - R + this.data.offsetScaleY) * r) / R), y.c *= R, y.d *= R, x = !0
                    }
                    if (i > 0) {
                        var w = y.c,
                            T = y.d,
                            C = Math.atan2(T, w),
                            b = Math.atan2(u, l) - Math.atan2(h, s) - (C - Math.atan2(y.b, y.a));
                        b > t.MathUtils.PI ? b -= t.MathUtils.PI2 : b < -t.MathUtils.PI && (b += t.MathUtils.PI2), b = C + (b + f) * i;
                        var R = Math.sqrt(w * w + T * T);
                        y.c = Math.cos(b) * R, y.d = Math.sin(b) * R, x = !0
                    }
                    x && (v.appliedValid = !1)
                }
            }, e.prototype.applyRelativeWorld = function() {
                for (var e = this.rotateMix, n = this.translateMix, r = this.scaleMix, i = this.shearMix, a = this.target, o = a.matrix, s = o.a, l = o.c, h = o.b, u = o.d, c = s * u - l * h > 0 ? t.MathUtils.degRad : -t.MathUtils.degRad, p = this.data.offsetRotation * c, f = this.data.offsetShearY * c, d = this.bones, m = 0, g = d.length; m < g; m++) {
                    var v = d[m],
                        x = !1,
                        y = v.matrix;
                    if (0 != e) {
                        var M = y.a,
                            w = y.c,
                            E = y.b,
                            T = y.d,
                            b = Math.atan2(h, s) + p;
                        b > t.MathUtils.PI ? b -= t.MathUtils.PI2 : b < -t.MathUtils.PI && (b += t.MathUtils.PI2), b *= e;
                        var A = Math.cos(b),
                            I = Math.sin(b);
                        y.a = A * M - I * E, y.c = A * w - I * T, y.b = I * M + A * E, y.d = I * w + A * T, x = !0
                    }
                    if (0 != n) {
                        var S = this.temp;
                        a.localToWorld(S.set(this.data.offsetX, this.data.offsetY)), y.tx += S.x * n, y.ty += S.y * n, x = !0
                    }
                    if (r > 0) {
                        var R = (Math.sqrt(s * s + h * h) - 1 + this.data.offsetScaleX) * r + 1;
                        y.a *= R, y.b *= R, R = (Math.sqrt(l * l + u * u) - 1 + this.data.offsetScaleY) * r + 1, y.c *= R, y.d *= R, x = !0
                    }
                    if (i > 0) {
                        var b = Math.atan2(u, l) - Math.atan2(h, s);
                        b > t.MathUtils.PI ? b -= t.MathUtils.PI2 : b < -t.MathUtils.PI && (b += t.MathUtils.PI2);
                        var w = y.c,
                            T = y.d;
                        b = Math.atan2(T, w) + (b - t.MathUtils.PI / 2 + f) * i;
                        var R = Math.sqrt(w * w + T * T);
                        y.c = Math.cos(b) * R, y.d = Math.sin(b) * R, x = !0
                    }
                    x && (v.appliedValid = !1)
                }
            }, e.prototype.applyAbsoluteLocal = function() {
                var t = this.rotateMix,
                    e = this.translateMix,
                    n = this.scaleMix,
                    r = this.shearMix,
                    i = this.target;
                i.appliedValid || i.updateAppliedTransform();
                for (var a = this.bones, o = 0, s = a.length; o < s; o++) {
                    var l = a[o];
                    l.appliedValid || l.updateAppliedTransform();
                    var h = l.arotation;
                    if (0 != t) {
                        var u = i.arotation - h + this.data.offsetRotation;
                        u -= 360 * (16384 - (16384.499999999996 - u / 360 | 0)), h += u * t
                    }
                    var c = l.ax,
                        p = l.ay;
                    0 != e && (c += (i.ax - c + this.data.offsetX) * e, p += (i.ay - p + this.data.offsetY) * e);
                    var f = l.ascaleX,
                        d = l.ascaleY;
                    n > 0 && (f > 1e-5 && (f = (f + (i.ascaleX - f + this.data.offsetScaleX) * n) / f), d > 1e-5 && (d = (d + (i.ascaleY - d + this.data.offsetScaleY) * n) / d));
                    var m = l.ashearY;
                    if (r > 0) {
                        var u = i.ashearY - m + this.data.offsetShearY;
                        u -= 360 * (16384 - (16384.499999999996 - u / 360 | 0)), l.shearY += u * r
                    }
                    l.updateWorldTransformWith(c, p, h, f, d, l.ashearX, m)
                }
            }, e.prototype.applyRelativeLocal = function() {
                var t = this.rotateMix,
                    e = this.translateMix,
                    n = this.scaleMix,
                    r = this.shearMix,
                    i = this.target;
                i.appliedValid || i.updateAppliedTransform();
                for (var a = this.bones, o = 0, s = a.length; o < s; o++) {
                    var l = a[o];
                    l.appliedValid || l.updateAppliedTransform();
                    var h = l.arotation;
                    0 != t && (h += (i.arotation + this.data.offsetRotation) * t);
                    var u = l.ax,
                        c = l.ay;
                    0 != e && (u += (i.ax + this.data.offsetX) * e, c += (i.ay + this.data.offsetY) * e);
                    var p = l.ascaleX,
                        f = l.ascaleY;
                    n > 0 && (p > 1e-5 && (p *= (i.ascaleX - 1 + this.data.offsetScaleX) * n + 1), f > 1e-5 && (f *= (i.ascaleY - 1 + this.data.offsetScaleY) * n + 1));
                    var d = l.ashearY;
                    r > 0 && (d += (i.ashearY + this.data.offsetShearY) * r), l.updateWorldTransformWith(u, c, h, p, f, l.ashearX, d)
                }
            }, e.prototype.getOrder = function() {
                return this.data.order
            }, e
        }();
        t.TransformConstraint = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t(t) {
                if (this.order = 0, this.bones = new Array, this.rotateMix = 0, this.translateMix = 0, this.scaleMix = 0, this.shearMix = 0, this.offsetRotation = 0, this.offsetX = 0, this.offsetY = 0, this.offsetScaleX = 0, this.offsetScaleY = 0, this.offsetShearY = 0, this.relative = !1, this.local = !1, null == t) throw new Error("name cannot be null.");
                this.name = t
            }
            return t
        }();
        t.TransformConstraintData = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e() {
                this.convexPolygons = new Array, this.convexPolygonsIndices = new Array, this.indicesArray = new Array, this.isConcaveArray = new Array, this.triangles = new Array, this.polygonPool = new t.Pool(function() {
                    return new Array
                }), this.polygonIndicesPool = new t.Pool(function() {
                    return new Array
                })
            }
            return e.prototype.triangulate = function(t) {
                var n = t,
                    r = t.length >> 1,
                    i = this.indicesArray;
                i.length = 0;
                for (var a = 0; a < r; a++) i[a] = a;
                var o = this.isConcaveArray;
                o.length = 0;
                for (var a = 0, s = r; a < s; ++a) o[a] = e.isConcave(a, r, n, i);
                var l = this.triangles;
                for (l.length = 0; r > 3;) {
                    for (var h = r - 1, a = 0, u = 1;;) {
                        t: if (!o[a]) {
                            for (var c = i[h] << 1, p = i[a] << 1, f = i[u] << 1, d = n[c], m = n[c + 1], g = n[p], v = n[p + 1], x = n[f], y = n[f + 1], M = (u + 1) % r; M != h; M = (M + 1) % r)
                                if (o[M]) {
                                    var w = i[M] << 1,
                                        E = n[w],
                                        T = n[w + 1];
                                    if (e.positiveArea(x, y, d, m, E, T) && e.positiveArea(d, m, g, v, E, T) && e.positiveArea(g, v, x, y, E, T)) break t
                                } break
                        }if (0 == u) {
                            do {
                                if (!o[a]) break;
                                a--
                            } while (a > 0);
                            break
                        }
                        h = a,
                        a = u,
                        u = (u + 1) % r
                    }
                    l.push(i[(r + a - 1) % r]), l.push(i[a]), l.push(i[(a + 1) % r]), i.splice(a, 1), o.splice(a, 1), r--;
                    var b = (r + a - 1) % r,
                        A = a == r ? 0 : a;
                    o[b] = e.isConcave(b, r, n, i), o[A] = e.isConcave(A, r, n, i)
                }
                return 3 == r && (l.push(i[2]), l.push(i[0]), l.push(i[1])), l
            }, e.prototype.decompose = function(t, n) {
                var r = t,
                    i = this.convexPolygons;
                this.polygonPool.freeAll(i), i.length = 0;
                var a = this.convexPolygonsIndices;
                this.polygonIndicesPool.freeAll(a), a.length = 0;
                var o = this.polygonIndicesPool.obtain();
                o.length = 0;
                var s = this.polygonPool.obtain();
                s.length = 0;
                for (var l = -1, h = 0, u = 0, c = n.length; u < c; u += 3) {
                    var p = n[u] << 1,
                        f = n[u + 1] << 1,
                        d = n[u + 2] << 1,
                        m = r[p],
                        g = r[p + 1],
                        v = r[f],
                        x = r[f + 1],
                        y = r[d],
                        M = r[d + 1],
                        w = !1;
                    if (l == p) {
                        var E = s.length - 4,
                            T = e.winding(s[E], s[E + 1], s[E + 2], s[E + 3], y, M),
                            b = e.winding(y, M, s[0], s[1], s[2], s[3]);
                        T == h && b == h && (s.push(y), s.push(M), o.push(d), w = !0)
                    }
                    w || (s.length > 0 ? (i.push(s), a.push(o)) : (this.polygonPool.free(s), this.polygonIndicesPool.free(o)), s = this.polygonPool.obtain(), s.length = 0, s.push(m), s.push(g), s.push(v), s.push(x), s.push(y), s.push(M), o = this.polygonIndicesPool.obtain(), o.length = 0, o.push(p), o.push(f), o.push(d), h = e.winding(m, g, v, x, y, M), l = p)
                }
                s.length > 0 && (i.push(s), a.push(o));
                for (var u = 0, c = i.length; u < c; u++)
                    if (o = a[u], 0 != o.length) {
                        var A = o[0],
                            I = o[o.length - 1];
                        s = i[u];
                        for (var E = s.length - 4, S = s[E], R = s[E + 1], P = s[E + 2], C = s[E + 3], _ = s[0], V = s[1], k = s[2], N = s[3], D = e.winding(S, R, P, C, _, V), X = 0; X < c; X++)
                            if (X != u) {
                                var U = a[X];
                                if (3 == U.length) {
                                    var O = U[0],
                                        Y = U[1],
                                        F = U[2],
                                        L = i[X],
                                        y = L[L.length - 2],
                                        M = L[L.length - 1];
                                    if (O == A && Y == I) {
                                        var T = e.winding(S, R, P, C, y, M),
                                            b = e.winding(y, M, _, V, k, N);
                                        T == D && b == D && (L.length = 0, U.length = 0, s.push(y), s.push(M), o.push(F), S = P, R = C, P = y, C = M, X = 0)
                                    }
                                }
                            }
                    } for (var u = i.length - 1; u >= 0; u--) s = i[u], 0 == s.length && (i.splice(u, 1), this.polygonPool.free(s), o = a[u], a.splice(u, 1), this.polygonIndicesPool.free(o));
                return i
            }, e.isConcave = function(t, e, n, r) {
                var i = r[(e + t - 1) % e] << 1,
                    a = r[t] << 1,
                    o = r[(t + 1) % e] << 1;
                return !this.positiveArea(n[i], n[i + 1], n[a], n[a + 1], n[o], n[o + 1])
            }, e.positiveArea = function(t, e, n, r, i, a) {
                return t * (a - r) + n * (e - a) + i * (r - e) >= 0
            }, e.winding = function(t, e, n, r, i, a) {
                var o = n - t,
                    s = r - e;
                return i * s - a * o + o * e - t * s >= 0 ? 1 : -1
            }, e
        }();
        t.Triangulator = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t() {
                this.array = new Array
            }
            return t.prototype.add = function(t) {
                var e = this.contains(t);
                return this.array[0 | t] = 0 | t, !e
            }, t.prototype.contains = function(t) {
                return void 0 != this.array[0 | t]
            }, t.prototype.remove = function(t) {
                this.array[0 | t] = void 0
            }, t.prototype.clear = function() {
                this.array.length = 0
            }, t
        }();
        t.IntSet = e;
        var n = function() {
            function t(t, e, n, r) {
                void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === n && (n = 0), void 0 === r && (r = 0), this.r = t, this.g = e, this.b = n, this.a = r
            }
            return t.prototype.set = function(t, e, n, r) {
                return this.r = t, this.g = e, this.b = n, this.a = r, this.clamp(), this
            }, t.prototype.setFromColor = function(t) {
                return this.r = t.r, this.g = t.g, this.b = t.b, this.a = t.a, this
            }, t.prototype.setFromString = function(t) {
                return t = "#" == t.charAt(0) ? t.substr(1) : t, this.r = parseInt(t.substr(0, 2), 16) / 255, this.g = parseInt(t.substr(2, 2), 16) / 255, this.b = parseInt(t.substr(4, 2), 16) / 255, this.a = (8 != t.length ? 255 : parseInt(t.substr(6, 2), 16)) / 255, this
            }, t.prototype.add = function(t, e, n, r) {
                return this.r += t, this.g += e, this.b += n, this.a += r, this.clamp(), this
            }, t.prototype.clamp = function() {
                return this.r < 0 ? this.r = 0 : this.r > 1 && (this.r = 1), this.g < 0 ? this.g = 0 : this.g > 1 && (this.g = 1), this.b < 0 ? this.b = 0 : this.b > 1 && (this.b = 1), this.a < 0 ? this.a = 0 : this.a > 1 && (this.a = 1), this
            }, t.WHITE = new t(1, 1, 1, 1), t.RED = new t(1, 0, 0, 1), t.GREEN = new t(0, 1, 0, 1), t.BLUE = new t(0, 0, 1, 1), t.MAGENTA = new t(1, 0, 1, 1), t
        }();
        t.Color = n;
        var r = function() {
            function t() {}
            return t.clamp = function(t, e, n) {
                return t < e ? e : t > n ? n : t
            }, t.cosDeg = function(e) {
                return Math.cos(e * t.degRad)
            }, t.sinDeg = function(e) {
                return Math.sin(e * t.degRad)
            }, t.signum = function(t) {
                return t > 0 ? 1 : t < 0 ? -1 : 0
            }, t.toInt = function(t) {
                return t > 0 ? Math.floor(t) : Math.ceil(t)
            }, t.cbrt = function(t) {
                var e = Math.pow(Math.abs(t), 1 / 3);
                return t < 0 ? -e : e
            }, t.randomTriangular = function(e, n) {
                return t.randomTriangularWith(e, n, .5 * (e + n))
            }, t.randomTriangularWith = function(t, e, n) {
                var r = Math.random(),
                    i = e - t;
                return r <= (n - t) / i ? t + Math.sqrt(r * i * (n - t)) : e - Math.sqrt((1 - r) * i * (e - n))
            }, t.PI = 3.1415927, t.PI2 = 2 * t.PI, t.radiansToDegrees = 180 / t.PI, t.radDeg = t.radiansToDegrees, t.degreesToRadians = t.PI / 180, t.degRad = t.degreesToRadians, t
        }();
        t.MathUtils = r;
        var i = function() {
            function t() {}
            return t.prototype.apply = function(t, e, n) {
                return t + (e - t) * this.applyInternal(n)
            }, t
        }();
        t.Interpolation = i;
        var a = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.power = 2, n.power = e, n
            }
            return __extends(e, t), e.prototype.applyInternal = function(t) {
                return t <= .5 ? Math.pow(2 * t, this.power) / 2 : Math.pow(2 * (t - 1), this.power) / (this.power % 2 == 0 ? -2 : 2) + 1
            }, e
        }(i);
        t.Pow = a;
        var o = function(t) {
            function e(e) {
                return t.call(this, e) || this
            }
            return __extends(e, t), e.prototype.applyInternal = function(t) {
                return Math.pow(t - 1, this.power) * (this.power % 2 == 0 ? -1 : 1) + 1
            }, e
        }(a);
        t.PowOut = o;
        var s = function() {
            function t() {}
            return t.arrayCopy = function(t, e, n, r, i) {
                for (var a = e, o = r; a < e + i; a++, o++) n[o] = t[a]
            }, t.setArraySize = function(t, e, n) {
                void 0 === n && (n = 0);
                var r = t.length;
                if (r == e) return t;
                if (t.length = e, r < e)
                    for (var i = r; i < e; i++) t[i] = n;
                return t
            }, t.ensureArrayCapacity = function(e, n, r) {
                return void 0 === r && (r = 0), e.length >= n ? e : t.setArraySize(e, n, r)
            }, t.newArray = function(t, e) {
                for (var n = new Array(t), r = 0; r < t; r++) n[r] = e;
                return n
            }, t.newFloatArray = function(e) {
                if (t.SUPPORTS_TYPED_ARRAYS) return new Float32Array(e);
                for (var n = new Array(e), r = 0; r < n.length; r++) n[r] = 0;
                return n
            }, t.newShortArray = function(e) {
                if (t.SUPPORTS_TYPED_ARRAYS) return new Int16Array(e);
                for (var n = new Array(e), r = 0; r < n.length; r++) n[r] = 0;
                return n
            }, t.toFloatArray = function(e) {
                return t.SUPPORTS_TYPED_ARRAYS ? new Float32Array(e) : e
            }, t.toSinglePrecision = function(e) {
                return t.SUPPORTS_TYPED_ARRAYS ? Math.fround(e) : e
            }, t.SUPPORTS_TYPED_ARRAYS = "undefined" != typeof Float32Array, t
        }();
        t.Utils = s;
        var l = function() {
            function t() {}
            return t.logBones = function(t) {
                for (var e = 0; e < t.bones.length; e++) {
                    var n = t.bones[e],
                        r = n.matrix;
                    console.log(n.data.name + ", " + r.a + ", " + r.b + ", " + r.c + ", " + r.d + ", " + r.tx + ", " + r.ty)
                }
            }, t
        }();
        t.DebugUtils = l;
        var h = function() {
            function t(t) {
                this.items = new Array, this.instantiator = t
            }
            return t.prototype.obtain = function() {
                return this.items.length > 0 ? this.items.pop() : this.instantiator()
            }, t.prototype.free = function(t) {
                t.reset && t.reset(), this.items.push(t)
            }, t.prototype.freeAll = function(t) {
                for (var e = 0; e < t.length; e++) t[e].reset && t[e].reset(), this.items[e] = t[e]
            }, t.prototype.clear = function() {
                this.items.length = 0
            }, t
        }();
        t.Pool = h;
        var u = function() {
            function t(t, e) {
                void 0 === t && (t = 0), void 0 === e && (e = 0), this.x = t, this.y = e
            }
            return t.prototype.set = function(t, e) {
                return this.x = t, this.y = e, this
            }, t.prototype.length = function() {
                var t = this.x,
                    e = this.y;
                return Math.sqrt(t * t + e * e)
            }, t.prototype.normalize = function() {
                var t = this.length();
                return 0 != t && (this.x /= t, this.y /= t), this
            }, t
        }();
        t.Vector2 = u;
        var c = function() {
            function t() {
                this.maxDelta = .064, this.framesPerSecond = 0, this.delta = 0, this.totalTime = 0, this.lastTime = Date.now() / 1e3, this.frameCount = 0, this.frameTime = 0
            }
            return t.prototype.update = function() {
                var t = Date.now() / 1e3;
                this.delta = t - this.lastTime, this.frameTime += this.delta, this.totalTime += this.delta, this.delta > this.maxDelta && (this.delta = this.maxDelta), this.lastTime = t, this.frameCount++, this.frameTime > 1 && (this.framesPerSecond = this.frameCount / this.frameTime, this.frameTime = 0, this.frameCount = 0)
            }, t
        }();
        t.TimeKeeper = c;
        var p = function() {
            function t(t) {
                void 0 === t && (t = 32), this.addedValues = 0, this.lastValue = 0, this.mean = 0, this.dirty = !0, this.values = new Array(t)
            }
            return t.prototype.hasEnoughData = function() {
                return this.addedValues >= this.values.length
            }, t.prototype.addValue = function(t) {
                this.addedValues < this.values.length && this.addedValues++, this.values[this.lastValue++] = t, this.lastValue > this.values.length - 1 && (this.lastValue = 0), this.dirty = !0
            }, t.prototype.getMean = function() {
                if (this.hasEnoughData()) {
                    if (this.dirty) {
                        for (var t = 0, e = 0; e < this.values.length; e++) t += this.values[e];
                        this.mean = t / this.values.length, this.dirty = !1
                    }
                    return this.mean
                }
                return 0
            }, t
        }();
        t.WindowedMean = p
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function t(t) {
                if (null == t) throw new Error("name cannot be null.");
                this.name = t
            }
            return t
        }();
        t.Attachment = e;
        var n = function(t) {
            function e(n) {
                var r = t.call(this, n) || this;
                return r.id = (65535 & e.nextID++) << 11, r.worldVerticesLength = 0, r
            }
            return __extends(e, t), e.prototype.computeWorldVerticesOld = function(t, e) {
                this.computeWorldVertices(t, 0, this.worldVerticesLength, e, 0, 2)
            }, e.prototype.computeWorldVertices = function(t, e, n, r, i, a) {
                n = i + (n >> 1) * a;
                var o = t.bone.skeleton,
                    s = t.attachmentVertices,
                    l = this.vertices,
                    h = this.bones;
                if (null != h) {
                    for (var u = 0, c = 0, p = 0; p < e; p += 2) {
                        var f = h[u];
                        u += f + 1, c += f
                    }
                    var d = o.bones;
                    if (0 == s.length)
                        for (var m = i, g = 3 * c; m < n; m += a) {
                            var v = 0,
                                x = 0,
                                f = h[u++];
                            for (f += u; u < f; u++, g += 3) {
                                var y = d[h[u]].matrix,
                                    M = l[g],
                                    w = l[g + 1],
                                    E = l[g + 2];
                                v += (M * y.a + w * y.c + y.tx) * E, x += (M * y.b + w * y.d + y.ty) * E
                            }
                            r[m] = v, r[m + 1] = x
                        } else
                            for (var T = s, m = i, g = 3 * c, b = c << 1; m < n; m += a) {
                                var v = 0,
                                    x = 0,
                                    f = h[u++];
                                for (f += u; u < f; u++, g += 3, b += 2) {
                                    var y = d[h[u]].matrix,
                                        M = l[g] + T[b],
                                        w = l[g + 1] + T[b + 1],
                                        E = l[g + 2];
                                    v += (M * y.a + w * y.c + y.tx) * E, x += (M * y.b + w * y.d + y.ty) * E
                                }
                                r[m] = v, r[m + 1] = x
                            }
                } else {
                    s.length > 0 && (l = s);
                    for (var y = t.bone.matrix, A = y.tx, I = y.ty, S = y.a, g = y.c, R = y.b, P = y.d, C = e, m = i; m < n; C += 2, m += a) {
                        var M = l[C],
                            w = l[C + 1];
                        r[m] = M * S + w * g + A, r[m + 1] = M * R + w * P + I
                    }
                }
            }, e.prototype.applyDeform = function(t) {
                return this == t
            }, e.nextID = 0, e
        }(e);
        t.VertexAttachment = n
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        ! function(t) {
            t[t.Region = 0] = "Region", t[t.BoundingBox = 1] = "BoundingBox", t[t.Mesh = 2] = "Mesh", t[t.LinkedMesh = 3] = "LinkedMesh", t[t.Path = 4] = "Path", t[t.Point = 5] = "Point"
        }(t.AttachmentType || (t.AttachmentType = {}))
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function(e) {
            function n(n) {
                var r = e.call(this, n) || this;
                return r.color = new t.Color(1, 1, 1, 1), r
            }
            return __extends(n, e), n
        }(t.VertexAttachment);
        t.BoundingBoxAttachment = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function(e) {
            function n(n) {
                var r = e.call(this, n) || this;
                return r.color = new t.Color(.2275, .2275, .8078, 1), r
            }
            return __extends(n, e), n
        }(t.VertexAttachment);
        t.ClippingAttachment = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function(e) {
            function n(n) {
                var r = e.call(this, n) || this;
                return r.color = new t.Color(1, 1, 1, 1), r.inheritDeform = !1, r.tempColor = new t.Color(0, 0, 0, 0), r
            }
            return __extends(n, e), n.prototype.updateUVs = function(e, n) {
                var r = this.regionUVs,
                    i = r.length;
                if (n && n.length == i || (n = t.Utils.newFloatArray(i)), null != e) {
                    for (var a = e.texture, o = a._uvs, s = e.width, l = e.height, h = e.originalWidth, u = e.originalHeight, c = e.offsetX, p = e.pixiOffsetY, f = 0; f < i; f += 2) {
                        var d = this.regionUVs[f],
                            m = this.regionUVs[f + 1];
                        d = (d * h - c) / s, m = (m * u - p) / l, n[f] = (o.x0 * (1 - d) + o.x1 * d) * (1 - m) + (o.x3 * (1 - d) + o.x2 * d) * m, n[f + 1] = (o.y0 * (1 - d) + o.y1 * d) * (1 - m) + (o.y3 * (1 - d) + o.y2 * d) * m
                    }
                    return n
                }
            }, n.prototype.applyDeform = function(t) {
                return this == t || this.inheritDeform && this.parentMesh == t
            }, n.prototype.getParentMesh = function() {
                return this.parentMesh
            }, n.prototype.setParentMesh = function(t) {
                this.parentMesh = t, null != t && (this.bones = t.bones, this.vertices = t.vertices, this.worldVerticesLength = t.worldVerticesLength, this.regionUVs = t.regionUVs, this.triangles = t.triangles, this.hullLength = t.hullLength, this.worldVerticesLength = t.worldVerticesLength)
            }, n
        }(t.VertexAttachment);
        t.MeshAttachment = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function(e) {
            function n(n) {
                var r = e.call(this, n) || this;
                return r.closed = !1, r.constantSpeed = !1, r.color = new t.Color(1, 1, 1, 1), r
            }
            return __extends(n, e), n
        }(t.VertexAttachment);
        t.PathAttachment = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function(e) {
            function n(n) {
                var r = e.call(this, n) || this;
                return r.color = new t.Color(.38, .94, 0, 1), r
            }
            return __extends(n, e), n.prototype.computeWorldPosition = function(t, e) {
                var n = t.matrix;
                return e.x = this.x * n.a + this.y * n.c + t.worldX, e.y = this.x * n.b + this.y * n.d + t.worldY, e
            }, n.prototype.computeWorldRotation = function(e) {
                var n = e.matrix,
                    r = t.MathUtils.cosDeg(this.rotation),
                    i = t.MathUtils.sinDeg(this.rotation),
                    a = r * n.a + i * n.c,
                    o = r * n.b + i * n.d;
                return Math.atan2(o, a) * t.MathUtils.radDeg
            }, n
        }(t.VertexAttachment);
        t.PointAttachment = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function(e) {
            function n(n) {
                var r = e.call(this, n) || this;
                return r.x = 0, r.y = 0, r.scaleX = 1, r.scaleY = 1, r.rotation = 0, r.width = 0, r.height = 0, r.color = new t.Color(1, 1, 1, 1), r.offset = t.Utils.newFloatArray(8), r.uvs = t.Utils.newFloatArray(8), r.tempColor = new t.Color(1, 1, 1, 1), r
            }
            return __extends(n, e), n.prototype.updateOffset = function() {
                var t = this.width / this.region.originalWidth * this.scaleX,
                    e = this.height / this.region.originalHeight * this.scaleY,
                    r = -this.width / 2 * this.scaleX + this.region.offsetX * t,
                    i = -this.height / 2 * this.scaleY + this.region.offsetY * e,
                    a = r + this.region.width * t,
                    o = i + this.region.height * e,
                    s = this.rotation * Math.PI / 180,
                    l = Math.cos(s),
                    h = Math.sin(s),
                    u = r * l + this.x,
                    c = r * h,
                    p = i * l + this.y,
                    f = i * h,
                    d = a * l + this.x,
                    m = a * h,
                    g = o * l + this.y,
                    v = o * h,
                    x = this.offset;
                x[n.OX1] = u - f, x[n.OY1] = p + c, x[n.OX2] = u - v, x[n.OY2] = g + c, x[n.OX3] = d - v, x[n.OY3] = g + m, x[n.OX4] = d - f, x[n.OY4] = p + m
            }, n.prototype.setRegion = function(t) {
                this.region = t;
                var e = this.uvs;
                t.rotate ? (e[2] = t.u, e[3] = t.v2, e[4] = t.u, e[5] = t.v, e[6] = t.u2, e[7] = t.v, e[0] = t.u2, e[1] = t.v2) : (e[0] = t.u, e[1] = t.v2, e[2] = t.u, e[3] = t.v, e[4] = t.u2, e[5] = t.v, e[6] = t.u2, e[7] = t.v2)
            }, n.prototype.computeWorldVertices = function(t, e, r, i) {
                var a = this.offset,
                    o = t.matrix,
                    s = o.tx,
                    l = o.ty,
                    h = o.a,
                    u = o.c,
                    c = o.b,
                    p = o.d,
                    f = 0,
                    d = 0;
                f = a[n.OX1], d = a[n.OY1], e[r] = f * h + d * u + s, e[r + 1] = f * c + d * p + l, r += i, f = a[n.OX2], d = a[n.OY2], e[r] = f * h + d * u + s, e[r + 1] = f * c + d * p + l, r += i, f = a[n.OX3], d = a[n.OY3], e[r] = f * h + d * u + s, e[r + 1] = f * c + d * p + l, r += i, f = a[n.OX4], d = a[n.OY4], e[r] = f * h + d * u + s, e[r + 1] = f * c + d * p + l
            }, n.OX1 = 0, n.OY1 = 1, n.OX2 = 2, n.OY2 = 3, n.OX3 = 4, n.OY3 = 5, n.OX4 = 6, n.OY4 = 7, n.X1 = 0, n.Y1 = 1, n.C1R = 2, n.C1G = 3, n.C1B = 4, n.C1A = 5, n.U1 = 6, n.V1 = 7, n.X2 = 8, n.Y2 = 9, n.C2R = 10, n.C2G = 11, n.C2B = 12, n.C2A = 13, n.U2 = 14, n.V2 = 15, n.X3 = 16, n.Y3 = 17, n.C3R = 18, n.C3G = 19, n.C3B = 20, n.C3A = 21, n.U3 = 22, n.V3 = 23, n.X4 = 24, n.Y4 = 25, n.C4R = 26, n.C4G = 27, n.C4B = 28, n.C4A = 29, n.U4 = 30, n.V4 = 31, n
        }(t.Attachment);
        t.RegionAttachment = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(t, e) {
                this.jitterX = 0, this.jitterY = 0, this.jitterX = t, this.jitterY = e
            }
            return e.prototype.begin = function(t) {}, e.prototype.transform = function(e, n, r, i) {
                e.x += t.MathUtils.randomTriangular(-this.jitterX, this.jitterY), e.y += t.MathUtils.randomTriangular(-this.jitterX, this.jitterY)
            }, e.prototype.end = function() {}, e
        }();
        t.JitterEffect = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    ! function(t) {
        var e = function() {
            function e(t) {
                this.centerX = 0, this.centerY = 0, this.radius = 0, this.angle = 0, this.worldX = 0, this.worldY = 0, this.radius = t
            }
            return e.prototype.begin = function(t) {
                this.worldX = t.x + this.centerX, this.worldY = t.y + this.centerY
            }, e.prototype.transform = function(n, r, i, a) {
                var o = this.angle * t.MathUtils.degreesToRadians,
                    s = n.x - this.worldX,
                    l = n.y - this.worldY,
                    h = Math.sqrt(s * s + l * l);
                if (h < this.radius) {
                    var u = e.interpolation.apply(0, o, (this.radius - h) / this.radius),
                        c = Math.cos(u),
                        p = Math.sin(u);
                    n.x = c * s - p * l + this.worldX, n.y = p * s + c * l + this.worldY
                }
            }, e.prototype.end = function() {}, e.interpolation = new t.PowOut(2), e
        }();
        t.SwirlEffect = e
    }(t.core || (t.core = {}))
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    PIXI.spine = t;
    var e = PIXI.Texture.prototype;
    e._updateUvs || (e._updateUvs = e.updateUvs)
}(pixi_spine || (pixi_spine = {}));
var pixi_spine;
! function(t) {
    function e(t) {
        return t.type === PIXI.loaders.Resource.TYPE.JSON
    }

    function n() {
        return function(n, i) {
            if (!n.data || !e(n) || !n.data.bones) return i();
            var o = n.metadata || {},
                s = o ? n.metadata.spineSkeletonScale : null,
                l = o ? n.metadata.spineAtlas : null;
            if (!1 === l) return i();
            if (l && l.pages) {
                var h = new t.core.SkeletonJson(new t.core.AtlasAttachmentLoader(l)),
                    u = h.readSkeletonData(n.data);
                return n.spineData = u, n.spineAtlas = l, i()
            }
            var c = o.spineAtlasSuffix || ".atlas",
                p = n.url.substr(0, n.url.lastIndexOf(".")) + c;
            n.metadata && n.metadata.spineAtlasFile && (p = n.metadata.spineAtlasFile), p = p.replace(this.baseUrl, "");
            var f = {
                    crossOrigin: n.crossOrigin,
                    xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.TEXT,
                    metadata: o.spineMetadata || null,
                    parentResource: n
                },
                d = {
                    crossOrigin: n.crossOrigin,
                    metadata: o.imageMetadata || null,
                    parentResource: n
                },
                m = n.url.substr(0, n.url.lastIndexOf("/") + 1);
            m = m.replace(this.baseUrl, "");
            var g = o.images ? a(o.images) : o.image ? a({
                    default: o.image
                }) : o.imageLoader ? o.imageLoader(this, n.name + "_atlas_page_", m, d) : r(this, n.name + "_atlas_page_", m, d),
                v = function(e) {
                    new t.core.TextureAtlas(e, g, function(e) {
                        var r = new t.core.SkeletonJson(new t.core.AtlasAttachmentLoader(e));
                        s && (r.scale = s), n.spineData = r.readSkeletonData(n.data), n.spineAtlas = e, i()
                    })
                };
            n.metadata && n.metadata.atlasRawData ? v(n.metadata.atlasRawData) : this.add(n.name + "_atlas", p, f, function(t) {
                v(t.xhr.responseText)
            })
        }
    }

    function r(t, e, n, r) {
        return n && n.lastIndexOf("/") !== n.length - 1 && (n += "/"),
            function(i, a) {
                var o = e + i,
                    s = n + i;
                t.add(o, s, r, function(t) {
                    a(t.texture.baseTexture)
                })
            }
    }

    function i(t, e) {
        return t && t.lastIndexOf("/") !== t.length - 1 && (t += "/"),
            function(t, n) {
                n(PIXI.BaseTexture.fromImage(t, e))
            }
    }

    function a(t) {
        return function(e, n) {
            var r = t[e] || t.default;
            n(r && r.baseTexture ? r.baseTexture : r)
        }
    }
    t.atlasParser = n, t.imageLoaderAdapter = r, t.syncImageLoaderAdapter = i, t.staticImageLoader = a, PIXI.loaders.Loader.addPixiMiddleware(n), PIXI.loader.use(n())
}(pixi_spine || (pixi_spine = {})),
function() {
    Math.fround || (Math.fround = Math.fround = function(t) {
        return function(e) {
            return t[0] = e, t[0]
        }
    }(new Float32Array(1)))
}();
var pixi_spine;
! function(t) {
    function e() {
        var t = this.parent.worldTransform,
            e = this.worldTransform,
            n = this.localTransform;
        e.a = n.a * t.a + n.b * t.c, e.b = n.a * t.b + n.b * t.d, e.c = n.c * t.a + n.d * t.c, e.d = n.c * t.b + n.d * t.d, e.tx = n.tx * t.a + n.ty * t.c + t.tx, e.ty = n.tx * t.b + n.ty * t.d + t.ty, this.worldAlpha = this.alpha * this.parent.worldAlpha, this._currentBounds = null
    }
    t.core.Bone.yDown = !0;
    var n = [0, 0, 0],
        r = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.region = null, e
            }
            return __extends(e, t), e
        }(PIXI.Sprite);
    t.SpineSprite = r;
    var i = function(t) {
        function e(e, n, r, i, a) {
            return t.call(this, e, n, r, i, a) || this
        }
        return __extends(e, t), e
    }(PIXI.mesh.Mesh);
    t.SpineMesh = i;
    var a = function(a) {
        function o(e) {
            var n = a.call(this) || this;
            if (!e) throw new Error("The spineData param is required.");
            if ("string" == typeof e) throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');
            n.spineData = e, n.skeleton = new t.core.Skeleton(e), n.skeleton.updateWorldTransform(), n.stateData = new t.core.AnimationStateData(e), n.state = new t.core.AnimationState(n.stateData), n.slotContainers = [], n.tempClipContainers = [];
            for (var r = 0, i = n.skeleton.slots.length; r < i; r++) {
                var o = n.skeleton.slots[r],
                    s = o.attachment,
                    l = n.newContainer();
                if (n.slotContainers.push(l), n.addChild(l), n.tempClipContainers.push(null), s instanceof t.core.RegionAttachment) {
                    var h = s.region.name,
                        u = n.createSprite(o, s, h);
                    o.currentSprite = u, o.currentSpriteName = h, l.addChild(u)
                } else if (s instanceof t.core.MeshAttachment) {
                    var c = n.createMesh(o, s);
                    o.currentMesh = c, o.currentMeshName = s.name, l.addChild(c)
                } else {
                    if (!(s instanceof t.core.ClippingAttachment)) continue;
                    n.createGraphics(o, s), l.addChild(o.clippingContainer), l.addChild(o.currentGraphics)
                }
            }
            return n.autoUpdate = !0, n.tintRgb = new Float32Array([1, 1, 1]), n
        }
        return __extends(o, a), Object.defineProperty(o.prototype, "autoUpdate", {
            get: function() {
                return this.updateTransform === o.prototype.autoUpdateTransform
            },
            set: function(t) {
                this.updateTransform = t ? o.prototype.autoUpdateTransform : PIXI.Container.prototype.updateTransform
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(o.prototype, "tint", {
            get: function() {
                return PIXI.utils.rgb2hex(this.tintRgb)
            },
            set: function(t) {
                this.tintRgb = PIXI.utils.hex2rgb(t, this.tintRgb)
            },
            enumerable: !0,
            configurable: !0
        }), o.prototype.update = function(r) {
            this.state.update(r), this.state.apply(this.skeleton), this.skeleton.updateWorldTransform();
            var i = this.skeleton.slots,
                a = this.color,
                o = null,
                s = null;
            a ? (o = a.light, s = a.dark) : o = this.tintRgb;
            for (var l = PIXI.TransformBase && 1 == this.transformHack(), h = 0, u = i.length; h < u; h++) {
                var c = i[h],
                    p = c.attachment,
                    f = this.slotContainers[h];
                if (p) {
                    var d = null,
                        m = p.color;
                    if (p instanceof t.core.RegionAttachment) {
                        var g = p.region;
                        if (g) {
                            c.currentMesh && (c.currentMesh.visible = !1, c.currentMesh = null, c.currentMeshName = void 0);
                            var v = g;
                            if (!c.currentSpriteName || c.currentSpriteName !== v.name) {
                                var x = v.name;
                                if (c.currentSprite && (c.currentSprite.visible = !1), c.sprites = c.sprites || {}, void 0 !== c.sprites[x]) c.sprites[x].visible = !0;
                                else {
                                    var y = this.createSprite(c, p, x);
                                    f.addChild(y)
                                }
                                c.currentSprite = c.sprites[x], c.currentSpriteName = x
                            }
                        }
                        if (f.transform) {
                            var M = f.transform,
                                w = M,
                                E = null;
                            w.matrix2d ? (E = w.matrix2d, w._dirtyVersion++, w.version = w._dirtyVersion, w.isStatic = !0, w.operMode = 0) : l ? (w.position && (M = new PIXI.TransformBase, M._parentID = -1, M._worldID = f.transform._worldID, f.transform = M), E = M.localTransform) : w.setFromMatrix(c.bone.matrix), E && c.bone.matrix.copy(E)
                        } else {
                            var E = f.localTransform || new PIXI.Matrix;
                            c.bone.matrix.copy(E), f.localTransform = E, f.displayObjectUpdateTransform = e
                        }
                        c.currentSprite.color ? d = c.currentSprite.color : (n[0] = o[0] * c.color.r * m.r, n[1] = o[1] * c.color.g * m.g, n[2] = o[2] * c.color.b * m.b, c.currentSprite.tint = PIXI.utils.rgb2hex(n)), c.currentSprite.blendMode = c.blendMode
                    } else if (p instanceof t.core.MeshAttachment) {
                        if (c.currentSprite)
                            if (c.currentSprite.visible = !1, c.currentSprite = null, c.currentSpriteName = void 0, f.transform) {
                                var M = new PIXI.TransformStatic;
                                M._parentID = -1, M._worldID = f.transform._worldID, f.transform = M
                            } else f.localTransform = new PIXI.Matrix, f.displayObjectUpdateTransform = PIXI.DisplayObject.prototype.updateTransform;
                        if (!c.currentMeshName || c.currentMeshName !== p.name) {
                            var T = p.name;
                            if (c.currentMesh && (c.currentMesh.visible = !1), c.meshes = c.meshes || {}, void 0 !== c.meshes[T]) c.meshes[T].visible = !0;
                            else {
                                var b = this.createMesh(c, p);
                                f.addChild(b)
                            }
                            c.currentMesh = c.meshes[T], c.currentMeshName = T
                        }
                        if (p.computeWorldVerticesOld(c, c.currentMesh.vertices), c.currentMesh.color) d = c.currentMesh.color;
                        else if ("3" !== PIXI.VERSION[0]) {
                            var A = c.currentMesh.tintRgb;
                            A[0] = o[0] * c.color.r * m.r, A[1] = o[1] * c.color.g * m.g, A[2] = o[2] * c.color.b * m.b
                        }
                        c.currentMesh.blendMode = c.blendMode
                    } else {
                        if (!(p instanceof t.core.ClippingAttachment)) {
                            f.visible = !1;
                            continue
                        }
                        c.currentGraphics || (this.createGraphics(c, p), f.addChild(c.clippingContainer), f.addChild(c.currentGraphics)), this.updateGraphics(c, p)
                    }
                    if (f.visible = !0, d) {
                        var I = c.color.r * m.r,
                            S = c.color.g * m.g,
                            R = c.color.b * m.b;
                        d.setLight(o[0] * I + s[0] * (1 - I), o[1] * S + s[1] * (1 - S), o[2] * R + s[2] * (1 - R)), c.darkColor ? (I = c.darkColor.r, S = c.darkColor.g, R = c.darkColor.b) : (I = 0, S = 0, R = 0), d.setDark(o[0] * I + s[0] * (1 - I), o[1] * S + s[1] * (1 - S), o[2] * R + s[2] * (1 - R))
                    }
                    f.alpha = c.color.a
                } else f.visible = !1
            }
            for (var P = this.skeleton.drawOrder, C = null, _ = null, h = 0, u = P.length; h < u; h++) {
                var c = i[P[h].data.index],
                    f = this.slotContainers[P[h].data.index];
                if (_ || f.parent !== this && (f.parent.removeChild(f), f.parent = this), c.currentGraphics && c.attachment) _ = c.clippingContainer, C = c.attachment, _.children.length = 0, this.children[h] = f, C.endSlot == c.data && (C.endSlot = null);
                else if (_) {
                    var V = this.tempClipContainers[h];
                    V || (V = this.tempClipContainers[h] = this.newContainer(), V.visible = !1), this.children[h] = V, f.parent = null, _.addChild(f), C.endSlot == c.data && (_.renderable = !0, _ = null, C = null)
                } else this.children[h] = f
            }
        }, o.prototype.setSpriteRegion = function(t, e, n) {
            e.region = n, e.texture = n.texture, n.size ? (e.scale.x = n.size.width / n.originalWidth, e.scale.y = -n.size.height / n.originalHeight) : (e.scale.x = t.scaleX * t.width / n.originalWidth, e.scale.y = -t.scaleY * t.height / n.originalHeight)
        }, o.prototype.setMeshRegion = function(t, e, n) {
            e.region = n,
                e.texture = n.texture, n.texture._updateUvs(), t.updateUVs(n, e.uvs), e.dirty++
        }, o.prototype.autoUpdateTransform = function() {
            if (o.globalAutoUpdate) {
                this.lastTime = this.lastTime || Date.now();
                var t = .001 * (Date.now() - this.lastTime);
                this.lastTime = Date.now(), this.update(t)
            } else this.lastTime = 0;
            PIXI.Container.prototype.updateTransform.call(this)
        }, o.prototype.createSprite = function(e, n, r) {
            var i = n.region;
            e.tempAttachment === n && (i = e.tempRegion, e.tempAttachment = null, e.tempRegion = null);
            var a = i.texture,
                o = this.newSprite(a);
            return o.rotation = n.rotation * t.core.MathUtils.degRad, o.anchor.x = .5, o.anchor.y = .5, o.position.x = n.x, o.position.y = n.y, o.alpha = n.color.a, o.region = n.region, this.setSpriteRegion(n, o, n.region), e.sprites = e.sprites || {}, e.sprites[r] = o, o
        }, o.prototype.createMesh = function(t, e) {
            var n = e.region;
            t.tempAttachment === e && (n = t.tempRegion, t.tempAttachment = null, t.tempRegion = null);
            var r = this.newMesh(n.texture, new Float32Array(e.regionUVs.length), new Float32Array(e.regionUVs.length), new Uint16Array(e.triangles), PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);
            return r.canvasPadding = 1.5, r.alpha = e.color.a, r.region = e.region, this.setMeshRegion(e, r, n), t.meshes = t.meshes || {}, t.meshes[e.name] = r, r
        }, o.prototype.createGraphics = function(t, e) {
            var n = this.newGraphics(),
                r = new PIXI.Polygon([]);
            return n.clear(), n.beginFill(16777215, 1), n.drawPolygon(r), n.renderable = !1, t.currentGraphics = n, t.clippingContainer = this.newContainer(), t.clippingContainer.mask = t.currentGraphics, n
        }, o.prototype.updateGraphics = function(t, e) {
            var n = t.currentGraphics.graphicsData[0].shape.points,
                r = e.worldVerticesLength;
            n.length = r, e.computeWorldVertices(t, 0, r, n, 0, 2), t.currentGraphics.dirty++, t.currentGraphics.clearDirty++
        }, o.prototype.hackTextureBySlotIndex = function(e, n, r) {
            void 0 === n && (n = null), void 0 === r && (r = null);
            var i = this.skeleton.slots[e];
            if (!i) return !1;
            var a = i.attachment,
                o = a.region;
            return n && (o = new t.core.TextureRegion, o.texture = n, o.size = r), i.currentSprite && i.currentSprite.region != o ? (this.setSpriteRegion(a, i.currentSprite, o), i.currentSprite.region = o) : i.currentMesh && i.currentMesh.region != o ? this.setMeshRegion(a, i.currentMesh, o) : (i.tempRegion = o, i.tempAttachment = a), !0
        }, o.prototype.hackTextureBySlotName = function(t, e, n) {
            void 0 === e && (e = null), void 0 === n && (n = null);
            var r = this.skeleton.findSlotIndex(t);
            return -1 != r && this.hackTextureBySlotIndex(r, e, n)
        }, o.prototype.newContainer = function() {
            return new PIXI.Container
        }, o.prototype.newSprite = function(t) {
            return new r(t)
        }, o.prototype.newGraphics = function() {
            return new PIXI.Graphics
        }, o.prototype.newMesh = function(t, e, n, r, a) {
            return new i(t, e, n, r, a)
        }, o.prototype.transformHack = function() {
            return 1
        }, o.globalAutoUpdate = !0, o.clippingPolygon = [], o
    }(PIXI.Container);
    t.Spine = a
}(pixi_spine || (pixi_spine = {}));
PIXI.settings.RETINA_PREFIX = /@(.+?)x/g, PIXI.utils.getResolutionOfUrl = function(t) {
    for (var e = PIXI.settings.RETINA_PREFIX.exec(t), n = 1; null !== e;) n = parseFloat(e[1]), e = PIXI.settings.RETINA_PREFIX.exec(t);
    return n
}, PIXI.VideoBaseTexture.prototype._onCanPlay = function() {
    this.hasLoaded = !0, this.source && (this.source.removeEventListener("canplay", this._onCanPlay), this.source.removeEventListener("canplaythrough", this._onCanPlay), this.width = this.source.videoWidth, this.height = this.source.videoHeight, this.__loaded || (this.__loaded = !0, this.emit("loaded", this)))
}, PIXI.interaction.InteractionManager.prototype.addEvents = function() {
    this.interactionDOMElement && (PIXI.ticker.shared.add(this.update, this), window.navigator.msPointerEnabled && (this.interactionDOMElement.style["-ms-content-zooming"] = "none", this.interactionDOMElement.style["-ms-touch-action"] = "none"), window.document.addEventListener("mousemove", this.onPointerMove, !0), window.document.addEventListener("mousedown", this.onPointerDown, !0), window.document.addEventListener("mouseout", this.onPointerOut, !0), window.document.addEventListener("mouseover", this.onPointerOver, !0), window.addEventListener("mouseup", this.onPointerUp, !0), window.addEventListener("touchstart", this.onPointerDown, !0), window.addEventListener("touchend", this.onPointerUp, !0), window.addEventListener("touchmove", this.onPointerMove, !0), window.navigator.pointerEnabled ? (window.document.addEventListener("pointerdown", this.onPointerDown, !0), window.document.addEventListener("pointermove", this.onPointerMove, !0), window.document.addEventListener("pointerup", this.onPointerUp, !0)) : window.navigator.msPointerEnabled && (window.document.addEventListener("MSPointerDown", this.onPointerDown, !0), window.document.addEventListener("MSPointerMove", this.onPointerMove, !0), window.document.addEventListener("MSPointerUp", this.onPointerUp, !0)), this.eventsAdded = !0)
}, PIXI.interaction.InteractionManager.prototype.removeEvents = function() {
    this.interactionDOMElement && (PIXI.ticker.shared.remove(this.update), window.navigator.msPointerEnabled && (this.interactionDOMElement.style["-ms-content-zooming"] = "", this.interactionDOMElement.style["-ms-touch-action"] = ""), window.document.removeEventListener("mousemove", this.onPointerMove, !0), window.document.removeEventListener("mousedown", this.onPointerDown, !0), window.document.removeEventListener("mouseout", this.onPointerOut, !0), window.document.removeEventListener("mouseover", this.onPointerOver, !0), window.removeEventListener("mouseup", this.onPointerUp, !0), window.removeEventListener("touchstart", this.onPointerDown, !0), window.removeEventListener("touchend", this.onPointerUp, !0), window.removeEventListener("touchmove", this.onPointerMove, !0), window.navigator.pointerEnabled ? (window.document.removeEventListener("pointerdown", this.onPointerDown, !0), window.document.removeEventListener("pointermove", this.onPointerMove, !0), window.document.removeEventListener("pointerup", this.onPointerUp, !0)) : window.navigator.msPointerEnabled && (window.document.removeEventListener("MSPointerDown", this.onPointerDown, !0), window.document.removeEventListener("MSPointerMove", this.onPointerMove, !0), window.document.removeEventListener("MSPointerUp", this.onPointerUp, !0)), this.interactionDOMElement = null, this.eventsAdded = !1)
}, PIXI.interaction.InteractionManager.prototype.onPointerDown = function(t) {
    for (var e = this.normalizeToPointerData(t), n = e.length, o = 0; o < n; o++) {
        var i = e[o],
            r = this.getInteractionDataForPointerId(i),
            s = this.configureInteractionEventForDOMEvent(this.eventData, i, r);
        if (s.data.originalEvent = t, this.processInteractive(s, this.renderer._lastObjectRendered, this.processPointerDown, !0), this.emit("pointerdown", s), "touch" === i.pointerType) this.emit("touchstart", s);
        else if ("mouse" === i.pointerType) {
            var a = 2 === i.button || 3 === i.which;
            this.emit(a ? "rightdown" : "mousedown", this.eventData)
        }
    }
}, Object.defineProperties(PIXI.Container.prototype, {
    width: {
        get: function() {
            return this.scale.x * this.getBounds(!0).width
        }
    },
    height: {
        get: function() {
            return this.scale.y * this.getBounds(!0).height
        }
    },
    y: {
        get: function() {
            if (this.position) return this.position.y;
            if (this.transform) {
                if (this.transform.position) return this.transform.position.y;
                if (this.transform.worldTransform) return this.transform.worldTransform.ty
            }
            return this.getBounds(!0).y
        },
        set: function(t) {
            this.transform.position.y = t
        }
    }
}), PIXI.Polygon.prototype.contains = function(t, e) {
    for (var n = !1, o = this.points.length / 2, i = 0, r = o - 1; i < o; r = i++) {
        var s = this.points[2 * i],
            a = this.points[2 * i + 1],
            d = this.points[2 * r],
            h = this.points[2 * r + 1];
        a > e != h > e && t < (e - a) / (h - a) * (d - s) + s && (n = !n)
    }
    return n
}, Sys.ns("cloudkid"), cloudkid.Emitter = function(t, e, n) {
    return console.warn("cloudkid.Emitter deprecated. Please use PIXI.particles.Emitter "), new PIXI.particles.Emitter(t, e, n)
}, PIXI.spine.core.AnimationState.prototype.setAnimationByName = function(t, e, n) {
    return console.warn("Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on."), this.setAnimation(t, e, n)
}, PIXI.spine.core.AnimationState.prototype.addAnimationByName = function(t, e, n, o) {
    return console.warn("Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on."), this.addAnimation(t, e, n, o)
}, PIXI.spine.core.AnimationState.prototype.hasAnimationByName = function(t) {
    return console.warn("Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on."), null !== this.data.skeletonData.findAnimation(t)
};
Sys.ns("Sys.utils"), Sys.utils.ObjectPool = {
    _registry: {},
    _pool: {},
    inRegistry: function(o) {
        return !!Sys.isDefined(this._registry[o]) || (console.error(o + " not registered in pool"), !1)
    },
    growPool: function(o, t) {
        if (0 !== t && this.inRegistry(o)) {
            for (var i, r = this._registry[o], s = this._pool[o], e = 0; e < t; e++) i = r.constructFunction.apply(r.constructScope, r.constructParams), i.poolId = o, s.push(i), r.objectsInPool += 1;
            Sys.isDefined(r.maxWarningCount) && r.objectsInPool > r.maxWarningCount && console.warn("Number of objects (" + r.objectsInPool + ") in pool " + r.id + " exceed maximum (" + r.maxWarningCount + ").")
        }
    },
    getObjectFromPool: function(o) {
        if (this.inRegistry(o)) return 0 === this._pool[o].length && this.growPool(o, this._registry[o].increment), this._pool[o].pop()
    },
    returnObjectToPool: function(o) {
        if (!Sys.isDefined(o.poolId)) return void console.error("Object does not belong to any pool");
        if (this.inRegistry(o.poolId)) return Sys.isDefined(o) || console.error("Object is undefined"), this._pool[o.poolId].push(o)
    },
    registerObjectForPooling: function(o, t, i, r, s, e, n) {
        this._registry[o] === o && console.warn("Object already in registry"), this._registry[o] = {}, this._registry[o].id = o, this._registry[o].constructScope = t, this._registry[o].constructFunction = i, this._registry[o].constructParams = r || [], this._registry[o].initialObjectCount = s || 0, this._registry[o].increment = e || 1, this._registry[o].maxWarningCount = n || void 0, this._registry[o].objectsInPool = 0, this._pool[o] = [], this.growPool(this._registry[o].id, s)
    }
};
Sys.ns("Sys.utils"), Sys.utils.repeatString = function(e, r) {
    return e.repeat ? e.repeat(r) : new Array(r + 1).join(e)
};
Sys.ns("Game"), Game.PIXIFactory = {
    createTextureFromSpineAtlas: function(e) {
        return PIXI.Texture.fromFrame(e)
    },
    createSprite: function(e, t, n) {
        var i = new PIXI.Sprite(e);
        return i.position = Sys.isDefined(t) ? new PIXI.Point(t.x, t.y) : new PIXI.Point(0, 0), i.anchor = Sys.isDefined(n) ? new PIXI.Point(n.x, n.y) : new PIXI.Point(0, 0), i
    },
    createContainer: function(e, t) {
        var n = new PIXI.Container;
        return n.position = Sys.isDefined(e) ? new PIXI.Point(e.x, e.y) : new PIXI.Point(0, 0), n.pivot = Sys.isDefined(t) ? new PIXI.Point(t.x, t.y) : new PIXI.Point(0, 0), n
    },
    createTexture: function(e) {
        return Sys.isDefined(Resources.readData("animationImages")[e]) ? Resources.readData("animationImages")[e] : PIXI.Texture.EMPTY
    },
    createSpriteWithTexture: function(e, t, n) {
        var i;
        return i = this.createTexture(e), this.createSprite(i, t, n)
    },
    createAndAddSprite: function(e, t, n, i) {
        var o = this.createSpriteWithTexture(e, n, i);
        return t.addChild(o), o
    },
    createAndAddContainer: function(e, t, n) {
        var i = this.createContainer(t, n);
        return e.addChild(i), i
    },
    createAndAddText: function(e, t, n, i, o) {
        t.font && (console.warn("Setting font style using the 'font' property is not fully supported anymore and will be deprecated soon to be inline with Pixi.js v4 API. Please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on"), Sys.applyProperties(t, Game.PIXIUtils.parseFont(t.font)), delete t.font);
        var d = new PIXI.Text(e, t);
        return d.resolution = 2, d.position = Sys.isDefined(i) ? new PIXI.Point(i.x, i.y) : new PIXI.Point(0, 0), d.anchor = Sys.isDefined(o) ? new PIXI.Point(o.x, o.y) : new PIXI.Point(0, 0), n.addChild(d), d
    },
    createAndAddBitmapText: function(e, t, n, i, o) {
        var d = new PIXI.extras.BitmapText(e, t);
        return d.position = Sys.isDefined(i) ? new PIXI.Point(i.x, i.y) : new PIXI.Point(0, 0), d.anchor = Sys.isDefined(o) ? new PIXI.Point(o.x, o.y) : new PIXI.Point(0, 0), n.addChild(d), d
    },
    createVideoElement: function(e, t, n, i) {
        var o = document.createElement("video"),
            d = Resources.readData("videos");
        if (o.src = d[e], o.preload = "auto", o.loop = !Sys.isDefined(t) || t, o.autoplay = !!Sys.isDefined(n) && n, o.type = Sys.isDefined(i) ? i : void 0, o.hidden = !0, Platform.isEdgeBrowser) {
            o.id = e, o.style.display = "none";
            var r = document.getElementById("videosHolder") ? document.getElementById("videosHolder") : document.createElement("div");
            r.id = "videosHolder", r.style.position = "absolute", r.style.top = "5000px", r.style.left = "5000px", r.style.display = "none", document.body.appendChild(r), r.appendChild(o)
        }
        return o
    },
    createAndAddVideo: function(e, t, n, i) {
        var o = PIXI.Texture.fromVideo(e, PIXI.SCALE_MODES.DEFAULT),
            d = this.createSprite(o, n, i);
        return t.addChild(d), o.baseTexture.source.pause(), d
    },
    playMSEdgeVideo: function(e) {
        var t = "50px",
            n = "0px";
        document.getElementById("viewport") && (t = document.getElementById("viewport").style.left, n = document.getElementById("viewport").style.top), document.getElementById("videosHolder").style.left = t, document.getElementById("videosHolder").style.top = n, document.getElementById(e).style.display = "block", document.getElementById(e).currentTime = 0, document.getElementById(e).play()
    },
    pauseMSEdgeVideo: function(e) {
        document.getElementById("videosHolder").style.left = "5000px", document.getElementById("videosHolder").style.top = "5000px", document.getElementById(e).style.display = "none", document.getElementById(e).pause()
    },
    resetMSEdgeVideo: function(e) {
        document.getElementById("videosHolder").style.left = "5000px", document.getElementById("videosHolder").style.top = "5000px", document.getElementById(e).style.display = "none"
    },
    createSpineAnimation: function(e, t) {
        var n = Resources.readData("spines")[e],
            i = new PIXI.spine.Spine(n);
        return i.position = Sys.isDefined(t) ? new PIXI.Point(t.x, t.y) : new PIXI.Point(0, 0), i
    },
    createAndAddSpineAnimation: function(e, t, n) {
        var i = this.createSpineAnimation(e, n);
        return t.addChild(i), i
    },
    createReelAreaGraphic: function(e, t, n, i) {
        var o = Game.stage.model.getCurrentReelGroupConfiguration().reelFrame,
            d = new PIXI.Graphics,
            r = e || 16711680,
            a = t || .3;
        return d.beginFill(r, a), d.drawRect(o.left, o.top, o.width + (n || 0), o.height + (i || 0)), d.endFill(), d
    }
};
Sys.ns("Game"), Game.PIXIUtils = {
    _tempPoint: new PIXI.Point,
    hitTestDisplayObject: function(t, n) {
        var e = !1;
        return n.hitArea ? (n.worldTransform.applyInverse(t, this._tempPoint), e = n.hitArea.contains(this._tempPoint.x, this._tempPoint.y)) : n.containsPoint && (e = n.containsPoint(t)), e
    },
    resetSpineAnimation: function(t) {
        t.lastTime = null, t.skeleton.setToSetupPose(), t.state.clearTracks()
    },
    mapValue: function(t, n, e, i, o) {
        return (t - n) * (o - i) / (e - n) + i
    },
    parseFont: function(t) {
        var n = {};
        t.indexOf("italic") > 1 ? n.fontStyle = "italic" : t.indexOf("oblique") > -1 ? n.fontStyle = "oblique" : n.fontStyle = "normal", t.indexOf("small-caps") > -1 ? n.fontVariant = "small-caps" : n.fontVariant = "normal";
        var e, i = t.split(" "),
            o = -1;
        for (n.fontSize = 26, e = 0; e < i.length; ++e)
            if (i[e].match(/(px|pt|em|%)/)) {
                o = e, n.fontSize = i[e];
                break
            } for (n.fontWeight = "normal", e = 0; e < o; ++e)
            if (i[e].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)) {
                n.fontWeight = i[e];
                break
            } if (o > -1 && o < i.length - 1) {
            for (n.fontFamily = "", e = o + 1; e < i.length; ++e) n.fontFamily += i[e] + " ";
            n.fontFamily = n.fontFamily.slice(0, -1)
        } else n.fontFamily = "Arial";
        return n
    },
    getTextWidth: function(t, n) {
        var e;
        if (n.hasOwnProperty("font")) e = n.font;
        else {
            e = (n.fontStyle ? n.fontStyle + " " : "") + (n.fontVariant ? n.fontVariant + " " : "") + (n.fontWeight ? n.fontWeight + " " : "") + (n.fontSize ? n.fontSize + " " : "") + (n.fontFamily ? n.fontFamily + " " : "")
        }
        var i = this.textCanvas || (this.textCanvas = document.createElement("canvas")),
            o = i.getContext("2d");
        return o.font = e, o.measureText(t).width
    }
};
Sys.ns("Animation"), Animation.Holder = {
    constructor: function(e) {
        var i = this,
            n = {
                id: void 0,
                target: void 0,
                prop: void 0,
                animation: {
                    keyFrames: [],
                    step: 0,
                    complete: !1
                },
                running: !1,
                playbackSpeed: void 0,
                loop: !1,
                readyToLoop: !1,
                onStart: void 0,
                onEnd: void 0,
                onUpdate: void 0,
                children: [],
                parent: void 0,
                localTime: 0,
                delay: 0,
                startTimeOffset: void 0,
                addToAnimationLoop: !1
            };
        e = Sys.applyProperties(n, e), e = i.parseConfig(e), i = Sys.applyProperties(i, e), e.addToAnimationLoop && Game.stage.view.animationManager.addToAnimationLoop(i)
    },
    parseConfig: function(e) {
        var i, n = {
                animation: {
                    keyFrames: [],
                    step: 0,
                    complete: !1
                }
            },
            t = function(e, i) {
                return e.time - i.time
            };
        if (Sys.iterate(e, function(e, a) {
                "animate" === e ? Sys.isObj(a) ? (Sys.iterate(a, function(e, t) {
                    i = {
                        time: Sys.utils.toInt(e)
                    }, Sys.isObj(t) && Sys.isDefined(t.value) ? i = Sys.applyProperties(i, t) : i.value = t, n.animation.keyFrames.push(i)
                }), n.animation.keyFrames.sort(t)) : Sys.isArray(a) ? n.animation.keyFrames = a : console.warn("Operation is in wrong format") : n[e] = a
            }), !Sys.isDefined(n.target) && Sys.isDefined(n.parent) && Sys.isDefined(n.parent.target) && (n.target = n.parent.target), !Sys.isDefined(n.id) && Sys.isDefined(n.target) && Sys.isDefined(n.target.id)) {
            var a = Sys.isDefined(n.prop) ? n.prop : "";
            n.id = n.target.id + ":" + a + "Animation"
        }
        if (Sys.isDefined(n.children) && n.children.length > 0) {
            var o = [],
                s = this;
            n.children.forEach(function(i) {
                var n;
                Sys.isDefined(i.localTime) ? n = i : (i.parent = {
                    target: e.target
                }, n = new Animation.Holder(i)), n.parent = s, o.push(n)
            }), n.children = o
        }
        return n
    },
    run: function(e) {
        var i = this,
            n = e.timeStep;
        0 === i.localTime && Sys.isDefined(i.startTimeOffset) && (n += i.startTimeOffset), Sys.isDefined(i.playbackSpeed) && (n *= i.playbackSpeed), i.localTime += n, i.localTime >= i.delay && (i.doAnimation(n), i.children.forEach(function(t) {
            t.running && (t.run({
                timeStep: n,
                time: e.time
            }), t.running && (i.running = !0, t.loop || t.readyToLoop || (i.readyToLoop = !1)))
        }), Sys.isDefined(i.onUpdate) && i.onUpdate(n)), i.loop && i.readyToLoop ? i.restoreOnLoop() : i.running || (Sys.isDefined(i.onEnd) && i.onEnd(), i.restore())
    },
    doAnimation: function(e) {
        var i = this;
        if (i.animation.keyFrames.length < 2 || !Sys.isDefined(i.target)) return i.readyToLoop = !0, void(i.running = !1);
        i.performAction(e) || (i.running = !1, i.readyToLoop = !0)
    },
    play: function(e, i) {
        var n = this,
            t = !Sys.isDefined(i) || i;
        n.running = !0, n.handleItems("play", e), 0 === n.localTime && Sys.isDefined(n.onStart) && n.onStart(), t && n.runParent()
    },
    runParent: function() {
        var e = this;
        Sys.isDefined(e.parent) && (e.parent.running = !0, e.parent.runParent())
    },
    pause: function(e) {
        this.running = !1, this.handleItems("pause", e)
    },
    stop: function(e, i) {
        var n = this,
            t = !Sys.isDefined(i) || i;
        n.running = !1, n.handleItems("stop", e), t && n.restore(e, !0)
    },
    restore: function(e, i) {
        var n = this,
            t = !Sys.isDefined(i) || i;
        n.localTime = 0, n.readyToLoop = !1, n.restoreAnimation(), n.handleItems("restore", e), n.running && t && n.play(e, !0)
    },
    restoreOnLoop: function(e, i) {
        var n = this;
        !(!Sys.isDefined(i) || i) && n.loop || (n.running = !0, n.readyToLoop = !1, n.restoreAnimation(), n.handleItems("restoreOnLoop"))
    },
    restoreAnimation: function() {
        this.animation.time = 0, this.animation.step = 0, this.animation.keyFrames.forEach(function(e) {
            Sys.isDefined(e.callback) && (e.callbackCompleted = !1)
        })
    },
    updateOperation: function(e) {
        var i = this,
            n = {};
        n.animate = e, n = i.parseConfig(n), i.animation = n.animation, i.restore()
    },
    handleItems: function(e, i) {
        (Sys.isDefined(i) && Sys.isArray(i) ? i : this.children).forEach(function(i) {
            i[e](!0, !1)
        })
    },
    setParent: function(e) {
        this.parent = e, e.children.push(this), Sys.isDefined(this.target) || (this.target = e.target)
    },
    addChild: function(e) {
        var i = this;
        Sys.isArray(e) ? e.forEach(function(e) {
            e.setParent(i)
        }) : Sys.isObj(e) && e.setParent(i)
    },
    findChild: function(e, i) {
        var n = Sys.isDefined(i) ? i : "id",
            t = !1,
            a = function(i) {
                var t = !1,
                    o = !1;
                return i.forEach(function(i) {
                    Sys.isDefined(i[n]) && i[n] === e && (t = i), Sys.isDefined(i.children) && (o = a(i.children), Sys.isObj(o) && (t = o))
                }), t
            };
        return this[n] === e ? this : (Sys.isDefined(this.children) && (t = a(this.children)), t)
    },
    performAction: function(e) {
        var i = this,
            n = i.animation,
            t = n.keyFrames,
            a = t.length,
            o = i.increaseAnimationTime(e),
            s = t[n.step],
            r = t[n.step + 1],
            d = !0;
        return i.handleCallback(s), r.time <= o && (i.progressKeyFrame(), s = t[n.step], n.step === a - 1 ? (r = s, d = !1) : r = t[n.step + 1]), i.calculate(n.time, s, r), d
    },
    progressKeyFrame: function(e) {
        var i, n = this,
            t = n.animation,
            a = t.keyFrames;
        t.step = Sys.isDefined(e) ? e : t.step + 1, i = a[t.step], n.handleCallback(i), Sys.isDefined(i.goTo) && n.doGoTo(i), t.step !== a.length - 1 ? t.time >= a[t.step + 1].time && n.progressKeyFrame() : n.loop && (t.time -= a[t.step].time, n.progressKeyFrame(0))
    },
    doGoTo: function(e) {
        var i = this;
        i.animation.time = i.animation.keyFrames[e.goTo].time, i.animation.step = e.goTo
    },
    calculate: function(e, i, n) {
        var t, a = this,
            o = a.calculateTime(e, i, n),
            s = i.value,
            r = n.value;
        Sys.isObj(s) ? Sys.iterate(s, function(e, n) {
            t = Sys.isDefined(a.prop) ? a.target[a.prop] : a.target, t[e] = Animation.utils.getInterpolationValue(n, r[e], o, i.ease, e)
        }) : a.target[a.prop] = Animation.utils.getInterpolationValue(s, r, o, i.ease)
    },
    handleCallback: function(e) {
        var i, n = e.callback;
        Sys.isDefined(n) && !e.callbackCompleted && (n.fireImmediately ? Sys.isString(n.func) ? n.scope.fireEvent(n.func, n.args) : Sys.isFunc(n.func) && n.func.apply(n.scope, n.args) : (i = Game.stage.view.animationManager.callbackContainer, i.push(n)), e.callbackCompleted = !0)
    },
    calculateTime: function(e, i, n) {
        var t = e - i.time,
            a = n.time - i.time;
        return 0 !== a ? t / a : 1
    },
    increaseAnimationTime: function(e) {
        return Sys.isDefined(this.animation.time) ? this.animation.time += e : this.animation.time = e, this.animation.time
    },
    animate: function(e, i) {
        this.updateOperation(e), i && this.play()
    }
}, Animation.Holder = Sys.extend(Sys.Observable, Animation.Holder, "Animation.Holder");
Sys.ns("Animation"), Animation.PixiAnimationManager = {
    PIXI_RENDERER_OPTIONS: {
        antialias: !1,
        resolution: 1,
        transparent: !1
    },
    constructor: function(e) {
        var n = this;
        Animation.PixiAnimationManager.superclass.constructor.call(n), n.canvasList = {}, n._preRenderCallbacks = [], n._postRenderCallbacks = [], n.addPreRenderCallback(n.animate, 0), n.deviceOptions = {}, n.gpuOptions = {}, n.initRenderer(e), n.initPlugins(e), n.currentTime = 0, n.timeFromStart = 0, n.paused = !1, n.currentStepTime = 0, n.setupImages(e.images, "notify:animationManager.allImagesLoaded"), n.callbackContainer = [], n.isRunning = !1, n.forceCanvasRendering = !1, n.selectRenderFunction()
    },
    start: function(e) {
        var n = this;
        n.isRunning = !0, n.currentTime = 0, n.lastTimeStepOccured = Date.now(), n.paused = !1, n.requestNextAnimationStep()
    },
    switchScenes: function(e) {
        this.currentScene = e
    },
    clearScene: function(e) {
        Sys.isDefined(e) && (this.scenes[e].lists = [])
    },
    addToRenderLoop: function(e, n) {
        var i = Sys.isDefined(n) ? n : this.currentScene;
        this.isInScene(e, i) ? e.prop.running = !0 : (this.scenes[i].lists.push(e), "reelsMainList" === e.id && this.getLayer("reel").addChild(e.pixiItem))
    },
    isInScene: function(e, n) {
        var i = Sys.isDefined(n) ? n : this.currentScene,
            t = this.scenes[i];
        return t.lists.contains(e) || t.listsToAdd.contains(e) || t.nonActiveLists.contains(e)
    },
    removeList: function(e, n) {
        var i = this,
            t = Sys.isDefined(n) ? n : i.currentScene,
            s = i.scenes[t],
            a = s.lists.indexOf(e),
            r = s.listsToAdd.indexOf(e),
            o = s.nonActiveLists.indexOf(e);
        a > -1 ? s.lists[a].prop.running = !1 : o > -1 ? s.nonActiveLists[o].prop.running = !1 : r > -1 && s.listsToAdd.splice(r, 1)
    },
    restore: function(e) {
        var n, i = this;
        n = Sys.isDefined(e.canvas) ? i.canvasList[e.canvas] : i.canvasList[i.defaultCanvas], e.prop.reset && (n.restore(), n.globalAlpha = 1), Sys.isDefined(e.prop.globalCompositeOperation) && (n.globalCompositeOperation = "source-over"), n.fillStyle = "", n.strokeStyle = "", n.shadowColor = "", n.strokeStyle = "", n.shadowBlur = ""
    },
    pauseAnimation: function() {
        this.paused = !0, clearTimeout(this.renderTimeout)
    },
    continueAnimation: function() {
        this.paused = !1, this.run()
    },
    shouldRenderNextFrame: function() {
        return !this.paused
    },
    run: function() {
        var e = this;
        e._preRenderCallbacks.forEach(function(n) {
            n.call(e)
        }), e.callbackContainer.length > 0 && (e.fireCallbacks(), e.callbackContainer.length = 0), e.shouldRenderNextFrame() ? (e.lastTimeStepOccured = e.updateTime(), e._postRenderCallbacks.forEach(function(n) {
            n.call(e)
        }), e.requestNextAnimationStep()) : e.isRunning = !1
    },
    fireCallbacks: function() {
        var e, n, i = this,
            t = i.callbackContainer.length;
        for (e = -1; ++e < t;) n = i.callbackContainer[e], Sys.isString(n.func) ? n.scope.fireEvent(n.func, n.args) : Sys.isFunc(n.func) && n.func.apply(n.scope, n.args)
    },
    calculate: function() {
        var e = this,
            n = this.scenes[this.currentScene];
        Sys.isDefined(n) ? n.run({
            timeStep: e.currentStepTime,
            time: e.currentTime
        }) : console.error("CanvasAnimationManager:calculate - currentScene '" + n + "' could not be found")
    },
    requestNextAnimationStep: function() {
        var e = this;
        e.animationFunction.call(window, function() {
            e.run()
        })
    },
    updateTime: function() {
        var e = this,
            n = Date.now(),
            i = n - e.lastTimeStepOccured;
        return i > 250 && (i = 1e3 / 60), e.currentStepTime = 0 | i, e.currentTime += e.currentStepTime, n
    },
    selectRenderFunction: function() {
        var e = this;
        this.animationFunction = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(n) {
            clearTimeout(e.renderTimeout), e.renderTimeout = setTimeout(n, Math.round(1e3 / 60))
        }
    },
    setupScenes: function(e) {
        var n = Sys.isDefined(e) ? e : [],
            i = {};
        n.push("base"), Sys.each(n, function(e) {
            i[e] = new Animation.CanvasAnimationScene({})
        }), this.scenes = i, this.scenes.base.play(), this.currentScene = "base"
    },
    setupImages: function(e, n) {
        var i = this,
            t = Sys.isDefined(e.files) ? e.files : e,
            s = Resources.readData("animationImages") || {};
        Resources.readData("spines"), Resources.readData("bitmapFonts"), Resources.readData("spriteConfigurations");
        i.imageReadyEvent = n, i.imagesRemaining = [], i.remainingImages = 0, i.imageConfig = e, Sys.iterate(t, function(e, n) {
            var t = new Image;
            t.onload = function() {
                i.remainingImages--, i.imagesLoaded()
            }, t.src = n, s[e] = t, i.imagesRemaining.push(t), i.remainingImages++
        }), Resources.storeData("animationImages", s)
    },
    assetsLoadedCompleteHandler: function(e, n) {
        var i = this,
            t = Resources.readData("spines") || {},
            s = Resources.readData("emitters") || {},
            a = Resources.readData("shaders") || {},
            r = i.imageConfig;
        n && (Sys.iterate(r.spineConfigurations, function(e, i) {
            t[e] = n[e].spineData
        }), Sys.iterate(r.emitterConfigurations, function(e, i) {
            s[e] = n[e].data
        }), Sys.iterate(r.shaders, function(e) {
            a[e] = n[e].data
        }), this.assetsLoadedCompletePluginsHandlers(e, n, r)), Resources.storeData("spines", t), Resources.storeData("images", void 0), Game.stage.model.storeData("images", void 0), i.imageConfig = void 0, i.pixiAssetsReady = !0, i.tryFireReady(), i.loadPluginsAssets()
    },
    loadPluginsAssets: function() {
        var e, n = this,
            i = n.tryFireReady.bind(n);
        if (void 0 !== n.plugins)
            for (e in n.plugins) n.plugins.hasOwnProperty(e) && n.plugins[e].plugin.loadAssets(i)
    },
    isReady: function() {
        var e, n = this,
            i = n.pixiAssetsReady,
            t = !0;
        if (void 0 !== n.plugins)
            for (e in n.plugins) n.plugins.hasOwnProperty(e) && !n.plugins[e].plugin.isReady() && (t = !1);
        return i && t
    },
    tryFireReady: function() {
        var e = this;
        e.isReady() && e.fireEvent(e.imageReadyEvent)
    },
    assetsLoadedCompletePluginsHandlers: function(e, n, i) {
        var t, s = this;
        if (void 0 !== s.plugins)
            for (t in s.plugins) s.plugins.hasOwnProperty(t) && s.plugins[t].plugin.onAssetsLoadingComplete(e, n, i)
    },
    setupPixiAssets: function() {
        var e = this,
            n = Resources.readData("animationImages"),
            i = Resources.readData("spines") || {},
            t = Resources.readData("emitters") || {},
            s = Resources.readData("shaders") || {},
            a = Resources.readData("spriteSheets") || {},
            r = Resources.readData("bitmapFonts") || {},
            o = Resources.readData("spriteConfigurations") || {},
            u = [],
            c = e.imageConfig,
            d = Platform.isDesktopDevice ? 1 : .75,
            l = {};
        if (e.pixiAssetsReady = !1, Sys.iterate(n, function(n, i) {
                var t = e.getCustomResolution(n, d),
                    s = new PIXI.BaseTexture(i, 0, t.scale);
                n = t.name, s.imageUrl = n, PIXI.utils.BaseTextureCache[s.imageUrl] = s;
                var a = new PIXI.Texture(s);
                PIXI.utils.TextureCache[n] = a, l[n] = a
            }), e.images = l, Resources.storeData("animationImages", l), Sys.isDefined(c.spineConfigurations) && (Sys.iterate(c.spineConfigurations, function(e, n) {
                u.push({
                    name: e,
                    src: n
                }), i[e] = n
            }), Resources.storeData("spines", i)), Sys.isDefined(c.emitterConfigurations) && (Sys.iterate(c.emitterConfigurations, function(e, n) {
                u.push({
                    name: e,
                    src: n
                }), t[e] = n
            }), Resources.storeData("emitters", t)), Sys.isDefined(c.shaders) && (Sys.iterate(c.shaders, function(e, n) {
                u.push({
                    name: e,
                    src: n
                }), s[e] = n
            }), Resources.storeData("shaders", s)), Sys.isDefined(c.spriteSheetConfigurations) && (Sys.iterate(c.spriteSheetConfigurations, function(e, n) {
                u.push({
                    name: e,
                    src: n
                }), a[e] = n
            }), Resources.storeData("spriteSheets", a)), this.setupPluginsAssets(u, c), Sys.isDefined(c.bitmapFontConfigurations) && (Sys.iterate(c.bitmapFontConfigurations, function(e, n) {
                u.push({
                    name: e,
                    src: n
                }), r[e] = n
            }), Resources.storeData("bitmapFonts", r)), u.length > 0) {
            e.loader = new PIXI.loaders.Loader;
            var p = e.assetsLoadedCompleteHandler.bind(e);
            e.loader.once("complete", p);
            for (var f = 0; f < u.length; f++) e.loader.add(u[f].name, u[f].src);
            e.loader.once("error", function(n, i, t) {
                e.loader.removeListener("complete", p), e.fireEvent("request:loaderErrorHandler.handleRequestError", t.xhr)
            }), e.loader.load()
        } else e.assetsLoadedCompleteHandler();
        Sys.isDefined(c.spriteConfigurations) && Sys.iterate(c.spriteConfigurations, function(e, n) {
            o[e] = n
        }), e.spriteConfigurations = o, Resources.storeData("spriteConfigurations", o)
    },
    setupPluginsAssets: function(e, n) {
        var i, t = this;
        if (void 0 !== t.plugins)
            for (i in t.plugins) t.plugins.hasOwnProperty(i) && t.plugins[i].plugin.setupAssets(e, n)
    },
    updateActiveRenderContextSize: function() {
        var e = this,
            n = Environment.getResolution();
        e.renderer.resize(n.width + (2 * n.portraitLeftOffset || 0), n.height)
    },
    addBlurredSymbols: function(e, n, i) {
        var t, s, a, r, o = Platform.isDesktopDevice ? 1 : .75,
            u = Resources.readData("animationImages");
        e.forEach(function(e) {
            u[e] && (t = i(u[e].baseTexture.source, u[e].baseTexture.source.height, 15, !0), s = new PIXI.BaseTexture(t, 0, o), PIXI.utils.BaseTextureCache[s.imageUrl] = s, a = new PIXI.Texture(s), r = e + n, PIXI.utils.TextureCache[r] = a, u[r] = a)
        }), Resources.storeData("animationImages", u)
    },
    getCustomResolution: function(e, n) {
        var i = /@(.+)x/.exec(e);
        return i ? {
            scale: parseFloat(i[1]),
            name: e.slice(0, i.index)
        } : {
            scale: n,
            name: e
        }
    },
    imagesLoaded: function() {
        this.remainingImages < 1 && this.canImagesBeUsed()
    },
    canImagesBeUsed: function() {
        var e, n = this,
            i = n.imagesRemaining,
            t = i.length;
        for (e = -1; ++e < t;) i[e].width > 0 && i[e].height > 0 && (i.splice(e, 1), --e, --t);
        clearTimeout(n.tryToDrawImagesTimeout), i.length > 1 ? n.tryToDrawImagesTimeout = setTimeout(function() {
            n.canImagesBeUsed()
        }, 50) : (n.setupPixiAssets(), n.fireEvent("notify:animationManager.animationLoopInitialized"))
    },
    onResize: function() {
        var e = this,
            n = Environment.getVirtualToWindowScale(3);
        e.rootDisplayObject.scale = new PIXI.Point(n, n)
    },
    getLayer: function(e) {
        return Sys.isDefined(this.layers[e]) ? this.layers[e] : null
    },
    createLayers: function(e) {
        var n = this;
        Sys.isDefined(e.layers) ? (n.layers = {}, e.layers.forEach(function(e) {
            n.layers[e] = new PIXI.Container, n.layers[e].name = e, n.rootDisplayObject.addChild(n.layers[e])
        })) : (n.layers = {
            background: new PIXI.Container,
            tickerTape: new PIXI.Container,
            reelBackground: new PIXI.Container,
            reel: new PIXI.Container,
            noWinSymbols: new PIXI.Container,
            winSymbolFrames: new PIXI.Container,
            winPresentationLayer: new PIXI.Container,
            winSymbols: new PIXI.Container,
            betLines: new PIXI.Container,
            betLineIndicators: new PIXI.Container,
            winAnims: new PIXI.Container,
            countUp: new PIXI.Container,
            bigWin: new PIXI.Container,
            winCoinNumbers: new PIXI.Container,
            userInterface: new PIXI.Container,
            countDownFreeSpins: new PIXI.Container,
            splashScreens: new PIXI.Container,
            paytableBackground: new PIXI.Container,
            logo: new PIXI.Container,
            introMovie: new PIXI.Container,
            quickStopper: new PIXI.Container
        }, Sys.iterate(n.layers, function(e, i) {
            i.name = e, n.rootDisplayObject.addChild(i)
        }))
    },
    setupDeviceOptions: function() {
        this.addDeviceOptions({})
    },
    addDeviceOptions: function(e) {
        for (var n in e) e.hasOwnProperty(n) && (this.deviceOptions[n] = e[n])
    },
    setupGpuOptions: function() {
        this.addGpuOptions({
            "Mali-4": {
                PIXI_RENDERER_OPTIONS: {
                    preserveDrawingBuffer: !0
                }
            }
        })
    },
    addGpuOptions: function(e) {
        for (var n in e) e.hasOwnProperty(n) && (this.gpuOptions[n] = e[n])
    },
    getDeviceOptions: function() {
        var e = this.deviceOptions,
            n = navigator.userAgent,
            i = {};
        for (var t in e)
            if (e.hasOwnProperty(t) && n.includes(t)) {
                var s = e[t];
                for (var a in s) s.hasOwnProperty(a) && (i[a] = s[a])
            } return i
    },
    getGpuOptions: function() {
        var e, n, i, t, s, a = this.gpuOptions,
            r = {};
        if (e = document.createElement("canvas"), e.setAttribute("width", "1"), e.setAttribute("height", "1"), document.body.appendChild(e), n = document.getElementsByTagName("canvas"), i = n[0].getContext("webgl", {
                stencil: !0
            }), n[0].parentNode.removeChild(n[0]), !i) return r;
        if (null === (t = i.getExtension("WEBGL_debug_renderer_info"))) return r;
        s = i.getParameter(t.UNMASKED_RENDERER_WEBGL);
        for (var o in a)
            if (a.hasOwnProperty(o) && s.includes(o)) {
                var u = a[o];
                for (var c in u) u.hasOwnProperty(c) && (r[c] = u[c])
            } return r
    },
    initRenderer: function(e) {
        var n, i, t, s, a = this,
            r = new PIXI.Container,
            o = "Error",
            u = Resources.readData("queryData");
        this.setupGpuOptions(), this.setupDeviceOptions(), s = this.getGpuOptions(), this.applyGpuOptions(s), t = this.getDeviceOptions(), this.applyDeviceOptions(t), i = Sys.isDefined(u.forcecanvasrendering) ? u.forcecanvasrendering : this.forceCanvasRendering, Sys.isDefined(i) && !0 === i ? (n = new PIXI.CanvasRenderer(e.width, e.height, a.PIXI_RENDERER_OPTIONS), o = "Canvas") : (n = PIXI.autoDetectRenderer(e.width, e.height, a.PIXI_RENDERER_OPTIONS), o = "Auto - ", Sys.isDefined(n.filterManager) ? o += "WebGL" : o += "Canvas"), n.view.id = "canvasAnimationManager", n.plugins.interaction.autoPreventDefault = !1, e.parent.appendChild(n.view), a.stage = r, a.rootDisplayObject = new PIXI.Container, a.stage.addChild(a.rootDisplayObject), a.renderer = n, a.renderDisplay = o, a.createLayers(e), a.onResize(), a.animationBuffer = [], a.addPreRenderCallback(a.renderer.render.bind(a.renderer, a.stage))
    },
    initPlugins: function(e) {
        var n, i = this;
        i.plugins = {}, void 0 !== e.plugins && e.plugins.length > 0 && e.plugins.forEach(function(e) {
            void 0 !== e && (i.plugins[e.id] = e, e.plugin.init(i), n = function() {
                this.update(i.currentStepTime)
            }.bind(e.plugin), "post" === e.updateType ? i.addPostRenderCallback(n) : i.addPreRenderCallback(n))
        })
    },
    animate: function() {
        var e = this;
        e.animationBuffer.forEach(function(n) {
            n.running && n.run({
                timeStep: e.currentStepTime,
                time: e.currentTime
            })
        })
    },
    addToAnimationLoop: function(e) {
        Sys.isArray(e) ? this.addHoldersToLoop(e) : this.addHolderToLoop(e)
    },
    removeFromAnimationLoop: function(e) {
        var n, i = this;
        Sys.isArray(e) ? e.forEach(function(e) {
            -1 !== (n = i.animationBuffer.indexOf(e)) && i.animationBuffer.splice(n, 1)
        }) : -1 !== (n = i.animationBuffer.indexOf(e)) && i.animationBuffer.splice(n, 1)
    },
    forceCanvasRedraw: function() {
        var e = this.renderer.view;
        e.width++, e.width--
    },
    addHoldersToLoop: function(e) {
        var n = this;
        e.forEach(function(e) {
            n.addHolderToLoop(e)
        })
    },
    addHolderToLoop: function(e) {
        this.isInAnimationLoop(e) || this.animationBuffer.push(e)
    },
    isInAnimationLoop: function(e) {
        return -1 !== this.animationBuffer.indexOf(e)
    },
    addPreRenderCallback: function(e, n) {
        this._addRenderCallback(this._preRenderCallbacks, e, n)
    },
    removePreRenderCallback: function(e) {
        this._removeRenderCallback(this._preRenderCallbacks, e)
    },
    addPostRenderCallback: function(e, n) {
        this._addRenderCallback(this._postRenderCallbacks, e, n)
    },
    removePostRenderCallback: function(e) {
        this._removeRenderCallback(this._postRenderCallbacks, e)
    },
    _addRenderCallback: function(e, n, i) {
        if (!Sys.isFunc(n)) return void console.error("Given callback is not a function");
        Sys.isDefined(i) ? e.splice(i, 0, n) : e.push(n)
    },
    _removeRenderCallback: function(e, n) {
        e.splice(e.indexOf(n), 1)
    },
    applyGpuOptions: function(e) {
        Sys.isDefined(e.forceCanvas) && (this.forceCanvasRendering = e.forceCanvas), Sys.isDefined(e.PIXI_RENDERER_OPTIONS) && Sys.applyProperties(this.PIXI_RENDERER_OPTIONS, e.PIXI_RENDERER_OPTIONS)
    },
    applyDeviceOptions: function(e) {
        Sys.isDefined(e.forceCanvas) && (this.forceCanvasRendering = e.forceCanvas)
    }
}, Animation.PixiAnimationManager = Sys.extend(Sys.Observable, Animation.PixiAnimationManager, "Animation.PixiAnimationManager");
Sys.ns("Animation"), Animation.CanvasAnimationList = {}, Animation.CanvasAnimationList = Sys.extend(Sys.Observable, Animation.CanvasAnimationList, "Animation.CanvasAnimationList");
Sys.ns("Animation"), Animation.BufferedReelList = {
    constructor: function(t) {
        var e;
        Animation.BufferedReelList.superclass.constructor.call(this, {}), e = this.applyConfig(t), this.model = this.createModel(e), this.id = e.id, this.hasSignaledReelStop = !0, this.animationItems = this.createAnimationItems(), this.depthDistributionArray = this.calculateDepthDistributionArray(), this.symbolsWithSpecialEffects = {}
    },
    applyConfig: function(t) {
        var e = this,
            i = this.applyDefaultsToConfig(t);
        return this.symbolWidths = i.symbolWidths, this.symbolHeights = i.symbolHeights, this.blurredSymbolWidths = i.blurredSymbolWidths, this.blurredSymbolHeights = i.blurredSymbolHeights, this.baseDepth = i.baseDepth, this.depthDistribution = i.depthDistribution, this.symbolSpecificDepthModifiers = i.symbolSpecificDepthModifiers, this.maxBlurredSymbolHeight = 0, Sys.iterate(i.blurredSymbolHeights, function(t, i) {
            e.maxBlurredSymbolHeight = Math.max(e.maxBlurredSymbolHeight, i)
        }), this.maxBlurredSymbolWidth = 0, Sys.iterate(i.blurredSymbolWidths, function(t, i) {
            e.maxBlurredSymbolWidth = Math.max(e.maxBlurredSymbolWidth, i)
        }), this.orientation = i.orientation, this.left = i.left, this.top = i.top, "vertical" === this.orientation ? this.left -= (this.maxBlurredSymbolWidth - this.symbolWidths.standard) / 2 : this.top -= (this.maxBlurredSymbolHeight - this.symbolHeights.standard) / 2, this.reelAreaLength = i.visibleLength, this.spinDirection = i.spinDirection, this.blurOffsetFromStart = i.blurOffsetFromStart, this.blurOffsetFromEnd = i.blurOffsetFromEnd, this.maxTimeStep = Math.round(.75 * i.timeToMoveOneSlot), i
    },
    applyDefaultsToConfig: function(t) {
        var e = {
            id: "UnidentifiedReelList",
            symbolWidths: 150,
            symbolHeights: 150,
            blurredSymbolWidths: void 0,
            blurredSymbolHeights: void 0,
            symbolCenterToCenter: 150,
            baseDepth: 0,
            depthDistribution: {
                type: "increasing",
                step: 1
            },
            symbolSpecificDepthModifiers: {},
            numberOfOutcomeSymbols: 3,
            top: 0,
            left: 0,
            orientation: "vertical",
            visibleLength: void 0,
            outcomeOffset: 0,
            spinDirection: "positive",
            timeToMoveOneSlot: 1e3,
            startBounceSupportPointOffset: void 0,
            endBounceSupportPointOffsets: [],
            endBounceDurations: [],
            symbolRetrievalFunction: function() {
                return []
            },
            reelStartCallback: function() {},
            reelStartCompleteCallback: function() {},
            reelStartedStoppingCallback: function() {},
            reelBounceStartCallback: function() {},
            reelStoppedCallback: function() {}
        };
        return Sys.applyProperties(e, t), Sys.isNumber(e.symbolWidths) && (e.symbolWidths = {
            standard: e.symbolWidths
        }), Sys.isNumber(e.symbolHeights) && (e.symbolHeights = {
            standard: e.symbolHeights
        }), Sys.isDefined(e.blurredSymbolWidths) ? Sys.isNumber(e.blurredSymbolWidths) && (e.blurredSymbolWidths = {
            standard: e.blurredSymbolWidths
        }) : e.blurredSymbolWidths = e.symbolWidths, Sys.isDefined(e.blurredSymbolHeights) ? Sys.isNumber(e.blurredSymbolHeights) && (e.blurredSymbolHeights = {
            standard: e.blurredSymbolHeights
        }) : e.blurredSymbolHeights = e.symbolHeights, Sys.isDefined(e.visibleLength) || (e.visibleLength = e.numberOfOutcomeSymbols * e.symbolCenterToCenter), Sys.isDefined(e.startBounceSupportPointOffset) || (e.startBounceSupportPointOffset = -2 * e.symbolCenterToCenter), e
    },
    refresh: function(t) {
        var e = this.applyConfig(t);
        this.updateModel(e), "stopping" === this.model.getState() && (this.rotatedDuringSpinStop = !0), this.depthDistributionArray = this.calculateDepthDistributionArray()
    },
    correctMisalignedOutcomeOnDeviceRotate: function() {
        this.rotatedDuringSpinStop && (this.presentOutcome(), this.rotatedDuringSpinStop = !1)
    },
    updateModel: function(t) {
        var e = "vertical" === t.orientation,
            i = e ? this.maxBlurredSymbolHeight : this.maxBlurredSymbolWidth,
            o = e ? this.symbolHeights.standard : this.symbolWidths.standard;
        this.model.refresh({
            symbolLength: i,
            symbolSpacing: t.symbolCenterToCenter - i,
            numberOfOutcomeSymbols: t.numberOfOutcomeSymbols,
            visibleWindowLength: t.visibleLength,
            outcomeOffset: t.outcomeOffset - (i - o) / 2,
            startBounceSupportPointOffset: t.startBounceSupportPointOffset,
            endBounceSupportPointOffsets: t.endBounceSupportPointOffsets,
            endBounceDurations: t.endBounceDurations,
            timeToMoveOneSlot: t.timeToMoveOneSlot
        })
    },
    getSymbolLayout: function() {
        var t, e, i = [],
            o = 0;
        for (this.indexOfFirstOutcomeItem && (o = this.indexOfFirstOutcomeItem), e = 0; e < this.model.numberOfOutcomeSymbols; ++e) t = this.animationItems[o + e], i.push({
            top: t.prop.top,
            left: t.prop.left,
            width: t.prop.width,
            height: t.prop.height,
            depth: t.prop.depth
        });
        return i
    },
    createModel: function(t) {
        var e = "vertical" === t.orientation,
            i = e ? this.maxBlurredSymbolHeight : this.maxBlurredSymbolWidth,
            o = e ? this.symbolHeights.standard : this.symbolWidths.standard;
        return new Animation.BufferedReelModel({
            id: t.id,
            symbolLength: i,
            symbolSpacing: t.symbolCenterToCenter - i,
            numberOfOutcomeSymbols: t.numberOfOutcomeSymbols,
            visibleWindowLength: t.visibleLength,
            outcomeOffset: t.outcomeOffset - (i - o) / 2,
            startBounceSupportPointOffset: t.startBounceSupportPointOffset,
            endBounceSupportPointOffsets: t.endBounceSupportPointOffsets,
            endBounceDurations: t.endBounceDurations,
            timeToMoveOneSlot: t.timeToMoveOneSlot,
            symbolRetrievalFunction: t.symbolRetrievalFunction,
            reelStartCallback: t.reelStartCallback,
            reelStartCompleteCallback: t.reelStartCompleteCallback,
            reelStartedStoppingCallback: t.reelStartedStoppingCallback,
            reelBounceStartCallback: t.reelBounceStartCallback,
            reelStoppedCallback: t.reelStoppedCallback,
            reelStartSpinParameters: t.reelStartSpinParameters,
            reelStopVelocityFactor: t.reelStopVelocityFactor
        })
    },
    reset: function() {
        this.model.reset()
    },
    createAnimationItems: function() {
        var t, e = [],
            i = this.model.visibleSymbolsCount;
        for (t = 0; t < i; t++) e.push(new Animation.CanvasAnimationItem({}));
        return e
    },
    calculateDepthDistributionArray: function() {
        var t, e, i = this.model.visibleSymbolsCount,
            o = this.depthDistribution.type,
            s = Math.floor(i / 2),
            r = [];
        for (t = 0; t < i; t++) "increasing" === o ? e = t : "decreasing" === o ? e = i - t : "curve-out" === o ? e = Math.abs(s - Math.abs(s - t)) : "curve-in" === o && (e = Math.abs(s - t)), r.push(e * this.depthDistribution.step);
        return r
    },
    startSpin: function(t) {
        this.model.start(t)
    },
    stopSpin: function(t) {
        this.model.storeSpinOutcome(t.symbols), this.model.stop()
    },
    isStopping: function() {
        return this.model.isStopping()
    },
    presentOutcome: function() {
        this.model.presentOutcome()
    },
    setAllReelSymbols: function(t) {
        this.model.setInitialOutcome(t.symbols)
    },
    setReelSymbol: function(t, e) {
        this.model.updateOutcome(e, t)
    },
    setSymbols: function(t) {
        for (var e = -1, i = this.model.numberOfOutcomeSymbols; ++e < i;) Sys.isDefined(t[e]) && this.model.updateOutcome(e, t[e])
    },
    run: function(t, e) {
        var i, o, s = Math.min(t.timeStep, this.maxTimeStep);
        return this.model.move(s), i = this.model.getSymbolsToRender(), o = this.getReelItemsForRendering(i, t, e), this.addDepthModifiers(o), o
    },
    getReelItemsForRendering: function(t, e, i) {
        var o, s, r, n, l, a, h, m, u, d, p, f, S, b, c, y = this.shouldUseMotionBlur(),
            g = this.maxBlurredSymbolWidth,
            O = this.maxBlurredSymbolHeight,
            v = "vertical" === this.orientation ? O : g,
            D = [],
            B = y ? this.blurredSymbolWidths : this.symbolWidths,
            M = y ? this.blurredSymbolHeights : this.symbolHeights,
            C = Environment.determineResolution().virtualToWindowScale,
            W = t.length;
        for (this.indexOfFirstOutcomeItem = this.animationItems.length - 1, s = -1; ++s < W;) t[s].isOutcomeSymbol && s < this.indexOfFirstOutcomeItem && (this.indexOfFirstOutcomeItem = s), r = this.animationItems[s], n = t[s].symbol, h = Sys.isDefined(B[n]) ? n : "standard", m = Sys.isDefined(M[n]) ? n : "standard", l = t[s].position, a = v, u = B[h], d = M[m], S = "vertical" === this.orientation ? d : u, b = (v - S) / 2, c = 0, y ? n += "-BLURRED" : this.shouldUseSpecialEffect(n) && (n += "-SPECIAL_EFFECT"), p = Game.stage.view.animationManager.images[n], f = p.width / Math.round(u * C), l < 0 && (c = -l, l = 0, a -= c), b > 0 && (c > b ? (c -= b, a -= b) : c + a < b ? (c = 0, a = 0) : (a += b - c, l += b - c, c = 0), c + a > S && (a = S - c)), o = l + a - this.reelAreaLength, o > 0 && (a -= o), r.isRunning() && a > 0 ? (l = Math.floor(l), a = Math.ceil(a), c = Math.floor(c), "negative" === this.spinDirection && (l = this.reelAreaLength - l, l -= a, c = 0 === c ? S - a : 0), "vertical" === this.orientation ? r.prop = Sys.applyProperties(r.prop, {
            image: n,
            SX: 0,
            SY: Math.floor(c * C),
            SWidth: Math.floor(u * C),
            SHeight: Math.floor(a * C),
            left: Math.floor(this.left + (g - u) / 2),
            top: this.top + l,
            width: u,
            height: a,
            depth: this.baseDepth,
            pivot: {
                x: -u / 2,
                y: -a / 2
            }
        }) : r.prop = Sys.applyProperties(r.prop, {
            image: n,
            SX: Math.floor(c * C),
            SY: 0,
            SWidth: Math.floor(a * C),
            SHeight: Math.floor(d * C),
            left: this.left + l,
            top: Math.floor(this.top + (O - d) / 2),
            width: a,
            height: d,
            depth: this.baseDepth,
            pivot: {
                x: -a / 2,
                y: -d / 2
            }
        }), 1 !== f && (r.prop.SWidth = r.prop.SWidth * f, r.prop.SHeight = r.prop.SHeight * f, r.prop.SX = r.prop.SX * f, r.prop.SY = r.prop.SY * f), r.prop.SWidth > 0 && r.prop.SHeight > 0 ? (r.run(e, i), D.push(r)) : r.prop.image = void 0) : r.prop.image = void 0;
        return D
    },
    shouldUseMotionBlur: function() {
        var t = this.model.getState(),
            e = Date.now(),
            i = this.model.getStartTime(),
            o = this.model.getStartedStoppingTime(),
            s = this.model.getStopDuration();
        return !Sys.isNumber(this.blurOffsetFromStart) || "starting" !== t && "windingDown" !== t ? Sys.isNumber(this.blurOffsetFromEnd) && "stopping" === t && null !== o ? e < o + (s - this.blurOffsetFromEnd) : this.model.isSpinning() : e >= i + this.blurOffsetFromStart
    },
    addDepthModifiers: function(t) {
        var e, i, o, s = this.getReelPositionDepthOffsets(t.length),
            r = this.symbolSpecificDepthModifiers;
        Sys.each(t, function(t, n) {
            o = s[n], e = t.prop.image, "string" == typeof e && (i = e.match(/SYM\d+/), Sys.isArray(i) && Sys.isDefined(r[i[0]]) ? o += r[i[0]] : Sys.isDefined(r[e]) && (o += r[e])), t.prop.depth += o
        })
    },
    getReelPositionDepthOffsets: function(t) {
        var e = this.depthDistributionArray;
        return "increasing" === this.depthDistribution || "decreasing" === this.depthDistribution ? e : e.slice(Math.floor((e.length - t) / 2))
    },
    hideSymbols: function(t) {
        this.setPlayingStateForSymbols(t, !1)
    },
    showSymbols: function(t) {
        this.setPlayingStateForSymbols(t, !0)
    },
    setPlayingStateForSymbols: function(t, e) {
        var i, o;
        if (Sys.isArray(t))
            for (i = t.length, o = -1; ++o < i;) this.setPlayingStateForSymbol(t[o], e);
        else this.setPlayingStateForSymbol(t, e)
    },
    setPlayingStateForSymbol: function(t, e) {
        var i = this.animationItems;
        t += this.indexOfFirstOutcomeItem, Sys.isNumber(t) && Sys.isDefined(i[t]) && (e ? i[t].play() : i[t].stop())
    },
    shouldUseSpecialEffect: function(t) {
        return !0 === this.symbolsWithSpecialEffects[t]
    },
    getSlotLength: function() {
        return this.model.slotLength
    },
    getVisibleSymbolsCount: function() {
        return this.model.visibleSymbolsCount
    },
    getBufferOffset: function() {
        return this.model.windowToBufferOffset
    },
    setBufferOffset: function(t) {
        this.model.setBufferOffset(t)
    },
    getTimeToMoveOneSlot: function() {
        return this.model.timeToMoveOneSlot
    },
    setTimeToMoveOneSlot: function(t) {
        this.maxTimeStep = Math.round(.75 * t), this.model.setTimeToMoveOneSlot(t)
    },
    setReelStartSpinParameters: function(t) {
        this.model.setReelStartSpinParameters(t)
    },
    setBlurOffsetFromStart: function(t) {
        this.blurOffsetFromStart = t
    },
    setEndBounceSupportPointOffsets: function(t) {
        this.model.setEndBounceSupportPointOffsets(t)
    },
    setEndBounceDurations: function(t) {
        this.model.setEndBounceDurations(t)
    }
}, Animation.BufferedReelList = Sys.extend(Animation.CanvasAnimationList, Animation.BufferedReelList, "Animation.BufferedReelList");
Sys.ns("AvalancheReel.Plugin"), AvalancheReel.Plugin.Plugin = function() {}, AvalancheReel.Plugin.Plugin.prototype = {
    createSymbol: function() {
        var e = Resources.readData("config").reelGroups;
        return this.config = e.default.plugin, new PIXI.Container
    },
    setSymbol: function(e, n) {},
    setupEvents: function(e, n) {
        n && e.on(n)
    },
    setReelIndex: function(e) {
        this.reelIndex = e
    },
    setSymbols: function(e) {
        this.symbols = e
    },
    _setSymbolProperties: function(e, n) {
        for (var t in n) n.hasOwnProperty(t) && (e[t] = n[t])
    }
};
Sys.ns("AvalancheReel.Plugin"), AvalancheReel.Plugin.Spine = {
    constructor: function() {},
    createSymbol: function() {
        AvalancheReel.Plugin.Spine.superclass.createSymbol.call(this);
        var e = Game.PIXIFactory.createSpineAnimation(this.config.spine);
        return this.config.properties && this._setSymbolProperties(e, this.config.properties), e
    },
    setSymbol: function(e, t) {
        e.skeleton.setSkin(null), e.skeleton.setSlotsToSetupPose(), e.skeleton.setSkinByName(t.toLowerCase())
    },
    setupEvents: function(e) {
        AvalancheReel.Plugin.Spine.superclass.setupEvents.apply(this, [e, {
            "request:reel.setSymbolAnimation": this.setSymbolAnimation.bind(this),
            "request:reel.addSymbolAnimation": this.addSymbolAnimation.bind(this)
        }])
    },
    setSymbolAnimation: function(e, t, n, i, s) {
        e === this.reelIndex && (this.symbols[t].sprite.state.setAnimation(0, n, i), s && (this.symbols[t].sprite.state.onComplete = function() {
            s(), this.symbols[t].sprite.state.onComplete = null
        }.bind(this)))
    },
    addSymbolAnimation: function(e, t, n, i, s, l) {
        e === this.reelIndex && (s = s || 0, this.symbols[t].sprite.state.addAnimation(0, n, i, s), l && (this.symbols[t].sprite.state.onComplete = function() {
            l(), this.symbols[t].sprite.state.onComplete = null
        }.bind(this)))
    }
}, AvalancheReel.Plugin.Spine = Sys.extend(AvalancheReel.Plugin.Plugin, AvalancheReel.Plugin.Spine, "AvalancheReel.Plugin.Spine");
Sys.ns("AvalancheReel.Plugin"), AvalancheReel.Plugin.Sprite = {
    constructor: function() {},
    createSymbol: function() {
        AvalancheReel.Plugin.Sprite.superclass.createSymbol.call(this);
        var e = Game.PIXIFactory.createSpriteWithTexture("empty texture to be replaced later");
        return this.config.properties && this._setSymbolProperties(e, this.config.properties), e
    },
    setSymbol: function(e, t) {
        e.texture = Resources.readData("animationImages")[t]
    }
}, AvalancheReel.Plugin.Sprite = Sys.extend(AvalancheReel.Plugin.Plugin, AvalancheReel.Plugin.Sprite, "AvalancheReel.Plugin.Sprite");
Sys.ns("PIXIAnimation"), PIXIAnimation.AvalancheSymbol = function(t, e, i, n) {
    this.id = t, this.position = e || new PIXI.Point, this.currentSpeed = 0, this._acceleration = i || 0, this._maxSpeed = n || 0, this._active = !1, this._exploded = !1, this._locked = !1
}, PIXIAnimation.AvalancheSymbol.prototype = {
    moveSymbol: function(t, e) {
        if (this._active && !this._locked) {
            var i = e - t,
                n = this.currentSpeed,
                o = this._acceleration,
                s = n * i + o * i * i;
            this.setCurrentSpeed(Math.sqrt(n * n + 2 * o * s)), this.position.y += 0 !== this._maxSpeed && s > this._maxSpeed ? this._maxSpeed : s
        }
        return this.position
    },
    setCurrentSpeed: function(t) {
        this.currentSpeed = t
    },
    setAcceleration: function(t) {
        this._acceleration = t
    },
    setActive: function(t) {
        this._active = t
    },
    isActive: function() {
        return this._active
    },
    setExploded: function(t) {
        this._exploded = t
    },
    hasExploded: function() {
        return this._exploded
    },
    setLocked: function(t) {
        this._locked = t
    },
    isLocked: function() {
        return this._locked
    }
};
Sys.ns("PIXIAnimation"), PIXIAnimation.AvalancheReel = {
    INCREASING_DEPTH: "increasing",
    DECREASING_DEPTH: "decreasing",
    CURVE_IN_DEPTH: "curve-in",
    CURVE_OUT_DEPTH: "curve-out",
    constructor: function(t, e) {
        PIXIAnimation.AvalancheReel.superclass.constructor.apply(this, arguments), t = this.applyDefaultsToConfig(t), this.config = t, this.id = t.id, this.plugin = e, this.createModel(t, this.updateOutcome.bind(this), this.symbolsDropIn.bind(this), this.reelStoppedSpinning.bind(this), this.symbolLanded.bind(this), this.symbolsExploded.bind(this)), this.setupEvents(), this.createReel(t), this.setSymbols(this.model.getOutcomeSymbols()), this.startRenderLoop(), this.plugin.setSymbols(this.symbols), this.plugin.setReelIndex(this.model.getIndex())
    },
    setupEvents: function() {
        this.on({
            "notify:responseParser.responseParsed": this.model.processServerResponse.bind(this.model)
        }), this.addListener("request:reel" + this.model.getIndex() + ".waitWithExplosion", this.waitWithExplosion), this.addListener("request:reel" + this.model.getIndex() + ".continueExplosion", this.continueExplosion), this.addListener("request:reel" + this.model.getIndex() + ".waitWithDropIn", this.waitWithDropIn), this.addListener("request:reel" + this.model.getIndex() + ".continueDropIn", this.continueDropIn), this.addListener("request:reel" + this.model.getIndex() + ".lockSymbols", this.model.lockSymbols.bind(this.model)), this.addListener("request:reel" + this.model.getIndex() + ".unlockSymbols", this.model.unlockSymbols.bind(this.model)), this.addListener("request:reel" + this.model.getIndex() + ".dropInSymbols", this.onDropInRequested), this.plugin.setupEvents(this)
    },
    startRenderLoop: function() {
        this.running = !0, Game.stage.view.animationManager.addToAnimationLoop(this)
    },
    hideSymbols: function(t) {
        for (var e = this.symbols, i = 0; i < t.length; ++i) e[t[i]].visible = !1
    },
    showSymbols: function(t) {
        for (var e = this.symbols, i = 0; i < t.length; ++i) e[t[i]].visible = !0
    },
    applyDefaultsToConfig: function(t) {
        var e = new PIXIAnimation.AvalancheConfig;
        return e.id = t.id || "UnidentifiedReelList", e.symbolCenterToCenter = t.symbolWidths.standard, e.depthDistribution = {
            type: this.INCREASING_DEPTH,
            step: 1
        }, e.reelDepthModifiers = [0, 1, 2, 1, 0], e.visibleLength = t.numberOfOutcomeSymbols * t.symbolCenterToCenter, e.acceleration = {
            standard: .01,
            quickSpin: .02
        }, e.maxSpeed = 0, e.distanceBeforeNextSymbolDrop = 50, e.distanceBeforeNewOutcome = 1e3, e.distanceToDropFromDefault = 550, e.symbolMaxRotation = 0, e.shake = {
            amplitude: 0,
            frames: 0
        }, e.reelStoppedCallback = function() {}, Sys.applyProperties(e, t), e
    },
    createReel: function(t) {
        this.symbols = [], this.pixiContainer = new PIXI.Container, this.pixiContainer.position = new PIXI.Point(t.left, t.top), this.createSymbols(t), this.symbolsLandedAnimationSteps = [], this.symbolsLandedAnimationSteps.length = t.numberOfOutcomeSymbols
    },
    createModel: function(t, e, i, o, s, n) {
        this.model = new PIXIAnimation.AvalancheReelModel(t, e, i, o, s, n)
    },
    createSymbols: function(t) {
        for (var e = this.model.getDefaultSymbolPositions(), i = this.symbols, o = 0; o < t.numberOfOutcomeSymbols; ++o) {
            var s = new PIXI.Container;
            s.sprite = this.plugin.createSymbol(), s.addChild(s.sprite), s.id = "BufferedReelSymbol_" + o, s.position = e[o], s.pivot = new PIXI.Point(t.symbolWidths.standard / 2, t.symbolHeights.standard / 2), i.push(s)
        }
        this.setSymbolDepths(i, this.calculateDepthDistributionArray(t))
    },
    calculateDepthDistributionArray: function(t) {
        var e, i, o = t.numberOfOutcomeSymbols,
            s = t.depthDistribution.type,
            n = t.depthDistribution.step,
            l = Math.floor(o / 2),
            d = [];
        for (e = 0; e < o; e++) s === this.INCREASING_DEPTH ? i = e : s === this.DECREASING_DEPTH ? i = o - e : s === this.CURVE_OUT_DEPTH ? i = Math.abs(l - Math.abs(l - e)) : s === this.CURVE_IN_DEPTH && (i = Math.abs(l - e)), d.push(i * n);
        return d
    },
    setSymbolDepths: function(t, e) {
        var i, o = [],
            s = [];
        for (o.length = t.length, i = 0; i < t.length; ++i) s.push({
            symbol: t[i],
            depth: e[i]
        });
        for (s.sort(function(t, e) {
                return t.depth - e.depth
            }), i = 0; i < t.length; ++i) this.pixiContainer.addChild(s[i].symbol)
    },
    setSymbols: function(t) {
        for (var e = 0; e < this.symbols.length; ++e) t[e] && this.plugin.setSymbol(this.symbols[e].sprite, t[e])
    },
    waitWithDropIn: function() {
        this.model.dropAllowed = !1
    },
    continueDropIn: function() {
        if (this.model.dropAllowed = !0, this.model.isStopping() && !this.model.notifiedDropIn) {
            for (var t = [], e = this.model.getSymbolsNotInDefaultPosition(), i = 0; i < e.length; ++i) t.push(e[i].id);
            this.symbolsDropIn(t)
        } else this.model.isAvalanche() && this.model.dropInSymbols(this.model.getSymbolsNotInDefaultPosition())
    },
    onDropInRequested: function(t) {
        t.length > 0 && (this.model.hasReceivedServerResponse = !0, this.model.explodeSymbols(t))
    },
    waitWithExplosion: function() {
        this.model.explosionAllowed = !1
    },
    continueExplosion: function() {
        this.explodeSymbols()
    },
    overrideOutcome: function(t) {
        this.model.overrideOutcome(t)
    },
    startSpin: function(t) {
        this.model.drop ? (this.fireEvent("notify:reel.symbolsExploding", this.model.getIndex(), this.model.getWinningIndices()), 0 === this.model.getWinningIndices().length && this.stopSpin(), this.model.explosionAllowed && this.explodeSymbols()) : setTimeout(function() {
            this.model.startSpin();
            for (var t = 0; t < this.symbolsLandedAnimationSteps.length; ++t) this.symbolsLandedAnimationSteps[t] = -1;
            this.fireEvent("notify:reel.droppingOut", this.model.getIndex())
        }.bind(this), t)
    },
    explodeSymbols: function() {
        this.model.drop && setTimeout(function() {
            this.model.explodeSymbolsFromWin() ? this.model.nextActionDrop() || (this.model.drop = !1) : this.explodeSymbols()
        }.bind(this), 33)
    },
    stopSpin: function() {
        this.model.stopSpin()
    },
    updateOutcome: function(t) {
        this.setSymbols(t), this.model.nextActionDrop() && (this.model.drop = !0)
    },
    symbolsDropIn: function(t) {
        var e = [];
        if (this.fireEvent("notify:reel.readyToDropIn", this.model.getIndex(), t), this.model.dropAllowed) {
            this.fireEvent("notify:reel.droppingIn", this.model.getIndex(), t), this.model.notifiedDropIn = !0;
            for (var i = 0; i < t.length; ++i) e.push(this.symbols[i]);
            this.randomlyRotateSymbols(e, this.config.symbolMaxRotation)
        }
    },
    reelStoppedSpinning: function() {
        this.config.reelStoppedCallback(), this.fireEvent("notify:reel.stopped", this.model.getIndex())
    },
    run: function(t) {
        for (var e = this.model.getSymbolPositions(t), i = 0; i < this.symbols.length; ++i) this.symbols[i].position = e[i], this.model.isSpinning() && this.fireEvent("notify:reel.symbolMoving", this.model.getIndex(), i, e[i], this.symbols[i].rotation);
        this.symbolsLandedAnimation()
    },
    symbolsLandedAnimation: function() {
        for (var t = 0; t < this.symbolsLandedAnimationSteps.length; ++t)
            if (this.symbolsLandedAnimationSteps[t] > 0) {
                var e = this.config.shake.amplitude * Math.PI / 180;
                this.symbols[t].rotation = Sys.Math.randomBetween(-e, e), --this.symbolsLandedAnimationSteps[t]
            } else 0 === this.symbolsLandedAnimationSteps[t] && (this.symbols[t].rotation = 0, --this.symbolsLandedAnimationSteps[t])
    },
    symbolLanded: function(t) {
        this.symbols[t].rotation = 0, this.symbolsLandedAnimationSteps[t] = this.config.shake.frames, this.fireEvent("notify:reel.symbolLanded", this.model.getIndex(), t)
    },
    randomlyRotateSymbols: function(t, e) {
        for (var i = 0; i < t.length; ++i) {
            var o = e * Math.PI / 180;
            this.rotateSymbol(t[i], o)
        }
    },
    rotateSymbol: function(t, e) {
        t.rotation = Sys.Math.randomBetween(-e, e)
    },
    symbolsExploded: function(t) {
        this.model.dropAllowed && this.model.dropInSymbols(this.model.getSymbolsNotInDefaultPosition())
    },
    correctMisalignedOutcomeOnDeviceRotate: function() {},
    reset: function() {},
    presentOutcome: function() {},
    getSymbolLayout: function() {}
}, PIXIAnimation.AvalancheReel = Sys.extend(Sys.Observable, PIXIAnimation.AvalancheReel, "PIXIAnimation.AvalancheReel");
Sys.ns("PIXIAnimation"), PIXIAnimation.AvalancheReelModel = {
    STARTING: "starting",
    STOPPING: "stopping",
    IDLE: "idle",
    AVALANCHE: "avalanche",
    constructor: function(t, i, e, s, o, n) {
        this.config = t, this.id = t.id, this.visibleSymbolsCount = t.numberOfOutcomeSymbols, PIXIAnimation.AvalancheReelModel.superclass.constructor.apply(this, arguments), this.updateOutcomeCallback = i, this.symbolsDropInCallback = e, this.stopSpinCallback = s, this.symbolLandedCallback = o, this.symbolsExplodedCallback = n, this.init()
    },
    init: function() {
        this.winningSymbolIndicesBuffer = [], this.dropAllowed = !0, this.explosionAllowed = !0, this.data = {}, this.initSymbols(), this.outcomeSymbols = Resources.readData("gameServerInitResponseObject").rs.i0.r["i" + this.getIndex()].syms, this.state = this.IDLE
    },
    initSymbols: function() {
        this.symbols = [];
        for (var t = 0; t < this.config.numberOfOutcomeSymbols; ++t) this.symbols.push(new PIXIAnimation.AvalancheSymbol(t, this.getDefaultSymbolPosition(t), this.config.acceleration.standard, this.config.maxSpeed))
    },
    processServerResponse: function(t) {
        var i = t.reelInfo[this.getIndex()];
        this.outcomeSymbols = i.symbols, this.hasReceivedServerResponse = !0, this.clientAction = t.clientaction, this.nextAction = t.nextaction, "drop" !== this.clientAction && (this.winningSymbolIndicesBuffer.length = 0), this.winningSymbolIndicesBuffer.push(this.getWinningSymbolIndices(t)), this.checkIfShouldUpdateOutcome()
    },
    getWinningSymbolIndices: function(t) {
        var i = t.ws;
        if (!i) return [];
        var e = [];
        for (var s in i)
            if (i.hasOwnProperty(s)) {
                var o = i[s].pos;
                for (var n in o)
                    if (o.hasOwnProperty(n)) {
                        var r = o[n];
                        r[0] === this.getIndex() && (e.contains(r[1]) || e.push(r[1]))
                    }
            } return e
    },
    checkIfShouldUpdateOutcome: function() {
        (this.hasReceivedServerResponse && this.isStopping() || this.hasReceivedServerResponse && this.isAvalanche()) && (this.updateOutcomeCallback(this.getOutcomeSymbols()), this.overriddenOutcome = void 0)
    },
    nextActionDrop: function() {
        return "drop" === this.nextAction
    },
    getIndex: function() {
        return parseInt(this.id.substr(this.id.length - 1, 1), 10)
    },
    startSpin: function() {
        this.state = this.STARTING, this.activateSymbols()
    },
    stopSpin: function() {
        this.state = this.IDLE, this.stopSpinCallback(), this.reset()
    },
    isSpinning: function() {
        return this.isStarting() || this.isStopping() || this.isAvalanche()
    },
    isStarting: function() {
        return this.state === this.STARTING
    },
    isStopping: function() {
        return this.state === this.STOPPING
    },
    isIdle: function() {
        return this.state === this.IDLE
    },
    isAvalanche: function() {
        return this.state === this.AVALANCHE
    },
    lockSymbols: function(t) {
        this.setLockedSymbols(t, !0)
    },
    unlockSymbols: function(t) {
        this.setLockedSymbols(t, !1)
    },
    setLockedSymbols: function(t, i) {
        for (var e = 0; e < t.length; ++e) this.symbols[t[e]].setLocked(i)
    },
    overrideOutcome: function(t) {
        for (var i = 0; i < this.symbols.length; ++i) t[i] || (t[i] = this.outcomeSymbols[i]);
        this.overriddenOutcome = t
    },
    getSymbolPositions: function(t) {
        var i, e, s = this.getDefaultSymbolPositions(),
            o = this.symbols;
        for (t = t.time, this.prevTime || (this.prevTime = t), i = 0; i < o.length; ++i)(!o[i + 1] && !this.isStopping() || o[i + 1] && o[i + 1].position.y > s[i + 1].y + this.config.distanceBeforeNextSymbolDrop || this.isStopping() && this.hasReceivedServerResponse && this.dropAllowed) && o[i].moveSymbol(this.prevTime, t);
        for (this.prevTime = t, i = 0; i < o.length; ++i)
            if (this.isStopping() && o[i].position.y >= s[i].y && o[i].isActive()) {
                o[i].position.y = s[i].y, o[i].setCurrentSpeed(0), this.symbolLandedCallback(i), o[i].setActive(!1);
                var n = !0;
                for (e = 0; e < o.length; ++e) o[e].isActive() && (n = !1);
                n && this.stopSpin()
            } if (o[0].position.y >= this.config.distanceBeforeNewOutcome)
            for (i = 0; i < o.length; ++i)
                if (o[i].position.y = s[i].y - this.config.distanceToDropFromDefault - this.config.distanceBeforeNextSymbolDrop * (o.length - 1 - i) * 5, this.state = this.STOPPING, o[i].setCurrentSpeed(this.getVelocityFromDistanceAndAcceleration(this.config.distanceBeforeNextSymbolDrop * i, this.getAcceleration())), i === o.length - 1) {
                    this.checkIfShouldUpdateOutcome();
                    var r = [];
                    for (e = 0; e < o.length; ++e) r.push(e);
                    this.symbolsDropInCallback(r)
                } return this.getCurrentSymbolPositions()
    },
    activateSymbols: function() {
        for (var t = 0; t < this.symbols.length; ++t) this.symbols[t].setActive(!0), Services.settingsManager.getSetting("quickSpin") ? this.symbols[t].setAcceleration(this.config.acceleration.quickSpin) : this.symbols[t].setAcceleration(this.config.acceleration.standard)
    },
    deactivateSymbols: function() {
        for (var t = 0; t < this.symbols.length; ++t) this.symbols[t].setActive(!1)
    },
    getCurrentSymbolPositions: function() {
        for (var t = [], i = 0; i < this.symbols.length; ++i) t.push(this.symbols[i].position);
        return t
    },
    getAcceleration: function() {
        return Services.settingsManager.getSetting("quickSpin") ? this.config.acceleration.quickSpin : this.config.acceleration.standard
    },
    getDefaultSymbolPositions: function() {
        for (var t = [], i = 0; i < this.config.numberOfOutcomeSymbols; ++i) {
            var e = .5 * this.config.symbolWidths.standard,
                s = this.config.symbolCenterToCenter * i + .5 * this.config.symbolHeights.standard;
            t.push(new PIXI.Point(e, s))
        }
        return t
    },
    getDefaultSymbolPosition: function(t) {
        var i = .5 * this.config.symbolWidths.standard,
            e = this.config.symbolCenterToCenter * t + .5 * this.config.symbolHeights.standard;
        return new PIXI.Point(i, e)
    },
    getOutcomeSymbols: function() {
        return this.overriddenOutcome || this.outcomeSymbols
    },
    getVelocityFromDistanceAndAcceleration: function(t, i, e) {
        var s = e || 0;
        return Math.sqrt(s * s + 2 * i * t)
    },
    reset: function() {
        if (this.prevTime = void 0, this.hasReceivedServerResponse = !1, this.dropAllowed = !0, this.notifiedDropIn = !1, this.explosionAllowed = !0, this.symbols)
            for (var t = 0; t < this.symbols.length; ++t) this.symbols[t].setCurrentSpeed(0)
    },
    getWinningIndices: function() {
        return this.winningSymbolIndicesBuffer[0]
    },
    explodeSymbolsFromWin: function() {
        return !!this.hasReceivedServerResponse && (this.explodeSymbols(this.winningSymbolIndicesBuffer[0]), this.winningSymbolIndicesBuffer.splice(0, 1), !0)
    },
    explodeSymbols: function(t) {
        var i, e, s = this.symbols,
            o = this.getDefaultSymbolPositions(),
            n = [];
        for (i = 0; i < t.length; ++i) s[t[i]].setExploded(!0);
        if (t && 0 !== t.length) {
            for (e = this.calcSymPosIndexAfterExp(), i = 0; i < s.length; ++i) - 1 !== e[i] ? i !== e[i] && (s[i].position.y = o[e[i]].y, s[i].setActive(!0), s[i].setCurrentSpeed(0), n.push(i)) : (s[i].position.y = o[i].y - this.config.distanceToDropFromDefault - this.config.distanceBeforeNextSymbolDrop * (this.symbols.length - 1 - i) * 5, s[i].setCurrentSpeed(this.getVelocityFromDistanceAndAcceleration(this.config.distanceBeforeNextSymbolDrop * i, this.getAcceleration()))), s[i].setExploded(!1);
            this.state = this.AVALANCHE, this.checkIfShouldUpdateOutcome(), this.symbolsExplodedCallback(t)
        } else this.stopSpin()
    },
    dropInSymbols: function(t) {
        for (var i = [], e = 0; e < t.length; ++e) t[e].setActive(!0), i.push(t[e].id);
        this.symbolsDropInCallback(i), this.state = this.STOPPING
    },
    getSymbolsNotInDefaultPosition: function() {
        for (var t = [], i = this.getDefaultSymbolPositions(), e = 0; e < this.symbols.length; ++e) this.symbols[e].position.y !== i[e].y && t.push(this.symbols[e]);
        return t
    },
    calcSymPosIndexAfterExp: function() {
        var t, i, e = this.symbols,
            s = [],
            o = !1;
        for (t = 0; t < e.length; ++t) s.push(t);
        for (t = e.length - 1; 0 !== t; --t)
            if (e[t].hasExploded())
                for (i = 0; i < t + 1; ++i) - 1 !== s[i] && --s[i];
        do {
            for (o = !1, t = 0; t < e.length; ++t) - 1 !== s[t] && e[s[t]].hasExploded() && (--s[t], o = !0);
            for (t = 0; t < e.length; ++t)
                if (-1 !== s[t])
                    for (i = t - 1; 0 !== i; --i) s[t] === s[i] && (--s[t], o = !0)
        } while (o);
        return s
    }
}, PIXIAnimation.AvalancheReelModel = Sys.extend(Core.Model, PIXIAnimation.AvalancheReelModel, "PIXIAnimation.AvalancheReelModel");
Sys.ns("PIXIAnimation"), PIXIAnimation.BufferedReelList = {
    constructor: function(e) {
        var t = this,
            i = t.applyConfig(e);
        Animation.BufferedReelList.superclass.constructor.call(t, {}), t.id = i.id, t.pixiContainer = new PIXI.Container, t.pixiContainer.id = t.id, t.running = !0, Game.stage.view.animationManager.addToAnimationLoop(t), t.model = t.createModel(i), t.hasSignaledReelStop = !0, t.animationItems = t.createAnimationItems(t.pixiContainer), t.depthDistributionArray = t.calculateDepthDistributionArray(), t.symbolsWithSpecialEffects = {}
    },
    show: function() {
        this.alpha = 1
    },
    hide: function() {
        this.alpha = 0
    },
    getSymbolLayout: function() {
        var e, t, i = this,
            o = [],
            n = 0;
        for (i.indexOfFirstOutcomeItem && (n = i.indexOfFirstOutcomeItem), t = 0; t < i.model.numberOfOutcomeSymbols; ++t) e = i.animationItems[n + t], Sys.isDefined(e) && o.push({
            top: e.y,
            left: e.x,
            width: e.width,
            height: e.height
        });
        return o
    },
    createAnimationItems: function(e) {
        var t, i, o = this,
            n = [],
            r = o.model.visibleSymbolsCount;
        for (t = 0; t < r; t++) i = new PIXI.Sprite, i.id = "BufferedReelList_" + t, n.push(i), e.addChild(i);
        return n
    },
    run: function(e, t) {
        var i, o = this,
            n = Math.min(e.timeStep, o.maxTimeStep);
        o.model.move(n), i = o.model.getSymbolsToRender(), o.getReelItemsForRendering(i, e, t)
    },
    setPlayingStateForSymbol: function(e, t) {
        var i = this.animationItems;
        e += this.indexOfFirstOutcomeItem, Sys.isNumber(e) && Sys.isDefined(i[e]) && (i[e].visible = t)
    },
    getReelItemsForRendering: function(e) {
        var t, i, o, n, r, a, l, s, m, d, u = this,
            c = u.shouldUseMotionBlur(),
            f = u.maxBlurredSymbolWidth,
            S = u.maxBlurredSymbolHeight,
            h = "vertical" === u.orientation ? S : f,
            p = c ? u.blurredSymbolWidths : u.symbolWidths,
            b = c ? u.blurredSymbolHeights : u.symbolHeights,
            y = e.length;
        for (u.indexOfFirstOutcomeItem = u.animationItems.length - 1, t = -1; ++t < y;) {
            var I, g;
            e[t].isOutcomeSymbol && t < u.indexOfFirstOutcomeItem && (u.indexOfFirstOutcomeItem = t), i = u.animationItems[t], o = e[t].symbol, r = Sys.isDefined(p[o]) ? o : "standard", a = Sys.isDefined(b[o]) ? o : "standard", n = e[t].position, l = p[r], s = b[a], m = "vertical" === u.orientation ? s : l, d = (h - m) / 2, "vertical" === u.orientation ? (g = u.top + n + d, I = u.left + .5 * (f - l)) : (g = .5 * (S - s), I = n + d), c ? o += "-BLURRED" : u.shouldUseSpecialEffect(o) && (o += "-SPECIAL_EFFECT"), i = Sys.applyProperties(i, {
                x: I,
                y: g,
                width: l,
                height: m
            }), i.texture = Resources.readData("animationImages")[o], i.id = o
        }
    },
    createModel: function(e) {
        var t = this,
            i = "vertical" === e.orientation,
            o = i ? t.maxBlurredSymbolHeight : t.maxBlurredSymbolWidth,
            n = i ? t.symbolHeights.standard : t.symbolWidths.standard,
            r = e.symbolCenterToCenter - o,
            a = e.outcomeOffset - (o - n) / 2;
        return new PIXIAnimation.BufferedReelModel({
            id: e.id,
            symbolLength: o,
            symbolSpacing: r,
            numberOfOutcomeSymbols: e.numberOfOutcomeSymbols,
            visibleWindowLength: e.visibleLength,
            outcomeOffset: a,
            startBounceSupportPointOffset: e.startBounceSupportPointOffset,
            endBounceSupportPointOffsets: e.endBounceSupportPointOffsets,
            endBounceDurations: e.endBounceDurations,
            timeToMoveOneSlot: e.timeToMoveOneSlot,
            symbolRetrievalFunction: e.symbolRetrievalFunction,
            reelStartCallback: e.reelStartCallback,
            reelStartCompleteCallback: e.reelStartCompleteCallback,
            reelStartedStoppingCallback: e.reelStartedStoppingCallback,
            reelBounceStartCallback: e.reelBounceStartCallback,
            reelStoppedCallback: e.reelStoppedCallback,
            reelStartSpinParameters: e.reelStartSpinParameters,
            reelStopVelocityFactor: e.reelStopVelocityFactor
        })
    }
}, PIXIAnimation.BufferedReelList = Sys.extend(Animation.BufferedReelList, PIXIAnimation.BufferedReelList, "PIXIAnimation.BufferedReelList");
Sys.ns("PIXIAnimation"), PIXIAnimation.BufferedReelModel = {
    getInterpolatedDistance: function(e, n, t, o, i) {
        var l = Math.min(1, t / i),
            r = Animation.utils.getInterpolationValue(0, e, l, {
                func: Animation.utils.powerOneSupportPoint,
                cfg: n
            }),
            f = Math.min(1, (t + o) / i);
        return {
            distance: Animation.utils.getInterpolationValue(0, e, f, {
                func: Animation.utils.powerOneSupportPoint,
                cfg: n
            }) - r,
            progressAfterTime: f
        }
    },
    getSymbolsToRender: function() {
        var e, n, t, o, i = this,
            l = [],
            r = Math.floor(i.windowToBufferOffset / i.slotLength) - i.leadingSymbolsCount,
            f = Sys.isDefined(i.symbolCenterToCenter) ? .5 * i.symbolCenterToCenter : 0;
        for (r = Math.max(0, r), r = r > 1 ? 1 : r, e = Math.min(i.visibleSymbolsCount, i.symbolBuffer.length - r), n = -1; ++n < e;) t = r + n, o = i.symbolBuffer[t], o.position = t * i.slotLength - Math.round(i.windowToBufferOffset) + f, l.push(o), i.outcomeVisibleOnReel || (i.reelStartedStoppingCallback(), i.outcomeVisibleOnReel = !0);
        return l
    }
}, PIXIAnimation.BufferedReelModel = Sys.extend(Animation.BufferedReelModel, PIXIAnimation.BufferedReelModel, "PIXIAnimation.BufferedReelModel");
Sys.ns("Animation"), Animation.utils = {
    randomBetween: function(n, e) {
        return n + (e - n) * Math.random()
    },
    toNthDecimalPlace: function(n, e) {
        var t = Sys.isDefined(e) ? e : 1,
            i = Math.pow(10, t);
        return Math.round(n * i) / i
    },
    rk4: function(n, e, t, i) {
        var r = n,
            o = e,
            u = t(r, o, 0),
            a = n + .5 * o * i,
            f = e + .5 * u * i,
            s = t(a, f, i / 2),
            c = n + .5 * f * i,
            p = e + .5 * s * i,
            d = t(c, p, i / 2),
            y = n + p * i,
            h = e + d * i;
        return [n + i / 6 * (o + 2 * f + 2 * p + h), e + i / 6 * (u + 2 * s + 2 * d + t(y, h, i))]
    },
    goToTime: function(n, e, t, i) {
        var r, o, u, a, f, s, c = this,
            p = !Sys.isDefined(t) || t,
            d = !!Sys.isDefined(i) && i;
        ! function() {
            r = n.prop, Sys.iterate(r.operations, function(t, i) {
                (!p || p && i.timeBuffer < e) && Animation.utils.setTimeBuffer(n, t, e), d && Sys.each(i, function(n) {
                    Sys.isDefined(n.fireEvent) && n.time <= e && (n.fireEvent.fired = !0), Sys.isDefined(n.events) && (u = e - o.time, a = n.time - o.time, f = 0 !== a ? u / a : 1, s = Math.round(Animation.utils.getInterpolationValue(o.value, n.value, f)), Sys.each(n.events, function(n) {
                        n.onFrame <= s && (n.fired = !0)
                    })), o = n
                })
            })
        }(), Sys.isDefined(n.items) && Sys.each(n.items, function(n) {
            c.goToTime(n, e, p, d)
        })
    },
    fireEventOnFrame: function(n, e) {
        var t = Game.stage.view.animationManager.renderLoopEndEvents;
        Sys.each(e.events, function(e) {
            n >= e.onFrame && !e.fired && (t.push(e), e.fired = !0)
        })
    },
    addEndEvent: function(n, e) {
        var t, i, r = n.prop,
            o = r.operations,
            u = 0;
        Sys.iterate(o, function(n, e) {
            i = e[e.length - 1], u < i.time && (u = i.time, t = i)
        }), Sys.isDefined(t) && (Sys.isDefined(t.fireEvent) || (t.fireEvent = e))
    },
    getInterpolationValue: function(n, e, t, i, r) {
        if (t > 1 ? t = 1 : t < 0 && (t = 0), Sys.isDefined(i)) {
            if (Sys.isFunc(i)) return i(n, e, t);
            var o = Sys.isDefined(i.cfg) ? i.cfg : void 0;
            return i.func(n, e, t, r, o)
        }
        return n + t * (e - n)
    },
    noInterpolation: function(n, e, t) {
        return 1 === t ? e : n
    },
    powerOneIn: function(n, e, t) {
        return (1 - t) * (1 - t) * n + 2 * t * (1 - t) * n + t * t * e
    },
    powerOneOut: function(n, e, t) {
        return (1 - t) * (1 - t) * n + 2 * t * (1 - t) * e + t * t * e
    },
    powerTwoIn: function(n, e, t) {
        return Math.pow(1 - t, 3) * n + 3 * t * Math.pow(1 - t, 2) * n + 3 * Math.pow(t, 2) * (1 - t) * n + Math.pow(t, 3) * e
    },
    powerTwoOut: function(n, e, t) {
        return Math.pow(1 - t, 3) * n + 3 * t * Math.pow(1 - t, 2) * e + 3 * Math.pow(t, 2) * (1 - t) * e + Math.pow(t, 3) * e
    },
    powerNIn: function(n, e, t, i, r) {
        var o, u, a, f = Sys.utils.initArray(r + 1, n);
        for (f.push(e), u = f.length, a = 1; a < u; a++)
            for (o = 0; o < u - a; o++) f[o] = (1 - t) * f[o] + t * f[o + 1];
        return f[0]
    },
    powerNOut: function(n, e, t, i, r) {
        var o, u, a, f = Sys.utils.initArray(r + 1, e);
        for (f.unshift(n), u = f.length, a = 1; a < u; a++)
            for (o = 0; o < u - a; o++) f[o] = (1 - t) * f[o] + t * f[o + 1];
        return f[0]
    },
    powerOneSupportPoint: function(n, e, t, i, r) {
        var o = r;
        return Sys.isDefined(i) && Sys.isObj(r) && (o = r[i]), (1 - t) * (1 - t) * n + 2 * t * (1 - t) * o + t * t * e
    },
    backOut: function(n, e, t, i, r) {
        var o = Sys.isDefined(r) ? r : 1;
        return (e - n) * ((t -= 1) * t * ((o + 1) * t + o) + 1) + n
    }
};
Sys.ns("Animation.utils"), Animation.utils.AnimationPool = {
    registerSpineAnimation: function(i, n, e, t, o) {
        var a = this,
            s = o || {},
            r = t || 0,
            l = s.increment || 1,
            m = s.maxWarningCount || void 0;
        Sys.utils.ObjectPool.registerObjectForPooling(i, a, a.createSpineAnimation, [n, e], r, l, m)
    },
    registerHolderAnimation: function(i, n, e, t, o) {
        var a = this,
            s = o || {},
            r = t || 0,
            l = e || [],
            m = s.increment || 1,
            c = s.maxWarningCount || void 0;
        Sys.utils.ObjectPool.registerObjectForPooling(i, a, n, l, r, m, c)
    },
    getAnimation: function(i) {
        return Sys.utils.ObjectPool.getObjectFromPool(i)
    },
    returnAnimationToPool: function(i) {
        Sys.utils.ObjectPool.returnObjectToPool(i)
    },
    getAndPlaySpineAnimation: function(i, n, e) {
        var t = this,
            o = t.getAnimation(i),
            a = e || {},
            s = !Sys.isDefined(a.visible) || a.visible;
        return Sys.isDefined(a.position) && (o.position.x = a.position.x, o.position.y = a.position.y), o.visible = s, Sys.isDefined(a.alpha) && (o.alpha = a.alpha), a.reset ? o.resetAndPlay(n, e.loop) : o.play(n, e.loop), Sys.isDefined(a.complete) && o.events.addListener(o.EVENTS.COMPLETE, a.complete), Sys.isDefined(a.timeScale) && Sys.isNumber(a.timeScale) && o.setTimeScale(a.timeScale), o
    },
    createSpineAnimation: function(i, n) {
        var e;
        return e = Sys.isDefined(PIXIAnimation.SpineAnimation) ? new PIXIAnimation.SpineAnimation({
            animationName: i
        }) : Game.PIXIFactory.createAndAddSpineAnimation(i, n), e.visible = !1, n.addChild(e), e
    }
};
Sys.ns("Game"), Game.ReelGroup = {
    createReelLists: function(e, i, s, t) {
        var a, n, r, l = this,
            o = 0,
            f = l.symbolBuffer,
            d = [],
            u = s.standard || s.config;
        for (l.reelLists = [], l.slotLengthGroups = {}, l.reelMaskGraphics = [], l.reels = new PIXI.Container, l.reels.id = "reelsMainContainer", l.reels.visible = !1, Game.stage.view.animationManager.getLayer("reel").addChild(l.reels); o < i; o++) a = Sys.applyProperties({}, u), Sys.isDefined(s[o]) && Sys.applyProperties(a, s[o]), a.id = e + "_" + o, a.symbolRetrievalFunction = f.getSymbols.bind(f, o), Sys.applyProperties(a, l.getReelSpecificCallbacks(o, t)), n = l.createBufferedReelList(a), r = n.getSlotLength(), Sys.isDefined(l.slotLengthGroups[r]) || (l.slotLengthGroups[r] = []), l.slotLengthGroups[r].push(n), d.push(n.getVisibleSymbolsCount()), l.reelLists.push(n), l.reels.addChild(n.pixiContainer), l.addReelMask(n.pixiContainer, s, o);
        l.symbolBuffer.setVisibleSymbolsCounts(d)
    },
    createBufferedReelList: function(e) {
        return "undefined" != typeof PIXIAnimation && Sys.isDefined(PIXIAnimation.BufferedReelList) ? new PIXIAnimation.BufferedReelList(e) : new Animation.BufferedReel(e)
    },
    addReelMask: function(e, i, s) {
        var t = this,
            a = new PIXI.Graphics,
            n = i[s],
            r = n.left,
            l = i.standard || i.config,
            o = Sys.isDefined(n.top) ? n.top : l.top,
            f = l.symbolWidths.standard - t.getReelScaleXOffset(),
            d = Sys.isDefined(n.visibleLength) ? n.visibleLength : l.visibleLength;
        a.updateLayout = function() {
            this.clear(), this.beginFill(), this.drawRect(r, o, f, d), this.endFill()
        }, a.updateLayout(), e.parent.addChild(a), e.mask = a, this.reelMaskGraphics.push(a)
    },
    getReelScaleXOffset: function() {
        var e = Resources.readData("config").reelScale,
            i = Environment.getOrientation().toLowerCase(),
            s = 0;
        return e && e[i] && e[i].xOffset && (s = e[i].xOffset), s
    },
    hide: function() {
        Sys.each(this.reelLists, function(e) {
            e.hide()
        })
    },
    hideReel: function(e) {
        var i = this.reelLists[e];
        Sys.isDefined(i) && i.hide()
    },
    showReel: function(e) {
        var i = this.reelLists[e];
        Sys.isDefined(i) && i.show()
    },
    activate: function(e) {
        var i = this;
        Sys.isDefined(i.activeReelSet) && i.deactivate(i.activeReelSet), i.reels.visible = !0, i.symbolBuffer.activateReelSet(e), i.activeReelSet = e, i.updateSpinTimings(e)
    },
    deactivate: function(e) {
        var i = this;
        e === i.activeReelSet && (i.reels.visible = !1, i.activeReelSet = void 0)
    },
    refresh: function(e) {
        var i = this,
            s = this.getReelLayout(e.default.reelLayouts) || e.default.reelLayout,
            t = Sys.applyProperties({}, s.config || s.standard),
            a = this.reelLists;
        t.baseDepth = Layering.Game.Slots.Spin[i.groupName].symbols, Sys.each(a, function(e, i) {
            Sys.isDefined(s[i]) && Sys.applyProperties(t, s[i]), Sys.isFunc(e.refresh) && e.refresh(t)
        }), this.reelMaskGraphics.forEach(function(e) {
            e.updateLayout()
        })
    }
}, Sys.override(Core.Slots.ReelGroup, Game.ReelGroup);
Sys.ns("PIXISlots"), PIXISlots.AvalancheReelGroup = {
    PLUGIN_SPRITE: "sprite",
    PLUGIN_SPINE: "spine",
    constructor: function(e, t, s, i) {
        PIXISlots.AvalancheReelGroup.superclass.constructor.apply(this, [e, t, s, i])
    },
    createReelLists: function(e, t, s, i) {
        var n, r, l, o = this,
            a = 0,
            p = o.symbolBuffer,
            h = [],
            u = Resources.readData("config").reelGroups,
            c = u.default.plugin.name || "sprite";
        for (o.reelLists = [], o.slotLengthGroups = {}, o.reels = new PIXI.Container, o.reels.id = "reelsMainContainer", o.reels.visible = !1, Game.stage.view.animationManager.getLayer("reel").addChild(o.reels); a < t; a++) {
            switch (n = Sys.applyProperties({}, s.standard), Sys.isDefined(s[a]) && Sys.applyProperties(n, s[a]), n.id = e + "_" + a, n.symbolRetrievalFunction = p.getSymbols.bind(p, a), Sys.applyProperties(n, o.getReelSpecificCallbacks(a, i)), c) {
                case this.PLUGIN_SPRITE:
                    l = AvalancheReel.Plugin.Sprite;
                    break;
                case this.PLUGIN_SPINE:
                    l = AvalancheReel.Plugin.Spine;
                    break;
                default:
                    l = AvalancheReel.Plugin.Sprite
            }
            r = new PIXIAnimation.AvalancheReel(new PIXIAnimation.AvalancheConfig(n), new l), o.reelLists.push(r), this.reels.addChild(r.pixiContainer)
        }
        Sys.isDefined(n.reelDepthModifiers) || (n.reelDepthModifiers = [0, 1, 2, 1, 0]), this.setReelDepths(o.reelLists, n.reelDepthModifiers), o.addReelMask(s.standard), o.symbolBuffer.setVisibleSymbolsCounts(h)
    },
    setReelDepths: function(e, t) {
        var s, i = [],
            n = [];
        for (i.length = e.length, s = 0; s < e.length; ++s) n.push({
            reel: e[s],
            depth: t[s]
        });
        for (n.sort(function(e, t) {
                return e.depth - t.depth
            }), s = 0; s < e.length; ++s) this.reels.addChild(n[s].reel.pixiContainer)
    },
    startSpin: function(e) {
        var t = this,
            s = t.reelLists;
        t.symbolBuffer.cleanUp(), t.syncReels(), t.hasBeenToldToStop = !1, t.isQuickStopped = !1, t.startSpinCompleteTime = void 0, t.hasPassedMinimumSpinTime = !1, t.stopStartTime = void 0, t.stopSequencePausers = Sys.utils.init2dMatrix(t.getReelCount(), 0);
        var i = [];
        i = Services.settingsManager.getSetting("quickSpin") ? this.setSpinTimes(t.spinTimes.quickSpin.reelStopDelays) : this.setSpinTimes(t.spinTimes.standard.reelStopDelays);
        var n = 0;
        s.forEach(function(e) {
            e.startSpin(i[n++])
        })
    },
    setSpinTimes: function(e) {
        for (var t = [], s = 0; s < e.length; ++s) "number" == typeof e[s] ? t.push(e[s]) : t.push(Sys.Math.randomIntBetween(e[s][0], e[s][1]));
        return t
    },
    hideSymbols: function(e) {
        for (var t = this.reelLists, s = 0; s < e.length; ++s) t[s].hideSymbols(e[s])
    },
    showSymbols: function(e) {
        for (var t = this.reelLists, s = 0; s < e.length; ++s) t[s].showSymbols(e[s])
    },
    waitWithDropIn: function() {
        for (var e = this.reelLists, t = 0; t < e.length; ++t) e[t].waitWithDropIn()
    },
    continueDropIn: function() {
        for (var e = this.reelLists, t = 0; t < e.length; ++t) e[t].continueDropIn()
    },
    waitWithExplosion: function() {
        for (var e = this.reelLists, t = 0; t < e.length; ++t) e[t].waitWithExplosion()
    },
    continueExplosion: function() {
        for (var e = this.reelLists, t = 0; t < e.length; ++t) e[t].continueExplosion()
    },
    overrideOutcome: function(e) {
        for (var t = this.reelLists, s = 0; s < t.length; ++s) e[s] && t[s].overrideOutcome(e[s])
    }
}, PIXISlots.AvalancheReelGroup = Sys.extend(Core.Slots.ReelGroup, PIXISlots.AvalancheReelGroup, "PIXISlots.AvalancheReelGroup");
Sys.ns("Core.Slots"), Core.Slots.SimpleOutcomeFiller = {
    constructor: function(e) {
        Core.Slots.SimpleOutcomeFiller.superclass.constructor.apply(this, arguments), this.workspace = e, this.cleanUp()
    },
    fill: function(e, t) {
        var o, r, s, l, n, i = this,
            u = i.workspace,
            c = u.currentOutcome,
            m = 0;
        if (!Sys.isDefined(c)) return i.slotsLeftInBuffer(e);
        for (o = -1; ++o < e.length;)
            if (s = e[o], i.slotsLeftInPipe(s, [u.symbolConstants.any])) {
                if ((r = u.symbolsBeforeOutcome[o]) >= s.length || !i.hasInsertedPreviousOutcome(o)) break;
                u.outcomeInsertedOnReel[o] || (l = c[o].symbols.slice(0), (n = i.findOutcomeStart(i.analyzePipeBuffer(s, t, [u.symbolConstants.any]), l.length, Math.max(m, r))) >= 0 && (i.fillSlots(i.wrapSymbols(l.reverse()), s, n), u.outcomeInsertedOnReel[o] = !0, m = n))
            } return t ? i.slotsLeftInBuffer(e) : i.evenBuffer(e)
    },
    hasInsertedPreviousOutcome: function(e) {
        return 0 === e || this.workspace.outcomeInsertedOnReel[e - 1]
    },
    findOutcomeStart: function(e, t, o) {
        var r, s, l, n;
        for (n = -1; ++n < e.length;)
            if (r = e[n], r.start >= o ? (s = r.start, l = r.length) : (s = o, l = r.length - (o - r.start)), l >= t) return s;
        return -1
    },
    wrapSymbol: function(e) {
        return {
            symbol: e,
            isOutcomeSymbol: !0
        }
    }
}, Core.Slots.SimpleOutcomeFiller = Sys.extend(Core.Slots.Filler, Core.Slots.SimpleOutcomeFiller, "Core.Slots.SimpleOutcomeFiller");
Sys.override(Core.Slots.BufferedSpinView, {
    DEFAULT_SPIN_ANIMATION: "default",
    AVALANCHE_SPIN_ANIMATION: "avalanche",
    initAnimations: function() {
        var e, n, t = this,
            i = Resources.readData("config").reelGroups,
            o = t.model.readData("currentReelSet"),
            r = [],
            p = {},
            a = {},
            l = this.model.readData("spinType");
        switch (t.stoppedReels = [], t.spinAnimationType = i.default.spinAnimationType, t.spinAnimationType) {
            case t.DEFAULT_SPIN_ANIMATION:
                n = Core.Slots.ReelGroup;
                break;
            case t.AVALANCHE_SPIN_ANIMATION:
                n = PIXISlots.AvalancheReelGroup;
                break;
            default:
                n = Core.Slots.ReelGroup
        }
        Sys.iterate(i, function(i, o) {
            e = new n(i, o, {
                reelStartCallback: t.onReelStart.bind(t, i),
                reelStartCompleteCallback: t.onReelStartComplete.bind(t, i),
                reelStartedStoppingCallback: t.onReelStartedStopping.bind(t, i),
                reelBounceStartCallback: t.onReelStartedBouncing.bind(t, i),
                reelStoppedCallback: t.onReelStopped.bind(t, i),
                fillerEventCallback: t.onFillerEvent.bind(t)
            }, {
                nearWinEnabled: t.model.readData("nearWinEnabled")
            }), Sys.isDefined(l) && e.setSpinType(l), r.push(e), Sys.each(o.reelSets, function(n) {
                p[n] = e
            }), a[i] = e
        }), t.reelGroups = r, t.reelSetToGroupMapping = p, t.groupNameToGroupMapping = a, Sys.isDefined(o) && t.activateReelSet(o, t.model.readData("startScene"))
    },
    startSpin: function(e) {
        var n = this,
            t = n.currentReelGroup(),
            i = t.getReelCount() - 1;
        if (n.fireEvent("view:playAudio", n.getSoundConfig("spinStart")), Sys.isDefined(e))
            for (; i >= 0 && e.contains(i); --i);
        n.lastReelToStop = i, n.isStopSequenceResuming = !1, n.spinSoundStarted = !1, n.stoppedReels.length = 0, t.lastReelToStop = n.lastReelToStop, t.startSpin(e)
    },
    onReelStopped: function(e, n) {
        var t = this,
            i = t.groupNameToGroupMapping[e].reelLists[n],
            o = t.currentReelGroup(); - 1 === t.stoppedReels.indexOf(n) && t.stoppedReels.push(n), t.playReelSpecificSound("reelStop", n), t.updateSymbolLayout(i, n), t.fireEvent("view:reelStoppedSpinning", n), n === t.lastReelToStop && t.spinAnimationType !== t.AVALANCHE_SPIN_ANIMATION && (t.fireEvent("view:stopAudio", t.getSoundConfig("reelSpin").id), t.fireEvent("view:allReelsStoppedSpinning")), t.stoppedReels.length === t.currentReelGroup().getReelCount() && t.spinAnimationType === t.AVALANCHE_SPIN_ANIMATION && (t.fireEvent("view:stopAudio", t.getSoundConfig("reelSpin").id), t.fireEvent("view:allReelsStoppedSpinning")), !0 === o.nearWinEnabled && Sys.isDefined(o.nearWinList) && o.nearWinList.length > 0 && 0 === o.nearWinList.indexOf(n + 1) && t.fireEvent("view:nearWinStarted", n + 1), i.correctMisalignedOutcomeOnDeviceRotate()
    },
    waitWithDropIn: function() {
        this.spinAnimationType === this.AVALANCHE_SPIN_ANIMATION && this.currentReelGroup().waitWithDropIn()
    },
    continueDropIn: function() {
        this.spinAnimationType === this.AVALANCHE_SPIN_ANIMATION && this.currentReelGroup().continueDropIn()
    },
    waitWithExplosion: function() {
        this.spinAnimationType === this.AVALANCHE_SPIN_ANIMATION && this.currentReelGroup().waitWithExplosion()
    },
    continueExplosion: function() {
        this.spinAnimationType === this.AVALANCHE_SPIN_ANIMATION && this.currentReelGroup().continueExplosion()
    },
    overrideOutcome: function(e) {
        this.spinAnimationType === this.AVALANCHE_SPIN_ANIMATION && this.currentReelGroup().overrideOutcome(e)
    }
});
Sys.override(Core.Slots.SpinTypeRespinModel, {
    initData: function() {
        var e = Resources.readData("gameServerInitResponseObject").nextaction;
        this.storeData("active", "respin" === e || "drop" === e);
        var a = Resources.readData("config");
        this.storeData("layeringConfig", a.layering)
    }
});
Sys.override(Game.StageModel, {
    setupData: function() {
        var e = this,
            s = Resources.readData("config");
        e.storeData("images", Resources.readData("images")), e.storeData("sprites", s.sprites), e.storeData("reelConfig", s.reel), e.storeData("reelGroups", s.reelGroups), e.storeData("scenes", s.scenes), e.storeData("layers", Layering.RenderLayers || s.layers), e.switchScenes("base")
    },
    getPlugins: function() {}
});
Sys.override(Game.StageView, {
    setupAnimationManager: function() {
        var e = this,
            a = Environment.getResolution();
        e.animationManager = new Animation.PixiAnimationManager({
            parent: document.getElementById("gameElements"),
            images: e.model.readData("images"),
            sprites: e.model.readData("sprites"),
            top: "0px",
            left: "0px",
            height: a.height,
            width: a.width,
            scenes: e.model.readData("scenes"),
            layers: e.model.readData("layers"),
            plugins: e.model.getPlugins()
        })
    }
});
Sys.ns("Interface.utils"), Interface.utils.PIXIControl = {
    constructor: function() {
        Interface.utils.PIXIControl.superclass.constructor.apply(this, arguments)
    },
    moveToPosition: function(t) {
        var o = t.position,
            n = t.anchorPoint ? t.anchorPoint : new PIXI.Point;
        this.moveTo(o, n)
    },
    moveTo: function(t, o) {
        var n = o || new PIXI.Point;
        this.x = t.x - this.width * n.x, this.y = t.y - this.height * n.y
    }
}, Interface.utils.PIXIControl = Sys.extend(PIXI.Container, Interface.utils.PIXIControl, "Interface.utils.PIXIControl");
Sys.ns("Interface.utils"), Interface.utils.PIXIInteractive = {
    DEFAULT_ID: "interactive",
    UP: "up",
    DOWN: "down",
    OVER: "over",
    OUT: "out",
    MOVE: "move",
    constructor: function() {
        Interface.utils.PIXIInteractive.superclass.constructor.apply(this, arguments), this.eventHandler = EventHandler, this._enabled = !1 !== this._enabled, this.interactive = !0, this.setCurrentState(this.UP)
    },
    setEnabled: function(t) {
        this._enabled !== t && (this._enabled = t)
    },
    getEnabled: function() {
        return this._enabled
    },
    setCurrentState: function(t) {
        this._currentState !== t && (this._currentState = t)
    },
    mousedown: function(t) {
        this.handleEvent(this.DOWN, t)
    },
    mouseup: function(t) {
        var e = this.checkInteractionTarget(t.data);
        this._enabled && this._internalPressed && e && this.executeCallback("click", t), this.setStateFromEvent(this.UP, t)
    },
    mousemove: function(t) {
        var e = this.checkInteractionTarget(t.data);
        this.moveCallback && this._enabled && e && this.handleEvent(this.MOVE, t)
    },
    mouseover: function(t) {
        this.handleEvent(this.OVER, t)
    },
    mouseout: function(t) {
        this.handleEvent(this.OUT, t)
    },
    mouseupoutside: function(t) {
        this.handleEvent(this.UP, t)
    },
    touchstart: function(t) {
        this.handleEvent(this.DOWN, t)
    },
    touchend: function(t) {
        this.handleEvent(this.UP, t)
    },
    touchmove: function(t) {
        if (this._currentState !== this.UP) {
            Game.PIXIUtils.hitTestDisplayObject(t.data.global, this) || Platform.isDesktopDevice || this.touchend(t)
        }
    },
    touchendoutside: function(t) {
        this.handleEvent(this.UP, t)
    },
    tap: function(t) {
        var e = this.checkInteractionTarget(t.data);
        this._enabled && e && this.executeCallback("click", t)
    },
    handleEvent: function(t, e) {
        this.checkInteractionTarget(e.data) && (this._enabled && this.executeCallback(t, e), this.setStateFromEvent(t, e))
    },
    fireEvent: function() {
        0 !== arguments.length && this.eventHandler.dispatchEvent.apply(this.eventHandler, arguments)
    },
    checkInteractionTarget: function(t) {
        return !1 !== Sys.isDefined(t.originalEvent) && null !== t.originalEvent && (Sys.isDefined(t.originalEvent.target.id) && "canvasAnimationManager" === t.originalEvent.target.id)
    },
    executeCallback: function(t, e) {
        var n = t + "Callback";
        this[n] && this[n](e)
    },
    setStateFromEvent: function(t, e) {
        if (t === this.DOWN) this.setCurrentState(this.DOWN), this._internalPressed = !0;
        else if (t === this.UP) this._internalPressed = !1, this._externalPressed = !1, this._internalOver ? this.setCurrentState(this.OVER) : this.setCurrentState(this.UP);
        else if (t === this.OVER)
            if (this._internalOver = !0, this._internalPressed) this.setCurrentState(this.DOWN);
            else {
                this._externalPressed = !1;
                var n = e.data.originalEvent;
                1 !== n.buttons && 3 !== n.buttons || (this._externalPressed = !0), !1 === this._externalPressed && this.setCurrentState(this.OVER)
            }
        else this._internalOver && (this._internalOver = !1), this._externalPressed && (this._externalPressed = !1), this.setCurrentState(this.UP);
        this.shouldUpdateGraphics = !0, this.shouldUpdateLabel = !0
    }
}, Interface.utils.PIXIInteractive = Sys.extend(Interface.utils.PIXIControl, Interface.utils.PIXIInteractive, "Interface.utils.PIXIInteractive");
Sys.ns("Interface.utils"), Interface.utils.PIXIBox = {
    HORIZONTAL: "horizontal",
    VERTICAL: "vertical",
    ALIGN_TOP: "top",
    ALIGN_LEFT: "left",
    ALIGN_CENTER: "center",
    ALIGN_BOTTOM: "bottom",
    ALIGN_RIGHT: "right",
    DEFAULT_GAP: 4,
    constructor: function(t) {
        Interface.utils.PIXIBox.superclass.constructor.apply(this, arguments), this._layout = void 0 === t ? this.HORIZONTAL : t, this._gap = this.DEFAULT_GAP, this._verticalAlign = this.ALIGN_TOP, this._horizontalAlign = this.ALIGN_LEFT, this._explicitWidth = NaN, this._explicitHeight = NaN, this.shouldUpdateLayout = !1
    },
    addChildAt: function(t, i) {
        return t = Interface.utils.PIXIBox.superclass.addChildAt.apply(this, arguments), this.shouldUpdateLayout = !0, t
    },
    removeChildAt: function(t) {
        var i = Interface.utils.PIXIBox.superclass.removeChildAt.apply(this, arguments);
        return this.shouldUpdateLayout = !0, i
    },
    getExcessSpace: function(t) {
        for (var i = this.getBoxWidth(), e = this.getBoxHeight(), h = t ? e : i, s = this.children.length, l = 0; l < s; l++) {
            var a = this.children[l];
            h -= t ? a.height : a.width
        }
        return h -= this._gap * (s - 1), h < 0 ? 0 : h
    },
    updateLayout: function() {
        var t = this.isVertical(),
            i = this.getVerticalAlignValue(),
            e = this.getHorizontalAlignValue(),
            h = this.getExcessSpace(t),
            s = h,
            l = this.getBoxWidth(),
            a = this.getBoxHeight();
        s *= t ? i : e;
        for (var n = this.children.length, o = 0; o < n; o++) {
            var r = this.children[o];
            t ? (r.y = Math.floor(s), r.x = (l - r.width) * i) : (r.x = Math.floor(s), r.y = (a - r.height) * e);
            s += (t ? r.height : r.width) + this.getCurrentGap(o, n)
        }
        this.shouldUpdateLayout = !1
    },
    getCurrentGap: function(t, i) {
        return this._gap
    },
    updateTransform: function() {
        this.shouldUpdateLayout && this.updateLayout(), Interface.utils.PIXIBox.superclass.updateTransform.apply(this, arguments)
    },
    setGap: function(t) {
        this._gap !== t && (this._gap = t, this.shouldUpdateLayout = !0)
    },
    setHorizontalAlign: function(t) {
        this._horizontalAlign !== t && (this._horizontalAlign = t, this.shouldUpdateLayout = !0)
    },
    setVerticalAlign: function(t) {
        this._verticalAlign !== t && (this._verticalAlign = t, this.shouldUpdateLayout = !0)
    },
    getHorizontalAlignValue: function() {
        return "center" === this._horizontalAlign ? .5 : "right" === this._horizontalAlign ? 1 : 0
    },
    getVerticalAlignValue: function() {
        return "middle" === this._verticalAlign ? .5 : "bottom" === this._verticalAlign ? 1 : 0
    },
    isVertical: function() {
        return this._layout === this.VERTICAL
    },
    setExplicitWidth: function(t) {
        this._explicitWidth !== t && (this._explicitWidth = t, this.shouldUpdateLayout = !0)
    },
    setExplicitHeight: function(t) {
        this._explicitHeight !== t && (this._explicitHeight = t, this.shouldUpdateLayout = !0)
    },
    getBoxWidth: function() {
        return isNaN(this._explicitWidth) ? this.width : this._explicitWidth
    },
    getBoxHeight: function() {
        return isNaN(this._explicitHeight) ? this.height : this._explicitHeight
    }
}, Interface.utils.PIXIBox = Sys.extend(Interface.utils.PIXIControl, Interface.utils.PIXIBox, "Interface.utils.PIXIBox");
Sys.ns("Interface.utils"), Interface.utils.PIXIHBox = {
    constructor: function() {
        Interface.utils.PIXIHBox.superclass.constructor.apply(this, ["horizontal"])
    }
}, Interface.utils.PIXIHBox = Sys.extend(Interface.utils.PIXIBox, Interface.utils.PIXIHBox, "Interface.utils.PIXIHBox");
Sys.ns("Interface.utils"), Interface.utils.PIXIVBox = {
    constructor: function() {
        Interface.utils.PIXIVBox.superclass.constructor.apply(this, ["vertical"])
    }
}, Interface.utils.PIXIVBox = Sys.extend(Interface.utils.PIXIBox, Interface.utils.PIXIVBox, "Interface.utils.PIXIVBox");
Sys.ns("Interface.utils"), Interface.utils.PIXIButton = {
    DEFAULT_ID: "button",
    SOUND_UP: "buttonUp",
    SOUND_DOWN: "buttonDown",
    SOUND_CLICK: "buttonClick",
    SOUND_OVER: "buttonHover",
    LABEL_RESOLUTION: 2,
    constructor: function(t, e, i, s, a) {
        Interface.utils.PIXIButton.superclass.constructor.apply(this, arguments), this.ID = Sys.isDefined(a) ? a : this.DEFAULT_ID, this._graphicReferences = {
            up: t,
            down: e,
            over: i,
            disabled: s
        }, this._labelStyleReferences = {
            up: void 0,
            down: void 0,
            over: void 0,
            disabled: void 0
        }, this._pooledGraphics = {}, this.shouldUpdateDimensions = !1, this.shouldUpdateLabel = !1, this.shouldUpdateGraphics = !1, this.updateGraphics(), this.updateHitArea(), Sys.isDefined(Services.trigger) && this.registerTriggers(), this.soundEnabled = !0
    },
    getCurrentLabelStyle: function() {
        var t;
        return t = this._enabled ? this._labelStyleReferences[this._currentState] : this._labelStyleReferences.disabled, void 0 === t && (t = this._labelStyle), t
    },
    updateLabel: function(t) {
        var e, i = this.getCurrentLabelStyle();
        this.shouldUpdateLabel = !1, t && (e = i.fontSize.replace("px", ""), e = parseInt(e, 10), t = t.replace("px", ""), t = parseInt(t, 10), e > t && Sys.iterate(this._labelStyleReferences, function(i, s) {
            var a = parseInt(s.fontSize.replace("px", ""), 10);
            s.fontSize = Math.round(a * (t / e)) + "px"
        })), this.labelText ? (this.labelText.text = this._label, this.labelText.setLabelStyle(i)) : this._label && (this.labelText = new Interface.utils.PIXILabel(this._label, i, this._labelMaxWidth, this.ID + ".label"), this.addChild(this.labelText), this.shouldUpdateLabel = !0), this.shouldUpdateDimensions = !0
    },
    getTexture: function(t) {
        var e = this._pooledGraphics[t];
        return e || (e = Game.PIXIFactory.createTexture(t), this._pooledGraphics[t] = e), e
    },
    updateGraphics: function() {
        var t;
        if (t = this._enabled ? this._graphicReferences[this._currentState] : this._graphicReferences.disabled, this.graphics) {
            var e = this.getTexture(t);
            void 0 !== e && (this.graphics.texture = e)
        } else this.graphics = Game.PIXIFactory.createAndAddSprite(t, this);
        this.shouldUpdateGraphics = !1, this.shouldUpdateDimensions = !0
    },
    updateDimensions: function() {
        this.updateLabelDimensions(), this.updateHitArea(), this.shouldUpdateDimensions = !1
    },
    updateLabelDimensions: function() {
        this.labelText && this.labelText.text && (this._labelAnchor && this.labelText.setAnchorPoint(this._labelAnchor), this._labelPosition ? (this.labelText.x = this._labelPosition.x, this.labelText.y = this._labelPosition.y) : (this.labelText.x = Math.floor((this.width - this.labelText.width) / 2), this.labelText.y = Math.floor((this.height - this.labelText.height) / 2)))
    },
    updateHitArea: function() {
        this.hitArea ? this._customHitArea ? this.hitArea = this._customHitArea : (this.hitArea.width = this.width, this.hitArea.height = this.height) : this.hitArea = new PIXI.Rectangle(0, 0, this.width, this.height)
    },
    enable: function(t) {
        this.setEnabled(!0)
    },
    disable: function(t) {
        this.setEnabled(!1)
    },
    setEnabled: function(t) {
        this._enabled !== t && (this._internalPressed = !1, this._externalPressed = !1, this._enabled = t, this.shouldUpdateGraphics = !0, this.shouldUpdateLabel = !0)
    },
    setCurrentState: function(t) {
        if (this._currentState !== t) {
            this.labelText && (this.labelText.setCurrentState(t), this.labelText.setLabelStyle(this.getCurrentLabelStyle()));
            var e = this._currentState;
            this._currentState = t, this.shouldUpdateGraphics = !0, this.shouldUpdateLabel = !0, this.soundEnabled && this._enabled && this.playSoundByState(t, e)
        }
    },
    mouseup: function(t) {
        var e = this.checkInteractionTarget(t.data);
        this._enabled && this._internalPressed && e && (this.executeCallback("click", t), this.soundEnabled && this.playClickSound()), this.setStateFromEvent(this.UP, t)
    },
    tap: function(t) {
        var e = this.checkInteractionTarget(t.data);
        this._enabled && e && (this.executeCallback("click", t), this.soundEnabled && this.playClickSound())
    },
    setCustomHitArea: function(t) {
        this._customHitArea = t
    },
    setLabel: function(t) {
        this._label !== t && (this._label = t, this.shouldUpdateLabel = !0)
    },
    setLabelStyle: function(t) {
        this._labelStyle !== t && (this._labelStyle = t, this.shouldUpdateLabel = !0)
    },
    setLabelUpStyle: function(t) {
        this._labelStyleReferences.up !== t && (this._labelStyleReferences.up = t, this.shouldUpdateLabel = !0)
    },
    setLabelDownStyle: function(t) {
        this._labelStyleReferences.down !== t && (this._labelStyleReferences.down = t, this.shouldUpdateLabel = !0)
    },
    setLabelOverStyle: function(t) {
        this._labelStyleReferences.over !== t && (this._labelStyleReferences.over = t, this.shouldUpdateLabel = !0)
    },
    setLabelDisabledStyle: function(t) {
        this._labelStyleReferences.disabled !== t && (this._labelStyleReferences.disabled = t, this.shouldUpdateLabel = !0)
    },
    setLabelPosition: function(t) {
        this._labelPosition = t, this.shouldUpdateDimensions = !0
    },
    setLabelAnchorPoint: function(t) {
        this._labelAnchor = t, this.labelText && this.labelText.setAnchorPoint(this._labelAnchor), this.shouldUpdateDimensions = !0
    },
    setLabelMaxWidth: function(t) {
        this._labelMaxWidth = t, this.labelText && this.labelText.setLabelMaxWidth(t)
    },
    redraw: function() {
        this.shouldUpdateLabel && this.updateLabel(), this.shouldUpdateGraphics && this.updateGraphics(), this.shouldUpdateDimensions && this.updateDimensions()
    },
    updateTransform: function() {
        this.redraw && this.redraw(), Interface.utils.PIXIButton.superclass.updateTransform.apply(this, arguments)
    },
    registerTriggers: function() {
        var t = this.ID;
        Services.trigger.registerTrigger("notify:" + t + ".up", this, "When the button returns to the up state."), Services.trigger.registerTrigger("notify:" + t + ".hover", this, "When the button is hovered."), Services.trigger.registerTrigger("notify:" + t + ".over", this, "When the button hovered but wasn't the initial input target."), Services.trigger.registerTrigger("notify:" + t + ".down", this, "When the button is pressed down."), Services.trigger.registerTrigger("notify:" + t + ".click", this, "When the button is clicked.")
    },
    playClickSound: function() {
        var t = this.SOUND_CLICK;
        t && (this.fireEvent("request:audioPlayer.play", {
            name: t
        }), this.fireEvent("notify:" + this.ID + ".click"))
    },
    playSoundByState: function(t, e) {
        var i, s;
        t === this.UP ? (i = this.SOUND_UP, s = "up") : t === this.DOWN ? (i = this.SOUND_DOWN, s = "down") : t === this.OVER && e !== this.DOWN && (i = this.SOUND_OVER, s = "hover"), i && (this.fireEvent("request:audioPlayer.play", {
            name: i
        }), this.fireEvent("notify:" + this.ID + "." + s))
    }
}, Interface.utils.PIXIButton = Sys.extend(Interface.utils.PIXIInteractive, Interface.utils.PIXIButton, "Interface.utils.PIXIButton");
Sys.ns("Interface.utils"), Interface.utils.PIXICheckBox = {
    DEFAULT_LABEL_GAP: 4,
    constructor: function(t, e, s, i, h, a, r, l, n) {
        Interface.utils.PIXICheckBox.superclass.constructor.apply(this, [t, e, s, i, n]), this._selectedGraphicReferences = {
            up: h,
            down: a,
            over: r,
            disabled: l
        }, this.selected = !1, this._labelGap = this.DEFAULT_LABEL_GAP, this._pooledGraphics = {}
    },
    getTexture: function(t) {
        var e = this._pooledGraphics[t];
        return e || (e = Game.PIXIFactory.createTexture(t), this._pooledGraphics[t] = e), e
    },
    updateGraphics: function() {
        var t, e = this.selected ? this._selectedGraphicReferences : this._graphicReferences;
        if (t = this._enabled ? e[this._currentState] : e.disabled, this.graphics) {
            var s = this.getTexture(t);
            void 0 !== s && (this.graphics.texture = s)
        } else this.graphics = Game.PIXIFactory.createAndAddSprite(t, this)
    },
    updateLabelDimensions: function() {
        this.labelText && this.labelText.text && (this._labelPosition ? (this.labelText.x = this._labelPosition.x, this.labelText.y = this._labelPosition.y) : (this.labelText.x = this.graphics.width + this._labelGap, this.labelText.y = Math.floor((this.height - this.labelText.height) / 2)))
    },
    setLabelGap: function(t) {
        this._labelGap !== t && (this._labelGap = t, this.shouldUpdateLabel = !0)
    },
    toggleSelected: function() {
        this.selected = !this.selected
    },
    handleEvent: function(t, e) {
        var s = this.checkInteractionTarget(e.data);
        this._enabled && s && (t === this.DOWN ? (this.setCurrentState(this.DOWN), this._internalPressed = !0) : t === this.UP ? (this._internalOver && this._internalPressed && this.toggleSelected(), this._internalOver ? this.setCurrentState(this.OVER) : this.setCurrentState(this.UP), this._internalPressed = !1) : t === this.OVER ? (this._internalOver = !0, this._internalPressed ? this.setCurrentState(this.DOWN) : this.setCurrentState(this.OVER)) : (this._internalOver && (this._internalOver = !1), this.setCurrentState(this.UP)))
    }
}, Interface.utils.PIXICheckBox = Sys.extend(Interface.utils.PIXIButton, Interface.utils.PIXICheckBox, "Interface.utils.PIXICheckBox");
Sys.ns("Interface.utils"), Interface.utils.PIXILabel = {
    DEFAULT_ID: "label",
    constructor: function(t, e, i, l) {
        Interface.utils.PIXILabel.superclass.constructor.apply(this, arguments), this.id = l || this.DEFAULT_ID, this.setLabel(t), this.setLabelStyle(e), this.setLabelMaxWidth(i), this.updateLabel()
    },
    updateLabel: function() {
        this.labelText ? (this.labelText.text = this._label, this.labelText.style = this._labelStyle) : (this.labelText = new PIXI.Text(this._label, this._labelStyle), this.labelText.resolution = 2, this.addChild(this.labelText)), this.shouldUpdateLabel = !1, this.labelText && (this._labelMaxWidth && this.setLabelMaxWidth(this._labelMaxWidth), this.checkLabelMaxWidthAndReduceFontSizeIfNecessary(), this._anchorPoint && (this.labelText.anchor = this._anchorPoint))
    },
    setAnchorPoint: function(t) {
        this._anchorPoint = t, this.updateLabel()
    },
    checkLabelMaxWidthAndReduceFontSizeIfNecessary: function() {
        if (this._labelMaxWidth) {
            var t = this.labelText.style,
                e = this.getTextWidth(this._label, t);
            if (e > this._labelMaxWidth) {
                var i = this._labelMaxWidth / e,
                    l = t.fontSize.replace("px", "");
                l = parseInt(l, 10), l = Math.round(l * i) + "px", t.fontSize = l, this.fireEvent("notify:" + this.id + ".fontSizeReduced", l)
            }
        }
    },
    getTextWidth: function(t, e) {
        return Game.PIXIUtils.getTextWidth(t, e)
    },
    setLabelMaxWidth: function(t) {
        this._labelMaxWidth !== t && (this._labelMaxWidth = t, this.shouldUpdateLabel = !0)
    },
    setLabel: function(t) {
        this._label !== t && (this._label = t, this.shouldUpdateLabel = !0)
    },
    setLabelStyle: function(t) {
        this._labelStyle !== t && (t.font && (console.warn("Setting font style using the 'font' property is not fully supported anymore and will be deprecated soon to be inline with Pixi.js v4 API. Please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on"), Sys.applyProperties(t, Game.PIXIUtils.parseFont(t.font)), delete t.font), this._labelStyle = t, this.style = t, this.shouldUpdateLabel = !0)
    },
    redraw: function() {
        this.alpha = this._enable ? .5 : 1, this.shouldUpdateLabel && this.updateLabel()
    },
    updateTransform: function() {
        this.redraw && this.redraw(), Interface.utils.PIXILabel.superclass.updateTransform.apply(this, arguments)
    }
}, Interface.utils.PIXILabel = Sys.extend(Interface.utils.PIXIInteractive, Interface.utils.PIXILabel, "Interface.utils.PIXILabel");
Sys.ns("Interface.utils"), Interface.utils.PIXIScrollContainer = {
    SCROLL_SPEED: 300,
    constructor: function(i) {
        var r = this;
        Sys.isDefined ? r.maxHeight = i : r.maxHeight = 0, Interface.utils.PIXIScrollContainer.superclass.constructor.apply(r, arguments), r.initScrollContainer()
    },
    initScrollContainer: function() {
        var i = this;
        i.isScrollContainer = !0, i.contentHeight = 0, i.contentWidth = 0, i.scrollBarContentMargin = 0, i.scrollBarSize = 10, i.scrollBarColor = 11184810, i.scrollBarAlpha = 1, i.scrollSliderColor = 2105376, i.scrollSliderAlpha = 1, i.touchStartPositionY = 0, i.bottomPadding = 0, i.scrollBar = new PIXI.Container, i.scrollBar.isScrollBar = !0, i.scrollBarGraphics = new PIXI.Graphics, i.scrollBarGraphics.beginFill(i.scrollBarColor, i.scrollBarAlpha), i.scrollBarGraphics.drawCircle(0, i.scrollBarSize, i.scrollBarSize), i.scrollBarGraphics.endFill(), i.scrollBar.addChild(i.scrollBarGraphics), i.scrollBar.visible = !1, i.scrollBar.interactive = !0, i.scrollSlider = new PIXI.Container, i.scrollSlider.isScrollSlider = !0, i.scrollSliderGraphics = new PIXI.Graphics, i.scrollSliderGraphics.beginFill(i.scrollSliderColor, i.scrollSliderAlpha), i.scrollSliderGraphics.drawCircle(0, i.scrollBarSize, i.scrollBarSize), i.scrollSliderGraphics.drawRect(-i.scrollBarSize, i.scrollBarSize, 2 * i.scrollBarSize, i.maxHeight - 2 * i.scrollBarSize), i.scrollSliderGraphics.drawCircle(0, i.maxHeight - 2 * i.scrollBarSize, i.scrollBarSize), i.scrollSliderGraphics.endFill(), i.scrollSlider.addChild(i.scrollSliderGraphics), i.scrollSlider.visible = !1, i.scrollSlider.interactive = !0, i.mask = new PIXI.Graphics, i.mask.beginFill(), i.mask.drawRect(0, 0, 1, i.maxHeight), i.mask.endFill(), i.mask.isMask = !0, i.addChild(i.mask), i.addChild(i.scrollSlider), i.addChild(i.scrollBar), i.setupEvents(), i.interactive = !0
    },
    setupEvents: function() {
        var i = this;
        i.addEventListener("notify:userInputManager.userInputScroll", i.mouseWheel.bind(i)), i.scrollBar.on("touchstart", i.touchStartScrollBar.bind(i)), i.scrollBar.on("touchmove", i.touchMoveScrollBar.bind(i)), i.scrollBar.on("touchend", i.touchEndScrollBar.bind(i)), i.scrollSlider.on("touchstart", i.touchStartScrollBar.bind(i)), i.scrollSlider.on("touchend", i.touchEndScrollBar.bind(i)), window.addEventListener("click", i.mouseUp.bind(i)), i.scrollBar.on("mousemove", i.mouseMove.bind(i)), i.scrollBar.on("mousedown", i.mouseDown.bind(i)), i.scrollSlider.on("mousemove", i.mouseMove.bind(i)), i.scrollSlider.on("mousedown", i.mouseDown.bind(i))
    },
    updateScrollContainer: function() {
        var i, r, l = this,
            o = !1;
        r = l.forcedHeight || l.getChildrenMaxHeight(), i = l.forcedWidth || l.getChildrenMaxWidth(), r += l.bottomPadding, r > l.maxHeight && (o = !0), o && (l.scrollBar.visible = !0, l.scrollBar.updateTransform(), l.scrollSlider.visible = !0, l.scrollSlider.updateTransform()), l.scrollBarGraphics.clear(), l.scrollSliderGraphics.clear(), Sys.isDefined(l.scrollBar.sprite) ? l.scrollBar.position.x = i - l.scrollBar.width + l.scrollBarContentMargin : (l.scrollBarGraphics.beginFill(l.scrollBarColor, l.scrollBarAlpha), l.scrollBarGraphics.drawCircle(0, l.scrollBarSize, l.scrollBarSize), l.scrollBarGraphics.endFill(), l.scrollBar.position.x = i - l.scrollBar.width + l.scrollBarContentMargin), l.scrollSliderGraphics.beginFill(l.scrollSliderColor, l.scrollSliderAlpha), l.scrollSliderGraphics.drawCircle(0, l.scrollBarSize, l.scrollBarSize), l.scrollSliderGraphics.drawRect(-l.scrollBarSize, l.scrollBarSize, 2 * l.scrollBarSize, l.maxHeight - 2 * l.scrollBarSize), l.scrollSliderGraphics.drawCircle(0, l.maxHeight - l.scrollBarSize, l.scrollBarSize), l.scrollSliderGraphics.endFill(), l.contentHeight = r, l.contentWidth = i + l.scrollBarContentMargin, l.scrollSlider.position.x = i - l.scrollBar.width + l.scrollBarContentMargin, l.mask.width = i + l.scrollBarContentMargin, l.mask.height = l.maxHeight, l.children.sort(function(i, r) {
            return !!i.isScrollBar || i.isScrollSlider && !r.isScrollBar
        })
    },
    updateContent: function(i) {
        if (this.isActive())
            for (var r = this, l = (r.contentHeight - r.maxHeight) / (r.maxHeight - r.scrollBar.height) * i, o = 0; o < r.children.length; ++o) Sys.isDefined(r.children[o].isScrollBar) || Sys.isDefined(r.children[o].isScrollSlider) || Sys.isDefined(r.children[o].isMask) || (r.children[o].position.y = r.children[o].offsetY - l)
    },
    updateScrollBarByMousePosition: function(i) {
        if (this.isActive() && this.scrollActive) {
            var r = this,
                l = document.getElementsByTagName("canvas")[0];
            r.moveScrollBar(r.getMousePosition(l, i).y), r.updateContent(r.scrollBar.position.y)
        }
    },
    updateScrollBarByScrollPosition: function(i) {
        if (this.isActive()) {
            var r = this,
                l = document.getElementsByTagName("canvas")[0],
                o = r.getMousePosition(l, i),
                t = r.scrollContainerToGlobalPosition(0, r.scrollBar.position.y).y,
                e = r.SCROLL_SPEED / r.contentHeight,
                n = i.deltaY || i.detail / 3 * 100;
            o = r.globalToScrollContainerPosition(o.x, o.y), o.x > 0 && o.x < r.contentWidth && o.y > 0 && o.y < r.maxHeight && (r.moveScrollBar(t + n * e), r.updateContent(r.scrollBar.position.y))
        }
    },
    updateScrollBarByTouch: function(i) {
        var r = this,
            l = r.scrollContainerToGlobalPosition(0, r.scrollBar.position.y).y,
            o = r.touchStartPositionY - i.data.global.y;
        r.touchStartPositionY -= o, r.moveScrollBar(l + o / 5), r.updateContent(r.scrollBar.position.y)
    },
    moveScrollBar: function(i) {
        var r = this,
            l = r.globalToScrollContainerPosition(0, i).y,
            o = r.scrollActive ? -r.scrollBar.height / 2 : 0,
            t = r.scrollActive ? 0 : -r.scrollBar.height / 2;
        i <= r.position.y + r.maxHeight - r.scrollBar.height / 2 + t && i >= r.position.y + r.scrollBar.height / 2 + t ? r.scrollBar.position.y = l + o : i > r.position.y + r.maxHeight - r.scrollBar.height / 2 + t ? r.scrollBar.position.y = r.maxHeight - r.scrollBar.height : i < r.position.y + r.scrollBar.height / 2 + t && (r.scrollBar.position.y = 0)
    },
    isActive: function() {
        return !!this.visible && (!Sys.isDefined(this.parent) || this.parent.visible)
    },
    addChild: function(i, r) {
        Sys.isDefined(r) || (r = !0);
        var l = this;
        Interface.utils.PIXIScrollContainer.superclass.addChild.apply(l, [i]), i.offsetY = i.position.y, r && l.updateScrollContainer()
    },
    useScrollBarSprite: function(i) {
        this.scrollBar.addChild(i), this.scrollBar.sprite = i, i.anchor.x = .5
    },
    mouseMove: function(i) {
        this.updateScrollBarByMousePosition(i)
    },
    touchStartScrollBar: function(i) {
        this.scrollActive = !0, this.updateScrollBarByMousePosition(i), i.stopPropagation()
    },
    touchMoveScrollBar: function(i) {
        this.updateScrollBarByMousePosition(i), this.scrollActive && i.stopPropagation()
    },
    touchEndScrollBar: function(i) {
        this.scrollActive = !1, i.stopPropagation()
    },
    touchStart: function(i) {
        this.scrollActive = !1, this.touchStartPositionY = i.data.global.y
    },
    touchMove: function(i) {
        this.updateScrollBarByTouch(i)
    },
    touchEnd: function(i) {
        this.scrollActive = !1
    },
    mouseDown: function(i) {
        this.scrollActive = !0, this.updateScrollBarByMousePosition(i)
    },
    mouseUp: function() {
        this.scrollActive = !1
    },
    mouseWheel: function(i, r) {
        this.updateScrollBarByScrollPosition(r)
    },
    getMousePosition: function(i, r) {
        var l = i.getBoundingClientRect();
        return r.clientX ? {
            x: Math.floor((r.clientX - l.left) / (l.right - l.left) * i.width),
            y: Math.floor((r.clientY - l.top) / (l.bottom - l.top) * i.height)
        } : r.data.originalEvent.clientX ? {
            x: Math.floor((r.data.originalEvent.clientX - l.left) / (l.right - l.left) * i.width),
            y: Math.floor((r.data.originalEvent.clientY - l.top) / (l.bottom - l.top) * i.height)
        } : {
            x: Math.floor((r.data.originalEvent.touches[0].pageX - l.left) / (l.right - l.left) * i.width / .75),
            y: Math.floor((r.data.originalEvent.touches[0].pageY - l.top) / (l.bottom - l.top) * i.height / .75)
        }
    },
    globalToScrollContainerPosition: function(i, r) {
        return new PIXI.Point(i - this.position.x, r - this.position.y)
    },
    scrollContainerToGlobalPosition: function(i, r) {
        return new PIXI.Point(i + this.position.x, r + this.position.y)
    },
    setScrollBarSize: function(i) {
        this.scrollBarSize = i, this.updateScrollContainer()
    },
    setMaxHeight: function(i) {
        this.maxHeight = i, this.updateScrollContainer()
    },
    setScrollBarContentMargin: function(i) {
        this.scrollBarContentMargin = i, this.updateScrollContainer()
    },
    setScrollBarColor: function(i) {
        this.scrollBarColor = i, this.updateScrollContainer()
    },
    setScrollSliderColor: function(i) {
        this.scrollSliderColor = i, this.updateScrollContainer()
    },
    forceWidth: function(i) {
        this.forcedWidth = i, this.updateScrollContainer()
    },
    forceHeight: function(i) {
        this.forcedHeight = i, this.updateScrollContainer()
    },
    setBottomPadding: function(i) {
        this.bottomPadding = i, this.updateScrollContainer()
    },
    getChildrenMaxHeight: function(i, r) {
        if (Sys.isDefined(i) || (i = this), Sys.isDefined(i.children) && 0 !== i.children.length && !this.isScrollContainerOwnProperty(i)) {
            Sys.isDefined(r) || (r = 0);
            for (var l = this, o = i.children, t = 0; t < o.length; ++t) {
                r = this.getChildrenMaxHeight(o[t], r);
                var e = i.isScrollContainer ? 0 : i.position.y;
                e + o[t].position.y + o[t].height > r && !l.isScrollContainerOwnProperty(o[t]) && !o[t].noHeight && (r = e + o[t].position.y + o[t].height)
            }
        }
        return r
    },
    getChildrenMaxWidth: function(i, r) {
        if (Sys.isDefined(i) || (i = this), Sys.isDefined(i.children) && 0 !== i.children.length && !this.isScrollContainerOwnProperty(i)) {
            Sys.isDefined(r) || (r = 0);
            for (var l = this, o = i.children, t = 0; t < o.length; ++t) {
                r = this.getChildrenMaxWidth(o[t], r);
                var e = i.isScrollContainer ? 0 : i.position.x;
                e + o[t].position.x + o[t].width > r && !l.isScrollContainerOwnProperty(o[t]) && !o[t].noWidth && (r = e + o[t].position.x + o[t].width)
            }
        }
        return r
    },
    addEventListener: function(i, r) {
        var l, o = this,
            t = Resources.readData("config"),
            e = Sys.isDefined(t) && Sys.isDefined(t.eventHandler) ? t.eventHandler : EventHandler;
        e.addListener(o, i), l = e.EVENTS[i];
        for (var n = 0; n < l.length; ++n) l[n] === o && (l[n].handlers = {}, l[n].handlers[i] = r)
    },
    isScrollContainerOwnProperty: function(i) {
        return i.isScrollBar || i.isScrollSlider || i.isMask
    },
    excludeFromWidthMeasure: function(i) {
        for (var r = 0; r < i.length; ++r) i[r].noWidth = !0
    },
    excludeFromHeightMeasure: function(i) {
        for (var r = 0; r < i.length; ++r) i[r].noHeight = !0
    }
}, Interface.utils.PIXIScrollContainer = Sys.extend(PIXI.Container, Interface.utils.PIXIScrollContainer, "Interface.utils.PIXIScrollContainer");
Sys.ns("Interface.utils"), Interface.utils.PIXIStepSlider = {
    VALUE_CHANGED: "valueChanged",
    constructor: function(e, t, i, s) {
        Interface.utils.PIXIStepSlider.superclass.constructor.apply(this, arguments), this._graphicsReferences = {
            bar: e,
            barDisabled: t,
            background: i,
            backgroundDisabled: s
        }, this._values = [0, 1, 2, 3, 4], this._index = 0, this._enabled = !1 !== this._enabled, this._pooledGraphics = {}, this._allowMove = !1, this.interactive = !0, this.shouldUpdateDimensions = !1, this.shouldUpdateGraphics = !1, this.updateGraphics(), this.updateDimensions(), this.enableEventListeners(this._enabled)
    },
    getTexture: function(e) {
        var t = this._pooledGraphics[e];
        return t || (t = Game.PIXIFactory.createTexture(e), this._pooledGraphics[e] = t), t
    },
    updateGraphics: function() {
        var e;
        this._background ? (e = this._enabled ? this._graphicsReferences.background : this._graphicsReferences.backgroundDisabled, this._background.texture = this.getTexture(e)) : this._background = Game.PIXIFactory.createAndAddSprite(this._graphicsReferences.background, this), this._bar ? (e = this._enabled ? this._graphicsReferences.bar : this._graphicsReferences.barDisabled, this._bar.texture = this.getTexture(e)) : this._bar = Game.PIXIFactory.createAndAddSprite(this._graphicsReferences.bar, this), this.shouldUpdateGraphics = !1, this.shouldUpdateDimensions = !0
    },
    updateDimensions: function() {
        this._bar.x = (this._background.width - this._bar.texture.width) / 2, this._bar.y = (this._background.height - this._bar.texture.height) / 2;
        var e = this._bar.texture.width / this._values.length;
        this._bar.width = Math.round(e * (this._index + 1)), this.shouldUpdateDimensions = !1
    },
    redraw: function() {
        this.shouldUpdateGraphics && this.updateGraphics(), this.shouldUpdateDimensions && this.updateDimensions()
    },
    updateTransform: function() {
        this.redraw && this.redraw(), Interface.utils.PIXIStepSlider.superclass.updateTransform.apply(this, arguments)
    },
    pixelToIndex: function(e) {
        var t = this._values.length - 1,
            i = this._bar.texture.width / this._values.length,
            s = e - this.worldTransform.tx - this._bar.x,
            n = Math.floor(s / i);
        return n < 0 ? n = 0 : n > t && (n = t), n
    },
    moveToPosition: function(e) {
        this.updateDimensions(), Interface.utils.PIXIStepSlider.superclass.moveToPosition.apply(this, arguments)
    },
    updateIndexFromEventData: function(e) {
        var t = this.pixelToIndex(e.data.global.x);
        t > this._values.length - 1 && (t = this._values.length - 1), t < 0 && (t = 0), this._index !== t && (this._index = t, this.shouldUpdateDimensions = !0, this.emit(this.VALUE_CHANGED, {
            value: this.getValue(),
            index: this._index
        }))
    },
    checkInteractionTarget: function(e) {
        return !1 !== Sys.isDefined(e.originalEvent) && null !== e.originalEvent && (Sys.isDefined(e.originalEvent.target.id) && "canvasAnimationManager" === e.originalEvent.target.id)
    },
    onMouseDownHandler: function(e) {
        this.checkInteractionTarget(e.data) && (this._allowMove = !0)
    },
    onMouseMoveHandler: function(e) {
        this._allowMove && this.updateIndexFromEventData(e)
    },
    onMouseUpHandler: function(e) {
        this._allowMove = !1, this.updateIndexFromEventData(e)
    },
    mouseupoutside: function(e) {
        this._enabled && this.onMouseUpHandler(e), this.setStateFromEvent(this.UP, e)
    },
    enableEventListeners: function(e) {
        e ? (this.clickCallback = this.onMouseUpHandler.bind(this), this.upCallback = this.onMouseUpHandler.bind(this), this.downCallback = this.onMouseDownHandler.bind(this), this.moveCallback = this.onMouseMoveHandler.bind(this)) : (this.clickCallback = void 0, this.upCallback = void 0, this.downCallback = void 0, this.moveCallback = void 0)
    },
    setEnabled: function(e) {
        this._enabled !== e && (this._enabled = e, this.enableEventListeners(this._enabled), this.shouldUpdateGraphics = !0)
    },
    setIndex: function(e) {
        e > this._values.length - 1 && (e = this._values.length - 1), e < 0 && (e = 0), this._index !== e && (this._index = e, this.shouldUpdateDimensions = !0)
    },
    getIndex: function() {
        return this._index
    },
    setValues: function(e) {
        this._values !== e && (this._values = e, this.shouldUpdateDimensions = !0)
    },
    getValue: function() {
        return this._values[this._index]
    }
}, Interface.utils.PIXIStepSlider = Sys.extend(Interface.utils.PIXIInteractive, Interface.utils.PIXIStepSlider, "Interface.utils.PIXIStepSlider");
Sys.ns("Interface.utils"), Interface.utils.PIXIValueStepper = {
    VALUE_CHANGED: "valueChanged",
    DEFAULT_GAP: 4,
    constructor: function(t, e, i, s, n, u, a, h, d) {
        Interface.utils.PIXIValueStepper.superclass.constructor.apply(this, arguments), this._enabled = !1 !== this._enabled, this.interactive = !1, this._values = [0, 1, 2, 3, 4], this._index = 0, this._labelVerticalOffset = 0, this._gap = this.DEFAULT_GAP, this.shouldUpdateValueTextField = !1, this.shouldUpdateDimensions = !0, this._backgroundImageContainer = new PIXI.Container, this.addChild(this._backgroundImageContainer), this.createButtons(t, e, i, s, n, u, a, h, d), this.createValueText(), this.valueTextMaxWidth = this.getValueTextMaxWidth(this._values)
    },
    createButtons: function(t, e, i, s, n, u, a, h, d) {
        var l = Sys.isDefined(d) ? d + "Increase" : void 0,
            o = Sys.isDefined(d) ? d + "Decrease" : void 0;
        this.plusButton = new Interface.utils.PIXIButton(n, u, a, h, l), this.plusButton.clickCallback = this.plusClickHandler.bind(this), this.addChild(this.plusButton), this.minusButton = new Interface.utils.PIXIButton(t, e, i, s, o), this.minusButton.clickCallback = this.minusClickHandler.bind(this), this.addChild(this.minusButton)
    },
    createValueText: function() {
        this.valueTextField = Game.PIXIFactory.createAndAddText(this.getValue(), {}, this)
    },
    getValueTextMaxWidth: function(t) {
        for (var e = 0, i = 0; i < t.length; i++) {
            var s = t[i];
            this.valueTextField.text = s, this.valueTextField.updateTransform();
            var n = this.valueTextField.width;
            n > e && (e = n)
        }
        return e
    },
    setValueTextMaxWidth: function(t) {
        this._maxWidthValues = t, this.valueTextMaxWidth = this.getValueTextMaxWidth(t)
    },
    increaseIndex: function() {
        var t = this.getIndex();
        this.setIndexWithValueChangedEvent(t + 1)
    },
    decreaseIndex: function() {
        var t = this.getIndex();
        this.setIndexWithValueChangedEvent(t - 1)
    },
    setIndexWithValueChangedEvent: function(t) {
        t > this._values.length - 1 && (t = this._values.length - 1), t < 0 && (t = 0), this._index !== t && (this._index = t, this.shouldUpdateValueTextField = !0, this.emit(this.VALUE_CHANGED, {
            value: this.getValue(),
            index: this._index
        }))
    },
    moveToPosition: function(t) {
        this.updateDimensions(), Interface.utils.PIXIValueStepper.superclass.moveToPosition.apply(this, arguments)
    },
    plusClickHandler: function() {
        this.increaseIndex()
    },
    minusClickHandler: function() {
        this.decreaseIndex()
    },
    updateButtonsEnableState: function() {
        0 === this._index ? this.minusButton.setEnabled(!1) : !1 === this.minusButton.getEnabled() && this.minusButton.setEnabled(!0), this._index === this._values.length - 1 ? this.plusButton.setEnabled(!1) : !1 === this.plusButton.getEnabled() && this.plusButton.setEnabled(!0)
    },
    updateValueTextField: function() {
        this.valueTextField && (this.valueTextField.text = Sys.isDefined(this._fixedNumberOfDigits) ? Sys.utils.numberToFixedDigits(this.getValue(), this._fixedNumberOfDigits) : this.getValue(), this.valueTextField.style = this._textStyle, this._enabled && this.updateButtonsEnableState()), this.shouldUpdateValueTextField = !1, this.shouldUpdateDimensions = !0
    },
    updateDimensions: function() {
        var t, e, i, s, n = void 0 === this._valueTextCustomWidth ? this.valueTextMaxWidth : this._valueTextCustomWidth,
            u = n - this.valueTextField.width;
        this.valueTextField.x = this.minusButton.width + this._gap + u / 2, this.valueTextField.y = (this.minusButton.height - this.valueTextField.height) / 2 + this._labelVerticalOffset, this.plusButton.x = this.minusButton.width + this._gap + n + this._gap, Sys.isDefined(this._backgroundColor) && (this.background || (this.background = new PIXI.Graphics, this.addChildAt(this.background, 0)), t = this._paddingBackgroundX || this.minusButton.x + this.minusButton.width - 5, e = this._paddingBackgroundY || this.minusButton.y, i = this._paddingBackgroundWidth || this.plusButton.x - t + 5, s = this._paddingBackgroundHeight || this.minusButton.height, this.background.clear(), this.background.beginFill(this._backgroundColor, this._backgroundOpacity), this.background.drawRect(t, this.minusButton.x, i, s), this.background.endFill()), Sys.isDefined(this._backgroundImage) && (t = this._paddingBackgroundX + 5 || this.minusButton.x + this.minusButton.width, e = this._paddingBackgroundY || this.minusButton.y, this._backgroundImage.position = new PIXI.Point(t, e)), this.shouldUpdateDimensions = !1
    },
    redraw: function() {
        this.shouldUpdateValueTextField && this.updateValueTextField(), this.shouldUpdateDimensions && this.updateDimensions()
    },
    updateTransform: function() {
        this.redraw && this.redraw(), Interface.utils.PIXIValueStepper.superclass.updateTransform.apply(this, arguments)
    },
    setValueFieldStyle: function(t) {
        this._textStyle !== t && (t.font && (console.warn("Setting font style using the 'font' property is not fully supported anymore and will be deprecated soon to be inline with Pixi.js v4 API. Please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on"), Sys.applyProperties(t, Game.PIXIUtils.parseFont(t.font)), delete t.font), this._textStyle = t, this.shouldUpdateValueTextField = !0)
    },
    setBackground: function(t, e) {
        this._backgroundColor === t && this._backgroundOpacity === e || (this._backgroundColor = t, this._backgroundOpacity = e || 1, this.shouldUpdateDimensions = !0, this.redraw())
    },
    setBackgroundImage: function(t) {
        this._backgroundImage = Game.PIXIFactory.createAndAddSprite(t, this._backgroundImageContainer), this.shouldUpdateDimensions = !0, this.redraw()
    },
    setEnabled: function(t) {
        this._enabled !== t && (this._enabled = t, t ? this.updateButtonsEnableState() : (this.plusButton.setEnabled(t), this.minusButton.setEnabled(t)))
    },
    setGap: function(t) {
        this._gap !== t && (this._gap = t, this.shouldUpdateDimensions = !0)
    },
    setIndex: function(t) {
        t > this._values.length - 1 && (t = this._values.length - 1), t < 0 && (t = 0), this._index !== t && (this._index = t, this.shouldUpdateValueTextField = !0)
    },
    getIndex: function() {
        return this._index
    },
    setValues: function(t) {
        if (this._values !== t) {
            this._values = t;
            this._maxWidthValues || this._values;
            this.valueTextMaxWidth = this.getValueTextMaxWidth(t), this.shouldUpdateValueTextField = !0
        }
    },
    setValueTextWidth: function(t) {
        this._valueTextCustomWidth !== t && (this._valueTextCustomWidth = t, this.updateDimensions())
    },
    getValues: function() {
        return this._values
    },
    setValue: function(t) {
        var e = this._values.indexOf(t); - 1 === e && (e = this._values.indexOf(Sys.utils.numberToFixedDigits(t, 3))), e >= 0 && this.setIndex(e)
    },
    getValue: function() {
        return this._values[this._index]
    },
    setButtonPadding: function(t, e, i, s) {
        this._paddingBackgroundHeight = this.minusButton.height - t - i, this._paddingBackgroundY = this.minusButton.y + t, this._paddingBackgroundWidth = this.plusButton.x - this.minusButton.x - this.minusButton.width + 10 + s + e, this._paddingBackgroundX = this.minusButton.x + this.minusButton.width - 5 - s, this.minusButton.setCustomHitArea(new PIXI.Rectangle(s, t, this.minusButton.width - s - e, this.minusButton.height - t - i)), this.plusButton.setCustomHitArea(new PIXI.Rectangle(s, t, this.plusButton.width - s - e, this.plusButton.height - t - i)), this.shouldUpdateDimensions = !0, this.redraw()
    },
    useFixedNumberOfDigits: function(t) {
        this._fixedNumberOfDigits = t, this.shouldUpdateValueTextField = !0
    }
}, Interface.utils.PIXIValueStepper = Sys.extend(Interface.utils.PIXIControl, Interface.utils.PIXIValueStepper, "Interface.utils.PIXIValueStepper");
Sys.ns("Interface.utils"), Interface.utils.PIXIValueStepperWithSlider = {
    DEFAULT_GAP: 4,
    constructor: function(e, t, i, s, l, r, a, n, d, h, u, p, c) {
        Interface.utils.PIXIValueStepperWithSlider.superclass.constructor.apply(this, [e, t, i, s, l, r, a, n, c]), this.createSlider(d, h, u, p)
    },
    createSlider: function(e, t, i, s) {
        this.slider = new Interface.utils.PIXIStepSlider(e, t, i, s), this.slider.setValues(this.getValues()), this.slider.setIndex(this.getIndex()), this.slider.on("valueChanged", this.sliderValueChangeHandler, this), this.addChild(this.slider)
    },
    setIndexWithValueChangedEvent: function(e) {
        Interface.utils.PIXIValueStepperWithSlider.superclass.setIndexWithValueChangedEvent.apply(this, arguments), this.slider.setIndex(e)
    },
    sliderValueChangeHandler: function(e) {
        var t = e.index;
        t > this._values.length - 1 && (t = this._values.length - 1), t < 0 && (t = 0), this._index !== t && (this._index = t, this.shouldUpdateValueTextField = !0, this.emit(this.VALUE_CHANGED, {
            value: this.getValue(),
            index: this._index
        }))
    },
    updateGraphics: function() {
        Interface.utils.PIXIValueStepperWithSlider.superclass.updateGraphics.apply(this, arguments)
    },
    updateDimensions: function() {
        Interface.utils.PIXIValueStepperWithSlider.superclass.updateDimensions.apply(this, arguments);
        var e = this._sliderVerticalOffset || 0,
            t = this._sliderHorizontalOffset || 0,
            i = this.plusButton.x + this.plusButton.width,
            s = this._forcedSliderWidth || this.slider.width;
        this.slider.x = (i - s) / 2 + t, this.slider.y = this.minusButton.height + this._gap + e, this.shouldUpdateDimensions = !1
    },
    setEnabled: function(e) {
        Interface.utils.PIXIValueStepperWithSlider.superclass.setEnabled.apply(this, arguments), this.slider.setEnabled(e)
    },
    setIndex: function(e) {
        Interface.utils.PIXIValueStepperWithSlider.superclass.setIndex.apply(this, arguments), this.slider.setIndex(e)
    },
    setValues: function(e) {
        Interface.utils.PIXIValueStepperWithSlider.superclass.setValues.apply(this, arguments), this.slider.setValues(e)
    },
    setSliderVerticalOffset: function(e) {
        this._sliderVerticalOffset = e
    },
    setSliderHorizontalOffset: function(e) {
        this._sliderHorizontalOffset = e
    },
    setLabelVerticalOffset: function(e) {
        this._labelVerticalOffset = e
    },
    forceSliderWidth: function(e) {
        this._forcedSliderWidth = e, this.shouldUpdateDimensions = !0
    }
}, Interface.utils.PIXIValueStepperWithSlider = Sys.extend(Interface.utils.PIXIValueStepper, Interface.utils.PIXIValueStepperWithSlider, "Interface.utils.PIXIValueStepperWithSlider");
Sys.ns("Animation"), Animation.AddFilter = {
    constructor: function(o) {
        o.renderable = !1, PIXI.Filter.call(this, null, "precision mediump float;varying vec2 vTextureCoord;uniform float delta;uniform sampler2D uSampler;uniform sampler2D fadeToTexture;void main(void){   vec4 color;   vec4 fromColor = texture2D(uSampler, vTextureCoord);   vec4 toColor = texture2D(fadeToTexture, vTextureCoord);   color.r = (toColor.r * delta) + (fromColor.r * (1.0 - delta));   color.b = (toColor.b * delta) + (fromColor.b * (1.0 - delta));   color.g = (toColor.g * delta) + (fromColor.g * (1.0 - delta));   color.a = (toColor.a * delta) + (fromColor.a * (1.0 - delta));   gl_FragColor = color;}", {
            fadeToTexture: {
                type: "sampler2D",
                value: o.texture
            },
            delta: {
                type: "1f",
                value: 0
            }
        })
    }
}, Animation.AddFilter = Sys.extend(Sys.Observable, Animation.AddFilter, "Animation.AddFilter"), Animation.AddFilter.prototype = Object.create(PIXI.Filter.prototype), Object.defineProperties(Animation.AddFilter.prototype, {
    delta: {
        get: function() {
            return this.uniforms.delta.value
        },
        set: function(o) {
            this.uniforms.delta.value = o
        }
    }
});
Sys.ns("Animation"), Animation.DesaturationFilter = {
    constructor: function() {
        PIXI.Filter.call(this, null, "precision mediump float;varying vec2 vTextureCoord;uniform float delta;uniform float alpha;uniform sampler2D uSampler;void main(void){   vec4 color = texture2D(uSampler, vTextureCoord);   color.rgb = mix(color.rgb, vec3(0.2126*color.r + 0.7152*color.g + 0.0722*color.b), delta);   color.a = color.a * alpha;   gl_FragColor = color;}", {
            delta: {
                type: "1f",
                value: 1
            },
            alpha: {
                type: "1f",
                value: 1
            }
        })
    }
}, Animation.DesaturationFilter = Sys.extend(Sys.Observable, Animation.DesaturationFilter, "Animation.DesaturationFilter"), Animation.DesaturationFilter.prototype = Object.create(PIXI.Filter.prototype), Object.defineProperties(Animation.DesaturationFilter.prototype, {
    delta: {
        get: function() {
            return this.uniforms.delta.value
        },
        set: function(t) {
            this.uniforms.delta.value = t
        }
    },
    alpha: {
        get: function() {
            return this.uniforms.alpha.value
        },
        set: function(t) {
            this.uniforms.alpha.value = t
        }
    }
});
Sys.ns("Game"), Game.TextStyles = {
    SKIP_INTRO_STYLE: {
        fontFamily: "NetentStandardUI",
        fontSize: "20px",
        align: "center",
        fill: "#FFFFFF"
    },
    ACTIVE_TEXT_STYLE: {
        fontFamily: "NetentStandardUI",
        fontSize: "26px",
        align: "center",
        fill: "#f7c109"
    },
    INACTIVE_TEXT_STYLE: {
        fontFamily: "NetentStandardUI",
        fontSize: "26px",
        align: "center",
        fill: "#000000"
    },
    CONTINUE_BUTTON: {
        fontFamily: ["Vikings", "NetentStandardUI"],
        fontSize: "30px",
        fontWeight: "bold",
        align: "center",
        fill: "#dcd0ba",
        dropShadow: !0,
        dropShadowColor: "#000000",
        dropShadowAngle: 2,
        dropShadowDistance: 2
    },
    SKIP_CHECK_BOX: {
        fontFamily: "NetentStandardUI",
        fontSize: "20px",
        align: "center",
        fill: "#dcd0ba"
    },
    SKIP_CHECK_BOX_MOBILE: {
        fontFamily: "NetentStandardUI",
        fontSize: "28px",
        align: "center",
        fill: "#dcd0ba"
    },
    MAX_BET_BUTTON: {
        fontFamily: ["Vikings", "NetentStandardUI"],
        fontSize: "18px",
        align: "center",
        fill: "#c0ccd8"
    },
    MAX_BET_BUTTON_SMALL: {
        fontFamily: ["Vikings", "NetentStandardUI"],
        fontSize: "14px",
        align: "center",
        fill: "#c0ccd8"
    },
    AUTOPLAY_BUTTON: {
        fontFamily: ["Vikings", "NetentStandardUI"],
        fontSize: "18px",
        align: "center",
        fill: "#c0ccd8"
    },
    AUTOPLAY_BUTTON_SMALL: {
        fontFamily: ["Vikings", "NetentStandardUI"],
        fontSize: "14px",
        align: "center",
        fill: "#c0ccd8"
    },
    GENERIC_LABEL_STYLE: {
        fontFamily: "NetentStandardUI",
        fontSize: "14px",
        align: "center",
        fill: "#d1d2d4"
    },
    GENERIC_VALUE_STYLE: {
        fontFamily: "NetentStandardUI",
        fontSize: "24px",
        align: "center",
        fill: "#d1d2d4"
    },
    FREESPINS_GENERIC_LABEL: {
        fontFamily: "NetentStandardUI",
        fontSize: "25px",
        align: "center",
        fill: "#d1d2d4"
    },
    FREESPINS_GENERIC_VALUE: {
        fontFamily: "NetentStandardUI",
        fontSize: "25px",
        align: "center",
        fill: "#d1d2d4"
    },
    FREESPINS_PROGRESSIVE_WIN: {
        fontFamily: "NetentStandardUI",
        fontSize: "25px",
        fontWeight: "bold",
        align: "left",
        fill: "#ebb72a"
    },
    FS_LEFT_TEXT_STYLE: {
        fontFamily: ["Vikings", "Arial"],
        fontSize: "90px",
        align: "center",
        fill: "#FFFFFF",
        padding: 4,
        dropShadow: !0,
        dropShadowColor: "#000000",
        dropShadowAngle: 2.4434,
        dropShadowDistance: 4
    },
    FREE_SPINS_TEXT_STYLE: {
        fontFamily: ["Vikings", "Arial"],
        fontSize: "40px",
        align: "center",
        fill: "#FFFFFF",
        padding: 4,
        dropShadow: !0,
        dropShadowColor: "#000000",
        dropShadowAngle: 2.4434,
        dropShadowDistance: 4
    },
    TICKER_TAPE_TEXT: {
        fontFamily: "NetentStandardUI",
        fontSize: "20px",
        align: "center",
        fill: "#FFFFFF",
        dropShadow: !0,
        dropShadowColor: "#004959",
        dropShadowAngle: .785398,
        dropShadowDistance: 3,
        padding: 10,
        miterLimit: 5
    },
    WIN_BANNER_WIN_TEXT: {
        fontFamily: "NetentStandardUI",
        fontSize: "46px",
        fill: "#ffffff"
    },
    WIN_BANNER_COUNT_UP_TEXT: {
        font: "80px CoinLow",
        align: "center",
        fill: "#ec5"
    },
    WIN_LABEL: {
        fontFamily: "Vikings",
        fontSize: "23px",
        fill: "#fff"
    },
    COIN_LOW: {
        font: "80px CoinLow",
        align: "center"
    },
    COIN_MEDIUM: {
        font: "80px CoinMedium",
        align: "center"
    },
    COIN_HIGH: {
        font: "80px CoinHigh",
        align: "center"
    },
    COIN_GLOW: {
        font: "80px CoinBG",
        align: "center"
    },
    PAYOUT_LABEL: {
        fontFamily: "Vikings",
        fontSize: "50px",
        align: "right",
        fill: "#e4312e"
    },
    PAYOUT_LABEL_GOLD: {
        fontFamily: "Vikings",
        fontSize: "50px",
        align: "right",
        fill: "#fdc131"
    },
    PAYOUT_VALUE: {
        fontFamily: "NetentStandardUI",
        fontSize: "50px",
        align: "center",
        fill: "#c4d0df"
    },
    PAYOUT_VALUE_WHITE: {
        fontFamily: "NetentStandardUI",
        fontSize: "50px",
        align: "center",
        fill: "#fff"
    },
    PAYTABLE_LABEL: {
        fontFamily: "Vikings",
        fontSize: "60px",
        fill: "#e4312e"
    },
    PAYTABLE_TEXT: {
        fontFamily: "NetentStandardUI",
        fontSize: "40px",
        fill: "#c4d0df"
    },
    PAYTABLE_TITLE: {
        fontFamily: ["Vikings", "Arial"],
        fontSize: "25px",
        align: "center",
        fill: "#c4d0df"
    },
    BETLINE_BUTTON_LABEL: {
        fontFamily: "NetentStandardUI",
        fontSize: "14px",
        align: "center",
        fill: "#FFFFFF",
        stroke: "#1774b9",
        strokeThickness: 4
    },
    LEGAL_LINE: {
        fontFamily: "NetentStandardUI",
        fontSize: "18px",
        fill: "#a4b0bf"
    },
    LEGAL_LINE_MOBILE: {
        fontFamily: "NetentStandardUI",
        fontSize: "25px",
        fill: "#a4b0bf"
    },
    INTRO_CONGRATULATIONS: {
        fontFamily: ["Vikings", "Arial"],
        fontSize: "55px",
        align: "center",
        fill: "#ffffec",
        padding: 4,
        dropShadow: !0,
        dropShadowColor: "#d44a1c",
        dropShadowDistance: 0,
        dropShadowBlur: 15,
        stroke: "#ff8854",
        strokeThickness: 1
    },
    INTRO_COUNT_TEXT: {
        fontFamily: ["Vikings", "Arial"],
        fontSize: "120px",
        align: "center",
        fill: "#fff780",
        padding: 4,
        dropShadow: !0,
        dropShadowColor: "#d44a1c",
        dropShadowDistance: 0,
        dropShadowBlur: 25,
        stroke: "#ff7f4d",
        strokeThickness: 3
    },
    INTRO_TEXT: {
        fontFamily: ["Vikings", "Arial"],
        fontSize: "35px",
        align: "center",
        fill: "#ffffec",
        padding: 4,
        dropShadow: !0,
        dropShadowColor: "#d44a1c",
        dropShadowDistance: 0,
        dropShadowBlur: 15,
        stroke: "#ff8854",
        strokeThickness: 1
    },
    OUTRO_CONGRATULATIONS: {
        fontFamily: ["Vikings", "Arial"],
        fontSize: "55px",
        align: "center",
        fill: "#ffffec",
        padding: 4,
        dropShadow: !0,
        dropShadowColor: "#d44a1c",
        dropShadowDistance: 0,
        dropShadowBlur: 15
    },
    OUTRO_TEXT: {
        fontFamily: ["Vikings", "displayPro", "Arial"],
        fontVariant: "small-caps",
        fontSize: "35px",
        align: "center",
        fill: "#ffffec",
        padding: 4,
        dropShadow: !0,
        dropShadowColor: "#d44a1c",
        dropShadowDistance: 0,
        dropShadowBlur: 15
    },
    OUTRO_COUNT_TEXT: {
        fontFamily: ["Vikings", "Arial"],
        fontSize: "120px",
        align: "center",
        fill: "#fff780",
        padding: 4,
        dropShadow: !0,
        dropShadowColor: "#d44a1c",
        dropShadowDistance: 0,
        dropShadowBlur: 25,
        stroke: "#ff7f4d",
        strokeThickness: 3
    },
    BIG_WIN_TEXT: {
        fontFamily: ["Vikings", "Arial"],
        fontSize: "100px",
        align: "center",
        fill: "#000000",
        padding: 10,
        dropShadow: !1,
        dropShadowAlpha: .5,
        dropShadowColor: "#ba0f0f",
        dropShadowAngle: 1,
        dropShadowBlur: 25,
        dropShadowDistance: 7
    },
    BIG_WIN_TEXT_GLOW: {
        fontFamily: ["Vikings", "Arial"],
        fontSize: "100px",
        align: "center",
        padding: 10,
        fill: "#ffffc7",
        dropShadow: !0,
        dropShadowColor: "#ff7e00",
        dropShadowDistance: 0,
        dropShadowBlur: 20
    },
    MEGA_WIN_TEXT: {
        fontFamily: "BodoniPosterCompressed-Bold_DB",
        fontSize: "170px",
        align: "center",
        fill: "#fdcd00",
        padding: 10,
        dropShadow: !0,
        dropShadowColor: "#306368",
        dropShadowAngle: .785398,
        dropShadowDistance: 5
    },
    SUPER_MEGA_WIN_TEXT: {
        fontFamily: "BodoniPosterCompressed-Bold_DB",
        fontSize: "170px",
        align: "center",
        fill: "#fdcd00",
        padding: 10,
        dropShadow: !0,
        dropShadowColor: "#306368",
        dropShadowAngle: .785398,
        dropShadowDistance: 5
    },
    COIN_WIN_TEXT: {
        fontFamily: "Vikings",
        fontSize: "50px",
        align: "center",
        fill: "#FFFFFF",
        dropShadow: !0,
        dropShadowColor: "#000000",
        dropShadowAngle: 2.4434,
        dropShadowDistance: 5
    }
};
Sys.ns("pixiGenericSlot"), pixiGenericSlot.Positions = {
    SKIP_BUTTON: {
        position: new PIXI.Point(640, 700),
        anchorPoint: new PIXI.Point(.5, .5)
    },
    INTRO_CONTINUE_BUTTON: {
        position: new PIXI.Point(640, 570),
        anchorPoint: new PIXI.Point(.5, .5)
    },
    SPIN_BUTTON: {
        position: new PIXI.Point(640, 698),
        anchorPoint: new PIXI.Point(.5, 1)
    },
    PAYTABLE_BUTTON: {
        position: new PIXI.Point(75, 667),
        anchorPoint: new PIXI.Point(0, .5)
    },
    PAYTABLE_CLOSE_BUTTON: {
        position: new PIXI.Point(1240, 33),
        anchorPoint: new PIXI.Point(0, .5)
    },
    MAX_BET_BUTTON: {
        position: new PIXI.Point(675, 696),
        anchorPoint: new PIXI.Point(0, 1)
    },
    MAX_BET_BUTTON_LABEL: {
        position: new PIXI.Point(55, 32.5),
        anchorPoint: new PIXI.Point(0, .5)
    },
    AUTOPLAY_BUTTON: {
        position: new PIXI.Point(605, 696),
        anchorPoint: new PIXI.Point(1, 1)
    },
    AUTOPLAY_BUTTON_LABEL: {
        position: new PIXI.Point(20, 32.5),
        anchorPoint: new PIXI.Point(0, .5)
    },
    FREESPINS_LEFT_LABEL: {
        position: new PIXI.Point(640, 635),
        anchorPoint: new PIXI.Point(.5, 0)
    },
    FREESPIN_TOTAL_WIN_LABEL: {
        position: new PIXI.Point(640, 658),
        anchorPoint: new PIXI.Point(.5, 0)
    },
    BET_LEVEL_LABEL: {
        position: new PIXI.Point(329, 641),
        anchorPoint: new PIXI.Point(.5, 0)
    },
    BET_LEVEL_SELECTOR: {
        position: new PIXI.Point(295, 674),
        anchorPoint: new PIXI.Point(.5, .5)
    },
    COIN_VALUE_LABEL: {
        position: new PIXI.Point(960, 641),
        anchorPoint: new PIXI.Point(.5, 0)
    },
    COIN_VALUE_SELECTOR: {
        position: new PIXI.Point(928, 674),
        anchorPoint: new PIXI.Point(.5, .5)
    },
    FREESPIN_BETLEVEL_LABEL: {
        position: new PIXI.Point(330, 641),
        anchorPoint: new PIXI.Point(.5, 0)
    },
    FREESPIN_BETLEVEL_VALUE: {
        position: new PIXI.Point(330, 674),
        anchorPoint: new PIXI.Point(.5, .5)
    },
    FREESPIN_COINVALUE_LABEL: {
        position: new PIXI.Point(960, 641),
        anchorPoint: new PIXI.Point(.5, 0)
    },
    FREESPIN_COINVALUE_VALUE: {
        position: new PIXI.Point(960, 674),
        anchorPoint: new PIXI.Point(.5, .5)
    },
    BASIC_BET_LABEL: {
        position: new PIXI.Point(205, 641),
        anchorPoint: new PIXI.Point(.5, 0)
    },
    BASIC_BET_VALUE: {
        position: new PIXI.Point(205, 674),
        anchorPoint: new PIXI.Point(.5, .5)
    },
    BASIC_BALANCE_LABEL: {
        position: new PIXI.Point(1140, 641),
        anchorPoint: new PIXI.Point(.5, 0)
    },
    BASIC_BALANCE_VALUE: {
        position: new PIXI.Point(1140, 674),
        anchorPoint: new PIXI.Point(.5, .5)
    },
    BIG_WIN_TEXT: {
        position: new PIXI.Point(640, 0),
        anchorPoint: new PIXI.Point(.5, 0)
    }
};
Sys.ns("Vikings"), Vikings.Utils = function() {
    function n() {
        for (var n = 0; n < c.length; n++) c[n]();
        d = !0
    }

    function e() {
        if (d) {
            for (var n = 0; n < u.length; n++) u[n]();
            d = !1
        }
    }

    function t() {
        var n = Game.stage.view.animationManager.renderer.type === PIXI.RENDERER_TYPE.WEBGL,
            e = [],
            t = !0;
        if (!Platform.isDesktopDevice) {
            t = !1;
            for (var r = 0; r < e.length; ++r) navigator.userAgent.contains(e[r]) && (t = !0)
        }
        return n && t
    }

    function r(n, e) {
        var t = new PIXI.Graphics;
        if (t.beginFill(16711680), e) {
            n ? (t.drawRect(217, 17, 115, 603), t.drawRect(339, 17, 115, 603), t.drawRect(460, 17, 115, 603), t.drawRect(582, 17, 115, 603), t.drawRect(705, 17, 115, 603), t.drawRect(827, 17, 115, 603), t.drawRect(949, 17, 115, 603)) : t.drawRect(0, 17, 1280, 603)
        } else n ? (t.drawRect(227, 55, 151, 490), t.drawRect(397, 55, 151, 490), t.drawRect(567, 55, 150, 490), t.drawRect(735, 55, 150, 490), t.drawRect(903, 55, 150, 490)) : t.drawRect(0, 55, 1280, 490);
        return t.endFill(), t
    }

    function a(n, e) {
        var t = n ? "onlyReelsAlpha" : "reelsAlpha";
        return e && (t += "FS"), Game.PIXIFactory.createSpriteWithTexture(t)
    }

    function i(n) {
        return n && "[object Function]" === {}.toString.call(n)
    }
    var o, c = [],
        u = [],
        d = !1,
        s = new Sys.Observable,
        f = {
            isWebGLSupported: function() {
                return void 0 === o && (o = Utils.Platform.isWebGLSupported()), o
            },
            randomInt: function(n, e) {
                return Math.floor(Math.random() * (e + 1 - n) + n)
            },
            createAnimation: function(n, e, t, r, a, i, o) {
                var c, u = {};
                return Sys.isDefined(o) || (o = function() {}), Sys.isDefined(i) || (i = 0), u[i] = t, u[a + i] = r, c = new Animation.Holder({
                    target: n,
                    prop: e,
                    animate: u,
                    onEnd: o
                }), Game.stage.view.animationManager.addToAnimationLoop(c), c
            },
            setGameTimeout: function(n, e) {
                var t = new Animation.Holder({
                    addToAnimationLoop: !0,
                    delay: e || 0,
                    onEnd: function() {
                        n(), Game.stage.view.animationManager.removeFromAnimationLoop(t)
                    }
                });
                return t.play(), t
            },
            setGameInterval: function(n, e) {
                var t = !e || e < 10 ? 10 : e,
                    r = new Animation.Holder({
                        addToAnimationLoop: !0,
                        delay: t,
                        onEnd: function() {
                            n(), r.play()
                        }
                    });
                return r.play(), r
            },
            clearGameTimer: function(n) {
                n && (n.stop(), Game.stage.view.animationManager.removeFromAnimationLoop(n))
            },
            getMainGameReelsMask: function(n) {
                return t() ? a(n) : r(n)
            },
            getFreeSpinsReelsMask: function(n) {
                return t() ? a(n, !0) : r(n, !0)
            },
            addConstant: function(n, e, t) {
                var r = {
                    enumerable: !0,
                    configurable: !1,
                    writable: !1,
                    value: e
                };
                Object.defineProperty(t, n, r)
            },
            addGetterFunction: function(n, e, t) {
                var r = {
                    get: function() {
                        return t.bind(n)()
                    }
                };
                Object.defineProperty(n, e, r)
            },
            addAsConstants: function(n, e) {
                for (var t in e)
                    if (e.hasOwnProperty(t)) {
                        var r = e[t];
                        this.addConstant(t, r, n)
                    }
            },
            addGetterFunctions: function(n, e) {
                for (var t in e)
                    if (e.hasOwnProperty(t)) {
                        var r = e[t];
                        this.addGetterFunction(n, t, r)
                    }
            },
            runOnSwitchToPortrait: function(n) {
                c.push(n)
            },
            runOnSwitchToLandscape: function(n) {
                u.push(n)
            }
        };
    return s.on({
        "notify:viewport.PORTRAIT": n,
        "notify:viewport.LANDSCAPE": e
    }), Object.extendFunctionOn = function(n, e, t) {
        if (!n[e]) throw console.trace(), "Attempting to extend a function, '" + e + "', but it does not already exist on the provided object.";
        if (!i(t)) throw console.trace(), "The extendedFunctionality provided is not a javascript function.";
        n[e] = function(n) {
            return function() {
                var e = n.apply(this, arguments);
                return t.call(this, arguments, e)
            }
        }(n[e])
    }, Object.extendFunctionsOn = function(n, e) {
        for (var t in e)
            if (e.hasOwnProperty(t)) {
                var r = e[t];
                Object.extendFunctionOn(n, t, r)
            }
    }, f
}(), Utils.getGraphicsCardName = function() {
    var n = document.getElementById("canvasAnimationManager"),
        e = n.getContext("experimental-webgl") || n.getContext("webgl");
    if (!e) return "Unknown";
    var t = e.getExtension("WEBGL_debug_renderer_info");
    return t ? e.getParameter(t.UNMASKED_RENDERER_WEBGL) : "Unknown"
}, Utils.isDesktopModeOnIosMobile = function() {
    return Platform.isDesktopDevice && "Apple GPU" === Utils.getGraphicsCardName()
};

function NeutrinoParticles() {
    function t(t) {
        return 16 > t ? "0" + t.toString(16) : t.toString(16)
    }
    var f = this;
    this.equalv3_ = function(t, n) {
        return t[0] == n[0] && t[1] == n[1] && t[2] == n[2]
    }, this.equalq_ = function(t, n) {
        return t[0] == n[0] && t[1] == n[1] && t[2] == n[2] && t[3] == n[3]
    }, this.a = function(t, n, i) {
        t[0] = n[0] + i[0], t[1] = n[1] + i[1]
    }, this.b = function(t, n) {
        return [t[0] + n[0], t[1] + n[1]]
    }, this.y = function(t, n, i) {
        t[0] = n[0] + i, t[1] = n[1] + i
    }, this.z = function(t, n) {
        return [t[0] + n, t[1] + n]
    }, this.c = function(t, n, i) {
        t[0] = n[0] + i[0], t[1] = n[1] + i[1], t[2] = n[2] + i[2]
    }, this.d = function(t, n) {
        return [t[0] + n[0], t[1] + n[1], t[2] + n[2]]
    }, this.C = function(t, n, i) {
        t[0] = n[0] + i, t[1] = n[1] + i, t[2] = n[2] + i
    }, this.D = function(t, n) {
        return [t[0] + n, t[1] + n, t[2] + n]
    }, this.addq = function(t, n, i) {
        t[0] = n[0] + i[0], t[1] = n[1] + i[1], t[2] = n[2] + i[2], t[3] = n[3] + i[3]
    }, this.addq_ = function(t, n) {
        return [t[0] + n[0], t[1] + n[1], t[2] + n[2], t[3] + n[3]]
    }, this.e = function(t, n, i) {
        t[0] = n[0] - i[0], t[1] = n[1] - i[1]
    }, this.f = function(t, n) {
        return [t[0] - n[0], t[1] - n[1]]
    }, this.A = function(t, n, i) {
        t[0] = n[0] - i, t[1] = n[1] - i
    }, this.B = function(t, n) {
        return [t[0] - n, t[1] - n]
    }, this.nf = function(t, n, i) {
        t[0] = n - i[0], t[1] = n - i[1]
    }, this.of = function(t, n) {
        return [t - n[0], t - n[1]]
    }, this.g = function(t, n, i) {
        t[0] = n[0] - i[0], t[1] = n[1] - i[1], t[2] = n[2] - i[2]
    }, this.h = function(t, n) {
        return [t[0] - n[0], t[1] - n[1], t[2] - n[2]]
    }, this.E = function(t, n, i) {
        t[0] = n[0] - i, t[1] = n[1] - i, t[2] = n[2] - i
    }, this.F = function(t, n) {
        return [t[0] - n, t[1] - n, t[2] - n]
    }, this.rf = function(t, n, i) {
        t[0] = n - i[0], t[1] = n - i[1], t[2] = n - i[2]
    }, this.sf = function(t, n) {
        return [t - n[0], t - n[1], t - n[2]]
    }, this.i = function(t, n, i) {
        t[0] = n[0] * i[0], t[1] = n[1] * i[1]
    }, this.j = function(t, n) {
        return [t[0] * n[0], t[1] * n[1]]
    }, this.k = function(t, n, i) {
        t[0] = n[0] * i[0], t[1] = n[1] * i[1], t[2] = n[2] * i[2]
    }, this.l = function(t, n) {
        return [t[0] * n[0], t[1] * n[1], t[2] * n[2]]
    }, this.m = function(t, n, i) {
        t[0] = n[0] / i[0], t[1] = n[1] / i[1]
    }, this.n = function(t, n) {
        return [t[0] / n[0], t[1] / n[1]]
    }, this.o = function(t, n, i) {
        t[0] = n[0] / i[0], t[1] = n[1] / i[1], t[2] = n[2] / i[2]
    }, this.p = function(t, n) {
        return [t[0] / n[0], t[1] / n[1], t[2] / n[2]]
    }, this.H = function(t, n) {
        return t[0] * n[0] + t[1] * n[1] + t[2] * n[2]
    }, this.dotq_ = function(t, n) {
        return t[0] * n[0] + t[1] * n[1] + t[2] * n[2] + t[3] * n[3]
    }, this.q = function(t, n, i) {
        t[0] = n[0] * i, t[1] = n[1] * i
    }, this.r = function(t, n) {
        return [t[0] * n, t[1] * n]
    }, this.s = function(t, n, i) {
        t[0] = n[0] / i, t[1] = n[1] / i
    }, this.t = function(t, n) {
        return [t[0] / n, t[1] / n]
    }, this.u = function(t, n, i) {
        t[0] = n[0] * i, t[1] = n[1] * i, t[2] = n[2] * i
    }, this.v = function(t, n) {
        return [t[0] * n, t[1] * n, t[2] * n]
    }, this.w = function(t, n, i) {
        t[0] = n[0] / i, t[1] = n[1] / i, t[2] = n[2] / i
    }, this.x = function(t, n) {
        return [t[0] / n, t[1] / n, t[2] / n]
    }, this.y = function(t, n, i) {
        t[0] = n[0] + i, t[1] = n[1] + i
    }, this.z = function(t, n) {
        return [t[0] + n, t[1] + n]
    }, this.A = function(t, n, i) {
        t[0] = n[0] - i, t[1] = n[1] - i
    }, this.B = function(t, n) {
        return [t[0] - n, t[1] - n]
    }, this.G = function(t, n) {
        return t[0] * n[0] + t[1] * n[1]
    }, this.H = function(t, n) {
        return t[0] * n[0] + t[1] * n[1] + t[2] * n[2]
    }, this.I = function(t, n, i) {
        var f = n[0],
            s = n[1];
        n = n[2];
        var r = i[0],
            e = i[1];
        i = i[2], t[0] = s * i - n * e, t[1] = n * r - f * i, t[2] = f * e - s * r
    }, this.J = function(t, n) {
        var i = t[0],
            f = t[1],
            s = t[2],
            r = n[0],
            e = n[1],
            o = n[2];
        return [f * o - s * e, s * r - i * o, i * e - f * r]
    }, this.K = function(t) {
        return Math.sqrt(t[0] * t[0] + t[1] * t[1])
    }, this.L = function(t) {
        return t[0] * t[0] + t[1] * t[1]
    }, this.M = function(t, n) {
        f.q(t, n, 1 / f.K(n))
    }, this.N = function(t) {
        return f.r(t, 1 / f.K(t))
    }, this.O = function(t) {
        return Math.sqrt(t[0] * t[0] + t[1] * t[1] + t[2] * t[2])
    }, this.P = function(t) {
        return t[0] * t[0] + t[1] * t[1] + t[2] * t[2]
    }, this.Q = function(t, n) {
        f.u(t, n, 1 / f.O(n))
    }, this.R = function(t) {
        return f.v(t, 1 / f.O(t))
    }, this.S = function(t, n) {
        t[0] = n[0], t[1] = n[1]
    }, this.T = function(t, n) {
        t[0] = n[0], t[1] = n[1], t[2] = n[2]
    }, this.U = function(t, n) {
        t[0] = n[0], t[1] = n[1], t[2] = n[2], t[3] = n[3]
    }, this.V = function(t, n, i) {
        t[0] = n, t[1] = i
    }, this.W = function(t, n, i, f) {
        t[0] = n, t[1] = i, t[2] = f
    }, this.X = function(t, n, i) {
        return t + (n - t) * i
    }, this.Y = function(t, n, i, f) {
        t[0] = n[0] + (i[0] - n[0]) * f, t[1] = n[1] + (i[1] - n[1]) * f
    }, this.Z = function(t, n, i) {
        return [t[0] + (n[0] - t[0]) * i, t[1] + (n[1] - t[1]) * i]
    }, this.ab = function(t, n, i, f) {
        t[0] = n[0] + (i[0] - n[0]) * f, t[1] = n[1] + (i[1] - n[1]) * f, t[2] = n[2] + (i[2] - n[2]) * f
    }, this.bb = function(t, n, i) {
        return [t[0] + (n[0] - t[0]) * i, t[1] + (n[1] - t[1]) * i, t[2] + (n[2] - t[2]) * i]
    }, this.slerpq = function(t, n, i, s) {
        var r = f.dotq_(n, i),
            e = [];
        0 > r ? (f.negq(e, i), r = -r) : f.U(e, i), 1 - r < Number.EPSILON ? (t[0] = f.X(n[0], i[0], s), t[1] = f.X(n[1], i[1], s), t[2] = f.X(n[2], i[2], s), t[3] = f.X(n[3], i[3], s)) : (i = f.acos_(r), f.mulqscalar(t, f.addq_(f.mulqscalar_(n, f.sin_((1 - s) * i)), f.mulqscalar_(e, f.sin_(s * i))), 1 / f.sin_(i)))
    }, this.slerpq_ = function(t, n, i) {
        var f = [];
        return slerpq(f, t, n, i), f
    }, this.acos_ = function(t) {
        return Math.acos(t)
    }, this.sin_ = function(t) {
        return Math.sin(t)
    }, this.cos_ = function(t) {
        return Math.cos(t)
    }, this.taus88 = function(t) {
        t || (t = 0);
        var n, i, f;
        this.seed = function(t) {
            t &= 4294967295, n = 2 > t ? t + 2 : t, i = 8 > t ? t + 8 : t, f = 16 > t ? t + 16 : t
        }, this.rand = function() {
            var t = (4294967295 & (n << 13 ^ n)) >>> 19;
            return n = ((4294967294 & n) << 12 ^ t) >>> 0, t = (4294967295 & (i << 2 ^ i)) >>> 25, i = ((4294967288 & i) << 4 ^ t) >>> 0, t = (4294967295 & (f << 3 ^ f)) >>> 11, f = ((4294967280 & f) << 17 ^ t) >>> 0, ((n ^ i ^ f) >>> 0) / 4294967296
        }, this.seed(t)
    }, this.cb = function(t, n) {
        this.randv2gen(t, n, function() {
            return Math.random()
        })
    }, this.randv2gen = function(t, n, i) {
        i = i() * Math.PI * 2, t[0] = n * f.cos_(i), t[1] = n * f.sin_(i)
    }, this.db = function(t, n) {
        this.randv3gen(t, n, function() {
            return Math.random()
        })
    }, this.randv3gen = function(t, n, i) {
        var s = i() * Math.PI * 2;
        i = 2 * i() - 1;
        var r = n * Math.sqrt(1 - i * i);
        t[0] = r * f.cos_(s), t[1] = r * f.sin_(s), t[2] = n * i
    }, this.yb = function(t, n, i, s, r) {
        n += r() * s[0], i += r() * s[1], f.V(t, n, i)
    }, this.eb = function(t, n) {
        f.V(-n[0], -n[1])
    }, this.fb = function(t) {
        return [-t[0], -t[1]]
    }, this.gb = function(t, n) {
        f.W(-n[0], -n[1], -n[2])
    }, this.hb = function(t) {
        return [-t[0], -t[1], -t[2]]
    }, this.negq = function(t, n) {
        t[0] = -n[0], t[1] = -n[1], t[2] = -n[2], t[3] = -n[3]
    }, this.negq_ = function(t) {
        return [-t[0], -t[1], -t[2], -t[3]]
    }, this.ib = function(t) {
        return t / 180 * Math.PI
    }, this.jb = function(t) {
        return t / Math.PI * 180
    }, this.Ae = function(t) {
        return 0 > t ? -1 : 1
    }, this.ob = function(t, n, i, f) {
        var s = 2 * f[0] * f[0],
            r = 2 * f[1] * f[1],
            e = 2 * f[2] * f[2],
            o = 2 * f[0] * f[1],
            u = 2 * f[0] * f[2],
            h = 2 * f[1] * f[2],
            a = 2 * f[3] * f[2],
            c = 2 * f[3] * f[1];
        f = 2 * f[3] * f[0], t[0] = 1 - r - e, t[1] = o + a, t[2] = u - c, n[0] = o - a, n[1] = 1 - s - e, n[2] = h + f, i[0] = u + c, i[1] = h - f, i[2] = 1 - s - r
    }, this.axes2quat = this.pb = function(t, n, i, f) {
        var s = n[0] + i[1] + f[2];
        0 < s ? (s = 2 * Math.sqrt(s + 1), t[3] = .25 * s, t[0] = (i[2] - f[1]) / s, t[1] = (f[0] - n[2]) / s, t[2] = (n[1] - i[0]) / s) : n[0] > i[1] & n[0] > f[2] ? (s = 2 * Math.sqrt(1 + n[0] - i[1] - f[2]), t[3] = (i[2] - f[1]) / s, t[0] = .25 * s, t[1] = (n[1] + i[0]) / s, t[2] = (f[0] + n[2]) / s) : i[1] > f[2] ? (s = 2 * Math.sqrt(1 + i[1] - n[0] - f[2]), t[3] = (f[0] - n[2]) / s, t[0] = (n[1] + i[0]) / s, t[1] = .25 * s, t[2] = (i[2] + f[1]) / s) : (s = 2 * Math.sqrt(1 + f[2] - n[0] - i[1]), t[3] = (n[1] - i[0]) / s, t[0] = (f[0] + n[2]) / s, t[1] = (i[2] + f[1]) / s, t[2] = .25 * s)
    }, this.axisangle2quat = this.qb = function(t, n, i) {
        i = .5 * f.ib(i);
        var s = Math.sin(i);
        t[0] = n[0] * s, t[1] = n[1] * s, t[2] = n[2] * s, t[3] = Math.cos(i)
    }, this.axisangle2quat_ = this.axisangle2quat_ = function(t, n) {
        var i = .5 * f.ib(n),
            s = Math.sin(i);
        return [t[0] * s, t[1] * s, t[2] * s, f.cos_(i)]
    }, this.rb = function(t, n, i) {
        var f = n[0],
            s = n[1],
            r = n[2];
        n = i[0];
        var e = i[1],
            o = i[2];
        i = i[3];
        var u = i * f + e * r - o * s,
            h = i * s + o * f - n * r,
            a = i * r + n * s - e * f,
            f = -n * f - e * s - o * r;
        t[0] = u * i + f * -n + h * -o - a * -e, t[1] = h * i + f * -e + a * -n - u * -o, t[2] = a * i + f * -o + u * -e - h * -n
    }, this.sb = function(t, n, i) {
        var f = n[0],
            s = n[1],
            r = n[2];
        n = n[3];
        var e = i[0],
            o = i[1],
            u = i[2];
        i = i[3], t[0] = f * i + n * e + s * u - r * o, t[1] = s * i + n * o + r * e - f * u, t[2] = r * i + n * u + f * o - s * e, t[3] = n * i - f * e - s * o - r * u
    }, this.mulqscalar = function(t, n, i) {
        t[0] = n[0] * i, t[1] = n[1] * i, t[2] = n[2] * i, t[3] = n[3] * i
    }, this.mulqscalar_ = function(t, n) {
        return [t[0] * n, t[1] * n, t[2] * n, t[3] * n]
    }, this.tb = function(t, n, i, s, r) {
        var e = f.ib(i);
        i = Math.cos(e) * s, s *= Math.sin(e), t[0] = n[0] + i * r[0] - s * r[1], t[1] = n[1] + s * r[0] + i * r[1]
    }, this.ub = function(t, n, i, s, r) {
        var e = f.ib(i);
        i = Math.cos(e) / s, s = Math.sin(e) / s, t[0] = i * r[0] + s * r[1] - n[0] * i - n[1] * s, t[1] = i * r[1] - s * r[0] + n[0] * s - n[1] * i
    }, this.vb = function(t) {
        return 0 > t ? Math.floor(f.yd - 1 + t % f.yd) : Math.floor(t % f.yd)
    }, this.ff = function(n) {
        return "#" + t(Math.floor(255 * n[0])) + t(Math.floor(255 * n[1])) + t(Math.floor(255 * n[2]))
    }, this.wb = function(t, n, i, s) {
        n = 3 * (i * f.yd + n), s = f.zd[s], t[0] = s.getUint8(n), t[1] = s.getUint8(n + 1), t[2] = s.getUint8(n + 2)
    }, this.xb = function(t, n) {
        if (null == f.zd) f.W(t, 128, 128, 128);
        else {
            var i = n[0] * f.yd,
                s = n[1] * f.yd,
                r = n[2] * f.yd,
                e = Math.floor(i),
                o = Math.floor(s),
                u = Math.floor(r),
                i = i - e,
                s = s - o,
                r = r - u,
                h = f.vb(e),
                a = f.vb(e + 1),
                c = f.vb(o),
                d = f.vb(o + 1),
                l = f.vb(u),
                b = f.vb(u + 1),
                u = [],
                o = [],
                e = [],
                v = [],
                p = [],
                g = [],
                M = [],
                y = [];
            f.wb(u, h, c, l), f.wb(o, h, c, b), f.wb(e, h, d, l), f.wb(v, h, d, b), f.wb(p, a, c, l), f.wb(g, a, c, b), f.wb(M, a, d, l), f.wb(y, a, d, b), h = [], a = [], c = [], d = [], f.ab(h, u, o, r), f.ab(a, e, v, r), f.ab(c, p, g, r), f.ab(d, M, y, r), r = [], u = [], f.ab(r, h, a, s), f.ab(u, c, d, s), f.ab(t, r, u, i)
        }
    }, this.ImageDesc = function(t, n, i, f, s) {
        this.image = t, this.x = n, this.y = i, this.width = f, this.height = s
    }, this.RenderCall = function(t, n, i) {
        this.startIndex = t, this.numIndices = n, this.renderStyleIndex = i
    }, this.SubRect = function(t, n, i, f) {
        this.x = t, this.y = n, this.width = i, this.height = f
    }, this.Camera2D = function() {}, this.Camera2D.prototype.tb = function(t, n) {
        return !0
    }, this.Camera3D = function(t, n) {
        this.Qd = f.r(t, .5), this.z = -.5 * t[0] / Math.tan(f.ib(.5 * n))
    }, this.Camera3D.prototype.transform = function(t, n) {
        if (t[2] < this.z) return !1;
        var i = -this.z / (t[2] - this.z);
        return f.a(t, f.r(f.f(t, this.Qd), i), this.Qd), f.q(n, n, i), !0
    }, this.zd = null, this.yd = 0, this.initializeNoise = function(t, n, i) {
        if (t || alert("path should be defined"), null != this.zd) n();
        else {
            null != t && void 0 != t || (t = this.defaultPath);
            var f = new XMLHttpRequest;
            f.open("GET", t + "neutrinoparticles.noise.bin", !0), f.responseType = "arraybuffer", f.ctx = this, f.onreadystatechange = function() {
                if (4 == f.readyState)
                    if (200 <= f.status && 300 > f.status || 304 == f.status) {
                        var t = f.response,
                            s = f.ctx,
                            r = new DataView(t, 0, 4).getUint32(0, !0);
                        s.zd = [], s.yd = r;
                        for (var e = 0; e < r; ++e) s.zd[e] = new DataView(t, 4 + 3 * r * r * e);
                        n && n()
                    } else i && i()
            }, f.send()
        }
    }, this.NoiseGenerator = function() {
        for (var t, n, i, s, r, e, o, u = function(t, n, i, f, s) {
                return .5 * (2 * n + (-t + i) * s + (2 * t - 5 * n + 4 * i - f) * s * s + (3 * n - t - 3 * i + f) * s * s * s)
            }, h = function(t, n, i, f, s) {
                return [u(t[0], n[0], i[0], f[0], s), u(t[1], n[1], i[1], f[1], s), u(t[2], n[2], i[2], f[2], s)]
            }, a = function(t, n, i) {
                return t < n ? n : t > i ? i : t
            }, c = [], d = [], l = new f.taus88(120), b = .7, v = 64, p = 0, g = 0, M = v >>> 1; 0 < M; M >>>= 1) var y = Math.floor(64 / M),
            p = p + y * y;
        var q = 0;
        this.progress = 0, this.step = function() {
            switch (q) {
                case 0:
                    for (var u = 0; 64 > u; ++u)
                        for (var M = c[u] = [], y = 0; 64 > y; ++y)
                            for (var w = M[y] = [], m = 0; 64 > m; ++m) w[m] = [0, 0, 0];
                    q = 1, this.progress = .01;
                    break;
                case 1:
                    for (t = v >>> 1, n = Math.floor(64 / t), i = n * n, s = Math.max(n - 1, 1), r = n * n * n, u = o = e = 0; u < r; ++u) d[u] = [], d[u][2] = 2 * l.rand() - 1, d[u][1] = 2 * l.rand() - 1, d[u][0] = 2 * l.rand() - 1;
                    q = 2;
                    break;
                case 2:
                    for (u = 0; u < n; ++u)
                        for (var M = e - 1 >>> 0 & s, y = e >>> 0 & s, w = e + 1 >>> 0 & s, m = e + 2 >>> 0 & s, _ = o - 1 >>> 0 & s, x = o >>> 0 & s, z = o + 1 >>> 0 & s, j = o + 2 >>> 0 & s, E = u - 1 >>> 0 & s, P = u >>> 0 & s, I = u + 1 >>> 0 & s, S = u + 2 >>> 0 & s, M = [
                                [
                                    [d[M * i + _ * n + E], d[M * i + _ * n + P], d[M * i + _ * n + I], d[M * i + _ * n + S]],
                                    [d[M * i + x * n + E], d[M * i + x * n + P], d[M * i + x * n + I], d[M * i + x * n + S]],
                                    [d[M * i + z * n + E], d[M * i + z * n + P], d[M * i + z * n + I], d[M * i + z * n + S]],
                                    [d[M * i + j * n + E], d[M * i + j * n + P], d[M * i + j * n + I], d[M * i + j * n + S]]
                                ],
                                [
                                    [d[y * i + _ * n + E], d[y * i + _ * n + P], d[y * i + _ * n + I], d[y * i + _ * n + S]],
                                    [d[y * i + x * n + E], d[y * i + x * n + P], d[y * i + x * n + I], d[y * i + x * n + S]],
                                    [d[y * i + z * n + E], d[y * i + z * n + P], d[y * i + z * n + I], d[y * i + z * n + S]],
                                    [d[y * i + j * n + E], d[y * i + j * n + P], d[y * i + j * n + I], d[y * i + j * n + S]]
                                ],
                                [
                                    [d[w * i + _ * n + E], d[w * i + _ * n + P], d[w * i + _ * n + I], d[w * i + _ * n + S]],
                                    [d[w * i + x * n + E], d[w * i + x * n + P], d[w * i + x * n + I], d[w * i + x * n + S]],
                                    [d[w * i + z * n + E], d[w * i + z * n + P], d[w * i + z * n + I], d[w * i + z * n + S]],
                                    [d[w * i + j * n + E], d[w * i + j * n + P], d[w * i + j * n + I], d[w * i + j * n + S]]
                                ],
                                [
                                    [d[m * i + _ * n + E], d[m * i + _ * n + P], d[m * i + _ * n + I], d[m * i + _ * n + S]],
                                    [d[m * i + x * n + E], d[m * i + x * n + P], d[m * i + x * n + I], d[m * i + x * n + S]],
                                    [d[m * i + z * n + E], d[m * i + z * n + P], d[m * i + z * n + I], d[m * i + z * n + S]],
                                    [d[m * i + j * n + E], d[m * i + j * n + P], d[m * i + j * n + I], d[m * i + j * n + S]]
                                ]
                            ], y = 0; y < t; ++y)
                            for (m = y / t, w = e * t + y, m = [
                                    [h(M[0][0][0], M[1][0][0], M[2][0][0], M[3][0][0], m), h(M[0][0][1], M[1][0][1], M[2][0][1], M[3][0][1], m), h(M[0][0][2], M[1][0][2], M[2][0][2], M[3][0][2], m), h(M[0][0][3], M[1][0][3], M[2][0][3], M[3][0][3], m)],
                                    [h(M[0][1][0], M[1][1][0], M[2][1][0], M[3][1][0], m), h(M[0][1][1], M[1][1][1], M[2][1][1], M[3][1][1], m), h(M[0][1][2], M[1][1][2], M[2][1][2], M[3][1][2], m), h(M[0][1][3], M[1][1][3], M[2][1][3], M[3][1][3], m)],
                                    [h(M[0][2][0], M[1][2][0], M[2][2][0], M[3][2][0], m), h(M[0][2][1], M[1][2][1], M[2][2][1], M[3][2][1], m), h(M[0][2][2], M[1][2][2], M[2][2][2], M[3][2][2], m), h(M[0][2][3], M[1][2][3], M[2][2][3], M[3][2][3], m)],
                                    [h(M[0][2][0], M[1][3][0], M[2][3][0], M[3][3][0], m), h(M[0][2][1], M[1][3][1], M[2][3][1], M[3][3][1], m), h(M[0][2][2], M[1][3][2], M[2][3][2], M[3][3][2], m), h(M[0][2][3], M[1][3][3], M[2][3][3], M[3][3][3], m)]
                                ], _ = 0; _ < t; ++_)
                                for (P = _ / t, x = o * t + _, z = h(m[0][0], m[1][0], m[2][0], m[3][0], P), j = h(m[0][1], m[1][1], m[2][1], m[3][1], P), E = h(m[0][2], m[1][2], m[2][2], m[3][2], P), P = h(m[0][3], m[1][3], m[2][3], m[3][3], P), I = 0; I < t; ++I) {
                                    var S = u * t + I,
                                        X = h(z, j, E, P, I / t),
                                        X = f.d(f.v(X, b), c[w][x][S]),
                                        X = [a(X[0], -1, 1), a(X[1], -1, 1), a(X[2], -1, 1)];
                                    c[w][x][S] = X
                                }
                    g++, this.progress = .01 + g / p * .89, o++, o >= n && (o = 0, ++e >= n && (e = 0, v = t, b = Math.pow(b, 1.2), 1 >= v ? (q = 3, this.progress = .9) : q = 1));
                    break;
                case 3:
                    for (u = [-1, -1, -1], M = [.5, .7, 1], y = 0; 64 > y; ++y)
                        for (w = c[y], m = 0; 64 > m; ++m)
                            for (_ = w[m], x = 0; 64 > x; ++x) z = _[x], z[0] = f.X(u[0], M[0], .5 * z[0] + .5), z[1] = f.X(u[1], M[1], .5 * z[1] + .5), z[2] = f.X(u[2], M[2], .5 * z[2] + .5);
                    q = 4, this.progress = .95;
                    break;
                case 4:
                    for (f.yd = 64, f.zd = [], u = 0; 64 > u; ++u) {
                        for (M = c[u], y = new ArrayBuffer(12288), y = new DataView(y), w = 0; 64 > w; ++w)
                            for (m = M[w], _ = 0; 64 > _; ++_) x = m[_], z = 3 * (64 * w + _), y.setUint8(z + 0, Math.floor(a(256 * (.5 * x[0] + .5) - .5, 0, 255))), y.setUint8(z + 1, Math.floor(a(256 * (.5 * x[1] + .5) - .5, 0, 255))), y.setUint8(z + 2, Math.floor(a(256 * (.5 * x[2] + .5) - .5, 0, 255)));
                        f.zd[u] = y
                    }
                    q = 5, this.progress = 1
            }
            return 5 == q
        }
    }, this.cf = document.createElement("canvas"), this.cf.width = 0, this.cf.height = 0, this.bf = this.cf.getContext("2d"), this.af = function(t, n) {
        (this.cf.width < t || this.cf.height < n) && (this.cf.width = t, this.cf.height = n, this.bf = this.cf.getContext("2d"))
    }, this.effects = [], this.loadEffect = function(a, b, c) {
        if (void 0 != this.effects[a]) {
            var e = this.effects[a];
            e instanceof Array ? e[e.length] = [b, c] : b(e)
        } else {
            this.effects[a] = [
                [b, c]
            ];
            var d = new XMLHttpRequest;
            d.open("GET", a, !0), d.responseType = "text", d.ctx = this, d.onreadystatechange = function() {
                if (4 == d.readyState) {
                    var b = this.ctx.effects[a];
                    if (200 <= d.status && 300 > d.status || 304 == d.status) {
                        var c = eval("(function(ctx) {\n" + d.responseText + "\nreturn new NeutrinoEffect(ctx);\n})(this.ctx);");
                        this.ctx.effects[a] = c, b.forEach(function(t) {
                            t[0](c)
                        })
                    } else b.forEach(function(t) {
                        t[1]()
                    })
                }
            }, d.send()
        }
    }, this.removeEffect = function(t) {
        delete this.effects[t]
    }
}
var $jscomp = {
    scope: {}
};
$jscomp.defineProperty = "function" == typeof Object.defineProperties ? Object.defineProperty : function(t, n, i) {
    if (i.get || i.set) throw new TypeError("ES3 does not support getters and setters.");
    t != Array.prototype && t != Object.prototype && (t[n] = i.value)
}, $jscomp.getGlobal = function(t) {
    return "undefined" != typeof window && window === t ? t : "undefined" != typeof global && null != global ? global : t
}, $jscomp.global = $jscomp.getGlobal(this), $jscomp.polyfill = function(t, n, i, f) {
    if (n) {
        for (i = $jscomp.global, t = t.split("."), f = 0; f < t.length - 1; f++) {
            var s = t[f];
            s in i || (i[s] = {}), i = i[s]
        }
        t = t[t.length - 1], f = i[t], n = n(f), n != f && null != n && $jscomp.defineProperty(i, t, {
            configurable: !0,
            writable: !0,
            value: n
        })
    }
}, $jscomp.polyfill("Number.EPSILON", function(t) {
    return Math.pow(2, -52)
}, "es6-impl", "es3");
"use strict";

function _possibleConstructorReturn(t, e) {
    if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !e || "object" != typeof e && "function" != typeof e ? t : e
}

function _inherits(t, e) {
    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
    t.prototype = Object.create(e && e.prototype, {
        constructor: {
            value: t,
            enumerable: !1,
            writable: !0,
            configurable: !0
        }
    }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
}

function _classCallCheck(t, e) {
    if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
}
var _createClass = function() {
        function t(t, e) {
            for (var r = 0; r < e.length; r++) {
                var i = e[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
            }
        }
        return function(e, r, i) {
            return r && t(e.prototype, r), i && t(e, i), e
        }
    }(),
    PIXINeutrinoMaterials = function() {
        function t(e) {
            _classCallCheck(this, t), this.gl = e;
            var r = "\t\t\tattribute vec3 aVertexPosition;\t\t\tattribute vec4 aColor; \t\t\tattribute vec2 aTextureCoord;\t\t\t\t\t\tuniform mat3 projectionMatrix;\t\t\tuniform vec2 scale;\t\t\t\t\t\tvarying vec4 vColor;\t\t\tvarying vec2 vTextureCoord;\t\t\t\t\t\tvoid main(void) {\t\t\t\tgl_Position = vec4((projectionMatrix * vec3(aVertexPosition.xy * scale, 1.0)).xy, 0, 1);\t\t\t\tvColor = vec4(aColor.rgb * aColor.a, aColor.a);\t\t\t\tvTextureCoord = vec2(aTextureCoord.x, 1.0 - aTextureCoord.y);\t\t\t}";
            this.shaderProgram = this._makeShaderProgram(r, "\t\t\tprecision mediump float;\t\t\t\t\t\tvarying vec4 vColor;\t\t\tvarying vec2 vTextureCoord;\t\t\t\t\tuniform sampler2D uSampler;\t\t\t\t\t\tvoid main(void) {\t\t\t\tgl_FragColor = vColor * texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\t\t\t}"), this.shaderProgramMultiply = this._makeShaderProgram(r, "\t\t\tprecision mediump float;\t\t\t\t\t\tvarying vec4 vColor;\t\t\tvarying vec2 vTextureCoord;\t\t\t\t\t\tuniform sampler2D uSampler;\t\t\t\t\t\tvoid main(void)\t\t\t{\t\t\t\tvec4 texel = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\t\t\t\tvec3 rgb = vColor.rgb * texel.rgb;\t\t\t\tfloat alpha = vColor.a * texel.a;\t\t\t\tgl_FragColor = vec4(mix(vec3(1, 1, 1), rgb, alpha), 1);\t\t\t}"), this.pMatrix = null, this.currentProgram = null
        }
        return _createClass(t, [{
            key: "shutdown",
            value: function() {}
        }, {
            key: "positionAttribLocation",
            value: function() {
                return this.shaderProgram.vertexPositionAttribute
            }
        }, {
            key: "colorAttribLocation",
            value: function() {
                return this.shaderProgram.colorAttribute
            }
        }, {
            key: "texAttribLocation",
            value: function(t) {
                return this.shaderProgram.textureCoordAttribute[t]
            }
        }, {
            key: "setup",
            value: function(t, e) {
                this.gl;
                this.pMatrix = t, this.scale = e.slice(), this.currentProgram = null
            }
        }, {
            key: "switchToNormal",
            value: function(t) {
                this.gl;
                this._setProgram(this.shaderProgram), t.state.setBlendMode(0)
            }
        }, {
            key: "switchToAdd",
            value: function(t) {
                this.gl;
                this._setProgram(this.shaderProgram), t.state.setBlendMode(1)
            }
        }, {
            key: "switchToMultiply",
            value: function(t) {
                this.gl;
                this._setProgram(this.shaderProgramMultiply), t.state.setBlendMode(2)
            }
        }, {
            key: "_setProgram",
            value: function(t) {
                var e = this.gl;
                t != this.currentProgram && (e.useProgram(t), e.uniformMatrix3fv(t.pMatrixUniform, !1, this.pMatrix), e.uniform1i(t.samplerUniform, 0), e.uniform2f(t.scaleUniform, this.scale[0], this.scale[1]), this.currentProgram = t)
            }
        }, {
            key: "_makeShaderProgram",
            value: function(t, e) {
                var r = this.gl,
                    i = r.createShader(r.VERTEX_SHADER);
                if (r.shaderSource(i, t), r.compileShader(i), !r.getShaderParameter(i, r.COMPILE_STATUS)) return alert(r.getShaderInfoLog(i)), null;
                var s = r.createShader(r.FRAGMENT_SHADER);
                if (r.shaderSource(s, e), r.compileShader(s), !r.getShaderParameter(s, r.COMPILE_STATUS)) return alert(r.getShaderInfoLog(s)), null;
                var o = r.createProgram();
                return r.attachShader(o, i), r.attachShader(o, s), r.linkProgram(o), r.getProgramParameter(o, r.LINK_STATUS) || alert("Could not initialise shaders"), r.useProgram(o), o.vertexPositionAttribute = r.getAttribLocation(o, "aVertexPosition"), o.colorAttribute = r.getAttribLocation(o, "aColor"), o.textureCoordAttribute = [r.getAttribLocation(o, "aTextureCoord")], o.pMatrixUniform = r.getUniformLocation(o, "projectionMatrix"), o.samplerUniform = r.getUniformLocation(o, "uSampler"), o.scaleUniform = r.getUniformLocation(o, "scale"), o
            }
        }]), t
    }(),
    PIXINeutrinoContext = function() {
        function t(e) {
            _classCallCheck(this, t);
            var r = e.gl;
            this.renderer = e, this.neutrino = new NeutrinoParticles, this.effectsBasePath = "", this.texturesBasePath = "", this.trimmedExtensionLookupFirst = !0, e instanceof PIXI.CanvasRenderer || (this.materials = new PIXINeutrinoMaterials(r))
        }
        return _createClass(t, [{
            key: "initializeNoise",
            value: function(t, e, r) {
                this.neutrino.initializeNoise(t, e, r)
            }
        }, {
            key: "loadEffect",
            value: function(t, e, r) {
                this.neutrino.loadEffect(t, e, r)
            }
        }]), t
    }(),
    PIXINeutrinoRenderBuffers = function() {
        function t(e, r) {
            _classCallCheck(this, t), this.ctx = e, this.gl = this.ctx.renderer.gl, this.positions = null, this.colors = null, this.texCoords = [], this.maxNumVertices = 0, this.numVertices = 0, this.indices = null, this.renderCalls = [], this.maxNumRenderCalls = 0, this.numRenderCalls = 0
        }
        return _createClass(t, [{
            key: "initialize",
            value: function(t, e, r, i) {
                var s = this.gl;
                this.positions = new Float32Array(new ArrayBuffer(4 * t * 3)), this.colors = new Uint8Array(new ArrayBuffer(4 * t)), this.texCoords = [];
                for (var o = 0; o < e.length; ++o) this.texCoords[o] = new Float32Array(new ArrayBuffer(4 * t * e[o])), this.texCoords[o].numComponents = e[o];
                this.maxNumVertices = t, this.indices = new Uint16Array(new ArrayBuffer(2 * r.length)), this.indices.set(r, 0), this.maxNumRenderCalls = i, this.positionBuffer = s.createBuffer(), s.bindBuffer(s.ARRAY_BUFFER, this.positionBuffer), s.bufferData(s.ARRAY_BUFFER, this.positions, s.DYNAMIC_DRAW), this.colorBuffer = s.createBuffer(), s.bindBuffer(s.ARRAY_BUFFER, this.colorBuffer), s.bufferData(s.ARRAY_BUFFER, this.colors, s.DYNAMIC_DRAW), this.texBuffers = [];
                for (var n = 0; n < this.texCoords.length; ++n) {
                    var a = s.createBuffer();
                    s.bindBuffer(s.ARRAY_BUFFER, a), s.bufferData(s.ARRAY_BUFFER, this.texCoords[n], s.DYNAMIC_DRAW), this.texBuffers.push(a)
                }
                this.indicesBuffer = s.createBuffer(), s.bindBuffer(s.ELEMENT_ARRAY_BUFFER, this.indicesBuffer), s.bufferData(s.ELEMENT_ARRAY_BUFFER, this.indices, s.STATIC_DRAW)
            }
        }, {
            key: "pushVertex",
            value: function(t) {
                this.positions.set(t.position, 3 * this.numVertices), this.colors.set(t.color, 4 * this.numVertices);
                for (var e = 0; e < t.texCoords.length; ++e) this.texCoords[e].set(t.texCoords[e], this.numVertices * this.texCoords[e].numComponents);
                ++this.numVertices
            }
        }, {
            key: "pushRenderCall",
            value: function(t) {
                this.numRenderCalls >= this.renderCalls.length ? this.renderCalls.push(Object.assign({}, t)) : Object.assign(this.renderCalls[this.numRenderCalls], t), ++this.numRenderCalls
            }
        }, {
            key: "cleanup",
            value: function() {
                this.numVertices = 0, this.numRenderCalls = 0
            }
        }, {
            key: "updateGlBuffers",
            value: function() {
                var t = this.gl;
                t.bindBuffer(t.ARRAY_BUFFER, this.positionBuffer), t.bufferSubData(t.ARRAY_BUFFER, 0, this.positions, 0, 3 * this.numVertices), t.bindBuffer(t.ARRAY_BUFFER, this.colorBuffer), t.bufferSubData(t.ARRAY_BUFFER, 0, this.colors, 0, 4 * this.numVertices), this.texBuffers.forEach(function(e, r) {
                    t.bindBuffer(t.ARRAY_BUFFER, e), t.bufferSubData(t.ARRAY_BUFFER, 0, this.texCoords[r], 0, this.numVertices * this.texCoords[r].numComponents)
                }, this)
            }
        }, {
            key: "bind",
            value: function() {
                var t = this.gl,
                    e = this.ctx.materials;
                t.bindBuffer(t.ARRAY_BUFFER, this.positionBuffer), t.enableVertexAttribArray(e.positionAttribLocation()), t.vertexAttribPointer(e.positionAttribLocation(), 3, t.FLOAT, !1, 0, 0), t.bindBuffer(t.ARRAY_BUFFER, this.colorBuffer), t.enableVertexAttribArray(e.colorAttribLocation()), t.vertexAttribPointer(e.colorAttribLocation(), 4, t.UNSIGNED_BYTE, !0, 0, 0), this.texBuffers.forEach(function(r, i) {
                    t.bindBuffer(t.ARRAY_BUFFER, r), t.enableVertexAttribArray(e.texAttribLocation(i)), t.vertexAttribPointer(e.texAttribLocation(i), this.texCoords[i].numComponents, t.FLOAT, !1, 0, 0)
                }, this), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indicesBuffer)
            }
        }, {
            key: "shutdown",
            value: function() {
                var t = this.gl;
                t.deleteBuffer(this.positionBuffer), t.deleteBuffer(this.colorBuffer), this.texBuffers.forEach(function(e) {
                    t.deleteBuffer(e)
                }, this)
            }
        }]), t
    }(),
    PIXINeutrinoEffectModel = function(t) {
        function e(t, r) {
            _classCallCheck(this, e);
            var i = _possibleConstructorReturn(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
            i.ctx = t, i.effectPath = r, i.effectModel = null, i.numTexturesToLoadLeft = -1, i.texturesRemap = null;
            var s = i;
            return i.ctx.neutrino.loadEffect(i.ctx.effectsBasePath + r, function(t) {
                s._onEffectLoaded(t)
            }), i
        }
        return _inherits(e, t), _createClass(e, [{
            key: "ready",
            value: function() {
                return 0 === this.numTexturesToLoadLeft
            }
        }, {
            key: "_onEffectLoaded",
            value: function(t) {
                this.effectModel = t, this.textures = [], this.textureImageDescs = [];
                var e = t.textures.length;
                this.numTexturesToLoadLeft = e;
                for (var r = 0; r < e; ++r) {
                    var i = t.textures[r],
                        s = null;
                    if (this.ctx.trimmedExtensionLookupFirst) {
                        var o = i.replace(/\.[^\/.]+$/, "");
                        s = PIXI.utils.TextureCache[o]
                    }
                    s || (s = PIXI.utils.TextureCache[i]), s || (s = PIXI.Texture.fromImage(this.ctx.texturesBasePath + i)), s.baseTexture.hasLoaded ? this._onTextureLoaded(r, s) : s.once("update", function(t, e, r) {
                        return function() {
                            t._onTextureLoaded(e, r)
                        }
                    }(this, r, s))
                }
            }
        }, {
            key: "_onTextureLoaded",
            value: function(t, e) {
                if (this.textures[t] = e, this.numTexturesToLoadLeft--, this.ctx.renderer instanceof PIXI.CanvasRenderer) {
                    var r = e.baseTexture.source;
                    this.textureImageDescs[t] = new this.ctx.neutrino.ImageDesc(r, e.orig.x, e.orig.y, e.orig.width, e.orig.height)
                }
                0 === this.numTexturesToLoadLeft && (this.ctx.renderer instanceof PIXI.CanvasRenderer || this._initTexturesRemapIfNeeded(), this.emit("ready", this))
            }
        }, {
            key: "_initTexturesRemapIfNeeded",
            value: function() {
                for (var t = !1, e = 0; e < this.textures.length; ++e) {
                    var r = this.textures[e];
                    if (0 != r.orig.x || 0 != r.orig.y || r.orig.width != r.baseTexture.realWidth || r.orig.height != r.baseTexture.realHeight) {
                        t = !0;
                        break
                    }
                }
                if (this.texturesRemap = [], t)
                    for (var e = 0; e < this.textures.length; ++e) {
                        var r = this.textures[e];
                        this.texturesRemap[e] = new this.ctx.neutrino.SubRect(r.orig.x / r.baseTexture.realWidth, 1 - (r.orig.y + r.orig.height) / r.baseTexture.realHeight, r.orig.width / r.baseTexture.realWidth, r.orig.height / r.baseTexture.realHeight)
                    }
            }
        }]), e
    }(PIXI.DisplayObject),
    PIXINeutrinoEffect = function(t) {
        function e(t, r, i, s) {
            _classCallCheck(this, e);
            var o = _possibleConstructorReturn(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
            return o.ctx = t.ctx, o.effectModel = t, o.effect = null, o.position.set(r[0], r[1]), o.positionZ = r[2], i && (o.rotation = i), s ? (o.scale.x = s[0], o.scale.y = s[1], o.scaleZ = s[2]) : o.scaleZ = 1, t.ready() ? o._onEffectReady() : t.once("ready", function() {
                this._onEffectReady()
            }, o), o
        }
        return _inherits(e, t), _createClass(e, [{
            key: "ready",
            value: function() {
                return null != this.effect
            }
        }, {
            key: "update",
            value: function(t) {
                null != this.effect && this.effect.update(t, [this.position.x / this.scale.x, this.position.y / this.scale.y, this.positionZ / this.scaleZ], this.ctx.neutrino.axisangle2quat_([0, 0, 1], this.rotation % 360))
            }
        }, {
            key: "renderCanvas",
            value: function(t) {
                this.ready() && (t.context.setTransform(this.scale.x, 0, 0, this.scale.y, 0, 0), this.effect.draw(t.context))
            }
        }, {
            key: "renderWebGL",
            value: function(t) {
                if (this.ready()) {
                    var e = t.gl;
                    t.setObjectRenderer(t.emptyRenderer), t.bindVao(null), t.state.resetAttributes(), t.state.push(), t.state.setState(t.state.defaultState), t._activeShader = null;
                    var r = t._activeRenderTarget;
                    this.ctx.materials.setup(r.projectionMatrix.toArray(!0), [this.scale.x, this.scale.y]), this.effect.fillGeometryBuffers([1, 0, 0], [0, -1, 0], [0, 0, -1]), this.renderBuffers.updateGlBuffers(), this.renderBuffers.bind();
                    for (var i = 0; i < this.renderBuffers.numRenderCalls; ++i) {
                        var s = this.renderBuffers.renderCalls[i],
                            o = this.effect.model.renderStyles[s.renderStyleIndex].textureIndices[0];
                        t.bindTexture(this.effectModel.textures[o], 0, !0);
                        var n = this.effect.model.renderStyles[s.renderStyleIndex].materialIndex;
                        switch (this.effect.model.materials[n]) {
                            default:
                                this.ctx.materials.switchToNormal(t);
                                break;
                            case 1:
                                this.ctx.materials.switchToAdd(t);
                                break;
                            case 2:
                                this.ctx.materials.switchToMultiply(t)
                        }
                        e.drawElements(e.TRIANGLES, s.numIndices, e.UNSIGNED_SHORT, 2 * s.startIndex)
                    }
                    t.state.pop()
                }
            }
        }, {
            key: "restart",
            value: function(t, e) {
                t && (this.position.x = t[0], this.position.y = t[1], this.positionZ = t[2]), e && (this.rotation = e), this.effect.restart([this.position.x / this.scale.x, this.position.y / this.scale.y, this.positionZ / this.scaleZ], e ? this.ctx.neutrino.axisangle2quat_([0, 0, 1], e % 360) : null)
            }
        }, {
            key: "resetPosition",
            value: function(t, e) {
                t && (this.position.x = t[0], this.position.y = t[1], this.positionZ = t[2]), e && (this.rotation = e), this.effect.resetPosition([this.position.x / this.scale.x, this.position.y / this.scale.y, this.positionZ / this.scaleZ], e ? this.ctx.neutrino.axisangle2quat_([0, 0, 1], e % 360) : null)
            }
        }, {
            key: "setPropertyInAllEmitters",
            value: function(t, e) {
                this.effect.setPropertyInAllEmitters(t, e)
            }
        }, {
            key: "pauseGeneratorsInAllEmitters",
            value: function() {
                this.effect.pauseGeneratorsInAllEmitters()
            }
        }, {
            key: "unpauseGeneratorsInAllEmitters",
            value: function() {
                this.effect.unpauseGeneratorsInAllEmitters()
            }
        }, {
            key: "areGeneratorsInAllEmittersPaused",
            value: function() {
                return this.effect.areGeneratorsInAllEmittersPaused()
            }
        }, {
            key: "getNumParticles",
            value: function() {
                return this.effect.getNumParticles()
            }
        }, {
            key: "_onEffectReady",
            value: function() {
                var t = [this.position.x / this.scale.x, this.position.y / this.scale.y, this.positionZ / this.scaleZ],
                    e = this.ctx.neutrino.axisangle2quat_([0, 0, 1], this.rotation % 360);
                this.effectModel.ctx.renderer instanceof PIXI.CanvasRenderer ? (this.effect = this.effectModel.effectModel.createCanvas2DInstance(t, e), this.effect.textureDescs = this.effectModel.textureImageDescs) : (this.renderBuffers = new PIXINeutrinoRenderBuffers(this.ctx), this.effect = this.effectModel.effectModel.createWGLInstance(t, e, this.renderBuffers), this.effect.texturesRemap = this.effectModel.texturesRemap), this.emit("ready", this)
            }
        }]), e
    }(PIXI.Container);
var Neutrino = {
    initializedFirstTime: !1
};
Neutrino.NeutrinoHandler = function() {
    function t(t, e) {
        i[t] = new PIXINeutrinoEffectModel(Neutrino.CONTEXT, e)
    }

    function e() {
        null == r && (r = Date.now());
        var t = Date.now(),
            i = (t - r) / 1e3;
        r = t;
        for (var o in n) n.hasOwnProperty(o) && n[o].playing && n[o].effect.update(i > 1 ? 1 : i);
        requestAnimationFrame(e)
    }
    var i = {},
        n = {},
        r = null;
    this.init = function() {
        if (!Neutrino.initializedFirstTime) {
            var t = Game.stage.view.animationManager.renderer;
            Neutrino.CONTEXT = new PIXINeutrinoContext(t), Neutrino.initializedFirstTime = !0
        }
        e()
    }, this.createEffect = function(e, r, o) {
        o = o || {
            x: 0,
            y: 0
        };
        var f = Resources.readData("neutrinoEffects")[r].effectPath;
        return i[e] || t(e, f), n[e] = new Neutrino.NeutrinoEffect(i[e], o), n[e]
    }, this.createAndAddEffect = function(t, e, i, n, r) {
        r = r || new PIXI.Point(0, 0);
        var o = this.createEffect(t, e, n);
        return o.pivot = r, i.addChild(o), o
    }, this.playEffect = function(t) {
        n[t].play()
    }, this.stopEffect = function(t) {
        n[t].stop()
    }, this.resetEffect = function(t) {
        n[t].reset()
    }, this.setScale = function(t, e, i) {
        n[t].setScale(e, i)
    }, this.resetEffectPosition = function(t, e) {
        n[t].resetPosition(e)
    }, this.stopAllEffects = function() {
        for (var t in n) n.hasOwnProperty(t) && this.stopEffect(t)
    }
};
Neutrino.NeutrinoEffect = function(t, e) {
    PIXI.Container.apply(this, arguments), e = e || {
        x: 0,
        y: 0
    }, this.effect = new PIXINeutrinoEffect(t, [e.x, e.y, 0]), this.addChild(this.effect), this.playing = !1, this.play = function() {
        this.playing = !0
    }, this.stop = function() {
        this.playing = !1
    }, this.reset = function() {
        this.effect.ready() && this.effect.restart()
    }, this.setScale = function(t, e) {
        this.effect.scale.x = t, this.effect.scale.y = e, this.reset()
    }, this.resetPosition = function(t) {
        this.effect.ready() && this.effect.resetPosition([t.x, t.y, 0])
    }
}, Neutrino.NeutrinoEffect.prototype = Object.create(PIXI.Container.prototype);
var Component = {};
! function() {
    function t() {
        return this.getBounds().width
    }

    function n() {
        return this.getBounds().height
    }
    var i = new PIXI.Container,
        o = {
            boxWidth: t,
            boxHeight: n
        };
    i.drawBoundingBox = function() {
        var t = new PIXI.Graphics;
        setInterval(this.clearComponent, 33), this.addChild(t)
    }, i.show = function() {
        this.visible = !0, this.parent && this.updateTransform()
    }, i.hide = function() {
        this.visible = !1
    }, i.clearComponent = function() {
        graphics.clear(), graphics.beginFill(16711680), graphics.drawRect(0, 0, this.getBounds().width, this.getBounds().height)
    }, Component.Component = function() {
        PIXI.Container.apply(this, arguments), Vikings.Utils.addGetterFunctions(this, o)
    }, Component.Component.prototype = i
}();
Component.Util = {};
Component.Util.Scale = function() {
    function t() {}
    return Object.assign(t.prototype, {
        endScale: new PIXI.Point(1, 1),
        timedScale: function(t, e, s, a) {
            this.abortScale(), s = s || this.scale, a = a || function(t, e) {
                return [t, e]
            };
            var n = Math.abs(t.x - s.x) / (e / 33),
                c = Math.abs(t.y - s.y) / (e / 33),
                i = !1,
                l = !1;
            return this.scale = s, this.endScale = t, new Promise(function(e) {
                t.x === s.x && t.y === s.y ? e() : this._scaleInterval = setInterval(function() {
                    var h = a(n, c);
                    n = h[0], c = h[1], t = this.endScale, t.x > s.x && !i ? (this.scale.x += n, t.x <= this.scale.x && (i = !0)) : t.x < s.x && !i && (this.scale.x -= n, t.x >= this.scale.x && (i = !0)), t.y > s.y && !l ? (this.scale.y += c, t.y <= this.scale.y && (l = !0)) : t.y < s.y && !l && (this.scale.y -= c, t.y >= this.scale.y && (l = !0)), i && l && (this.scale.x = t.x, this.scale.y = t.y, clearInterval(this._scaleInterval), e()), this.onScale(this.scale.x, this.scale.y)
                }.bind(this), 33)
            }.bind(this))
        },
        updateEndScale: function(t) {
            this.endScale = t
        },
        onScale: function(t, e) {},
        abortScale: function() {
            clearInterval(this._scaleInterval)
        }
    }), t
}();
Component.Util.Count = function() {
    function t() {}
    return Object.assign(t.prototype, {
        FRAME_LENGTH_MS: 33,
        _counterValue: 0,
        setNumber: function(t, n) {
            this.abortCount(), this._counterValue = t, (n || void 0 === n) && this.onCount(this._counterValue)
        },
        getNumber: function() {
            return this._counterValue
        },
        increase: function(t, n) {
            this._counterValue += t, (n || void 0 === n) && this.onCount(this._counterValue)
        },
        decrease: function(t, n) {
            this._counterValue -= t, (n || void 0 === n) && this.onCount(this._counterValue)
        },
        count: function(t, n, e, u) {
            this.abortCount(), e = e || this._counterValue, u = u || function(t) {
                return t
            };
            var o = Math.abs(t - e) / (n / this.FRAME_LENGTH_MS);
            return this._counterValue = e, new Promise(function(n) {
                t === e ? n() : this._countInterval = setInterval(function() {
                    o = u(o), t > e ? (this.increase(o, !1), t <= this._counterValue ? (this.setNumber(t), clearInterval(this._countInterval), n()) : this.onCount(this._counterValue)) : t < e && (this.decrease(o, !1), t >= this._counterValue ? (this.setNumber(t), clearInterval(this._countInterval), n()) : this.onCount(this._counterValue))
                }.bind(this), this.FRAME_LENGTH_MS)
            }.bind(this))
        },
        abortCount: function() {
            clearInterval(this._countInterval)
        },
        onCount: function(t) {}
    }), t
}();
Component.Util.Fader = function() {
    function a() {}
    return Object.assign(a.prototype, {
        fadeIn: function(a, n, i) {
            var t, e = {};
            Sys.isDefined(i) || (i = function() {}), Sys.isDefined(n) || (n = 0), e[n] = {
                alpha: isNaN(this.alpha) ? 0 : this.alpha
            }, e[a + n] = {
                alpha: 1
            }, t = new Animation.Holder({
                target: this,
                animate: e,
                onEnd: function() {
                    Game.stage.view.animationManager.removeFromAnimationLoop(t), i()
                }
            }), Game.stage.view.animationManager.addToAnimationLoop(t), t.play(), this.fader = {
                animation: t
            }
        },
        fadeOut: function(a, n, i) {
            var t, e = {};
            Sys.isDefined(i) || (i = function() {}), Sys.isDefined(n) || (n = 0), e[n] = {
                alpha: isNaN(this.alpha) ? 1 : this.alpha
            }, e[a + n] = {
                alpha: 0
            }, t = new Animation.Holder({
                target: this,
                animate: e,
                onEnd: function() {
                    Game.stage.view.animationManager.removeFromAnimationLoop(t), i()
                }
            }), Game.stage.view.animationManager.addToAnimationLoop(t), t.play(), this.fader = {
                animation: t
            }
        },
        stopFade: function() {
            this.fader && this.fader.animation.stop(!0, !0)
        }
    }), a
}();
Component.Counter = function(t, n, o, e) {
    function i() {
        p.text = a.toFixed(this._numDecimals), p.style = s
    }
    var s, a, p, r, u;
    Vikings.Utils.addAsConstants(this, {
        DEFAULT_STYLE: {
            fontFamily: "Arial",
            fontSize: "20px",
            align: "center",
            fill: "#000"
        },
        FRAME_LENGTH_MS: 33
    }), Component.Component.apply(this, arguments), a = t || 0, s = n || this.DEFAULT_STYLE, r = o, u = e, this.init = function() {
        p = s.fontFamily ? Game.PIXIFactory.createAndAddText(a, s, this, r, u) : Game.PIXIFactory.createAndAddBitmapText(a, s, this, r, u), this.setNumber(a)
    }, this.setStyle = function(t) {
        s = t, i()
    }, this.getWidth = function() {
        return p.getLocalBounds().width
    }, this.getHeight = function() {
        return p.getLocalBounds().height
    }, this.onCount = function(t) {
        a = t, i(), this.onCounterUpdate(a)
    }, this.onCounterUpdate = function() {}
}, Component.Counter.prototype = Object.create(Component.Component.prototype), Object.assign(Component.Counter.prototype, Component.Util.Count.prototype);
Component.Symbol = function(t) {
    function i(t) {
        I.tracks[0].listener = {
            complete: t
        }
    }

    function n() {
        return S
    }

    function e() {
        return A
    }

    function s(t) {
        return T.contains(t) ? r : E
    }
    var o, I, S, A, T = ["SYM4", "SYM5", "SYM6", "SYM7", "SYM4-STACKED-1", "SYM4-STACKED-2", "SYM4-STACKED-3", "SYM5-STACKED-1", "SYM5-STACKED-2", "SYM5-STACKED-3", "SYM6-STACKED-1", "SYM6-STACKED-2", "SYM6-STACKED-3", "SYM7-STACKED-1", "SYM7-STACKED-2", "SYM7-STACKED-3"],
        E = "royal",
        r = "medium";
    Vikings.Utils.addAsConstants(this, {
        SYMBOL_SPINE: "symbol",
        TRIPLE_STACK_SPINE: "tripleStacks",
        IDLE_MEDIUM_ANIMATION: "idleMediums",
        WIN_INIT_ANIMATION: "winInit",
        WIN_IDLE_ANIMATION: "winIdle",
        WIN_SPIN_ANIMATION: "winSpin",
        TRANSFORM_ANIMATION: "transform",
        STATE_IDLE: "idle",
        STATE_WIN_INIT: "winInit",
        STATE_WIN_IDLE: "winIdle",
        STATE_INACTIVE: null,
        SHAKE_TIMESTEP: 20,
        SHAKE_STEPS: [{
            x: .5,
            y: .5,
            r: 0
        }, {
            x: -.5,
            y: -1,
            r: -.2
        }, {
            x: -1,
            y: 0,
            r: .5
        }, {
            x: 1.5,
            y: 1,
            r: 0
        }, {
            x: .5,
            y: -.5,
            r: .2
        }, {
            x: -.5,
            y: .5,
            r: -.2
        }, {
            x: -1.5,
            y: .5,
            r: 0
        }, {
            x: 1.5,
            y: .5,
            r: -.2
        }, {
            x: -.5,
            y: -.5,
            r: .2
        }, {
            x: .5,
            y: 1,
            r: 0
        }, {
            x: .5,
            y: -1,
            r: -.2
        }]
    }), Vikings.Utils.addGetterFunctions(this, {
        state: n,
        symbol: e
    }), Component.Component.apply(this, arguments), this.init = function() {
        o = Game.PIXIFactory.createAndAddSpineAnimation(t === Component.Symbol.TYPE_STACKED ? this.TRIPLE_STACK_SPINE : this.SYMBOL_SPINE, this), I = o.state
    }, this.idle = function() {
        S = this.STATE_IDLE, Game.PIXIUtils.resetSpineAnimation(o), s(A) === r && I.setAnimation(0, this.IDLE_MEDIUM_ANIMATION, !0)
    }, this.winInit = function() {
        S = this.STATE_WIN_INIT, Game.PIXIUtils.resetSpineAnimation(o);
        var t = A;
        return s(A) === r && (t = "Medium"), I.setAnimation(1, this.WIN_INIT_ANIMATION, !1), I.setAnimation(0, this.WIN_INIT_ANIMATION + t + "Fire", !1), new Promise(i)
    }, this.winIdle = function() {
        var t = A;
        s(A) === r && (t = "Medium"), S = this.STATE_WIN_IDLE, Game.PIXIUtils.resetSpineAnimation(o), I.setAnimation(0, this.WIN_IDLE_ANIMATION + t + "Fire", !0)
    }, this.shake = function() {
        var t = this.SHAKE_STEPS,
            i = this.SHAKE_TIMESTEP,
            n = this.position.x,
            e = this.position.y,
            s = this.rotation;
        return new Promise(function(o) {
            function I(S) {
                S < t.length ? (this.position.x = n + t[S].x, this.position.y = e + t[S].y, this.rotation = s + t[S].r * PIXI.DEG_TO_RAD, Vikings.Utils.setGameTimeout(I.bind(this, ++S), i)) : (this.position.x = n, this.position.y = e, this.rotation = s, o())
            }
            I.call(this, 0)
        }.bind(this))
    }, this.transformSymbol = function(t, n) {
        return this.setSymbol(t + "to" + n), I.setAnimation(0, this.TRANSFORM_ANIMATION), I.timeScale = 0, this.shake().then(function() {
            I.timeScale = 1
        }), new Promise(i)
    }, this.stop = function() {
        S = this.STATE_INACTIVE, Game.PIXIUtils.resetSpineAnimation(o)
    }, this.setSymbol = function(i) {
        A = i, this.removeChild(o), o = Game.PIXIFactory.createAndAddSpineAnimation(t === Component.Symbol.TYPE_STACKED ? this.TRIPLE_STACK_SPINE : this.SYMBOL_SPINE, this), I = o.state, o.skeleton.setSkinByName(i)
    }, this.isActive = function() {
        return S !== this.STATE_INACTIVE
    }
}, Component.Symbol.prototype = Object.create(Component.Component.prototype), Component.Symbol.TYPE_STACKED = "stacked";
Component.ChangeableSprite = function(n) {
    function t(n) {
        for (var t in e) e.hasOwnProperty(t) && (e[t].visible = !1);
        n.visible = !0
    }
    var e = {};
    Component.Component.apply(this, arguments), this.init = function() {
        for (var o in n)
            if (n.hasOwnProperty(o)) {
                var i = n[o];
                e[i] = Game.PIXIFactory.createAndAddSprite(i, this), this[o] = function(n) {
                    t(e[n])
                }.bind(this, i)
            }
    }
}, Component.ChangeableSprite.prototype = Object.create(Component.Component.prototype);
Component.MultiLayerCounter = function(t, n, e) {
    function o(t) {
        for (var n = 0; n < r.length; ++n) r[n].text = t.toFixed(this._numDecimals)
    }
    var i, r = [];
    Vikings.Utils.addAsConstants(this, {
        DEFAULT_STYLE: {
            fontFamily: "Arial",
            fontSize: "20px",
            align: "center",
            fill: "#000"
        },
        FRAME_LENGTH_MS: 33
    }), Component.Component.apply(this, arguments), i = n || 0, e = e || [], this.init = function() {
        this._setupTexts()
    }, this.getWidth = function() {
        return r[0].getLocalBounds().width
    }, this.getHeight = function() {
        return r[0].getLocalBounds().height
    }, this.getTextLayer = function(t) {
        return r[t]
    }, this._setupTexts = function() {
        for (var n = 0; n < t; ++n) {
            var o = e[n] || this.DEFAULT_STYLE;
            o.fontFamily ? r.push(Game.PIXIFactory.createAndAddText(i, o, this)) : r.push(Game.PIXIFactory.createAndAddBitmapText(i, o, this))
        }
    }, this.onCount = function(t) {
        i = t, o(i), this.onCounterUpdate(i)
    }, this.onCounterUpdate = function() {}
}, Component.MultiLayerCounter.prototype = Object.create(Component.Component.prototype), Object.assign(Component.MultiLayerCounter.prototype, Component.Util.Count.prototype);
Game.Slots.QuickStopperController.prototype.initAnimations = function() {}, Game.Slots.QuickStopperController.prototype.onGameSizeChanged = function() {};
Game.Slots.QuickStopperView.prototype.setupEvents = function() {};
Game.StageModel.prototype.getSymbolConfiguration = function(t, e, o) {
    return this.readData("reelGroups") ? this.getNewSymbolConfiguration(t, e, o) : this.readData("reelConfig") ? this.getLegacySymbolConfiguration(t, e) : null
}, Game.StageModel.prototype.getNewSymbolConfiguration = function(t, e, o) {
    o = o || "default";
    var a = this.readData("reelGroups")[o],
        r = this.getReelLayout(a.reelLayouts) || a.reelLayout,
        i = r[t.toString()],
        n = r.config || r.standard,
        l = i.top || n.top,
        s = n.outcomeOffset || 0;
    return {
        width: n.symbolWidths.standard,
        height: n.symbolHeights.standard,
        top: l + s + e * n.symbolCenterToCenter,
        left: i.left
    }
};
Core.Slots.ReelGroup.prototype.setSymbols = function(e, o) {
    for (var t = -1, s = this.reelLists; ++t < s.length;) Sys.isDefined(e[t]) && s[t].setSymbols(e[t], o)
}, Core.Slots.ReelGroup.prototype.addReelMask = function() {};
Core.Slots.ResponseParserController.prototype.parseReelInfo = function(s) {
    return Sys.utils.parseReelInfo(s, s.currentGameState)
}, Core.Slots.ResponseParserController.prototype.parseWinLayouts = function(s, e) {
    var i, n, t, o, p = [],
        r = 0,
        y = 0,
        l = 0;
    for (i = 0; i < s.length; i++) {
        if (p.push({
                betline: Sys.isNumber(s[i].betline) ? s[i].betline + 1 : void 0,
                positions: [],
                reelset: s[i].reelset,
                wins: {},
                secondWin: s[i].aftershieldwall
            }), Sys.isDefined(s[i].pos)) {
            for (n = 0; Sys.isDefined(s[i].pos["i" + n]); n++) o = {}, o.reelIndex = s[i].pos["i" + n][0], o.symbolIndex = s[i].pos["i" + n][1], o = Sys.apply(o, e[o.reelIndex].symbols[o.symbolIndex]), p[i].positions.push(o);
            p[i].positions.sort(this.sortSymbols)
        }
        for (t = 0; Sys.isDefined(s[i].types["i" + t]) && Sys.isDefined(s[i].types["i" + t].wintype); t++) p[i].wins.type = s[i].types["i" + t].wintype, "coins" === s[i].types["i" + t].wintype ? (p[i].wins.coins = s[i].types["i" + t].coins, p[i].wins.cents = s[i].types["i" + t].cents, r += s[i].types["i" + t].coins, y += s[i].types["i" + t].cents) : "freespins" === s[i].types["i" + t].wintype && (p[i].wins.freespins = s[i].types["i" + t].freespins, l += s[i].types["i" + t].freespins)
    }
    return p.sort(this.sortWinSituations), {
        winSituations: p,
        coins: r,
        cents: y,
        freespins: l
    }
};
Core.Slots.BufferedSpinView.prototype.activateReelSet = function(e, t) {
    var o, r, a = this;
    if (Sys.isDefined(a.reelSetToGroupMapping)) {
        if (o = a.reelSetToGroupMapping[e], Sys.isDefined(o)) {
            for (var i in a.reelSetToGroupMapping) a.reelSetToGroupMapping.hasOwnProperty(i) && this.deactivateReelSet(i);
            o.activate(e, t), a.model.storeData("currentReelSet", e), r = a.model.readData("initialOutcomes")[e], Sys.isDefined(r) && o.presentOutcome(r, a.model.readData("serverResponse")), o.reelLists.forEach(function(e, t) {
                a.updateSymbolLayout(e, t)
            })
        }
    } else a.model.storeData("currentReelSet", e), a.model.storeData("startScene", t)
}, Core.Slots.BufferedSpinView.prototype.setSymbols = function(e, t) {
    this.currentReelGroup().setSymbols(e, t)
};
Core.Slots.BufferedSpinController.prototype.setSymbols = function(e, n) {
        this.view.setSymbols(e, n)
    },
    function() {
        function e(e, n) {
            var r = e[0].nearWinList || [];
            return t = r[0] || !1, n
        }

        function n(e, n) {
            var r = e[0],
                o = r + 1;
            return o === t && this.fireEvent("request:nearWin.start", o), n
        }
        Object.extendFunctionsOn(Core.Slots.BufferedSpinController.prototype, {
            announceReelStopped: n,
            serverResponse: e
        });
        var t
    }();
Core.Slots.BufferedSpinModel.prototype.parseInitialOutcomes = function() {
    var e = Resources.readData("gameServerInitResponseObject"),
        i = e.rs,
        s = {};
    Sys.iterate(i, function(i, t) {
        s[t.id] = Sys.utils.parseReelInfo(e, t.id)
    });
    var t = Resources.readData("config").reelSets.basic,
        a = Sys.isDefined(t.initial) && Sys.isDefined(t.initial.symbols);
    if ("spin" === e.nextaction && a)
        for (var r = t.initial.symbols, n = 0; n < 5; ++n) s.basic[n].symbols = r[n];
    return s
};
Animation.PixiAnimationManager.prototype.setupPixiAssets = function() {
    var e = this,
        t = Resources.readData("animationImages"),
        a = Resources.readData("spines") || {},
        s = Resources.readData("neutrinoEffects") || {},
        i = Resources.readData("emitters") || {},
        r = Resources.readData("shaders") || {},
        n = Resources.readData("spriteSheets") || {},
        o = Resources.readData("bitmapFonts") || {},
        d = Resources.readData("spriteConfigurations") || {},
        u = [],
        c = e.imageConfig,
        f = Platform.isDesktopDevice ? 1 : .75,
        p = {};
    if (Sys.iterate(t, function(t, a) {
            var s = e.getCustomResolution(t, f),
                i = new PIXI.BaseTexture(a, 0, s.scale);
            t = s.name, i.imageUrl = t, PIXI.utils.BaseTextureCache[i.imageUrl] = i;
            var r = new PIXI.Texture(i);
            PIXI.utils.TextureCache[t] = r, p[t] = r
        }), Resources.storeData("animationImages", p), Sys.isDefined(c.spineConfigurations) && (Sys.iterate(c.spineConfigurations, function(e, t) {
            u.push({
                name: e,
                src: t
            }), a[e] = t
        }), Resources.storeData("spines", a)), Sys.isDefined(c.neutrinoConfigurations) && (Sys.iterate(c.neutrinoConfigurations, function(e, t) {
            u.push({
                name: e,
                src: t
            }), s[e] = t
        }), Resources.storeData("neutrinoEffects", s)), Sys.isDefined(c.emitterConfigurations) && (Sys.iterate(c.emitterConfigurations, function(e, t) {
            u.push({
                name: e,
                src: t
            }), i[e] = t
        }), Resources.storeData("emitters", i)), Sys.isDefined(c.shaders) && (Sys.iterate(c.shaders, function(e, t) {
            u.push({
                name: e,
                src: t
            }), r[e] = t
        }), Resources.storeData("shaders", r)), Sys.isDefined(c.spriteSheetConfigurations) && (Sys.iterate(c.spriteSheetConfigurations, function(e, t) {
            u.push({
                name: e,
                src: t
            }), n[e] = t
        }), Resources.storeData("spriteSheets", n)), Sys.isDefined(c.bitmapFontConfigurations) && (Sys.iterate(c.bitmapFontConfigurations, function(e, t) {
            u.push({
                name: e,
                src: t
            }), o[e] = t
        }), Resources.storeData("bitmapFonts", o)), u.length > 0) {
        e.loader = new PIXI.loaders.Loader;
        var g = e.assetsLoadedCompleteHandler.bind(e);
        e.loader.once("complete", g);
        for (var h = 0; h < u.length; h++) e.loader.add(u[h].name, u[h].src);
        e.loader.once("error", function(t, a, s) {
            e.loader.removeListener("complete", g), e.fireEvent("request:loaderErrorHandler.handleRequestError", s.xhr)
        }), e.loader.load()
    } else e.assetsLoadedCompleteHandler();
    Sys.isDefined(c.spriteConfigurations) && Sys.iterate(c.spriteConfigurations, function(e, t) {
        d[e] = t
    }), e.spriteConfigurations = d, Resources.storeData("spriteConfigurations", d)
}, Animation.PixiAnimationManager.prototype.assetsLoadedCompleteHandler = function(e, t) {
    var a = this,
        s = Resources.readData("spines") || {},
        i = Resources.readData("emitters") || {},
        r = Resources.readData("shaders") || {},
        n = Resources.readData("neutrinoEffects") || {},
        o = a.imageConfig;
    t && (Sys.iterate(o.spineConfigurations, function(e, a) {
        s[e] = t[e].spineData
    }), Sys.iterate(o.neutrinoConfigurations, function(e, a) {
        a = a.replace(/[^\/]+$/, "");
        for (var s = [], i = 0; i < t[e].data.textures.length; ++i) s.push(a + t[e].data.textures[i]);
        n[e] = {
            effectPath: a + t[e].data.effect,
            texturePaths: s
        }
    }), Sys.iterate(o.emitterConfigurations, function(e, a) {
        i[e] = t[e].data
    }), Sys.iterate(o.shaders, function(e) {
        r[e] = t[e].data
    })), Resources.storeData("spines", s), Resources.storeData("neutrinoEffects", n), Resources.storeData("images", void 0), Game.stage.model.storeData("images", void 0), a.imageConfig = void 0, a.fireEvent(a.imageReadyEvent)
}, Animation.PixiAnimationManager.prototype.PIXI_RENDERER_OPTIONS = {
    antialias: !1,
    resolution: 1,
    transparent: !0
}, Animation.PixiAnimationManager.prototype.initRenderer = function(e) {
    var t, a, s, i, r = this,
        n = new PIXI.Container,
        o = "Error",
        d = Resources.readData("queryData");
    this.setupGpuOptions(), this.setupDeviceOptions(), i = this.getGpuOptions(), this.applyGpuOptions(i), s = this.getDeviceOptions(), this.applyDeviceOptions(s), a = Sys.isDefined(d.forcecanvasrendering) ? d.forcecanvasrendering : this.forceCanvasRendering, Sys.isDefined(a) && !0 === a ? (t = new PIXI.CanvasRenderer(e.width, e.height, r.PIXI_RENDERER_OPTIONS), o = "Canvas") : (t = PIXI.autoDetectRenderer(e.width, e.height, r.PIXI_RENDERER_OPTIONS), o = "Auto - ", Sys.isDefined(t.filterManager) ? o += "WebGL" : o += "Canvas"), t.view.id = "canvasAnimationManager", t.plugins.interaction.autoPreventDefault = !1, r.stage = n, r.rootDisplayObject = new PIXI.Container, r.stage.addChild(r.rootDisplayObject), r.renderer = t, r.renderDisplay = o, r.animationBuffer = [];
    var u;
    Platform.isIEBrowser && (u = new PIXI.CanvasRenderer(e.width, e.height, r.PIXI_RENDERER_OPTIONS), this.rootDisplayObjectCanvas = new PIXI.Container, u.view.id = "canvasAnimationManagerCanvas", e.parent.appendChild(u.view), this.introMovieLayer = new PIXI.Container, this.rootDisplayObjectCanvas.addChild(this.introMovieLayer), r.addPreRenderCallback(u.render.bind(u, this.rootDisplayObjectCanvas))), r.createLayers(e), r.onResize(), e.parent.appendChild(t.view), r.addPreRenderCallback(r.renderer.render.bind(r.renderer, r.stage))
};
Sys.override(Interface.SettingsWindowDesktopView, {
    showChild: function(i) {
        this.container.el.style.visibility = "paytable" === i ? "hidden" : "visible", this.setTitle(this.model.getChildConfig(i).title)
    }
});
Sys.ns("Vikings"), Vikings.PIXIScrollContainer = {
    SCROLL_SPEED: 300,
    constructor: function(r) {
        var i = this;
        Sys.isDefined ? i.maxHeight = r : i.maxHeight = 0, Vikings.PIXIScrollContainer.superclass.constructor.apply(i, arguments), i.initScrollContainer()
    },
    initScrollContainer: function() {
        var r = this;
        r.isScrollContainer = !0, r.contentHeight = 0, r.contentWidth = 0, r.scrollBarContentMargin = 0, r.scrollBarSize = 10, r.scrollBarColor = 11184810, r.scrollBarAlpha = 1, r.scrollSliderColor = 2105376, r.scrollSliderAlpha = 0, r.touchStartPositionY = 0, r.bottomPadding = 0, r.scrollBar = new PIXI.Container, r.scrollBar.isScrollBar = !0, r.scrollBarGraphics = new PIXI.Graphics, r.scrollBarGraphics.beginFill(r.scrollBarColor, r.scrollBarAlpha), r.scrollBarGraphics.drawCircle(0, r.scrollBarSize, r.scrollBarSize), r.scrollBarGraphics.endFill(), r.scrollBar.addChild(r.scrollBarGraphics), r.scrollBar.visible = !1, r.scrollBar.interactive = !0, r.scrollBar.offset = 50, r.scrollBar.y = r.scrollBar.offset, r.scrollSlider = new PIXI.Container, r.scrollSlider.y = r.scrollBar.offset, r.scrollSlider.isScrollSlider = !0, r.scrollSliderGraphics = new PIXI.Graphics, r.scrollSliderGraphics.beginFill(r.scrollSliderColor, r.scrollSliderAlpha), r.scrollSliderGraphics.drawCircle(0, r.scrollBarSize, r.scrollBarSize), r.scrollSliderGraphics.drawRect(-r.scrollBarSize, r.scrollBarSize, 2 * r.scrollBarSize, r.maxHeight - 2 * r.scrollBarSize - r.scrollBar.offset), r.scrollSliderGraphics.drawCircle(0, r.maxHeight - 2 * r.scrollBarSize - r.scrollBar.offset, r.scrollBarSize), r.scrollSliderGraphics.endFill(), r.scrollSlider.addChild(r.scrollSliderGraphics), r.scrollSlider.visible = !1, r.scrollSlider.interactive = !0, r.mask = new PIXI.Graphics, r.mask.beginFill(), r.mask.drawRect(0, 0, 1, r.maxHeight), r.mask.endFill(), r.mask.isMask = !0, r.addChild(r.mask), r.addChild(r.scrollSlider), r.addChild(r.scrollBar), r.setupEvents(), r.interactive = !0
    },
    setupEvents: function() {
        var r = this;
        r.addEventListener("notify:userInputManager.userInputScroll", r.mouseWheel.bind(r)), r.scrollBar.on("touchstart", r.touchStartScrollBar.bind(r)), r.scrollBar.on("touchmove", r.touchMoveScrollBar.bind(r)), r.scrollBar.on("touchend", r.touchEndScrollBar.bind(r)), r.scrollSlider.on("touchstart", r.touchStartScrollBar.bind(r)), r.scrollSlider.on("touchend", r.touchEndScrollBar.bind(r)), window.addEventListener("click", r.mouseUp.bind(r)), r.scrollBar.on("mousemove", r.mouseMove.bind(r)), r.scrollBar.on("mousedown", r.mouseDown.bind(r)), r.scrollSlider.on("mousemove", r.mouseMove.bind(r)), r.scrollSlider.on("mousedown", r.mouseDown.bind(r))
    },
    updateScrollContainer: function() {
        var r, i, o = this,
            l = !1;
        i = o.forcedHeight || o.getChildrenMaxHeight(), r = o.forcedWidth || o.getChildrenMaxWidth(), i += o.bottomPadding, i > o.maxHeight && (l = !0), l && (o.scrollBar.visible = !0, o.scrollBar.updateTransform(), o.scrollSlider.visible = !0, o.scrollSlider.updateTransform()), o.scrollBarGraphics.clear(), o.scrollSliderGraphics.clear(), Sys.isDefined(o.scrollBar.sprite) ? o.scrollBar.position.x = r - o.scrollBar.width + o.scrollBarContentMargin : (o.scrollBarGraphics.beginFill(o.scrollBarColor, o.scrollBarAlpha), o.scrollBarGraphics.drawCircle(0, o.scrollBarSize, o.scrollBarSize), o.scrollBarGraphics.endFill(), o.scrollBar.position.x = r - o.scrollBar.width + o.scrollBarContentMargin), o.scrollSliderGraphics.beginFill(o.scrollSliderColor, o.scrollSliderAlpha), o.scrollSliderGraphics.drawCircle(0, o.scrollBarSize, o.scrollBarSize), o.scrollSliderGraphics.drawRect(-o.scrollBarSize, o.scrollBarSize, 2 * o.scrollBarSize, o.maxHeight - 2 * o.scrollBarSize), o.scrollSliderGraphics.drawCircle(0, o.maxHeight - o.scrollBarSize, o.scrollBarSize), o.scrollSliderGraphics.endFill(), o.contentHeight = i, o.contentWidth = r + o.scrollBarContentMargin, o.scrollSlider.position.x = r - o.scrollBar.width + o.scrollBarContentMargin, o.mask.width = r + o.scrollBarContentMargin, o.mask.height = o.maxHeight, o.children.sort(function(r, i) {
            return !!r.isScrollBar || r.isScrollSlider && !i.isScrollBar
        })
    },
    updateContent: function(r) {
        if (this.isActive())
            for (var i = this, o = (i.contentHeight - i.maxHeight) / (i.maxHeight - i.scrollBar.height) * (r - i.scrollBar.offset) * ((i.maxHeight + i.scrollBar.offset) / i.maxHeight), l = 0; l < i.children.length; ++l) Sys.isDefined(i.children[l].isScrollBar) || Sys.isDefined(i.children[l].isScrollSlider) || Sys.isDefined(i.children[l].isMask) || (i.children[l].position.y = i.children[l].offsetY - o)
    },
    updateScrollBarByMousePosition: function(r) {
        if (this.isActive() && this.scrollActive) {
            var i = this,
                o = document.getElementsByTagName("canvas")[0];
            i.moveScrollBar(i.getMousePosition(o, r).y), i.updateContent(i.scrollBar.position.y)
        }
    },
    updateScrollBarByScrollPosition: function(r) {
        if (this.isActive()) {
            var i = this,
                o = document.getElementsByTagName("canvas")[0],
                l = i.getMousePosition(o, r),
                t = i.scrollContainerToGlobalPosition(0, i.scrollBar.position.y).y,
                e = i.SCROLL_SPEED / i.contentHeight,
                s = r.deltaY || r.detail / 3 * 100;
            l = i.globalToScrollContainerPosition(l.x, l.y), l.x > 0 && l.x < i.contentWidth && l.y > 0 && l.y < i.maxHeight && (i.moveScrollBar(t + s * e), i.updateContent(i.scrollBar.position.y))
        }
    },
    updateScrollBarByTouch: function(r) {
        var i = this,
            o = i.scrollContainerToGlobalPosition(0, i.scrollBar.position.y).y,
            l = i.touchStartPositionY - r.data.global.y;
        i.touchStartPositionY -= l, i.moveScrollBar(o + l / 5), i.updateContent(i.scrollBar.position.y)
    },
    moveScrollBar: function(r) {
        var i = this,
            o = i.globalToScrollContainerPosition(0, r).y,
            l = i.scrollActive ? -i.scrollBar.height / 2 : 0,
            t = i.scrollActive ? 0 : -i.scrollBar.height / 2;
        r <= i.position.y + i.maxHeight - i.scrollBar.height / 2 + t && r >= i.position.y + i.scrollBar.height / 2 + t + i.scrollBar.offset ? i.scrollBar.position.y = o + l : r > i.position.y + i.maxHeight - i.scrollBar.height / 2 + t ? i.scrollBar.position.y = i.maxHeight - i.scrollBar.height : r < i.position.y + i.scrollBar.height / 2 + t + i.scrollBar.offset && (i.scrollBar.position.y = 0 + i.scrollBar.offset)
    },
    isActive: function() {
        return !!this.visible && (!Sys.isDefined(this.parent) || this.parent.visible)
    },
    addChild: function(r, i) {
        Sys.isDefined(i) || (i = !0);
        var o = this;
        Vikings.PIXIScrollContainer.superclass.addChild.apply(o, [r]), r.offsetY = r.position.y, i && o.updateScrollContainer()
    },
    useScrollBarSprite: function(r) {
        this.scrollBar.addChild(r), this.scrollBar.sprite = r, r.anchor.x = .5, this.updateScrollContainer()
    },
    mouseMove: function(r) {
        this.updateScrollBarByMousePosition(r)
    },
    touchStartScrollBar: function(r) {
        this.scrollActive = !0, this.updateScrollBarByMousePosition(r), r.stopPropagation()
    },
    touchMoveScrollBar: function(r) {
        this.updateScrollBarByMousePosition(r), this.scrollActive && r.stopPropagation()
    },
    touchEndScrollBar: function(r) {
        this.scrollActive = !1, r.stopPropagation()
    },
    touchStart: function(r) {
        this.scrollActive = !1, this.touchStartPositionY = r.data.global.y
    },
    touchMove: function(r) {
        this.updateScrollBarByTouch(r)
    },
    touchEnd: function(r) {
        this.scrollActive = !1
    },
    mouseDown: function(r) {
        this.scrollActive = !0, this.updateScrollBarByMousePosition(r)
    },
    mouseUp: function() {
        this.scrollActive = !1
    },
    mouseWheel: function(r, i) {
        this.updateScrollBarByScrollPosition(i)
    },
    getMousePosition: function(r, i) {
        var o = r.getBoundingClientRect();
        return i.clientX ? {
            x: Math.floor((i.clientX - o.left) / (o.right - o.left) * r.width),
            y: Math.floor((i.clientY - o.top) / (o.bottom - o.top) * r.height)
        } : i.data.originalEvent.clientX ? {
            x: Math.floor((i.data.originalEvent.clientX - o.left) / (o.right - o.left) * r.width),
            y: Math.floor((i.data.originalEvent.clientY - o.top) / (o.bottom - o.top) * r.height)
        } : {
            x: Math.floor((i.data.originalEvent.touches[0].pageX - o.left) / (o.right - o.left) * r.width / .75),
            y: Math.floor((i.data.originalEvent.touches[0].pageY - o.top) / (o.bottom - o.top) * r.height / .75)
        }
    },
    globalToScrollContainerPosition: function(r, i) {
        return new PIXI.Point(r - this.position.x, i - this.position.y)
    },
    scrollContainerToGlobalPosition: function(r, i) {
        return new PIXI.Point(r + this.position.x, i + this.position.y)
    },
    setScrollBarSize: function(r) {
        this.scrollBarSize = r, this.updateScrollContainer()
    },
    setMaxHeight: function(r) {
        this.maxHeight = r, this.updateScrollContainer()
    },
    setScrollBarContentMargin: function(r) {
        this.scrollBarContentMargin = r, this.updateScrollContainer()
    },
    setScrollBarColor: function(r) {
        this.scrollBarColor = r, this.updateScrollContainer()
    },
    setScrollSliderColor: function(r) {
        this.scrollSliderColor = r, this.updateScrollContainer()
    },
    forceWidth: function(r) {
        this.forcedWidth = r, this.updateScrollContainer()
    },
    forceHeight: function(r) {
        this.forcedHeight = r, this.updateScrollContainer()
    },
    setBottomPadding: function(r) {
        this.bottomPadding = r, this.updateScrollContainer()
    },
    getChildrenMaxHeight: function(r, i) {
        if (Sys.isDefined(r) || (r = this), Sys.isDefined(r.children) && 0 !== r.children.length && !this.isScrollContainerOwnProperty(r)) {
            Sys.isDefined(i) || (i = 0);
            for (var o = this, l = r.children, t = 0; t < l.length; ++t) {
                i = this.getChildrenMaxHeight(l[t], i);
                var e = r.isScrollContainer ? 0 : r.position.y;
                e + l[t].position.y + l[t].height > i && !o.isScrollContainerOwnProperty(l[t]) && !l[t].noHeight && (i = e + l[t].position.y + l[t].height)
            }
        }
        return i
    },
    getChildrenMaxWidth: function(r, i) {
        if (Sys.isDefined(r) || (r = this), Sys.isDefined(r.children) && 0 !== r.children.length && !this.isScrollContainerOwnProperty(r)) {
            Sys.isDefined(i) || (i = 0);
            for (var o = this, l = r.children, t = 0; t < l.length; ++t) {
                i = this.getChildrenMaxWidth(l[t], i);
                var e = r.isScrollContainer ? 0 : r.position.x;
                e + l[t].position.x + l[t].width > i && !o.isScrollContainerOwnProperty(l[t]) && !l[t].noWidth && (i = e + l[t].position.x + l[t].width)
            }
        }
        return i
    },
    addEventListener: function(r, i) {
        var o, l = this,
            t = Resources.readData("config"),
            e = Sys.isDefined(t) && Sys.isDefined(t.eventHandler) ? t.eventHandler : EventHandler;
        e.addListener(l, r), o = e.EVENTS[r];
        for (var s = 0; s < o.length; ++s) o[s] === l && (o[s].handlers = {}, o[s].handlers[r] = i)
    },
    isScrollContainerOwnProperty: function(r) {
        return r.isScrollBar || r.isScrollSlider || r.isMask
    },
    excludeFromWidthMeasure: function(r) {
        for (var i = 0; i < r.length; ++i) r[i].noWidth = !0
    },
    excludeFromHeightMeasure: function(r) {
        for (var i = 0; i < r.length; ++i) r[i].noHeight = !0
    }
}, Vikings.PIXIScrollContainer = Sys.extend(Interface.utils.PIXIScrollContainer, Vikings.PIXIScrollContainer, "Vikings.PIXIScrollContainer");
Interface.Slots.CoinsFieldController.prototype.onShowProgressiveWinRequest = function(e, o) {
    this.model.storeData("showProgressiveWinDisplay", !0);
    var t = this.model.readData("totalWin");
    this.model.storeData("totalWin", o || t), this.showProgressiveWin(e), this.model.storeData("totalWin", t)
}, Interface.Slots.CoinsFieldController.prototype.showFreeSpinsLeft = function(e) {
    this.view.showFreeSpinsLeft(e)
}, Interface.Slots.CoinsFieldModel.prototype.WIN_UP_TO = "2 000 000";
Object.extendFunctionOn(Interface.Slots.CoinsFieldBaseView.prototype, "setupView", function(e, t) {
    return Interface.Slots.CoinsFieldBaseView.winUpTo = this.winUpTo, t
}), Interface.Slots.CoinsFieldBaseView.prototype.showWinUpTo = function() {
    "cs" !== Resources.readData("language").lang && this.show(Interface.Slots.CoinsFieldBaseView.winUpTo)
}, Interface.Slots.CoinsFieldBaseView.prototype.showFreeSpinsLeft = function(e) {
    var t = this;
    t.freeSpinsLeftNumberElement.textContent = void 0 === e ? t.model.getFreeSpinsLeftText() : e, t.show(t.freeSpinsLeft)
};
Sys.ns("Vikings"), Vikings.CoinsFieldDesktopView = {
    constructor: function() {
        Vikings.CoinsFieldDesktopView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var e, i, t = this,
            n = Game.stage.view.animationManager.getLayer("userInterface"),
            a = new PIXI.Container;
        a.position.x = 0, a.position.y = 0, a.id = t.MODULE_NAME + ".rootContainer", e = new PIXI.Container, e.x = 0, e.y = 0, e.visible = !0, a.addChild(e), i = new PIXI.Container, i.x = 0, i.y = 0, i.visible = !1, a.addChild(i), this.freeSpinsProgressiveWinContainer = new PIXI.Container, this.freeSpinsProgressiveWinContainer.x = 640, this.freeSpinsProgressiveWinContainer.y = 650, i.addChild(this.freeSpinsProgressiveWinContainer), t.basicStateContainer = e, t.freeSpinsStateContainer = i, t.rootContainer = a, t.setupTextFields(), n.addChild(a), t.onGameModeChanged("BASIC")
    },
    setupTextFields: function() {
        var e, i, t = this;
        Game.PIXIFactory.createAndAddSprite("betFieldBackground", t.basicStateContainer, pixiGenericSlot.Positions.BASIC_BET_LABEL.position, pixiGenericSlot.Positions.BASIC_BET_LABEL.anchorPoint), t.betLableTextFieldBasic = Game.PIXIFactory.createAndAddText(Services.languageManager.getText(Language.Keys.machinetext_bet), Game.TextStyles.GENERIC_LABEL_STYLE, t.basicStateContainer, pixiGenericSlot.Positions.BASIC_BET_LABEL.position, pixiGenericSlot.Positions.BASIC_BET_LABEL.anchorPoint), t.betValueTextFieldBasic = Game.PIXIFactory.createAndAddText(t.model.getBetText(), Game.TextStyles.GENERIC_VALUE_STYLE, t.basicStateContainer, pixiGenericSlot.Positions.BASIC_BET_VALUE.position, pixiGenericSlot.Positions.BASIC_BET_VALUE.anchorPoint), Game.PIXIFactory.createAndAddSprite("coinFieldBackground", t.basicStateContainer, pixiGenericSlot.Positions.BASIC_BALANCE_LABEL.position, pixiGenericSlot.Positions.BASIC_BALANCE_LABEL.anchorPoint), t.balanceLableTextFieldBasic = Game.PIXIFactory.createAndAddText(Services.languageManager.getText(Language.Keys.machinetext_coins), Game.TextStyles.GENERIC_LABEL_STYLE, t.basicStateContainer, pixiGenericSlot.Positions.BASIC_BALANCE_LABEL.position, pixiGenericSlot.Positions.BASIC_BALANCE_LABEL.anchorPoint), t.coinsValueTextFieldBasic = Game.PIXIFactory.createAndAddText(t.model.getBalanceText(), Game.TextStyles.GENERIC_VALUE_STYLE, t.basicStateContainer, pixiGenericSlot.Positions.BASIC_BALANCE_VALUE.position, pixiGenericSlot.Positions.BASIC_BALANCE_VALUE.anchorPoint), e = Services.languageManager.getText(Language.Keys.totalWinColon_uc), t.totalWinLabelTextFieldFreeSpins = Game.PIXIFactory.createAndAddText(e, Game.TextStyles.FREESPINS_GENERIC_LABEL, this.freeSpinsProgressiveWinContainer, new PIXI.Point(0, 12)), t.totalWinValueTextFieldFreeSpins = Game.PIXIFactory.createAndAddText(0, Game.TextStyles.FREESPINS_PROGRESSIVE_WIN, this.freeSpinsProgressiveWinContainer, new PIXI.Point(0, 12)), i = Services.languageManager.getText(Language.Keys.freeSpinsLeftColonVar, [0]), t.freeSpinsLeftLabelTextFieldFreeSpins = Game.PIXIFactory.createAndAddText(i, Game.TextStyles.FREESPINS_GENERIC_LABEL, t.freeSpinsStateContainer, pixiGenericSlot.Positions.FREESPINS_LEFT_LABEL.position, pixiGenericSlot.Positions.FREESPINS_LEFT_LABEL.anchorPoint), this.totalWinLabelTextFieldFreeSpins.updateTransform(), this.freeSpinsProgressiveWinContainer.updateTransform(), this.totalWinValueTextFieldFreeSpins.x += this.totalWinLabelTextFieldFreeSpins.width + 5, this.totalWinValueTextFieldFreeSpins.updateTransform(), this.updateTotalWinValueField()
    },
    updateBetValueField: function() {
        this.betValueTextFieldBasic && (this.betValueTextFieldBasic.text = this.model.getBetText().toString())
    },
    updateCoinsValueField: function() {
        this.coinsValueTextFieldBasic && (this.coinsValueTextFieldBasic.text = this.model.getBalanceText().toString())
    },
    updateTotalWinValueField: function() {
        var e;
        this.totalWinValueTextFieldFreeSpins && (e = this.model.getTotalWinText(), this.totalWinValueTextFieldFreeSpins.text = e, this.freeSpinsProgressiveWinContainer.pivot.x = this.freeSpinsProgressiveWinContainer.width / 2)
    },
    updateFreespinsLeftField: function(e) {
        var i;
        this.freeSpinsLeftLabelTextFieldFreeSpins && (e = void 0 === e ? this.model.getFreeSpinsLeftText() : e, i = Services.languageManager.getText(Language.Keys.freeSpinsLeftColonVar, [e]), this.freeSpinsLeftLabelTextFieldFreeSpins.text = i)
    },
    showBalanceAndBet: function() {
        this.updateBetValueField(), this.updateCoinsValueField()
    },
    showWin: function() {
        this.updateCoinsValueField()
    },
    showProgressiveWin: function() {
        this.updateTotalWinValueField()
    },
    countUpProgressiveWin: function() {
        this.updateTotalWinValueField(), this.fireEvent("view:countUpComplete")
    },
    showFreeSpinsLeft: function(e) {
        this.updateFreespinsLeftField(e)
    },
    showAdditionalFreeSpinsWon: function() {},
    show: function() {},
    setupView: function() {},
    onGameModeChanged: function(e) {
        this.freeSpinsStateContainer.visible = "BASIC" !== e
    }
}, Vikings.CoinsFieldDesktopView = Sys.extend(Interface.Slots.CoinsFieldBaseView, Vikings.CoinsFieldDesktopView, "Vikings.CoinsFieldDesktopView");
Utils.Platform.getOrientation = function() {
    if (Platform.isDesktopDevice || Platform.isTabletDevice) return this.LANDSCAPE;
    if (window.screen && window.screen.orientation) return window.screen.orientation.type.indexOf("portrait") > -1 ? this.PORTRAIT : this.LANDSCAPE;
    if (void 0 !== window.orientation) {
        var t = window.orientation;
        return 0 === t || 180 === t ? this.PORTRAIT : this.LANDSCAPE
    }
    return document.documentElement.clientWidth >= document.documentElement.clientHeight ? this.LANDSCAPE : this.PORTRAIT
};
Sys.ns("Vikings"), Vikings.OriginEcasController = {
    LEGACY_SOUNDS: [{
        id: "VK_SmallWin_v1",
        group: "effects"
    }, {
        id: "VK_MedWin_v1",
        group: "effects"
    }, {
        id: "VK_LargeWin_v2",
        group: "effects"
    }, {
        id: "spinnButton_alt1",
        group: "effects"
    }, {
        id: "VK_BigWinLoop_NEW",
        group: "bigWinGroup"
    }, {
        id: "VK_BigWinEnd_smash",
        group: "bigWinGroup"
    }, {
        id: "VK_nearWinRiser_v9",
        group: "effects"
    }, {
        id: "VK_nearWinStopping",
        group: "effects"
    }, {
        id: "VK_shieldWallLand_JENNY_v1",
        group: "effects"
    }, {
        id: "VK_HotSpotLand_v1",
        group: "effects"
    }],
    constructor: function() {
        Vikings.OriginEcasController.superclass.constructor.apply(this, arguments)
    }
}, Vikings.OriginEcasController = Sys.extend(Game.OriginEcasController, Vikings.OriginEcasController, "Vikings.OriginEcasController");
Sys.ns("pixiGenericSlot"), pixiGenericSlot.OrientationManager = {
    constructor: function() {
        pixiGenericSlot.OrientationManager.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["orientation", "animation"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Core.Model,
            view: Core.View,
            controller: pixiGenericSlot.OrientationManagerController
        }
    }
}, pixiGenericSlot.OrientationManager = Sys.extend(Core.Module, pixiGenericSlot.OrientationManager, "pixiGenericSlot.OrientationManager");
Sys.ns("pixiGenericSlot"), pixiGenericSlot.OrientationManagerController = {
    DEFAULT_REEL_SCALE: {
        landscape: {
            scale: 1,
            xOffset: 0,
            yOffset: 0
        },
        portrait: {
            scale: 1,
            xOffset: 0,
            yOffset: 0
        }
    },
    constructor: function() {
        pixiGenericSlot.OrientationManagerController.superclass.constructor.apply(this, arguments), this.reelScale = Resources.readData("config").reelScale ? Resources.readData("config").reelScale : this.DEFAULT_REEL_SCALE
    },
    initAnimations: function() {
        var e, t = this,
            o = Game.stage.view.animationManager;
        t.reelLayers = [o.layers.reelBackground, o.layers.reel, o.layers.noWinSymbols, o.layers.winSymbolFrames, o.layers.winSymbols, o.layers.betLines, o.layers.betLineIndicators, o.layers.winAnims, o.layers.countUp, o.layers.bigWin, o.layers.winCoinNumbers, o.layers.countDownFreeSpins], t.userInterfaceLayers = [o.layers.userInterface], t.backgroundLayers = [o.layers.background, o.layers.tickerTape], t.logoLayers = [o.layers.logo], e = Resources.readData("animationImages").backgroundCssTop, t.topSrcValue = "url(" + e.baseTexture.source.src + ")", t.topBackgroundElement = document.createElement("div"), t.topBackgroundElement.id = "pixiGenericSlot_topBg", t.topBackgroundElement.style.width = "100%", t.topBackgroundElement.style.height = "100%", t.topBackgroundElement.style.backgroundImage = t.topSrcValue, t.topBackgroundElement.style.backgroundSize = "100% auto", t.topBackgroundElement.style.backgroundRepeat = "no-repeat", t.topBackgroundElement.style.position = "fixed", document.body.appendChild(t.topBackgroundElement), e = Resources.readData("animationImages").backgroundCssBottom, t.bottomSrcValue = "url(" + e.baseTexture.source.src + ")", t.bottomBackgroundElement = document.createElement("div"), t.bottomBackgroundElement.id = "pixiGenericSlot_bottomBg", t.bottomBackgroundElement.style.width = "100%", t.bottomBackgroundElement.style.height = "100%", t.bottomBackgroundElement.style.backgroundImage = t.bottomSrcValue, t.bottomBackgroundElement.style.backgroundRepeat = "no-repeat", t.bottomBackgroundElement.style.backgroundSize = "100% auto", t.bottomBackgroundElement.style.backgroundPosition = "bottom left", t.topBackgroundElement.appendChild(t.bottomBackgroundElement)
    },
    onPortrait: function() {
        var e = this,
            t = e.reelScale.portrait;
        e.setCssBackground(!0, !0), e.scaleLayers(e.reelLayers, new PIXI.Point(t.scale, t.scale), new PIXI.Point(.5, 0), new PIXI.Point(t.xOffset, t.yOffset)), e.hideLayers(e.logoLayers)
    },
    onLandscape: function() {
        var e = this,
            t = e.reelScale.landscape;
        e.scaleLayers(e.reelLayers, new PIXI.Point(t.scale, t.scale), new PIXI.Point(.5, 0), new PIXI.Point(t.xOffset, t.yOffset)), e.showLayers(e.logoLayers), e.setCssBackground(!1, !1)
    },
    scaleLayers: function(e, t, o, n) {
        for (var a = new PIXI.Point(1280 * o.x, 720 * o.y), r = new PIXI.Point(n.x * t.x, n.y * t.y), s = 0; s < e.length; s++) e[s].scale = t, e[s].pivot = a, e[s].position = new PIXI.Point(a.x + r.x, a.y + r.y)
    },
    showLayers: function(e) {
        for (var t = 0; t < e.length; t++) e[t].visible = !0
    },
    hideLayers: function(e) {
        for (var t = 0; t < e.length; t++) e[t].visible = !1
    },
    setCssBackground: function(e, t) {
        var o = this;
        o.topBackgroundElement.style.backgroundImage = !0 === e ? o.topSrcValue : "none", o.bottomBackgroundElement.style.backgroundImage = !0 === t ? o.bottomSrcValue : "none", document.body.style.backgroundColor = "#000000"
    }
}, pixiGenericSlot.OrientationManagerController = Sys.extend(Core.Controller, pixiGenericSlot.OrientationManagerController, "pixiGenericSlot.OrientationManagerController");
Sys.ns("Vikings"), Vikings.IntroMovieController = {
    constructor: function() {
        Vikings.IntroMovieController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        Vikings.IntroMovieController.superclass.setupEvents.apply(this, arguments), this.on({
            "notify:stateHandler.enteringShowingIntroMovieState": this.show,
            "view:animationComplete": this.close,
            "view:introMovieBuffered": this.onIntroMovieBuffered,
            "notify:moduleLoader.finishedLoadingModules": this.onModulesFinishedLoading,
            "notify:stateHandler.enteringFeatureSplashState": this.enteringFeatureSplashStateHandler,
            "request:introMovie.close": this.close.bind(this)
        })
    },
    onIntroMovieBuffered: function() {
        this.fireEvent("notify:introMovie.buffered")
    },
    close: function() {
        this.fireEvent("request:ambienceManager.ambiencePauseSwitch", !1), this.fireEvent("request:stage.lower"), this.fireEvent("notify:introMovie.closed"), Services.storage.storeData("IntroMovie.showing", !1), this.fireEvent("request:userInputManager.deactivateExclusivity", this.MODULE_NAME), this.fireEvent("request:enableBasicGamePanel", this.MODULE_NAME), this.view.stop(), !1 === this.model.readData("showFeatureSplash") && this.view.hide(), this.view.hideBlackScreen(), Platform.isIEBrowser && (document.getElementById("canvasAnimationManagerCanvas").style.display = "none", document.getElementById("canvasAnimationManager").style.display = "block")
    },
    show: function() {
        this.model.shouldShowIntroMovie() && (Platform.isIEBrowser && (document.getElementById("canvasAnimationManager").style.display = "none"), this.fireEvent("request:ambienceManager.ambiencePauseSwitch", !0), this.fireEvent("request:stage.elevate"), Services.storage.storeData("IntroMovie.showing", !1), this.fireEvent("request:userInputManager.activateExclusivity", this.MODULE_NAME), this.fireEvent("request:disableBasicGamePanel", this.MODULE_NAME), this.view.play())
    },
    enteringFeatureSplashStateHandler: function() {
        this.view.hide()
    },
    initAnimations: function() {
        if (!0 === Utils.isDesktopModeOnIosMobile()) return void this.onIntroMovieBuffered();
        this.view.initAnimations()
    },
    onModulesFinishedLoading: function() {
        Services.storage.storeData("shouldShowIntroMovie", this.model.shouldShowIntroMovie())
    }
}, Vikings.IntroMovieController = Sys.extend(Game.IntroMovieController, Vikings.IntroMovieController, "Vikings.IntroMovieController");
Sys.ns("Vikings"), Vikings.IntroMovieModel = {
    shouldShowIntroMovie: function() {
        return this.readData("initNotRestore") && Services.settingsManager.getSetting("showIntroMovie") && !this.readData("skipIntroMovie") && !Utils.isDesktopModeOnIosMobile()
    }
}, Vikings.IntroMovieModel = Sys.extend(Game.IntroMovieModel, Vikings.IntroMovieModel, "Vikings.IntroMovieModel");
Sys.ns("Vikings"), Vikings.IntroMovieView = {
    SRC: "introMovie",
    constructor: function() {
        Vikings.IntroMovieView.superclass.constructor.apply(this, arguments)
    },
    onSkipButtonClick: function() {
        this.close()
    },
    initAnimations: function() {
        var e = this;
        e.rootContainer = new PIXI.Container, e.blackScreenContainer = new PIXI.Container;
        var n = new PIXI.Graphics;
        n.beginFill(0, 1), n.drawRect(0, 0, 1280, 720), n.endFill(), e.blackScreenContainer.addChild(n), e.rootContainer.interactive = !0, e.introMovieElement = Game.PIXIFactory.createVideoElement(e.SRC, !1, !1), e.introMovieSprite = Game.PIXIFactory.createAndAddVideo(e.introMovieElement, e.rootContainer, new PIXI.Point(0, 0), new PIXI.Point(0, 0)), e.introMovieElement.addEventListener("canplaythrough", e.onCanPlayThrough.bind(e)), e.introMovieElement.addEventListener("ended", e.onVideoEnded.bind(e)), e.skipButton = e.createSkipButton("FeatureSplashContinue"), e.rootContainer.addChild(e.skipButton), e.skipButton.name = "continueButton", e.playIntroButton = new Interface.utils.PIXILabel(Services.languageManager.getText(e.MOVIE_BUTTON_PLAY.key), Game.TextStyles.SKIP_INTRO_STYLE), e.playIntroButton.moveToPosition(pixiGenericSlot.Positions.INTRO_CONTINUE_BUTTON), e.playIntroButton.clickCallback = e.playManually.bind(e), e.rootContainer.addChild(e.playIntroButton);
        var i = Platform.isIEBrowser ? Game.stage.view.animationManager.introMovieLayer : Game.stage.view.animationManager.getLayer("introMovie");
        i.addChild(e.blackScreenContainer), i.addChild(e.rootContainer), e.model.shouldShowIntroMovie() ? e.showBlackScreen() : (e.hideBlackScreen(), Platform.isIEBrowser && (document.getElementById("canvasAnimationManagerCanvas").style.display = "none")), e.rootContainer.visible = !1
    },
    showBlackScreen: function() {
        this.blackScreenContainer.visible = !0
    },
    hideBlackScreen: function() {
        this.blackScreenContainer.visible = !1
    },
    createSkipButton: function(e) {
        var n, i = this,
            t = Services.languageManager.getText(Language.Keys.skipIntro);
        return n = new Interface.utils.PIXILabel(t, Game.TextStyles.SKIP_INTRO_STYLE), n.id = e, n.clickCallback = i.onSkipButtonClick.bind(i), n.moveToPosition(pixiGenericSlot.Positions.SKIP_BUTTON), Platform.isIEBrowser && (n.pivot = new PIXI.Point(0, 50)), n
    },
    onVideoEnded: function() {
        this.close()
    },
    close: function() {
        this.fireEvent("view:animationComplete")
    },
    onCanPlayThrough: function() {
        this.fireEvent("view:introMovieBuffered")
    },
    stop: function() {
        var e = this;
        e.introMovieElement.pause(), Platform.isEdgeBrowser && Game.PIXIFactory.resetMSEdgeVideo("introMovie"), e.skipButton.visible = !1, e.playIntroButton.visible = !1, e.introMovieElement = void 0
    },
    hide: function() {
        var e = this;
        e.rootContainer && (e.rootContainer.removeChild(e.introMovieSprite), e.introMovieSprite = void 0, e.rootContainer.destroy(!0))
    },
    play: function() {
        var e = this;
        e.rootContainer.visible = !0, e.introMovieElement.currentTime = 0;
        var n = e.introMovieElement.play();
        Platform.isEdgeBrowser ? (Game.PIXIFactory.playMSEdgeVideo("introMovie"), e.proceedWithNormalPlay()) : void 0 !== n ? n.then(function() {
            e.proceedWithNormalPlay()
        }, function() {
            e.addManualPlay()
        }) : e.proceedWithNormalPlay()
    },
    proceedWithNormalPlay: function() {
        this.playIntroButton.visible = !1
    },
    addManualPlay: function() {
        this.playIntroButton.visible = !0
    },
    playManually: function() {
        this.introMovieElement.play(), this.playIntroButton.visible = !1
    },
    stopBlackScreen: function() {}
}, Vikings.IntroMovieView = Sys.extend(Game.IntroMovieView, Vikings.IntroMovieView, "Vikings.IntroMovieView");
Sys.ns("Vikings"), Vikings.SpinButtonController = {
    constructor: function() {
        Vikings.SpinButtonController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        Vikings.SpinButtonController.superclass.setupEvents.apply(this, arguments), this.on({
            "notify:environment.transitionToRSComplete": this.onEnvironmentTransitionToRSComplete,
            "notify:freeSpinOutro.closed": this.setKeypadBackgroundToMainGameMode,
            "notify:environment.introComplete": this.onIntroComplete,
            "request:environment.switchToRS": this.setKeypadBackgroundToFreeSpinMode
        })
    },
    onBeforeLoaderClose: function() {
        Vikings.SpinButtonController.superclass.onBeforeLoaderClose.apply(this, arguments), this.disable("notInIdleState")
    },
    onEnteringIdleState: function() {
        Vikings.SpinButtonController.superclass.onEnteringIdleState.apply(this, arguments), this.enable("notInIdleState")
    },
    onEnteringFreespinIntro: function() {},
    onEnvironmentTransitionToRSComplete: function() {
        this.hide(this.MODULE_NAME)
    },
    setKeypadBackgroundToFreeSpinMode: function() {
        Platform.isDesktopDevice && (this.view.keypadBackground.alpha = this.view.BACKGROUND_ALPHA_FREE_SPINS)
    },
    setKeypadBackgroundToMainGameMode: function() {
        Platform.isDesktopDevice && (this.view.keypadBackground.alpha = this.view.BACKGROUND_ALPHA_MAIN_GAME)
    }
}, Vikings.SpinButtonController = Sys.extend(Interface.Slots.SpinButtonController, Vikings.SpinButtonController, "Vikings.SpinButtonController");
Sys.ns("Vikings"), Vikings.SpinButtonDesktopView = {
    BACKGROUND_ALPHA_FREE_SPINS: .9,
    BACKGROUND_ALPHA_MAIN_GAME: 0,
    BACKGROUND_COLOR: 0,
    constructor: function() {
        Vikings.SpinButtonDesktopView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var n, t = this,
            i = Game.stage.view.animationManager.getLayer("userInterface");
        t.createKeypadBackground(), t.spinButton = new Interface.utils.PIXIButton("spinButtonIdle", "spinButtonDown", "spinButtonOver", "spinButtonDisabled"), t.spinButton.id = t.MODULE_NAME + ".spinButton", t.spinButton.moveToPosition(pixiGenericSlot.Positions.SPIN_BUTTON), t.spinButton.clickCallback = t.fireEvent.bind(t, "view:clicked"), n = t.spinButton.width / 2, t.spinButton.setCustomHitArea(new PIXI.Circle(n, t.spinButton.height / 2, n)), i.addChild(t.spinButton), t.spinButtonInner = new Component.SpinButtonInner({
            up: "spinButtonInnerUp",
            down: "spinButtonInnerDown",
            over: "spinButtonInnerOver",
            disabled: "spinButtonInnerDisabled"
        }), t.spinButtonInner.init(), t.spinButtonInner.up(), t.spinButtonInner.x = pixiGenericSlot.Positions.SPIN_BUTTON.position.x, t.spinButtonInner.y = pixiGenericSlot.Positions.SPIN_BUTTON.position.y - 61, t.spinButtonInner.pivot.x = t.spinButtonInner.width / 2, t.spinButtonInner.pivot.y = t.spinButtonInner.height / 2;
        var e = t.spinButton.updateGraphics;
        t.spinButton.updateGraphics = function() {
            e.call(t.spinButton), t.spinButton._enabled ? t.spinButtonInner[t.spinButton._currentState]() : t.spinButtonInner.disabled()
        }, t.runes = Game.PIXIFactory.createAndAddSprite("spinButtonRunes", i), t.runes.position.x = pixiGenericSlot.Positions.SPIN_BUTTON.position.x, t.runes.position.y = pixiGenericSlot.Positions.SPIN_BUTTON.position.y - 7, t.runes.anchor = pixiGenericSlot.Positions.SPIN_BUTTON.anchorPoint, i.addChild(t.spinButtonInner)
    },
    createKeypadBackground: function() {
        var n = this,
            t = Game.stage.view.animationManager.getLayer("keypadBackground");
        n.keypadBackground = new PIXI.Graphics, n.keypadBackground.beginFill(n.BACKGROUND_COLOR), n.keypadBackground.drawRect(0, 631, 1280, 65), n.keypadBackground.endFill(), n.keypadBackground.alpha = this.BACKGROUND_ALPHA_MAIN_GAME, t.addChild(n.keypadBackground)
    },
    press: function() {
        var n = this;
        n.fireEvent("view:notify", "notify:spinButton.down"), n.spinButton.setCurrentState("down")
    },
    release: function() {
        this.spinButton.setCurrentState("up")
    },
    hide: function() {
        var n = this;
        !n.model.hasProperty("hidden") && n.model.hasProperty("visibleDuringRound") || (n.runes.visible = !1, n.spinButton.visible = !1, n.spinButtonInner.visible = !1, n.fireEvent("view:hidden"))
    },
    hidden: function() {
        return this.spinButton.visible
    },
    show: function() {
        this.runes.visible = !0, this.spinButton.visible = !0, this.spinButtonInner.visible = !0, this.fireEvent("view:shown")
    },
    enable: function() {
        this.spinButton.setEnabled(!0)
    },
    disable: function() {
        this.spinButton.setEnabled(!1)
    },
    enableSpinningAnimations: function() {},
    disableSpinningAnimations: function() {},
    userInputStart: function() {},
    userInputMove: function() {},
    userInputHover: function() {},
    userInputEnd: function() {}
}, Vikings.SpinButtonDesktopView = Sys.extend(Interface.Slots.SpinButtonDesktopView, Vikings.SpinButtonDesktopView, "Vikings.SpinButtonDesktopView");
Component.SpinButtonInner = function(n) {
    Component.ChangeableSprite.apply(this, arguments)
}, Component.SpinButtonInner.prototype = Object.create(Component.ChangeableSprite.prototype);
Sys.ns("Vikings"), Vikings.MaxBetButton = {
    constructor: function() {
        Vikings.MaxBetButton.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["properties"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Interface.Slots.MaxBetButtonModel,
            controller: Vikings.MaxBetButtonController,
            view: Vikings.MaxBetButtonDesktopView
        }
    }
}, Vikings.MaxBetButton = Sys.extend(Interface.Slots.MaxBetButton, Vikings.MaxBetButton, "Vikings.MaxBetButton");
Sys.ns("Vikings"), Vikings.MaxBetButtonController = {
    constructor: function() {
        Vikings.MaxBetButtonController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var t = this;
        Vikings.MaxBetButtonController.superclass.setupEvents.apply(this, arguments), t.on({
            "notify:autoplaySettings.AutoPlayButton.label.fontSizeReduced": t.view.changeButtonSize.bind(t.view),
            "view:buttonClicked": this.fireEvent.bind(this, "request:buttonClickSound")
        })
    }
}, Vikings.MaxBetButtonController = Sys.extend(Interface.Slots.MaxBetButtonController, Vikings.MaxBetButtonController, "Vikings.MaxBetButtonController");
Sys.ns("Vikings"), Vikings.MaxBetButtonDesktopView = {
    constructor: function() {
        Vikings.MaxBetButtonDesktopView.superclass.constructor.apply(this, arguments)
    },
    setUpKeypadButton: function() {
        var t = this,
            e = Game.stage.view.animationManager.getLayer("userInterface");
        t.keypadButton = new Interface.utils.PIXIButton("maxBetButtonUp", "maxBetButtonDown", "maxBetButtonOver", "maxBetButtonDisabled"), Services.languageManager.getText(Language.Keys.btn_autoplay).length > 11 || Services.languageManager.getText(Language.Keys.btn_maxbet).length > 12 ? t.keypadButton.setLabelStyle(Game.TextStyles.MAX_BET_BUTTON_SMALL) : t.keypadButton.setLabelStyle(Game.TextStyles.MAX_BET_BUTTON), t.keypadButton.id = t.MODULE_NAME + ".MaxBetButton", t.keypadButton.setLabel(Services.languageManager.getText(Language.Keys.btn_maxbet)), t.keypadButton.moveToPosition(pixiGenericSlot.Positions.MAX_BET_BUTTON), t.keypadButton.clickCallback = t.onButtonClick.bind(t), t.chevron = new Component.ChangeableSprite({
            enabled: "chevronRight",
            disabled: "chevronRightDisabled"
        }), t.chevron.init(), t.chevron.enabled(), t.chevron.x = pixiGenericSlot.Positions.MAX_BET_BUTTON.position.x + 173, t.chevron.y = pixiGenericSlot.Positions.MAX_BET_BUTTON.position.y - 60, e.addChild(t.keypadButton), e.addChild(t.chevron)
    },
    updateKeypadButtonEnabledState: function() {
        var t = !1 === this.model.hasProperty("keypadButtonDisabled");
        this.keypadButton.setEnabled(t)
    },
    onButtonClick: function() {
        Vikings.MaxBetButtonDesktopView.superclass.onButtonClick.call(this), this.fireEvent("view:buttonClicked")
    },
    updateKeypadButtonVisibility: function() {
        var t = !1 === this.model.hasProperty("keypadButtonHidden");
        this.keypadButton.visible = t, t ? this.chevron.show() : this.chevron.hide()
    },
    enable: function(t) {
        this.model.removeProperty("keypadButtonDisabled", t), this.updateKeypadButtonEnabledState(), this.chevron.enabled()
    },
    disable: function(t) {
        this.model.addProperty("keypadButtonDisabled", t), this.updateKeypadButtonEnabledState(), this.chevron.disabled()
    },
    show: function(t) {
        this.model.removeProperty("keypadButtonHidden", t), this.updateKeypadButtonVisibility()
    },
    hide: function(t) {
        this.model.addProperty("keypadButtonHidden", t), this.updateKeypadButtonVisibility()
    },
    changeButtonSize: function(t) {
        var e = this.keypadButton.getCurrentLabelStyle();
        parseInt(e.fontSize, 10) > parseInt(t, 10) && (e.fontSize = t, this.keypadButton.setLabelStyle(e))
    }
}, Vikings.MaxBetButtonDesktopView = Sys.extend(Interface.Slots.MaxBetButtonBaseView, Vikings.MaxBetButtonDesktopView, "Vikings.MaxBetButtonDesktopView");
Sys.ns("Vikings"), Vikings.AutoplaySettings = {
    constructor: function() {
        Vikings.AutoplaySettings.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["userInput", "properties"]
    },
    getDefaultMVCClasses: function() {
        return {
            model: Interface.AutoplaySettingsModel,
            view: Vikings.AutoplaySettingsView,
            controller: Vikings.AutoplaySettingsController
        }
    }
}, Vikings.AutoplaySettings = Sys.extend(Interface.AutoplaySettings, Vikings.AutoplaySettings, "pixiGenericSlot.AutoplaySettings");
Sys.ns("Vikings"), Vikings.AutoplaySettingsController = {
    constructor: function() {
        Vikings.AutoplaySettingsController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var t = this;
        Vikings.AutoplaySettingsController.superclass.setupEvents.apply(t, arguments), t.on({
            "notify:gameModeChanged": t.onGameModeChanged,
            "notify:autoPlayer.stopped": t.onStopAutoPlay,
            "notify:maxBetButton.MaxBetButton.label.fontSizeReduced": t.view.changeButtonSize.bind(t.view),
            "view:buttonClicked": this.fireEvent.bind(this, "request:buttonClickSound")
        })
    },
    onGameModeChanged: function(t) {
        var e = this;
        Vikings.AutoplaySettingsController.superclass.onGameModeChanged.apply(e, arguments), "BASIC" === t ? e.model.storeData("isInFreeSpins", !1) : e.model.storeData("isInFreeSpins", !0)
    },
    onStopAutoPlay: function() {
        var t = this;
        Vikings.AutoplaySettingsController.superclass.onStopAutoPlay.apply(t, arguments), t.model.readData("isInFreeSpins") && (t.fireEvent("request:closeOpenWindows"), t.fireEvent("request:autoplaySettings.disable"))
    }
}, Vikings.AutoplaySettingsController = Sys.extend(Interface.AutoplaySettingsController, Vikings.AutoplaySettingsController, "Vikings.AutoplaySettingsController");
Sys.ns("Vikings"), Vikings.AutoplaySettingsView = {
    constructor: function() {
        Vikings.AutoplaySettingsView.superclass.constructor.apply(this, arguments)
    },
    setUpKeypadButton: function() {
        var t = this,
            e = Game.stage.view.animationManager.getLayer("userInterface");
        t.keypadButton = new Interface.utils.PIXIButton("autoPlayButtonUp", "autoPlayButtonDown", "autoPlayButtonOver", "autoPlayButtonDisabled"), Services.languageManager.getText(Language.Keys.btn_autoplay).length > 11 || Services.languageManager.getText(Language.Keys.btn_maxbet).length > 12 ? t.keypadButton.setLabelStyle(Game.TextStyles.AUTOPLAY_BUTTON_SMALL) : t.keypadButton.setLabelStyle(Game.TextStyles.AUTOPLAY_BUTTON), t.keypadButton.id = t.MODULE_NAME + ".AutoPlayButton", t.keypadButton.setLabel(Services.languageManager.getText(Language.Keys.btn_autoplay)), t.keypadButton.moveToPosition(pixiGenericSlot.Positions.AUTOPLAY_BUTTON), t.keypadButton.clickCallback = t.onButtonClick.bind(t), t.keypadButton.visible = t.isButtonVisible(), t.keypadButton.setEnabled(t.isButtonEnabled()), t.chevron = new Component.ChangeableSprite({
            enabled: "chevronLeft",
            disabled: "chevronLeftDisabled"
        }), t.chevron.init(), t.chevron.enabled(), t.chevron.x = pixiGenericSlot.Positions.AUTOPLAY_BUTTON.position.x - 213, t.chevron.y = pixiGenericSlot.Positions.AUTOPLAY_BUTTON.position.y - 60, e.addChild(t.keypadButton), e.addChild(t.chevron)
    },
    onButtonClick: function() {
        Vikings.AutoplaySettingsView.superclass.onButtonClick.call(this), this.fireEvent("view:buttonClicked")
    },
    updateKeypadButtonEnabledState: function() {
        var t = this;
        if (Sys.isDefined(t.keypadButton)) {
            var e = t.isButtonEnabled();
            t.keypadButton.setEnabled(e), e ? this.chevron.show() : this.chevron.hide()
        }
    },
    updateKeypadButtonVisibility: function() {
        var t = this;
        if (Sys.isDefined(t.keypadButton)) {
            var e = t.isButtonVisible();
            t.keypadButton.visible = e, e ? this.chevron.show() : this.chevron.hide()
        }
    },
    isButtonEnabled: function() {
        return !1 === this.model.hasProperty("keypadButtonDisabled")
    },
    isButtonVisible: function() {
        return !1 === this.model.hasProperty("keypadButtonHidden")
    },
    showKeypadButton: function(t) {
        this.model.removeProperty("keypadButtonHidden", t), this.updateKeypadButtonVisibility(), Sys.isDefined(this.chevron) && this.chevron.show()
    },
    hideKeypadButton: function(t) {
        this.model.addProperty("keypadButtonHidden", t), this.updateKeypadButtonVisibility(), Sys.isDefined(this.chevron) && this.chevron.hide()
    },
    enableKeypadButton: function(t) {
        var e, n = this;
        Sys.isDefined(n.keypadButton) ? n.enableButton(t) : (e = n.keypadPendingDisable.indexOf(t)) >= 0 && n.keypadPendingDisable.splice(e, 1)
    },
    disableKeypadButton: function(t) {
        var e = this;
        Sys.isDefined(e.keypadButton) ? e.disableButton(t) : e.keypadPendingDisable.contains(t) || e.keypadPendingDisable.push(t)
    },
    enable: function(t) {
        this.enableButton(t), this.enableMenu(t)
    },
    disable: function(t) {
        this.disableButton(t), this.disableMenu(t)
    },
    enableButton: function(t) {
        this.model.removeProperty("keypadButtonDisabled", t), this.updateKeypadButtonEnabledState(), Sys.isDefined(this.chevron) && this.chevron.enabled()
    },
    disableButton: function(t) {
        this.model.addProperty("keypadButtonDisabled", t), this.updateKeypadButtonEnabledState(), Sys.isDefined(this.chevron) && this.chevron.disabled()
    },
    enableMenu: function(t) {
        this.menuButton.enable(t)
    },
    disableMenu: function(t) {
        this.menuButton.disable(t)
    },
    changeButtonSize: function(t) {
        var e = this.keypadButton.getCurrentLabelStyle();
        parseInt(e.fontSize, 10) > parseInt(t, 10) && (e.fontSize = t, this.keypadButton.setLabelStyle(e))
    }
}, Vikings.AutoplaySettingsView = Sys.extend(Interface.AutoplaySettingsView, Vikings.AutoplaySettingsView, "Vikings.AutoplaySettingsView");
Sys.ns("pixiGenericSlot"), pixiGenericSlot.BetSettings = {
    constructor: function() {
        pixiGenericSlot.BetSettings.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return {
            fallback: ["userInput"],
            desktop: ["userInput", "animation", "properties"]
        }
    }
}, pixiGenericSlot.BetSettings = Sys.extend(Interface.BetSettings, pixiGenericSlot.BetSettings, "pixiGenericSlot.BetSettings");
Sys.ns("pixiGenericSlot"), pixiGenericSlot.BetSettingsDesktopView = {
    COIN_VALUE_BACKGROUND_IMAGE: "selectorValueBackground",
    BET_LEVEL_GAP_IN_FREE_ROUNDS: 11,
    constructor: function() {
        pixiGenericSlot.BetSettingsDesktopView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var e = this,
            t = Game.stage.view.animationManager.getLayer("userInterface"),
            i = new PIXI.Container;
        e.rootContainer = i, e.coinValueLabelText = Services.languageManager.getText(Language.Keys.machinetext_coinvalue), t.addChild(i), e.enabled = !0, e.initSelectors(), e.initFreespinItems(), e.update()
    },
    reInitSelectorBars: function() {
        this.model.removeProperty("betSettingsDisabled", "freeRounds"), this.removeSelectors(), this.initSelectors()
    },
    initSelectors: function() {
        var e = this;
        e.selectorContainer = new PIXI.Container, e.rootContainer.addChild(e.selectorContainer), e.createBetLevels(), e.createCoinValues(), e.selectorContainer.addChild(e.betLevelSelector), e.selectorContainer.addChild(e.coinValueSelector)
    },
    createCoinValues: function() {
        var e, t, i, n = this,
            o = n.model.readData("updatableCoinValues"),
            a = n.model.readData("coinValues"),
            l = new Interface.utils.PIXIValueStepper("selectorMinusUp", "selectorMinusDown", "selectorMinusOver", "selectorMinusDisabled", "selectorPlusUp", "selectorPlusDown", "selectorPlusOver", "selectorPlusDisabled");
        e = a.map(function(e) {
            return Sys.utils.numberToFixedDigits(e, 3)
        }), l.id = "coinValueSelector", l.setValues(e), l.on("valueChanged", this.coinValueChangeHandler, this), l.setEnabled(o), l.setValueFieldStyle(Game.TextStyles.GENERIC_VALUE_STYLE), l.setValueTextWidth(40), l.moveToPosition(pixiGenericSlot.Positions.COIN_VALUE_SELECTOR), t = l.plusButton.width / 2, l.plusButton.setCustomHitArea(new PIXI.Circle(t, l.plusButton.height / 2, t)), i = l.minusButton.width / 2, l.minusButton.setCustomHitArea(new PIXI.Circle(i, l.minusButton.height / 2, i)), n.coinValueLabel = Game.PIXIFactory.createAndAddText(n.coinValueLabelText, Game.TextStyles.GENERIC_LABEL_STYLE, n.selectorContainer, pixiGenericSlot.Positions.COIN_VALUE_LABEL.position, pixiGenericSlot.Positions.COIN_VALUE_LABEL.anchorPoint), n.coinValueSelector = l
    },
    createBetLevels: function() {
        var e, t, i = this,
            n = i.model.readData("updatableBetLevels"),
            o = new Interface.utils.PIXIValueStepper("selectorMinusUp", "selectorMinusDown", "selectorMinusOver", "selectorMinusDisabled", "selectorPlusUp", "selectorPlusDown", "selectorPlusOver", "selectorPlusDisabled"),
            a = i.model.readData("betLevels");
        i.betLevelLabelText = Services.languageManager.getText(Language.Keys.level), o.id = "betLevelSelector", o.setValues(a), 1 === a.length && o.setGap(i.BET_LEVEL_GAP_IN_FREE_ROUNDS), o.on("valueChanged", this.betLevelChangeHandler, this), o.setEnabled(n), o.setValueFieldStyle(Game.TextStyles.GENERIC_VALUE_STYLE), o.setValueTextWidth(25), o.moveToPosition(pixiGenericSlot.Positions.BET_LEVEL_SELECTOR), e = o.plusButton.width / 2, o.plusButton.setCustomHitArea(new PIXI.Circle(e, o.plusButton.height / 2, e)), t = o.minusButton.width / 2, o.minusButton.setCustomHitArea(new PIXI.Circle(t, o.minusButton.height / 2, t)), i.betLevelLabel = Game.PIXIFactory.createAndAddText(i.betLevelLabelText, Game.TextStyles.GENERIC_LABEL_STYLE, i.selectorContainer, pixiGenericSlot.Positions.BET_LEVEL_LABEL.position, pixiGenericSlot.Positions.BET_LEVEL_LABEL.anchorPoint), i.betLevelSelector = o
    },
    removeSelectors: function() {
        this.cleanItem(this.coinValueLabel, this.selectorContainer), this.cleanItem(this.betLevelLabel, this.selectorContainer), this.cleanItem(this.betLevelSelector, this.selectorContainer), this.cleanItem(this.coinValueSelector, this.selectorContainer), this.cleanItem(this.selectorContainer, this.rootContainer), delete this.coinValueLabel, delete this.betLevelLabel, delete this.betLevelSelector, delete this.coinValueSelector, delete this.selectorContainer
    },
    cleanItem: function(e, t) {
        e && t && t.removeChild(e)
    },
    initFreespinItems: function() {
        var e = this;
        e.freespinsContainer = new PIXI.Container, e.rootContainer.addChild(e.freespinsContainer), e.betLevelValueBackgroundItem = Game.PIXIFactory.createAndAddSprite("betLevelFieldBackground", e.freespinsContainer, pixiGenericSlot.Positions.FREESPIN_BETLEVEL_LABEL.position, pixiGenericSlot.Positions.FREESPIN_BETLEVEL_LABEL.anchorPoint), e.betLevelLabelItem = Game.PIXIFactory.createAndAddText(e.betLevelLabelText, Game.TextStyles.GENERIC_LABEL_STYLE, e.freespinsContainer, pixiGenericSlot.Positions.FREESPIN_BETLEVEL_LABEL.position, pixiGenericSlot.Positions.FREESPIN_BETLEVEL_LABEL.anchorPoint), e.betLevelValueItem = Game.PIXIFactory.createAndAddText(e.model.readData("betLevel"), Game.TextStyles.GENERIC_VALUE_STYLE, e.freespinsContainer, pixiGenericSlot.Positions.FREESPIN_BETLEVEL_VALUE.position, pixiGenericSlot.Positions.FREESPIN_BETLEVEL_VALUE.anchorPoint), e.coinValueValueBackgroundItem = Game.PIXIFactory.createAndAddSprite("coinFieldBackground", e.freespinsContainer, pixiGenericSlot.Positions.FREESPIN_COINVALUE_LABEL.position, pixiGenericSlot.Positions.FREESPIN_COINVALUE_LABEL.anchorPoint), e.coinValueLabelItem = Game.PIXIFactory.createAndAddText(e.coinValueLabelText, Game.TextStyles.GENERIC_LABEL_STYLE, e.freespinsContainer, pixiGenericSlot.Positions.FREESPIN_COINVALUE_LABEL.position, pixiGenericSlot.Positions.FREESPIN_COINVALUE_LABEL.anchorPoint), e.coinValueValueItem = Game.PIXIFactory.createAndAddText(e.model.readData("coinValue"), Game.TextStyles.GENERIC_VALUE_STYLE, e.freespinsContainer, pixiGenericSlot.Positions.FREESPIN_COINVALUE_VALUE.position, pixiGenericSlot.Positions.FREESPIN_COINVALUE_VALUE.anchorPoint), e.hideFreespinLabels()
    },
    betLevelChangeHandler: function(e) {
        this.onValueChange("betLevelChanged", e.value)
    },
    coinValueChangeHandler: function(e) {
        this.onValueChange("coinValueChanged", e.value)
    },
    updateValueItem: function(e, t) {
        e.text = Sys.utils.numberToFixedDigits(t, 3)
    },
    isBetSettingsEnabled: function() {
        return !1 === this.model.hasProperty("betSettingsDisabled")
    },
    enable: function(e) {
        var t = this,
            i = t.model.readData("updatableBetLevels"),
            n = t.model.readData("updatableCoinValues");
        t.enabled = !0, t.model.removeProperty("betSettingsDisabled", e), i && t.betLevelSelector.setEnabled(t.isBetSettingsEnabled()), n && t.coinValueSelector.setEnabled(t.isBetSettingsEnabled()), t.update()
    },
    disable: function(e) {
        var t = this;
        t.enabled = !1, t.model.addProperty("betSettingsDisabled", e), t.betLevelSelector.setEnabled(t.isBetSettingsEnabled()), t.coinValueSelector.setEnabled(t.isBetSettingsEnabled())
    },
    hideSelectors: function() {
        this.disable("BetSettings"), this.selectorContainer.visible = !1
    },
    showSelectors: function() {
        this.enable("BetSettings"), this.selectorContainer.visible = !0
    },
    update: function() {
        var e, t, i = this,
            n = i.model,
            o = n.readData("updatableBetLevels"),
            a = n.readData("updatableCoinValues");
        i.enabled && (o && (e = i.model.readData("betLevel"), i.betLevelSelector.setValue(e)), a && (t = i.getCoinValueString(), i.coinValueSelector.setValue(t))), Sys.isDefined(i.coinValueValueItem && i.betLevelValueItem) && (n.readData("updatableBetLevels") && (i.betLevelValueItem.text = i.model.readData("betLevel")), n.readData("updatableCoinValues") && i.updateValueItem(i.coinValueValueItem, i.model.readData("coinValue")), i.fireEvent("view:updateBetAndCoinsValue"))
    },
    showFreespinLabels: function() {
        this.freespinsContainer.visible = !0
    },
    hideFreespinLabels: function() {
        this.freespinsContainer.visible = !1
    },
    getCoinValueString: function() {
        var e = this;
        return Sys.utils.numberToFixedDigits(e.model.readData("coinValue"), 3)
    }
}, pixiGenericSlot.BetSettingsDesktopView = Sys.extend(Interface.BetSettingsDesktopView, pixiGenericSlot.BetSettingsDesktopView, "pixiGenericSlot.BetSettingsDesktopView");
Sys.ns("Vikings"), Vikings.BetSettingsController = {
    constructor: function() {
        Vikings.BetSettingsController.superclass.constructor.apply(this, arguments)
    },
    onUserAction: function() {
        Vikings.BetSettingsController.superclass.onUserAction.apply(this, arguments), this.fireEvent("request:buttonClickSound")
    }
}, Vikings.BetSettingsController = Sys.extend(Interface.BetSettingsController, Vikings.BetSettingsController, "Vikings.BetSettingsController");
Component.TextArea = function(t, e, n, o, i) {
    Vikings.Utils.addAsConstants(this, {
        PAYTABLE_CENTERING_VALUE: 445
    }), Component.Component.apply(this, arguments), this.init = function() {
        this._createTextArea(t, e, n, o, i)
    }, this._createTextArea = function(t, e, n, o, i) {
        var a = Sys.clone(Game.TextStyles.PAYTABLE_TEXT);
        a.wordWrap = !0, a.wordWrapWidth = e;
        for (var r in i) i.hasOwnProperty(r) && (a[r] = i[r]);
        var s = new PIXI.Text(t, a);
        s.style = a, n && (s.position.x = n), o && (s.position.y = o), s.scale = new PIXI.Point(.6, .6), "center" === a.align && (s.pivot.x = s.width / 2 / .6, this.x += this.PAYTABLE_CENTERING_VALUE), this.addChild(s)
    }
}, Component.TextArea.prototype = Object.create(Component.Component.prototype);
Component.Payout = function(t, e, o, a, n) {
    var i, s;
    Vikings.Utils.addAsConstants(this, {
        STACKED_PREFIX: "paytablePayout",
        STACKED_SUFFIX: "Stacked"
    }), Component.Component.apply(this, arguments), this.init = function() {
        this.payoutLabels = {}, this.payoutValues = {}, i = this._createSymbolPayoutContainer(e, n), t.contains("STACKED") ? (s = Game.PIXIFactory.createAndAddSprite(this.STACKED_PREFIX + t.substr(0, 4) + this.STACKED_SUFFIX, this), i.x = 190, i.y = 65) : (s = Game.PIXIFactory.createAndAddSprite(t, this), i.x = 190, i.y = 20), this.x = o, this.y = a
    }, this._createSymbolPayoutContainer = function(t, e) {
        var o = new PIXI.Container;
        e = e || {
            1: 52,
            2: 37.5
        }, t.sort(function(t, e) {
            return e.from - t.from
        });
        for (var a = 0; a < t.length; ++a)
            if (Sys.isDefined(t[a].value)) {
                var n = t[a].from < 6 && 6 === t.length || t[a].from < 16 && 25 === t.length,
                    i = new PIXI.Text(t[a].from.toString(), n ? Game.TextStyles.PAYOUT_LABEL : Game.TextStyles.PAYOUT_LABEL_GOLD),
                    s = new PIXI.Text(t[a].value.toString(), n ? Game.TextStyles.PAYOUT_VALUE : Game.TextStyles.PAYOUT_VALUE_WHITE),
                    r = 30 * a;
                i.position.y = r, s.position.y = r, s.position.x = e[t[a].value.toString().length], o.addChild(i), o.addChild(s), i.scale.x = .6, i.scale.y = .6, s.scale.x = .6, s.scale.y = .6, this.payoutLabels[t[a].from] = i, this.payoutValues[t[a].value] = s
            } return this.addChild(o), o
    }
}, Component.Payout.prototype = Object.create(Component.Component.prototype);
Component.PaytableLabel = function(t, e, o) {
    var n;
    Component.Component.apply(this, arguments), this.init = function() {
        n = new PIXI.Text(t, Game.TextStyles.PAYTABLE_LABEL), n.scale.x = .6, n.scale.y = .6, n.x = e, n.y = o, n.pivot.x = n.width / 2, this.addChild(n)
    }
}, Component.PaytableLabel.prototype = Object.create(Component.Component.prototype);
Sys.ns("Vikings"), Vikings.Paytable = {
    constructor: function() {
        Vikings.Paytable.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return {
            fallback: ["userInput", "orientation"],
            desktop: ["userInput", "properties"]
        }
    },
    getDefaultMVCClasses: function() {
        return {
            model: Vikings.PaytableModel,
            view: Vikings.PaytableBaseView,
            controller: Vikings.PaytableController
        }
    }
}, Vikings.Paytable = Sys.extend(Interface.Paytable, Vikings.Paytable, "Vikings.Paytable");
Sys.ns("Vikings"), Vikings.PaytableBaseView = {
    HEADING_CSS: "warlords-paytable-header",
    BETLINES_CSS: "paytable_betlines_img_mobile paytable_betlines_uri_mobile",
    SECTIONS: ["SymbolValues", "Scatter", "HotSpot", "ScatterPays", "ShieldWall", "RaidSpins", "Betways"],
    HIGH_WIN: {
        COLOR: "#e4312e",
        SYMBOLS: ["SYM3"]
    },
    MEDIUM_WIN_1: {
        COLOR: "#e4312e",
        SYMBOLS: ["SYM4-STACKED-1", "SYM5-STACKED-1"]
    },
    MEDIUM_WIN_2: {
        COLOR: "#e4312e",
        SYMBOLS: ["SYM6-STACKED-1", "SYM7-STACKED-1"]
    },
    LOW_WIN_1: {
        COLOR: "#e4312e",
        SYMBOLS: ["SYM8", "SYM9", "SYM10"]
    },
    LOW_WIN_2: {
        COLOR: "#e4312e",
        SYMBOLS: ["SYM11", "SYM12"]
    },
    STACKED_WIN_1: {
        COLOR: "#e4312e",
        SYMBOLS: ["SYM4-STACKED-1", "SYM5-STACKED-1", "SYM6-STACKED-1", "SYM7-STACKED-1"]
    },
    STACKED_PREFIX: "paytablePayout",
    STACKED_SUFFIX: "Stacked",
    sectionCount: 0,
    constructor: function() {
        Vikings.PaytableBaseView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var e = this.model.readData("receivedPaytableResponse"),
            a = this.model.readData("contentCreated");
        e && !1 === a && this.setUpContent(), this.model.storeData("initAnimationsCalled", !0)
    },
    setUpContent: function() {
        var e = this;
        e.model.setNumberOfPages(1), e.model.setCurrentPage(1), e.container.add(new Sys.Element({
            tag: "div",
            class: "warlords-paytable-section warlords-paytable-logo"
        })), e.createSections(), e.fireEvent("view:addToContainer", "settingsWindow", {
            title: Services.languageManager.getText(Language.Keys.paytable_uc),
            content: e.container
        }), e.fireEvent("view:addToNavigator", "settingsMenu", {
            order: 3
        }), e.createBottomline(), e.addScrolling(), e.model.readData("disabled") || e.enable(), e.hide(), this.model.storeData("contentCreated", !0)
    },
    createSymbolValues: function() {
        var e = this,
            a = new Sys.Element({
                tag: "div",
                class: e.SECTION_CSS
            });
        a.add(new Sys.Element({
            tag: "div",
            textContent: Services.languageManager.getText(Language.Keys.paytablePayoutValuesHeader),
            class: e.HEADING_CSS
        })), a.add(e.createSymbolSubSection(e.HIGH_WIN.SYMBOLS)), a.add(e.createSymbolSubSection(e.MEDIUM_WIN_1.SYMBOLS)), a.add(new Sys.Element({
            tag: "div",
            style: "clear: both;"
        })), a.add(e.createSymbolSubSection(e.MEDIUM_WIN_2.SYMBOLS)), a.add(new Sys.Element({
            tag: "div",
            style: "clear: both;"
        })), a.add(e.createSymbolSubSection(e.LOW_WIN_1.SYMBOLS)), a.add(e.createSymbolSubSection(e.LOW_WIN_2.SYMBOLS)), e.sectionElements.SymbolValues = a, e.container.add(a), e.container.add(new Sys.Element({
            tag: "div",
            style: "clear: both;"
        }))
    },
    createSymbolSubSection: function(e) {
        var a = new Sys.Element({
            tag: "div",
            class: "interface-paytable_symbols"
        });
        return this.appendSymbols(a, e), a
    },
    appendSymbols: function(e, a) {
        var t;
        switch (a.length) {
            case 1:
                t = "width: 30%; float: left; margin-bottom: 20px; margin-left: 33%; margin-right: 37%;";
                break;
            case 2:
                t = "width: 30%; float: left; margin-bottom: 20px; margin-left: 9%; margin-right: 5%;";
                break;
            case 3:
                t = "width: 30%; float: left; margin-bottom: 20px; margin-left: 1.5%; margin-top: 30px;";
                break;
            case 4:
                t = "width: 20%; float: left; margin-bottom: 20px; margin-left: 5%;"
        }
        for (var s = 0; s < a.length; ++s) this.appendSymbolContainerUsingDivs(e, a[s], t)
    },
    appendSymbolContainerUsingDivs: function(e, a, t) {
        var s, n, l, r, o = Resources.readData("animationImages"),
            i = this.model.readData("symbolHeight"),
            d = a.contains("STACKED") ? a.substr(0, 4) : a,
            g = this.model.getCondensedInfo(d).sort(function(e, a) {
                return a.from - e.from
            }),
            c = g.length;
        if (e = e.add(new Sys.Element({
                tag: "div",
                style: a.contains("STACKED") ? "width: 35%; float: left; margin-bottom: 20px; margin-left: 10%;" : t
            })), r = e.add(new Sys.Element({
                tag: "div",
                style: "min-height: " + i + "px; text-align: center; float: left;"
            })), a.contains("STACKED")) {
            var y = this.STACKED_PREFIX + a.substr(0, 4) + this.STACKED_SUFFIX;
            Sys.isDefined(o[y]) && r.el.appendChild(o[y].baseTexture.source)
        } else Sys.isDefined(o[a]) && r.el.appendChild(o[a].baseTexture.source);
        s = a.contains("STACKED") ? e.add(new Sys.Element({
            tag: "div",
            style: "min-height: " + i + "px;",
            class: "warlords-paytable_symbolBetlineValues stacked"
        })) : e.add(new Sys.Element({
            tag: "div",
            style: "min-height: " + i + "px;",
            class: "warlords-paytable_symbolBetlineValues"
        }));
        var S = s.add(new Sys.Element({
                tag: "ul",
                class: a.contains("STACKED") ? "warlords-paytable_symbolBetlines stacked" : "warlords-paytable_symbolBetlines"
            })),
            m = s.add(new Sys.Element({
                tag: "ul",
                class: (a.contains("STACKED"), "warlords-paytable_symbolValues")
            }));
        for (l = -1; ++l < c;) {
            n = g[l];
            var u = n.from < 6,
                p = u ? "#e4312e" : "#fdc131",
                b = u ? "#c4d0df" : "#fff";
            Sys.isDefined(n.value) && (S.add(new Sys.Element({
                tag: "li",
                textContent: n.from,
                style: "color: " + p + ";"
            })), m.add(new Sys.Element({
                tag: "li",
                textContent: n.value,
                style: "color: " + b + ";"
            })))
        }
    },
    enableButton: function() {},
    disableButton: function() {},
    createBetlines: function() {
        var e = this,
            a = Resources.readData("animationImages");
        e.createSection(Services.languageManager.getText(Language.Keys.winningBetLinesHeadUC)).add(new Sys.Element({
            tag: "div",
            class: "warlords-paytable-col-3"
        })).add(new Sys.Element({
            tag: "div",
            class: "warlords-paytable-pos-center"
        })).add(new Sys.Element({
            tag: "img",
            src: a.betlines.baseTexture.source.src
        }))
    },
    createBottomline: function() {
        var e = this,
            a = e.createSection(""),
            t = [Services.languageManager.getText(Language.Keys.paytableBottomText1) + " " + Services.languageManager.getText(Language.Keys.paytableBottomText2) + " " + Vikings.Strings.legalLine];
        a.add(new Sys.Element({
            tag: "div",
            class: "warlords-paytable-pos-center",
            textContent: t
        }))
    },
    createScatter: function() {
        var e = this,
            a = e.createSection(Services.languageManager.getText(Language.Keys.paytableScatterHeader)),
            t = Resources.readData("animationImages");
        a.add(new Sys.Element({
            tag: "div",
            style: "text-align: center; float: left; margin-top: -30px;",
            class: "warlords-paytable-col-1"
        })).add(new Sys.Element({
            tag: "img",
            src: t.paytableScatter.baseTexture.source.src
        })), a.add(new Sys.Element({
            tag: "div",
            class: "warlords-paytable-col-2"
        })).add(new Sys.Element({
            tag: "div",
            style: "margin-top: 20px;",
            class: "warlords-paytable-text",
            textContent: Services.languageManager.getText(Language.Keys.paytableScatterText1)
        }))
    },
    createHotSpot: function() {
        var e = this,
            a = e.createSection(Services.languageManager.getText(Language.Keys.paytableHotSpotHeader)),
            t = Resources.readData("animationImages");
        a.add(new Sys.Element({
            tag: "div",
            style: "text-align: center; float: left;",
            class: "warlords-paytable-col-1"
        })).add(new Sys.Element({
            tag: "img",
            src: t.paytableHotSpot.baseTexture.source.src
        }));
        var s = a.add(new Sys.Element({
            tag: "div",
            class: "warlords-paytable-col-2"
        }));
        s.add(new Sys.Element({
            tag: "div",
            style: "margin-top: 20px;",
            class: "warlords-paytable-text",
            textContent: Services.languageManager.getText(Language.Keys.paytableHotSpotText1)
        })), s.add(new Sys.Element({
            tag: "div",
            style: "margin-top: 20px;",
            class: "warlords-paytable-text",
            textContent: Services.languageManager.getText(Language.Keys.paytableHotSpotText2)
        })), s.add(new Sys.Element({
            tag: "div",
            style: "margin-top: 20px;",
            class: "warlords-paytable-text",
            textContent: Services.languageManager.getText(Language.Keys.paytableHotSpotText3)
        })), s.add(new Sys.Element({
            tag: "div",
            style: "margin-top: 20px;",
            class: "warlords-paytable-text",
            textContent: Services.languageManager.getText(Language.Keys.paytableHotSpotText4)
        }))
    },
    createScatterPays: function() {
        var e = this,
            a = e.createSection(Services.languageManager.getText(Language.Keys.paytableScatterPaysHeader)),
            t = Resources.readData("animationImages"),
            s = a.add(new Sys.Element({
                tag: "div",
                class: "warlords-paytable-col-3"
            }));
        s.add(new Sys.Element({
            tag: "div",
            style: "margin-top: 20px;",
            class: "warlords-paytable-text",
            textContent: Services.languageManager.getText(Language.Keys.paytableScatterPaysText1)
        })), s.add(new Sys.Element({
            tag: "div",
            style: "margin-top: 20px;",
            class: "warlords-paytable-text",
            textContent: Services.languageManager.getText(Language.Keys.paytableScatterPaysText2)
        }));
        var n = a.add(new Sys.Element({
            tag: "div",
            style: "text-align: center; float: left; margin-left: 0px;",
            class: "warlords-paytable-col-2"
        }));
        n.add(new Sys.Element({
            tag: "img",
            src: t.paytableScatterPaysSYM4.baseTexture.source.src
        })), n.add(new Sys.Element({
            tag: "img",
            style: "margin-left: -60px;",
            src: t.paytableScatterPaysSYM5.baseTexture.source.src
        })), n.add(new Sys.Element({
            tag: "img",
            style: "margin-top: -80px;",
            src: t.paytableScatterPaysSYM6.baseTexture.source.src
        })), n.add(new Sys.Element({
            tag: "img",
            style: "margin-left: -60px; margin-top: -80px;",
            src: t.paytableScatterPaysSYM7.baseTexture.source.src
        }));
        var l = a.add(new Sys.Element({
                tag: "div",
                class: "warlords-paytable_symbolBetlineValues"
            })),
            r = l.add(new Sys.Element({
                tag: "ul",
                class: "warlords-paytable_symbolBetlines scatter-pays"
            })),
            o = l.add(new Sys.Element({
                tag: "ul",
                class: "warlords-paytable_symbolValues"
            })),
            i = [{
                from: 3,
                value: 6
            }, {
                from: 4,
                value: 10
            }, {
                from: 5,
                value: 20
            }, {
                from: 6,
                value: 40
            }, {
                from: 7,
                value: 80
            }, {
                from: 8,
                value: 160
            }, {
                from: 9,
                value: 320
            }, {
                from: 10,
                value: 640
            }, {
                from: 11,
                value: 960
            }, {
                from: 12,
                value: 1440
            }, {
                from: 13,
                value: 2160
            }, {
                from: 14,
                value: 3240
            }, {
                from: 15,
                value: 4860
            }, {
                from: 16,
                value: "6000"
            }, {
                from: 17,
                value: "7000"
            }, {
                from: 18,
                value: "14 000"
            }, {
                from: 19,
                value: "28 000"
            }, {
                from: 20,
                value: "40 000"
            }, {
                from: 21,
                value: "60 000"
            }, {
                from: 22,
                value: "80 000"
            }, {
                from: 23,
                value: "110 000"
            }, {
                from: 24,
                value: "150 000"
            }, {
                from: 25,
                value: "170 000"
            }, {
                from: 26,
                value: "180 000"
            }, {
                from: 27,
                value: "200 000"
            }];
        i.sort(function(e, a) {
            return a.from - e.from
        });
        for (var d = -1; ++d < i.length;) {
            var g = i[d],
                c = g.from < 16,
                y = c ? "#e4312e" : "#fdc131",
                S = c ? "#c4d0df" : "#fff";
            Sys.isDefined(g.value) && (r.add(new Sys.Element({
                tag: "li",
                textContent: g.from,
                style: "color: " + y + "; text-align: right"
            })), o.add(new Sys.Element({
                tag: "li",
                textContent: g.value,
                style: "color: " + S + ";"
            })))
        }
    },
    createShieldWall: function() {
        var e = this,
            a = e.createSection(Services.languageManager.getText(Language.Keys.paytableShieldWallHeader)),
            t = Resources.readData("animationImages");
        a.add(new Sys.Element({
            tag: "div",
            style: "text-align: center;",
            class: "warlords-paytable-col-3"
        })).add(new Sys.Element({
            tag: "img",
            src: t.paytableShieldWall.baseTexture.source.src
        })), a.add(new Sys.Element({
            tag: "div",
            class: "warlords-paytable-col-3"
        })).add(new Sys.Element({
            tag: "div",
            style: "margin-top: 20px;",
            class: "warlords-paytable-text",
            textContent: Services.languageManager.getText(Language.Keys.paytableShieldWallText1)
        }))
    },
    createRaidSpins: function() {
        var e = this,
            a = e.createSection(Services.languageManager.getText(Language.Keys.paytableRaidSpinsHeader)),
            t = Resources.readData("animationImages");
        a.add(new Sys.Element({
            tag: "div",
            style: "text-align: center;",
            class: "warlords-paytable-col-3"
        })).add(new Sys.Element({
            tag: "img",
            src: t.paytableRaidSpins.baseTexture.source.src
        }));
        var s = a.add(new Sys.Element({
            tag: "div",
            class: "warlords-paytable-col-3"
        }));
        s.add(new Sys.Element({
            tag: "div",
            style: "margin-top: 20px;",
            class: "warlords-paytable-text",
            textContent: Services.languageManager.getText(Language.Keys.paytableRaidSpinsText1)
        })), s.add(new Sys.Element({
            tag: "div",
            style: "margin-top: 20px;",
            class: "warlords-paytable-text",
            textContent: Services.languageManager.getText(Language.Keys.paytableRaidSpinsText2)
        })), s.add(new Sys.Element({
            tag: "div",
            style: "margin-top: 20px;",
            class: "warlords-paytable-text",
            textContent: Services.languageManager.getText(Language.Keys.paytableRaidSpinsText3)
        }))
    },
    createBetways: function() {
        var e = this,
            a = e.createSection(Services.languageManager.getText(Language.Keys.paytableBetwayHeader)),
            t = Resources.readData("animationImages");
        a.add(new Sys.Element({
            tag: "div",
            class: "warlords-paytable-col-3"
        })).add(new Sys.Element({
            tag: "div",
            style: "margin-top: 20px;",
            class: "warlords-paytable-text",
            textContent: Services.languageManager.getText(Language.Keys.paytableBetwayText1)
        })), a.add(new Sys.Element({
            tag: "div",
            style: "text-align: center;",
            class: "warlords-paytable-col-3"
        })).add(new Sys.Element({
            tag: "img",
            src: t.paytableBetways.baseTexture.source.src
        }))
    },
    createSection: function(e) {
        var a = this,
            t = new Sys.Element({
                tag: "div",
                class: "warlords-paytable-section"
            });
        t.add(new Sys.Element({
            tag: "div",
            class: a.SECTION_CSS + " " + a.SECTION_SEPARATOR_URI
        })), t.add(new Sys.Element({
            tag: "div",
            textContent: e,
            class: a.HEADING_CSS
        }));
        var s = t.add(new Sys.Element({
            tag: "div",
            class: "warlords-paytable-content"
        }));
        return ++a.sectionCount, a.container.add(t), s
    }
}, Vikings.PaytableBaseView = Sys.extend(Interface.PaytableBaseView, Vikings.PaytableBaseView, "Vikings.PaytableBaseView");
Sys.ns("Vikings"), Vikings.PaytableDesktopView = {
    SYMBOL_WIDTH: 150,
    SYMBOL_HEIGHT: 150,
    LABEL_BOTTOM_MARGIN: 75,
    PAYTABLE_CENTER: 350,
    PAYTABLE_CONTENT_X: 60,
    AFTER_TEXT_MARGIN: 200,
    PARAGRAPH_MARGIN: 15,
    PAYTABLE_CONTENT_MARGIN_LEFT: 60,
    components: [],
    paytableSections: [],
    constructor: function() {
        Vikings.PaytableDesktopView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var e = this,
            t = Game.stage.view.animationManager.getLayer("userInterface");
        e.button = new Interface.utils.PIXIButton("paytableButtonUp", "paytableButtonDown", "paytableButtonOver", "paytableButtonDisabled"), e.button.id = "paytableButton", e.button.clickCallback = e.onButtonClick.bind(e), e.button.moveToPosition(pixiGenericSlot.Positions.PAYTABLE_BUTTON), t.addChild(e.button), e.animationsReady = !0, this.createAndAddPaytable(t, this.components), this.setupScroller(this.components.paytable, this.components), this.addPaytableContent(this.components.scroller), e.fireEvent("view:addToContainer", "settingsWindow", {
            title: "",
            content: e.container
        }), Services.storage.storeData("paytable.numberOfPages", 7)
    },
    setUpContent: function() {
        var e = this;
        e.model.readData("disabled") || e.enable(), e.hide()
    },
    createAndAddPaytable: function(e, t) {
        var a, n, i = new Component.Component;
        Game.PIXIFactory.createAndAddSprite("paytableBackground", i), a = Game.PIXIFactory.createAndAddText(Services.languageManager.getText(Language.Keys.paytable_uc), Game.TextStyles.PAYTABLE_TITLE, i, new PIXI.Point(640, 5), new PIXI.Point(.5, 0)), n = Game.PIXIFactory.createAndAddSprite("paytableSlider", i), n.x = 1088, n.y = 117, Game.PIXIFactory.createAndAddSprite("paytableLineTop", i, new PIXI.Point(146.5, 40)), Game.PIXIFactory.createAndAddSprite("paytableLineBottom", i, new PIXI.Point(146.5, 540)), i.addChild(a), t.paytable = i, e.addChild(i), i.hide()
    },
    setupScroller: function(e, t) {
        var a = new Vikings.PIXIScrollContainer(490);
        a.y = 50, a.x = 146.5, a.setScrollBarSize(5), a.forceWidth(987), a.setBottomPadding(300), e.addChild(a);
        var n = new Interface.utils.PIXIButton("paytableExitButton", "paytableExitButton", "paytableExitButtonHover", "paytableExitButton");
        n.clickCallback = this.onButtonClick.bind(this), n.moveToPosition({
            position: new PIXI.Point(1094, 75),
            anchorPoint: new PIXI.Point(.5, .5)
        }), e.addChild(n);
        var i = Game.PIXIFactory.createTexture("paytableScrollBar"),
            o = Game.PIXIFactory.createSprite(i);
        a.useScrollBarSprite(o), t.scroller = a
    },
    addPaytableContent: function(e) {
        var t = new PIXI.Container;
        t.x = this.PAYTABLE_CONTENT_X, this.addPayoutInfoSection(), this.addScatterSection(), this.addHotSpotSection(), this.addScatterPaysSection(), this.addShieldWallSection(), this.addRaidSpinsSection(), this.addBetwaySection();
        for (var a = 0; a < this.paytableSections.length; ++a) this.paytableSections[a].y = this.getSectionY(a), t.addChild(this.paytableSections[a]);
        e.addChild(t)
    },
    addPayoutInfoSection: function() {
        var e = new PIXI.Container,
            t = new Component.PaytableLabel(Services.languageManager.getText(Language.Keys.paytablePayoutValuesHeader), this.PAYTABLE_CENTER - 20, 0);
        t.init(), e.addChild(t), this.createPayoutInfo("SYM3", 270, 0, e), this.createPayoutInfo("SYM4-STACKED-1", 110, 200, e), this.createPayoutInfo("SYM5-STACKED-1", 470, 200, e), this.createPayoutInfo("SYM6-STACKED-1", 110, 500, e), this.createPayoutInfo("SYM7-STACKED-1", 470, 500, e), this.createPayoutInfo("SYM8", 0, 800, e), this.createPayoutInfo("SYM9", 280, 800, e), this.createPayoutInfo("SYM10", 560, 800, e), this.createPayoutInfo("SYM11", 110, 1e3, e), this.createPayoutInfo("SYM12", 470, 1e3, e), e.sectionHeight = 1350, this.paytableSections.push(e)
    },
    createPayoutInfo: function(e, t, a, n, i, o) {
        var s = e;
        e.contains("STACKED") && (s = e.substr(0, 4)), i = i || this.model.getCondensedInfo(s);
        var r = new Component.Payout(e, i, t, a + this.LABEL_BOTTOM_MARGIN, o);
        return r.init(), n.addChild(r), r
    },
    addScatterSection: function() {
        var e = new PIXI.Container,
            t = new Component.PaytableLabel(Services.languageManager.getText(Language.Keys.paytableScatterHeader), this.PAYTABLE_CENTER + 10, 0);
        t.init(), e.addChild(t), Game.PIXIFactory.createAndAddSprite("paytableScatter", e, new PIXI.Point(this.PAYTABLE_CONTENT_MARGIN_LEFT, this.LABEL_BOTTOM_MARGIN - 25));
        var a = this.addText([Services.languageManager.getText(Language.Keys.paytableScatterText1)], 600, 140, this.LABEL_BOTTOM_MARGIN + 85, e, {
            align: "center"
        });
        a += this.AFTER_TEXT_MARGIN, e.sectionHeight = 450 < a ? a : 450, this.paytableSections.push(e)
    },
    addHotSpotSection: function() {
        var e = new PIXI.Container,
            t = new Component.PaytableLabel(Services.languageManager.getText(Language.Keys.paytableHotSpotHeader), this.PAYTABLE_CENTER + 5, 0);
        t.init(), e.addChild(t), Game.PIXIFactory.createAndAddSprite("paytableHotSpot", e, new PIXI.Point(this.PAYTABLE_CONTENT_MARGIN_LEFT + 50, this.LABEL_BOTTOM_MARGIN + 20));
        var a = this.addText([Services.languageManager.getText(Language.Keys.paytableHotSpotText1), Services.languageManager.getText(Language.Keys.paytableHotSpotText2), Services.languageManager.getText(Language.Keys.paytableHotSpotText3), Services.languageManager.getText(Language.Keys.paytableHotSpotText4)], 700, 320, this.LABEL_BOTTOM_MARGIN + 20, e);
        a += this.AFTER_TEXT_MARGIN, e.sectionHeight = 550 < a ? a : 550, this.paytableSections.push(e)
    },
    addScatterPaysSection: function() {
        var e = new PIXI.Container,
            t = Game.PIXIFactory.createAndAddSprite("paytableScatterPaysHeader", e, new PIXI.Point(this.PAYTABLE_CENTER - 65, -35));
        e.addChild(t);
        var a = this.addText([Services.languageManager.getText(Language.Keys.paytableScatterPaysText1), Services.languageManager.getText(Language.Keys.paytableScatterPaysText2)], 1200, 0, this.LABEL_BOTTOM_MARGIN + 20, e, {
            align: "center"
        });
        Game.PIXIFactory.createAndAddSprite("paytableScatterPaysSYM4", e, new PIXI.Point(this.PAYTABLE_CONTENT_MARGIN_LEFT, this.LABEL_BOTTOM_MARGIN + a + 70)), Game.PIXIFactory.createAndAddSprite("paytableScatterPaysSYM5", e, new PIXI.Point(this.PAYTABLE_CONTENT_MARGIN_LEFT + 200, this.LABEL_BOTTOM_MARGIN + a + 70)), Game.PIXIFactory.createAndAddSprite("paytableScatterPaysSYM6", e, new PIXI.Point(this.PAYTABLE_CONTENT_MARGIN_LEFT, this.LABEL_BOTTOM_MARGIN + a + 70 + 380 + -40)), Game.PIXIFactory.createAndAddSprite("paytableScatterPaysSYM7", e, new PIXI.Point(this.PAYTABLE_CONTENT_MARGIN_LEFT + 200, this.LABEL_BOTTOM_MARGIN + a + 70 + 380 + -40));
        for (var n = [{
                from: 3,
                value: 6
            }, {
                from: 4,
                value: 10
            }, {
                from: 5,
                value: 20
            }, {
                from: 6,
                value: 40
            }, {
                from: 7,
                value: 80
            }, {
                from: 8,
                value: 160
            }, {
                from: 9,
                value: 320
            }, {
                from: 10,
                value: 640
            }, {
                from: 11,
                value: 960
            }, {
                from: 12,
                value: "1 440"
            }, {
                from: 13,
                value: "2 160"
            }, {
                from: 14,
                value: "3 240"
            }, {
                from: 15,
                value: "4 860"
            }, {
                from: 16,
                value: "6 000"
            }, {
                from: 17,
                value: "7 000"
            }, {
                from: 18,
                value: "14 000"
            }, {
                from: 19,
                value: "28 000"
            }, {
                from: 20,
                value: "40 000"
            }, {
                from: 21,
                value: "60 000"
            }, {
                from: 22,
                value: "80 000"
            }, {
                from: 23,
                value: "110 000"
            }, {
                from: 24,
                value: "150 000"
            }, {
                from: 25,
                value: "170 000"
            }, {
                from: 26,
                value: "180 000"
            }, {
                from: 27,
                value: "200 000"
            }], i = {
                1: 143,
                2: 128,
                3: 113,
                5: 90,
                6: 75,
                7: 60
            }, o = this.createPayoutInfo("", 400, this.LABEL_BOTTOM_MARGIN + 150, e, n, i), s = 3; s < 22; ++s) 21 === s ? o.payoutLabels[s].x = 10 : 11 === s ? o.payoutLabels[s].x = 20 : s < 10 ? o.payoutLabels[s].x = 20 : s < 20 && (o.payoutLabels[s].x = 10);
        a += this.AFTER_TEXT_MARGIN, e.sectionHeight = 1220 < a ? a : 1220, this.paytableSections.push(e)
    },
    addShieldWallSection: function() {
        var e = new PIXI.Container,
            t = new Component.PaytableLabel(Services.languageManager.getText(Language.Keys.paytableShieldWallHeader), this.PAYTABLE_CENTER - 10, 0);
        t.init(), e.addChild(t), Game.PIXIFactory.createAndAddSprite("paytableShieldWall", e, new PIXI.Point(this.PAYTABLE_CONTENT_MARGIN_LEFT - 20, this.LABEL_BOTTOM_MARGIN - 20));
        var a = this.addText([Services.languageManager.getText(Language.Keys.paytableShieldWallText1)], 550, 470, this.LABEL_BOTTOM_MARGIN + 30, e);
        a += this.AFTER_TEXT_MARGIN, e.sectionHeight = 440 < a ? a : 440, this.paytableSections.push(e)
    },
    addRaidSpinsSection: function() {
        var e = new PIXI.Container,
            t = new Component.PaytableLabel(Services.languageManager.getText(Language.Keys.paytableRaidSpinsHeader), this.PAYTABLE_CENTER + 40, 0);
        t.init(), e.addChild(t), Game.PIXIFactory.createAndAddSprite("paytableRaidSpins", e, new PIXI.Point(213, this.LABEL_BOTTOM_MARGIN + 20));
        var a = this.addText([Services.languageManager.getText(Language.Keys.paytableRaidSpinsText1), Services.languageManager.getText(Language.Keys.paytableRaidSpinsText2), Services.languageManager.getText(Language.Keys.paytableRaidSpinsText3)], 1280, this.PAYTABLE_CONTENT_MARGIN_LEFT, this.LABEL_BOTTOM_MARGIN + 400, e);
        a += this.AFTER_TEXT_MARGIN + 400, e.sectionHeight = 600 < a ? a : 600, this.paytableSections.push(e)
    },
    addBetwaySection: function() {
        var e = new PIXI.Container,
            t = new Component.PaytableLabel(Services.languageManager.getText(Language.Keys.paytableBetwayHeader), this.PAYTABLE_CENTER + 50, 0);
        t.init(), e.addChild(t);
        var a = this.addText([Services.languageManager.getText(Language.Keys.paytableBetwayText1)], 1280, 0, this.LABEL_BOTTOM_MARGIN, e, {
            align: "center"
        });
        Game.PIXIFactory.createAndAddSprite("paytableBetways", e, new PIXI.Point(200, this.LABEL_BOTTOM_MARGIN + a + 20));
        var n = this.addText([Services.languageManager.getText(Language.Keys.paytableBottomText1), Services.languageManager.getText(Language.Keys.paytableBottomText2), Vikings.Strings.legalLine], 1280, 0, this.LABEL_BOTTOM_MARGIN + 200, e, {
            align: "center",
            fontSize: "27px"
        });
        n += this.AFTER_TEXT_MARGIN, e.sectionHeight = 500 < n ? n : 500, this.paytableSections.push(e)
    },
    addText: function(e, t, a, n, i, o) {
        for (var s = 0, r = 0; r < e.length; ++r) {
            var l = new Component.TextArea(e[r], t, a, n + s, o);
            l.init(), i.addChild(l), s += .6 * l.height + this.PARAGRAPH_MARGIN
        }
        return s
    },
    getSectionY: function(e) {
        for (var t = 0, a = 0; a < e; ++a) t += this.paytableSections[a].sectionHeight;
        return t
    },
    show: function() {
        this.components.paytable.show()
    },
    hide: function() {
        this.components.paytable && this.components.paytable.hide()
    },
    onButtonClick: function() {
        this.model.readData("showing") ? this.fireEvent("view:hideRequest") : this.fireEvent("view:showRequest"), this.fireEvent("view:buttonClicked")
    },
    enableButton: function() {
        this.hidden || this.enable("buttonDisableRequest")
    },
    disableButton: function() {
        this.hidden || this.disable("buttonDisableRequest")
    },
    showButton: function() {
        this.animationsReady && (this.button.visible = !0, this.hidden = !1)
    },
    hideButton: function() {
        this.animationsReady && (this.button.visible = !1, this.hidden = !0)
    },
    enable: function(e) {
        var t;
        this.animationsReady && (this.model.removeProperty("buttonDisabled", e), t = this.model.hasProperty("disabled"), this.button.setEnabled(!1 === t))
    },
    disable: function(e) {
        this.animationsReady && (this.model.addProperty("buttonDisabled", e), this.button.setEnabled(!1))
    }
}, Vikings.PaytableDesktopView = Sys.extend(Interface.PaytableDesktopView, Vikings.PaytableDesktopView, "Vikings.PaytableDesktopView");
Sys.ns("Vikings"), Vikings.PaytableController = {
    constructor: function() {
        Vikings.PaytableController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "request:paytable.forward": e.onForwardRequest,
            "request:paytable.backward": e.onBackwardRequest,
            "notify:responseParser.paytableResponseParsed": e.onPaytableResponse,
            "notify:animationManager.allImagesLoaded": this.view.initAnimations.bind(this.view),
            "view:pageSwitch": e.fireEvent.bind(e, "notify:paytable.pageSwitched"),
            "notify:gameModeChanged": e.onGameModeChanged,
            "notify:spinButton.clicked": e.onHideRequest,
            "request:gameSettings.close": e.onHideRequest,
            "notify:spin.AllIsStopped": e.onHideRequest,
            "view:hideSpinButton": e.hideSpinButton,
            "view:showSpinButton": e.showSpinButton,
            "view:buttonClicked": this.fireEvent.bind(this, "request:buttonClickSound")
        }), Interface.PaytableController.superclass.setupEvents.apply(e, arguments)
    },
    hideSpinButton: function() {
        this.fireEvent("request:spinButton.hide")
    },
    showSpinButton: function() {
        this.fireEvent("request:spinButton.show")
    },
    onHideRequest: function() {
        var e = this,
            t = e.model.readData("currentContainer");
        e.model.readData("showing") && (Sys.isDefined(t) ? (e.fireEvent("request:" + t + ".closeChild", e.MODULE_NAME), e.view.hide()) : e.view.hide()), e.model.storeData("showing", !1), Services.storage.storeData(e.MODULE_NAME + ".showing", !1), this.fireEvent("notify:paytable.closed")
    },
    show: function(e) {
        var t = this;
        t.model.readData("showing") || (t.model.storeData("showing", !0), Services.storage.storeData(t.MODULE_NAME + ".showing", !0), t.fireEvent("notify:" + t.MODULE_NAME + ".shown"), t.view.show(e), Sys.isTouchDevice && t.startListeningToUserInput())
    },
    onPaytableResponse: function(e) {
        this.model.processPaytableResponse(e);
        var t = this.model.readData("initAnimationsCalled"),
            n = this.model.readData("contentCreated");
        t && !1 === n && this.view.setUpContent()
    }
}, Vikings.PaytableController = Sys.extend(Interface.PaytableController, Vikings.PaytableController, "Vikings.PaytableController");
Sys.ns("Vikings"), Vikings.PaytableModel = {
    constructor: function() {
        Vikings.PaytableModel.superclass.constructor.apply(this, arguments)
    },
    processPaytableResponse: function(e) {
        Vikings.PaytableModel.superclass.processPaytableResponse.apply(this, arguments), this.storeData("receivedPaytableResponse", !0)
    },
    setupData: function() {
        Vikings.PaytableModel.superclass.setupData.apply(this, arguments), this.storeData("receivedPaytableResponse", !1), this.storeData("initAnimationsCalled", !1), this.storeData("contentCreated", !1)
    }
}, Vikings.PaytableModel = Sys.extend(Interface.PaytableModel, Vikings.PaytableModel, "Vikings.PaytableModel");
Sys.ns("Vikings"), Vikings.SoundSettingsController = {
    constructor: function() {
        Vikings.SoundSettingsController.superclass.constructor.apply(this, arguments)
    },
    onUserAction: function(n, t) {
        Vikings.SoundSettingsController.superclass.onUserAction.apply(this, arguments), "splashOn" === n && Services.settingsManager.storeSetting("showFeatureSplash", t, !0)
    },
    onSettingChanged: function(n, t) {
        Vikings.SoundSettingsController.superclass.onSettingChanged.apply(this, arguments), "showFeatureSplash" === n && "function" == typeof this.view.updateFeatureSplash && this.view.updateFeatureSplash(t)
    }
}, Vikings.SoundSettingsController = Sys.extend(Interface.SoundSettingsController, Vikings.SoundSettingsController, "Vikings.SoundSettingsController");
Sys.ns("Vikings"), Vikings.SoundSettingsModel = {
    constructor: function() {
        Vikings.SoundSettingsModel.superclass.constructor.apply(this, arguments)
    },
    setupData: function() {
        Vikings.SoundSettingsModel.superclass.setupData.apply(this, arguments), this.initData({
            key: "showFeatureSplash",
            defaultValue: !0,
            settingsManager: !0,
            localStorage: !0
        })
    }
}, Vikings.SoundSettingsModel = Sys.extend(Interface.SoundSettingsModel, Vikings.SoundSettingsModel, "Vikings.SoundSettingsModel");
Sys.ns("Vikings"), Vikings.SoundSettingsBaseView = {
    constructor: function() {
        Vikings.SoundSettingsBaseView.superclass.constructor.apply(this, arguments)
    },
    setUpContent: function() {
        Vikings.SoundSettingsBaseView.superclass.setUpContent.apply(this, arguments), this.addFeatureSplashToggle()
    },
    addFeatureSplashToggle: function() {
        this.featureSplashOnOffContainer = this.container.add(new Sys.Element({
            id: "soundSettings_soundSettings",
            tag: "div",
            cls: this.SECTION_CSS
        })), this.featureSplashOnOff = new Interface.utils.ToggleSwitch({
            id: "featureSplashOnOff",
            title: Services.languageManager.getText(Language.Keys.setting_introScreeGame),
            callback: this.onSettingsControllerChanged.bind(this, "splashOn")
        }), this.featureSplashOnOffContainer.add(this.featureSplashOnOff.getContainer()), this.subComponents.push(this.featureSplashOnOff), this.featureSplashOnOff.enable(), this.updateFeatureSplash(Services.settingsManager.getSetting("showFeatureSplash"))
    },
    updateFeatureSplash: function(e) {
        this.featureSplashOnOff.toggle(e)
    }
}, Vikings.SoundSettingsBaseView = Sys.extend(Interface.SoundSettingsBaseView, Vikings.SoundSettingsBaseView, "Vikings.SoundSettingsBaseView");
Core.ResourceLoaderView.prototype.init = function(e) {
    this.model = e.model, this.MODULE_NAME = e.name, this.setupEvents()
};
var Model = {};
Model.Win = {
    INITIAL_BET: 20,
    FIRST_WIN: "firstWin",
    SECOND_WIN: "secondWin",
    _scatterPays: [],
    getType: function(s) {
        return this._type && !s || (s = s || this._serverResponse, s.wins && s.wins.winType ? this._type = s.wins.winType : this._type = "noWin"), this._type
    },
    getTotalCents: function(s) {
        return (void 0 === this._totalCents || s) && (s = s || this._serverResponse, s.wins && s.wins.centsTotal ? this._totalCents = s.wins.centsTotal : this._totalCents = 0), this._totalCents
    },
    getTotalCoins: function(s) {
        return (void 0 === this._totalCoins || s) && (s = s || this._serverResponse, s.wins && s.wins.coinsTotal ? this._totalCoins = s.wins.coinsTotal : this._totalCoins = 0), this._totalCoins
    },
    getCurrentCents: function(s) {
        return (void 0 === this._currentCents || s) && (s = s || this._serverResponse, s.wins && s.wins.cents ? this._currentCents = s.wins.cents : this._currentCents = 0), this._currentCents
    },
    getCurrentCoins: function(s) {
        return (void 0 === this._currentCoins || s) && (s = s || this._serverResponse, s.wins && s.wins.coins ? this._currentCoins = s.wins.coins : this._currentCoins = 0), this._currentCoins
    },
    getFreeSpinsWon: function(s) {
        return (void 0 === this._freeSpinsWon || s) && (s = s || this._serverResponse, s.wins && s.wins.freespins ? this._freeSpinsWon = s.wins.freespins : this._freeSpinsWon = 0), this._freeSpinsWon
    },
    getTotalFreeSpins: function(s) {
        return (void 0 === this._totalFreeSpins || s) && (s = s || this._serverResponse, s.freespins && s.freespins.total ? this._totalFreeSpins = s.freespins.total : this._totalFreeSpins = 0), this._totalFreeSpins
    },
    getFreeSpinsLeft: function(s) {
        return (void 0 === this._freeSpinsLeft || s) && (s = s || this._serverResponse, s.freespins && s.freespins.left ? this._freeSpinsLeft = s.freespins.left : this._freeSpinsLeft = 0), this._freeSpinsLeft
    },
    isWin: function(s) {
        return s = s || this._serverResponse, Boolean(s && s.wins && s.wins.coins)
    },
    getBetways: function(s, i) {
        var e = [];
        if (i = i || this._serverResponse, i.wins && i.wins.winSituations)
            for (var n = i.wins.winSituations, t = 0; t < n.length; ++t) {
                var o = n[t];
                o.wins.coins && s !== this.FIRST_WIN && s !== this.SECOND_WIN ? e.push({
                    cents: o.wins.cents,
                    coins: o.wins.coins,
                    positions: o.positions
                }) : o.wins.coins && s === this.FIRST_WIN && !o.secondWin ? e.push({
                    cents: o.wins.cents,
                    coins: o.wins.coins,
                    positions: o.positions
                }) : o.wins.coins && s === this.SECOND_WIN && o.secondWin && e.push({
                    cents: o.wins.cents,
                    coins: o.wins.coins,
                    positions: o.positions
                })
            }
        return e.sort(function(s, i) {
            return i.coins - s.coins
        }), e
    },
    getScatterPays: function(s) {
        if ((0 === this._scatterPays.length || s) && (this._scatterPays.length = 0, s = s || this._serverResponse, Model.Action.isScatterPay(s) && s.wins && s.wins.winSituations))
            for (var i = s.wins.winSituations, e = 0; e < i.length; ++e)
                for (var n = i[e], t = 0; t < n.positions.length; ++t) {
                    var o = n.positions[t].reelIndex,
                        r = n.positions[t].symbolIndex;
                    if (Model.Symbol.isMedium(Model.Reels.getSymbolName(o, r).substr(0, 4))) {
                        this._scatterPays.push({
                            cents: n.wins.cents,
                            coins: n.wins.coins,
                            positions: n.positions
                        });
                        break
                    }
                }
        return this._scatterPays
    },
    getWinTypeBasedOnCoins: function(s) {
        var i, e = Services.settingsManager.getSetting("betLevel"),
            n = this.INITIAL_BET * e,
            t = Resources.readData("config").winTypes;
        this._winLevels || (this._winLevels = {
            mediumWin: t.mediumWin.from * n,
            largeWin: t.largeWin.from * n,
            bigWin: t.bigWin.from * n,
            megaWin: t.megaWin.from * n,
            superMegaWin: t.superMegaWin.from * n
        });
        var o = this._winLevels;
        switch (!0) {
            case 0 === s:
                i = "noWin";
                break;
            case s > 0 && s < o.mediumWin:
                i = "smallWin";
                break;
            case s < o.largeWin:
                i = "mediumWin";
                break;
            case s < o.bigWin:
                i = "largeWin";
                break;
            case s < o.megaWin:
                i = "bigWin";
                break;
            case s < o.superMegaWin:
                i = "megaWin";
                break;
            case s >= o.superMegaWin:
                i = "superMegaWin";
                break;
            default:
                i = "noWin"
        }
        return i
    },
    getTotalCoinsFromBetways: function(s) {
        for (var i = 0, e = 0; e < s.length; ++e) i += s[e].coins;
        return i
    },
    getTotalCentsFromBetways: function(s) {
        for (var i = 0, e = 0; e < s.length; ++e) i += s[e].cents;
        return i
    },
    resetData: function() {
        this._type = void 0, this._totalCents = void 0, this._totalCoins = void 0, this._currentCents = void 0, this._currentCoins = void 0, this._totalFreeSpins = void 0, this._freeSpinsLeft = void 0, this._serverResponse = void 0, this._scatterPays.length = 0, this._winLevels = void 0
    },
    save: function(s) {
        this._serverResponse = s
    }
};
Model.Reels = {
    _overlaySymbols: [],
    _stackedBottomIndices: [],
    _scatters: [],
    getReels: function(e) {
        return e = e || this._serverResponse, e ? e.reelInfo : []
    },
    getSymbolName: function(e, s, t, o) {
        s = s > 0 ? s : 0, o = o || this._serverResponse;
        var n = o.reelInfo;
        return t = void 0 === t || t, t && n[e].overlaySymbols[s] ? n[e].overlaySymbols[s] : n[e].symbols[s]
    },
    containsReelData: function() {
        return void 0 !== this._serverResponse
    },
    getOverlaySymbols: function(e) {
        if (0 === this._overlaySymbols.length || e) {
            e = e || this._serverResponse, this._overlaySymbols.length = 0;
            for (var s = e.reelInfo, t = 0; t < s.length; ++t)
                for (var o = s[t].overlaySymbols, n = 0; n < o.length; ++n) o[n] && this._overlaySymbols.push({
                    reelIndex: t,
                    symbolIndex: n,
                    symbolName: o[n]
                })
        }
        return this._overlaySymbols
    },
    symbolToSpinSetSymbol: function(e, s, t) {
        var o = {};
        return o[e] = {}, o[e][s] = t, o
    },
    symbolToSpinShowHideSymbol: function(e, s) {
        var t = {};
        return t[e] = [s], t
    },
    getStackedSymbolName: function(e, s, t, o) {
        o = o || this._serverResponse;
        var n = this.getSymbolName(e, s, t, o);
        if (!n.contains("-"))
            for (var r = this.getStackedBottoms(o), l = 0; l < r.length; ++l)
                if (r[l].reelIndex === e) {
                    var a = r[l].symbolIndex,
                        i = 3 - (a - s);
                    i >= 1 && i <= 3 && (n += "-STACKED-" + i)
                } return n
    },
    getStackedBottoms: function(e) {
        if (0 === this._stackedBottomIndices.length || e) {
            e = e || this._serverResponse;
            var s = e.stackbottom;
            this._stackedBottomIndices.length = 0;
            for (var t in s) s.hasOwnProperty(t) && this._stackedBottomIndices.push({
                reelIndex: s[t].reelindex,
                symbolIndex: s[t].rowindex,
                symbolName: s[t].symbol
            })
        }
        return this._stackedBottomIndices
    },
    getStackedBottom: function(e, s) {
        s = s || this._serverResponse;
        var t = s.stackbottom;
        for (var o in t)
            if (t.hasOwnProperty(o) && t[o].reelindex === e) return {
                reelIndex: t[o].reelindex,
                symbolIndex: t[o].rowindex,
                symbolName: t[o].symbol
            }
    },
    overlayToHotSpotSymbols: function(e, s) {
        s = s || this._serverResponse;
        for (var t = [], o = 0; o < e.length; ++o) {
            var n = e[o],
                r = {
                    reelIndex: n.reelIndex,
                    symbolIndex: n.symbolIndex,
                    symbolName: n.symbolName
                },
                l = "basic" === s.currentGameState ? 2 : 4;
            n.symbolName.contains("STACKED") ? (n.symbolName.contains("-3") ? (r.symbolIndex -= 2, t.push(r)) : n.symbolName.contains("-2") && n.symbolIndex === l ? (r.symbolIndex -= 1, t.push(r)) : n.symbolName.contains("-1") && n.symbolIndex === l && t.push(r), r.stackedSymbol = !0, r.symbolName = r.symbolName.substr(0, 12)) : t.push(r)
        }
        return t
    },
    getReelSymbolNames: function(e, s, t) {
        t = t || this._serverResponse;
        for (var o = [], n = 0; n < t.reelInfo[e].symbols.length; ++n) o.push(Model.Reels.getSymbolName(e, n, s, t));
        return o
    },
    getScatters: function(e) {
        if (0 === this._scatters.length || e) {
            e = e || this._serverResponse, this._scatters.length = 0;
            for (var s = 0; s < 5; ++s)
                for (var t = 0; t < 3; ++t)
                    if ("SYM0" === Model.Reels.getSymbolName(s, t, !1, e)) {
                        this._scatters.push({
                            reelIndex: s,
                            symbolIndex: t
                        });
                        break
                    }
        }
        return this._scatters
    },
    getArrayWithoutStacked: function(e) {
        for (var s = e.slice(), t = 0; t < s.length; ++t) s[t].contains("STACKED") && (s[t] = s[t].substr(0, 4));
        return s
    },
    resetData: function() {
        this._serverResponse = void 0, this._overlaySymbols.length = 0, this._stackedBottomIndices.length = 0, this._scatters.length = 0
    },
    save: function(e) {
        this._serverResponse = e
    }
};
Model.Action = {
    getCurrent: function(e) {
        return e = e || this._serverResponse, e.clientaction
    },
    getNext: function(e) {
        return e = e || this._serverResponse, e.nextaction
    },
    getGameState: function(e) {
        return e = e || this._serverResponse, e.currentGameState
    },
    isHotSpot: function(e) {
        return e = e || this._serverResponse, !!e.feature && e.feature.hotspot
    },
    isShieldWall: function(e) {
        return e = e || this._serverResponse, e.feature && e.feature.shieldwall && e.feature.shieldwall.activated
    },
    isScatterPay: function(e) {
        return e = e || this._serverResponse, !!e.feature && e.feature.hotspot
    },
    isRestore: function(e) {
        return e = e || this._serverResponse, !0 === e.restore
    },
    resetData: function() {
        this._serverResponse = void 0
    },
    save: function(e) {
        this._serverResponse = e
    }
};
Model.ShieldWall = {
    getData: function(e) {
        if (e = e || this._serverResponse, e.feature && e.feature.shieldwall) {
            var t = e.feature.shieldwall;
            return {
                reelIndex: t.reelindex,
                symbolIndex: t.rowindex,
                width: t.width,
                height: t.height,
                symbolName: t.symbol
            }
        }
    },
    isSymbolInside: function(e, t, i) {
        var l = Model.ShieldWall.getData(i);
        if (!l) return !1;
        var r = l.reelIndex + l.width - 1,
            n = l.symbolIndex + l.height - 1;
        return e >= l.reelIndex && e <= r && t >= l.symbolIndex && t <= n
    },
    resetData: function() {
        this._serverResponse = void 0
    },
    save: function(e) {
        this._serverResponse = e
    }
};
Model.Scatter = {
    getAttentionAnimationName: function(n) {
        return "land" + (n + 1)
    },
    getFireAnimationName: function(n) {
        return "land" + n + "Loop"
    }
};
Model.HotSpot = {
    getSymbolName: function(e) {
        var o = Model.Reels.getOverlaySymbols(e)[0];
        return o ? o.symbolName.substr(0, 4) : void 0
    }
};
Model.Math = {
    getInterpolationValue: function(e, r, a, s) {
        var t, n, i, o, p, h, u = "linear";
        switch (Sys.isDefined(s) && Sys.isDefined(s.support) && (t = s.support, u = Sys.isArray(t) ? 2 === t.length ? "cubic" : "nNumber" : Sys.isDefined(s.type) ? s.type : "bezier"), a > 1 ? a = 1 : a < 0 && (a = 0), u) {
            case "linear":
                n = e + a * (r - e);
                break;
            case "bezier":
                n = (1 - a) * (1 - a) * e + 2 * a * (1 - a) * t + a * a * r;
                break;
            case "cubic":
                n = Math.pow(1 - a, 3) * e + 3 * a * Math.pow(1 - a, 2) * t[0] + 3 * Math.pow(a, 2) * (1 - a) * t[1] + Math.pow(a, 3) * r;
                break;
            case "nNumber":
                for (p = t.length, h = [], h.push(e), i = 0; i < p; i++) h.push(t[i]);
                for (h.push(r), p = h.length, o = 1; o < p; o++)
                    for (i = 0; i < p - o; i++) h[i] = (1 - a) * h[i] + a * h[i + 1];
                n = h[0];
                break;
            case "none":
                n = 1 === a ? r : e
        }
        return n
    }
};
Model.Symbol = {
    HIGH: "SYM3",
    MEDIUM: ["SYM4", "SYM5", "SYM6", "SYM7"],
    SCATTER: "SYM0",
    STACKED: "STACKED",
    isHigh: function(t) {
        return t === this.HIGH
    },
    isScatter: function(t) {
        return t === this.SCATTER
    },
    isStacked: function(t) {
        return t.contains(this.STACKED)
    },
    isMedium: function(t) {
        return this.MEDIUM.contains(t)
    }
};
var Handler = {};
Handler.Betway = function(t) {
    this._betwayLightUpSpeed = t.betwayLightUpSpeed, this._toggleSustain = t.toggleSustain, this._toggleDelay = t.toggleDelay, this.SCATTER_PAY_SYMBOLS = ["SYM4", "SYM5", "SYM6", "SYM7"]
}, Handler.Betway.prototype.init = function() {
    this._timeouts = [], this._intervals = [], this.toggling = !1, this.occupiedPositions = {}
}, Handler.Betway.prototype.showAll = function(t, i) {
    for (var e = 0; e < t.length; ++e) this.show(t[e], i, !0);
    this.occupiedPositions = {}
}, Handler.Betway.prototype.toggle = function(t, i) {
    this.toggling = !0;
    var e = t.length,
        s = 1;
    this.onToggle(t[0]), this.show(t[0], i), this._intervals.push(Vikings.Utils.setGameInterval(function() {
        this._paused || (s === e && (s = 0), this.onToggle(t[s]), this._timeouts.push(Vikings.Utils.setGameTimeout(function() {
            this.show(t[s++], i)
        }.bind(this), this._toggleDelay)))
    }.bind(this), this._toggleSustain))
}, Handler.Betway.prototype.show = function(t, i, e) {
    for (var s = t.positions, o = 0; o < s.length; ++o) {
        var n = s[o].reelIndex,
            h = s[o].symbolIndex,
            l = Model.Reels.getSymbolName(n, h).substr(0, 4);
        this.occupiedPositions[n + "" + h] || (i && this.SCATTER_PAY_SYMBOLS.contains(l) ? this.onSymbolLightUp(s[o].reelIndex, s[o].symbolIndex, e) : this._timeouts.push(Vikings.Utils.setGameTimeout(this.onSymbolLightUp.bind(this, s[o].reelIndex, s[o].symbolIndex, e), this._betwayLightUpSpeed * o)), this.toggling || (this.occupiedPositions[n + "" + h] = !0))
    }
}, Handler.Betway.prototype.stop = function() {
    var t;
    for (t = 0; t < this._intervals.length; ++t) Vikings.Utils.clearGameTimer(this._intervals[t]);
    for (t = 0; t < this._timeouts.length; ++t) Vikings.Utils.clearGameTimer(this._timeouts[t]);
    this._timeouts.length = 0, this._intervals.length = 0, this.toggling = !1
}, Handler.Betway.prototype.pause = function() {
    this._paused = !0
}, Handler.Betway.prototype.unpause = function() {
    this._paused = !1
}, Handler.Betway.prototype.onSymbolLightUp = function(t, i) {}, Handler.Betway.prototype.onToggle = function(t) {};
Handler.HotSpotToggler = function(e) {
    var t, n = e.delay;
    this.init = function() {
        t = []
    }, this.toggle = function(e) {
        var o = e.length,
            i = 1;
        this.onToggle(e[0].reelIndex, e[0].symbolIndex, e[0].symbolName), t.push(Vikings.Utils.setGameInterval(function() {
            if (i === o) this.onComplete(), this.stop();
            else {
                var t = e[i];
                this.onToggle(t.reelIndex, t.symbolIndex, t.symbolName), ++i
            }
        }.bind(this), n))
    }, this.toggleAll = function(e) {
        this.stop();
        for (var t = 0; t < e.length; ++t) {
            var n = e[t];
            this.onToggle(n.reelIndex, n.symbolIndex, n.symbolName), this.onComplete()
        }
    }, this.stop = function() {
        for (var e = 0; e < t.length; ++e) Vikings.Utils.clearGameTimer(t[e]);
        t.length = 0
    }, this.onToggle = function(e, t, n) {}, this.onComplete = function() {}
};
var Controller = {};
Sys.ns("Vikings"), Vikings.Controller = {
    init: function(i) {
        Vikings.Controller.superclass.init.apply(this, arguments), this.originalView = this.view;
        for (var s in this.views) this.views.hasOwnProperty(s) && (this.views[s] = new this.views[s]({}))
    },
    initViews: function() {
        for (var i in this.views) this.views.hasOwnProperty(i) && (this.views[i].initAnimations(), this.views[i].hide());
        this.view.initOnce()
    },
    switchView: function(i) {
        this.view.reset(), this.view.hide(), this.view = i, this.view.show(), this.view.originalView = this.originalView
    }
}, Vikings.Controller = Sys.extend(Core.Controller, Vikings.Controller, "Vikings.Controller");
Core.View.prototype.addComponent = function(o, t) {
    return "function" == typeof o.init && o.init(), t.addChild(o), o
}, Core.View.prototype.hide = function() {
    for (var o in this) this.hasOwnProperty(o) && this[o] instanceof Component.Component && this[o].hide()
}, Core.View.prototype.show = function() {
    for (var o in this) this.hasOwnProperty(o) && this[o] instanceof Component.Component && this[o].show()
}, Core.View.prototype.reset = function() {}, Core.View.prototype.initOnce = function() {};
Controller.Model = {
    getDefaultMVCClasses: function() {
        return {
            controller: Controller.ModelController
        }
    }
}, Controller.Model = Sys.extend(Core.Module, Controller.Model, "Controller.Model");
Controller.ModelController = {
    data: {},
    constructor: function() {
        Controller.ModelController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:spin.spinAnimationStarted": this.resetData,
            "notify:responseParser.responseParsed": this.onServerResponse
        })
    },
    resetData: function() {
        for (var e in Model)
            if (Model.hasOwnProperty(e)) {
                var o = Model[e];
                o.resetData && o.resetData()
            }
    },
    onServerResponse: function(e) {
        this.saveServerResponse(e), this.overwriteReelInfo(Model.Reels.getReels())
    },
    saveServerResponse: function(e) {
        for (var o in Model)
            if (Model.hasOwnProperty(o)) {
                var r = Model[o];
                r.save && r.save(e)
            }
    },
    overwriteReelInfo: function(e) {
        var o = Resources.readData("config").reelSets.basic,
            r = "init" === Model.Action.getCurrent() && "spin" === Model.Action.getNext(),
            t = Sys.isDefined(o.initial) && Sys.isDefined(o.initial.symbols);
        if (r && t) this.overwriteReelInfoWithInitial(e, o.initial.symbols);
        else
            for (var n = 0; n < e.length; ++n) {
                var s = e[n].symbols,
                    l = e[n].overlaySymbols;
                this.renameSymbolsIfNeeded(n, s, !1), Model.Action.isHotSpot() && this.renameSymbolsIfNeeded(n, l, !0)
            }
    },
    renameSymbolsIfNeeded: function(e, o, r) {
        for (var t = 0; t < o.length; ++t) o[t] && (o[t] = Model.Reels.getStackedSymbolName(e, t, r))
    },
    overwriteReelInfoWithInitial: function(e, o) {
        for (var r = 0; r < e.length; ++r) e[r].symbols = o[r]
    }
}, Controller.ModelController = Sys.extend(Core.Controller, Controller.ModelController, "Controller.ModelController");
Sys.ns("Vikings"), Vikings.AnimationPreloader = {
    constructor: function() {
        Vikings.AnimationPreloader.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            view: Vikings.AnimationPreloaderView,
            controller: Vikings.AnimationPreloaderController
        }
    }
}, Vikings.AnimationPreloader = Sys.extend(Core.Module, Vikings.AnimationPreloader, "Vikings.AnimationPreloader");
Sys.ns("Vikings"), Vikings.AnimationPreloaderView = {
    ANIMATIONS_TO_PRELOAD: ["symbol", "raidSpinOutroBg"],
    constructor: function() {
        Vikings.AnimationPreloaderView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var i = Resources.readData("spines");
        for (var n in i)
            if (i.hasOwnProperty(n) && (this.ANIMATIONS_TO_PRELOAD.contains(n) || 0 === this.ANIMATIONS_TO_PRELOAD.length)) {
                for (var a = i[n].animations, e = [], t = 0; t < a.length; ++t) e.push(a[t].name);
                this.preloadAnimation(n, e)
            }
    },
    preloadAnimation: function(i, n) {
        var a = Game.stage.view.animationManager.getLayer("preload");
        a.animation = Game.PIXIFactory.createAndAddSpineAnimation(i, a);
        for (var e = 0; e < n.length; ++e) a.animation.state.setAnimation(0, n[e], !1)
    }
}, Vikings.AnimationPreloaderView = Sys.extend(Core.View, Vikings.AnimationPreloaderView, "Vikings.AnimationPreloaderView");
Sys.ns("Vikings"), Vikings.AnimationPreloaderController = {
    constructor: function() {
        Vikings.AnimationPreloaderController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:animationManager.allImagesLoaded": this.view.initAnimations.bind(this.view)
        })
    }
}, Vikings.AnimationPreloaderController = Sys.extend(Core.Controller, Vikings.AnimationPreloaderController, "Vikings.AnimationPreloaderController");
Sys.ns("Vikings"), Vikings.Environment = {
    getDefaultMVCClasses: function() {
        return {
            controller: Vikings.EnvironmentController,
            view: Vikings.EnvironmentView
        }
    }
}, Vikings.Environment = Sys.extend(Core.Module, Vikings.Environment, "Vikings.Environment");
Sys.ns("Vikings"),
    function() {
        var n, i;
        Vikings.EnvironmentView = {
            components: {},
            isWinning: !1,
            constructor: function() {
                Vikings.EnvironmentView.superclass.constructor.apply(this, arguments)
            },
            initAnimations: function() {
                var e = Game.stage.view.animationManager,
                    o = e.getLayer("middleground"),
                    t = e.getLayer("foreground");
                n = Game.PIXIFactory.createSpriteWithTexture("fsReels"), i = e.getLayer("background"), this.reelLayer = e.getLayer("reel"), Object.assign(this.reelLayer, Component.Util.Fader.prototype), Sys.apply(this.components, {
                    background: this.addComponent(new Component.Background, i),
                    raidSpinsBG: this.addComponent(new Component.RaidSpinsBG, i),
                    middleground: this.addComponent(new Component.Middleground, o),
                    foreground: this.addComponent(new Component.Foreground, t),
                    raven: this.addComponent(new Component.RavenBG, t)
                });
                for (var s in this.components) this.components.hasOwnProperty(s) && (this.components[s].y = 720);
                this.components.raidSpinsBG.x = 640, this.components.raidSpinsBG.y = 360, this.components.raven.onAction = function(n) {
                    this.fireEvent("view:ravenAction", n)
                }.bind(this), this.components.background.onLightning = function(n) {
                    this.fireEvent("view:lightning", n)
                }.bind(this), this.idle(!0), Model.Action.isRestore() || (this.reelLayer.alpha = 0, this.components.raidSpinsBG.hide())
            },
            intro: function() {
                this.components.background.intro(this.showReels.bind(this), this.reelsShowing.bind(this)), this.components.middleground.intro(), this.components.foreground.intro(), this.components.raven.intro()
            },
            skipIntro: function() {
                this.showReels(), this.reelsShowing(), this.idle()
            },
            showReels: function() {
                this.fireEvent("view:reelFadeInStart"), this.reelLayer.fadeIn(1e3)
            },
            reelsShowing: function() {
                this.fireEvent("view:reelFadeInComplete")
            },
            idle: function(n) {
                this.components.middleground.idle(), this.components.raidSpinsBG.idle(), this.components.foreground.idle(n), this.components.raven.idle()
            },
            transToRS: function() {
                this.components.middleground.transToRS(), this.components.foreground.transToRS(), this.components.raven.transToRS(), this.reelLayer.fadeOut(200), this.components.background.transToRS().then(this.onTransitionComplete.bind(this))
            },
            onTransitionComplete: function() {
                this.fireEvent("view:transitionComplete")
            },
            switchToRS: function() {
                i.addChild(n), n.x = 215, n.y = 16, this.components.background.hide(), this.components.middleground.hide(), this.components.foreground.hide(), this.components.raven.hide(), this.components.raidSpinsBG.show(), this.components.raidSpinsBG.playEffects(), this.reelLayer.fadeIn(200)
            },
            switchToMG: function() {
                i.removeChild(n), this.components.background.resetTrans(), this.components.background.show(), this.components.background.fadeOutWinBG(), this.components.middleground.resetTrans(), this.components.middleground.show(), this.components.foreground.resetTrans(), this.components.foreground.show(), this.components.raven.resetTrans(), this.components.raven.show(), this.components.raidSpinsBG.hide()
            },
            win: function() {
                this.isWinning = !0, this.components.background.win(), this.components.middleground.win(), this.components.foreground.win()
            },
            stopWin: function() {
                this.isWinning && (this.components.background.fadeOutWinBG(), this.idle(), this.isWinning = !1)
            }
        }, Vikings.EnvironmentView = Sys.extend(Core.View, Vikings.EnvironmentView, "Vikings.EnvironmentView")
    }();
Sys.ns("Vikings"), Vikings.EnvironmentController = {
    NON_EFFECT_WINS: ["smallWin", "mediumWin"],
    data: {},
    constructor: function() {
        Vikings.EnvironmentController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "notify:stateHandler.enteringWinState": this.onEnteringWinState,
            "notify:winBanner.complete": this.onWinBannerComplete,
            "notify:featureSplash.transitionStart": this.view.intro.bind(this.view),
            "notify:featureSplash.transitionSkipped": this.view.skipIntro.bind(this.view),
            "request:environment.startRSTransition": this.onRSTransitionRequest,
            "request:environment.startMGTransition": this.onMGTransitionRequest,
            "request:environment.switchToRS": this.onRSSwitchRequest,
            "request:background.enterDarkenedBG": this.view.win.bind(this.view),
            "request:background.exitDarkenedBG": this.view.stopWin.bind(this.view),
            "notify:platform.orientationChanged": this.onOrientationChanged,
            "view:reelFadeInStart": this.fireEvent.bind(this, "notify:environment.reelFadeInStarted"),
            "view:transitionComplete": this.onTransitionToRSComplete,
            "view:reelFadeInComplete": this.onReelFadeInComplete,
            "view:ravenAction": this.onRavenAction,
            "view:lightning": this.fireEvent.bind(this, "notify:environment.lightning")
        })
    },
    initAnimations: function() {
        this.view.initAnimations(), Utils.Platform.isPortrait() || (document.getElementById("pixiGenericSlot_bottomBg_RS").style.display = "none")
    },
    onOrientationChanged: function(n) {
        var i = document.getElementById("pixiGenericSlot_bottomBg_RS");
        n === Utils.Platform.PORTRAIT ? i.style.display = "block" : i.style.display = "none"
    },
    onRavenAction: function(n) {
        this.ravenAllowedToScream && this.fireEvent("notify:environment.ravenAction", n)
    },
    onServerResponse: function(n) {
        this.data.winType = Model.Win.getType()
    },
    onEnteringWinState: function() {
        this.NON_EFFECT_WINS.contains(this.data.winType) || this.view.win()
    },
    onWinBannerComplete: function() {
        this.NON_EFFECT_WINS.contains(this.data.winType) || Vikings.Utils.setGameTimeout(function() {
            this.view.stopWin()
        }.bind(this), 500)
    },
    onRSTransitionRequest: function() {
        this.ravenAllowedToScream = !1, this.view.transToRS()
    },
    onMGTransitionRequest: function() {
        this.ravenAllowedToScream = !0, this.view.switchToMG()
    },
    onRSSwitchRequest: function() {
        this.view.switchToRS()
    },
    onTransitionToRSComplete: function() {
        this.view.switchToRS(), this.fireEvent("notify:environment.transitionToRSComplete")
    },
    onReelFadeInComplete: function() {
        this.ravenAllowedToScream = !0, this.fireEvent("notify:environment.introComplete")
    }
}, Vikings.EnvironmentController = Sys.extend(Core.Controller, Vikings.EnvironmentController, "Vikings.EnvironmentController");
Component.Background = function() {
    var n, t;
    Component.Component.apply(this, arguments), Vikings.Utils.addAsConstants(this, {
        BACKGROUND_SPINE: "background",
        BACKGROUND_SPINE_IDLE: "backgroundIdle",
        BACKGROUND_SPINE_INTRO: "backgroundIntro",
        BACKGROUND_SPINE_WIN_INTRO: "backgroundWinAnimation_intro",
        BACKGROUND_SPINE_WIN_LOOP: "backgroundWinAnimation_loop",
        BACKGROUND_SPINE_WIN_OUTRO: "backgroundWinAnimation_outro",
        BACKGROUND_SPINE_RAID_SPINS: "background_raidspin"
    }), this.fadeOutWinBG = function() {
        var t = this.BACKGROUND_SPINE_IDLE;
        n.setAnimation(0, this.BACKGROUND_SPINE_WIN_OUTRO, !1), n.tracks[0].listener = {
            complete: function() {
                n.setAnimation(0, t, !0)
            }
        }
    }, this.init = function() {
        t = Game.PIXIFactory.createAndAddSpineAnimation(this.BACKGROUND_SPINE, this), n = t.state
    }, this.intro = function(t, i) {
        return n.setAnimation(1, this.BACKGROUND_SPINE_INTRO), new Promise(function(o) {
            n.tracks[1].listener = {
                complete: o,
                event: function(n, o) {
                    "fadeInStart" === o.data.name ? t() : "fadeIn" === o.data.name && i()
                }
            }
        })
    }, this.idle = function() {
        n.setAnimation(0, this.BACKGROUND_SPINE_IDLE, !0)
    }, this.transToRS = function() {
        return n.setAnimation(0, this.BACKGROUND_SPINE_RAID_SPINS), new Promise(function(t) {
            n.tracks[0].listener = {
                event: function(n, i) {
                    "raidscreenIntro_transition" === i.data.name && t(), i.data.name.contains("blixt") && this.onLightning(i.data.name)
                }.bind(this)
            }
        }.bind(this))
    }, this.resetTrans = function() {
        n.clearTrack(0), t.lastTime = null, t.skeleton.setToSetupPose()
    }, this.win = function() {
        n.setAnimation(0, this.BACKGROUND_SPINE_WIN_INTRO, !1), n.tracks[0].listener = {
            complete: function() {
                this.winLoop()
            }.bind(this)
        }
    }, this.winLoop = function() {
        n.setAnimation(0, this.BACKGROUND_SPINE_WIN_LOOP, !0), n.tracks[0].listener = {
            event: function(n, t) {
                t.data.name.contains("blixt") && this.onLightning(t.data.name)
            }.bind(this)
        }
    }, this.onLightning = function(n) {}
}, Component.Background.prototype = Object.create(Component.Component.prototype);
Component.Middleground = function() {
    var t;
    Component.Component.apply(this, arguments), Vikings.Utils.addAsConstants(this, {
        MIDDLEGROUND_SPINE: "middleground",
        MIDDLEGROUND_SPINE_IDLE: "mg_Idle",
        MIDDLEGROUND_SPINE_INTRO: "mg_Intro",
        MIDDLEGROUND_SPINE_WIN: "mg_WinAnimation",
        MIDDLEGROUND_SPINE_RAID_SPINS: "mg_raidspin"
    }), this.init = function() {
        t = Game.PIXIFactory.createAndAddSpineAnimation(this.MIDDLEGROUND_SPINE, this), t.stateData.setMix(this.MIDDLEGROUND_SPINE_IDLE, this.MIDDLEGROUND_SPINE_WIN, .2), t.stateData.setMix(this.MIDDLEGROUND_SPINE_WIN, this.MIDDLEGROUND_SPINE_IDLE, 1)
    }, this.intro = function() {
        return t.state.setAnimation(1, this.MIDDLEGROUND_SPINE_INTRO), new Promise(function(n) {
            t.state.tracks[1].listener = {
                complete: function() {
                    t.state.clearTrack(1), n()
                }
            }
        })
    }, this.idle = function() {
        t.state.setAnimation(0, this.MIDDLEGROUND_SPINE_IDLE, !0)
    }, this.transToRS = function() {
        t.state.setAnimation(1, this.MIDDLEGROUND_SPINE_RAID_SPINS)
    }, this.resetTrans = function() {
        t.state.clearTrack(1), t.lastTime = null, t.skeleton.setToSetupPose()
    }, this.win = function() {
        t.state.setAnimation(0, this.MIDDLEGROUND_SPINE_WIN, !0)
    }
}, Component.Middleground.prototype = Object.create(Component.Component.prototype);
Component.Foreground = function() {
    var t;
    Vikings.Utils.addAsConstants(this, {
        FOREGROUND_SPINE: "foreground",
        FOREGROUND_SPINE_INTRO: "backgroundIntro",
        FOREGROUND_SPINE_IDLE: "backgroundIdle",
        FOREGROUND_SPINE_IDLE_FOG: "backgroundIdleFog",
        FOREGROUND_SPINE_WIN: "backgroundWinAnimation",
        FOREGROUND_SPINE_RAID_SPINS: "background_raidspin"
    }), Component.Component.apply(this, arguments), this.init = function() {
        t = Game.PIXIFactory.createAndAddSpineAnimation(this.FOREGROUND_SPINE, this), t.stateData.setMix(this.FOREGROUND_SPINE_IDLE, this.FOREGROUND_SPINE_WIN, .2), t.stateData.setMix(this.FOREGROUND_SPINE_WIN, this.FOREGROUND_SPINE_IDLE, 1)
    }, this.idle = function(n) {
        t.state.setAnimation(0, this.FOREGROUND_SPINE_IDLE, !0), n && t.state.setAnimation(1, this.FOREGROUND_SPINE_IDLE_FOG, !0)
    }, this.intro = function() {
        return t.state.setAnimation(2, this.FOREGROUND_SPINE_INTRO), new Promise(function(n) {
            t.state.tracks[2].listener = {
                complete: function() {
                    t.state.clearTrack(2), n()
                }
            }
        })
    }, this.transToRS = function() {
        t.state.setAnimation(2, this.FOREGROUND_SPINE_RAID_SPINS)
    }, this.resetTrans = function() {
        t.state.clearTrack(2), t.lastTime = null, t.skeleton.setToSetupPose()
    }, this.win = function() {
        t.state.setAnimation(0, this.FOREGROUND_SPINE_WIN, !0)
    }
}, Component.Foreground.prototype = Object.create(Component.Component.prototype);
Component.RavenBG = function() {
    var t, i;
    Vikings.Utils.addAsConstants(this, {
        RAVEN_SPINE: "ravenBG",
        IDLE_ANIMATION: "idle",
        INTRO_ANIMATION: "idle_splashscreen",
        RAID_SPINS_ANIMATION: "idle_raidscreen",
        POOP_ANIMATION: "pooping",
        PEEP_ANIMATION: "peeping",
        CROW_ANIMATION: "crowing",
        TURN_ANIMATION: "headturn",
        WING_FLAP_1_ANIMATION: "wingflap1",
        WING_FLAP_2_ANIMATION: "wingflap2"
    }), Component.Component.apply(this, arguments), this.init = function() {
        t = Game.PIXIFactory.createAndAddSpineAnimation(this.RAVEN_SPINE, this)
    }, this.idle = function() {
        t.state.setAnimation(0, this.IDLE_ANIMATION, !0);
        var s = Vikings.Utils.randomInt(1e4, 2e4);
        i = Vikings.Utils.setGameTimeout(this._doAction.bind(this), s)
    }, this.intro = function() {
        t.state.setAnimation(0, this.INTRO_ANIMATION), t.state.tracks[0].listener = {
            complete: this.idle.bind(this)
        }
    }, this.transToRS = function() {
        Vikings.Utils.clearGameTimer(i), t.state.setAnimation(1, this.RAID_SPINS_ANIMATION)
    }, this.resetTrans = function() {
        t.state.clearTrack(1), t.lastTime = null, t.skeleton.setToSetupPose()
    }, this.poop = function() {
        Vikings.Utils.clearGameTimer(i), t.state.setAnimation(0, this.POOP_ANIMATION), t.state.tracks[0].listener = {
            complete: this.idle.bind(this)
        }
    }, this.crow = function() {
        Vikings.Utils.clearGameTimer(i), t.state.setAnimation(0, this.CROW_ANIMATION), t.state.tracks[0].listener = {
            complete: this.idle.bind(this)
        }
    }, this.peep = function() {
        Vikings.Utils.clearGameTimer(i), t.state.setAnimation(0, this.PEEP_ANIMATION), t.state.tracks[0].listener = {
            complete: this.idle.bind(this)
        }
    }, this.turn = function() {
        Vikings.Utils.clearGameTimer(i), t.state.setAnimation(0, this.TURN_ANIMATION), t.state.tracks[0].listener = {
            complete: this.idle.bind(this)
        }
    }, this.flap1 = function() {
        Vikings.Utils.clearGameTimer(i), t.state.setAnimation(0, this.WING_FLAP_1_ANIMATION), t.state.tracks[0].listener = {
            complete: this.idle.bind(this)
        }
    }, this.flap2 = function() {
        Vikings.Utils.clearGameTimer(i), t.state.setAnimation(0, this.WING_FLAP_2_ANIMATION), t.state.tracks[0].listener = {
            complete: this.idle.bind(this)
        }
    }, this.onAction = function(t) {}, this._doAction = function() {
        var i, s = Vikings.Utils.randomInt(1, 44);
        1 === s ? i = this.POOP_ANIMATION : s <= 16 ? i = this.CROW_ANIMATION : s <= 26 ? i = this.TURN_ANIMATION : s <= 36 ? i = this.PEEP_ANIMATION : s <= 40 ? i = this.WING_FLAP_1_ANIMATION : s <= 44 && (i = this.WING_FLAP_2_ANIMATION), t.state.setAnimation(0, i), t.state.tracks[0].listener = {
            complete: this.idle.bind(this)
        }, this.onAction(i)
    }
}, Component.RavenBG.prototype = Component.Component.prototype;
Component.RaidSpinsBG = function() {
    function t(t) {
        i.stopEffect(t), i.resetEffect(t)
    }
    var n, e, i;
    Vikings.Utils.addAsConstants(this, {
        BACKGROUND_SPINE: "freeSpinBG",
        BACKGROUND_SPINE_IDLE: "bgAnim",
        SPARKS_POSITION: {
            x: 640,
            y: 370
        },
        SPARKS_POSITION_MOBILE_OFFETS: {
            x: -90,
            y: -180
        },
        BLACK_SMOKE_POSITION: {
            x: 1150,
            y: 340
        }
    }), Component.Component.apply(this, arguments), this.init = function() {
        var t = this.BLACK_SMOKE_POSITION,
            o = this.SPARKS_POSITION,
            s = this.SPARKS_POSITION_MOBILE_OFFETS,
            S = Environment.determineResolution().virtualToWindowScale;
        1 === S && (s = {
            x: 0,
            y: 0
        }), e = Game.PIXIFactory.createAndAddSpineAnimation(this.BACKGROUND_SPINE, this), n = e.state, i = new Neutrino.NeutrinoHandler, i.init(), i.createAndAddEffect("rsSparks", "rsSparks", this, new PIXI.Point(o.x + s.x, o.y + s.y)), i.createAndAddEffect("rsBlackSmoke", "rsBlackSmoke", this, new PIXI.Point(t.x * S, t.y * S))
    }, this.idle = function() {
        n.setAnimation(0, this.BACKGROUND_SPINE_IDLE, !0)
    }, this.playEffects = function() {
        i.playEffect("rsSparks"), i.playEffect("rsBlackSmoke")
    }, this.hide = function() {
        Component.Component.prototype.hide.call(this), t("rsSparks"), t("rsBlackSmoke")
    }
}, Component.RaidSpinsBG.prototype = Object.create(Component.Component.prototype);
! function() {
    function n() {
        var n = 0,
            t = 0;
        for (p = p || Game.PIXIFactory.createTextureFromSpineAtlas(g); n + t < w + S;) {
            var e = Math.random() < w / S;
            e && n >= w ? e = !1 : !e && t >= S && (e = !0);
            var a = d(e);
            e ? n++ : t++, G.push(a), f(e).addChild(a)
        }
    }

    function t() {
        F || C || (C = !0, window.setTimeout(function() {
            k = !0
        }, 4e3), I = 50, o())
    }

    function e(n) {
        F = "freespin" === Model.Action.getCurrent()
    }

    function a() {
        k = !1, C = !1
    }

    function i() {
        P = 0, x = !1
    }

    function o() {
        Vikings.Utils.setGameTimeout(function() {
            for (var n = x ? 5 * y : y, t = 0; t < n; t++) r();
            C && o()
        }, Math.random() * m)
    }

    function r() {
        if (G.length > 0) {
            var n = u(),
                t = G.pop();
            t.x = n.x, t.y = n.y, t.running = !0
        }
    }

    function d(n) {
        var t = new PIXI.Sprite(p),
            e = .4 * Math.random() + .6,
            a = .4 * Math.random() + .6,
            i = n ? .3 * Math.random() + .5 : .45 * Math.random() + .15,
            o = u();
        return t.isForegroundSnow = n, t.anchor.set(.5), t.alpha = .3 * Math.random() + .7, t.rotation = Math.random(), t.rotationSpeed = Math.random() / 30, t.blowSpeed = Math.random(), t.dropSpeed = 2 * Math.random() + 1 * (n ? 3 : .7), t.x = o.x, t.y = o.y, t.height = t.height * a * i, t.width = t.width * e * i, t.windEffect = Math.random(), Game.stage.view.animationManager.addToAnimationLoop(t), t.running = !1, t.run = function() {
            s(t)
        }, t
    }

    function u() {
        var n = Math.random() * Environment.defaultVirtualResolutions.default.default.width + 50 - 50,
            t = -50;
        if (I > 10) {
            Math.random() < .9 && (t = Math.random() * Environment.defaultVirtualResolutions.default.default.height, n = -50)
        }
        return {
            x: n,
            y: t
        }
    }

    function f(n) {
        if (!f.fgContainer) {
            var t = Game.stage.view.animationManager.getLayer(h),
                e = Game.stage.view.animationManager.getLayer(v),
                a = {
                    position: !0,
                    rotation: !0
                };
            f.fgContainer = new PIXI.particles.ParticleContainer(w, a), f.bgContainer = new PIXI.particles.ParticleContainer(S, a), t.addChild(f.bgContainer), e.addChild(f.fgContainer)
        }
        return n ? f.fgContainer : f.bgContainer
    }

    function s(n) {
        l(n);
        var t = I > 0,
            e = I / 100,
            a = n.dropSpeed - (t ? e * (3 * Math.random()) : 0) * n.windEffect,
            i = n.blowSpeed + (t ? 20 * e : 0) * n.windEffect,
            o = n.rotationSpeed + (t ? 20 * e : 0);
        i = n.isForegroundSnow ? 4 * i : i, i = x ? i + .2 * i : i, a = C ? a : 3 * a, n.y += a, n.x += i, n.rotation += o
    }

    function l(n) {
        (n.y > Environment.defaultVirtualResolutions.default.default.height || n.x > Environment.defaultVirtualResolutions.default.default.width) && (n.running = !1, G.push(n))
    }

    function c() {
        var n = I <= 0 && Math.random() < M / 60;
        k && n && (I = 1, P = 50 * Math.random() + 30), I > P ? (I -= .5, I > 50 && I--, I = I < 0 ? 0 : I, P = 0) : I < P && (I++, I / P > .4 && I++, I / P > .7 && I++)
    }
    var p, m = 150,
        g = "snowParticle",
        h = "background",
        v = "particlesForeground",
        M = .1,
        w = function() {
            return Vikings.Utils.isWebGLSupported() ? Platform.isDesktopDevice ? 50 : 25 : 0
        }(),
        S = function() {
            return Vikings.Utils.isWebGLSupported() ? Platform.isDesktopDevice ? 300 : 100 : 0
        }(),
        y = function() {
            return Vikings.Utils.isWebGLSupported() ? Platform.isDesktopDevice ? 3 : 1 : 0
        }(),
        b = new Sys.Observable,
        C = !1,
        I = 0,
        P = 0,
        k = !1,
        x = !1,
        F = !1,
        G = [],
        V = new PIXI.ticker.Ticker;
    V.add(c), V.start(), b.on({
        "notify:animationManager.allImagesLoaded": n,
        "notify:responseParser.responseParsed": e,
        "notify:environment.reelFadeInStarted": t,
        "notify:bigWin.end": t,
        "notify:stateHandler.leavingFreeSpinOutroState": function() {
            F = !1, t()
        },
        "request:nearWin.start": function() {
            x = !0, I = 1, P = 500
        },
        "notify:spin.nearWinStopped": i,
        "notify:quickStopper.quickStop": i,
        "request:spinButton.enable": i,
        "notify:stateHandler.enteringFreeSpinIntroState": a,
        "notify:bigWin.start": a
    })
}();
! function() {
    function a() {
        var a = 0,
            n = 0;
        for (c = c || Game.PIXIFactory.createTextureFromSpineAtlas(p); a + n < m + v;) {
            var t = Math.random() < m / v;
            t && a >= m ? t = !1 : !t && n >= v && (t = !0);
            var e = r(t);
            t ? a++ : n++, y.push(e), s(t).addChild(e), e.visible = !1
        }
    }

    function n() {
        F || I || (I = !0, e())
    }

    function t() {
        I = !1
    }

    function e() {
        Vikings.Utils.setGameTimeout(function() {
            for (var a = h, n = 0; n < a; n++) i();
            I && e()
        }, Math.random() * d)
    }

    function i() {
        if (y.length > 0) {
            var a = o(),
                n = y.pop();
            n.x = a.x, n.y = a.y, n.alpha = 5 * Math.random() + 1, n.visible = !0, n.running = !0
        }
    }

    function r(a) {
        var n = new PIXI.Sprite(c),
            t = o();
        return n.sparkIsInFG = a, n.growFactor = 1, n.anchor.set(.5), n.dropSpeed = 2 * Math.random() + 3, n.x = t.x, n.y = t.y, n.scale.x = n.sparkIsInFG ? Math.random() / 2 : Math.random() / 4, n.scale.y = .75 * n.scale.x + Math.random() * n.scale.x * .5, n.originalXScale = n.scale.x, Game.stage.view.animationManager.addToAnimationLoop(n), n.running = !1, n.visible = !1, n.run = function() {
            l(n)
        }, n
    }

    function o() {
        return {
            x: Math.random() * Environment.defaultVirtualResolutions.default.default.width,
            y: -50
        }
    }

    function s(a) {
        if (!s.sparkFgContainer) {
            var n = Game.stage.view.animationManager.getLayer(g),
                t = Game.stage.view.animationManager.getLayer(f),
                e = {
                    position: !0,
                    tint: !0,
                    vertices: !0,
                    rotation: !1
                };
            s.sparkFgContainer = new PIXI.particles.ParticleContainer(m, e), s.sparkBgContainer = new PIXI.particles.ParticleContainer(v, e), n.addChild(s.sparkBgContainer), t.addChild(s.sparkFgContainer)
        }
        return a ? s.sparkFgContainer : s.sparkBgContainer
    }

    function l(a) {
        u(a);
        var n = a.dropSpeed * a.scale.x * 3 + (a.sparkIsInFG ? 1 : 0),
            t = a.sparkIsInFG ? .005 : .0025,
            e = a.sparkIsInFG ? .008 : .004;
        a.scale.x <= 0 && (a.growFactor = 1), a.scale.x >= a.originalXScale && (a.growFactor = -1), a.scale.x += t * a.growFactor, a.scale.y += e * a.growFactor, a.alpha += -.01, a.y += n
    }

    function u(a) {
        (a.y > Environment.defaultVirtualResolutions.default.default.height || a.x > Environment.defaultVirtualResolutions.default.default.width) && (a.visible = !1, a.running = !1, y.push(a))
    }
    var c, d = 150,
        p = "sparkRainParticle",
        g = "background",
        f = "particlesForeground",
        m = function() {
            return Vikings.Utils.isWebGLSupported() ? Platform.isDesktopDevice ? 100 : 50 : 0
        }(),
        v = function() {
            return Vikings.Utils.isWebGLSupported() ? Platform.isDesktopDevice ? 400 : 150 : 0
        }(),
        h = function() {
            return Vikings.Utils.isWebGLSupported() ? Platform.isDesktopDevice ? 10 : 3 : 0
        }(),
        k = new Sys.Observable,
        I = !1,
        F = !1,
        y = [];
    k.on({
        "notify:animationManager.allImagesLoaded": a,
        "notify:bigWin.start": n,
        "notify:bigWin.end": t
    })
}();
Sys.ns("Vikings"), Vikings.Win = {
    constructor: function() {
        Vikings.Win.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            win: {
                state: {
                    name: "Win",
                    execute: function(t) {},
                    waitEvents: {
                        "notify:winBanner.complete": !1,
                        "notify:symbolWin.complete": !1
                    }
                }
            },
            stopped: {
                queue: [function(t) {
                    this.controller.winCategory = "allWin", Model.Action.isShieldWall() && "freespin" === Model.Action.getGameState() && (this.controller.winCategory = Model.Win.FIRST_WIN, t.stateHandler.pushState(t.states.shieldWall));
                    var e = Model.Win.isWin() && "allWin" === this.controller.winCategory,
                        n = Model.Win.isWin() && Model.Win.getTotalCoinsFromBetways(Model.Win.getBetways(Model.Win.FIRST_WIN)) > 0;
                    e || n ? t.stateHandler.pushState(t.states.win) : this.controller.winCategory = "allWin", Model.Action.isShieldWall() && "basic" === Model.Action.getGameState() && t.stateHandler.pushState(t.states.shieldWall)
                }.bind(this)]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Vikings.WinController
        }
    }
}, Vikings.Win = Sys.extend(Core.Module, Vikings.Win, "Vikings.Win");
Sys.ns("Vikings"), Vikings.WinController = {
    data: {},
    constructor: function() {
        Vikings.WinController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:stateHandler.enteringWinState": this.onEnteringWinState
        })
    },
    onEnteringWinState: function() {
        var n, i, t;
        this.winCategory === Model.Win.FIRST_WIN || this.winCategory === Model.Win.SECOND_WIN ? (i = Model.Win.getTotalCoinsFromBetways(Model.Win.getBetways(this.winCategory)), t = Model.Win.getTotalCentsFromBetways(Model.Win.getBetways(this.winCategory)), "superMegaWin" !== (n = Model.Win.getWinTypeBasedOnCoins(i)) && "megaWin" !== n || (n = "bigWin")) : (i = Model.Win.getCurrentCoins(), t = Model.Win.getCurrentCents(), n = Model.Win.getType()), this.fireEvent("notify:win.showingWin", n, this.winCategory, i, t), this.winCategory === Model.Win.FIRST_WIN && (this.winCategory = Model.Win.SECOND_WIN)
    }
}, Vikings.WinController = Sys.extend(Core.Controller, Vikings.WinController, "Vikings.WinController");
Component.CoolDownSmoke = function(t) {
    var o, e;
    Vikings.Utils.addAsConstants(this, {
        SMOKE_ANIMATION_SUSTAIN: 1500
    }), Component.Component.apply(this, arguments), this.init = function() {
        o = new Neutrino.NeutrinoHandler, o.init(), e = o.createAndAddEffect("coolDown", "coolDown", this, t), this.hide()
    }, this.play = function() {
        this.show(), e.play(), Vikings.Utils.clearGameTimer(this.smokeTimeout), this.smokeTimeout = Vikings.Utils.setGameTimeout(function() {
            e.stop(), e.reset(), this.hide()
        }.bind(this), this.SMOKE_ANIMATION_SUSTAIN)
    }, this.hide = function() {
        Component.Component.prototype.hide.call(this), e.stop(), e.reset()
    }, this.reset = function() {
        e.reset()
    }
}, Component.CoolDownSmoke.prototype = Object.create(Component.Component.prototype);
Component.WinLabel = function() {
    Component.Component.apply(this, arguments), this.init = function() {
        Game.PIXIFactory.createAndAddText(Services.languageManager.getText(Language.Keys.winLabel), Game.TextStyles.WIN_LABEL, this)
    }
}, Component.WinLabel.prototype = Object.create(Component.Component.prototype);
Component.CoinShadow = function() {
    Component.Component.apply(this, arguments), this.init = function() {
        Game.PIXIFactory.createAndAddSprite("coinShadow", this)
    }
}, Component.CoinShadow.prototype = Object.create(Component.Component.prototype);
Component.CountUpSparks = function(t) {
    var e, n;
    Component.Component.apply(this, arguments), this.init = function() {
        e = new Neutrino.NeutrinoHandler, e.init(), n = e.createAndAddEffect("countUpSparks", "countUpSparks", this, t), this.hide()
    }, this.sparkle = function() {
        this.show(), n.play(), Vikings.Utils.clearGameTimer(this.sparkleTimeout), this.sparkleTimeout = Vikings.Utils.setGameTimeout(function() {
            n.stop(), n.reset(), this.hide()
        }.bind(this), 1500)
    }, this.hide = function() {
        Component.Component.prototype.hide.call(this), n.stop(), n.reset()
    }, this.setScale = function(t) {
        n.setScale(t, t)
    }, this.reset = function() {
        n.reset()
    }
}, Component.CountUpSparks.prototype = Object.create(Component.Component.prototype);
Sys.ns("Vikings"), Vikings.WinBanner = {
    constructor: function() {
        Vikings.WinBanner.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            view: Vikings.WinBannerView,
            controller: Vikings.WinBannerController
        }
    }
}, Vikings.WinBanner = Sys.extend(Core.Module, Vikings.WinBanner, "Vikings.WinBanner");
Sys.ns("Vikings"), Vikings.WinBannerView = {
    COUNTER_HIGH_ALPHA_STEP: .0016,
    COUNTER_MEDIUM_ALPHA_STEP: .014,
    COUNTER_POSITION: {
        x: 640,
        y: 400
    },
    COUNTER_DURATION: {
        smallWin: 375,
        mediumWin: 900,
        largeWin: 2e3,
        bigWin: 9e3,
        megaWin: 13e3,
        superMegaWin: 2e4
    },
    COUNTER_SCALE: {
        smallWin: 1.1,
        mediumWin: 1.15,
        largeWin: 1.2,
        bigWin: 2,
        megaWin: 2,
        superMegaWin: 2
    },
    COUNTER_SUSTAIN: {
        basic: 1500,
        freespin: 2e3
    },
    COUNTER_STEP_FACTOR: 1.0005,
    COUNTER_SUSTAIN_BIGWIN: 1e3,
    COUNTER_DURATION_FACTOR: 16,
    COUNTER_MOVE_TIMESTEP: .002,
    COUNTER_COOL_DOWN_TIME: 1e3,
    COUNTER_LOW_STYLE: Game.TextStyles.COIN_LOW,
    COUNTER_MEDIUM_STYLE: Game.TextStyles.COIN_MEDIUM,
    COUNTER_HIGH_STYLE: Game.TextStyles.COIN_HIGH,
    COUNTER_GLOW_STYLE: Game.TextStyles.COIN_GLOW,
    COUNTER_GLOW_INDEX: 0,
    COUNTER_LOW_INDEX: 1,
    COUNTER_MEDIUM_INDEX: 2,
    COUNTER_HIGH_INDEX: 3,
    COUNTER_SPARKS_SCALE: {
        smallWin: .4,
        mediumWin: .4,
        largeWin: .5,
        bigWin: 1,
        megaWin: 1,
        superMegaWin: 1
    },
    WIN_LABEL_POSITION: {
        x: "dynamic",
        y: 550
    },
    COOL_DOWN_SMOKE_POSITION: {
        x: 1170,
        y: 610
    },
    BIG_WIN_TYPE_CHANGES: ["megaWin", "superMegaWin"],
    constructor: function() {
        Vikings.WinBannerView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        this.components = {}, this.timeouts = [], this.prevCounterWidth = 0;
        var t = Game.stage.view.animationManager.getLayer("countUp"),
            e = Game.stage.view.animationManager.getLayer("coolDown");
        this.createAndAddCoinShadow(t, this.components), this.createAndAddCountUpSparks(t, this.components), this.createAndAddWinLabel(t, this.components), this.createAndAddCounter(t, this.components, [this.COUNTER_GLOW_STYLE, this.COUNTER_LOW_STYLE, this.COUNTER_MEDIUM_STYLE, this.COUNTER_HIGH_STYLE]), this.createAndAddCoolDownSmoke(e, this.components), this.updateShadowScale()
    },
    createAndAddCounter: function(t, e, i) {
        var n = new Component.MultiLayerCounter(4, "0123456789", i);
        Object.assign(n, Component.Util.Scale.prototype), t.addChild(n), e.counter = n, n.init(), this.updateCounterPosition(), n.onCounterUpdate = this.onCounterUpdate.bind(this), n.hide(), Object.assign(n.getTextLayer(this.COUNTER_MEDIUM_INDEX), Component.Util.Fader.prototype), Object.assign(n.getTextLayer(this.COUNTER_HIGH_INDEX), Component.Util.Fader.prototype), Object.assign(n.getTextLayer(this.COUNTER_GLOW_INDEX), Component.Util.Fader.prototype)
    },
    createAndAddCoinShadow: function(t, e) {
        var i = new Component.CoinShadow;
        t.addChild(i), i.init(), i.hide(), i.position.x = this.COUNTER_POSITION.x, i.position.y = this.COUNTER_POSITION.y, i.pivot.x = i.width / 2, i.pivot.y = i.height / 2, i.alpha = .75, e.coinShadow = i
    },
    createAndAddCountUpSparks: function(t, e) {
        var i = new Component.CountUpSparks(new PIXI.Point(this.COUNTER_POSITION.x, this.COUNTER_POSITION.y));
        i.init(), t.addChild(i), e.countUpSparks = i
    },
    createAndAddWinLabel: function(t, e) {
        var i = new Component.WinLabel;
        Object.assign(i, Component.Util.Fader.prototype), i.init(), t.addChild(i), e.winLabel = i, i.y = this.WIN_LABEL_POSITION.y, i.hide()
    },
    createAndAddCoolDownSmoke: function(t, e) {
        var i = new Component.CoolDownSmoke(new PIXI.Point(this.COOL_DOWN_SMOKE_POSITION.x - 140, this.COOL_DOWN_SMOKE_POSITION.y + 180));
        i.init(), t.addChild(i), e.coolDownSmoke = i
    },
    countUpWin: function(t, e) {
        if (this.components) {
            var i = this.components.counter,
                n = this.components.coinShadow,
                o = this.components.countUpSparks;
            i.getTextLayer(this.COUNTER_MEDIUM_INDEX).alpha = 0, i.getTextLayer(this.COUNTER_HIGH_INDEX).alpha = 0, i.getTextLayer(this.COUNTER_GLOW_INDEX).alpha = 1, o.setScale(this.COUNTER_SPARKS_SCALE[e]), this.countUpWinOnCounter(t, e), n.show()
        }
    },
    countUpWinOnCounter: function(t, e) {
        var i = this.components.counter,
            n = this.COUNTER_SCALE[e],
            o = Services.settingsManager.getSetting("betLevel"),
            a = this.COUNTER_DURATION_FACTOR * t / o;
        this.doNotBump = !1, i.setNumber(0), this.updateCounterPosition(), i.show(), i.abortCount(), i.count(t, a, 0, function(t) {
            return t *= this.COUNTER_STEP_FACTOR
        }.bind(this)).then(this.countUpComplete.bind(this, t, e)), i.timedScale(new PIXI.Point(n, n), a, new PIXI.Point(1, 1), function(t, e) {
            return [t *= this.COUNTER_STEP_FACTOR, e *= this.COUNTER_STEP_FACTOR]
        }.bind(this))
    },
    countUpComplete: function(t, e) {
        this.components.countUpSparks.sparkle(), this.fireEvent("view:onlyReset"), this.fireEvent("view:countUpComplete");
        var i = ["bigWin", "megaWin", "superMegaWin"].contains(e),
            n = i ? this.COUNTER_SUSTAIN_BIGWIN : 0;
        this.timeouts.push(Vikings.Utils.setGameTimeout(function() {
            this.showingTotalCoinsComplete()
        }.bind(this), this.COUNTER_SUSTAIN[Model.Action.getGameState()] + n)), i && this.bumpCounter(Model.Win.getWinTypeBasedOnCoins(t))
    },
    bumpCounter: function(t) {
        var e, i, n, o = this.components.counter;
        switch (t) {
            case "bigWin":
                i = 1.2, e = 1.5;
                break;
            case "megaWin":
                i = 1.5, e = 1.8;
                break;
            case "superMegaWin":
                i = 1.7, e = 2.2, n = Utils.Platform.isPortrait() ? 1.6 : 0
        }
        var a = n || this.COUNTER_SCALE[t],
            s = a * i,
            r = a * e;
        o.timedScale(new PIXI.Point(r, r), 75).then(function() {
            o.timedScale(new PIXI.Point(s, s), 150)
        })
    },
    bumpCounterOnLevel: function() {
        if (!this.doNotBump) {
            var t = this.components.counter,
                e = t.scale.x,
                i = e + .4 * e,
                n = e + .3 * e;
            t.updateEndScale(new PIXI.Point(100, 100));
            var o = Vikings.Utils.createAnimation(t.scale, "x", e, i, 75, 0, function() {
                    Game.stage.view.animationManager.removeFromAnimationLoop(o);
                    var e = Vikings.Utils.createAnimation(t.scale, "x", i, n, 150, 0, function() {
                        Game.stage.view.animationManager.removeFromAnimationLoop(e)
                    }).play()
                }).play(),
                a = Vikings.Utils.createAnimation(t.scale, "y", e, i, 75, 0, function() {
                    Game.stage.view.animationManager.removeFromAnimationLoop(a);
                    var e = Vikings.Utils.createAnimation(t.scale, "y", i, n, 150, 0, function() {
                        Game.stage.view.animationManager.removeFromAnimationLoop(e)
                    }).play()
                }).play()
        }
    },
    showingTotalCoinsComplete: function() {
        var t = this.components.coinShadow,
            e = this.components.countUpSparks;
        t.hide(), e.hide(), this.fireEvent("view:showingTotalCoinsComplete")
    },
    onCounterUpdate: function(t) {
        "bigWin" === Model.Win.getType() && this.checkForBigWinLevelUpdate(t), this.updateCounterPosition(), this.updateShadowScale();
        for (var e = this.components.counter.getTextLayer(this.COUNTER_GLOW_INDEX), i = 0; i < e.children.length; ++i) e.children[i].blendMode = PIXI.BLEND_MODES.ADD
    },
    checkForBigWinLevelUpdate: function(t) {
        var e = Model.Win.getWinTypeBasedOnCoins(t);
        e !== this.prevWinType && (this.fireEvent("view:winTypeChanged", e), this.BIG_WIN_TYPE_CHANGES.contains(e) && (this.components.countUpSparks.sparkle(), this.bumpCounterOnLevel())), this.prevWinType = e
    },
    updateCounterPosition: function() {
        var t = this.components.counter;
        t.x = this.COUNTER_POSITION.x, t.y = this.COUNTER_POSITION.y;
        var e = t.getWidth() / 2;
        e > this.prevCounterWidth && (t.pivot.x = e, t.pivot.y = t.getHeight() / 2, this.prevCounterWidth = e), t.getTextLayer(this.COUNTER_MEDIUM_INDEX).alpha += this.COUNTER_MEDIUM_ALPHA_STEP, t.getTextLayer(this.COUNTER_HIGH_INDEX).alpha += this.COUNTER_HIGH_ALPHA_STEP
    },
    updateShadowScale: function() {
        var t = this.components.counter,
            e = this.components.coinShadow;
        e.scale.x = .01 * this.prevCounterWidth * t.scale.x * .75, e.scale.y = .75 * t.scale.y
    },
    startAnimatingCounter: function(t, e, i, n, o, a, s) {
        o = !1, this.counterAnimation = {
            running: !0,
            run: function(t) {
                !1 === o && (o = t.time);
                var e = this.animateCounter(this.COUNTER_POSITION.x, this.COUNTER_POSITION.y, i, n, t.time, a, s, o);
                e.x === i && e.y === n && (Game.stage.view.animationManager.removeFromAnimationLoop(this.counterAnimation), this.counterMoveAnimationComplete())
            }.bind(this)
        }, Game.stage.view.animationManager.addToAnimationLoop(this.counterAnimation)
    },
    animateCounter: function(t, e, i, n, o, a, s, r) {
        var h = this.components.counter,
            c = (o - r) * this.COUNTER_MOVE_TIMESTEP;
        void 0 === t && (t = h.x), void 0 === e && (e = h.y);
        var p = Model.Math.getInterpolationValue(t, i, c, a),
            O = Model.Math.getInterpolationValue(e, n, c, s);
        return h.x = p, h.y = O, {
            x: p,
            y: O
        }
    },
    fadeInWinLabel: function() {
        var t = this.components.winLabel,
            e = this.components.counter;
        t.x = e.x, t.pivot.x = t.width / 2, t.alpha = 0, t.show(), t.fadeIn(200)
    },
    scaleDownCounter: function() {
        this.components.counter.timedScale({
            x: .7,
            y: .7
        }, 1 / this.COUNTER_MOVE_TIMESTEP)
    },
    counterMoveAnimationComplete: function() {
        var t = this.components.counter,
            e = this.components.coolDownSmoke,
            i = t.getTextLayer(this.COUNTER_MEDIUM_INDEX),
            n = t.getTextLayer(this.COUNTER_HIGH_INDEX),
            o = t.getTextLayer(this.COUNTER_GLOW_INDEX);
        i.fadeOut(this.COUNTER_COOL_DOWN_TIME, 100), n.fadeOut(this.COUNTER_COOL_DOWN_TIME, 100), o.fadeOut(this.COUNTER_COOL_DOWN_TIME, 100), this.fadeInWinLabel(), e.play(), this.fireEvent("view:counterMoveAnimationComplete")
    },
    abort: function(t, e) {
        var i = this.components.counter;
        this.doNotBump = !0, i.abortCount(), i.abortScale(), i.scale.x = this.COUNTER_SCALE[e], i.scale.y = this.COUNTER_SCALE[e], i.setNumber(t), this.countUpComplete(t, e), this.updateCounterPosition(), this.updateShadowScale(), i.getTextLayer(this.COUNTER_MEDIUM_INDEX).alpha = this.COUNTER_MEDIUM_ALPHA_STEP * this.COUNTER_DURATION[e] / 33, i.getTextLayer(this.COUNTER_HIGH_INDEX).alpha = this.COUNTER_HIGH_ALPHA_STEP * this.COUNTER_DURATION[e] / 33
    },
    reset: function() {
        for (var t = 0; t < this.timeouts.length; ++t) Vikings.Utils.clearGameTimer(this.timeouts[t]);
        this.timeouts.length = 0, this.prevWinType = void 0, this.prevCounterWidth = 0;
        var e = this.components.counter,
            i = this.components.coinShadow,
            n = this.components.countUpSparks,
            o = this.components.winLabel,
            a = this.components.coolDownSmoke,
            s = e.getTextLayer(this.COUNTER_MEDIUM_INDEX),
            r = e.getTextLayer(this.COUNTER_HIGH_INDEX),
            h = e.getTextLayer(this.COUNTER_GLOW_INDEX);
        e.x = this.COUNTER_POSITION.x, e.y = this.COUNTER_POSITION.y, s.alpha = 0, r.alpha = 0, h.alpha = 1, s.stopFade(), r.stopFade(), h.stopFade(), e.hide(), i.hide(), n.hide(), o.hide(), a.hide(), this.counterAnimation && Game.stage.view.animationManager.removeFromAnimationLoop(this.counterAnimation)
    },
    resetAllExceptCounter: function() {
        for (var t = 0; t < this.timeouts.length; ++t) Vikings.Utils.clearGameTimer(this.timeouts[t]);
        this.timeouts.length = 0, this.prevWinType = void 0, this.prevCounterWidth = 0
    }
}, Vikings.WinBannerView = Sys.extend(Core.View, Vikings.WinBannerView, "Vikings.WinBannerView");
Sys.ns("Vikings"), Vikings.WinBannerMobileView = {
    MOBILE_SCALE_FACTOR: .75,
    COUNTER_SUSTAIN: {
        basic: 1500,
        freespin: 1500
    },
    createAndAddCountUpSparks: function(i, n) {
        var e = new Component.CountUpSparks(new PIXI.Point(this.COUNTER_POSITION.x * this.MOBILE_SCALE_FACTOR, this.COUNTER_POSITION.y * this.MOBILE_SCALE_FACTOR));
        e.init(), i.addChild(e), n.countUpSparks = e
    },
    createAndAddCoolDownSmoke: function() {},
    createAndAddWinLabel: function() {},
    reset: function() {
        for (var i = 0; i < this.timeouts.length; ++i) Vikings.Utils.clearGameTimer(this.timeouts[i]);
        this.timeouts.length = 0, this.prevWinType = void 0, this.prevCounterWidth = 0;
        var n = this.components.counter,
            e = this.components.coinShadow,
            t = this.components.countUpSparks;
        n.hide(), e.hide(), t.hide()
    }
}, Vikings.WinBannerMobileView = Sys.extend(Vikings.WinBannerView, Vikings.WinBannerMobileView, "Vikings.WinBannerMobileView");
Sys.ns("Vikings"), Vikings.WinBannerController = {
    WIN_BANNER_BEZIER_CONFIG: {
        destination: {
            x: 1170,
            y: 605
        },
        supportNode: {
            x: 700,
            y: 450
        }
    },
    data: {},
    constructor: function() {
        Vikings.WinBannerController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "notify:win.showingWin": this.onShowingWin,
            "notify:userInputManager.userInputEnded": this.skipAnimation,
            "request:abortPresentation": this.skipAnimation,
            "notify:scatterPays.complete": this.onScatterPaysComplete,
            "notify:spin.spinAnimationStarted": this.reset,
            "notify:stateHandler.enteringScatterWinState": this.reset,
            "notify:settingsManager.settingChanged": this.onSettingsChanged,
            "notify:platform.orientationChanged": this.onOrientationChanged,
            "view:countUpComplete": this.onCountUpComplete,
            "view:showingTotalCoinsComplete": this.onShowingTotalCoinsComplete,
            "view:winTypeChanged": this.onWinTypeChanged,
            "view:counterMoveAnimationComplete": this.onCounterMoveAnimationComplete
        })
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    onOrientationChanged: function(t) {
        t === Utils.Platform.PORTRAIT ? !this.countingUp && this.winState && this.data.currentCoins > 1e5 && (this.view.components.counter.scale.x = 2.72, this.view.components.counter.scale.y = 2.72) : !this.countingUp && this.winState && this.data.currentCoins > 1e5 && (this.view.components.counter.scale.x = 1.7 * this.view.COUNTER_SCALE.superMegaWin, this.view.components.counter.scale.y = 1.7 * this.view.COUNTER_SCALE.superMegaWin)
    },
    onShowingWin: function(t, n, i, e) {
        this.data.winType = t, this.data.winCategory = n, this.data.currentCoins = i, this.data.currentCents = e, Model.Action.isScatterPay() || this.startCountUp(Model.Win.getWinTypeBasedOnCoins(i), i)
    },
    onScatterPaysComplete: function() {
        this.startCountUp(Model.Win.getWinTypeBasedOnCoins(this.data.currentCoins), this.data.currentCoins)
    },
    reset: function() {
        this.view.reset()
    },
    onCountUpComplete: function() {
        this.countingUp = !1, this.fireEvent("notify:winBanner.countUpEnd", Model.Win.getType()), this.data.winCategory === Model.Win.FIRST_WIN ? this.fireEvent("request:coinsField.showProgressiveWin", !1, Model.Win.getTotalCoins() - Model.Win.getCurrentCoins() + this.data.currentCoins) : (this.fireEvent("request:cashField.showWin"), this.fireEvent("request:coinsField.showWin"))
    },
    onShowingTotalCoinsComplete: function() {
        this.fireEvent("notify:winBanner.complete", this.data.winCategory), "freespin" === Model.Action.getGameState() || Platform.isMobileDevice || Platform.isTabletDevice ? this.view.reset() : (this.view.resetAllExceptCounter(), this.view.startAnimatingCounter(void 0, void 0, this.WIN_BANNER_BEZIER_CONFIG.destination.x, this.WIN_BANNER_BEZIER_CONFIG.destination.y, (new Date).getTime(), {
            type: "bezier",
            support: this.WIN_BANNER_BEZIER_CONFIG.supportNode.x
        }, {
            type: "bezier",
            support: this.WIN_BANNER_BEZIER_CONFIG.supportNode.y
        }), this.view.scaleDownCounter()), this.winState = !1
    },
    skipAnimation: function() {
        if (this.winState)
            if (this.countingUp) {
                var t = this.data;
                this.view.abort(t.currentCoins, Model.Win.getWinTypeBasedOnCoins(t.currentCoins))
            } else this.view.showingTotalCoinsComplete()
    },
    onWinTypeChanged: function(t) {
        this.fireEvent("notify:winBanner.winTypeChanged", t)
    },
    onCounterMoveAnimationComplete: function() {
        this.fireEvent("notify:winBanner.coolDownStart")
    },
    startCountUp: function(t, n) {
        this.view.countUpWin(n, t), this.countingUp = !0, this.winState = !0, this.fireEvent("notify:winBanner.countUpStart")
    },
    onSettingsChanged: function(t) {
        "betLevel" !== t && "denomination" !== t || this.reset()
    }
}, Vikings.WinBannerController = Sys.extend(Core.Controller, Vikings.WinBannerController, "Vikings.WinBannerController");
Sys.ns("Vikings"), Vikings.SymbolWin = {
    constructor: function() {
        Vikings.SymbolWin.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            view: Core.View,
            controller: Vikings.SymbolWinController
        }
    }
}, Vikings.SymbolWin = Sys.extend(Core.Module, Vikings.SymbolWin, "Vikings.SymbolWin");
Sys.ns("Vikings"), Vikings.SymbolWinView = {
    constructor: function() {
        Vikings.SymbolWinView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        this.components = {};
        var t = Game.stage.view.animationManager.getLayer("winSymbolFrames"),
            i = Game.stage.view.animationManager.getLayer("betwayNumber");
        this.symbolContainer = new Component.Component, t.addChild(this.symbolContainer), this.createAndAddSymbols(this.NUM_REELS, this.NUM_SYMBOLS, this.symbolContainer, this.components), this.components.betwayNumber = this.addComponent(new Component.BetwayNumber, i), this.components.betwayNumber.hide()
    },
    createAndAddSymbols: function(t, i, e, n) {
        for (var o = {}, a = t - 1; a >= 0; --a) {
            o[a] = {};
            for (var s = 0; s < i; ++s) {
                var r = new Component.Symbol,
                    m = Game.stage.model.getSymbolConfiguration(a, s, this.REEL_GROUP);
                o[a][s] = r, e.addChild(r), r.x = m.left + m.width / 2, r.y = m.top + m.height / 2, r.scale.x = this.SYMBOL_SCALE, r.scale.y = this.SYMBOL_SCALE, r.init(), r.hide()
            }
        }
        n.symbols = o
    },
    onSymbolLightUp: function(t, i, e, n, o, a) {
        this.activateSymbol(t, i, e, n, a), this.shouldShowBetwayNumberOnThisReel(t, i, o) && e && this.showBetwayNumber(t, i);
        var s = Game.stage.view.animationManager.getLayer("winSymbolFrames");
        1 !== s.alpha && (s.alpha = 1)
    },
    onToggle: function(t) {
        var i = this.components.betwayNumber;
        i.setNumber(t.coins), i.hide(), this.currentBetwayLength = t.positions.length, this.deactivateSymbols()
    },
    showBetwayNumber: function(t, i) {
        var e = this.components.betwayNumber,
            n = Environment.determineResolution().virtualToWindowScale,
            o = Game.stage.model.getSymbolConfiguration(t, i, this.REEL_GROUP);
        e.show(), e.x = o.left + o.width / 2, e.y = o.top + o.height / 2, e.pivot.x = e.width / 2 / n, e.pivot.y = e.height / 2 / n
    },
    activateSymbol: function(t, i, e, n, o) {
        (n.includes("STACKED") ? this.activateTripleStackSymbol : this.activateSingleSymbol).call(this, t, i, e, n, o)
    },
    activateTripleStackSymbol: function(t, i, e, n, o) {
        var a = parseInt(n.substr(13), 10),
            s = n.replace(/-[1-3]/, "");
        this.fireEvent("request:tripleStacks.playWinAnimation", t, i, e, s, a, o)
    },
    activateSingleSymbol: function(t, i, e, n) {
        var o = this.components.symbols[t][i];
        o.show(), o.setSymbol(n), o.winInit().then(o.winIdle.bind(o))
    },
    shouldShowBetwayNumberOnThisReel: function(t, i, e) {
        var n = Math.floor(this.NUM_REELS / 2),
            o = Math.floor(this.NUM_SYMBOLS / 2),
            a = this.currentBetwayLength - 1;
        if (e && o === i || !e) {
            if (n > a && t === a) return !0;
            if (t === Math.floor(this.NUM_REELS / 2)) return !0
        }
        return !1
    },
    deactivateSymbol: function(t, i) {
        var e = this.components.symbols[t][i];
        e.isActive() && (e.stop(), e.hide()), this.fireEvent("request:tripleStacks.stopWinAnimation", t, i)
    },
    deactivateSymbols: function() {
        for (var t = 0; t < this.NUM_REELS; ++t)
            for (var i = 0; i < this.NUM_SYMBOLS; ++i) this.deactivateSymbol(t, i)
    },
    reset: function() {
        this.components.betwayNumber.hide(), this.deactivateSymbols()
    },
    fadeOut: function() {
        var t = Game.stage.view.animationManager.getLayer("winSymbolFrames"),
            i = {
                run: function() {
                    t.alpha -= .15, t.alpha <= 0 && Game.stage.view.animationManager.removeFromAnimationLoop(this)
                },
                running: !0
            };
        Game.stage.view.animationManager.addToAnimationLoop(i)
    }
}, Vikings.SymbolWinView = Sys.extend(Core.View, Vikings.SymbolWinView, "Vikings.SymbolWinView");
Sys.ns("Vikings"), Vikings.SymbolWinMainGameView = {
    NUM_REELS: 5,
    NUM_SYMBOLS: 3,
    REEL_GROUP: "default",
    SYMBOL_SCALE: 1
}, Vikings.SymbolWinMainGameView = Sys.extend(Vikings.SymbolWinView, Vikings.SymbolWinMainGameView, "Vikings.SymbolWinMainGameView");
Sys.ns("Vikings"), Vikings.SymbolWinFreeSpinsView = {
    NUM_REELS: 7,
    NUM_SYMBOLS: 5,
    REEL_GROUP: "freeSpins",
    SYMBOL_SCALE: .711
}, Vikings.SymbolWinFreeSpinsView = Sys.extend(Vikings.SymbolWinView, Vikings.SymbolWinFreeSpinsView, "Vikings.SymbolWinFreeSpinsView");
Sys.ns("Vikings"), Vikings.SymbolWinController = {
    BETWAY_LIGHT_UP_SPEED: 50,
    TOGGLE_SUSTAIN: 1200,
    TOGGLE_DELAY: 100,
    TOGGLE_WAIT_TIME_REGULAR: 100,
    TOGGLE_WAIT_TIME_BIG_WIN: 3e3,
    SCATTER_PAY_SYMBOLS: ["SYM4", "SYM5", "SYM6", "SYM7"],
    data: {},
    views: {
        mainGame: Vikings.SymbolWinMainGameView,
        freeSpins: Vikings.SymbolWinFreeSpinsView
    },
    timeouts: [],
    hiddenSymbols: [],
    constructor: function() {
        Vikings.SymbolWinController.superclass.constructor.apply(this, arguments), this.betwayHandler = this.setupBetwayHandler({
            betwayLightUpSpeed: this.BETWAY_LIGHT_UP_SPEED,
            toggleSustain: this.TOGGLE_SUSTAIN,
            toggleDelay: this.TOGGLE_DELAY
        })
    },
    setupEvents: function() {
        this.on({
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:animationManager.allImagesLoaded": this.initViews,
            "notify:win.showingWin": this.onShowingWin,
            "notify:winBanner.complete": this.onWinBannerComplete,
            "notify:userInputManager.userInputEnded": this.skipAnimation,
            "notify:platform.visibilityChanged": this.onPageVisibilityChanged,
            "notify:settingsManager.settingChanged": this.onSettingsChanged,
            "notify:bigWin.start": this.reset,
            "notify:spin.spinAnimationStarted": this.reset,
            "notify:stateHandler.enteringScatterWinState": this.reset,
            "notify:stateHandler.enteringFreeSpinOutroState": this.reset,
            "request:abortPresentation": this.skipAnimation
        })
    },
    onServerResponse: function(t) {
        var i = Model.Win,
            e = Model.Action,
            n = this.data;
        n.betways = i.getBetways(0, t), n.currentAction = e.getCurrent(t), n.winType = i.getType(), "basic" === Model.Action.getGameState() ? this.switchView(this.views.mainGame) : this.switchView(this.views.freeSpins)
    },
    setupBetwayHandler: function(t) {
        var i = new Handler.Betway(t);
        return i.init(), i.onSymbolLightUp = function(t, e, n) {
            var s = Model.Reels.getSymbolName(t, e, this.winCategory !== Model.Win.FIRST_WIN),
                o = s.substr(0, 4);
            Model.Action.isScatterPay() && this.SCATTER_PAY_SYMBOLS.contains(o) ? this.view.onSymbolLightUp(t, e, i.toggling, o, !0, n) : this.view.onSymbolLightUp(t, e, i.toggling, s, !1, n), s.contains("STACKED") || this.hideSymbol(t, e, s)
        }.bind(this), i.onToggle = function(t) {
            this.showSymbols(this.hiddenSymbols), this.view.onToggle(t)
        }.bind(this), i
    },
    onShowingWin: function(t, i) {
        this.winCategory = i, "bigWin" !== t ? this.showAllWins(i) : Model.Action.isScatterPay() && this.showScatterPayWin()
    },
    onPageVisibilityChanged: function(t) {
        t ? this.betwayHandler.pause() : this.betwayHandler.unpause(), this.pageInactive = t
    },
    onWinBannerComplete: function() {
        var t = this.data,
            i = this.TOGGLE_WAIT_TIME_REGULAR;
        "bigWin" === t.winType && (this.showAllWins(this.winCategory), this.bigWinState = !0, i = this.TOGGLE_WAIT_TIME_BIG_WIN), this.winCategory !== Model.Win.FIRST_WIN ? this.startToggle(i) : (this.reset(), this.onWinComplete())
    },
    onWinComplete: function() {
        this.fireEvent("notify:symbolWin.complete")
    },
    skipAnimation: function() {
        this.bigWinState && (this.clearTimeouts(), this.startToggle(0), this.bigWinState = !1)
    },
    onSettingsChanged: function(t) {
        "betLevel" !== t && "denomination" !== t || this.reset()
    },
    startToggle: function(t) {
        this.timeouts.push(Vikings.Utils.setGameTimeout(function() {
            this.view.deactivateSymbols(), this.betwayHandler.stop(), this.betwayHandler.toggle(this.data.betways, Model.Action.isScatterPay()), this.bigWinState = !1, this.onWinComplete()
        }.bind(this), t))
    },
    hideSymbol: function(t, i, e) {
        this.fireEvent("request:spin.hideSymbols", Model.Reels.symbolToSpinShowHideSymbol(t, i)), this.fireEvent("request:symbolOverlays.removeOverlay", t, i), this.hiddenSymbols.push({
            reelIndex: t,
            symbolIndex: i,
            symbolName: e
        })
    },
    showSymbols: function(t) {
        for (var i = 0; i < t.length; ++i) this.fireEvent("request:spin.showSymbols", Model.Reels.symbolToSpinShowHideSymbol(t[i].reelIndex, t[i].symbolIndex)), t[i].symbolName.contains("STACKED") || this.fireEvent("request:symbolOverlays.addOverlay", t[i].symbolName, t[i].reelIndex, t[i].symbolIndex, !1);
        t.length = 0
    },
    showAllWins: function(t) {
        this.betwayHandler.showAll(Model.Win.getBetways(t), Model.Action.isScatterPay()), this.fireEvent("notify:symbolWin.showingAllWins")
    },
    showScatterPayWin: function() {
        this.betwayHandler.showAll(Model.Win.getScatterPays(), !0)
    },
    clearTimeouts: function() {
        for (var t = 0; t < this.timeouts.length; ++t) Vikings.Utils.clearGameTimer(this.timeouts[t]);
        this.timeouts.length = 0
    },
    reset: function() {
        this.clearTimeouts(), this.betwayHandler.stop(), this.bigWinState = !1, this.view.reset(), this.showSymbols(this.hiddenSymbols)
    },
    fadeOutSymbols: function() {
        this.view.fadeOut()
    }
}, Vikings.SymbolWinController = Sys.extend(Vikings.Controller, Vikings.SymbolWinController, "Vikings.SymbolWinController");
Component.BetwayNumber = function() {
    var t, e;
    Vikings.Utils.addAsConstants(this, {
        BACKGROUND_IMAGE: "winField",
        TEXT_STYLE: Game.TextStyles.COIN_WIN_TEXT
    }), Component.Component.apply(this, arguments), this.init = function() {
        var n = new PIXI.Point(.5, .5);
        t = Game.PIXIFactory.createAndAddSprite(this.BACKGROUND_IMAGE, this), e = new Component.Counter(0, this.TEXT_STYLE, new PIXI.Point(t.width / 2, t.height / 2), n), this.addChild(e), e.init()
    }, this.setNumber = function(t) {
        e.setNumber(t)
    }
}, Component.BetwayNumber.prototype = Object.create(Component.Component.prototype);
! function() {
    function o(o) {
        for (var t = 0; t < o.length; t++) i(t, o), n(t, o), s(t, o), l(t, o)
    }

    function t(o) {
        var t, e = /^SYM[4567]-STACKED-[123]$/,
            m = o.match(e),
            s = m && m.length;
        return s && (t = m[0].charAt(m[0].length - 1)), 1 * t
    }

    function e(o) {
        var t = /^SYM[4567]$/,
            e = o.match(t);
        return e && e.length
    }

    function m(o) {
        var t = /^SYM\d*/;
        return o.match(t)[0]
    }

    function s(o, e) {
        for (var s = e[o].symbol, l = t(s), i = m(s); --l > 0;)
            if (o > 0) {
                var n = e[--o];
                n.symbol = i + "-STACKED-" + l
            }
    }

    function l(o, e) {
        var s = e[o].symbol,
            l = t(s),
            i = void 0 !== l && e[o].isOutcomeSymbol,
            n = m(s),
            r = 1 === l,
            b = 2 === l;
        if (r && i) {
            var f = e[o + 1];
            u = e[o + 2], f && (f.symbol = n + "-STACKED-2"), u && (u.symbol = n + "-STACKED-3")
        } else if (b && i) {
            var u = e[o + 1];
            u && (u.symbol = n + "-STACKED-3")
        }
    }

    function i(o, t) {
        var m = t[o],
            s = t[o - 1] || {},
            l = m.symbol === s.symbol;
        m.isOutcomeSymbol && !s.isOutcomeSymbol && l && e(m.symbol) && (s.symbol = "SYM0")
    }

    function n(o, t) {
        var m = t[o],
            s = t[o + 1] || {},
            l = t[o + 2] || {},
            i = e(m.symbol),
            n = m.isOutcomeSymbol || s.isOutcomeSymbol || l.isOutcomeSymbol;
        if (i && !n) {
            var r = m.symbol === s.symbol,
                b = m.symbol === l.symbol;
            if (r && b) {
                var f = m.symbol;
                m.symbol = f + "-STACKED-1", s.symbol = f + "-STACKED-2", l.symbol = f + "-STACKED-3"
            }
        }
    }
    Object.extendFunctionOn(Animation.BufferedReelModel.prototype, "addSymbolsToBuffer", function(t, e) {
        return o(this.symbolBuffer), e
    })
}(), Animation.BufferedReelModel.prototype.updateOutcome = function(o, t, e) {
    var m = this.getFirstOutcomeSymbolIndex() + o;
    o >= 0 && o < this.numberOfOutcomeSymbols && !isNaN(m) && m >= 0 && (this.symbolBuffer[m].symbol = t), e || this.symbolBuffer[m] && (this.symbolBuffer[m].symbol = t)
}, Animation.BufferedReelModel.prototype.move = function(o) {
    if (Date.now() >= this.spinStartedAt) {
        this.reelStarted || (this.reelStarted = !0, this.reelStartCallback());
        var t = this.getDistance(o);
        return this.moveDistance(t), t
    }
};
! function() {
    function e(e) {
        for (var i = e.length, s = n ? t.FREESPIN_STACK_WIDTH : t.MAIN_STACK_WIDTH, o = n ? t.FREESPIN_STACK_HEIGHT : t.MAIN_STACK_HEIGHT, r = 0; r < i; r++) {
            var d = this.animationItems[r];
            d.id.includes(t.STACK_IMAGE_ID) && (d.height = o, d.width = s, d.y += 12)
        }
    }
    var t = {
            MAIN_STACK_HEIGHT: 500,
            MAIN_STACK_WIDTH: 189,
            FREESPIN_STACK_WIDTH: 134,
            FREESPIN_STACK_HEIGHT: 356,
            STACK_IMAGE_ID: "-STACKED-1"
        },
        i = new Sys.Observable,
        n = !1;
    i.addListener("notify:stateHandler.leavingFreeSpinOutroState", function() {
        n = !1
    }), i.addListener("notify:freeSpinIntro.splashClosed", function() {
        n = !0
    }), Vikings.Utils.addAsConstants(PIXIAnimation.BufferedReelList, t), Object.extendFunctionOn(PIXIAnimation.BufferedReelList.prototype, "getReelItemsForRendering", function(t, i) {
        var n = t[0];
        return e.call(this, n), i
    }), Object.extendFunctionOn(Core.Slots.ReelGroup.prototype, "createReelLists", function(e, t) {
        var i, n = e[0];
        return i = "freeSpins" === n ? Vikings.Utils.getFreeSpinsReelsMask() : Vikings.Utils.getMainGameReelsMask(), this.reels.addChild(i), this.reels.mask = i, t
    })
}(), Animation.BufferedReelList.prototype.setSymbols = function(e, t) {
    void 0 === t && (t = !0);
    for (var i = t ? -1 : -3, n = t ? this.model.numberOfOutcomeSymbols : this.model.numberOfOutcomeSymbols + 2; ++i < n;) Sys.isDefined(e[i]) && this.model.updateOutcome(i, e[i], t)
}, PIXIAnimation.BufferedReelList.prototype.run = function(e, t) {
    var i, n, s, o = this,
        r = Math.min(e.timeStep, o.maxTimeStep);
    s = o.model.move(r), "starting" === o.model.state ? (n = s, o.dispatchReachedIdleSpeedEvent = !0, o.fireEvent("notify:reelList.reelMovedInStartingState", n, o.id)) : "spinning" === o.model.state && !0 === o.dispatchReachedIdleSpeedEvent && (o.dispatchReachedIdleSpeedEvent = !1, n = s, o.fireEvent("notify:reelList.reelReachedIdleSpeed", n, o.id)), i = o.model.getSymbolsToRender(), o.getReelItemsForRendering(i, e, t)
};
! function() {
    function n(n, r) {
        for (var t in r)
            if (r.hasOwnProperty(t)) {
                var e = r[t];
                o(e, n)
            } return n
    }

    function o(n, o) {
        for (var r = n.reelindex, t = n.rowindex, e = n.symbol, i = o[0].symbols.length, s = 0; s < 3; s++) {
            var f = t - s;
            f < i && f >= 0 && (o[r].symbols[f] = e + "-STACKED-" + (3 - s))
        }
    }
    Object.extendFunctionOn(Sys.utils, "parseReelInfo", function(o, r) {
        return n(r, o[0].stackbottom || {})
    })
}();
Component.HotSpotArea = function() {
    function t(t) {
        var n = function() {
            e.clearTrack(2), t()
        };
        e.tracks[2].listener = {
            complete: n
        }
    }

    function n(t) {
        var n = function() {
            e.clearTracks(), t()
        };
        e.tracks[2].listener = {
            complete: n
        }
    }
    var o, e, i;
    Vikings.Utils.addAsConstants(this, {
        HOT_SPOT_SPINE: "hotSpot",
        HOT_SPOT_SMOKE_IDLE: "smokeIdle",
        HOT_SPOT_CENTER_SMOKE_IDLE: "centerSmokeIdle",
        HOT_SPOT_FADE_IN: "fadeIn",
        HOT_SPOT_FADE_OUT: "fadeOut",
        HOT_SPOT_SYMBOL_LAND: "symbolLand",
        HOT_SPOT_ACTIVATE: "activateHotspots"
    }), Component.Component.apply(this, arguments), this.init = function() {
        o = Game.PIXIFactory.createAndAddSpineAnimation(this.HOT_SPOT_SPINE, this), e = o.state
    }, this.setMode = function(t) {
        i = t
    }, this.idle = function() {
        e.setAnimation(0, this.HOT_SPOT_SMOKE_IDLE + i, !0), e.setAnimation(1, this.HOT_SPOT_CENTER_SMOKE_IDLE + i, !0)
    }, this.fadeIn = function(n) {
        var _ = 2;
        return "FS" === i ? (n && (o.stateData.setMix("burstInFS1", this.HOT_SPOT_SMOKE_IDLE, 1), e.setAnimation(_, "burstInFS1"), _ = 3), e.setAnimation(_, this.HOT_SPOT_FADE_IN + i + (n || Component.HotSpotArea.POSITION_CENTER_FADE_IN))) : e.setAnimation(2, this.HOT_SPOT_FADE_IN + i), new Promise("FS" === i ? this.promiseToCompleteHotSpotExpansion.bind(this) : t)
    }, this.fadeOut = function() {
        return e.setAnimation(2, this.HOT_SPOT_FADE_OUT + i), new Promise(n)
    }, this.symbolLand = function() {
        return e.setAnimation(2, this.HOT_SPOT_SYMBOL_LAND + i), new Promise(t)
    }, this.activateHotSpot = function() {
        return e.setAnimation(2, this.HOT_SPOT_ACTIVATE), new Promise(t)
    }, this.promiseToCompleteHotSpotExpansion = function(t) {
        var n = function() {
            e.clearTrack(2), t()
        };
        e.tracks[2].listener = {
            complete: n,
            event: function(t, n) {
                "boom" === n.data.name && (e.setAnimation(3, this.HOT_SPOT_SMOKE_IDLE + "FS", !0), e.setAnimation(4, this.HOT_SPOT_CENTER_SMOKE_IDLE + "FS", !0))
            }.bind(this)
        }
    }
}, Component.HotSpotArea.prototype = Object.create(Component.Component.prototype), Component.HotSpotArea.MODE_MAIN_GAME = "", Component.HotSpotArea.MODE_FREE_SPINS = "FS", Component.HotSpotArea.POSITION_LEFT_FADE_IN = "03", Component.HotSpotArea.POSITION_RIGHT_FADE_IN = "03", Component.HotSpotArea.POSITION_CENTER_FADE_IN = "03";
Sys.ns("Vikings"), Vikings.HotSpot = {
    constructor: function() {
        Vikings.HotSpot.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            hotSpot: {
                state: {
                    name: "HotSpot",
                    execute: function(t) {},
                    waitEvents: {
                        "notify:hotSpot.complete": !1
                    }
                }
            },
            stopped: {
                queue: [function(t) {
                    this.controller.data.isHotSpot && t.stateHandler.pushState(t.states.hotSpot)
                }.bind(this)]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            view: Vikings.HotSpotView,
            controller: Vikings.HotSpotController
        }
    }
}, Vikings.HotSpot = Sys.extend(Core.Module, Vikings.HotSpot, "Vikings.HotSpot");
Sys.ns("Vikings"), Vikings.HotSpotView = {
    REEL_FADE_IN_TIME: 1e3,
    HOT_SPOT_AREA_MG_POSITION: {
        x: 640,
        y: 300
    },
    HOT_SPOT_AREA_FS_POSITION: [{
        x: 517,
        y: 315
    }, {
        x: 637,
        y: 315
    }, {
        x: 760,
        y: 315
    }],
    SYMBOL_SCALE_FREESPINS: .711,
    MODE: {
        MG: "MG",
        FS: "FS"
    },
    STACKED_TOP_SYMBOL_ID: "-1",
    constructor: function() {
        Vikings.HotSpotView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var t = Game.stage.view.animationManager.getLayer("hotSpotArea");
        this.components = {}, this.timeouts = [], this.hotSpotLayer = Game.stage.view.animationManager.getLayer("hotSpot"), this.hotSpotMaskedLayer = Game.stage.view.animationManager.getLayer("hotSpotMasked"), this.freeSpinsMask = Vikings.Utils.getFreeSpinsReelsMask(), this.mainGameMask = Vikings.Utils.getMainGameReelsMask(), this.hotSpotContainer = new Component.Component, this.hotSpotMaskedContainer = new Component.Component, this.hotSpotMaskedLayer.addChild(this.hotSpotMaskedContainer), this.hotSpotLayer.addChild(this.hotSpotContainer), this.hotSpotAreaMGContainer = new Component.Component, this.hotSpotAreaFSContainer = new Component.Component, t.addChild(this.hotSpotAreaMGContainer), t.addChild(this.hotSpotAreaFSContainer), this.createAndAddMGHotSpotArea(this.hotSpotAreaMGContainer, this.components), this.createAndAddFSHotSpotAreas(this.hotSpotAreaFSContainer, this.components), this.setMGMode(), this.hotSpotAreaMGContainer.hide()
    },
    createAndAddMGHotSpotArea: function(t, o) {
        var e = new Component.HotSpotArea;
        e.init(), e.setMode(Component.HotSpotArea.MODE_MAIN_GAME), t.addChild(e), o.hotSpotAreaMG = e, e.x = this.HOT_SPOT_AREA_MG_POSITION.x, e.y = this.HOT_SPOT_AREA_MG_POSITION.y, e.idle()
    },
    createAndAddFSHotSpotAreas: function(t, o) {
        o.hotSpotAreaFS = [];
        for (var e = 0; e < 3; ++e) {
            var i = new Component.HotSpotArea;
            i.init(), i.setMode(Component.HotSpotArea.MODE_FREE_SPINS), t.addChild(i), o.hotSpotAreaFS.push(i), i.x = this.HOT_SPOT_AREA_FS_POSITION[e].x, i.y = this.HOT_SPOT_AREA_FS_POSITION[e].y, i.scale.x = this.SYMBOL_SCALE_FREESPINS, i.scale.y = this.SYMBOL_SCALE_FREESPINS, i.idle(), i.hide()
        }
    },
    transformSymbol: function(t, o, e, i) {
        var n = "default",
            a = "freespin" === Model.Action.getCurrent();
        a && (n = "freeSpins");
        var s, h = Game.stage.model.getSymbolConfiguration(t, o, n),
            S = 0,
            r = !1;
        i.contains("STACKED") ? (s = new Component.Symbol(Component.Symbol.TYPE_STACKED), e = e.substr(0, 4), i = i.substr(0, 4), S = a ? 122.5 : 167.5, this.hotSpotMaskedContainer.addChild(s), r = !0) : (s = new Component.Symbol, this.hotSpotContainer.addChild(s)), s.init(), s.x = h.left + 0 + h.width / 2, s.y = h.top + S + h.height / 2, "freespin" === Model.Action.getCurrent() && (s.scale.x = this.SYMBOL_SCALE_FREESPINS, s.scale.y = this.SYMBOL_SCALE_FREESPINS), s.transformSymbol(e, i).then(this.onSymbolTransformComplete.bind(this, t, o, s, i, r)), this.fireEvent("view:transformingSymbol", t, o)
    },
    onSymbolTransformComplete: function(t, o, e, i, n) {
        this.fireEvent("view:symbolTransformationComplete", t, o, e, i, n), this.hotSpotContainer.removeChild(e), this.hotSpotMaskedContainer.removeChild(e)
    },
    abortTransformations: function() {
        this.hotSpotContainer.removeChildren(), this.hotSpotMaskedContainer.removeChildren()
    },
    setMGMode: function() {
        this.hotSpotAreaMGContainer.show(), this.components.hotSpotAreaFS[0].hide(), this.components.hotSpotAreaFS[1].hide(), this.components.hotSpotAreaFS[2].hide(), this.hotSpotMaskedLayer.removeChild(this.freeSpinsMask), this.hotSpotMaskedLayer.mask = this.mainGameMask, this.hotSpotMaskedLayer.addChild(this.mainGameMask)
    },
    setFSMode: function() {
        return this.hotSpotAreaMGContainer.hide(), this.hotSpotMaskedLayer.removeChild(this.mainGameMask), this.hotSpotMaskedLayer.mask = this.freeSpinsMask, this.hotSpotMaskedLayer.addChild(this.freeSpinsMask), new Promise(function(t) {
            var o = this.components.hotSpotAreaFS[1],
                e = this.components.hotSpotAreaFS[0],
                i = this.components.hotSpotAreaFS[2];
            o.show(), o.idle(), this.fireEvent("view:hotSpot.activating", "center"), Vikings.Utils.setGameTimeout(function() {
                e.show(), e.idle(), this.fireEvent("view:hotSpot.activating", "left"), e.fadeIn(Component.HotSpotArea.POSITION_LEFT_FADE_IN), Vikings.Utils.setGameTimeout(function() {
                    i.show(), i.idle(), this.fireEvent("view:hotSpot.activating", "right"), i.fadeIn(Component.HotSpotArea.POSITION_RIGHT_FADE_IN).then(function() {
                        Game.stage.view.animationManager.getLayer("reel").fadeIn(this.REEL_FADE_IN_TIME, 0, t), this.fireEvent("view:activationComplete")
                    }.bind(this))
                }.bind(this), 900)
            }.bind(this), 1e3)
        }.bind(this))
    },
    fadeInHotSpotArea: function() {
        this.components.hotSpotAreaMG.fadeIn()
    },
    fadeOutHotSpotArea: function() {
        this.components.hotSpotAreaMG.fadeOut()
    },
    activateHotSpot: function() {
        this.components.hotSpotAreaMG.activateHotSpot();
        for (var t = 2; t <= 4; ++t) Model.Reels.getSymbolName(t, 1).contains(this.STACKED_TOP_SYMBOL_ID) && this.components.hotSpotAreaFS[t - 2].activateHotSpot()
    }
}, Vikings.HotSpotView = Sys.extend(Core.View, Vikings.HotSpotView, "Vikings.HotSpotView");
Sys.ns("Vikings"), Vikings.HotSpotController = {
    HOT_SPOT_TRANSFORM_DELAY: 100,
    HOT_SPOT_SUSTAIN: 2e3,
    HOT_SPOT_SINGLE_STRING: "single",
    HOT_SPOT_STACKED_STRING: "stacked",
    data: {},
    timeouts: [],
    constructor: function() {
        Vikings.HotSpotController.superclass.constructor.apply(this, arguments), this.hotSpotToggleHandler = this.setupHotSpotToggleHandler()
    },
    setupEvents: function() {
        this.on({
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:animationManager.allImagesLoaded": this.view.initAnimations.bind(this.view),
            "notify:stateHandler.enteringHotSpotState": this.onEnteringHotSpotState,
            "notify:userInputManager.userInputEnded": this.skipAnimation,
            "notify:environment.introComplete": this.onGameIntroComplete,
            "notify:freeSpinOutro.closed": this.onFreeSpinOutroClosed,
            "request:abortPresentation": this.skipAnimation,
            "request:environment.startRSTransition": this.onRSTransitionRequest,
            "request:hotSpot.switchToRS": this.onSwitchToRSRequest,
            "view:transformationComplete": this.onTransformationComplete,
            "view:symbolTransformationComplete": this.onSymbolTransformationComplete,
            "view:transformingSymbol": this.onTransformingSymbol,
            "view:hotSpot.activating": this.onHotSpotActivating,
            "view:activationComplete": this.fireEvent.bind(this, "notify:hotSpot.activationComplete")
        })
    },
    setupHotSpotToggleHandler: function() {
        var t = new Handler.HotSpotToggler({
            delay: this.HOT_SPOT_TRANSFORM_DELAY
        });
        return t.init(), t.onToggle = function(t, o, e) {
            var i = Model.Reels.getSymbolName(t, o, !1);
            e.contains("STACKED") && (i = i.substr(0, 12), e += "-1"), this.fireEvent("request:spin.hideSymbols", Model.Reels.symbolToSpinShowHideSymbol(t, o)), this.fireEvent("request:spin.setSymbols", Model.Reels.symbolToSpinSetSymbol(t, o, e), !e.contains("STACKED")), this.fireEvent("notify:hotSpot.transformingSymbol", e.contains("STACKED") ? this.HOT_SPOT_STACKED_STRING : this.HOT_SPOT_SINGLE_STRING, t, o), e.contains("STACKED") && (e = e.substr(0, 12), this.fireEvent("request:spin.setSymbols", Model.Reels.symbolToSpinSetSymbol(t, o + 1, e + "-2")), this.fireEvent("request:spin.setSymbols", Model.Reels.symbolToSpinSetSymbol(t, o + 2, e + "-3"))), this.view.transformSymbol(t, o, i, e)
        }.bind(this), t.onComplete = function() {
            this.timeouts.push(Vikings.Utils.setGameTimeout(function() {
                this.onTransformationComplete()
            }.bind(this), this.HOT_SPOT_SUSTAIN))
        }.bind(this), t
    },
    onServerResponse: function(t) {
        var o = this.data;
        o.isHotSpot = Model.Action.isHotSpot(), o.overlaySymbols = Model.Reels.getOverlaySymbols(), o.currentAction = Model.Action.getCurrent()
    },
    onSwitchToRSRequest: function() {
        this.view.setFSMode().then(function() {
            this.fireEvent("notify:hotSpot.transitionToRSComplete")
        }.bind(this))
    },
    onFreeSpinOutroClosed: function() {
        this.view.setMGMode(), this.view.fadeInHotSpotArea(), this.view.components.hotSpotAreaMG.idle()
    },
    skipAnimation: function() {
        if (this.hotSpotState) {
            for (var t = Model.Reels.overlayToHotSpotSymbols(this.data.overlaySymbols), o = 0; o < t.length; ++o) {
                var e = t[o].reelIndex,
                    i = t[o].symbolIndex,
                    n = t[o].symbolName;
                n.contains("STACKED") && (n += "-1"), this.fireEvent("request:spin.setSymbols", Model.Reels.symbolToSpinSetSymbol(e, i, n), !n.contains("STACKED")), this.fireEvent("notify:hotSpot.symbolTransformationComplete", e, i, null, n, n.contains("STACKED")), n.contains("STACKED") && (n = n.substr(0, 12), this.fireEvent("request:spin.setSymbols", Model.Reels.symbolToSpinSetSymbol(e, i + 1, n + "-2")), this.fireEvent("request:spin.setSymbols", Model.Reels.symbolToSpinSetSymbol(e, i + 2, n + "-3"))), this.fireEvent("request:spin.showSymbols", Model.Reels.symbolToSpinShowHideSymbol(e, i))
            }
            this.view.abortTransformations(), this.hotSpotToggleHandler.stop(), this.onTransformationComplete()
        }
    },
    onEnteringHotSpotState: function() {
        this.hotSpotState = !0;
        var t = this.data.overlaySymbols;
        0 !== t.length ? this.startToggleHotSpots(t) : this.onTransformationComplete()
    },
    onTransformationComplete: function() {
        this.reset(), this.fireEvent("notify:hotSpot.complete")
    },
    onSymbolTransformationComplete: function(t, o, e, i, n) {
        e && this.fireEvent("notify:hotSpot.symbolTransformationComplete", t, o, e, i, n), this.fireEvent("request:spin.showSymbols", Model.Reels.symbolToSpinShowHideSymbol(t, o))
    },
    onGameIntroComplete: function() {
        Model.Action.isRestore() || Vikings.Utils.setGameTimeout(function() {
            this.view.hotSpotAreaMGContainer.show(), this.view.fadeInHotSpotArea()
        }.bind(this), 200)
    },
    onRSTransitionRequest: function() {
        this.view.fadeOutHotSpotArea()
    },
    onTransformingSymbol: function(t, o) {
        this.fireEvent("request:symbolOverlays.removeOverlay", t, o)
    },
    onHotSpotActivating: function(t) {
        this.fireEvent("notify:hotSpot.activating", t)
    },
    startToggleHotSpots: function(t) {
        this.timeouts.push(Vikings.Utils.setGameTimeout(function() {
            this.hotSpotToggleHandler.toggle(Model.Reels.overlayToHotSpotSymbols(t)), this.view.activateHotSpot()
        }.bind(this), 500))
    },
    reset: function() {
        this.hotSpotState = !1;
        for (var t = 0; t < this.timeouts.length; ++t) Vikings.Utils.clearGameTimer(this.timeouts[t]);
        this.timeouts.length = 0
    }
}, Vikings.HotSpotController = Sys.extend(Core.Controller, Vikings.HotSpotController, "Vikings.HotSpotController");
Component.BigWin = function(t) {
    var i, n, e;
    t = t || {}, t.ravenPosition = t.ravenPosition || new PIXI.Point(0, 0), t.firePosition = t.firePosition || new PIXI.Point(0, 0), t.textFirePosition = t.textFirePosition || new PIXI.Point(0, 0), t.textSparkPosition = t.textSparkPosition || new PIXI.Point(0, 0), Vikings.Utils.addAsConstants(this, {
        FIRE_SPINE: "bigWinFire",
        FIRE_INTRO: "intro",
        FIRE_IDLE: "loop",
        FIRE_END: "outro",
        RAVEN_SPINE: "bigWinRaven",
        RAVEN_INTRO: "BigWinStart",
        RAVEN_IDLE: "BigWinIdle",
        RAVEN_END: "end"
    }), this.init = function() {
        n = Game.PIXIFactory.createAndAddSpineAnimation(this.FIRE_SPINE, this), i = Game.PIXIFactory.createAndAddSpineAnimation(this.RAVEN_SPINE, this), i.position = t.ravenPosition, n.position = t.firePosition, e = new Neutrino.NeutrinoHandler, e.init(), e.createAndAddEffect("countupSparks", "countupSparks", this, t.textSparkPosition)
    }, this.play = function() {
        Game.PIXIUtils.resetSpineAnimation(i), i.state.setAnimation(0, this.RAVEN_INTRO, !1), i.state.tracks[0].listener = {
            complete: function() {
                i.state.setAnimation(0, this.RAVEN_IDLE, !0)
            }.bind(this)
        }, n.state.setAnimation(0, this.FIRE_INTRO, !1), n.state.tracks[0].listener = {
            complete: function() {
                n.state.setAnimation(0, this.FIRE_IDLE, !0)
            }.bind(this)
        }, e.playEffect("countupSparks")
    }, this.stop = function() {
        function t(t) {
            e && o && t()
        }
        var e = !1,
            o = !1;
        return t.bind(this), {
            then: function(s) {
                this.stopGenerators(), Game.PIXIUtils.resetSpineAnimation(i), i.state.setAnimation(0, this.RAVEN_END, !1), i.state.tracks[0].listener = {
                    complete: function() {
                        o = !0, t(s)
                    }
                }, Game.PIXIUtils.resetSpineAnimation(n), n.state.setAnimation(0, this.FIRE_END, !1), n.state.tracks[0].listener = {
                    complete: function() {
                        e = !0, t(s)
                    }
                }
            }.bind(this)
        }
    }, this.stopGenerators = function() {
        for (var t = 0; t < this.children.length; t++) this.children[t] instanceof Neutrino.NeutrinoEffect && this.children[t].effect.pauseGeneratorsInAllEmitters()
    }, this.resetBigWinLayer = function() {
        this.stopAndResetEffect("countupSparks"), Game.PIXIUtils.resetSpineAnimation(i)
    }, this.stopAndResetEffect = function(t) {
        e.stopEffect(t), e.resetEffect(t)
    }
}, Component.BigWin.prototype = Object.create(Component.Component.prototype);
Component.BigWinText = function() {
    var t, e;
    Vikings.Utils.addAsConstants(this, {
        BIG_WIN_STRING: Services.languageManager.getText(Language.Keys.bigWin),
        MEGA_WIN_STRING: Services.languageManager.getText(Language.Keys.megaWin),
        SUPER_MEGA_WIN_STRING: Services.languageManager.getText(Language.Keys.superMegaWin)
    }), Component.Component.apply(this, arguments), this.init = function() {
        t = Game.PIXIFactory.createAndAddText(this.BIG_WIN_STRING, Game.TextStyles.BIG_WIN_TEXT, this), e = Game.PIXIFactory.createAndAddText(this.BIG_WIN_STRING, Game.TextStyles.BIG_WIN_TEXT_GLOW, this), e.blendMode = PIXI.BLEND_MODES.ADD
    }, this.bigWin = function() {
        t.text = this.BIG_WIN_STRING, e.text = this.BIG_WIN_STRING
    }, this.megaWin = function() {
        t.text = this.MEGA_WIN_STRING, e.text = this.MEGA_WIN_STRING
    }, this.superMegaWin = function() {
        t.text = this.SUPER_MEGA_WIN_STRING, e.text = this.SUPER_MEGA_WIN_STRING
    }, this.getWidth = function() {
        return t.getLocalBounds().width
    }
}, Component.BigWinText.prototype = Object.create(Component.Component.prototype);
Sys.ns("Vikings"), Vikings.BigWin = {
    constructor: function() {
        Vikings.BigWin.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            view: Vikings.BigWinView,
            controller: Vikings.BigWinController
        }
    }
}, Vikings.BigWin = Sys.extend(Core.Module, Vikings.BigWin, "Vikings.BigWin");
Sys.ns("Vikings"), Vikings.BigWinView = {
    BIG_WIN_COMPONENT_CONFIG: {
        firePosition: new PIXI.Point(640, -360),
        ravenPosition: new PIXI.Point(640, -500),
        textFirePosition: new PIXI.Point(640, 400),
        textSparkPosition: new PIXI.Point(640, 375)
    },
    BIG_WIN_TEXT_POSITION: {
        x: 640,
        y: 150
    },
    constructor: function() {
        Vikings.BigWinView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        this.components = {}, this.layer = Game.stage.view.animationManager.getLayer("bigWin"), Object.assign(this.layer, Component.Util.Fader.prototype), this.createAndAddBigWin(this.layer, this.components), this.createAndAddBigWinText(this.layer, this.components)
    },
    createAndAddBigWin: function(i, n) {
        var t = new Component.BigWin(this.BIG_WIN_COMPONENT_CONFIG);
        t.init(), t.y = 700, i.addChild(t), n.bigWin = t, t.hide()
    },
    createAndAddBigWinText: function(i, n) {
        var t = new Component.BigWinText;
        t.init(), t.x = this.BIG_WIN_TEXT_POSITION.x, t.y = this.BIG_WIN_TEXT_POSITION.y, i.addChild(t), n.bigWinText = t, t.hide(), Utils.Platform.isPortrait() && (t.scale.x = .7, t.scale.y = .7)
    },
    updateBigWinTextPosition: function() {
        var i = this.components.bigWinText;
        i.pivot.x = i.getWidth() / 2
    },
    startBigWin: function() {
        var i = this.components.bigWin,
            n = this.components.bigWinText;
        this.layer.alpha = 1, i.show(), i.play(), n.show(), n.bigWin(), this.updateBigWinTextPosition()
    },
    stopBigWin: function() {
        this.fireEvent("view:ravenFlyingAway"), this.components.bigWin.stop().then(this.layer.fadeOut.bind(this.layer, 1e3, 0, this.hideBigWin.bind(this)))
    },
    hideBigWin: function() {
        var i = this.components.bigWin,
            n = this.components.bigWinText;
        i.hide(), n.hide(), i.resetBigWinLayer(), this.layer.stopFade()
    },
    setWinType: function(i) {
        this.components.bigWinText[i](), this.updateBigWinTextPosition()
    }
}, Vikings.BigWinView = Sys.extend(Core.View, Vikings.BigWinView, "Vikings.BigWinView");
Sys.ns("Vikings"), Vikings.BigWinMobileView = {
    BIG_WIN_COMPONENT_CONFIG: {
        firePosition: new PIXI.Point(640, -360),
        ravenPosition: new PIXI.Point(640, -500),
        textFirePosition: new PIXI.Point(480, 300),
        textSparkPosition: new PIXI.Point(480, 275)
    }
}, Vikings.BigWinMobileView = Sys.extend(Vikings.BigWinView, Vikings.BigWinMobileView, "Vikings.BigWinMobileView");
Sys.ns("Vikings"), Vikings.BigWinController = {
    ALLOWED_WIN_TYPE_CHANGES: ["megaWin", "superMegaWin"],
    constructor: function() {
        Vikings.BigWinController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:animationManager.allImagesLoaded": this.view.initAnimations.bind(this.view),
            "notify:spin.spinAnimationStarted": this.skipAnimation,
            "notify:userInputManager.userInputEnded": this.skipAnimation,
            "notify:win.showingWin": this.onShowingWin,
            "notify:winBanner.complete": this.stopBigWin,
            "notify:winBanner.winTypeChanged": this.onWinTypeChanged,
            "notify:scatterPays.complete": this.onScatterPaysComplete,
            "request:abortPresentation": this.skipAnimation,
            "notify:platform.orientationChanged": this.onOrientationChanged,
            "view:ravenFlyingAway": this.fireEvent.bind(this, "notify:bigWin.ravenFlyingAway")
        })
    },
    onOrientationChanged: function(i) {
        i === Utils.Platform.PORTRAIT ? (this.view.components.bigWinText.scale.x = .7, this.view.components.bigWinText.scale.y = .7) : (this.view.components.bigWinText.scale.x = 1, this.view.components.bigWinText.scale.y = 1)
    },
    onShowingWin: function(i) {
        "bigWin" !== i || Model.Action.isScatterPay() || this.startBigWin()
    },
    onScatterPaysComplete: function() {
        "bigWin" === Model.Win.getType() && this.startBigWin()
    },
    skipAnimation: function() {
        this.bigWinStoppingState && (this.bigWinStoppingState = !1, this.view.hideBigWin())
    },
    onWinTypeChanged: function(i) {
        this.ALLOWED_WIN_TYPE_CHANGES.contains(i) && this.view.setWinType(i)
    },
    startBigWin: function() {
        this.bigWinState = !0, this.view.startBigWin(), this.fireEvent("notify:bigWin.start")
    },
    stopBigWin: function() {
        this.bigWinState && (this.bigWinState = !1, this.bigWinStoppingState = !0, this.view.stopBigWin(), this.fireEvent("notify:bigWin.end"))
    }
}, Vikings.BigWinController = Sys.extend(Core.Controller, Vikings.BigWinController, "Vikings.BigWinController");
Vikings.symbolPositions = function() {
    function e() {
        var e = Resources.readData("config");
        ["default", "freeSpins"].forEach(function(r) {
            var n = e.reelGroups[r],
                o = "freeSpins" === r ? 169 * .711 : 169,
                s = o / 2,
                f = n.numberOfReels,
                i = n.reelLayout.standard.numberOfOutcomeSymbols,
                t = "freeSpins" === r ? 6 : 9.5,
                l = "freeSpins" === r ? 18 : 48.5;
            a[r] = a[r] || {};
            for (var u = 0; u < f; u++)
                for (var b = 0; b < i + 2; b++) {
                    var c = n.reelLayout[u].left + s + t,
                        d = b * o + s + l;
                    a[r][u] = a[r][u] || {}, a[r][u][b] = {
                        x: c,
                        y: d
                    }
                }
            a[r].symbolSize = o
        }), Object.freeze(a)
    }
    var r = new Sys.Observable,
        a = {};
    return r.addListener("notify:animationManager.allImagesLoaded", e), a
}();
Vikings.symbolOverlays = function() {
    function e() {
        var e, n, t, i = Game.spin.model.readData("initialOutcomes"),
            a = i.basic;
        for (g = "spin", e = 0; e < a.length; e++)
            for (t = a[e].symbols, n = 0; n < t.length; n++) f(t[n]) && l(t[n], e, n)
    }

    function n() {
        i(), e()
    }

    function t(e, n) {
        var i = Model.Reels.getReels()[e],
            a = void 0 === n ? 0 : n,
            r = i.symbols || [],
            o = r.length,
            s = a === o - 1,
            d = r[a];
        f(d) && l(d, e, a), s || t(e, ++a)
    }

    function i(e) {
        for (; u.length > 0;) {
            var n = u.pop();
            Game.stage.view.animationManager.getLayer(h).removeChild(n)
        }
        a()
    }

    function a() {
        for (var e = Game.stage.view.animationManager.getLayer(p), n = 0; n < c.length; ++n) e.removeChild(c[n]);
        c.length = 0
    }

    function r(e, n, t, i, a) {
        if (!a) {
            l(i.match(/SYM[4-7]$/)[0], e, n)
        }
    }

    function o(e, n, t, i, a) {
        for (var r = 0; r < t; ++r)
            for (var o = 0; o < i; ++o) l(a, r + e, o + n)
    }

    function s(e, n) {
        for (var t = Game.stage.view.animationManager.getLayer(h), i = 0; i < u.length; ++i) u[i].reelIndex === e && u[i].symbolIndex === n && t.removeChild(u[i]);
        d(e, n)
    }

    function d(e, n) {
        for (var t = Game.stage.view.animationManager.getLayer(p), i = 0; i < c.length; ++i) c[i].reelIndex === e && c[i].symbolIndex === n && t.removeChild(c[i])
    }

    function l(e, n, t, i) {
        s(n, t);
        var a = m() ? "freeSpins" : "default",
            r = Game.stage.model.getSymbolConfiguration(n, t, a),
            o = new PIXI.Point(r.left + r.width / 2, r.top + r.height / 2),
            d = Game.stage.view.animationManager.getLayer(h),
            l = {
                x: .5,
                y: .5
            },
            f = Game.PIXIFactory.createSpriteWithTexture(e, o, l);
        if (void 0 === i && (i = !0), f.reelIndex = n, f.symbolIndex = t, m() && (f.scale.x = this.SYMBOL_SCALE_FREESPINS, f.scale.y = this.SYMBOL_SCALE_FREESPINS), u.push(f), d.addChild(f), f.updateTransform(), i) {
            var y = new Component.Symbol,
                g = "freeSpins" === a ? .711 : 1,
                v = Game.stage.view.animationManager.getLayer(p);
            y.init(), y.x = r.left + r.width / 2, y.y = r.top + r.height / 2, y.scale.x = g, y.scale.y = g, y.reelIndex = n, y.symbolIndex = t, v.addChild(y), y.setSymbol(e), y.idle(), c.push(y)
        }
    }

    function m() {
        return "freespin" === g
    }

    function f(e, n) {
        var t = void 0 === n ? 0 : n,
            i = S[t],
            a = t === S.length - 1;
        return e === i || !a && f(e, ++t)
    }

    function y() {
        g = Model.Action.getCurrent()
    }
    var g, v = new Sys.Observable,
        S = ["SYM4", "SYM5", "SYM6", "SYM7"],
        h = "symbolOverlays",
        p = "idleSymbols",
        u = [],
        c = [];
    Vikings.Utils.addAsConstants(this, {
        SYMBOL_SCALE_FREESPINS: .711
    }), v.addListener("notify:spin.reelStoppedSpinning", t), v.addListener("notify:freeSpinOutro.closed", n), v.addListener("notify:spin.spinAnimationStarted", i), v.addListener("notify:hotSpot.symbolTransformationComplete", r), v.addListener("notify:shieldWall.symbolsCovered", o), v.addListener("request:symbolOverlays.addOverlay", l), v.addListener("request:symbolOverlays.removeOverlay", s), v.addListener("notify:responseParser.responseParsed", y), v.addListener("notify:stateHandler.enteringFreeSpinIntroState", i), v.addListener("notify:stateHandler.enteringFreeSpinOutroState", i), v.addListener("notify:win.showingWin", a), v.addListener("notify:environment.introComplete", e)
}();
! function() {
    function e() {
        d(0), d(1), d(2), d(3), d(4), a()
    }

    function t() {
        if (!g) {
            g = Game.stage.view.animationManager.getLayer("bloodDrips"), g[this.MASK_ID_FREESPINS] = Vikings.Utils.getFreeSpinsReelsMask(!0), g[this.MASK_ID_MAINGAME] = Vikings.Utils.getMainGameReelsMask(!0)
        }
        var e = Y ? this.MASK_ID_FREESPINS : this.MASK_ID_MAINGAME;
        g.removeChild(g[this.MASK_ID_FREESPINS]), g.removeChild(g[this.MASK_ID_MAINGAME]), g.addChild(g[e]), g.mask = g[e]
    }

    function n(e) {
        for (var t = Model.Reels.getReelSymbolNames(e, !1), n = 0; n < t.length; ++n)
            if (Model.Symbol.isHigh(t[n])) {
                this.fireEvent("notify:highSymbols.land", e);
                break
            }
    }

    function a() {
        if (!Model.Win.isWin())
            for (var e = Model.Reels.getReels(), t = 0; t < e.length; t++)
                for (var n = 0; n < e[t].symbols.length; n++) {
                    var a = e[t].symbols[n];
                    "SYM3" === a && o(t, n)
                }
    }

    function i(e) {
        Y = "freespin" === Model.Action.getCurrent()
    }

    function o(e, t) {
        var n = Game.PIXIFactory.createSpineAnimation("symbol"),
            a = Y ? "freeSpins" : "default",
            i = Resources.readData("config"),
            o = i.reelGroups[a].reelLayout,
            r = o.standard.symbolCenterToCenter,
            s = o.standard.symbolWidths.standard,
            d = Game.stage.model.getSymbolConfiguration(e, t, a),
            l = Game.stage.view.animationManager.getLayer("winAnims"),
            m = Y ? 0 : 10;
        n.skeleton.setSkin(null), n.skeleton.setSkinByName("SYM3"), n.x = d.left + s / 2, n.y = d.top + m + r / 2, Y && (n.scale.x = this.SYMBOL_SCALE_FREESPINS, n.scale.y = this.SYMBOL_SCALE_FREESPINS), l.addChild(n), Game.PIXIUtils.resetSpineAnimation(n), n.state.setAnimation(0, "high_winIdle", !0), n.reelIndex = e, n.symbolIndex = t, B.push(n)
    }

    function r() {
        g && g.removeChildren(), Game.stage.view.animationManager.getLayer("winAnims").removeChildren(), B.length = 0
    }

    function s() {
        for (var e = B.length - 1; e >= 0; --e) {
            var t = B[e];
            Model.ShieldWall.isSymbolInside(t.reelIndex, t.symbolIndex) && (Game.stage.view.animationManager.getLayer("winAnims").removeChild(t), B.splice(e, 1))
        }
    }

    function d(e) {
        l(Model.Reels.getReels()[e].symbols, e)
    }

    function l(e, n, a) {
        a = void 0 === a ? e.length - 1 : a;
        var i = e[a].includes("SYM3");
        t(), i && h(n, a), a > 0 && l(e, n, --a)
    }

    function m(e, t) {
        var n = Y ? "freeSpins" : "default",
            a = Resources.readData("config"),
            i = a.reelGroups[n].reelLayout,
            o = i.standard.symbolCenterToCenter;
        return {
            x: i[e].left,
            y: o * t + 40
        }
    }

    function h(e, t) {
        for (var n = m(e, t), a = Y ? "freeSpins" : "default", i = Resources.readData("config"), o = i.reelGroups[a].reelLayout, r = o.standard.symbolCenterToCenter, s = o.standard.symbolWidths.standard, d = Math.round(Math.random() * (f - p)) + p, l = n.x, h = n.y; d-- > 0;) {
            var M = s * u,
                g = -M + Math.random() * (2 * M),
                c = l + s / 2 + g,
                v = r * y;
            S(c, h + r / 2 + (-v + Math.random() * (2 * v)))
        }
    }

    function S(e, t) {
        var n = c[Math.ceil(Math.random() * c.length - 1)],
            a = Math.random() * (I - A) + A,
            i = Game.PIXIFactory.createSpriteWithTexture(n),
            o = Math.random() * (b - L) + L,
            r = (Math.random() * (_ - E) + E) * v,
            s = Math.round(Math.random() * (w - C) + C);
        for (r = Y ? r * this.SYMBOL_SCALE_FREESPINS : r, i.x = e, i.y = t, i.opacity = o, i.width = 0, i.height = 0; s-- > 0;) {
            M(e - 15 + 30 * Math.random(), t)
        }
        g.addChild(i);
        var d = {
            running: !0,
            run: function() {
                i.width < r ? (a = r - i.width < a ? r - i.width : a, i.width += a, i.height += a, i.x = e - i.width / 2, i.y = t - i.height / 2) : Game.stage.view.animationManager.removeFromAnimationLoop(d)
            }
        };
        Game.stage.view.animationManager.addToAnimationLoop(d)
    }

    function M(e, t) {
        var n = G[Math.ceil(Math.random() * G.length - 1)],
            a = Game.PIXIFactory.createSpriteWithTexture(n),
            i = Math.random() * (F - R) + F,
            o = Math.random() * (N - D) + N,
            r = Math.random() * (k - P) + k,
            s = a.width,
            d = Math.random() * (K - x) + K;
        s = Y ? s * this.SYMBOL_SCALE_FREESPINS : s, a.width = s, t += T, a.height = 0, a.alpha = i, a.y = t, g.addChild(a);
        var l = {
            running: !0,
            run: function() {
                a.height += o, o *= d, a.x = e - a.width / 2, a.width / s > .7 && (a.width *= r), o < .001 && Game.stage.view.animationManager.removeFromAnimationLoop(l)
            }
        };
        Game.stage.view.animationManager.addToAnimationLoop(l)
    }
    var g, f = 1,
        p = 2,
        u = .1,
        y = .2,
        c = ["bloodSplatter1", "bloodSplatter2", "bloodSplatter3", "bloodSplatter4", "bloodSplatter5"],
        v = 200,
        A = 25,
        I = 35,
        L = .5,
        b = 1,
        E = .5,
        _ = 1,
        C = 0,
        w = 2,
        G = ["bloodDrip1", "bloodDrip2", "bloodDrip3"],
        R = .3,
        F = .6,
        D = .7,
        N = 2,
        P = .99,
        k = .9905,
        x = .9905,
        K = .991,
        T = -20,
        W = new Sys.Observable,
        Y = !1,
        B = [];
    Vikings.Utils.addAsConstants(this, {
        SYMBOL_SCALE_FREESPINS: .711,
        MASK_ID_MAINGAME: "mainGameMask",
        MASK_ID_FREESPINS: "freeSpinsMask"
    }), W.addListener("notify:spin.reelStoppedSpinning", d), W.addListener("notify:spin.spinAnimationComplete", a), W.addListener("notify:spin.spinAnimationStarted", r), W.addListener("notify:responseParser.responseParsed", i), W.addListener("notify:shieldWall.symbolsCovered", s), W.addListener("notify:stateHandler.enteringFreeSpinOutroState", r), W.addListener("request:environment.startRSTransition", r), W.addListener("notify:spin.reelStopBouncingStarted", n), W.addListener("notify:environment.introComplete", e)
}();
! function() {
    function e() {
        m = !0
    }

    function t() {
        a(), v.fireEvent("request:settingsButton.enable"), m = !0
    }

    function n() {
        Platform.isDesktopDevice ? t() : u()
    }

    function i() {
        p().visible = !1, p().alpha = 0, l()
    }

    function o() {
        if (Platform.isDesktopDevice) {
            var e = p(),
                t = new PIXI.ticker.Ticker;
            d = !0, t.add(function() {
                e.alpha -= .02, (p().alpha <= 0 || b) && (t.stop(), t.destroy(), e.visible = !1, d = !1)
            }), t.start()
        } else {
            l(!0)
        }
    }

    function a() {
        var e = p(),
            t = new PIXI.ticker.Ticker;
        b = !0, e.visible = !0, Platform.isDesktopDevice || r(), t.add(function() {
            Platform.isDesktopDevice ? e.alpha += .02 : c(.02);
            var n = Platform.isDesktopDevice && p().alpha >= 1,
                i = !Platform.isDesktopDevice && s();
            (n || i || d) && (t.stop(), t.destroy(), e.visible = !0, u(), b = !1)
        }), t.start()
    }

    function r() {
        var e = f();
        for (var t in e)
            if (e.hasOwnProperty(t)) {
                var n = e[t],
                    i = n.classList.contains("interface-buttonDisable");
                i || (n.style.visibility = "visible", n.style.display = "block", n.style.opacity = .01)
            }
    }

    function s() {
        for (var e = f(), t = 0; t < e.length; t++) {
            var n = e[t],
                i = !n.style.opacity || Number.isNaN(n.style.opacity),
                o = i || parseFloat(n.style.opacity) >= 1,
                a = n.classList.contains("interface-buttonDisable"),
                r = "hidden" !== n.visibility;
            if (!((o || a) && r)) return !1
        }
        return !0
    }

    function l(e) {
        if (!Platform.isDesktopDevice) {
            var t = e ? document.querySelectorAll("#spinButton") : f();
            for (var n in t)
                if (t.hasOwnProperty(n)) {
                    var i = t[n];
                    i.style.visibility = "hidden", i.style.display = "none", i.style.opacity = 0
                } Sys.isGcmEnabled && v.fireEvent("request:homeButton.hidePermanently")
        }
    }

    function c(e) {
        if (!Platform.isDesktopDevice) {
            var t = f();
            for (var n in t)
                if (t.hasOwnProperty(n)) {
                    var i = t[n],
                        o = i.classList.contains("interface-buttonDisable"),
                        a = !i.style.opacity || Number.isNaN(i.style.opacity) ? 1 : Number.parseFloat(i.style.opacity),
                        r = a + e;
                    r = o ? "" : r, i.style.opacity = r
                }
        }
    }

    function u() {
        var e = y();
        for (var t in e)
            if (e.hasOwnProperty(t)) {
                var n = e[t];
                n.style.visibility = "", n.style.opacity = "", n.style.display = ""
            }
    }

    function f() {
        var e = "#spinButton, #gameFooter, #soundOnOffButton, #netEntLogo, .interface-settingsButton_baseButton",
            t = Resources.readData("gameServerInitResponseObject").autoplay;
        return e += 1 === t.length && 0 !== t[0] || !Resources.readData("gameServerInitResponse").g4mode ? ", .interface-quickSettingsMenu_base" : "", e += Sys.isGcmEnabled ? "" : ", #homeButton", document.querySelectorAll(e)
    }

    function y() {
        var e = "#gameFooter, #soundOnOffButton, #netEntLogo, .interface-settingsButton_baseButton";
        return e += Sys.isGcmEnabled ? "" : ", #homeButton", document.querySelectorAll(e)
    }

    function p() {
        return Game.stage.view.animationManager.getLayer("userInterface")
    }
    var v = new Sys.Observable,
        m = !1,
        d = !1,
        b = !1;
    v.on({
        "notify:freeSpinIntro.restore": n,
        "notify:animationManager.allImagesLoaded": i,
        "request:environment.startRSTransition": o,
        "notify:stateHandler.leavingFreeSpinOutroState": a,
        "request:environment.switchToRS": n,
        "notify:environment.introComplete": e,
        "notify:environment.reelFadeInStarted": function() {
            window.setTimeout(a, 2e3)
        }
    }), Core.KeyboardManagerController.prototype.onSpaceBarPressed = function(e) {
        return function(t) {
            m && e.call(this, t)
        }
    }(Core.KeyboardManagerController.prototype.onSpaceBarPressed)
}();
! function() {
    function n() {
        var n = M * e();
        for (l = l || Game.PIXIFactory.createTextureFromSpineAtlas(v), b = []; b.length < n;) b.push(r())
    }

    function e() {
        return (Vikings.Utils.isWebGLSupported() ? 1 : 0) * (Platform.isDesktopDevice ? 1 : .5)
    }

    function t(n) {
        switch (n) {
            case "megaWin":
                k = .5 * c * e();
                break;
            case "superMegaWin":
                k = c * e();
                break;
            default:
                k = 0
        }
        k > 0 && !F && (F = !0, i(), I.fireEvent("notify:coins.start"))
    }

    function a() {
        F = !1, k = 0
    }

    function i() {
        Vikings.Utils.setGameTimeout(function() {
            for (var n = 0; n < k; n++) {
                if (b.length > 0) {
                    var e = b.pop();
                    e.visible = !0, e.running = !0
                }
            }!!F && i()
        }, Math.random() * h)
    }

    function r() {
        var n = new PIXI.Texture(l),
            e = new PIXI.Sprite(n),
            t = (25 * Math.random() + 65) / 100,
            a = Math.random() < g;
        return e.isForegroundCoin = a, o(a).addChild(e), a && (t = (50 * Math.random() + 150) / 100), e.anchor.set(.5), e.rotation = Math.random(), e.rotationSpeed = Math.random() / 10, e.flipSpeed = Math.random(), e.floatFrameNo = Math.random() * (p * m), e.dropSpeed = 25 * t, e.x = Math.random() * Environment.defaultVirtualResolutions.default.default.width, e.y = -e.height, e.height = e.height * t, e.width = e.width * t, s(e, 0), e.running = !1, e.visible = !1, e.run = function() {
            u(e)
        }, Game.stage.view.animationManager.addToAnimationLoop(e), e
    }

    function o(n) {
        var e = n ? y : w;
        return Game.stage.view.animationManager.getLayer(e)
    }

    function u(n) {
        var e = n.dropSpeed * (F ? 1 : 2);
        d(n), f(n), n.rotation += n.rotationSpeed, n.y += e
    }

    function d(n) {
        n.y > Environment.defaultVirtualResolutions.default.default.height && (n.running = !1, n.visible = !1, n.y = -n.height, b.push(n))
    }

    function f(n) {
        var e = n.floatFrameNo + n.flipSpeed;
        e = Math.round(e) >= p * m ? 0 : e, s(n, e)
    }

    function s(n, e) {
        n.texture.frame = S[Math.round(e)], n.texture._updateUvs(), n.floatFrameNo = e
    }
    var l, h = 200,
        c = 4,
        p = 3,
        m = 5,
        g = .1,
        v = "coinSpriteSheet",
        w = "particlesBackground",
        y = "particlesForeground",
        M = 50,
        S = function() {
            for (var n = [], e = 469 / m, t = 281 / p, a = 0; a < p; a++)
                for (var i = 0; i < m; i++) {
                    var r = e * i,
                        o = t * a;
                    n.push(new PIXI.Rectangle(r, o, e, t))
                }
            return n
        }(),
        I = new Sys.Observable,
        b = [],
        F = !1,
        k = 0;
    I.on({
        "notify:animationManager.allImagesLoaded": n,
        "notify:win.showingWin": t,
        "notify:winBanner.winTypeChanged": t,
        "notify:stateHandler.enteringIdleState": a,
        "request:spin.startSpin": a,
        "notify:scatter.complete": a,
        "notify:winBanner.complete": a
    })
}();
Component.DarkenTripleStack = function() {
    function n(n) {
        n.mask = o, a.show(), h.hide(), p.hide()
    }

    function e(n) {
        n.mask = t, a.hide(), h.show(), p.hide()
    }

    function i(n) {
        n.mask = d, a.hide(), h.hide(), p.show()
    }
    var o, t, d, a, h, p;
    Component.Component.apply(this, arguments), this.init = function() {
        o = new PIXI.Graphics, o.beginFill(0), o.drawRect(0, 0, 158, 166), o.endFill(), t = new PIXI.Graphics, t.beginFill(0), t.drawRect(0, 166, 158, 166), t.endFill(), d = new PIXI.Graphics, d.beginFill(0), d.drawRect(0, 332, 158, 166), d.endFill(), a = new Component.Component, h = new Component.Component, p = new Component.Component, a.addChild(o), h.addChild(t), p.addChild(d), this.addChild(a), this.addChild(h), this.addChild(p)
    }, this.show = function(o, t) {
        switch (o) {
            case 1:
                n(t);
                break;
            case 2:
                e(t);
                break;
            case 3:
                i(t)
        }
    }
}, Component.DarkenTripleStack.prototype = Object.create(Component.Component.prototype);
! function() {
    function t(t) {
        e = "freespin" === t.currentGameState
    }
    var e = !1;
    (new Sys.Observable).addListener("notify:responseParser.responseParsed", t), Component.TripleStacksFire = function() {
        function t(t) {
            e.state.tracks[0].listener = {
                complete: t()
            }
        }
        var e;
        Vikings.Utils.addAsConstants(this, {
            TRIPLE_STACKS_FIRE_SPINE: "tripleStacksFire",
            WIN_INIT_ANIMATION: "winInitTrippleFire",
            WIN_IDLE_ANIMATION: "winIdleTrippleFire",
            TOP_IDLE_ANIMATION: "top",
            MIDDLE_IDLE_ANIMATION: "middle",
            BOTTOM_IDLE_ANIMATION: "bottom"
        }), Component.Component.apply(this, arguments), this.init = function() {
            e = Game.PIXIFactory.createAndAddSpineAnimation(this.TRIPLE_STACKS_FIRE_SPINE, this)
        }, this.winInit = function(i) {
            var n;
            switch (i) {
                case 1:
                    n = this.TOP_IDLE_ANIMATION;
                    break;
                case 2:
                    n = this.MIDDLE_IDLE_ANIMATION;
                    break;
                case 3:
                    n = this.BOTTOM_IDLE_ANIMATION
            }
            return e.state.setAnimation(0, n), new Promise(t)
        }, this.winIdle = function(t) {
            var i;
            switch (t) {
                case 1:
                    i = this.TOP_IDLE_ANIMATION;
                    break;
                case 2:
                    i = this.MIDDLE_IDLE_ANIMATION;
                    break;
                case 3:
                    i = this.BOTTOM_IDLE_ANIMATION
            }
            e.state.setAnimation(0, i, !0)
        }
    }, Component.TripleStacksFire.prototype = Object.create(Component.Component.prototype)
}();
! function() {
    function e(e) {
        m = "freespin" === e.currentGameState, i(e)
    }

    function i(e) {
        var i = p.LAYER_NON_HOTSPOT_REEL;
        if (i) {
            var n = m ? p.NON_HOTSPOT_FS_MASK : p.NON_HOTSPOT_MG_MASK,
                t = m ? p.NON_HOTSPOT_FSI_MASK : p.NON_HOTSPOT_MGI_MASK,
                a = p.LAYER_IDLE_ANIMS_MASKED;
            i.removeChild(p.NON_HOTSPOT_FS_MASK), i.removeChild(p.NON_HOTSPOT_MG_MASK), i.addChild(n), i.mask = n, a.removeChild(p.NON_HOTSPOT_FSI_MASK), a.removeChild(p.NON_HOTSPOT_MGI_MASK), a.addChild(t), a.mask = t
        }
    }

    function n() {
        var e;
        for (e in N) N.hasOwnProperty(e) && (p.LAYER_HOTSPOT_REEL.removeChild(N[e]), p.LAYER_IDLE_ANIMATIONS.removeChild(N[e]), p.LAYER_IDLE_ANIMS_MASKED.removeChild(N[e]), N[e] = void 0);
        for (e in T) T.hasOwnProperty(e) && (p.LAYER_HOTSPOT_REEL.removeChild(T[e]), p.LAYER_IDLE_ANIMATIONS.removeChild(T[e]), p.LAYER_IDLE_ANIMS_MASKED.removeChild(T[e]), T[e] = void 0);
        for (e in L) L.hasOwnProperty(e) && (p.LAYER_NON_HOTSPOT_REEL.removeChild(L[e]), L[e] = void 0);
        for (e in O) O.hasOwnProperty(e) && (p.LAYER_TRIPLE_STACKS_FIRE.removeChild(O[e]), p.LAYER_TRIPLE_STACKS_FIRE_INDIVIDUAL.removeChild(O[e]), O[e] = void 0);
        for (e in d) d.hasOwnProperty(e) && (p.LAYER_NON_HOTSPOT_REEL.removeChild(d[e]), d[e] = void 0)
    }

    function t(e, i, n, t, a, o) {
        var r = new Component.TripleStacksFire,
            _ = S(e, i),
            l = e + "" + i,
            E = Environment.determineResolution().virtualToWindowScale;
        m && (r.scale.x = p.FREE_SPINS_SCALE, r.scale.y = p.FREE_SPINS_SCALE), r.init(), (o ? p.LAYER_TRIPLE_STACKS_FIRE : p.LAYER_TRIPLE_STACKS_FIRE_INDIVIDUAL).addChild(r), r.x = _.x, r.y = _.y, r.winInit(a).then(r.winIdle.bind(r, a)), O[e + "" + i] = r;
        var A = p.ANIMATION_SMALL_WIN;
        if (L[l] = L[l] || s(e, A, t, _), n) {
            var I = new Component.DarkenTripleStack;
            I.init(), I.x = _.x - 83.5 + 5, I.y = _.y - 250, d[e + "" + i] = I, I.show(a, L[e + "" + i]), p.LAYER_NON_HOTSPOT_REEL.addChild(I)
        }
        m || n || 0 !== i || 1 !== a || (y[e] || (y[e] = M.createAndAddEffect(p.SPARKS_EFFECT + "_" + e, p.SPARKS_EFFECT, p.LAYER_SPARKS_EFFECT, new PIXI.Point(_.x * E, (_.y + 250) * E))), M.resetEffect(p.SPARKS_EFFECT + "_" + e), M.playEffect(p.SPARKS_EFFECT + "_" + e))
    }

    function a(e, i) {
        O[e + "" + i] && (p.LAYER_TRIPLE_STACKS_FIRE.removeChild(O[e + "" + i]), p.LAYER_TRIPLE_STACKS_FIRE_INDIVIDUAL.removeChild(O[e + "" + i]), O[e + "" + i] = void 0), L[e + "" + i] && (p.LAYER_NON_HOTSPOT_REEL.removeChild(L[e + "" + i]), L[e + "" + i] = void 0), d[e + "" + i] && (p.LAYER_NON_HOTSPOT_REEL.removeChild(d[e + "" + i]), d[e + "" + i] = void 0);
        for (var n in y) y.hasOwnProperty(n) && y[n].effect.pauseGeneratorsInAllEmitters()
    }

    function o() {
        var e = {
                reelColumn: 0,
                reelRow: 2,
                symbolId: "SYM4-STACKED",
                type: "outside"
            },
            i = {
                reelColumn: 4,
                reelRow: 2,
                symbolId: "SYM5-STACKED",
                type: "outside"
            };
        _(0, e), _(4, i)
    }

    function r(e) {
        N[e] = _(e)
    }

    function _(e, i) {
        var n = i || A(e);
        if (null !== n.reelRow && null !== n.reelColumn) {
            var t = n.isLandedInHotspot,
                a = Model.Reels.getOverlaySymbols().length > 0,
                o = n.type === p.LANDED_INSIDE_OF_HOTSPOT && a ? p.ANIMATION_HIT : p.ANIMATION_IDLE,
                r = n.symbolId,
                e = n.reelColumn,
                _ = S(e, n.reelRow);
            if (t && I.fireEvent("notify:tripleStackAnimations.hotSpotLanded"), o === p.ANIMATION_IDLE && (m || a)) return;
            T[e] = s(n, o, r, _, !0)
        }
    }

    function s(e, i, n, t, a) {
        var o = e.reelColumn,
            r = e.reelRow,
            _ = i === p.ANIMATION_IDLE,
            s = function() {
                var e = m ? "freespins" : "maingame",
                    n = "pos" + t.x + "-" + t.y,
                    a = void 0 !== o && void 0 !== r,
                    _ = void 0 !== R[e] && void 0 !== R[e]["anim" + i] && void 0 !== R[e]["anim" + i][n];
                return !_ || a && !p.DISABLE_TRIPLE_STACK_CACHE || (delete R[e]["anim" + i][n], _ = !1), _ || (R[e] = R[e] || new Object, R[e]["anim" + i] = R[e]["anim" + i] || new Object, R[e]["anim" + i][n] = Game.PIXIFactory.createSpineAnimation("tripleStacks"), m && (R[e]["anim" + i][n].scale.x *= .711, R[e]["anim" + i][n].scale.y *= .711)), Game.PIXIUtils.resetSpineAnimation(R[e]["anim" + i][n]), R[e]["anim" + i][n]
            }();
        return s.parentLayer = function() {
            if (i === p.ANIMATION_IDLE) {
                var e = m ? 5 : 3;
                return r > 1 && r < e ? p.LAYER_IDLE_ANIMATIONS : p.LAYER_IDLE_ANIMS_MASKED
            }
            return a || s.isOnHotspot ? (s.isOnHotspot = !0, p.LAYER_HOTSPOT_REEL) : p.LAYER_NON_HOTSPOT_REEL
        }(), s.parentLayer.addChild(s), t && (s.position.x = t.x, s.position.y = t.y), n && (s.skeleton.setSkin(null), s.skeleton.setSkinByName(n)), s.state.setAnimation(0, i, _), s
    }

    function S(e, i) {
        var n = m ? "freeSpins" : "default",
            t = Vikings.symbolPositions[n][e][i],
            a = Vikings.symbolPositions[n].symbolSize,
            o = {
                x: t.x,
                y: t.y
            };
        return l(e, i) ? o.y += a : E(e, i) && (o.y -= a), o
    }

    function l(e, i) {
        var n = Model.Reels.getReels()[e].symbols[i];
        return !!n && n.includes("1")
    }

    function E(e, i) {
        var n = Model.Reels.getReels(),
            t = n[e].symbols[i];
        return void 0 !== t ? !!t && t.includes("3") : n[e].symbols[i - 2]
    }

    function A(e) {
        var i = Model.Reels.getStackedBottom(e),
            n = m ? 3 : 2,
            t = m ? e > 1 && e < 5 : 2 === e,
            a = Model.HotSpot.getSymbolName(),
            o = t && i && i.symbolIndex === n && i.symbolName === a;
        return {
            type: o ? p.LANDED_INSIDE_OF_HOTSPOT : p.LANDED_OUTSIDE_OF_HOTSPOT,
            reelRow: i ? i.symbolIndex : null,
            symbolId: i ? i.symbolName + "-STACKED" : null,
            reelColumn: e,
            isLandedInHotspot: o
        }
    }
    var I = new Sys.Observable,
        d = {},
        O = {},
        L = {},
        T = {},
        N = {},
        m = !1,
        R = {},
        M = new Neutrino.NeutrinoHandler,
        y = {},
        p = this;
    I.addListener("notify:animationManager.allImagesLoaded", function() {
        Vikings.Utils.addAsConstants(p, {
            DISABLE_TRIPLE_STACK_CACHE: !0,
            LANDED_OUTSIDE_OF_HOTSPOT: "outside",
            LANDED_INSIDE_OF_HOTSPOT: "inside",
            DID_NOT_LAND: "noland",
            ANIMATION_LAND: "trippleLand",
            ANIMATION_IDLE: "trippleIdle",
            ANIMATION_HIT: "trippleHit",
            ANIMATION_SMALL_WIN: "trippleSmallWin",
            SPARKS_EFFECT: "tripleStacksSparks",
            LAYER_SPARKS_EFFECT: Game.stage.view.animationManager.getLayer("particlesBackground"),
            LAYER_IDLE_ANIMS_MASKED: Game.stage.view.animationManager.getLayer("idleSymbolsMasked"),
            LAYER_IDLE_ANIMATIONS: Game.stage.view.animationManager.getLayer("idleSymbols"),
            LAYER_HOTSPOT_REEL: Game.stage.view.animationManager.getLayer("winAnims"),
            LAYER_NON_HOTSPOT_REEL: Game.stage.view.animationManager.getLayer("winAnimsMasked"),
            NON_HOTSPOT_MG_MASK: Vikings.Utils.getMainGameReelsMask(),
            NON_HOTSPOT_FS_MASK: Vikings.Utils.getFreeSpinsReelsMask(),
            NON_HOTSPOT_MGI_MASK: Vikings.Utils.getMainGameReelsMask(),
            NON_HOTSPOT_FSI_MASK: Vikings.Utils.getFreeSpinsReelsMask(),
            LAYER_TRIPLE_STACKS_FIRE: Game.stage.view.animationManager.getLayer("tripleStacksFire"),
            LAYER_TRIPLE_STACKS_FIRE_INDIVIDUAL: Game.stage.view.animationManager.getLayer("tripleStacksFireIndividual"),
            FREE_SPINS_SCALE: .711
        }), M.init()
    }), I.addListener("notify:spin.spinAnimationStarted", n), I.addListener("notify:spin.reelStoppedSpinning", r), I.addListener("notify:responseParser.responseParsed", e), I.addListener("notify:win.showingWin", n), I.addListener("notify:stateHandler.enteringFreeSpinIntroState", n), I.addListener("notify:stateHandler.enteringFreeSpinOutroState", n), I.addListener("request:tripleStacks.playWinAnimation", t), I.addListener("request:tripleStacks.stopWinAnimation", a), I.addListener("notify:featureSplash.closed", o)
}();
Component.FeatureSplash = {}, Component.FeatureSplash.Background = function() {
    var t;
    Vikings.Utils.addAsConstants(this, {
        SPLASH_SPINE: "splashScreen",
        SPLASH_SPINE_INTRO: "backgroundSplashIntro",
        SPLASH_SPINE_INTRO_IDLE: "backgroundSplashIntroIdle",
        SPLASH_SPINE_INTRO_IDLE_FX: "BackgroundSplashLightningFX"
    }), Component.Component.apply(this, arguments), this.init = function() {
        t = Game.PIXIFactory.createAndAddSpineAnimation(this.SPLASH_SPINE, this)
    }, this.idle = function() {
        t.state.setAnimation(0, this.SPLASH_SPINE_INTRO_IDLE, !0), t.state.setAnimation(1, this.SPLASH_SPINE_INTRO_IDLE_FX, !0)
    }, this.dimEffects = function() {
        t.state.clearTrack(1)
    }, this.transition = function(n) {
        return n ? (t.state.clearTrack(0), t.skeleton.setToSetupPose()) : t.state.setAnimation(1, this.SPLASH_SPINE_INTRO_IDLE_FX, !0), t.state.setAnimation(0, this.SPLASH_SPINE_INTRO), new Promise(function(n) {
            t.state.tracks[0].listener = {
                complete: n
            }
        })
    }
}, Component.FeatureSplash.Background.prototype = Object.create(Component.Component.prototype);
Sys.ns("Vikings"), Vikings.FeatureSplash = {
    constructor: function() {
        Vikings.FeatureSplash.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            featureSplash: {
                state: {
                    name: "FeatureSplash",
                    execute: function() {},
                    waitEvents: {
                        "notify:featureSplash.closed": !1
                    }
                }
            },
            beforeLoaderClose: {
                queue: [function(e) {
                    Model.Action.isRestore() || e.stateHandler.pushState(e.states.featureSplash)
                }]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            view: Vikings.FeatureSplashView,
            controller: Vikings.FeatureSplashController
        }
    }
}, Vikings.FeatureSplash = Sys.extend(Core.Module, Vikings.FeatureSplash, "Vikings.FeatureSplash");
Sys.ns("Vikings"), Vikings.FeatureSplashView = {
    CONTINUE_BUTTON_STYLE: {
        x: 640,
        y: 560,
        labelWidth: 240
    },
    CHECKBOX_STYLE: {
        x: 640,
        y: 630,
        labelWidth: 340,
        labelStyle: Game.TextStyles.SKIP_CHECK_BOX
    },
    CHECKBOX_IOS_POSITION: {
        x: 1e3,
        y: 574
    },
    constructor: function() {
        Vikings.FeatureSplashView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var e = new PIXI.Container,
            t = Game.stage.view.animationManager.getLayer("splashScreens");
        this.components = {
            background: this.addComponent(new Component.FeatureSplash.Background, e)
        }, this.components.background.position.y = 720, this.button = e.addChild(this.createContinueButton({
            x: this.CONTINUE_BUTTON_STYLE.x,
            y: this.CONTINUE_BUTTON_STYLE.y
        }, !1)), this.button.name = "continueButton";
        var i = {
            x: this.CHECKBOX_STYLE.x,
            y: this.CHECKBOX_STYLE.y
        };
        Platform.isDesktopDevice && (this.button.y -= 10, i.y -= 10), Platform.isIOSDevice && (i = {
            x: this.CHECKBOX_IOS_POSITION.x,
            y: this.CHECKBOX_IOS_POSITION.y
        }), this.checkbox = e.addChild(this.createCheckbox({
            x: i.x,
            y: i.y
        }, !1)), e.visible = !1;
        var n = new PIXI.Graphics;
        n.beginFill(0, 1), n.drawRect(0, 0, 1280, 2), n.endFill(), t.addChild(e), t.addChild(n), this.legalLine = new Component.TextArea(Vikings.Strings.legalLine, (Platform.isDesktopDevice, 2100), Platform.isDesktopDevice ? 180 : 190, Platform.isDesktopDevice ? 670 : 680, Platform.isDesktopDevice ? {
            fontFamily: Game.TextStyles.LEGAL_LINE.fontFamily,
            fontSize: Game.TextStyles.LEGAL_LINE.fontSize,
            fill: Game.TextStyles.LEGAL_LINE.fill,
            align: "center"
        } : {
            fontFamily: Game.TextStyles.LEGAL_LINE_MOBILE.fontFamily,
            fontSize: Game.TextStyles.LEGAL_LINE_MOBILE.fontSize,
            fill: Game.TextStyles.LEGAL_LINE_MOBILE.fill,
            align: "center"
        }), this.legalLine.init(), e.addChild(this.legalLine), this.container = e
    },
    show: function() {
        this.container.visible = !0
    },
    hide: function() {
        this.container.visible = !1
    },
    showInformation: function() {
        this.button.setEnabled(!0), this.button.visible = !0, this.checkbox.setEnabled(!0), this.checkbox.visible = !0, this.components.background.idle()
    },
    startTransition: function(e) {
        this.fireEvent("view:transitionStart"), this.components.background.transition(e).then(function() {
            this.fireEvent("view:transitionComplete"), this.container.destroy(!0), this.components.background.destroy(!0)
        }.bind(this)), this.legalLine.hide()
    },
    dimEffects: function() {
        this.components.background.dimEffects()
    },
    createContinueButton: function(e, t) {
        var i = new Interface.utils.PIXIButton("continueButtonUp", "continueButtonDown", "continueButtonOver", "continueButtonDisabled");
        return i.id = "featureSplashContinue", i.clickCallback = this.onButtonClick.bind(this, !0), i.setLabel(Services.languageManager.getText(Language.Keys.continue_uc)), i.setLabelUpStyle(Game.TextStyles.CONTINUE_BUTTON), i.setLabelDownStyle(Game.TextStyles.CONTINUE_BUTTON), i.setLabelOverStyle(Game.TextStyles.CONTINUE_BUTTON), i.setLabelDisabledStyle(Game.TextStyles.CONTINUE_BUTTON), i.setLabelMaxWidth(this.CONTINUE_BUTTON_STYLE.labelWidth), i.setLabelPosition(new PIXI.Point(i.width / 2, i.height / 2)), i.setLabelAnchorPoint(new PIXI.Point(.5, .5)), i.setCustomHitArea(new PIXI.Rectangle(0, 0, i.width, i.height)), i.position.x = Math.round(e.x - i.width / 2), i.position.y = e.y, i.anchor = new PIXI.Point(.5, .5), i.visible = t, i.setEnabled(t), this.continueButton = i, i
    },
    createCheckbox: function(e, t) {
        var i = new Interface.utils.PIXICheckBox("checkboxUnchecked", "checkboxUnchecked", "checkboxUnchecked", "checkboxUnchecked", "checkboxChecked", "checkboxChecked", "checkboxChecked", "checkboxChecked");
        return i.id = "featureSplashCheckbox", i.setLabel(Services.languageManager.getText("dontShowNextTime")), i.setLabelStyle(this.CHECKBOX_STYLE.labelStyle), i.clickCallback = this.onCheckboxChange.bind(this), i.setLabelMaxWidth(this.CHECKBOX_STYLE.labelWidth), i.updateLabel(), i.position.x = this.getCheckboxPosition(e, i), i.position.y = e.y, i.anchor = new PIXI.Point(.5, .5), i.visible = t, i.setEnabled(t), i
    },
    getCheckboxPosition: function(e, t) {
        return Math.round(e.x - (t.labelText.width + t.graphics.width) / 2)
    },
    onCheckboxChange: function() {
        this.checkbox.toggleSelected(), this.fireEvent("view:checkboxChanged", this.checkbox.selected)
    },
    onButtonClick: function(e) {
        this.startTransition(e), this.button.visible = !1, this.checkbox.setEnabled(!1), this.checkbox.visible = !1, this.fireEvent("view:continue")
    }
}, Vikings.FeatureSplashView = Sys.extend(Core.View, Vikings.FeatureSplashView, "Vikings.FeatureSplashView");
Sys.ns("Vikings"), Vikings.FeatureSplashMobileView = {
    CONTINUE_BUTTON_STYLE: {
        x: 640,
        y: 565,
        labelWidth: 170
    },
    CHECKBOX_STYLE: {
        x: 640,
        y: 635,
        labelWidth: 340,
        labelStyle: Game.TextStyles.SKIP_CHECK_BOX_MOBILE
    },
    constructor: function() {
        Vikings.FeatureSplashMobileView.superclass.constructor.apply(this, arguments)
    },
    show: function() {
        this.container.visible = !0, document.getElementById("ticker").style.width = "0px"
    },
    hide: function() {
        this.container.visible = !1, document.getElementById("ticker").style.width = ""
    }
}, Vikings.FeatureSplashMobileView = Sys.extend(Vikings.FeatureSplashView, Vikings.FeatureSplashMobileView, "Vikings.FeatureSplashMobileView");
Sys.ns("Vikings"), Vikings.FeatureSplashController = {
    AUTO_CLOSE_DURATION: 41e3,
    constructor: function() {
        Vikings.FeatureSplashController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:animationManager.allImagesLoaded": this.view.initAnimations.bind(this.view),
            "notify:stateHandler.enteringFeatureSplashState": this.onEnteringFeatureSplashState,
            "notify:environment.reelFadeInStarted": this.onReelFadeIn,
            "request:featureSplash.close": this.view.onButtonClick.bind(this.view),
            "view:continue": this.onContinue,
            "view:transitionStart": this.onTransitionStart,
            "view:checkboxChanged": this.onCheckboxChanged,
            "view:transitionComplete": this.onTransitionComplete
        })
    },
    onEnteringFeatureSplashState: function() {
        var e = "";
        Services.settingsManager.getSetting("showFeatureSplash") ? (this.view.show(), this.view.showInformation(), this.autoContinue = Vikings.Utils.setGameTimeout(this.view.onButtonClick.bind(this.view), this.AUTO_CLOSE_DURATION), this.fireEvent("request:ambienceManager.ambienceChangeActive", {
            name: "ambienceFeatureSplash"
        }), this.fireEvent("notify:featureSplash.showing"), e = "startState") : (this.fireEvent("notify:featureSplash.transitionSkipped"), this.fireEvent("notify:featureSplash.closed"));
        document.getElementById("canvasAnimationManager").className = e
    },
    onContinue: function() {
        Vikings.Utils.clearGameTimer(this.autoContinue)
    },
    onCheckboxChanged: function(e) {
        Services.settingsManager.storeSetting("showFeatureSplash", !e, !0)
    },
    onTransitionStart: function() {
        this.fireEvent("request:ambienceManager.ambienceChangeActive", {
            name: "ambienceGeneral"
        }), this.fireEvent("notify:featureSplash.transitionStart");
        var e = document.getElementById("canvasAnimationManager");
        e.className;
        e.className = "zoomIn", window.setTimeout(function() {
            e.className = ""
        }, 2e3)
    },
    onTransitionComplete: function() {
        this.view.hide(), this.fireEvent("notify:featureSplash.closed")
    },
    onReelFadeIn: function() {
        this.view.dimEffects()
    }
}, Vikings.FeatureSplashController = Sys.extend(Core.Controller, Vikings.FeatureSplashController, "Vikings.FeatureSplashController");
Component.ShieldWall = function() {
    var t;
    Vikings.Utils.addAsConstants(this, {
        SHIELD_WALL_SPINE: "shieldWall",
        SKIN_STRING: "shields",
        ANIM_STRING: "wall",
        ANIM_END_STRING: "Fallout",
        MAIN_GAME_SPINE_OFFSET: {
            x: 22,
            y: 8
        },
        MAIN_GAME_SPINE_SCALE_COMPENSATION: 1.01,
        FREE_SPINS_SPINE_OFFSET: {
            x: 22,
            y: 4
        },
        FREE_SPINS_SPINE_SCALE_COMPENSATION: .72
    }), Component.Component.apply(this, arguments), this.init = function() {
        t = Game.PIXIFactory.createAndAddSpineAnimation(this.SHIELD_WALL_SPINE, this), this.hide()
    }, this.playIntro = function(e, i, n, s) {
        Game.PIXIUtils.resetSpineAnimation(t), this.show();
        var S = n + "x" + s,
            a = this.MAIN_GAME_SPINE_OFFSET.x,
            E = this.MAIN_GAME_SPINE_OFFSET.y,
            N = this.MAIN_GAME_SPINE_SCALE_COMPENSATION,
            o = Resources.readData("config").reelGroups.default.reelLayout.standard.symbolCenterToCenter,
            _ = "freespin" === Model.Action.getGameState();
        switch (t.skeleton.setSkin(null), t.skeleton.setSlotsToSetupPose(), t.skeleton.setSkinByName(this.SKIN_STRING + S), t.state.setAnimation(0, this.ANIM_STRING + S), S) {
            case "5x3":
                E = this.FREE_SPINS_SPINE_OFFSET.y, N = this.FREE_SPINS_SPINE_SCALE_COMPENSATION;
                break;
            case "5x2":
                _ ? (E = this.FREE_SPINS_SPINE_OFFSET.y - o, N = this.FREE_SPINS_SPINE_SCALE_COMPENSATION) : E += -o;
                break;
            case "4x2":
                N = this.FREE_SPINS_SPINE_SCALE_COMPENSATION, E = this.FREE_SPINS_SPINE_OFFSET.y - o;
                break;
            case "3x2":
                a += 2 * -o, E += -o
        }
        return t.x = e + a * N, t.y = i + E * N, t.scale.x = N, t.scale.y = N, this.introAnimationName = this.ANIM_STRING + S, new Promise(function(e) {
            t.state.tracks[0].listener = {
                event: function(t, e) {
                    "land" === e.data.name && this.onLand()
                }.bind(this),
                complete: e.bind(this)
            }
        }.bind(this))
    }, this.playOutro = function() {
        return t.state.clearTrack(0), t.state.setAnimation(0, this.introAnimationName + this.ANIM_END_STRING), new Promise(function(e) {
            t.state.tracks[0].listener = {
                complete: e.bind(this)
            }
        }.bind(this))
    }, this.onLand = function() {}
}, Component.ShieldWall.prototype = Object.create(Component.Component.prototype);
Sys.ns("Vikings"), Vikings.ShieldWall = {
    constructor: function() {
        Vikings.ShieldWall.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            shieldWall: {
                state: {
                    name: "ShieldWall",
                    execute: function(e) {
                        Model.Win.getBetways(Model.Win.SECOND_WIN).length > 0 && "freespin" === Model.Action.getGameState() && e.stateHandler.pushState(e.states.win)
                    },
                    waitEvents: {
                        "notify:shieldWall.complete": !1
                    }
                }
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            view: Vikings.ShieldWallView,
            controller: Vikings.ShieldWallController
        }
    }
}, Vikings.ShieldWall = Sys.extend(Core.Module, Vikings.ShieldWall, "Vikings.ShieldWall");
Sys.ns("Vikings"), Vikings.ShieldWallView = {
    components: {},
    shieldWallData: {},
    constructor: function() {
        Vikings.ShieldWallView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var i = Game.stage.view.animationManager.getLayer("shieldWall"),
            l = new PIXI.Container;
        i.addChild(l), this.createAndAddShieldWall(l, this.components)
    },
    createAndAddShieldWall: function(i, l) {
        var e = new Component.ShieldWall;
        e.init(), e.onLand = this.onShieldWallLand.bind(this), i.addChild(e), l.shieldWall = e
    },
    playShieldWall: function(i, l, e, n, t, a) {
        var d = a ? "freeSpins" : "default",
            s = Game.stage.model.getSymbolConfiguration(i, l, d),
            o = this.shieldWallData;
        o.reelIndex = i, o.symbolIndex = l, o.width = e, o.height = n, o.symbolName = t, this.components.shieldWall.playIntro(s.left, s.top, e, n).then(this.onShieldWallIntroEnd.bind(this))
    },
    onShieldWallAnimationComplete: function() {
        this.components.shieldWall.hide(), this.fireEvent("view:shieldWallAnimationComplete")
    },
    onShieldWallIntroEnd: function() {
        var i = this.shieldWallData;
        this.fireEvent("view:shieldWallCoveringSymbols", i.reelIndex, i.symbolIndex, i.width, i.height, i.symbolName), this.components.shieldWall.playOutro().then(this.onShieldWallAnimationComplete.bind(this))
    },
    onShieldWallLand: function() {
        this.fireEvent("view:shieldWallLand")
    }
}, Vikings.ShieldWallView = Sys.extend(Core.View, Vikings.ShieldWallView, "Vikings.ShieldWallView");
Sys.ns("Vikings"), Vikings.ShieldWallController = {
    data: {},
    constructor: function() {
        Vikings.ShieldWallController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:animationManager.allImagesLoaded": this.view.initAnimations.bind(this.view),
            "notify:stateHandler.enteringShieldWallState": this.onEnteringShieldWallState,
            "notify:userInputManager.userInputEnded": this.skipAnimation,
            "view:shieldWallAnimationComplete": this.onShieldWallAnimationComplete,
            "view:shieldWallCoveringSymbols": this.onShieldWallCoveringSymbols,
            "view:shieldWallLand": this.onShieldWallLand,
            "request:abortPresentation": this.skipAnimation
        })
    },
    onServerResponse: function(i) {
        var e = this.data;
        e.isShieldWall = Model.Action.isShieldWall(), e.shieldWallData = Model.ShieldWall.getData(), e.isInFreeSpins = "freespin" === i.currentGameState
    },
    onEnteringShieldWallState: function() {
        this.playShieldWall(), this.fireEvent("notify:shieldWall.start")
    },
    onShieldWallAnimationComplete: function() {
        this.sheldWallOutroState = !1, this.fireEvent("notify:shieldWall.complete")
    },
    onShieldWallCoveringSymbols: function(i, e, l, t, n) {
        for (var s = [
                [],
                [],
                [],
                [],
                [],
                [],
                []
            ], a = 0; a < l; ++a)
            for (var o = 0; o < t; ++o) {
                s[a + i][o + e] = n;
                var h = Model.Reels.getSymbolName(a + i, o + e, !1);
                h.contains("STACKED-3") && (h = h.substr(0, 4), s[a + i][o + e - 1] = h, s[a + i][o + e - 2] = h)
            }
        this.fireEvent("notify:shieldWall.symbolsCovered", i, e, l, t, n), this.fireEvent("request:spin.setSymbols", s, !1), this.sheldWallIntroState = !1, this.sheldWallOutroState = !0
    },
    onShieldWallLand: function() {
        this.fireEvent("notify:shieldWall.land")
    },
    playShieldWall: function() {
        Vikings.Utils.setGameTimeout(function() {
            var i = this.data.shieldWallData;
            this.view.playShieldWall(i.reelIndex, i.symbolIndex, i.width, i.height, i.symbolName, this.data.isInFreeSpins), this.sheldWallIntroState = !0
        }.bind(this), 300)
    },
    skipAnimation: function() {
        this.sheldWallIntroState ? this.view.onShieldWallIntroEnd() : this.sheldWallOutroState && this.view.onShieldWallAnimationComplete()
    }
}, Vikings.ShieldWallController = Sys.extend(Core.Controller, Vikings.ShieldWallController, "Vikings.ShieldWallController");
Vikings.DarkenFilter = function() {
    PIXI.Filter.call(this, null, "precision mediump float;varying vec2 vTextureCoord;uniform float delta;uniform sampler2D uSampler;void main(void){   vec4 color = texture2D(uSampler, vTextureCoord);   color.r = color.r - (color.r * delta);   color.g = color.g - (color.g * delta);   color.b = color.b - (color.b * delta * 0.95);   gl_FragColor = color;}", {
        delta: {
            type: "1f",
            value: 0
        }
    })
}, Vikings.DarkenFilter.prototype = Object.create(PIXI.Filter.prototype);
Sys.ns("Vikings"), Vikings.Darken = {
    constructor: function() {
        Vikings.Darken.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            view: Vikings.DarkenView,
            controller: Vikings.DarkenController
        }
    }
}, Vikings.Darken = Sys.extend(Core.Module, Vikings.Darken, "Vikings.Darken");
Sys.ns("Vikings"), Vikings.DarkenView = {
    filters: {},
    constructor: function() {
        Vikings.DarkenView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        this.initFilters(this.filters)
    },
    initFilters: function(i) {
        var e = Game.stage.view.animationManager.getLayer("reel"),
            n = Game.stage.view.animationManager.getLayer("symbolOverlays"),
            t = new Vikings.DarkenFilter;
        e.filters = [t], n.filters = [t], i.winFilter = t
    },
    darkenNonWinLayers: function() {
        this.darken(this.filters.winFilter)
    },
    lightenNonWinLayers: function() {
        this.lighten(this.filters.winFilter)
    },
    darken: function(i) {
        this.setFilterValue(i, .4)
    },
    lighten: function(i) {
        this.setFilterValue(i, 0)
    },
    setFilterValue: function(i, e) {
        i.uniforms.delta = e
    }
}, Vikings.DarkenView = Sys.extend(Core.View, Vikings.DarkenView, "Vikings.DarkenView");
Sys.ns("Vikings"), Vikings.DarkenController = {
    constructor: function() {
        Vikings.DarkenController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:animationManager.allImagesLoaded": this.view.initAnimations.bind(this.view),
            "notify:win.showingWin": this.darkenNonWinLayers,
            "notify:spin.spinAnimationStarted": this.lightenNonWinLayers,
            "notify:settingsManager.settingChanged": this.onSettingsChanged,
            "notify:stateHandler.enteringScatterWinState": this.darkenNonWinLayers,
            "notify:stateHandler.enteringFreeSpinOutroState": this.lightenNonWinLayers,
            "notify:winBanner.complete": this.onWinBannerComplete
        })
    },
    darkenNonWinLayers: function() {
        this.view.darkenNonWinLayers()
    },
    lightenNonWinLayers: function() {
        this.view.lightenNonWinLayers()
    },
    onWinBannerComplete: function(n) {
        n === Model.Win.FIRST_WIN && this.view.lightenNonWinLayers()
    },
    onSettingsChanged: function(n) {
        "betLevel" !== n && "denomination" !== n || this.view.lightenNonWinLayers()
    }
}, Vikings.DarkenController = Sys.extend(Core.Controller, Vikings.DarkenController, "Vikings.DarkenController");
! function() {
    function e() {
        c = Game.PIXIFactory.createSpineAnimation(p), f = Game.stage.view.animationManager.getLayer(S), c.x = 0, c.y = k, f.addChild(c), c.visible = !1
    }

    function n() {
        var e = Services.settingsManager.getSetting("quickSpin");
        W || (q = !1, b = !0, l = Vikings.Utils.setGameTimeout(t, e ? y : v))
    }

    function t() {
        u.fireEvent("notify:spin.nearWinStarting"), u.fireEvent("request:background.enterDarkenedBG"), c.visible = !0, Game.PIXIUtils.resetSpineAnimation(c), c.state.setAnimation(G, g), c.state.tracks[G].listener = {
            complete: i
        }
    }

    function i() {
        c.state.setAnimation(G, m, !0)
    }

    function a() {
        c.lastTime = null, c.state.setAnimation(G, d), c.state.tracks[G].listener = {
            complete: r
        }, u.fireEvent("notify:spin.nearWinStopping")
    }

    function r() {
        b && (W && u.fireEvent("request:background.exitDarkenedBG"), b = !1, u.fireEvent("notify:spin.nearWinStopped"), c.visible = !1, Vikings.Utils.clearGameTimer(l))
    }

    function s() {
        W = !0, b && r()
    }

    function o() {
        q = !0, W = !1, b && (a(), u.fireEvent("request:background.exitDarkenedBG"))
    }
    var l, f, c, u = new Sys.Observable,
        g = "nearWinReel5Intro",
        m = "nearWinReel5Loop",
        d = "nearWinReel5Extro",
        S = "nearWin",
        p = "nearWin",
        v = 700,
        y = 400,
        k = 720,
        W = !1,
        b = !1,
        q = !1,
        G = 0;
    u.on({
        "notify:animationManager.allImagesLoaded": e,
        "request:nearWin.start": n,
        "notify:spin.spinAnimationStarted": r,
        "notify:stateHandler.enteringShieldWallState": s,
        "notify:stateHandler.enteringWinState": r,
        "notify:stateHandler.enteringScatterWinState": r,
        "notify:quickStopper.quickStop": s,
        "notify:stateHandler.enteringIdleState": o,
        "request:environment.startRSTransition": r
    })
}();
Component.Scatter = function() {
    var t;
    Vikings.Utils.addAsConstants(this, {
        SCATTER_SPINE: "scatter"
    }), Component.Component.apply(this, arguments), this.init = function() {
        t = Game.PIXIFactory.createAndAddSpineAnimation(this.SCATTER_SPINE, this)
    }, this.attention = function(n, e) {
        var i = Model.Scatter.getAttentionAnimationName(e);
        return Game.PIXIUtils.resetSpineAnimation(t), t.state.setAnimation(0, i), new Promise(this.promiseToCompleteTrack0.bind(this))
    }, this.fire = function(n) {
        var e = Model.Scatter.getFireAnimationName(n);
        t.state.setAnimation(1, e, !0)
    }, this.promiseToCompleteTrack0 = function(n) {
        t.state.tracks[0].listener = {
            complete: n,
            event: function(t, e) {
                "raidscreenIntro_transition" === e.data.name && n(), e.data.name.contains("Hit") && this.onArrowHit(e.data.name)
            }.bind(this)
        }
    }, this.onArrowHit = function(t) {}
}, Component.Scatter.prototype = Object.create(Component.Component.prototype);
Sys.ns("Vikings"), Vikings.Scatter = {
    constructor: function() {
        Vikings.Scatter.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            scatterWin: {
                state: {
                    name: "ScatterWin",
                    execute: function(t) {},
                    waitEvents: {
                        "notify:scatter.complete": !1
                    }
                }
            },
            stopped: {
                queue: [function(t) {
                    this.controller.data.isScatterWin && t.stateHandler.pushState(t.states.scatterWin)
                }.bind(this)]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            view: Vikings.ScatterView,
            controller: Vikings.ScatterController
        }
    }
}, Vikings.Scatter = Sys.extend(Core.Module, Vikings.Scatter, "Vikings.Scatter");
Sys.ns("Vikings"), Vikings.ScatterView = {
    MASK_HEIGHT: 550,
    SCATTER_FIRE_DELAY_TIME: 500,
    components: {},
    constructor: function() {
        Vikings.ScatterView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var t = Game.stage.view.animationManager.getLayer("scatter");
        this.rootContainer = new PIXI.Container, this.mask = new PIXI.Graphics, this.mask.beginFill(16777215), this.mask.drawRect(0, 0, 1280, this.MASK_HEIGHT), this.mask.endFill(), this.rootContainer.addChild(this.mask), this.rootContainer.mask = this.mask, this.scatters = [], t.addChild(this.rootContainer)
    },
    playScatterAttention: function(t, i, s) {
        var e = new Component.Scatter,
            n = Game.stage.model.getSymbolConfiguration(t, i, "default");
        e.init(), this.rootContainer.addChild(e), e.x = n.left, e.y = n.top, e.pivot.x = -n.width / 2, e.pivot.y = -n.height / 2, e.reelIndex = t, e.symbolIndex = i, this.scatters.push(e), 4 === t && 2 === s && Vikings.Utils.setGameTimeout(function() {
            for (var t = 0; t < 2; t++) this.scatters[t].fire(t + 1)
        }.bind(this), this.SCATTER_FIRE_DELAY_TIME), e.attention(t, s).then(function() {
            4 === t && 2 === s && this.scatters[2].fire(3)
        }.bind(this)), e.onArrowHit = function(t) {
            this.fireEvent("view:arrowHit", t)
        }.bind(this)
    },
    moveOut: function(t) {
        for (var i = 0; i < this.scatters.length; ++i) this.scatters[i].y += t;
        this.scatters.length > 0 && this.scatters[0].y > 850 && this.fireEvent("view:hasMovedOut")
    },
    reset: function() {
        for (var t = 0; t < this.scatters.length; ++t) this.rootContainer.removeChild(this.scatters[t]);
        this.scatters.length = 0
    },
    removeScatter: function(t, i) {
        for (var s = this.scatters.length - 1; s >= 0; --s) this.scatters[s].reelIndex === t && this.scatters[s].symbolIndex === i && (this.rootContainer.removeChild(this.scatters[s]), this.scatters.splice(s, 1))
    }
}, Vikings.ScatterView = Sys.extend(Core.View, Vikings.ScatterView, "Vikings.ScatterView");
Sys.ns("Vikings"), Vikings.ScatterController = {
    SCATTER_FIRE_ANIMATION_TIME: 2e3,
    data: {},
    constructor: function() {
        Vikings.ScatterController.superclass.constructor.apply(this, arguments), this.numScattersLanded = 0, this.numScattersBounced = 0, this.scatters = []
    },
    setupEvents: function() {
        this.on({
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:animationManager.allImagesLoaded": this.view.initAnimations.bind(this.view),
            "notify:spin.reelStoppedSpinning": this.onReelStoppedSpinning,
            "notify:spin.spinAnimationStarted": this.onSpinAnimationStarted,
            "notify:stateHandler.enteringScatterWinState": this.onEnteringScatterWinState,
            "notify:reelList.reelMovedInStartingState": this.onReelMovedInStartingState,
            "notify:shieldWall.symbolsCovered": this.onSymbolsCoveredByShieldWall,
            "notify:spin.reelStopBouncingStarted": this.onReelStopBouncingStarted,
            "view:hasMovedOut": this.onHasMovedOut,
            "view:arrowHit": this.fireEvent.bind(this, "notify:scatter.arrowHit")
        })
    },
    onServerResponse: function() {
        this.data.isScatterWin = "freespin" === Model.Action.getNext() && "spin" === Model.Action.getCurrent()
    },
    onEnteringScatterWinState: function() {
        this.stopAutoplay(), this.fireEvent("request:disableBasicGamePanel", "freespinSplash"), Vikings.Utils.setGameTimeout(this.onReadyForFreeSpins.bind(this), this.SCATTER_FIRE_ANIMATION_TIME)
    },
    onReelStopBouncingStarted: function(t) {
        for (var e = Model.Reels.getReelSymbolNames(t, !1), n = 0; n < e.length; ++n)
            if (this.isScatter(e[n])) {
                this.fireEvent("notify:scatter.land", Model.Scatter.getAttentionAnimationName(this.numScattersBounced), t), ++this.numScattersBounced;
                break
            }
    },
    onReelStoppedSpinning: function(t) {
        for (var e = Model.Reels.getReelSymbolNames(t, !1), n = 0; n < e.length; ++n)
            if (this.isScatter(e[n])) {
                this.playScatterAttention(t, n), ++this.numScattersLanded, this.hideScatter(t, n);
                break
            }
    },
    onHasMovedOut: function() {
        this.reset()
    },
    onReadyForFreeSpins: function() {
        this.reset(), this.fireEvent("notify:scatter.complete")
    },
    onReelMovedInStartingState: function(t, e) {
        "default_0" === e && this.view.moveOut(t)
    },
    onSpinAnimationStarted: function() {
        this.showScatters(this.scatters), this.resetControllerOnly()
    },
    onSymbolsCoveredByShieldWall: function() {
        for (var t = Model.Reels.getScatters(), e = 0; e < t.length; ++e) {
            var n = t[e];
            Model.ShieldWall.isSymbolInside(n.reelIndex, n.symbolIndex) && this.view.removeScatter(n.reelIndex, n.symbolIndex)
        }
    },
    stopAutoplay: function() {
        Services.settingsManager.getSetting("autoPlayNrSpins") > 0 && Services.settingsManager.getSetting("stopAutoplayIfFreeSpinWon") ? this.fireEvent("request:autoPlayer.stop") : 0 === Services.settingsManager.getSetting("autoPlayNrSpins") && this.fireEvent("request:autoplaySettings.disable")
    },
    playScatterAttention: function(t, e) {
        this.view.playScatterAttention(t, e, this.numScattersLanded)
    },
    isScatter: function(t) {
        return "SYM0" === t
    },
    hideScatter: function(t, e) {
        this.fireEvent("request:spin.hideSymbols", Model.Reels.symbolToSpinShowHideSymbol(t, e)), this.scatters.push({
            reelIndex: t,
            symbolIndex: e
        })
    },
    showScatters: function(t) {
        for (var e = 0; e < t.length; ++e) this.fireEvent("request:spin.showSymbols", Model.Reels.symbolToSpinShowHideSymbol(t[e].reelIndex, t[e].symbolIndex));
        t.length = 0
    },
    reset: function() {
        this.resetControllerOnly(), this.view.reset()
    },
    resetControllerOnly: function() {
        this.numScattersLanded = 0, this.numScattersBounced = 0
    }
}, Vikings.ScatterController = Sys.extend(Core.Controller, Vikings.ScatterController, "Vikings.ScatterController");
Component.ScatterPayText = function() {
    var t;
    Vikings.Utils.addAsConstants(this, {
        TEXT_SPINE: "scatterPays",
        INTRO_ANIMATION: "intro",
        IDLE_ANIMATION: "loop",
        OUTRO_ANIMATION: "outro"
    }), Component.Component.apply(this, arguments), this.init = function() {
        t = Game.PIXIFactory.createAndAddSpineAnimation(this.TEXT_SPINE, this), this.hide()
    }, this.intro = function() {
        return this.show(), Game.PIXIUtils.resetSpineAnimation(t), t.state.setAnimation(0, this.INTRO_ANIMATION), new Promise(this.promiseToCompleteIntro.bind(this))
    }, this.idle = function() {
        t.state.setAnimation(0, this.IDLE_ANIMATION, !0)
    }, this.outro = function() {
        t.state.setAnimation(1, this.OUTRO_ANIMATION)
    }, this.hide = function() {
        Component.Component.prototype.hide.call(this), Game.PIXIUtils.resetSpineAnimation(t)
    }, this.promiseToCompleteIntro = function(n) {
        var i = function() {
            n()
        };
        t.state.tracks[0].listener = {
            complete: i
        }
    }
}, Component.ScatterPayText.prototype = Object.create(Component.Component.prototype);
Sys.ns("Vikings"), Vikings.ScatterPays = {
    constructor: function() {
        Vikings.ScatterPays.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            view: Vikings.ScatterPaysView,
            controller: Vikings.ScatterPaysController
        }
    }
}, Vikings.ScatterPays = Sys.extend(Core.Module, Vikings.ScatterPays, "Vikings.ScatterPays");
Sys.ns("Vikings"), Vikings.ScatterPaysView = {
    constructor: function() {
        Vikings.ScatterPaysView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var t = Game.stage.view.animationManager.getLayer("scatterPays");
        this.components = {}, this.createAndAddText(t, this.components)
    },
    createAndAddText: function(t, i) {
        var e = new Component.ScatterPayText;
        e.init(), e.x = 640, e.y = 260, t.addChild(e), i.text = e
    },
    intro: function() {
        this.components.text.intro().then(this.onIntroComplete.bind(this))
    },
    outro: function() {
        this.components.text.outro()
    },
    abortText: function() {
        this.components.text.hide(), Vikings.Utils.clearGameTimer(this.introCompleteTimeout)
    },
    onIntroComplete: function() {
        this.components.text.idle(), this.introCompleteTimeout = Vikings.Utils.setGameTimeout(this.fireEvent.bind(this, "view:introComplete"), 500)
    }
}, Vikings.ScatterPaysView = Sys.extend(Core.View, Vikings.ScatterPaysView, "Vikings.ScatterPaysView");
Sys.ns("Vikings"), Vikings.ScatterPaysController = {
    constructor: function() {
        Vikings.ScatterPaysController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:stateHandler.enteringWinState": this.onEnteringWinState,
            "notify:animationManager.allImagesLoaded": this.view.initAnimations.bind(this.view),
            "notify:userInputManager.userInputEnded": this.skipAnimation,
            "notify:spin.spinAnimationStarted": this.abort,
            "notify:winBanner.complete": this.onWinBannerComplete,
            "notify:bigWin.start": this.abort,
            "request:abortPresentation": this.skipAnimation,
            "view:introComplete": this.scatterPaysComplete
        })
    },
    onEnteringWinState: function() {
        Model.Action.isScatterPay() && (this.view.intro(), this.scatterPaysState = !0, this.fireEvent("notify:scatterPays.showing"))
    },
    onWinBannerComplete: function() {
        "bigWin" !== Model.Win.getType() && this.view.outro()
    },
    skipAnimation: function() {
        this.scatterPaysState && (this.abort(), this.scatterPaysComplete())
    },
    abort: function() {
        this.scatterPaysState = !1, this.view.abortText()
    },
    scatterPaysComplete: function() {
        this.scatterPaysState = !1, this.fireEvent("notify:scatterPays.complete")
    }
}, Vikings.ScatterPaysController = Sys.extend(Core.Controller, Vikings.ScatterPaysController, "Vikings.ScatterPaysController");
Sys.ns("Vikings"), Vikings.Logo = {
    constructor: function() {
        Vikings.Logo.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            view: Vikings.LogoView,
            controller: Vikings.LogoController
        }
    }
}, Vikings.Logo = Sys.extend(Core.Module, Vikings.Logo, "Vikings.Logo");
Sys.ns("Vikings"), Vikings.LogoController = {
    constructor: function() {
        Vikings.LogoController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "notify:environment.reelFadeInStarted": this.showLogo,
            "notify:gameModeChanged": this.onGameModeChanged
        })
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    showLogo: function() {
        this.view.logoSpriteMg.fadeIn(1e3)
    },
    onGameModeChanged: function(o) {
        this.view.changeGameMode(o)
    }
}, Vikings.LogoController = Sys.extend(Core.Controller, Vikings.LogoController, "Vikings.LogoController");
Sys.ns("Vikings"), Vikings.LogoView = {
    IMAGE_MG: "logoMg",
    IMAGE_FS: "logoFs",
    POSITION_MG: new PIXI.Point(15, 61),
    POSITION_FS: new PIXI.Point(1071, 23),
    constructor: function() {
        Vikings.LogoView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var i;
        this.rootContainer = new PIXI.Container, this.rootContainer.name = "LogoView", this.logoSpriteMg = Game.PIXIFactory.createAndAddSprite(this.IMAGE_MG, this.rootContainer, this.POSITION_MG), Object.assign(this.logoSpriteMg, Component.Util.Fader.prototype), this.logoSpriteMg.alpha = 0, this.logoSpriteFs = Game.PIXIFactory.createAndAddSprite(this.IMAGE_FS, this.rootContainer, this.POSITION_FS), this.logoSpriteFs.visible = !1, i = Game.stage.view.animationManager.getLayer("logo"), i.addChild(this.rootContainer)
    },
    changeGameMode: function(i) {
        "FREESPIN" === i ? (this.logoSpriteMg.visible = !1, this.logoSpriteFs.visible = !0) : (this.logoSpriteMg.alpha = 1, this.logoSpriteMg.visible = !0, this.logoSpriteFs.visible = !1)
    }
}, Vikings.LogoView = Sys.extend(Core.View, Vikings.LogoView, "Vikings.LogoView");
Sys.ns("Vikings"), Vikings.FreeSpinIntro = {
    constructor: function() {
        Vikings.FreeSpinIntro.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            freeSpinIntro: {
                state: {
                    name: "FreeSpinIntro",
                    execute: function() {},
                    waitEvents: {
                        "notify:freeSpinIntro.closed": !1
                    }
                }
            },
            stopped: {
                queue: [function(e) {
                    this.controller.data.isFreeSpinsIntro && e.stateHandler.pushState(e.states.freeSpinIntro)
                }.bind(this)]
            },
            beforeLoaderClose: {
                queue: [function(e) {
                    this.controller.data.isFreeSpinsIntro && e.stateHandler.pushState(e.states.freeSpinIntro)
                }.bind(this)]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Vikings.FreeSpinIntroController,
            view: Vikings.FreeSpinIntroView
        }
    }
}, Vikings.FreeSpinIntro = Sys.extend(Core.Module, Vikings.FreeSpinIntro, "Vikings.FreeSpinIntro");
Sys.ns("Vikings"), Vikings.FreeSpinIntroView = {
    components: {},
    constructor: function() {
        Vikings.FreeSpinIntroView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var n = Game.stage.view.animationManager.getLayer("splashScreens");
        this.scale = Environment.determineResolution().virtualToWindowScale, Sys.apply(this.components, {
            backgroundSky: this.addComponent(new Component.FreeSpinIntroBackgroundSky, n),
            backgroundArrow: this.addComponent(new Component.FreeSpinIntroBackgroundArrow, n),
            middleground: this.addComponent(new Component.FreeSpinIntroMiddleground, n),
            foregroundArrow: this.addComponent(new Component.FreeSpinIntroForegroundArrow, n),
            foregroundRain: this.addComponent(new Component.FreeSpinIntroForegroundRain, n),
            texts: this.addComponent(new Component.FreeSpinIntroTexts, n),
            continueButton: this.addComponent(new Component.FreeSpinIntroContinue, n)
        });
        for (var o in this.components) this.components.hasOwnProperty(o) && this.components[o].hide();
        this.activeButtonConfig = this.components.continueButton.SPLASH_BUTTON_CONTINUE_LABEL, this.components.continueButton.onButtonClick = this.continueRequest.bind(this)
    },
    intro: function() {
        var n, o = this.components.continueButton;
        for (var t in this.components) this.components.hasOwnProperty(t) && (n = this.components[t]) !== o && "function" == typeof n.idle && n.idle();
        o.updateTextString(), this.continueButtonIntroTimeout = Vikings.Utils.setGameTimeout(function() {
            o.intro().then(o.idle.bind(o))
        }, 500)
    },
    show: function() {
        this.intro(), this.components.texts.updateFreeSpinCount(), this.showComponents()
    },
    showComponents: function() {
        for (var n in this.components) this.components.hasOwnProperty(n) && this.components[n].show()
    },
    hideComponents: function() {
        for (var n in this.components) this.components.hasOwnProperty(n) && this.components[n].hide()
    },
    continueRequest: function() {
        this.close()
    },
    close: function() {
        if (this.components.continueButton.stop(), this.hideComponents(), Vikings.Utils.clearGameTimer(this.continueButtonIntroTimeout), this.fireEvent("view:closed"), null !== document.getElementById("pixiGenericSlot_bottomBg")) {
            var n = document.getElementById("pixiGenericSlot_bottomBg_RS"),
                o = 0;
            Game.stage.view.animationManager.addToAnimationLoop({
                running: !0,
                visible: !0,
                run: function() {
                    o += .03, n.style.opacity = o, n.style.opacity >= 1 && Game.stage.view.animationManager.removeFromAnimationLoop(this)
                }
            })
        }
    }
}, Vikings.FreeSpinIntroView = Sys.extend(Core.View, Vikings.FreeSpinIntroView, "Vikings.FreeSpinIntroView");
Sys.ns("Vikings"), Vikings.FreeSpinIntroController = {
    AUTO_CLOSE_TIME: 3500,
    INITIAL_REEL_ALPHA: .3,
    data: {},
    isCurrentlyZooming: !1,
    introScreenIsShown: !1,
    constructor: function() {
        Vikings.FreeSpinIntroController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:stateHandler.enteringFreeSpinIntroState": this.start,
            "notify:stateHandler.enteringBeforeLoaderCloseState": this.onEnteringBeforeLoaderCloseState,
            "notify:moduleLoader.finishedLoadingModules": this.onModulesFinishedLoading,
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "notify:environment.transitionToRSComplete": this.onEnvironmentTransitionToRSComplete,
            "notify:hotSpot.transitionToRSComplete": this.onHotSpotTransitionToRSComplete,
            "request:freeSpins.start": this.continue,
            "view:closed": this.onClosed,
            "view:continue": this.continue,
            "notify:userInputManager.userInputStarted": this.skipAhead,
            "notify:userInputManager.userInputKeyUp": this.skipAhead
        })
    },
    onServerResponse: function(e) {
        var t = Model.Win,
            i = Model.Action,
            n = i.isRestore(),
            s = i.getGameState(),
            o = i.getNext(),
            r = n && "freespin" === s,
            a = "freespin" !== s && "freespin" === o;
        this.data.isRestore = n, this.data.isFreeSpinsIntro = r || a, this.data.totalFreeSpins = t.getTotalFreeSpins(e), this.data.freeSpinsLeft = t.getFreeSpinsLeft(e)
    },
    skipAhead: function(e) {
        if (this.isCurrentlyZooming) {
            this.start(!0), this.isCurrentlyZooming = !1
        } else if (this.introScreenIsShown) {
            var t = void 0 === e.y;
            t && (this.continue(), this.introScreenIsShown = !1)
        }
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    start: function(e) {
        if (Model.Action.isRestore() && !e) return void this.fireEvent("request:coinsField.showProgressiveWin", !0);
        e ? this.onEnvironmentTransitionToRSComplete() : (this.fireEvent("request:ambienceManager.ambiencePauseSwitch", !0), this.fireEvent("request:environment.startRSTransition"), this.isCurrentlyZooming = !0), this.fireEvent("request:disableBasicGamePanel", "freespinSplash")
    },
    onEnvironmentTransitionToRSComplete: function() {
        this.fireEvent("request:ambienceManager.ambiencePauseSwitch", !1), this.fireEvent("request:ambienceManager.ambienceChangeActive", {
            name: "ambienceFreeSpinIntro"
        }), this.fireEvent("request:environment.switchToRS"), this.fireEvent("request:playModeManager.removeMode", "basic"), this.fireEvent("request:playModeManager.addMode", "freespin"), this.fireEvent("notify:gameModeChanged", "FREESPIN"), this.data.isRestore && this.fireEvent("notify:freeSpinIntro.restore"), this.show()
    },
    onEnteringBeforeLoaderCloseState: function() {
        this.data.isFreeSpinsIntro && this.start(!0)
    },
    show: function() {
        this.isCurrentlyZooming = !1, this.introScreenIsShown = !0, this.view.show(), this.stopAutoplay(), this.resumeAutoClose(), this.fireEvent("request:closeOpenWindows"), this.fireEvent("request:coinsField.showProgressiveWin", !0), this.fireEvent("request:coinsField.showFreeSpinsLeft"), Services.storage.storeData("freeSpins.canStart", !0)
    },
    stopAutoplay: function() {
        Services.settingsManager.getSetting("autoPlayNrSpins") > 0 && Services.settingsManager.getSetting("stopAutoplayIfFreeSpinWon") ? this.fireEvent("request:autoPlayer.stop") : 0 === Services.settingsManager.getSetting("autoPlayNrSpins") && this.fireEvent("request:autoplaySettings.disable")
    },
    resumeAutoClose: function() {
        Services.settingsManager.getSetting("autoPlayNrSpins") > 0 && !Services.settingsManager.getSetting("stopAutoplayIfFreeSpinWon") && (this.autoCloseTimeOut = Vikings.Utils.setGameTimeout(function() {
            this.continue()
        }.bind(this), this.AUTO_CLOSE_TIME))
    },
    continue: function() {
        this.view.continueRequest()
    },
    onClosed: function() {
        this.introScreenIsShown = !1, Vikings.Utils.clearGameTimer(this.autoCloseTimeOut), this.data.isRestore && (this.fireEvent("request:keypad.fadeIn"), Platform.isDesktopDevice || this.fireEvent("request:settingsButton.disable")), this.fireEvent("request:spinButton.show", this.MODULE_NAME), this.fireEvent("request:background.changeImage", "freespinBackground"), this.fireEvent("request:coinsField.showProgressiveWin", !0), this.fireEvent("request:coinsField.showFreeSpinsLeft"), this.fireEvent("request:audioPlayer.stop", "introFreeSpin"), this.fireEvent("request:ambienceManager.ambienceChangeActive", {
            name: "ambienceFreeSpin",
            id: "ambienceFreeSpin",
            loop: !0
        }), this.fireEvent("request:ambienceManager.ambiencePauseSwitch", !1), this.fireEvent("request:spin.child.wantStartSpin"), this.fireEvent("request:hotSpot.switchToRS"), Game.stage.view.animationManager.getLayer("reel").alpha = this.INITIAL_REEL_ALPHA, Services.storage.storeData("freeSpins.canStart", !1), this.fireEvent("notify:freeSpinIntro.splashClosed")
    },
    onHotSpotTransitionToRSComplete: function() {
        this.fireEvent("notify:freeSpinIntro.closed", this.data.totalFreeSpins)
    },
    onModulesFinishedLoading: function() {
        this.fireEvent("request:spinSettings.showStopIfFreeSpinsWon")
    }
}, Vikings.FreeSpinIntroController = Sys.extend(Core.Controller, Vikings.FreeSpinIntroController, "Vikings.FreeSpinIntroController");
Component.FreeSpinIntroBackgroundSky = function() {
    var n, t;
    Vikings.Utils.addAsConstants(this, {
        SPLASH_SPINE: "raidSpinIntroBgSky",
        SPLASH_SPINE_BG_IDLE: "sky_animation"
    }), Component.Component.apply(this, arguments), this.init = function() {
        var o = Environment.getStageResolution();
        n = Game.PIXIFactory.createAndAddSpineAnimation(this.SPLASH_SPINE, this, new PIXI.Point(o.width / 2, o.height / 2)), t = n.state
    }, this.idle = function() {
        t.setAnimation(0, this.SPLASH_SPINE_BG_IDLE, !0)
    }
}, Component.FreeSpinIntroBackgroundSky.prototype = Object.create(Component.Component.prototype);
Component.FreeSpinIntroBackgroundArrow = function() {
    var n, t;
    Vikings.Utils.addAsConstants(this, {
        SPLASH_SPINE: "raidSpinIntroBgArrow",
        SPLASH_SPINE_BG_IDLE: "arrow_animation"
    }), Component.Component.apply(this, arguments), this.init = function() {
        var o = Environment.getStageResolution();
        n = Game.PIXIFactory.createAndAddSpineAnimation(this.SPLASH_SPINE, this, new PIXI.Point(o.width / 2, o.height / 2)), t = n.state
    }, this.idle = function() {
        t.setAnimation(0, this.SPLASH_SPINE_BG_IDLE, !0)
    }
}, Component.FreeSpinIntroBackgroundArrow.prototype = Object.create(Component.Component.prototype);
Component.FreeSpinIntroMiddleground = function() {
    var t, n;
    Vikings.Utils.addAsConstants(this, {
        SPLASH_SPINE: "raidSpinIntroMg",
        SPLASH_SPINE_BG_IDLE: "middleground_boat"
    }), Component.Component.apply(this, arguments), this.init = function() {
        var o = Environment.getStageResolution();
        t = Game.PIXIFactory.createAndAddSpineAnimation(this.SPLASH_SPINE, this, new PIXI.Point(o.width / 2, o.height / 2)), n = t.state
    }, this.idle = function() {
        n.setAnimation(0, this.SPLASH_SPINE_BG_IDLE, !0)
    }
}, Component.FreeSpinIntroMiddleground.prototype = Object.create(Component.Component.prototype);
Component.FreeSpinIntroForegroundArrow = function() {
    var n, t;
    Vikings.Utils.addAsConstants(this, {
        SPLASH_SPINE: "raidSpinIntroFgArrow",
        SPLASH_SPINE_BG_IDLE: "arrow_animation"
    }), Component.Component.apply(this, arguments), this.init = function() {
        var o = Environment.getStageResolution();
        n = Game.PIXIFactory.createAndAddSpineAnimation(this.SPLASH_SPINE, this, new PIXI.Point(o.width / 2, o.height / 2)), t = n.state
    }, this.idle = function() {
        t.setAnimation(0, this.SPLASH_SPINE_BG_IDLE, !0)
    }
}, Component.FreeSpinIntroForegroundArrow.prototype = Object.create(Component.Component.prototype);
Component.FreeSpinIntroForegroundRain = function() {
    var n, t;
    Vikings.Utils.addAsConstants(this, {
        SPLASH_SPINE: "raidSpinIntroFgRain",
        SPLASH_SPINE_BG_IDLE: "rain_animation"
    }), Component.Component.apply(this, arguments), this.init = function() {
        var i = Environment.getStageResolution();
        n = Game.PIXIFactory.createAndAddSpineAnimation(this.SPLASH_SPINE, this, new PIXI.Point(i.width / 2, i.height / 2)), t = n.state
    }, this.idle = function() {
        t.setAnimation(0, this.SPLASH_SPINE_BG_IDLE, !0)
    }
}, Component.FreeSpinIntroForegroundRain.prototype = Object.create(Component.Component.prototype);
Component.FreeSpinIntroContinue = function() {
    function t() {
        a.landscapeX = a.landscapeX || a.x, a.x = a.landscapeX + r, s.landscapeX = s.landscapeX || s.x, s.x = s.landscapeX + r, c.landscapeX = c.landscapeX || c.x, c.x = c.landscapeX + r
    }

    function n() {
        a.x = a.landscapeX, s.x = s.landscapeX, c.x = c.landscapeX
    }

    function e(t) {
        var n = function() {
            t()
        };
        o.tracks[0].listener = {
            complete: n
        }
    }

    function i(t) {
        var n, e = Model.Action.isRestore();
        return n = e ? t.keyRestore : t.keyStart, Services.languageManager.getText(n)
    }
    var a, o, s, c, r = -150;
    Vikings.Utils.runOnSwitchToPortrait(t), Vikings.Utils.runOnSwitchToLandscape(n), Vikings.Utils.addAsConstants(this, {
        SPLASH_SPINE: "raidSpinIntroUI",
        SPLASH_SPINE_CONTINUE_IDLE: "ui_button_loop",
        SPLASH_SPINE_CONTINUE_INTRO: "ui_button_intro",
        SPLASH_BUTTON_CONTINUE_LABEL: {
            keyStart: Language.Keys.startRaidSpins,
            keyRestore: Language.Keys.continue_uc,
            centerX: 900,
            centerY: 525,
            width: 315,
            height: 66,
            maxTextWidth: 250
        }
    }), Component.Component.apply(this, arguments), this.init = function() {
        var t = this.SPLASH_BUTTON_CONTINUE_LABEL,
            n = Environment.getStageResolution();
        a = Game.PIXIFactory.createAndAddSpineAnimation(this.SPLASH_SPINE, this, new PIXI.Point(n.width / 2 - 100, n.height / 2 + 50)), o = a.state, s = Game.PIXIFactory.createAndAddText(i(this.SPLASH_BUTTON_CONTINUE_LABEL), Game.TextStyles.CONTINUE_BUTTON, this, new PIXI.Point(t.centerX, t.centerY), new PIXI.Point(.5, .5)), this.updateTextSize(), c = new Interface.utils.PIXIInteractive, c.clickCallback = function() {
            this.onButtonClick()
        }.bind(this), c.position = new PIXI.Point(t.centerX, t.centerY), c.hitArea = new PIXI.Rectangle(-t.width / 2, -t.height / 2, t.width, t.height), this.addChild(c)
    }, this.idle = function() {
        o.setAnimation(1, this.SPLASH_SPINE_CONTINUE_IDLE, !0)
    }, this.intro = function() {
        return o.setAnimation(0, this.SPLASH_SPINE_CONTINUE_INTRO), new Promise(e)
    }, this.updateTextString = function() {
        s.setText(i(this.SPLASH_BUTTON_CONTINUE_LABEL)), this.updateTextSize()
    }, this.stop = function() {
        Game.PIXIUtils.resetSpineAnimation(a)
    }, this.updateTextSize = function() {
        var t;
        Math.floor(s.width) > this.SPLASH_BUTTON_CONTINUE_LABEL.maxTextWidth && (t = this.SPLASH_BUTTON_CONTINUE_LABEL.maxTextWidth / s.width, s.scale = new PIXI.Point(t, t))
    }, this.onButtonClick = function() {}
}, Component.FreeSpinIntroContinue.prototype = Object.create(Component.Component.prototype);
Component.FreeSpinIntroTexts = function() {
    function e(e) {
        var t = Language.Keys.freeSpinsLeft;
        return 0 === e ? t = Language.Keys.lastFreeSpin : 1 === e && (t = Language.Keys.freeSpinLeft), Services.languageManager.getText(t)
    }
    var t, n, i, S, s = function() {
            S.x = this.SPLASH_CONGRATULATIONS.x + -150, t.x = this.SPLASH_YOU_WON.x + -150, i.x = this.SPLASH_ENCORE_FREE_SPINS.x + -150, n.x = this.COUNT_UP_TEXT.x + -150
        }.bind(this),
        a = function() {
            S.x = this.SPLASH_CONGRATULATIONS.x, t.x = this.SPLASH_YOU_WON.x, i.x = this.SPLASH_ENCORE_FREE_SPINS.x, n.x = this.COUNT_UP_TEXT.x
        }.bind(this);
    Vikings.Utils.runOnSwitchToPortrait(s), Vikings.Utils.runOnSwitchToLandscape(a), Vikings.Utils.addAsConstants(this, {
        SPLASH_CONGRATULATIONS: {
            key: Language.Keys.congratulations_uc,
            x: 900,
            y: 160
        },
        SPLASH_YOU_WON: {
            keyNormal: Language.Keys.youWon,
            keyRestore: Language.Keys.youHave,
            x: 900,
            y: 250
        },
        COUNT_UP_TEXT: {
            x: 900,
            y: 340
        },
        SPLASH_ENCORE_FREE_SPINS: {
            key: Language.Keys.raidSpins,
            x: 900,
            y: 430
        },
        TEXTS_MAX_WIDTH: 650
    }), Component.Component.apply(this, arguments), this.init = function() {
        var e = new PIXI.Point(.5, .5);
        S = Game.PIXIFactory.createAndAddText(Services.languageManager.getText(this.SPLASH_CONGRATULATIONS.key), Game.TextStyles.INTRO_CONGRATULATIONS, this, new PIXI.Point(this.SPLASH_CONGRATULATIONS.x, this.SPLASH_CONGRATULATIONS.y), e), t = Game.PIXIFactory.createAndAddText("", Game.TextStyles.INTRO_TEXT, this, new PIXI.Point(this.SPLASH_YOU_WON.x, this.SPLASH_YOU_WON.y), e), n = Game.PIXIFactory.createAndAddText("", Game.TextStyles.INTRO_COUNT_TEXT, this, new PIXI.Point(this.COUNT_UP_TEXT.x, this.COUNT_UP_TEXT.y), e), i = Game.PIXIFactory.createAndAddText("", Game.TextStyles.INTRO_TEXT, this, new PIXI.Point(this.SPLASH_ENCORE_FREE_SPINS.x, this.SPLASH_ENCORE_FREE_SPINS.y), e)
    }, this.updateFreeSpinCount = function() {
        var S, s, a = Model.Win.getFreeSpinsLeft(),
            T = Model.Action.isRestore();
        T ? (S = Services.languageManager.getText(this.SPLASH_YOU_WON.keyRestore), s = e(a)) : (S = Services.languageManager.getText(this.SPLASH_YOU_WON.keyNormal), s = Services.languageManager.getText(this.SPLASH_ENCORE_FREE_SPINS.key)), t.text = S, n.text = a, i.text = s, this.updateScaledElements()
    }, this.updateScaledElements = function() {
        var e, t, n = 0;
        for (t = 0; t < this.children.length; ++t) this.children[t].scale = new PIXI.Point(1, 1), n = Math.max(n, this.children[t].width);
        if (n > this.TEXTS_MAX_WIDTH)
            for (e = this.TEXTS_MAX_WIDTH / n, t = 0; t < this.children.length; ++t) this.children[t].scale = new PIXI.Point(e, e)
    }
}, Component.FreeSpinIntroTexts.prototype = Object.create(Component.Component.prototype);
Sys.ns("Vikings"), Vikings.FreeSpinOutro = {
    constructor: function() {
        Vikings.FreeSpinOutro.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            freeSpinOutro: {
                state: {
                    name: "FreeSpinOutro",
                    execute: function(e) {},
                    waitEvents: {
                        "notify:freeSpinOutro.closed": !1
                    }
                }
            },
            stopped: {
                queue: [function(e) {
                    this.controller.data.isFreeSpinsOutro && e.stateHandler.pushState(e.states.freeSpinOutro)
                }.bind(this)]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Vikings.FreeSpinOutroController,
            view: Vikings.FreeSpinOutroView
        }
    }
}, Vikings.FreeSpinOutro = Sys.extend(Core.Module, Vikings.FreeSpinOutro, "Vikings.FreeSpinOutro");
Sys.ns("Vikings"), Vikings.FreeSpinOutroView = {
    components: {},
    constructor: function() {
        Vikings.FreeSpinOutroView.superclass.constructor.apply(this, arguments)
    },
    initAnimations: function() {
        var t = Game.stage.view.animationManager.getLayer("splashScreens");
        this.components.background = this.addComponent(new Component.FreeSpinOutroBackground, t), this.components.texts = this.addComponent(new Component.FreeSpinOutroTexts, t), Object.assign(this.components.texts, Component.Util.Fader.prototype), this.components.background.y = -50, this.components.texts.hide(), this.components.background.hide()
    },
    onFadeOutComplete: function() {
        this.components.texts.hide(), this.components.background.hide()
    },
    splashScreenAnimationComplete: function() {
        this.components.texts.fadeOut(300, 0, this.onFadeOutComplete.bind(this)), this.fireEvent("view:close")
    },
    close: function() {
        if (this.fireEvent("view:closed"), null !== document.getElementById("pixiGenericSlot_bottomBg")) {
            var t = document.getElementById("pixiGenericSlot_bottomBg_RS"),
                n = 0;
            Game.stage.view.animationManager.addToAnimationLoop({
                running: !0,
                visible: !0,
                run: function() {
                    n -= .03, t.style.opacity = n, t.style.opacity <= 0 && Game.stage.view.animationManager.removeFromAnimationLoop(this)
                }
            })
        }
    },
    show: function(t) {
        this.components.texts.setCoinsWon(t), this.components.texts.show(), this.components.texts.alpha = 0, Vikings.Utils.setGameTimeout(function() {
            this.components.texts.fadeIn(300)
        }.bind(this), 300), this.components.texts.animate(), this.components.background.show(), this.components.background.intro().then(this.splashScreenAnimationComplete.bind(this))
    }
}, Vikings.FreeSpinOutroView = Sys.extend(Core.View, Vikings.FreeSpinOutroView, "Vikings.FreeSpinOutroView");
Sys.ns("Vikings"), Vikings.FreeSpinOutroController = {
    data: {},
    DEFAULT_AFTER_REELSET: "basic",
    constructor: function() {
        Vikings.FreeSpinOutroController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "view:close": this.close,
            "view:closed": this.onClosed,
            "notify:stateHandler.enteringFreeSpinOutroState": this.show,
            "request:freeSpinOutro.close": this.close,
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:animationManager.allImagesLoaded": this.initAnimations
        })
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    onServerResponse: function(e) {
        var i = Model.Win,
            t = Model.Action;
        this.data.isFreeSpinsOutro = "freespin" === t.getGameState() && "spin" === t.getNext(), this.data.coinsWon = i.getTotalCoins(e)
    },
    show: function() {
        var e = Model.Win.isWin() ? 0 : 1500;
        Vikings.Utils.setGameTimeout(function() {
            this.view.show(this.data.coinsWon), this.fireEvent("notify:freeSpinOutro.showing"), this.fireEvent("request:ambienceManager.ambienceStopActive"), this.fireEvent("request:coinsField.showNormalWin"), this.fireEvent("request:playModeManager.removeMode", "freespin"), this.fireEvent("request:playModeManager.addMode", "basic"), this.fireEvent("request:closeOpenWindows")
        }.bind(this), e)
    },
    close: function() {
        this.fireEvent("request:spin.activateReelset", this.DEFAULT_AFTER_REELSET, "base"), this.view.close(), this.fireEvent("notify:gameModeChanged", "BASIC"), this.fireEvent("request:enableBasicGamePanel", "freespinSplash"), this.fireEvent("request:environment.startMGTransition")
    },
    onClosed: function() {
        this.fireEvent("request:autoplaySettings.enable"), this.fireEvent("request:settingsButton.enable"), this.fireEvent("request:background.restoreImage"), this.fireEvent("request:ambienceManager.ambiencePauseSwitch", !0), this.fireEvent("request:ambienceManager.ambienceChangeActive", {
            name: "ambienceGeneral",
            id: "ambienceGeneral",
            loop: !0
        }), this.fireEvent("request:ambienceManager.ambiencePauseSwitch", !1), this.fireEvent("notify:freeSpinOutro.closed")
    }
}, Vikings.FreeSpinOutroController = Sys.extend(Core.Controller, Vikings.FreeSpinOutroController, "Vikings.FreeSpinOutroController");
Component.FreeSpinOutroBackground = function() {
    var t, n;
    Vikings.Utils.addAsConstants(this, {
        SPLASH_SPINE: "raidSpinOutroBg",
        SPLASH_SPINE_BG_INTRO: "sail",
        SPLASH_SPINE_BG_LOOP: "sailLoop",
        SPLASH_SPINE_BG_OUTRO: "burn"
    }), Component.Component.apply(this, arguments), this.init = function() {
        var i = Environment.getStageResolution();
        t = Game.PIXIFactory.createAndAddSpineAnimation(this.SPLASH_SPINE, this, new PIXI.Point(i.width / 2, i.height / 2)), n = t.state
    }, this.intro = function() {
        var i = this.SPLASH_SPINE_BG_INTRO,
            e = this.SPLASH_SPINE_BG_LOOP,
            o = this.SPLASH_SPINE_BG_OUTRO,
            s = 0,
            S = 2;
        return new Promise(function(r) {
            function a() {
                n.setAnimation(s, e, !0), 0 == --S ? n.tracks[s].listener = {
                    complete: P
                } : n.tracks[s].listener = {
                    complete: a
                }
            }

            function P() {
                n.setAnimation(++s, o), r()
            }! function() {
                Game.PIXIUtils.resetSpineAnimation(t), n.setAnimation(s, i), n.tracks[s].listener = {
                    complete: a
                }
            }()
        })
    }
}, Component.FreeSpinOutroBackground.prototype = Object.create(Component.Component.prototype);
Component.FreeSpinOutroTexts = function() {
    var e, t, n, i, T;
    Vikings.Utils.addAsConstants(this, {
        TEXT_CONTAINER: {
            x: 640,
            y: 360
        },
        CONGRATULATION_TEXT: {
            key: Language.Keys.congratulations_uc,
            x: 640,
            y: 90
        },
        COINS_WON_TEXT: {
            key: Language.Keys.coinsWonColon,
            noWinKey: Language.Keys.betterLuckNextTime,
            x: 640,
            y: 220
        },
        COIN_WIN: {
            x: 640,
            y: 260
        }
    }), Component.Component.apply(this, arguments), this.init = function() {
        var o = new PIXI.Point(.5, 0),
            a = new PIXI.Point(this.TEXT_CONTAINER.x, this.TEXT_CONTAINER.y);
        e = new PIXI.Container, e.pivot = a, e.position = a, this.addChild(e), t = Game.PIXIFactory.createAndAddText(Services.languageManager.getText(this.CONGRATULATION_TEXT.key), Game.TextStyles.OUTRO_CONGRATULATIONS, e, new PIXI.Point(this.CONGRATULATION_TEXT.x, this.CONGRATULATION_TEXT.y), o), n = Game.PIXIFactory.createAndAddText(Services.languageManager.getText(this.COINS_WON_TEXT.key), Game.TextStyles.OUTRO_TEXT, e, new PIXI.Point(this.COINS_WON_TEXT.x, this.COINS_WON_TEXT.y), o), i = Game.PIXIFactory.createAndAddText("0", Game.TextStyles.OUTRO_COUNT_TEXT, e, new PIXI.Point(this.COIN_WIN.x, this.COIN_WIN.y), o), T = new Animation.Holder({
            target: e.scale,
            animate: {
                0: {
                    x: .9,
                    y: .9
                },
                4e3: {
                    x: 1,
                    y: 1
                }
            },
            addToAnimationLoop: !0
        })
    }, this.setCoinsWon = function(e) {
        e > 0 ? (t.visible = !0, n.text = Services.languageManager.getText(this.COINS_WON_TEXT.key), i.text = e.toString(), i.visible = !0) : (t.visible = !1, n.text = Services.languageManager.getText(this.COINS_WON_TEXT.noWinKey), i.visible = !1)
    }, this.animate = function() {
        return new Promise(function(e) {
            T.onEnd = e, T.restore(), T.play()
        })
    }
}, Component.FreeSpinOutroTexts.prototype = Object.create(Component.Component.prototype);
Sys.ns("Vikings"), Vikings.CountDownFreespins = {
    constructor: function() {
        Vikings.CountDownFreespins.superclass.constructor.apply(this, arguments)
    },
    getDefaultMVCClasses: function() {
        return {
            view: Vikings.CountDownFreespinsView,
            controller: Vikings.CountDownFreespinsController
        }
    }
}, Vikings.CountDownFreespins = Sys.extend(Core.Module, Vikings.CountDownFreespins, "Vikings.CountDownFreespins");
Sys.ns("Vikings"), Vikings.CountDownFreespinsView = {
    components: {},
    initAnimations: function() {
        var n = Game.stage.view.animationManager.getLayer("countDownFreeSpins");
        this.components.countDown = this.addComponent(new Component.CountDownFreespinsBanner, n), this.components.countDown.hide()
    },
    showCountDown: function(n) {
        this.components.countDown.show(), this.components.countDown.showCountDown(n).then(this.onCountDownEnded.bind(this))
    },
    onCountDownEnded: function() {
        this.fireEvent("view:countDownEnd")
    },
    skipAnimation: function() {
        this.components.countDown.abortCountDownAnimation()
    }
}, Vikings.CountDownFreespinsView = Sys.extend(Core.View, Vikings.CountDownFreespinsView, "Vikings.CountDownFreespinsView");
Sys.ns("Vikings"), Vikings.CountDownFreespinsController = {
    data: {},
    constructor: function() {
        Vikings.CountDownFreespinsController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        Vikings.CountDownFreespinsController.superclass.setupEvents.apply(this, arguments), this.on({
            "notify:stateHandler.enteringStoppingState": this.onEnteringCountDownFreespinsState,
            "notify:hotSpot.activationComplete": this.onEnteringCountDownFreespinsState.bind(this, !0),
            "notify:responseParser.responseParsed": this.onServerResponse,
            "notify:animationManager.allImagesLoaded": this.initAnimations,
            "notify:spin.spinAnimationComplete": this.skipAnimation,
            "view:countDownEnd": this.onCountDownEnded
        })
    },
    onServerResponse: function(n) {
        var t = Model.Win,
            i = Model.Action,
            e = i.getGameState(),
            o = i.getCurrent(),
            s = t.getFreeSpinsLeft(n);
        this.data.animationRequested = "freespin" === e && -1 !== ["init", "freespin"].indexOf(o), this.data.remainingSpins = s
    },
    initAnimations: function() {
        this.view.initAnimations()
    },
    onEnteringCountDownFreespinsState: function(n) {
        n && (this.countDownState = !0, this.countDownTimeout = Vikings.Utils.setGameTimeout(function() {
            this.view.showCountDown(this.data.remainingSpins - 1), this.fireEvent("request:coinsField.showFreeSpinsLeft", this.data.remainingSpins - 1), this.fireEvent("notify:countDownFreespin:end")
        }.bind(this), 300), this.alreadyShown = !0), this.data.animationRequested && !this.alreadyShown && (this.countDownState = !0, this.view.showCountDown(this.data.remainingSpins), this.fireEvent("request:coinsField.showFreeSpinsLeft"), this.fireEvent("notify:countDownFreespin:end"))
    },
    onCountDownEnded: function() {
        this.countDownState = !1, this.fireEvent("notify:countDownFreespin:end")
    },
    skipAnimation: function() {
        this.countDownState && (this.countDownState = !1, this.view.skipAnimation()), this.alreadyShown = !1, Vikings.Utils.clearGameTimer(this.countDownTimeout)
    }
}, Vikings.CountDownFreespinsController = Sys.extend(Core.Controller, Vikings.CountDownFreespinsController, "Vikings.CountDownFreespinsController");
Component.CountDownFreespinsBanner = function() {
    function t(t, e) {
        var n = S[Math.ceil(Math.random() * S.length - 1)],
            i = Math.random() * (y - T) + T,
            o = x[n],
            a = Math.random() * (A - f) + f,
            r = (Math.random() * (g - I) + I) * w;
        o || (o = Game.PIXIFactory.createSpriteWithTexture(n), x[n] = o), o.x = t, o.y = e, o.opacity = a, o.width = 0, o.height = 0;
        var s = {
            running: !0,
            run: function() {
                o.width < r ? (i = r - o.width < i ? r - o.width : i, o.width += i, o.height += i, o.x = t - o.width / 2, o.y = e - o.height / 2) : Game.stage.view.animationManager.removeFromAnimationLoop(s)
            }
        };
        return Game.stage.view.animationManager.addToAnimationLoop(s), o
    }

    function e(t) {
        var e = Language.Keys.freeSpinsLeft;
        return 0 === t ? e = Language.Keys.lastFreeSpin : 1 === t && (e = Language.Keys.freeSpinLeft), Services.languageManager.getText(e)
    }

    function n(t, e) {
        t > 0 ? (c.visible = !0, c.position.x = -c.width / 2, c.position.y = -e, u.position.x = -u.width / 2, u.position.y = c.y - c.height / 2 + c.height + e) : (c.visible = !1, u.position.x = -u.width / 2, u.position.y = e / 2)
    }

    function i(t) {
        p.currentSprite.width = u.width + c.width + t - 250, p.currentSprite.visible = !1
    }

    function o(t, e) {
        var n = parseInt(t.style.fontSize, 10);
        n = Math.round(n * e), t.style.fontSize = n + "px"
    }

    function a(t, e) {
        var n = u.width + c.width + e;
        if (n > t) {
            var i = t / n;
            o(u, i), o(c, i)
        }
    }

    function r() {
        u.style = Game.TextStyles.FREE_SPINS_TEXT_STYLE, c.style = Game.TextStyles.FS_LEFT_TEXT_STYLE
    }

    function s(t) {
        var e = function() {
            t()
        };
        h.state.tracks[0].listener = {
            complete: e
        }
    }
    var h, d, p, l, u, c, m, S = ["bloodSplatter1", "bloodSplatter2", "bloodSplatter3", "bloodSplatter4", "bloodSplatter5"],
        w = 130,
        T = 25,
        y = 35,
        f = .5,
        A = 1,
        I = 1,
        g = 1.3,
        x = {};
    Vikings.Utils.addAsConstants(this, {
        GAP: 20,
        MAX_WIDTH: 700,
        ANIMATION: "animation"
    }), Component.Component.apply(this, arguments), this.init = function() {
        var t = new PIXI.Point(0, 0),
            i = new PIXI.Point(0, .5);
        h = Game.PIXIFactory.createAndAddSpineAnimation("freespinCountDown", this), d = h.skeleton.findSlot("placeholder"), p = h.skeleton.findSlot("shadowglow"), d.currentSprite.texture = PIXI.Texture.EMPTY, l = d.currentSprite.parent, l.pivot = t, u = Game.PIXIFactory.createAndAddText(e(), Game.TextStyles.FREE_SPINS_TEXT_STYLE, l, t, i), c = Game.PIXIFactory.createAndAddText("0", Game.TextStyles.FS_LEFT_TEXT_STYLE, l, t, i), n(0, this.GAP)
    }, this.showCountDown = function(o) {
        return r(), c.text = o, u.text = e(o), a(this.MAX_WIDTH, this.GAP), n(o, this.GAP), i(this.GAP), h.state.setAnimation(0, this.ANIMATION), m && l.children.indexOf(m) > -1 && l.removeChild(m), o > 0 && (m = new t(c.x + c.width / 2, c.y), l.addChildAt(m, 0)), new Promise(s)
    }, this.abortCountDownAnimation = function() {
        Game.PIXIUtils.resetSpineAnimation(h)
    }
}, Component.CountDownFreespinsBanner.prototype = Object.create(Component.Component.prototype);
Sys.ns("Vikings"), Vikings.AmbienceManagerController = {
    setupEvents: function() {
        Vikings.AmbienceManagerController.superclass.setupEvents.apply(this, arguments), this.on({
            "notify:audioPlayer.soundLoaded": this.onSoundLoaded
        })
    },
    onSoundLoaded: function() {
        this.loaderClosed && this.changeAmbienceEnableState(!0), this.soundLoaded = !0
    },
    onBeforeLoaderClose: function() {
        this.soundLoaded && this.changeAmbienceEnableState(!0), this.loaderClosed = !0, Vikings.AmbienceManagerController.superclass.onBeforeLoaderClose.apply(this, arguments)
    },
    dispatchPlaySoundRequest: function(e) {
        this.model.isState("ambienceOn") && this.fireEvent("notify:ambienceManager.play", e.name)
    },
    dispatchStopSoundRequest: function(e) {
        this.model.isState("ambienceOn") && this.fireEvent("notify:ambienceManager.stop", e.name)
    }
}, Vikings.AmbienceManagerController = Sys.extend(Game.AmbienceManagerController, Vikings.AmbienceManagerController, "Vikings.AmbienceManagerController");
Sys.ns("Vikings"), Vikings.CoinCap = {
    constructor: function() {
        Vikings.CoinCap.superclass.constructor.apply(this, arguments)
    },
    getStateChanges: function() {
        return {
            coinCapReached: {
                state: {
                    name: "CoinCapReached",
                    execute: function(n) {},
                    waitEvents: {
                        "notify:CoinCap.dialogClosed": !1
                    }
                }
            },
            stopped: {
                queue: [function(n) {
                    this.controller.coinCapReached && n.stateHandler.pushState(n.states.coinCapReached)
                }.bind(this)]
            }
        }
    },
    getDefaultMVCClasses: function() {
        return {
            controller: Vikings.CoinCapController
        }
    }
}, Vikings.CoinCap = Sys.extend(Core.Module, Vikings.CoinCap, "Vikings.CoinCap");
Sys.ns("Vikings"), Vikings.CoinCapController = {
    constructor: function() {
        Vikings.CoinCapController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        this.on({
            "notify:stateHandler.enteringCoinCapReachedState": this.onCoinCapReached,
            "notify:responseParser.responseParsed": this.onServerResponse
        })
    },
    onServerResponse: function(e) {
        this.coinCapReached = e.win && e.win.cap.reached
    },
    onCoinCapReached: function() {
        var e = Services.languageManager;
        this.fireEvent("request:coinsField.showFreeSpinsLeft"), this.fireEvent("request:dialogWindow.showDialog", {
            title: e.getText(Language.Keys.capDialogTitle),
            text: e.getText(Language.Keys.capDialogText),
            buttons: [{
                text: e.getText(Language.Keys.capDialogButtonText),
                action: function() {
                    this.fireEvent("notify:CoinCap.dialogClosed")
                }.bind(this)
            }]
        })
    }
}, Vikings.CoinCapController = Sys.extend(Core.Controller, Vikings.CoinCapController, "Vikings.CoinCapController");
Sys.ns("pixiGenericSlot"), pixiGenericSlot.JMXSpeedUp = {
    constructor: function() {
        pixiGenericSlot.JMXSpeedUp.superclass.constructor.apply(this, arguments)
    },
    getMixinDependencies: function() {
        return ["animation"]
    },
    getDefaultMVCClasses: function() {
        return {
            view: pixiGenericSlot.JMXSpeedUpView,
            controller: pixiGenericSlot.JMXSpeedUpController
        }
    }
}, pixiGenericSlot.JMXSpeedUp = Sys.extend(Core.Module, pixiGenericSlot.JMXSpeedUp, "pixiGenericSlot.JMXSpeedUp");
Sys.ns("pixiGenericSlot"), pixiGenericSlot.JMXSpeedUpView = {
    constructor: function() {
        pixiGenericSlot.JMXSpeedUpView.superclass.constructor.apply(this, arguments)
    },
    init: function() {
        this.setUpSpeedControl()
    },
    setUpSpeedControl: function() {
        var e = this;
        e.speed = new Sys.Element({
            tag: "div",
            id: "JMXSpeed",
            style: "position: absolute;top: 65%;left: 0;width: 110px;height: 55px;color: white;environment-color: rgba(0,0,0, 0.60);z-index: 1000;cursor: default;display: none",
            renderTo: "gameWrapper"
        }), e.speedTop = new Sys.Element({
            tag: "div",
            id: "speedTop",
            style: "width: 100%;height: 50%;text-align: center;line-height: 35px;",
            textContent: "speed"
        }), e.speedBottom = new Sys.Element({
            tag: "div",
            id: "speedBottom",
            style: "width: 110px;height: 50%;"
        }), e.speedButtonMinus = new Sys.Element({
            tag: "div",
            id: "speedButtonMinus",
            style: "float: left;width: 30px;text-align: center;",
            textContent: "-"
        }), e.speedValue = new Sys.Element({
            tag: "div",
            id: "speedValue",
            style: "float: left;width: 50px;text-align: center;",
            textContent: "1"
        }), e.speedButtonPlus = new Sys.Element({
            tag: "div",
            id: "speedButtonPlus",
            style: "display: inline-block;width: 30px;text-align: center;line-height: 40pxheight: 40px;",
            textContent: "+"
        }), e.speedBottom.add(e.speedButtonMinus), e.speedBottom.add(e.speedValue), e.speedBottom.add(e.speedButtonPlus), e.speed.add(e.speedTop), e.speed.add(e.speedBottom), e.currentSpeedIndex = 3, e.updateSpeed(0)
    },
    updateSpeed: function(e) {
        var t = this,
            n = {},
            d = [.1, .25, .5, 1, 2, 10];
        t.currentSpeedIndex += e, t.currentSpeedIndex >= d.length && (t.currentSpeedIndex = 0), t.currentSpeedIndex < 0 && (t.currentSpeedIndex = d.length - 1), n.basic = d[t.currentSpeedIndex], t.speedValue.el.textContent = d[t.currentSpeedIndex], Object.defineProperty(pixiGenericSlot, "globalGameSpeed", {
            get: function() {
                return n.basic || 1
            },
            set: function() {
                throw new Error("The globalGameSpeed is used for debugging purposes only and shouldn't be changed manually")
            },
            configurable: !0
        })
    },
    toggle: function() {
        var e = this.speed.el.style;
        "none" === e.display ? e.display = "block" : e.display = "none"
    }
}, pixiGenericSlot.JMXSpeedUpView = Sys.extend(Core.View, pixiGenericSlot.JMXSpeedUpView, "pixiGenericSlot.JMXSpeedUpView");
Sys.ns("pixiGenericSlot"), pixiGenericSlot.JMXSpeedUpController = {
    constructor: function() {
        pixiGenericSlot.JMXSpeedUpController.superclass.constructor.apply(this, arguments)
    },
    setupEvents: function() {
        var e = this;
        e.on({
            "request.JMX.toggleSpeedUpPanel": e.view.toggle.bind(e.view),
            "request.JMX.speedUp": e.view.updateSpeed.bind(e.view, 1),
            "request.JMX.speedDown": e.view.updateSpeed.bind(e.view, -1)
        })
    }
}, pixiGenericSlot.JMXSpeedUpController = Sys.extend(Core.Controller, pixiGenericSlot.JMXSpeedUpController, "pixiGenericSlot.JMXSpeedUpController");
Sys.ns("Integration.OpenBet"), Integration.OpenBet.ResponseParserControllerOverride = {
    doIntegrationSpecificResponseHandling: function(e) {
        var r, t;
        return Sys.isDefined(e) && "rcinfo" !== e.clientaction && "rcreset" !== e.clientaction ? (r = e.credit + e.openbet.freebets, t = e.openbet.rgitoken, isNaN(r) || (e.credit = r), Sys.isDefined(t) && (Resources.readData("extraParams")["openbet.rgitoken"] = encodeURIComponent(t)), e) : e
    }
}, Integration.OpenBet.ServerManagerModelOverride = {
    doIntegrationSpecificRequestUrlUpdates: function(e) {
        var r = Resources.readData("extraParams"),
            t = e;
        return Sys.iterate(r, function(e, r) {
            e.match(/openbet\.\w+/) && (t += "&" + e + "=" + r)
        }), t
    }
}, Integration.OpenBet.ErrorManagerControllerOverride = {
    handleIntegrationSpecificErrors: function(e) {
        var r = this,
            t = Sys.utils.getErrorCode(e),
            n = Sys.utils.getResponseParameter("errordata", e);
        return !(!Sys.isDefined(t) || t < 997 || t > 1e3) && (Sys.isDefined(n) && (n = decodeURIComponent(n), n = n.replace(/\+/g, " ")), {
            title: "Error (" + t + ")",
            text: n,
            buttons: r.getButtons([{
                type: "casino",
                reason: 3
            }]),
            fatal: !0
        })
    }
}, Integration.OpenBet.GameHistoryOverride = function() {
    var e = Game.getHistoryTab;
    Game.getHistoryTab = function(r, t, n) {
        n && e(r, t, n)
    }
}, Integration.OpenBet.applyOverrides = function() {
    var e;
    Sys.override(Core.ResponseParserController, Integration.OpenBet.ResponseParserControllerOverride), Sys.override(Core.ServerManagerModel, Integration.OpenBet.ServerManagerModelOverride), Sys.override(Core.ErrorManagerController, Integration.OpenBet.ErrorManagerControllerOverride), (e = Integration.OpenBet.GameHistoryOverride)()
}, Sys.openBetMode && Integration.OpenBet.applyOverrides();
Sys.ns("Integration.GCM"), Integration.GCM.ErrorManagerModel = {
        setupDialogConfig: function() {
            var e, r = {};
            return Sys.each([11, 13], function(a) {
                e = Services.languageManager.getText(String(a)), r[a] = {
                    category: "RECOVERABLE_ERROR",
                    severity: "INFO",
                    errorCode: "LIMIT_EXCEEDED",
                    message: e,
                    extraParameters: {
                        originalError: a,
                        originalTitle: Services.languageManager.getText(Language.Keys.playLimit),
                        originalMessage: e
                    },
                    revert: !0
                }
            }), e = Services.languageManager.getText(Language.Keys.freeRounds_expired), r[12] = {
                category: "RECOVERABLE_ERROR",
                severity: "INFO",
                errorCode: "FREEROUNDS_EXPIRED",
                message: e,
                extraParameters: {
                    originalError: 12,
                    originalTitle: Services.languageManager.getText(Language.Keys.freeRounds_expired)
                },
                revert: !1
            }, e = Services.languageManager.getText(Language.Keys.returnToLobby), r[20] = {
                category: "CONNECTION_ERROR",
                severity: "ERROR",
                errorCode: "SESSION_TIMEOUT",
                message: e,
                extraParameters: {
                    originalError: 20,
                    originalTitle: Services.languageManager.getText(Language.Keys.btn_sessionTimeOut),
                    originalMessage: e,
                    reason: 3
                },
                revert: !1
            }, Sys.each([10, 15, 51, 100, 101, 102], function(a) {
                e = Services.languageManager.getText(Language.Keys.deposit), r[a] = {
                    category: "INSUFFICIENT_FUNDS",
                    severity: "INFO",
                    errorCode: "CLIENT_INSUFFICIENT_FUNDS",
                    message: e,
                    extraParameters: {
                        originalError: a,
                        originalTitle: Services.languageManager.getText(Language.Keys.outOfMoney),
                        originalMessage: e,
                        reason: 5
                    },
                    revert: !0
                }
            }), Sys.each([0, 53, 56, 58], function(a) {
                e = Services.languageManager.getText(Language.Keys.gameUnavailable), r[a] = {
                    category: "CONNECTION_ERROR",
                    severity: "ERROR",
                    errorCode: "CANNOT_CONNECT_TO_SERVER",
                    message: e,
                    extraParameters: {
                        originalError: a,
                        originalTitle: Services.languageManager.getText(Language.Keys.gameUnavailable),
                        reason: 9
                    },
                    revert: !1
                }
            }), e = Services.languageManager.getText(Language.Keys.accountUnavailable), r[70] = {
                category: "LOGIN_ERROR",
                severity: "ERROR",
                errorCode: "ACCOUNT_UNAVAILABLE",
                message: e,
                extraParameters: {
                    originalError: 70,
                    originalTitle: Services.languageManager.getText(Language.Keys.accountUnavailable)
                },
                revert: !1
            }, e = Services.languageManager.getText(Language.Keys.reload), r.http = {
                category: "CONNECTION_ERROR",
                severity: "ERROR",
                errorCode: "CANNOT_CONNECT_TO_SERVER",
                message: e,
                extraParameters: {
                    originalError: "httpError",
                    originalTitle: Services.languageManager.getText(Language.Keys.connectionLost),
                    originalMessage: e,
                    reason: 9
                },
                revert: !1
            }, e = Services.languageManager.getText(Language.Keys.deposit), r.clientOutOfMoney = {
                category: "INSUFFICIENT_FUNDS",
                severity: "INFO",
                errorCode: "CLIENT_INSUFFICIENT_FUNDS",
                message: e,
                extraParameters: {
                    originalError: "clientOutOfMoney",
                    originalTitle: Services.languageManager.getText(Language.Keys.outOfMoney),
                    reason: 9
                },
                revert: !1
            }, e = Services.languageManager.getText(Language.Keys.returnToLobby), r.generic = {
                category: "NON_RECOVERABLE_ERROR",
                severity: "ERROR",
                errorCode: "CLIENTERROR",
                message: e,
                extraParameters: {
                    originalError: "generic",
                    originalTitle: Services.languageManager.getText(Language.Keys.error),
                    originalMessage: e,
                    reason: 9
                },
                revert: !1
            }, r
        }
    }, Integration.GCM.ErrorManagerDesktopModel = {
        setupDialogConfig: function() {
            return Core.ErrorManagerDesktopModel.superclass.setupDialogConfig.apply(this, arguments)
        }
    }, Integration.GCM.ErrorManagerController = {
        showDialog: function(e) {
            var r = "http" === e.errorCode ? 0 : e.errorCode;
            this.fireEvent("notify:errorManager.error", r, Services.languageManager.getText(r)), this.fireEvent("request:gcmProxy.handleError", e)
        },
        handleIntegrationSpecificErrors: function(e) {
            var r, a = Sys.utils.getResponseParameter("openbet.error.xml", e);
            return Sys.isDefined(a) && (r = {
                RGIError: !0,
                RGIXML: a.replace(/\+/g, " ")
            }), r
        },
        getDialogConfig: function(e) {
            return this.model.getDialogConfig(e)
        },
        handleClientOutOfMoneyError: function() {
            this.showDialogForErrorCode("clientOutOfMoney")
        }
    }, Integration.GCM.DialogWindowController = {
        onShowDialogRequest: function(e) {
            var r = this,
                a = "stopped" === e.severity,
                o = {
                    category: "MULTI_CHOICE_DIALOG",
                    severity: a ? "ERROR" : "INFO",
                    message: Sys.isDefined(e.text) ? e.text : e.title,
                    errorCode: "ERROR",
                    actions: [],
                    revert: !1,
                    extraParameters: {}
                },
                t = [];
            Sys.each(e.buttons, function(e) {
                t.push(e.text), o.actions.push(e.action)
            }), o.extraParameters.options = t, r.fireEvent("request:gcmProxy.handleError", o), r.model.storeData("currentDialogConfig", e), r.model.setState("showing")
        }
    }, Integration.GCM.SlowRequestAnimationController = {
        onShowDialog: function() {}
    },
    function() {
        Sys.isGcmEnabled && (Sys.override(Core.ErrorManagerModel, Integration.GCM.ErrorManagerModel), Sys.override(Core.ErrorManagerController, Integration.GCM.ErrorManagerController), Sys.override(Core.DialogWindowController, Integration.GCM.DialogWindowController), Sys.override(Core.SlowRequestAnimationController, Integration.GCM.SlowRequestAnimationController), Sys.isDefined(Core.ErrorManagerDesktopModel) && Sys.override(Core.ErrorManagerDesktopModel, Integration.GCM.ErrorManagerDesktopModel))
    }();
Sys.apply(Sys.utils, {
    numberToFixedDigits: function(i, t) {
        return Math.abs(i) < 1 ? i.toFixed(t - 1) : i >= 1e3 ? i.toString() : i.toPrecision(t)
    }
});
Sys.ns("Game"), Sys.isDefined(window.injectWeinre) && injectWeinre(),
    function() {
        var e = new Core.StateHandler;
        StereoPannerNode.polyfill(), Game.moduleLoader = new Core.Slots.ModuleLoader({
            stateHandler: e
        }), e.initStateHandler(), Sys.isDefined(Integration) && Sys.isDefined(Integration.GCM) && (Integration.GCM.availableOptions = ["MUTE", "GAME_PREFERENCES", "PAYTABLE", "ABOUT", "TURBO"])
    }();